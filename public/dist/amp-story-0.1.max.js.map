{"version":3,"sources":["node_modules/browser-pack/_prelude.js","build/amp-story-0.1.css.js","extensions/amp-animation/0.1/web-animation-types.js","extensions/amp-story/0.1/amp-story-auto-ads.js","extensions/amp-story/0.1/amp-story-base-layer.js","extensions/amp-story/0.1/amp-story-grid-layer.js","extensions/amp-story/0.1/amp-story-hint.js","extensions/amp-story/0.1/amp-story-page.js","extensions/amp-story/0.1/amp-story-state-service.js","extensions/amp-story/0.1/amp-story.js","extensions/amp-story/0.1/analytics.js","extensions/amp-story/0.1/animation-presets.js","extensions/amp-story/0.1/animation-types.js","extensions/amp-story/0.1/animation.js","extensions/amp-story/0.1/audio.js","extensions/amp-story/0.1/background.js","extensions/amp-story/0.1/bookend.js","extensions/amp-story/0.1/default-media.js","extensions/amp-story/0.1/development-ui.js","extensions/amp-story/0.1/embed-mode.js","extensions/amp-story/0.1/events.js","extensions/amp-story/0.1/jsonld.js","extensions/amp-story/0.1/loading-spinner.js","extensions/amp-story/0.1/logging.js","extensions/amp-story/0.1/media-pool.js","extensions/amp-story/0.1/media-tasks.js","extensions/amp-story/0.1/navigation-state.js","extensions/amp-story/0.1/origin-whitelist.js","extensions/amp-story/0.1/page-advancement.js","extensions/amp-story/0.1/page-scaling.js","extensions/amp-story/0.1/pagination-buttons.js","extensions/amp-story/0.1/progress-bar.js","extensions/amp-story/0.1/related-articles.js","extensions/amp-story/0.1/share.js","extensions/amp-story/0.1/simple-template.js","extensions/amp-story/0.1/sources.js","extensions/amp-story/0.1/system-layer.js","extensions/amp-story/0.1/toast.js","extensions/amp-story/0.1/utils.js","extensions/amp-story/0.1/variable-service.js","node_modules/document-register-element/build/document-register-element.node.js","node_modules/promise-pjs/promise.js","src/action-trust.js","src/analytics.js","src/clipboard.js","src/common-signals.js","src/config.js","src/cookies.js","src/dom.js","src/element-service.js","src/event-helper-listen.js","src/event-helper.js","src/experiments.js","src/gesture-recognizers.js","src/gesture.js","src/json.js","src/layout.js","src/log.js","src/mode-object.js","src/mode.js","src/motion.js","src/observable.js","src/origin-experiments.js","src/pass.js","src/polyfills.js","src/polyfills/array-includes.js","src/polyfills/document-contains.js","src/polyfills/domtokenlist-toggle.js","src/polyfills/math-sign.js","src/polyfills/object-assign.js","src/polyfills/promise.js","src/service.js","src/services.js","src/string.js","src/style.js","src/types.js","src/url-parse-query-string.js","src/url-try-decode-uri-component.js","src/url.js","src/utils/array.js","src/utils/bytes.js","src/utils/function.js","src/utils/key-codes.js","src/utils/object.js","src/utils/rate-limit.js","src/video-interface.js","third_party/css-escape/css-escape.js"],"names":[],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACn6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A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","file":"amp-story-0.1.max.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export const CSS = \".i-amphtml-story-background{background-color:transparent}amp-story[standalone][desktop]{max-width:none!important;max-height:none!important;width:100vw!important}[desktop] .i-amphtml-story-logo{display:block!important}.i-amphtml-story-background-container{opacity:.8!important;position:absolute!important;top:0!important;right:0!important;bottom:0!important;left:0!important;overflow:hidden!important}.i-amphtml-story-background-overlay,.i-amphtml-story-background-overlay:after{position:absolute!important;left:0!important;top:0!important;height:100%!important;width:100%!important;z-index:1!important;background-color:rgba(0,0,0,0.2)!important}.i-amphtml-story-background-overlay:after{content:\\\"\\\"!important;display:block!important;opacity:0!important;background-color:rgba(0,0,0,0.5)!important;-webkit-transition:opacity 0.3s!important;transition:opacity 0.3s!important}.i-amphtml-story-bookend-active .i-amphtml-story-background-overlay:after{opacity:1!important}.i-amphtml-story-background{position:absolute!important;top:-150px!important;right:-150px!important;bottom:-150px!important;left:-150px!important;opacity:0!important;-webkit-filter:blur(50px)!important;filter:blur(50px)!important;background-size:cover!important;background-color:transparent!important;background-position:50%!important;will-change:opacity,z-index!important;z-index:0!important}.i-amphtml-story-background.active{opacity:1!important;z-index:1!important}[desktop] amp-story-page{-webkit-transform:scale(1.0) translateX(-350%) translateY(0%)!important;transform:scale(1.0) translateX(-350%) translateY(0%)!important;opacity:.05!important;-webkit-transform-origin:left!important;transform-origin:left!important;border-radius:16px!important}[desktop] amp-story-page[distance=\\\"0\\\"],[desktop] amp-story-page[distance=\\\"1\\\"]{-webkit-transition:opacity 300ms linear,-webkit-transform 300ms cubic-bezier(0.4,0.0,0.2,1)!important;transition:opacity 300ms linear,-webkit-transform 300ms cubic-bezier(0.4,0.0,0.2,1)!important;transition:opacity 300ms linear,transform 300ms cubic-bezier(0.4,0.0,0.2,1)!important;transition:opacity 300ms linear,transform 300ms cubic-bezier(0.4,0.0,0.2,1),-webkit-transform 300ms cubic-bezier(0.4,0.0,0.2,1)!important}[desktop] .i-amphtml-story-button-container{position:absolute!important;top:0!important;bottom:0!important;left:0!important;right:0!important;z-index:100002!important;pointer-events:none!important;display:block!important}[desktop] .i-amphtml-story-button-container:before{content:\\\"\\\";position:absolute!important;top:0!important;bottom:0!important;width:calc(50vw - 23vh - 32px)!important}.i-amphtml-story-back-prev>.i-amphtml-story-page-sentinel,.i-amphtml-story-button-move,.i-amphtml-story-fwd-next>.i-amphtml-story-page-sentinel{pointer-events:all!important}.i-amphtml-story-button-hidden>.i-amphtml-story-button-move{cursor:default!important;pointer-events:none!important;opacity:0!important}[desktop]>.next-container:before{right:0!important;background:-webkit-linear-gradient(left,rgba(33,33,33,0),rgba(33,33,33,0.32))!important;background:linear-gradient(90deg,rgba(33,33,33,0) 0%,rgba(33,33,33,0.32))!important}[desktop]>.prev-container:before{left:0!important;background:-webkit-linear-gradient(left,rgba(33,33,33,0.32),rgba(33,33,33,0))!important;background:linear-gradient(90deg,rgba(33,33,33,0.32) 0%,rgba(33,33,33,0))!important}[desktop]>.next-container>.i-amphtml-story-button-move{right:0!important}.prev-container>.i-amphtml-story-page-sentinel,[desktop] amp-story-page[pre-active]{-webkit-transform:scale(0.9) translateX(calc(-150% - 64px)) translateY(0%)!important;transform:scale(0.9) translateX(calc(-150% - 64px)) translateY(0%)!important}[desktop] amp-story-page[active]{-webkit-transform:scale(1.0) translateX(-50%) translateY(0%)!important;transform:scale(1.0) translateX(-50%) translateY(0%)!important;opacity:1!important}.next-container>.i-amphtml-story-page-sentinel,[desktop] amp-story-page[active]+amp-story-page{-webkit-transform:scale(0.9) translate(calc(50% + 64px))!important;transform:scale(0.9) translate(calc(50% + 64px))!important}[desktop] amp-story-page[active]+amp-story-page~amp-story-page,[dir=rtl] [desktop] amp-story-page{-webkit-transform:scale(0.9) translateX(250vw) translateY(0%)!important;transform:scale(0.9) translateX(250vw) translateY(0%)!important}[dir=rtl] [desktop] amp-story-page[pre-active]{-webkit-transform:scale(0.9) translateX(calc(50% + 64px)) translateY(0%)!important;transform:scale(0.9) translateX(calc(50% + 64px)) translateY(0%)!important}[dir=rtl] [desktop] amp-story-page[active]{-webkit-transform:scale(1.0) translateX(-50%) translateY(0%)!important;transform:scale(1.0) translateX(-50%) translateY(0%)!important;opacity:1!important}[dir=rtl] [desktop] amp-story-page[active]+amp-story-page{-webkit-transform:scale(0.9) translateX(calc(-150% - 64px)) translateY(0%)!important;transform:scale(0.9) translateX(calc(-150% - 64px)) translateY(0%)!important}[dir=rtl] [desktop] amp-story-page[active]+amp-story-page~amp-story-page{-webkit-transform:scale(0.9) translateX(-350%) translateY(0%)!important;transform:scale(0.9) translateX(-350%) translateY(0%)!important}.i-amphtml-story-page-sentinel,[desktop]>amp-story-page{left:50%!important;right:auto!important;margin:auto!important;max-height:75vh!important;max-width:45vh!important;min-width:320px!important;min-height:533px!important}[desktop]>amp-story-page{box-shadow:0 0 15px rgba(0,0,0,0.4)!important}.i-amphtml-story-page-sentinel{width:100vw!important;height:100vh!important;margin-left:-32px!important;cursor:pointer}.i-amphtml-story-button-move,.i-amphtml-story-page-sentinel{position:absolute!important;top:0!important;bottom:0!important;z-index:100002!important}.i-amphtml-story-button-move{margin:auto 40px!important;width:60px!important;height:60px!important;border-radius:50%!important;border:0!important;background-color:#fff!important;background-repeat:no-repeat!important;background-size:12px 17px!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important;-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;opacity:.5!important;-webkit-transition:opacity 150ms linear,-webkit-transform 300ms linear!important;transition:opacity 150ms linear,-webkit-transform 300ms linear!important;transition:opacity 150ms linear,transform 300ms linear!important;transition:opacity 150ms linear,transform 300ms linear,-webkit-transform 300ms linear!important;cursor:pointer!important;outline:none!important}.i-amphtml-story-next-hover>amp-story-page[active]+amp-story-page,.i-amphtml-story-prev-hover>amp-story-page[pre-active]{opacity:0.3!important}.prev-container>.i-amphtml-story-button-move{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='25' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M15.7 22l-9.5-9.5L15.7 3l-3-3L.4 12.6 12.8 25'/%3E%3C/svg%3E\\\")!important;background-position:45% 50%!important;left:0!important}.i-amphtml-story-fwd-next>.i-amphtml-story-button-move{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg width='16' height='25' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M.3 3l9.5 9.5L.3 22l3 3 12.4-12.5L3.2 0'/%3E%3C/svg%3E\\\")!important;background-position:55% 50%!important}.i-amphtml-story-fwd-replay>.i-amphtml-story-button-move{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24'%3E%3Cpath d='M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")!important;background-position:50%;background-size:32px 32px!important}.i-amphtml-story-fwd-more>.i-amphtml-story-button-move{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z'/%3E%3C/svg%3E\\\")!important;background-position:50%;background-size:32px 32px!important}.i-amphtml-story-next-hover>.next-container>.i-amphtml-story-button-move,.i-amphtml-story-prev-hover>.prev-container>.i-amphtml-story-button-move{-webkit-transform:scale(1.1)!important;transform:scale(1.1)!important;opacity:1!important}.i-amphtml-story-prev-hover>.i-amphtml-story-button-hidden>.i-amphtml-story-button-move{opacity:0!important}.i-amphtml-story-next-hover>.i-amphtml-story-fwd-next>.i-amphtml-story-button-move{-webkit-transform:translateX(8px)!important;transform:translateX(8px)!important;opacity:1!important}.i-amphtml-story-prev-hover>.i-amphtml-story-back-close-bookend>.i-amphtml-story-button-move,.i-amphtml-story-prev-hover>.i-amphtml-story-back-prev>.i-amphtml-story-button-move{-webkit-transform:translateX(-8px)!important;transform:translateX(-8px)!important;opacity:1!important}.i-amphtml-story-top{position:relative!important;display:block!important;height:96px!important;width:100%!important;z-index:1!important;background:-webkit-linear-gradient(top,rgba(33,33,33,0.32),rgba(33,33,33,0))!important;background:linear-gradient(180deg,rgba(33,33,33,0.32) 0%,rgba(33,33,33,0))!important}.i-amphtml-story-share-pill{display:none!important;position:absolute!important;top:0!important;right:40px!important;bottom:0!important;margin:auto!important;height:40px!important;-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important}[desktop] .i-amphtml-story-share-pill{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.i-amphtml-story-share-pill:after{font-family:Roboto,sans-serif!important;content:\\\"SHARE\\\"!important;position:absolute!important;right:15px!important;text-align:center!important;width:60px!important;font-size:12px!important;font-weight:700!important;letter-spacing:.5px!important;margin:auto!important;color:#fff!important}.i-amphtml-story-share-pill:before{position:absolute!important;content:\\\"\\\"!important;width:58px!important;height:40px!important;padding:0 16px!important;background-color:hsla(0,0%,100%,0.2)!important;border-radius:500px!important;-webkit-transition:width 300ms ease-in-out!important;transition:width 300ms ease-in-out!important;right:0!important}.i-amphtml-story-share-pill .i-amphtml-story-share-item{opacity:0!important;-webkit-transition:opacity 300ms linear!important;transition:opacity 300ms linear!important}.i-amphtml-story-share-pill:hover .i-amphtml-story-share-item{opacity:1!important}.i-amphtml-story-share-pill .i-amphtml-story-share-item{margin:0!important;width:48px!important;height:48px!important;padding:0!important}.i-amphtml-story-share-pill:hover .i-amphtml-story-share-item:nth-child(9){-webkit-transition-delay:30ms!important;transition-delay:30ms!important}.i-amphtml-story-share-pill:hover .i-amphtml-story-share-item:nth-child(8){-webkit-transition-delay:60ms!important;transition-delay:60ms!important}.i-amphtml-story-share-pill:hover .i-amphtml-story-share-item:nth-child(7){-webkit-transition-delay:90ms!important;transition-delay:90ms!important}.i-amphtml-story-share-pill:hover .i-amphtml-story-share-item:nth-child(6){-webkit-transition-delay:120ms!important;transition-delay:120ms!important}.i-amphtml-story-share-pill:hover .i-amphtml-story-share-item:nth-child(5){-webkit-transition-delay:150ms!important;transition-delay:150ms!important}.i-amphtml-story-share-pill:hover .i-amphtml-story-share-item:nth-child(4){-webkit-transition-delay:180ms!important;transition-delay:180ms!important}.i-amphtml-story-share-pill:hover .i-amphtml-story-share-item:nth-child(3){-webkit-transition-delay:210ms!important;transition-delay:210ms!important}.i-amphtml-story-share-pill:hover .i-amphtml-story-share-item:nth-child(2){-webkit-transition-delay:240ms!important;transition-delay:240ms!important}.i-amphtml-story-share-pill:hover .i-amphtml-story-share-item:first-child{-webkit-transition-delay:270ms!important;transition-delay:270ms!important}.i-amphtml-story-share-pill .i-amphtml-story-share-list{padding:0!important;margin:0 72px 0 0!important}.i-amphtml-story-share-pill:hover:before{width:calc(100% - 32px)!important}.i-amphtml-story-share-pill .i-amphtml-story-share-icon{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:48px!important;height:48px!important;padding:0}[desktop] .i-amphtml-story-share-icon{font-size:0px!important;background-size:24px 24px!important;background-position:50%!important;padding:0!important}[desktop] .i-amphtml-story-share-icon.amp-social-share-facebook{background-size:28px 28px!important;background-position:50%!important}[desktop] .i-amphtml-story-share-icon:active:before,[desktop] .i-amphtml-story-share-icon:before{display:none!important}[desktop] .i-amphtml-story-share-list{margin-right:72px!important}[desktop] .i-amphtml-story-system-layer{background:-webkit-linear-gradient(top,rgba(33,33,33,0),rgba(33,33,33,0.32))!important;background:linear-gradient(180deg,rgba(33,33,33,0) 0%,rgba(33,33,33,0.32))!important;top:auto!important;bottom:0!important;height:96px!important;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}[desktop] .i-amphtml-story-progress-bar{position:relative!important;height:3px!important;width:33.33333vw!important;margin:0px!important}[desktop] .i-amphtml-story-page-progress-bar{border-radius:100px!important}.i-amphtml-story-ui-left,[desktop] .i-amphtml-story-system-layer .i-amphtml-story-ui-right .i-amphtml-story-mute-audio-control,[desktop] .i-amphtml-story-system-layer .i-amphtml-story-ui-right .i-amphtml-story-unmute-audio-control{display:none!important}[desktop] .i-amphtml-story-system-layer .i-amphtml-story-ui-left{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;height:40px!important;-webkit-box-flex:1!important;-ms-flex:1!important;flex:1!important;min-width:200px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;margin-right:32px}[desktop] .i-amphtml-story-system-layer .i-amphtml-story-ui-right{display:block!important;-webkit-box-flex:1!important;-ms-flex:1!important;flex:1!important}[desktop] .i-amphtml-story-top{z-index:100002!important}[desktop] .i-amphtml-story-bookend .i-amphtml-story-share-widget{display:none!important}[desktop] .i-amphtml-story-bookend-inner{box-sizing:border-box!important;min-height:100vh!important;padding:104px 156px 64px!important;margin:0!important}[desktop] .i-amphtml-story-bookend-inner:before,[desktop] .i-amphtml-story-bookend-replay{display:none!important}[desktop] .i-amphtml-story-bookend-overflow{margin-top:0!important;margin-bottom:0!important}@media (min-width:952px){[desktop] .i-amphtml-story-bookend-article{max-width:50%!important}}@media (min-width:1272px){[desktop] .i-amphtml-story-bookend-article{max-width:33%!important}}.i-amphtml-story-grid-template-vertical{-ms-flex-line-pack:start;align-content:start;grid-gap:16px;-webkit-box-pack:stretch;-ms-flex-pack:stretch;justify-content:stretch;justify-items:start;padding:32px}.i-amphtml-story-grid-template-vertical>*{width:100%}.i-amphtml-story-grid-template-horizontal{-ms-flex-line-pack:stretch;align-content:stretch;-webkit-box-align:start;-ms-flex-align:start;align-items:start;grid-gap:16px;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:start;padding:32px}.i-amphtml-story-grid-template-thirds{padding:32px}amp-story-grid-layer{padding:68px 32px 32px}.i-amphtml-story-hint-container{-webkit-transition-property:opacity!important;transition-property:opacity!important;-webkit-transition-duration:200ms!important;transition-duration:200ms!important;contain:strict!important;pointer-events:none!important;position:absolute!important;left:0!important;top:0!important;right:0!important;bottom:0!important}.i-amphtml-story-hint-container.i-amphtml-hidden{opacity:0!important}[desktop] .i-amphtml-story-hint-container{display:none!important}.i-amphtml-story-hint-container .i-amphtml-story-navigation-help-overlay{position:absolute!important;left:0!important;top:0!important;right:0!important;bottom:0!important;background:rgba(0,0,0,0.7)!important;-webkit-box-orient:horizontal!important;-webkit-box-direction:normal!important;-ms-flex-direction:row!important;flex-direction:row!important;color:#fff!important;font-size:20px!important;padding:16px 0!important}.i-amphtml-story-navigation-help-section{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.prev-page{-webkit-box-flex:1!important;-ms-flex:1!important;flex:1!important}.show-first-page-overlay .i-amphtml-story-navigation-help-overlay{background:transparent!important}.show-first-page-overlay .prev-page{background:-webkit-linear-gradient(left,rgba(0,0,0,0.5),transparent)!important;background:linear-gradient(90deg,rgba(0,0,0,0.5),transparent)!important}.show-first-page-overlay .next-page{opacity:0!important}.show-first-page-overlay .i-amphtml-story-hint-placeholder{display:none!important}.show-first-page-overlay .i-amphtml-story-navigation-help-overlay{padding:0px!important}.i-amphtml-story-hint-container .next-page{-webkit-box-flex:3!important;-ms-flex:3!important;flex:3!important;border-left:1px dashed transparent!important;border-image-source:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30'%3E%3Cpath fill='none' stroke-linecap='square' stroke-dasharray='6,6' stroke='%23fff' d='M0 0v30'/%3E%3C/svg%3E\\\")!important;border-image-slice:33% 33%!important;border-image-repeat:repeat!important;border-image-width:14px!important}.show-first-page-overlay .i-amphtml-story-navigation-help-overlay,.show-navigation-overlay .i-amphtml-story-navigation-help-overlay{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.show-first-page-overlay .prev-page .i-amphtml-story-hint-tap-button{visibility:hidden}.show-navigation-overlay .prev-page .i-amphtml-story-hint-tap-button-icon:before{content:\\\"\\\"!important;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 24 24'%3E%3Cpath d='M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")!important;width:30px!important;height:30px!important;display:inline-block!important}.i-amphtml-story-hint-container .i-amphtml-story-hint-tap-button{position:relative!important;width:44px!important;height:44px!important}.i-amphtml-story-hint-tap-button:after,.i-amphtml-story-hint-tap-button:before{position:absolute!important;content:\\\"\\\"!important;width:44px!important;height:44px!important;border-radius:50%!important;background-color:hsla(0,0%,100%,0.5)!important;left:0!important;right:0!important}.i-amphtml-story-hint-tap-button:before{-webkit-animation:expandingBubble 1000ms infinite cubic-bezier(0.4,0,0.2,1)!important;animation:expandingBubble 1000ms infinite cubic-bezier(0.4,0,0.2,1)!important}.i-amphtml-story-hint-tap-button:after{background-color:#fff!important}.i-amphtml-story-hint-container .i-amphtml-story-hint-tap-button-icon{position:absolute!important;z-index:1!important;height:44px!important;width:44px!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important;-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important}.i-amphtml-story-hint-tap-button-icon:after,.i-amphtml-story-hint-tap-button-icon:before{vertical-align:middle!important;margin:0 2px!important;background-position:50%}.next-page .i-amphtml-story-hint-tap-button-icon:after{content:\\\"\\\"!important;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 24 24'%3E%3Cpath d='M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")!important;width:24px!important;height:24px!important;display:inline-block!important}.i-amphtml-story-hint-placeholder{top:50%!important;position:absolute}.i-amphtml-story-hint-container .i-amphtml-story-hint-tap-button-text{color:#fff!important;font-size:16px!important;font-family:Roboto-Medium,sans-serif!important;margin-top:24px!important;text-align:center!important}@-webkit-keyframes expandingBubble{0%{-webkit-transform:scale(1);transform:scale(1);opacity:0}50%{-webkit-transform:scale(1.5);transform:scale(1.5);opacity:1}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}@keyframes expandingBubble{0%{-webkit-transform:scale(1);transform:scale(1);opacity:0}50%{-webkit-transform:scale(1.5);transform:scale(1.5);opacity:1}to{-webkit-transform:scale(1);transform:scale(1);opacity:0}}.i-amphtml-story-ad-link{background-color:#fff!important;border-radius:20px!important;bottom:32px!important;box-shadow:0px 2px 12px rgba(0,0,0,0.16)!important;color:#4285f4!important;font-size:0px!important;font-family:Roboto-Bold,sans-serif!important;height:36px!important;left:50%!important;letter-spacing:0.2px!important;line-height:36px;margin-left:-60px!important;opacity:0!important;position:absolute!important;-webkit-transform:scale(0)!important;transform:scale(0)!important;text-align:center;text-decoration:none!important;width:120px!important}amp-story-page[active] .i-amphtml-story-ad-link{-webkit-animation-delay:100ms!important;animation-delay:100ms!important;-webkit-animation-duration:300ms!important;animation-duration:300ms!important;-webkit-animation-timing-function:cubic-bezier(0.4,0.0,0.2,1)!important;animation-timing-function:cubic-bezier(0.4,0.0,0.2,1)!important;-webkit-animation-fill-mode:forwards!important;animation-fill-mode:forwards!important;-webkit-animation-name:ad-cta!important;animation-name:ad-cta!important}@-webkit-keyframes ad-cta{0%{opacity:0;font-size:0px;-webkit-transform:scale(0);transform:scale(0)}to{opacity:1;font-size:13px;-webkit-transform:scale(1);transform:scale(1)}}@keyframes ad-cta{0%{opacity:0;font-size:0px;-webkit-transform:scale(0);transform:scale(0)}to{opacity:1;font-size:13px;-webkit-transform:scale(1);transform:scale(1)}}.i-amphtml-ad-overlay-container{height:24px!important;padding:14px 0 0!important;position:absolute!important;z-index:5!important}.i-amphtml-story-ad-attribution{color:#fff!important;font-size:18px!important;font-family:Roboto-Bold,sans-serif!important;letter-spacing:0.5px!important;margin:0 0 0 16px!important;padding:0!important;visibility:hidden!important}amp-story[ad-showing] .i-amphtml-story-ad-attribution{visibility:visible!important}amp-story[ad-showing] .i-amphtml-story-progress-bar{visibility:hidden!important}amp-story,amp-story-cta-layer,amp-story-grid-layer,amp-story-page{contain:strict!important;overflow:hidden!important}.i-amphtml-story-system-reset,.i-amphtml-story-system-reset *{border:none!important;color:initial!important;font-family:Roboto,sans-serif!important;font-size:initial!important;font-weight:initial!important;height:auto!important;margin:0!important;padding:0!important;text-align:left!important;width:auto!important}amp-story{height:100%!important;position:relative!important;text-rendering:geometricPrecision!important;-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important;width:100%!important}html.i-amphtml-story-standalone,html.i-amphtml-story-standalone body{height:100%!important;margin:0!important;padding:0!important;width:100%!important;cursor:auto!important;-webkit-tap-highlight-color:rgba(0,0,0,0)!important}html.i-amphtml-story-standalone body{display:grid!important}amp-story[standalone]{-ms-flex-item-align:center!important;align-self:center!important;box-shadow:2px 2px 20px rgba(0,0,0,0.5)!important;height:100%!important;justify-self:center!important}amp-story[standalone]:-webkit-full-screen{height:100vh!important;max-height:none!important;max-width:none!important}amp-story[standalone]:-moz-full-screen{height:100vh!important;max-height:none!important;max-width:none!important}amp-story[standalone]:-ms-fullscreen{height:100vh!important;max-height:none!important;max-width:none!important}amp-story[standalone]:fullscreen{height:100vh!important;max-height:none!important;max-width:none!important}.i-amphtml-story-system-layer{background:-webkit-linear-gradient(top,rgba(0,0,0,0.35),transparent)!important;background:linear-gradient(180deg,rgba(0,0,0,0.35),transparent)!important;position:absolute!important;top:0!important;left:0!important;right:0!important;height:46px!important;z-index:100000!important;padding:4px 0 0!important;box-sizing:border-box!important;-webkit-transition:opacity 0.3s!important;transition:opacity 0.3s!important;pointer-events:none!important}.i-amphtml-story-ui-left,.i-amphtml-story-ui-right{pointer-events:auto!important}.i-amphtml-story-bookend-active>.i-amphtml-story-system-layer{opacity:0.3!important}.i-amphtml-story-ui-right{float:right!important;margin:0 8px!important}.i-amphtml-story-button{background-repeat:no-repeat!important;background-position:50%!important;height:40px!important;width:40px!important;cursor:pointer!important;border-radius:40px!important;box-sizing:border-box!important;padding:8px!important;position:relative!important;background:50% no-repeat!important}.i-amphtml-story-button:active{background-color:rgba(0,0,0,0.2)!important}.i-amphtml-story-system-layer .i-amphtml-story-button{float:left!important}.i-amphtml-story-progress-bar{border:0!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;height:2px!important;left:0!important;margin:4px 0 0!important;padding:0 2px!important;position:absolute!important;right:0!important;top:0!important;visibility:visible!important;z-index:100001!important}.i-amphtml-story-page-progress-bar{background:hsla(0,0%,100%,0.4)!important;border-radius:1px!important;height:100%!important;list-style-type:none!important;margin:0 2px!important;overflow:hidden!important;width:100%!important;-webkit-mask-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAA5JREFUeNpiYGBgAAgwAAAEAAGbA+oJAAAAAElFTkSuQmCC)!important}.i-amphtml-story-page-progress-value{background:#fff!important;height:100%!important;width:100%!important;-webkit-transform:translateZ(0) scaleX(0)!important;transform:translateZ(0) scaleX(0)!important;-webkit-transform-origin:left!important;transform-origin:left!important;will-change:transform,transition!important}[dir=rtl] .i-amphtml-story-progress-value{-webkit-transform-origin:right!important;transform-origin:right!important}.i-amphtml-story-mute-audio-control,.i-amphtml-story-unmute-audio-control{display:none!important}.audio-playing:not([muted]) .i-amphtml-story-mute-audio-control,.audio-playing[muted] .i-amphtml-story-unmute-audio-control{display:block!important}.i-amphtml-story-ui-no-buttons .i-amphtml-story-button,.i-amphtml-story-ui-no-buttons .i-amphtml-story-ui-left,.i-amphtml-story-ui-no-buttons .i-amphtml-story-ui-right,[desktop] .i-amphtml-story-ui-no-buttons .i-amphtml-story-ui-left,[desktop] .i-amphtml-story-ui-no-buttons .i-amphtml-story-ui-right,amp-story-page,amp-story .amp-video-eq{display:none!important}amp-story-page{bottom:0!important;height:auto!important;left:0!important;position:absolute!important;right:0!important;top:0!important;-webkit-transition:none!important;transition:none!important}amp-story-page.i-amphtml-layout-container{display:block!important}amp-story:not([desktop])>amp-story-page.i-amphtml-layout-container:not([active]){-webkit-transform:translateY(1000%)!important;transform:translateY(1000%)!important}amp-story-page[active],amp-story:not([desktop])>amp-story-page.i-amphtml-layout-container[distance=\\\"0\\\"]{-webkit-transform:translateY(0)!important;transform:translateY(0)!important}amp-story:not([desktop])>amp-story-page.i-amphtml-layout-container[distance=\\\"1\\\"]{-webkit-transform:translateY(100%)!important;transform:translateY(100%)!important}amp-story:not([desktop])>amp-story-page.i-amphtml-layout-container[distance=\\\"2\\\"]{-webkit-transform:translateY(200%)!important;transform:translateY(200%)!important}amp-story:not([desktop])>amp-story-page.i-amphtml-layout-container[distance=\\\"3\\\"]{-webkit-transform:translateY(300%)!important;transform:translateY(300%)!important}.i-amphtml-story-bookend-active:not([desktop])>amp-story-page.i-amphtml-layout-container[active]{-webkit-transform:translateY(0) scale(1.2)!important;transform:translateY(0) scale(1.2)!important;-webkit-filter:blur(15px)!important;filter:blur(15px)!important}.i-amphtml-story-bookend-active>amp-story-page[active]:after{content:\\\"\\\"!important;display:block!important;top:0!important;background:hsla(0,0%,46%,0.3)!important;z-index:2!important}.i-amphtml-story-bookend-active>amp-story-page[active]:after,amp-story-cta-layer,amp-story-grid-layer{left:0!important;bottom:0!important;right:0!important;position:absolute!important}amp-story-cta-layer{display:block!important;height:20%!important;z-index:3!important}amp-story-grid-layer{display:grid!important;top:0!important;z-index:2!important}amp-story-grid-layer *{box-sizing:border-box!important;margin:0!important}.i-amphtml-story-grid-template-fill>:not(:first-child),.i-amphtml-story-logo{display:none!important}.i-amphtml-story-logo{margin:15px!important}.i-amphtml-story-grid-template-fill>:first-child{bottom:0!important;display:block!important;height:auto!important;left:0!important;position:absolute!important;right:0!important;top:0!important;width:auto!important}.i-amphtml-story-grid-template-fill>amp-anim img,.i-amphtml-story-grid-template-fill>amp-img img,.i-amphtml-story-grid-template-fill>amp-video video{-o-object-fit:cover!important;object-fit:cover!important}.i-amphtml-story-grid-template-vertical{grid-auto-flow:row!important;grid-template-columns:100%!important}.i-amphtml-story-grid-template-horizontal{grid-auto-flow:column!important;grid-template-rows:100%!important}.i-amphtml-story-grid-template-thirds{grid-template-rows:33% 33% 33%!important;grid-template-areas:\\\"upper-third\\\" \\\"middle-third\\\" \\\"lower-third\\\"!important}.i-amphtml-story-bookend{text-align:left!important;color:#fff!important;bottom:0!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important;left:0!important;position:absolute!important;right:0!important;top:0!important;z-index:100001!important;-webkit-transition:-webkit-transform 0.3s ease-out!important;transition:-webkit-transform 0.3s ease-out!important;transition:transform 0.3s ease-out!important;transition:transform 0.3s ease-out,-webkit-transform 0.3s ease-out!important}.i-amphtml-story-bookend.i-amphtml-hidden{-webkit-transition-timing-function:ease-in!important;transition-timing-function:ease-in!important;-webkit-transform:translateY(100vh)!important;transform:translateY(100vh)!important;pointer-events:none!important}.i-amphtml-story-bookend-hidden{pointer-events:none!important}.i-amphtml-story-bookend-overflow{overflow:auto!important;margin-top:auto!important;-webkit-transition:opacity 0.3s,-webkit-transform 0.3s ease-out!important;transition:opacity 0.3s,-webkit-transform 0.3s ease-out!important;transition:opacity 0.3s,transform 0.3s ease-out!important;transition:opacity 0.3s,transform 0.3s ease-out,-webkit-transform 0.3s ease-out!important}.i-amphtml-story-bookend-hidden .i-amphtml-story-bookend-overflow{-webkit-transform:translateY(200px)!important;transform:translateY(200px)!important;opacity:0!important}.i-amphtml-story-bookend-inner{margin:88px 0 0!important;position:relative!important;padding-top:32px!important;overflow:hidden!important}.i-amphtml-story-bookend-inner:before{content:\\\" \\\"!important;display:block!important;z-index:-1!important;background:rgba(0,0,0,0.75)!important;position:absolute!important;left:8px!important;top:8px!important;bottom:8px!important;right:8px!important;border-radius:8px!important}.i-amphtml-story-bookend-fullbleed .i-amphtml-story-bookend-inner:before,[desktop] .i-amphtml-story-bookend-inner:before{left:0!important;top:0!important;bottom:0!important;right:0!important;border-radius:0!important}.i-amphtml-story-bookend-heading{text-transform:uppercase!important;font-size:12px!important;padding-bottom:8px!important;margin:48px 0 8px!important;border-bottom:1px solid hsla(0,0%,100%,0.25)!important;color:hsla(0,0%,100%,0.54)!important;font-family:Roboto,sans-serif;font-weight:700!important;letter-spacing:0.83px!important;line-height:1!important}.i-amphtml-story-bookend-article-meta{font-family:Roboto,sans-serif;font-weight:400!important;font-size:14px!important;line-height:1!important;color:hsla(0,0%,100%,0.6)!important}.i-amphtml-story-bookend-article{box-sizing:border-box!important;display:block!important;text-decoration:none!important;color:inherit!important;overflow:hidden!important;-webkit-box-flex:1!important;-ms-flex:1 0 320px!important;flex:1 0 320px!important;min-width:33%!important;margin:24px 0!important;padding:0 32px!important}@media (min-width:640px){.i-amphtml-story-bookend-article{max-width:50%!important}}@media (min-width:960px){.i-amphtml-story-bookend-article{max-width:33%!important}}.i-amphtml-story-bookend-article-heading{font-family:Roboto,sans-serif!important;font-weight:400!important;font-size:16px!important;color:#fff!important;line-height:1.4;margin:0 0 8px!important}.i-amphtml-story-bookend-article-image,.i-amphtml-story-bookend-replay-image{width:100px!important;height:100px!important;border-radius:8px!important;overflow:hidden}.i-amphtml-story-bookend-article-image.amp-notsupported{display:none!important}.i-amphtml-story-bookend-article-image>img{-o-object-fit:cover;object-fit:cover}.i-amphtml-story-bookend-replay-image{background-position:50%!important;background-size:cover!important}.i-amphtml-story-bookend-article-image,.i-amphtml-story-bookend-replay-icon,.i-amphtml-story-bookend-replay-image{float:right!important;margin-left:24px!important;position:relative!important}.i-amphtml-story-bookend-replay{padding:16px 0!important;margin:0 0 24px!important;overflow:hidden!important}.i-amphtml-story-bookend-replay-icon{background:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='%23fff'%3E%3Cpath d='M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\") 50% no-repeat!important}.i-amphtml-story-bookend-replay-image>.i-amphtml-story-bookend-replay-icon{width:100%!important;height:100%!important;background-color:rgba(0,0,0,0.3)!important;position:absolute!important;margin-left:0!important}.i-amphtml-story-bookend-replay>.i-amphtml-story-bookend-replay-icon{width:48px!important;height:48px!important;background-color:rgba(60,60,60,0.5)!important;position:static!important;border-radius:4px!important}.i-amphtml-story-bookend-heading+.i-amphtml-story-bookend-article-set{border-top:none!important}.i-amphtml-story-bookend-article-set{border-top:1px solid hsla(0,0%,100%,0.25)!important;margin-bottom:32px!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-wrap:wrap!important;flex-wrap:wrap!important;-webkit-box-pack:justify!important;-ms-flex-pack:justify!important;justify-content:space-between!important}.i-amphtml-story-bookend-heading,.i-amphtml-story-bookend-replay{margin-left:32px!important;margin-right:32px!important}.i-amphtml-story-share-widget{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;margin:16px 8px!important}.i-amphtml-story-share-widget-scrollable{padding:16px 0!important;height:66px!important;overflow:auto!important}.i-amphtml-story-bookend-fullbleed .i-amphtml-story-share-widget{margin-left:0!important;margin-right:0!important}.i-amphtml-story-share-widget::-webkit-scrollbar{width:0px!important;background:transparent!important}.i-amphtml-story-share-list{list-style:none!important;padding:0 8px!important;margin:0!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.i-amphtml-story-bookend-fullbleed .i-amphtml-story-share-list{padding-left:16px!important;padding-right:16px!important}.i-amphtml-story-share-item{width:48px!important;height:66px!important;padding:0 16px!important}.i-amphtml-story-share-widget-scrollable>*>.i-amphtml-story-share-item{display:block!important;margin:0!important}.i-amphtml-story-share-item:empty{display:none!important}.i-amphtml-story-share-icon{box-sizing:border-box!important;position:relative!important;width:48px!important;height:66px!important;padding:56px 0 0!important;background-color:transparent!important;display:block!important;text-transform:capitalize!important;font-family:Roboto,sans-serif!important;color:#fff!important;font-weight:400!important;line-height:10px!important;font-size:10px!important;text-align:center!important;cursor:pointer!important;background-position:8px 8px!important;background-size:32px 32px!important;background-repeat:no-repeat!important}.i-amphtml-story-share-icon.amp-social-share-facebook{background-size:38px 38px!important;background-position:5px 5px!important}.i-amphtml-story-share-icon:before{content:\\\" \\\"!important;border-radius:4px!important;background-color:hsla(0,0%,100%,0.15)!important;width:48px!important;height:48px!important;position:absolute!important;display:block!important;top:0!important;left:0!important;z-index:-1!important}.i-amphtml-story-share-icon:active,.i-amphtml-story-share-icon:focus{outline:none!important;box-shadow:none!important}.i-amphtml-story-share-icon:active:before{background-color:#787878!important}.i-amphtml-story-share-icon[type=email]{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='%23fff'%3E%3Cpath d='M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-share-icon[type=system]{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%23fff'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-share-icon-link{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='%23fff'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-bookend-active .i-amphtml-story-dev-logs-button,.i-amphtml-story-dev-logs-button[data-count=\\\"0\\\"]{display:none!important}.i-amphtml-story-dev-logs-button{background-position:50%!important;background-repeat:no-repeat!important}.i-amphtml-story-dev-logs-button:after{background-color:#fff!important;border-radius:6px!important;box-sizing:border-box!important;color:#444;content:attr(data-count)!important;display:inline-block!important;font-family:Roboto!important;font-size:11px!important;height:12px!important;line-height:12px!important;padding:0 6px!important;position:absolute!important;right:0!important;top:6px!important}.i-amphtml-story-error-button{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%23DB4437'%3E%3Cpath d='M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-warning-button{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%23FFC107'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-success-button{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%230F9D58'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z'/%3E%3C/svg%3E\\\")!important}amp-story[standalone] .i-amphtml-story-developer-log{background:rgba(0,0,0,0.85)!important;bottom:0!important;box-sizing:border-box!important;color:#fff!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important;font-family:Roboto!important;left:0!important;max-height:45%!important;padding:0!important;position:fixed!important;right:0!important;text-align:left!important;z-index:100002!important}.i-amphtml-story-developer-log-header{-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;background:rgba(3,169,244,0.85)!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;font-weight:700!important;-webkit-box-pack:justify!important;-ms-flex-pack:justify!important;justify-content:space-between!important;padding:12px 20px!important;text-align:center!important}.i-amphtml-story-developer-log-close,.i-amphtml-story-developer-log-header{-webkit-box-flex:0!important;-ms-flex-positive:0!important;flex-grow:0!important;-ms-flex-negative:0!important;flex-shrink:0!important}.i-amphtml-story-developer-log-close{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg fill='%23FFF' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-developer-log-context{color:#000!important;font-family:Roboto Mono!important}.i-amphtml-story-developer-log-entries{list-style-type:none!important;margin:0!important;overflow-x:hidden!important;overflow-y:auto!important;padding:0!important}.i-amphtml-story-developer-log-entry{-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;border-bottom:1px solid hsla(0,0%,100%,0.5)!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;padding:20px!important}.i-amphtml-story-developer-log-entry:before{background-position:50%!important;background-repeat:no-repeat!important;background-size:cover!important;content:\\\"\\\";display:inline-block!important;-webkit-box-flex:0!important;-ms-flex-positive:0!important;flex-grow:0!important;-ms-flex-negative:0!important;flex-shrink:0!important;height:32px!important;margin-right:20px!important;width:32px!important}.i-amphtml-story-developer-log-entry-error:before{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%23DB4437'%3E%3Cpath d='M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-developer-log-entry-warning:before{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%23FFC107'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-developer-log-entry-success:before{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%230F9D58'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-experiment-error{-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;-ms-flex-line-pack:center!important;align-content:center!important;background-color:#222!important;bottom:0!important;color:#f0f0f0!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-ms-flex-direction:column!important;flex-direction:column!important;font-family:Roboto,sans-serif!important;font-size:20px!important;-webkit-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important;left:0!important;padding:32px!important;position:absolute!important;right:0!important;top:0!important;z-index:999999!important;text-align:center!important}.i-amphtml-story-experiment-icon{background-repeat:no-repeat!important;background-size:cover!important;height:64px!important;margin:0 auto 16px!important;width:64px!important}.i-amphtml-story-experiment-icon-error{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%23FFF'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-experiment-icon-done{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%23FFF'%3E%3Cpath fill='none' d='M0 0h24v24H0z'/%3E%3Cpath d='M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-experiment-error button{background-color:transparent!important;border:1px solid #f0f0f0!important;border-radius:8px!important;color:#f0f0f0!important;cursor:pointer!important;font-size:20px!important;font-family:Roboto,sans-serif!important;margin:16px 0 0!important;outline:none!important;padding:8px 32px!important;text-transform:uppercase!important;width:50%!important}.i-amphtml-story-experiment-error button:active,.i-amphtml-story-experiment-error button:focus{background-color:#f0f0f0!important;color:#222!important}.i-amphtml-story-unmute-audio-control{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%23FFF'%3E%3Cpath d='M16.5 12A4.5 4.5 0 0 0 14 7.97v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51A8.796 8.796 0 0 0 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06a8.99 8.99 0 0 0 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-mute-audio-control{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%23FFF'%3E%3Cpath d='M3 9v6h4l5 5V4L7 9H3zm13.5 3A4.5 4.5 0 0 0 14 7.97v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-bookend-close{opacity:0.5!important;top:8px!important;left:8px!important;position:absolute!important;background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23FFF' height='24' viewBox='0 0 24 24' width='24'%3E%3Cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3C/svg%3E\\\")!important}.i-amphtml-story-bookend-fullbleed .i-amphtml-story-bookend-close{opacity:1!important;position:fixed!important;z-index:2!important}.i-amphtml-story-bookend-fullbleed:before{content:\\\" \\\"!important;display:block!important;background-image:-webkit-linear-gradient(bottom,rgba(1,1,1,0),#000)!important;background-image:linear-gradient(0deg,rgba(1,1,1,0),#000)!important;position:fixed!important;top:0!important;left:0!important;right:0!important;height:40px!important;pointer-events:none!important;z-index:1!important}.i-amphtml-story-toast{position:fixed!important;bottom:0!important;left:0!important;right:0!important;display:inline-block!important;padding:1.16em 1.33em!important;line-height:1.33!important;color:#fff!important;background:#212121!important;-webkit-animation:toast 2.2s!important;animation:toast 2.2s!important;-webkit-animation-fill-mode:both!important;animation-fill-mode:both!important;font-family:Roboto,sans-serif!important;font-weight:400!important;font-size:12px!important;max-width:640px!important;z-index:100002!important}@media (min-width:640px){.i-amphtml-story-toast{right:auto!important;font-size:14px!important;margin:0 auto 1.16em 1.16em!important;border-radius:6px}}@-webkit-keyframes toast{0%{-webkit-transform:translateY(100px);transform:translateY(100px);easing:cubic-bezier(0.0,0.0,0.2,1)}8%{-webkit-transform:translateY(0);transform:translateY(0)}92%{-webkit-transform:translateY(0);transform:translateY(0);easing:cubic-bezier(0.4,0.0,1,1)}to{-webkit-transform:translateY(100px);transform:translateY(100px)}}@keyframes toast{0%{-webkit-transform:translateY(100px);transform:translateY(100px);easing:cubic-bezier(0.0,0.0,0.2,1)}8%{-webkit-transform:translateY(0);transform:translateY(0)}92%{-webkit-transform:translateY(0);transform:translateY(0);easing:cubic-bezier(0.4,0.0,1,1)}to{-webkit-transform:translateY(100px);transform:translateY(100px)}}.i-amphtml-story-copy-successful{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='%23fff'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z'/%3E%3C/svg%3E\\\")!important;background-repeat:no-repeat!important;background-size:16px 16px!important;padding-left:24px!important;color:#fff!important;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.i-amphtml-story-copy-url{-webkit-box-flex:1!important;-ms-flex:1!important;flex:1!important;color:hsla(0,0%,100%,0.5)!important;margin-left:40px!important;text-overflow:ellipsis!important;overflow:hidden!important;white-space:nowrap!important}.i-amphtml-story-unsupported-browser-overlay,amp-story[standalone] .i-amphtml-story-no-rotation-overlay{position:fixed!important;z-index:200000!important;font-family:Roboto,sans-serif;font-weight:700!important;line-height:1.5;padding:32px;background-color:#000!important;top:0!important;left:0!important;right:0!important;bottom:0!important;-webkit-box-align:center!important;-ms-flex-align:center!important;align-items:center!important;-webkit-box-pack:center!important;-ms-flex-pack:center!important;justify-content:center!important;text-align:center!important;display:none!important}[desktop] .i-amphtml-story-no-rotation-overlay{display:none!important}.i-amphtml-story-unsupported-browser-overlay,amp-story[standalone].i-amphtml-story-landscape .i-amphtml-story-no-rotation-overlay{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}amp-story .i-amphtml-story-no-rotation-overlay,amp-story .i-amphtml-story-unsupported-browser-overlay{color:#fff!important}amp-story .i-amphtml-desktop-size-icon,amp-story .i-amphtml-gear-icon,amp-story .i-amphtml-rotate-icon{background-repeat:no-repeat!important;background-position:50%!important;border-radius:50%!important;background-color:#fff!important;padding:16px!important;height:24px!important;width:24px!important;margin:16px auto!important}amp-story .i-amphtml-rotate-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M16.48 2.52c3.27 1.55 5.61 4.72 5.97 8.48h1.5C23.44 4.84 18.29 0 12 0l-.66.03 3.81 3.81 1.33-1.32zm-6.25-.77a1.49 1.49 0 0 0-2.12 0L1.75 8.11a1.49 1.49 0 0 0 0 2.12l12.02 12.02c.59.59 1.54.59 2.12 0l6.36-6.36c.59-.59.59-1.54 0-2.12L10.23 1.75zm4.6 19.44L2.81 9.17l6.36-6.36 12.02 12.02-6.36 6.36zm-7.31.29A10.487 10.487 0 0 1 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32z'/%3E%3C/svg%3E\\\")!important}amp-story .i-amphtml-gear-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 20 20'%3E%3Cpath fill='none' d='M0 0h20v20H0V0z'/%3E%3Cpath d='M15.95 10.78c.03-.25.05-.51.05-.78s-.02-.53-.06-.78l1.69-1.32c.15-.12.19-.34.1-.51l-1.6-2.77c-.1-.18-.31-.24-.49-.18l-1.99.8c-.42-.32-.86-.58-1.35-.78L12 2.34a.4.4 0 0 0-.4-.34H8.4c-.2 0-.36.14-.39.34l-.3 2.12c-.49.2-.94.47-1.35.78l-1.99-.8c-.18-.07-.39 0-.49.18l-1.6 2.77c-.1.18-.06.39.1.51l1.69 1.32c-.04.25-.07.52-.07.78s.02.53.06.78L2.37 12.1c-.15.12-.19.34-.1.51l1.6 2.77c.1.18.31.24.49.18l1.99-.8c.42.32.86.58 1.35.78l.3 2.12c.04.2.2.34.4.34h3.2c.2 0 .37-.14.39-.34l.3-2.12c.49-.2.94-.47 1.35-.78l1.99.8c.18.07.39 0 .49-.18l1.6-2.77c.1-.18.06-.39-.1-.51l-1.67-1.32zM10 13c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z'/%3E%3C/svg%3E\\\")!important}amp-story .i-amphtml-desktop-size-icon{background-image:url(\\\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath d='M0 0h24v24H0z' fill='none'/%3E%3Cpath d='M12.01 5.5L10 8h4l-1.99-2.5zM18 10v4l2.5-1.99L18 10zM6 10l-2.5 2.01L6 14v-4zm8 6h-4l2.01 2.5L14 16zm7-13H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z'/%3E%3C/svg%3E\\\")!important}amp-story .i-amphtml-story-overlay-text{color:#fff!important;font-weight:700!important}.i-amphtml-story-button-container{display:none!important}.i-amphtml-story-spinner{display:inline-block!important;position:absolute!important;top:calc(100% - 36px)!important;right:12px!important;width:24px!important;height:24px!important;z-index:10!important}.i-amphtml-story-spinner-container{width:100%!important;height:100%!important;direction:ltr!important}.i-amphtml-story-spinner[active] .i-amphtml-story-spinner-container{-webkit-animation:container-rotate 1294ms linear infinite!important;animation:container-rotate 1294ms linear infinite!important}@-webkit-keyframes container-rotate{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes container-rotate{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.i-amphtml-story-spinner-layer{position:absolute!important;width:100%!important;height:100%!important;opacity:0!important;white-space:nowrap!important;color:#fff!important}.i-amphtml-story-spinner[active] .i-amphtml-story-spinner-layer{-webkit-animation-name:fill-unfill-rotate!important;animation-name:fill-unfill-rotate!important;-webkit-animation-duration:4400ms!important;animation-duration:4400ms!important;-webkit-animation-timing-function:cubic-bezier(0.4,0.0,0.2,1)!important;animation-timing-function:cubic-bezier(0.4,0.0,0.2,1)!important;-webkit-animation-iteration-count:infinite!important;animation-iteration-count:infinite!important;opacity:1!important}@-webkit-keyframes fill-unfill-rotate{12.5%{-webkit-transform:rotate(135deg);transform:rotate(135deg)}25%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}37.5%{-webkit-transform:rotate(405deg);transform:rotate(405deg)}50%{-webkit-transform:rotate(540deg);transform:rotate(540deg)}62.5%{-webkit-transform:rotate(675deg);transform:rotate(675deg)}75%{-webkit-transform:rotate(810deg);transform:rotate(810deg)}87.5%{-webkit-transform:rotate(945deg);transform:rotate(945deg)}to{-webkit-transform:rotate(1080deg);transform:rotate(1080deg)}}@keyframes fill-unfill-rotate{12.5%{-webkit-transform:rotate(135deg);transform:rotate(135deg)}25%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}37.5%{-webkit-transform:rotate(405deg);transform:rotate(405deg)}50%{-webkit-transform:rotate(540deg);transform:rotate(540deg)}62.5%{-webkit-transform:rotate(675deg);transform:rotate(675deg)}75%{-webkit-transform:rotate(810deg);transform:rotate(810deg)}87.5%{-webkit-transform:rotate(945deg);transform:rotate(945deg)}to{-webkit-transform:rotate(1080deg);transform:rotate(1080deg)}}.i-amphtml-story-spinner-circle-clipper{display:inline-block!important;position:relative!important;width:50%!important;height:100%!important;overflow:hidden!important}.i-amphtml-story-spinner-layer:after{left:45%!important;width:10%!important;border-top-style:solid!important}.i-amphtml-story-spinner-circle-clipper:after,.i-amphtml-story-spinner-layer:after{content:\\\"\\\"!important;box-sizing:border-box!important;position:absolute!important;top:0!important;border-width:3px!important;border-radius:50%!important}.i-amphtml-story-spinner-circle-clipper:after{bottom:0!important;width:200%!important;border-style:solid!important;border-bottom-color:transparent!important}.i-amphtml-story-spinner-circle-clipper.left:after{left:0!important;border-right-color:transparent!important;-webkit-transform:rotate(129deg)!important;transform:rotate(129deg)!important}.i-amphtml-story-spinner-circle-clipper.right:after{left:-100%!important;border-left-color:transparent!important;-webkit-transform:rotate(-129deg)!important;transform:rotate(-129deg)!important}.i-amphtml-story-spinner[active] .i-amphtml-story-spinner-circle-clipper:after{-webkit-animation-duration:1100ms!important;animation-duration:1100ms!important;-webkit-animation-timing-function:cubic-bezier(0.4,0.0,0.2,1)!important;animation-timing-function:cubic-bezier(0.4,0.0,0.2,1)!important;-webkit-animation-iteration-count:infinite!important;animation-iteration-count:infinite!important}.i-amphtml-story-spinner[active] .i-amphtml-story-spinner-circle-clipper.left:after{-webkit-animation-name:left-spin!important;animation-name:left-spin!important}.i-amphtml-story-spinner[active] .i-amphtml-story-spinner-circle-clipper.right:after{-webkit-animation-name:right-spin!important;animation-name:right-spin!important}@-webkit-keyframes left-spin{0%{-webkit-transform:rotate(130deg);transform:rotate(130deg)}50%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(130deg);transform:rotate(130deg)}}@keyframes left-spin{0%{-webkit-transform:rotate(130deg);transform:rotate(130deg)}50%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(130deg);transform:rotate(130deg)}}@-webkit-keyframes right-spin{0%{-webkit-transform:rotate(-130deg);transform:rotate(-130deg)}50%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}to{-webkit-transform:rotate(-130deg);transform:rotate(-130deg)}}@keyframes right-spin{0%{-webkit-transform:rotate(-130deg);transform:rotate(-130deg)}50%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}to{-webkit-transform:rotate(-130deg);transform:rotate(-130deg)}}\\n/*# sourceURL=/extensions/amp-story/0.1/amp-story.css*/\";\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @typedef {\n *   !WebMultiAnimationDef|\n *   !WebSwitchAnimationDef|\n *   !WebCompAnimationDef|\n *   !WebKeyframeAnimationDef\n * }\n */\nexport let WebAnimationDef;\n\n\n/**\n * @mixes WebAnimationSelectorDef\n * @mixes WebAnimationTimingDef\n * @mixes WebAnimationVarsDef\n * @mixes WebAnimationConditionalDef\n * @typedef {{\n *   animations: !Array<!WebAnimationDef>,\n * }}\n */\nexport let WebMultiAnimationDef;\n\n\n/**\n * @mixes WebAnimationSelectorDef\n * @mixes WebAnimationTimingDef\n * @mixes WebAnimationVarsDef\n * @mixes WebAnimationConditionalDef\n * @typedef {{\n *   switch: !Array<!WebAnimationDef>,\n * }}\n */\nexport let WebSwitchAnimationDef;\n\n\n/**\n * @mixes WebAnimationSelectorDef\n * @mixes WebAnimationTimingDef\n * @mixes WebAnimationVarsDef\n * @mixes WebAnimationConditionalDef\n * @typedef {{\n *   animation: string,\n * }}\n */\nexport let WebCompAnimationDef;\n\n\n/**\n * @mixes WebAnimationSelectorDef\n * @mixes WebAnimationTimingDef\n * @mixes WebAnimationVarsDef\n * @mixes WebAnimationConditionalDef\n * @typedef {{\n *   keyframes: (string|!WebKeyframesDef),\n * }}\n */\nexport let WebKeyframeAnimationDef;\n\n\n/**\n * @typedef {!Object<string, *>|!Array<!Object<string, *>>}\n */\nexport let WebKeyframesDef;\n\n\n/**\n * See https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffectTimingProperties\n *\n * @mixin\n * @typedef {{\n *   duration: (time|undefined),\n *   delay: (time|undefined),\n *   endDelay: (time|undefined),\n *   iterations: (number|string|undefined),\n *   iterationStart: (number|undefined),\n *   easing: (string|undefined),\n *   direction: (!WebAnimationTimingDirection|undefined),\n *   fill: (!WebAnimationTimingFill|undefined),\n * }}\n */\nexport let WebAnimationTimingDef;\n\n\n/**\n * Indicates an extension to a type that allows specifying vars. Vars are\n * specified as properties with the name in the format of `--varName`.\n *\n * @mixin\n * @typedef {Object}\n */\nexport let WebAnimationVarsDef;\n\n\n/**\n * Defines media parameters for an animation.\n *\n * @mixin\n * @typedef {{\n *   media: (string|undefined),\n *   supports: (string|undefined),\n * }}\n */\nexport let WebAnimationConditionalDef;\n\n\n/**\n * @typedef {{\n *   target: (!Element|undefined),\n *   selector: (string|undefined),\n *   subtargets: (!Array<!WebAnimationSubtargetDef>|undefined),\n * }}\n */\nexport let WebAnimationSelectorDef;\n\n\n/**\n * @mixes WebAnimationTimingDef\n * @mixes WebAnimationVarsDef\n * @typedef {{\n *   matcher: (function(!Element, number):boolean|undefined),\n *   index: (number|undefined),\n *   selector: (string|undefined),\n * }}\n */\nexport let WebAnimationSubtargetDef;\n\n\n/**\n * See https://developer.mozilla.org/en-US/docs/Web/API/Animation/playState\n * @enum {string}\n */\nexport const WebAnimationPlayState = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RUNNING: 'running',\n  PAUSED: 'paused',\n  FINISHED: 'finished',\n};\n\n\n/**\n * See https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffectTimingProperties/direction\n * @enum {string}\n */\nexport const WebAnimationTimingDirection = {\n  NORMAL: 'normal',\n  REVERSE: 'reverse',\n  ALTERNATE: 'alternate',\n  ALTERNATE_REVERSE: 'alternate-reverse',\n};\n\n\n/**\n * See https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffectTimingProperties/fill\n * @enum {string}\n */\nexport const WebAnimationTimingFill = {\n  NONE: 'none',\n  FORWARDS: 'forwards',\n  BACKWARDS: 'backwards',\n  BOTH: 'both',\n  AUTO: 'auto',\n};\n\n\n/** @const {!Object<string, boolean>} */\nconst WHITELISTED_RPOPS = {\n  'opacity': true,\n  'transform': true,\n  'visibility': true,\n  'offset-distance': true,\n  'offsetDistance': true,\n};\n\n\n/**\n * @param {string} prop\n * @return {boolean}\n */\nexport function isWhitelistedProp(prop) {\n  return WHITELISTED_RPOPS[prop] || false;\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  AmpStoryStateService,\n  StateType,\n} from './amp-story-state-service';\nimport {CommonSignals} from '../../../src/common-signals';\nimport {Services} from '../../../src/services';\nimport {StateChangeType} from './navigation-state';\nimport {createElementWithAttributes} from '../../../src/dom';\nimport {dev, user} from '../../../src/log';\nimport {dict, hasOwn, map} from '../../../src/utils/object';\nimport {isJsonScriptTag} from '../../../src/dom';\nimport {parseEmbedMode} from './embed-mode';\nimport {parseJson} from '../../../src/json';\n\n\n/** @const */\nconst MIN_INTERVAL = 3;\n\n/** @const */\nconst TAG = 'amp-story-auto-ads';\n\n/** @const */\nconst AD_TAG = 'amp-ad';\n\n/** @const */\nconst MUSTACHE_TAG = 'amp-mustache';\n\n/** @const */\nconst TIMEOUT_LIMIT = 10000; // 10 seconds\n\n/** @const */\nconst DATA_ATTR = {\n  CTA_TYPE: 'data-vars-ctatype',\n  CTA_URL: 'data-vars-ctaurl',\n};\n\n/** @const */\nconst CTA_TYPES = {\n  EXPLORE: 'Explore Now',\n  SHOP: 'Shop Now',\n  READ: 'Read Now',\n};\n\n/** @const */\nconst AD_STATE = {\n  PENDING: 0,\n  PLACED: 1,\n  FAILED: 2,\n};\n\n/** @const */\nconst ALLOWED_AD_TYPES = map({\n  'custom': true,\n});\n\n\nexport class AmpStoryAutoAds extends AMP.BaseElement {\n\n  /** @param {!AmpElement} element */\n  constructor(element) {\n    super(element);\n\n    /** @private {?./amp-story.AmpStory} */\n    this.ampStory_ = null;\n\n    /** @private {?./navigation-state.NavigationState} */\n    this.navigationState_ = null;\n\n    /** @private {number} */\n    this.uniquePagesCount_ = 0;\n\n    /** @private {!Object<string, boolean>} */\n    this.uniquePageIds_ = dict({});\n\n    /** @private {!Array<Element>} */\n    this.adPageEls_ = [];\n\n    /** @private {number} */\n    this.timeCurrentPageCreated_ = -Infinity;\n\n    /** @private {number} */\n    this.adsPlaced_ = 0;\n\n    /** @private {number} */\n    this.adPagesCreated_ = 0;\n\n    /** @private {?Element} */\n    this.currentAdElement_ = null;\n\n    /** @private {boolean} */\n    this.isCurrentAdLoaded_ = false;\n\n    /** @private {Object<string, string>} */\n    this.config_ = {};\n\n    /** @private @const {!AmpStoryStateService} */\n    this.stateService_ = new AmpStoryStateService();\n  }\n\n  /** @override */\n  buildCallback() {\n    const embedMode = parseEmbedMode(this.win.location.hash);\n    this.stateService_.initializeEmbedMode(embedMode);\n    if (!this.isAutomaticAdInsertionAllowed_()) {\n      return;\n    }\n\n    const ampStoryElement = this.element.parentElement;\n    user().assert(ampStoryElement.tagName === 'AMP-STORY',\n        `<${TAG}> should be child of <amp-story>`);\n\n    const ampdoc = this.getAmpDoc();\n    Services.extensionsFor(this.win)./*OK*/installExtensionForDoc(\n        ampdoc, AD_TAG);\n    Services.extensionsFor(this.win)./*OK*/installExtensionForDoc(\n        ampdoc, MUSTACHE_TAG);\n\n    return ampStoryElement.getImpl().then(impl => {\n      this.ampStory_ = impl;\n      this.navigationState_ = this.ampStory_.getNavigationState();\n      this.navigationState_.observe(this.handleStateChange_.bind(this));\n    });\n  }\n\n\n  /** @override */\n  isLayoutSupported() {\n    return true;\n  }\n\n\n  /** @override */\n  layoutCallback() {\n    if (!this.isAutomaticAdInsertionAllowed_()) {\n      return Promise.resolve();\n    }\n\n    return this.ampStory_.signals().whenSignal(CommonSignals.INI_LOAD)\n        .then(() => {\n          this.createAdOverlay_();\n          this.readConfig_();\n          this.schedulePage_();\n        });\n  }\n\n\n  isAutomaticAdInsertionAllowed_() {\n    const allowAutomaticAdInsertion = this.stateService_\n        .getState(StateType.ALLOW_AUTOMATIC_AD_INSERTION);\n\n    return allowAutomaticAdInsertion.getValue();\n  }\n\n  /**\n   * load in config from child <script> element\n   * @private\n   */\n  readConfig_() {\n    const child = this.element.children[0];\n    user().assert(\n        isJsonScriptTag(child),\n        `The <${TAG}> config should ` +\n        'be inside a <script> tag with type=\"application/json\"');\n\n    this.config_ = parseJson(child.textContent);\n    this.validateConfig_();\n  }\n\n\n  /**\n   * Create a hidden UI that will be shown when ad is displayed\n   * @private\n   */\n  createAdOverlay_() {\n    const container = document.createElement('aside');\n    container.className = 'i-amphtml-ad-overlay-container';\n\n    const span = document.createElement('p');\n    span.className = 'i-amphtml-story-ad-attribution';\n    span.textContent = 'Ad';\n\n    container.appendChild(span);\n    this.ampStory_.element.appendChild(container);\n  }\n\n\n  /**\n   * make sure given JSON config is shaped correctly\n   * @private\n   */\n  validateConfig_() {\n    const adAttributes = this.config_['ad-attributes'];\n    user().assert(adAttributes, `<${TAG}>: Error reading config.` +\n      'Top level JSON should have an \"ad-attributes\" key');\n\n    const type = adAttributes.type;\n    user().assert(type, `<${TAG}>: Error reading config.` +\n      'Missing [\"ad-attribues\"][\"type\"] key');\n  }\n\n\n  /**\n   * build page and start preloading\n   * @private\n   */\n  schedulePage_() {\n    const page = this.createAdPage_();\n    this.adPageEls_.push(page);\n\n    this.ampStory_.element.appendChild(page);\n\n    page.getImpl().then(impl => {\n      this.ampStory_.addPage(impl);\n      this.timeCurrentPageCreated_ = Date.now();\n    });\n  }\n\n\n  /**\n   * create an `amp-story-page` containing an `amp-ad`\n   * @private\n   */\n  createAdPage_() {\n    const ampStoryAdPage = this.createPageElement_();\n    const ampAd = this.createAdElement_();\n\n    const gridLayer = document.createElement('amp-story-grid-layer');\n    gridLayer.setAttribute('template', 'fill');\n    gridLayer.appendChild(ampAd);\n    ampStoryAdPage.appendChild(gridLayer);\n\n    this.currentAdElement_ = ampAd;\n    this.isCurrentAdLoaded_ = false;\n\n    // set up listener for ad-loaded event\n    ampAd.getImpl().then(impl => {\n      const signals = impl.signals();\n      return signals.whenSignal(CommonSignals.INI_LOAD);\n    }).then(() => {\n      this.isCurrentAdLoaded_ = true;\n    });\n\n    return ampStoryAdPage;\n  }\n\n\n  /**\n   * @return {!Element}\n   * @private\n   */\n  createPageElement_() {\n    const id = ++this.adPagesCreated_;\n    const attributes = dict({\n      'id': `i-amphtml-ad-page-${id}`,\n      'ad': '',\n      'distance': '1',\n    });\n\n    return createElementWithAttributes(\n        document, 'amp-story-page', attributes);\n  }\n\n\n  /**\n   * @return {!Element}\n   * @private\n   */\n  createAdElement_() {\n    const requiredAttrs = {\n      'class': 'i-amphtml-story-ad',\n      'layout': 'fill',\n    };\n\n    const configAttrs = this.config_['ad-attributes'];\n\n    ['height', 'width', 'layout'].forEach(attr => {\n      if (configAttrs[attr] !== undefined) {\n        user().warn(TAG, `ad-attribute \"${attr}\" is not allowed`);\n        delete configAttrs[attr];\n      }\n    });\n\n    user().assert(!!ALLOWED_AD_TYPES[configAttrs.type], `${TAG}: ` +\n      `\"${configAttrs.type}\" ad type is not supported`);\n\n    const attributes = /** @type {!JsonObject} */ (Object.assign({},\n        configAttrs, requiredAttrs));\n\n    return createElementWithAttributes(\n        document, 'amp-ad', attributes);\n  }\n\n\n  /**\n   * Validate ad-server response has requirements to build outlink\n   * @param {!Element} adPageElement\n   */\n  maybeCreateCtaLayer_(adPageElement) {\n    // if making a CTA layer we need a button name & outlink url\n    const ctaUrl = this.currentAdElement_.getAttribute(DATA_ATTR.CTA_URL);\n    const ctaType = this.currentAdElement_.getAttribute(DATA_ATTR.CTA_TYPE);\n\n    if (!ctaUrl || !ctaType) {\n      user().error(TAG, 'Both CTA Type & CTA Url ' +\n          'are required in ad-server response.\"');\n      return false;\n    }\n\n    const ctaText = CTA_TYPES[ctaType];\n    if (!ctaType) {\n      user().error(TAG, 'invalid \"CTA Type\" in ad response');\n      return false;\n    }\n\n    return this.createCtaLayer_(adPageElement, ctaText, ctaUrl);\n  }\n\n\n  /**\n   * Create layer to contain outlink button\n   * @param {!Element} adPageElement\n   * @param {string} ctaText\n   * @param {string} ctaUrl\n   * @return {boolean}\n   */\n  createCtaLayer_(adPageElement, ctaText, ctaUrl) {\n    const a = document.createElement('a');\n    a.className = 'i-amphtml-story-ad-link';\n    a.setAttribute('target', '_blank');\n    a.href = ctaUrl;\n    a.textContent = ctaText;\n\n    if (a.protocol !== 'https:' && a.protocol !== 'http:') {\n      user().warn(TAG, 'CTA url is not valid. Ad was discarded');\n      return false;\n    }\n\n    const ctaLayer = document.createElement('amp-story-cta-layer');\n    ctaLayer.appendChild(a);\n    adPageElement.appendChild(ctaLayer);\n    return true;\n  }\n\n\n  /**\n   * @private\n   */\n  handleStateChange_(stateChangeEvent) {\n    switch (stateChangeEvent.type) {\n      case StateChangeType.ACTIVE_PAGE:\n        const {pageIndex, pageId} = stateChangeEvent.value;\n        this.handleActivePageChange_(\n            dev().assertNumber(pageIndex),\n            dev().assertString(pageId));\n        break;\n    }\n  }\n\n\n  /**\n   * @param {number} pageIndex\n   * @param {string} pageId\n   * @private\n   */\n  handleActivePageChange_(pageIndex, pageId) {\n    if (!hasOwn(this.uniquePageIds_, pageId)) {\n      this.uniquePagesCount_++;\n      this.uniquePageIds_[pageId] = true;\n    }\n\n    if (this.uniquePagesCount_ > MIN_INTERVAL) {\n      const adState = this.tryToPlaceAdAfterPage_(pageId);\n\n      if (adState === AD_STATE.PLACED) {\n        this.adsPlaced_++;\n        // start loading next ad\n        this.startNextPage_();\n      }\n\n      if (adState === AD_STATE.FAILED) {\n        this.startNextPage_();\n      }\n    }\n  }\n\n\n  /**\n   * start the process over\n   * @private\n   */\n  startNextPage_() {\n    this.uniquePagesCount_ = 0;\n    this.schedulePage_();\n  }\n\n\n  /**\n   * Place ad based on user config\n   * @param {string} currentPageId\n   * @private\n   */\n  tryToPlaceAdAfterPage_(currentPageId) {\n    const nextAdPageEl = this.adPageEls_[this.adPageEls_.length - 1];\n    if (!this.isCurrentAdLoaded_ && this.adTimedOut_()) {\n      // timeout fail\n      return AD_STATE.FAILED;\n    }\n\n    const currentPage = this.ampStory_.getPageById(currentPageId);\n    const nextPage = this.ampStory_.getNextPage(currentPage);\n\n    if (!this.isCurrentAdLoaded_ || currentPage.isAd() ||\n        (nextPage && nextPage.isAd())) {\n      // if we are going to cause two consecutive ads or ad is still\n      // loading we will try again on next user interaction\n      return AD_STATE.PENDING;\n    }\n\n    const ctaCreated = this.maybeCreateCtaLayer_(nextAdPageEl);\n    if (!ctaCreated) {\n      // failed on ad-server response format\n      return AD_STATE.FAILED;\n    }\n\n    this.ampStory_.insertPage(currentPageId, nextAdPageEl.id);\n    return AD_STATE.PLACED;\n  }\n\n\n  /**\n   * @private\n   * @return {boolean}\n   */\n  adTimedOut_() {\n    return (Date.now() - this.timeCurrentPageCreated_) > TIMEOUT_LIMIT;\n  }\n}\n\nAMP.registerElement(TAG, AmpStoryAutoAds);\n\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Base layer from which other layers in a story page extend from.\n */\n\nimport {Layout} from '../../../src/layout';\n\nexport class AmpStoryBaseLayer extends AMP.BaseElement {\n  /** @param {!AmpElement} element */\n  constructor(element) {\n    super(element);\n  }\n\n  /** @override */\n  isLayoutSupported(layout) {\n    return layout == Layout.CONTAINER;\n  }\n\n  /** @override */\n  buildCallback() {\n    this.element.classList.add('i-amphtml-story-layer');\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview This is a layer that lays its children out into a grid. Its\n * implementation is based off of the CSS Grid Spec.\n *\n * Example:\n * <code>\n * <amp-story-grid-layer template=\"fill\">\n *   ...\n * </amp-story-grid-layer>\n * </code>\n */\n\nimport {AmpStoryBaseLayer} from './amp-story-base-layer';\nimport {matches, scopedQuerySelectorAll} from '../../../src/dom';\n\n/**\n * A mapping of attribute names we support for grid layers to the CSS Grid\n * properties they control.\n * @private @const {!Object<string, string>}\n */\nconst SUPPORTED_CSS_GRID_ATTRIBUTES = {\n  'align-content': 'alignContent',\n  'align-items': 'alignItems',\n  'align-self': 'alignSelf',\n  'grid-area': 'gridArea',\n  'justify-content': 'justifyContent',\n  'justify-items': 'justifyItems',\n  'justify-self': 'justifySelf',\n};\n\n/**\n * Converts the keys of the SUPPORTED_CSS_GRID_ATTRIBUTES object above into a\n * selector for the specified attributes.\n * (e.g. [align-content], [align-items], ...)\n * @private @const {string}\n */\nconst SUPPORTED_CSS_GRID_ATTRIBUTES_SELECTOR =\n    Object.keys(SUPPORTED_CSS_GRID_ATTRIBUTES)\n        .map(key => `[${key}]`)\n        .join(',');\n\n/**\n * The attribute name for grid layer templates.\n * @private @const {string}\n */\nconst TEMPLATE_ATTRIBUTE_NAME = 'template';\n\n/**\n * A mapping of template attribute values to CSS class names.\n * @private @const {!Object<string, string>}\n */\nconst TEMPLATE_CLASS_NAMES = {\n  'fill': 'i-amphtml-story-grid-template-fill',\n  'vertical': 'i-amphtml-story-grid-template-vertical',\n  'horizontal': 'i-amphtml-story-grid-template-horizontal',\n  'thirds': 'i-amphtml-story-grid-template-thirds',\n};\n\nexport class AmpStoryGridLayer extends AmpStoryBaseLayer {\n  /** @param {!AmpElement} element */\n  constructor(element) {\n    super(element);\n\n    /** @private @const {boolean} Only prerender if child of the first page. */\n    this.prerenderAllowed_ = matches(this.element,\n        'amp-story-page:first-of-type amp-story-grid-layer');\n  }\n\n\n  /** @override */\n  buildCallback() {\n    super.buildCallback();\n    this.applyTemplateClassName_();\n    this.setOwnCssGridStyles_();\n    this.setDescendentCssGridStyles_();\n  }\n\n\n  /** @override */\n  prerenderAllowed() {\n    return this.prerenderAllowed_;\n  }\n\n\n  /**\n   * Applies internal CSS class names for the template attribute, so that styles\n   * can use the class name instead of compound\n   * amp-story-grid-layer[template=\"...\"] selectors, since the latter increases\n   * CSS specificity and can prevent users from being able to override styles.\n   * @private\n   */\n  applyTemplateClassName_() {\n    if (this.element.hasAttribute(TEMPLATE_ATTRIBUTE_NAME)) {\n      const templateName = this.element.getAttribute(TEMPLATE_ATTRIBUTE_NAME);\n      const templateClassName = TEMPLATE_CLASS_NAMES[templateName];\n      this.element.classList.add(templateClassName);\n    }\n  }\n\n\n  /**\n   * Copies the whitelisted CSS grid styles for descendants of the\n   * <amp-story-grid-layer> element.\n   * @private\n   */\n  setDescendentCssGridStyles_() {\n    const elementsToUpgradeStyles = scopedQuerySelectorAll(this.element,\n        SUPPORTED_CSS_GRID_ATTRIBUTES_SELECTOR);\n\n    Array.prototype.forEach.call(elementsToUpgradeStyles, element => {\n      this.setCssGridStyles_(element);\n    });\n  }\n\n\n  /**\n   * Copies the whitelisted CSS grid styles for the <amp-story-grid-layer>\n   * element itself.\n   * @private\n   */\n  setOwnCssGridStyles_() {\n    this.setCssGridStyles_(this.element);\n  }\n\n\n  /**\n   * Copies the values of an element's attributes to its styles, if the\n   * attributes/properties are in the whitelist.\n   *\n   * @param {!Element} element The element whose styles should be copied from\n   *     its attributes.\n   */\n  setCssGridStyles_(element) {\n    for (let i = element.attributes.length - 1; i >= 0; i--) {\n      const attribute = element.attributes[i];\n      const attributeName = attribute.name.toLowerCase();\n      const propertyName = SUPPORTED_CSS_GRID_ATTRIBUTES[attributeName];\n      if (propertyName) {\n        element.style[propertyName] = attribute.value;\n        element.removeAttribute(attributeName);\n      }\n    }\n  }\n}\n\nAMP.registerElement('amp-story-grid-layer', AmpStoryGridLayer);\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from '../../../src/services';\nimport {dict} from '../../../src/utils/object';\nimport {renderAsElement} from './simple-template';\n\n\n/** @private @const {!./simple-template.ElementDef} */\nconst TEMPLATE = {\n  tag: 'aside',\n  attrs: dict({\n    'class': 'i-amphtml-story-hint-container ' +\n        'i-amphtml-story-system-reset i-amphtml-hidden'}),\n  children: [\n    {\n      tag: 'div',\n      attrs: dict({'class': 'i-amphtml-story-navigation-help-overlay'}),\n      children: [\n        {\n          tag: 'div',\n          attrs: dict({'class': 'i-amphtml-story-navigation-help-section'\n              + ' prev-page'}),\n          children: [\n            {\n              tag: 'div',\n              attrs: dict({'class': 'i-amphtml-story-hint-placeholder'}),\n              children: [\n                {\n                  tag: 'div',\n                  attrs: dict({'class': 'i-amphtml-story-hint-tap-button'}),\n                  children: [\n                    {\n                      tag: 'div',\n                      attrs: dict({'class':\n                          'i-amphtml-story-hint-tap-button-icon'}),\n                    },\n                  ],\n                },\n                {\n                  tag: 'div',\n                  attrs: dict({'class':\n                      'i-amphtml-story-hint-tap-button-text'}),\n                  text: 'Back',\n                },\n              ],\n            },\n          ],\n        },\n        {\n          tag: 'div',\n          attrs: dict({'class': 'i-amphtml-story-navigation-help-section'\n              + ' next-page'}),\n          children: [\n            {\n              tag: 'div',\n              attrs: dict({'class': 'i-amphtml-story-hint-placeholder'}),\n              children: [\n                {\n                  tag: 'div',\n                  attrs: dict({'class': 'i-amphtml-story-hint-tap-button'}),\n                  children: [\n                    {\n                      tag: 'div',\n                      attrs: dict({'class':\n                          'i-amphtml-story-hint-tap-button-icon'}),\n                    },\n                  ],\n                },\n                {\n                  tag: 'div',\n                  attrs: dict({'class':\n                      'i-amphtml-story-hint-tap-button-text'}),\n                  text: 'Next',\n                },\n              ],\n            },\n          ],\n        },\n      ],\n    },\n  ],\n};\n\n/** @type {string} */\nconst NAVIGATION_OVERLAY_CLASS = 'show-navigation-overlay';\n\n/** @type {string} */\nconst FIRST_PAGE_OVERLAY_CLASS = 'show-first-page-overlay';\n\n/** @type {number} */\nconst NAVIGATION_OVERLAY_TIMEOUT = 3000;\n\n/** @type {number} */\nconst FIRST_PAGE_NAVIGATION_OVERLAY_TIMEOUT = 275;\n\n/**\n * User Hint Layer for <amp-story>.\n */\nexport class AmpStoryHint {\n\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private {!Window} */\n    this.win_ = win;\n\n    /** @private {!Document} */\n    this.document_ = this.win_.document;\n\n    /** @const @private {!../../../src/service/vsync-impl.Vsync} */\n    this.vsync_ = Services.vsyncFor(this.win_);\n\n    /** @const @private {!../../../src/service/timer-impl.Timer} */\n    this.timer_ = Services.timerFor(this.win_);\n\n    /** @private {?Element} */\n    this.hintContainer_ = null;\n\n    /** @private {?(number|string)} */\n    this.hintTimeout_ = null;\n  }\n\n  /**\n   * Builds the hint layer DOM.\n   * @return {!Element}\n   */\n  buildHintContainer() {\n    this.hintContainer_ = renderAsElement(this.document_, TEMPLATE);\n    return this.hintContainer_;\n  }\n\n  /**\n   * Shows the given hint\n   */\n  showHint_(hintClass) {\n    this.vsync_.mutate(() => {\n      this.hintContainer_.classList.toggle(NAVIGATION_OVERLAY_CLASS,\n          hintClass == NAVIGATION_OVERLAY_CLASS);\n      this.hintContainer_.classList.toggle(FIRST_PAGE_OVERLAY_CLASS,\n          hintClass == FIRST_PAGE_OVERLAY_CLASS);\n      this.hintContainer_.classList.remove('i-amphtml-hidden');\n\n      const hideTimeout = hintClass == NAVIGATION_OVERLAY_CLASS\n        ? NAVIGATION_OVERLAY_TIMEOUT : FIRST_PAGE_NAVIGATION_OVERLAY_TIMEOUT;\n      this.hideAfterTimeout(hideTimeout);\n    });\n\n  }\n\n  /**\n   * Show navigation overlay DOM.\n   */\n  showNavigationOverlay() {\n    this.showHint_(NAVIGATION_OVERLAY_CLASS);\n  }\n\n  /**\n   * Show navigation overlay DOM.\n   */\n  showFirstPageHintOverlay() {\n    this.showHint_(FIRST_PAGE_OVERLAY_CLASS);\n  }\n\n  /**\n   * Hides the overlay after a given time\n   * @param {number} timeout\n   */\n  hideAfterTimeout(timeout) {\n    this.hintTimeout_ = this.timer_.delay(\n        () => this.hideInternal_(), timeout);\n  }\n\n  /**\n   * Hide all navigation hints.\n   */\n  hideAllNavigationHint() {\n    this.hideInternal_();\n\n    if (this.hintTimeout_ !== null) {\n      this.timer_.cancel(this.hintTimeout_);\n      this.hintTimeout_ = null;\n    }\n  }\n\n  /** @private */\n  hideInternal_() {\n    this.vsync_.mutate(() => {\n      this.hintContainer_.classList.add('i-amphtml-hidden');\n    });\n  }\n}\n\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Embeds a story\n *\n * Example:\n * <code>\n * <amp-story-page>\n * </amp-story>\n * </code>\n */\nimport {AdvancementConfig} from './page-advancement';\nimport {\n  AnimationManager,\n  hasAnimations,\n} from './animation';\nimport {EventType, dispatch, dispatchCustom} from './events';\nimport {Layout} from '../../../src/layout';\nimport {LoadingSpinner} from './loading-spinner';\nimport {MediaPool} from './media-pool';\nimport {PageScalingService} from './page-scaling';\nimport {\n  closestBySelector,\n  matches,\n  scopedQuerySelectorAll,\n} from '../../../src/dom';\nimport {debounce} from '../../../src/utils/rate-limit';\nimport {dev} from '../../../src/log';\nimport {getLogEntries} from './logging';\nimport {getMode} from '../../../src/mode';\nimport {listen} from '../../../src/event-helper';\nimport {upgradeBackgroundAudio} from './audio';\n\n/**\n * CSS class for an amp-story-page that indicates the entire page is loaded.\n * @const {string}\n */\nconst PAGE_LOADED_CLASS_NAME = 'i-amphtml-story-page-loaded';\n\n\n/**\n * Selector for which media to wait for on page layout.\n * @const {string}\n */\nconst PAGE_MEDIA_SELECTOR = 'amp-audio, amp-video, amp-img, amp-anim';\n\n\n/** @private @const {string} */\nconst TAG = 'amp-story-page';\n\n/** @private @const {string} */\nconst ADVERTISEMENT_ATTR_NAME = 'ad';\n\n\n/**\n * The <amp-story-page> custom element, which represents a single page of\n * an <amp-story>.\n */\nexport class AmpStoryPage extends AMP.BaseElement {\n  /** @param {!AmpElement} element */\n  constructor(element) {\n    super(element);\n\n    /** @private {?AnimationManager} */\n    this.animationManager_ = null;\n\n    /** @private @const {!AdvancementConfig} */\n    this.advancement_ = AdvancementConfig.forPage(this);\n\n    /** @private {?Element} */\n    this.loadingSpinner_ = null;\n\n    /** @private @const {!Promise} */\n    this.mediaLayoutPromise_ = this.waitForMediaLayout_();\n\n    /** @private @const {!Promise} */\n    this.pageLoadPromise_ = this.mediaLayoutPromise_.then(() => {\n      this.markPageAsLoaded_();\n    });\n\n    let mediaPoolResolveFn, mediaPoolRejectFn;\n\n    /** @private @const {!Promise<!MediaPool>} */\n    this.mediaPoolPromise_ = new Promise((resolve, reject) => {\n      mediaPoolResolveFn = resolve;\n      mediaPoolRejectFn = reject;\n    });\n\n    /** @private @const {!function(!MediaPool)} */\n    this.mediaPoolResolveFn_ = mediaPoolResolveFn;\n\n    /** @private @const {!function(*)} */\n    this.mediaPoolRejectFn_ = mediaPoolRejectFn;\n\n    /** @private @const {boolean} Only prerender the first story page. */\n    this.prerenderAllowed_ = matches(this.element,\n        'amp-story-page:first-of-type');\n\n    /** @const @private {!function()} */\n    this.debounceToggleLoadingSpinner_ = debounce(\n        this.win, isActive => this.toggleLoadingSpinner_(!!isActive), 100);\n\n    /** @private {!Array<function()>} */\n    this.unlisteners_ = [];\n  }\n\n\n  /*\n   * @return {?./animation.AnimationManager}\n   * @private\n   */\n  maybeCreateAnimationManager_() {\n    if (!this.animationManager_) {\n      if (!hasAnimations(this.element)) {\n        return;\n      }\n\n      this.animationManager_ = AnimationManager.create(\n          this.element, this.getAmpDoc(), this.getAmpDoc().getUrl());\n    }\n  }\n\n\n  /** @override */\n  buildCallback() {\n    upgradeBackgroundAudio(this.element);\n    this.markMediaElementsWithPreload_();\n    this.initializeMediaPool_();\n    this.maybeCreateAnimationManager_();\n    this.advancement_.addPreviousListener(() => this.previous());\n    this.advancement_\n        .addAdvanceListener(() => this.next(/* opt_isAutomaticAdvance */ true));\n    this.advancement_.addOnTapNavigationListener(\n        navigationDirection => this.navigateOnTap(navigationDirection));\n    this.advancement_\n        .addProgressListener(progress => this.emitProgress_(progress));\n  }\n\n\n  /** @private */\n  initializeMediaPool_() {\n    const storyEl = dev().assertElement(\n        closestBySelector(this.element, 'amp-story'),\n        'amp-story-page must be a descendant of amp-story.');\n\n    storyEl.getImpl()\n        .then(storyImpl => {\n          this.mediaPoolResolveFn_(MediaPool.for(storyImpl));\n        }, reason => this.mediaPoolRejectFn_(reason));\n  }\n\n\n  /**\n   * Marks any AMP elements that represent media elements with preload=\"auto\".\n   * @private\n   */\n  markMediaElementsWithPreload_() {\n    const mediaSet = this.element.querySelectorAll('amp-audio, amp-video');\n    Array.prototype.forEach.call(mediaSet, mediaItem => {\n      mediaItem.setAttribute('preload', 'auto');\n    });\n  }\n\n\n  /** @override */\n  isLayoutSupported(layout) {\n    return layout == Layout.CONTAINER;\n  }\n\n\n  /** @override */\n  pauseCallback() {\n    this.advancement_.stop();\n\n    this.stopListeningToVideoEvents_();\n    this.pauseAllMedia_(true /* rewindToBeginning */);\n\n    if (this.animationManager_) {\n      this.animationManager_.cancelAll();\n    }\n  }\n\n\n  /** @override */\n  resumeCallback() {\n    this.registerAllMedia_();\n\n    if (this.isActive()) {\n      this.advancement_.start();\n      this.maybeStartAnimations();\n      this.preloadAllMedia_()\n          .then(() => this.startListeningToVideoEvents_())\n          .then(() => this.playAllMedia_());\n    }\n\n    this.reportDevModeErrors_();\n  }\n\n\n  /** @override */\n  layoutCallback() {\n    this.muteAllMedia();\n\n    return Promise.all([\n      this.beforeVisible(),\n      this.mediaLayoutPromise_,\n      this.mediaPoolPromise_,\n    ]);\n  }\n\n\n  /** @return {!Promise} */\n  beforeVisible() {\n    return this.scale_().then(() => this.maybeApplyFirstAnimationFrame());\n  }\n\n\n  /**\n   * @return {!Promise}\n   * @private\n   */\n  waitForMediaLayout_() {\n    const mediaSet = scopedQuerySelectorAll(this.element, PAGE_MEDIA_SELECTOR);\n    const mediaPromises = Array.prototype.map.call(mediaSet, mediaEl => {\n      return new Promise(resolve => {\n        switch (mediaEl.tagName.toLowerCase()) {\n          case 'amp-img':\n          case 'amp-anim':\n            mediaEl.addEventListener('load', resolve, true /* useCapture */);\n            break;\n          case 'amp-audio':\n          case 'amp-video':\n            if (mediaEl.readyState >= 2) {\n              resolve();\n              return;\n            }\n\n            mediaEl.addEventListener('canplay', resolve, true /* useCapture */);\n            break;\n          default:\n            // Any other tags should not block loading.\n            resolve();\n        }\n\n        // We suppress errors so that Promise.all will still wait for all\n        // promises to complete, even if one has failed.  We do nothing with the\n        // error, as the resource itself and/or code that loads it should handle\n        // the error.\n        mediaEl.addEventListener('error', resolve, true /* useCapture */);\n      });\n    });\n\n    return Promise.all(mediaPromises);\n  }\n\n\n  /** @return {!Promise} */\n  whenLoaded() {\n    return this.pageLoadPromise_;\n  }\n\n\n  /** @private */\n  markPageAsLoaded_() {\n    dispatch(this.element, EventType.PAGE_LOADED, true);\n    this.mutateElement(() => {\n      this.element.classList.add(PAGE_LOADED_CLASS_NAME);\n    });\n  }\n\n\n  /** @override */\n  prerenderAllowed() {\n    return this.prerenderAllowed_;\n  }\n\n\n  /**\n   * Gets all media elements on this page.\n   * @return {!NodeList<!Element>}\n   * @private\n   */\n  getAllMedia_() {\n    return this.element.querySelectorAll('audio, video');\n  }\n\n\n  /**\n   * Gets all video elements on this page.\n   * @return {!NodeList<!Element>}\n   * @private\n   */\n  getAllVideos_() {\n    return this.element.querySelectorAll('video');\n  }\n\n\n  /**\n   * Applies the specified callback to each media element on the page, after the\n   * media element is loaded.\n   * @param {!function(!./media-pool.MediaPool, !Element)} callbackFn The\n   *     callback to be applied to each media element.\n   * @return {!Promise} Promise that resolves after the callbacks are called.\n   */\n  whenAllMediaElements_(callbackFn) {\n    const mediaSet = this.getAllMedia_();\n    return this.mediaPoolPromise_.then(mediaPool => {\n      const promises = Array.prototype.map.call(mediaSet, mediaEl => {\n        return callbackFn(mediaPool, mediaEl);\n      });\n\n      return Promise.all(promises);\n    });\n  }\n\n\n  /**\n   * Pauses all media on this page.\n   * @param {boolean=} rewindToBeginning Whether to rewind the currentTime\n   *     of media items to the beginning.\n   * @return {!Promise} Promise that resolves after the callbacks are called.\n   * @private\n   */\n  pauseAllMedia_(rewindToBeginning = false) {\n    return this.whenAllMediaElements_((mediaPool, mediaEl) => {\n      return mediaPool.pause(\n          /** @type {!HTMLMediaElement} */ (mediaEl), rewindToBeginning);\n    });\n  }\n\n\n  /**\n   * Plays all media on this page.\n   * @return {!Promise} Promise that resolves after the callbacks are called.\n   * @private\n   */\n  playAllMedia_() {\n    return this.whenAllMediaElements_((mediaPool, mediaEl) => {\n      return mediaPool.play(/** @type {!HTMLMediaElement} */ (mediaEl));\n    });\n  }\n\n\n  /**\n   * Preloads all media on this page.\n   * @return {!Promise} Promise that resolves after the callbacks are called.\n   * @private\n   */\n  preloadAllMedia_() {\n    return this.whenAllMediaElements_((mediaPool, mediaEl) => {\n      return mediaPool.preload(/** @type {!HTMLMediaElement} */ (mediaEl));\n    });\n  }\n\n\n  /**\n   * Mutes all media on this page.\n   * @return {!Promise} Promise that resolves after the callbacks are called.\n   */\n  muteAllMedia() {\n    return this.whenAllMediaElements_((mediaPool, mediaEl) => {\n      return mediaPool.mute(/** @type {!HTMLMediaElement} */ (mediaEl));\n    });\n  }\n\n\n  /**\n   * Unmutes all media on this page.\n   * @return {!Promise} Promise that resolves after the callbacks are called.\n   */\n  unmuteAllMedia() {\n    return this.whenAllMediaElements_((mediaPool, mediaEl) => {\n      return mediaPool.unmute(/** @type {!HTMLMediaElement} */ (mediaEl));\n    });\n  }\n\n\n  /**\n   * Registers all media on this page\n   * @return {!Promise} Promise that resolves after the callbacks are called.\n   * @private\n   */\n  registerAllMedia_() {\n    return this.whenAllMediaElements_((mediaPool, mediaEl) => {\n      return mediaPool.register(/** @type {!HTMLMediaElement} */ (mediaEl));\n    });\n  }\n\n\n  /**\n   * Starts playing animations, if the animation manager is available.\n   */\n  maybeStartAnimations() {\n    if (!this.animationManager_) {\n      return;\n    }\n    this.animationManager_.animateIn();\n  }\n\n\n  /**\n   * @return {!Promise}\n   */\n  maybeApplyFirstAnimationFrame() {\n    if (!this.animationManager_) {\n      return Promise.resolve();\n    }\n    return this.animationManager_.applyFirstFrame();\n  }\n\n  /**\n   * @return {!Promise}\n   * @private\n   */\n  scale_() {\n    const storyEl = dev().assertElement(this.element.parentNode);\n    return PageScalingService.for(storyEl).scale(this.element);\n  }\n\n  /**\n   * @param {boolean} isActive\n   */\n  setActive(isActive) {\n    if (isActive) {\n      this.element.setAttribute('active', '');\n      this.beforeVisible();\n      this.resumeCallback();\n    } else {\n      this.element.removeAttribute('active');\n      this.pauseCallback();\n    }\n  }\n\n\n  /**\n   * @return {number} The distance from the current page to the active page.\n   */\n  getDistance() {\n    return parseInt(this.element.getAttribute('distance'), 10);\n  }\n\n\n  /**\n   * @param {number} distance The distance from the current page to the active\n   *     page.\n   */\n  setDistance(distance) {\n    // TODO(ccordry) refactor this when pages are managed\n    if (this.isAd()) {\n      distance = Math.min(distance, 1);\n    }\n\n    this.element.setAttribute('distance', distance);\n    this.registerAllMedia_();\n    if (distance > 0 && distance <= 2) {\n      this.preloadAllMedia_();\n      this.scale_();\n    }\n  }\n\n\n  /**\n   * @return {boolean} Whether this page is currently active.\n   */\n  isActive() {\n    return this.element.hasAttribute('active');\n  }\n\n  /**\n   * Emits an event indicating that the progress of the current page has changed\n   * to the specified value.\n   * @param {number} progress The progress from 0.0 to 1.0.\n   */\n  emitProgress_(progress) {\n    const payload = {\n      pageId: this.element.id,\n      progress,\n    };\n    const eventInit = {bubbles: true};\n    dispatchCustom(this.win, this.element, EventType.PAGE_PROGRESS, payload,\n        eventInit);\n  }\n\n\n  /**\n   * Returns all of the pages that are one hop from this page.\n   * @return {!Array<string>}\n   */\n  getAdjacentPageIds() {\n    const adjacentPageIds = [];\n\n    const autoAdvanceNext =\n        this.getNextPageId(true /* opt_isAutomaticAdvance */);\n    const manualAdvanceNext =\n        this.getNextPageId(false /* opt_isAutomaticAdvance */);\n    const previous = this.getPreviousPageId_();\n\n    if (autoAdvanceNext) {\n      adjacentPageIds.push(autoAdvanceNext);\n    }\n\n    if (manualAdvanceNext && manualAdvanceNext != autoAdvanceNext) {\n      adjacentPageIds.push(manualAdvanceNext);\n    }\n\n    if (previous) {\n      adjacentPageIds.push(previous);\n    }\n\n    return adjacentPageIds;\n  }\n\n\n  /**\n   * Gets the ID of the previous page in the story (before the current page).\n   * @return {?string} Returns the ID of the next page in the story, or null if\n   *     there isn't one.\n   * @private\n   */\n  getPreviousPageId_() {\n    if (this.element.hasAttribute('i-amphtml-return-to')) {\n      return this.element.getAttribute('i-amphtml-return-to');\n    }\n\n    const previousElement = this.element.previousElementSibling;\n    if (previousElement && previousElement.tagName.toLowerCase() === TAG) {\n      return previousElement.id;\n    }\n\n    return null;\n  }\n\n\n  /**\n   * Gets the ID of the next page in the story (after the current page).\n   * @param {boolean=} opt_isAutomaticAdvance Whether this navigation was caused\n   *     by an automatic advancement after a timeout.\n   * @return {?string} Returns the ID of the next page in the story, or null if\n   *     there isn't one.\n   */\n  getNextPageId(opt_isAutomaticAdvance) {\n    if (opt_isAutomaticAdvance &&\n        this.element.hasAttribute('auto-advance-to')) {\n      return this.element.getAttribute('auto-advance-to');\n    }\n\n    if (this.element.hasAttribute('i-amphtml-advance-to')) {\n      return this.element.getAttribute('i-amphtml-advance-to');\n    }\n\n    const nextElement = this.element.nextElementSibling;\n    if (nextElement && nextElement.tagName.toLowerCase() === TAG) {\n      return nextElement.id;\n    }\n\n    return null;\n  }\n\n\n  /**\n   * Navigates to the previous page in the story.\n   */\n  previous() {\n    const targetPageId = this.getPreviousPageId_();\n\n    if (targetPageId === null) {\n      dispatch(this.element, EventType.SHOW_NO_PREVIOUS_PAGE_HELP, true);\n      return;\n    }\n\n    this.switchTo_(targetPageId);\n  }\n\n\n  /**\n   * Navigates to the next page in the story.\n   * @param {boolean=} opt_isAutomaticAdvance Whether this navigation was caused\n   *     by an automatic advancement after a timeout.\n   */\n  next(opt_isAutomaticAdvance) {\n    const pageId = this.getNextPageId(opt_isAutomaticAdvance);\n\n    if (pageId === null) {\n      dispatch(this.element, EventType.SHOW_BOOKEND, /* opt_bubbles */ true);\n      return;\n    }\n\n    this.switchTo_(pageId);\n  }\n\n  /**\n   * Delegated the navigation decision to AMP-STORY via event.\n   * @param {number} direction The direction in which navigation needs to takes place.\n   */\n  navigateOnTap(direction) {\n    const payload = {direction};\n    const eventInit = {bubbles: true};\n    dispatchCustom(this.win, this.element, EventType.TAP_NAVIGATION, payload,\n        eventInit);\n  }\n\n\n  /**\n   * @param {string} targetPageId\n   * @private\n   */\n  switchTo_(targetPageId) {\n    const payload = {targetPageId};\n    const eventInit = {bubbles: true};\n    dispatchCustom(this.win, this.element, EventType.SWITCH_PAGE, payload,\n        eventInit);\n  }\n\n\n  /**\n   * @private\n   */\n  reportDevModeErrors_() {\n    if (!getMode().development) {\n      return;\n    }\n\n    getLogEntries(this.element).then(logEntries => {\n      dispatchCustom(this.win, this.element,\n          EventType.DEV_LOG_ENTRIES_AVAILABLE, logEntries, {bubbles: true});\n    });\n  }\n\n\n  /**\n   * Displays a loading spinner whenever the video is buffering.\n   * Has to be called after the mediaPool preload method, that swaps the video\n   * elements with new amp elements.\n   * @private\n   */\n  startListeningToVideoEvents_() {\n    const videos = this.getAllVideos_();\n\n    if (videos.length === 0) {\n      return;\n    }\n\n    this.debounceToggleLoadingSpinner_(true);\n    Array.prototype.forEach.call(videos, videoEl => {\n      this.unlisteners_.push(listen(\n          videoEl, 'playing', () => this.debounceToggleLoadingSpinner_(false)));\n      this.unlisteners_.push(listen(\n          videoEl, 'waiting', () => this.debounceToggleLoadingSpinner_(true)));\n    });\n  }\n\n\n  /**\n   * @private\n   */\n  stopListeningToVideoEvents_() {\n    this.debounceToggleLoadingSpinner_(false);\n    this.unlisteners_.forEach(unlisten => unlisten());\n    this.unlisteners_ = [];\n  }\n\n\n  /**\n   * @private\n   */\n  buildAndAppendLoadingSpinner_() {\n    this.loadingSpinner_ = new LoadingSpinner(this.win.document);\n    this.element.appendChild(this.loadingSpinner_.build());\n  }\n\n\n  /**\n   * Has to be called through the `debounceToggleLoadingSpinner_` method, to\n   * avoid the spinner flashing on the screen when the video loops, or during\n   * navigation transitions.\n   * Builds the loading spinner and attaches it to the DOM on first call.\n   * @param {boolean} isActive\n   * @private\n   */\n  toggleLoadingSpinner_(isActive) {\n    this.getVsync().mutate(() => {\n      if (!this.loadingSpinner_) {\n        this.buildAndAppendLoadingSpinner_();\n      }\n\n      this.loadingSpinner_.toggle(isActive);\n    });\n  }\n\n\n  /**\n   * check to see if this page is a wrapper for an ad\n   * @return {boolean}\n   */\n  isAd() {\n    return this.element.hasAttribute(ADVERTISEMENT_ATTR_NAME);\n  }\n}\n\nAMP.registerElement('amp-story-page', AmpStoryPage);\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {EmbedMode} from './embed-mode';\nimport {Observable} from '../../../src/observable';\nimport {dev} from '../../../src/log';\nimport {isArray} from '../../../src/types';\nimport {map} from '../../../src/utils/object';\n\n\n/** @typedef {{type: !StateType, value: *}} */\nexport let StateChangeEventDef;\n\n/** @typedef {!Object<!StateType, !State>} */\nexport let StatesMap;\n\n/** @private @const @enum {string} */\nexport const StateType = {\n  BOOKEND_ACTIVE: 'bookendactive',\n  NAVIGATION_OVERLAY_HINT_SHOWN: 'navigationoverlayhintshown',\n  NO_PREVIOUS_PAGE_HELP_SHOWN: 'nopreviouspagehelpshown',\n  ALLOW_AUTOMATIC_AD_INSERTION: 'allowautomaticadinsertion',\n  SYSTEM_LAYER_BUTTONS_SHOWN: 'systemlayerbuttonsshown',\n  MUTE_AUDIO_BY_DEFAULT: 'muteaudiobydefault',\n};\n\n/**\n *\n */\nexport class AmpStoryStateService {\n  // TODO(newmuis): Scope this to story using a static for(...) function so that\n  // it can be retrieved from other classes (e.g. AmpStoryPage) without directly\n  // passing it.\n  constructor() {\n    /** @private {!StatesMap} */\n    this.states_ = map({});\n\n    /** @private {!StatesMap} */\n    this.defaultStates_ = map({});\n\n    // Initialize default states.\n    this.initializeState(this.defaultStates_, [\n      new State(StateType.BOOKEND_ACTIVE,\n          false /* defaultValue */, true /* isModifiable */),\n      new State(StateType.NAVIGATION_OVERLAY_HINT_SHOWN,\n          false /* defaultValue */, true /* isModifiable */),\n      new State(StateType.NO_PREVIOUS_PAGE_HELP_SHOWN,\n          false /* defaultValue */, true /* isModifiable */),\n      new State(StateType.ALLOW_AUTOMATIC_AD_INSERTION,\n          true /* defaultValue */, true /* isModifiable */),\n      new State(StateType.SYSTEM_LAYER_BUTTONS_SHOWN,\n          true /* defaultValue */, true /* isModifiable */),\n      new State(StateType.MUTE_AUDIO_BY_DEFAULT,\n          true /* defaultValue */, true /* isModifiable */),\n    ]);\n  }\n\n  /**\n   * @param {!StateType} stateType\n   * @return {!State}\n   */\n  getState(stateType) {\n    return dev().assert(\n        this.states_[stateType] || this.defaultStates_[stateType],\n        `Unknown state ${stateType}.`);\n  }\n\n  /**\n   * @param {!StatesMap} statesMap The map to be populated with states.\n   * @param {!State|!Array<!State>} stateOrArr The state or list of states to\n   *     populate.\n   */\n  initializeState(statesMap, stateOrArr) {\n    if (isArray(stateOrArr)) {\n      stateOrArr.forEach(state => {\n        this.initializeSingleValue_(statesMap, state);\n      });\n    } else {\n      this.initializeSingleValue_(statesMap,\n          /** @type {!State} */ (stateOrArr));\n    }\n  }\n\n  /**\n   * @param {!StatesMap} statesMap The map to be populated with states.\n   * @param {!State} state The state to populate.\n   * @private\n   */\n  initializeSingleValue_(statesMap, state) {\n    dev().assert(!statesMap[state.type],\n        `Duplicate entries for state ${state.type}.`);\n    statesMap[state.type] = state;\n  }\n\n  /**\n   * @param {!EmbedMode} embedMode\n   */\n  initializeEmbedMode(embedMode) {\n    switch (embedMode) {\n      case EmbedMode.NAME_TBD:\n        this.initializeState(this.states_, [\n          new State(StateType.BOOKEND_ACTIVE,\n              false /* defaultValue */, false /* isModifiable */),\n          new State(StateType.NAVIGATION_OVERLAY_HINT_SHOWN,\n              false /* defaultValue */, false /* isModifiable */),\n          new State(StateType.NO_PREVIOUS_PAGE_HELP_SHOWN,\n              false /* defaultValue */, true /* isModifiable */),\n          new State(StateType.ALLOW_AUTOMATIC_AD_INSERTION,\n              false /* defaultValue */, false /* isModifiable */),\n          new State(StateType.SYSTEM_LAYER_BUTTONS_SHOWN,\n              false /* defaultValue */, false /* isModifiable */),\n          new State(StateType.MUTE_AUDIO_BY_DEFAULT,\n              false /* defaultValue */, false /* isModifiable */),\n        ]);\n        break;\n    }\n  }\n}\n\n\n/**\n * TODO(newmuis): Perhaps some of this can be merged with\n * ../../../src/finite-state-machine.js\n * @template T\n */\nclass State {\n  /**\n   * @param {!StateType} type\n   * @param {T} defaultValue\n   * @param {boolean} isModifiable\n   */\n  constructor(type, defaultValue, isModifiable) {\n    /** @const {!StateType} */\n    this.type = type;\n\n    /** @private {T} */\n    this.value_ = defaultValue;\n\n    /** @private @const {!Observable<StateChangeEventDef>} */\n    this.observable_ = new Observable();\n\n    /** @private @const {boolean} */\n    this.isModifiable_ = isModifiable;\n  }\n\n  /**\n   * @return {boolean}\n   */\n  isModifiable() {\n    return this.isModifiable_;\n  }\n\n  /**\n   * @return {T}\n   */\n  getValue() {\n    return this.value_;\n  }\n\n  /**\n   * @param {function(!StateChangeEventDef):void} stateChangeFn\n   */\n  observe(stateChangeFn) {\n    this.observable_.add(stateChangeFn);\n  }\n\n  /**\n   * @param {T} value The new state\n   */\n  setValue(value) {\n    if (this.isModifiable) {\n      dev().error('AMP-STORY',\n          `Cannot change readonly state ${this.isModifiable}.`);\n      return;\n    }\n\n    if (value === this.getValue()) {\n      return;\n    }\n\n    this.value_ = value;\n    this.onStateUpdated_();\n  }\n\n  /** @private */\n  onStateUpdated_() {\n    this.observable_.fire({type: this.type, value: this.value_});\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Embeds a story\n *\n * Example:\n * <code>\n * <amp-story standalone bookend-config-src=\"bookend.json\">\n *   [...]\n * </amp-story>\n * </code>\n */\nimport './amp-story-auto-ads';\nimport './amp-story-grid-layer';\nimport './amp-story-page';\nimport {ActionTrust} from '../../../src/action-trust';\nimport {AmpStoryAnalytics} from './analytics';\nimport {AmpStoryBackground} from './background';\nimport {AmpStoryHint} from './amp-story-hint';\nimport {\n  AmpStoryStateService,\n  StateType,\n} from './amp-story-state-service';\nimport {AmpStoryVariableService} from './variable-service';\nimport {Bookend} from './bookend';\nimport {CSS} from '../../../build/amp-story-0.1.css';\nimport {CommonSignals} from '../../../src/common-signals';\nimport {\n  DoubletapRecognizer,\n  SwipeXYRecognizer,\n} from '../../../src/gesture-recognizers';\nimport {EventType, dispatch} from './events';\nimport {Gestures} from '../../../src/gesture';\nimport {KeyCodes} from '../../../src/utils/key-codes';\nimport {Layout} from '../../../src/layout';\nimport {MediaPool, MediaType} from './media-pool';\nimport {NavigationState} from './navigation-state';\nimport {ORIGIN_WHITELIST} from './origin-whitelist';\nimport {PaginationButtons} from './pagination-buttons';\nimport {Services} from '../../../src/services';\nimport {ShareWidget} from './share';\nimport {SystemLayer} from './system-layer';\nimport {TapNavigationDirection} from './page-advancement';\nimport {\n  closest,\n  escapeCssSelectorIdent,\n  matches,\n  removeElement,\n  scopedQuerySelectorAll,\n} from '../../../src/dom';\nimport {\n  computedStyle,\n  resetStyles,\n  setImportantStyles,\n  setStyle,\n} from '../../../src/style';\nimport {debounce} from '../../../src/utils/rate-limit';\nimport {dev, user} from '../../../src/log';\nimport {dict} from '../../../src/utils/object';\nimport {findIndex} from '../../../src/utils/array';\nimport {getMode} from '../../../src/mode';\nimport {getSourceOrigin, parseUrl} from '../../../src/url';\nimport {isExperimentOn, toggleExperiment} from '../../../src/experiments';\nimport {once} from '../../../src/utils/function';\nimport {parseEmbedMode} from './embed-mode';\nimport {registerServiceBuilder} from '../../../src/service';\nimport {relatedArticlesFromJson} from './related-articles';\nimport {renderSimpleTemplate} from './simple-template';\nimport {stringHash32} from '../../../src/string';\nimport {upgradeBackgroundAudio} from './audio';\n\n/** @private @const {string} */\nconst PRE_ACTIVE_PAGE_ATTRIBUTE_NAME = 'pre-active';\n\n/** @private @const {string} */\nconst BOOKEND_CONFIG_ATTRIBUTE_NAME = 'bookend-config-src';\n\n/** @private @const {string} */\nconst AMP_STORY_STANDALONE_ATTRIBUTE = 'standalone';\n\n/** @private @const {number} */\nconst DESKTOP_WIDTH_THRESHOLD = 1024;\n\n/** @private @const {number} */\nconst DESKTOP_HEIGHT_THRESHOLD = 550;\n\n/** @private @const {number} */\nconst MIN_SWIPE_FOR_HINT_OVERLAY_PX = 50;\n\n/** @private @const {string} */\nconst ADVANCE_TO_ATTR = 'i-amphtml-advance-to';\n\n/** @private @const {string} */\nconst RETURN_TO_ATTR = 'i-amphtml-return-to';\n\n/** @private @const {string} */\nconst AUTO_ADVANCE_TO_ATTR = 'auto-advance-to';\n\n/** @private @const {string} */\nconst AD_SHOWING_ATTR = 'ad-showing';\n\n\n/**\n * The duration of time (in milliseconds) to wait for a page to be loaded,\n * before the story becomes visible.\n * @const {number}\n */\nconst PAGE_LOAD_TIMEOUT_MS = 5000;\n\n\n/**\n * CSS class for an amp-story that indicates the initial load for the story has\n * completed.\n * @const {string}\n */\nconst STORY_LOADED_CLASS_NAME = 'i-amphtml-story-loaded';\n\n/** @const {!Object<string, number>} */\nconst MAX_MEDIA_ELEMENT_COUNTS = {\n  [MediaType.AUDIO]: 4,\n  [MediaType.VIDEO]: 8,\n};\n\n\n/**\n * @private @const {string}\n */\nconst AUDIO_MUTED_ATTRIBUTE = 'muted';\n\n/** @type {string} */\nconst TAG = 'amp-story';\n\nconst LANDSCAPE_OVERLAY_CLASS = 'i-amphtml-story-landscape';\n\n\n\nconst LANDSCAPE_ORIENTATION_WARNING = [\n  {\n    tag: 'div',\n    attrs: dict({\n      'class': 'i-amphtml-story-no-rotation-overlay ' +\n          'i-amphtml-story-system-reset'}),\n    children: [\n      {\n        tag: 'div',\n        attrs: dict({'class': 'i-amphtml-overlay-container'}),\n        children: [\n          {\n            tag: 'div',\n            attrs: dict({'class': 'i-amphtml-rotate-icon'}),\n          },\n          {\n            tag: 'div',\n            attrs: dict({'class': 'i-amphtml-story-overlay-text'}),\n            text: 'The page is best viewed in portrait mode',\n          },\n        ],\n      },\n    ],\n  },\n];\n\nconst DESKTOP_SIZE_WARNING = [\n  {\n    tag: 'div',\n    attrs: dict({\n      'class': 'i-amphtml-story-no-rotation-overlay ' +\n          'i-amphtml-story-system-reset'}),\n    children: [\n      {\n        tag: 'div',\n        attrs: dict({'class': 'i-amphtml-overlay-container'}),\n        children: [\n          {\n            tag: 'div',\n            attrs: dict({'class': 'i-amphtml-desktop-size-icon'}),\n          },\n          {\n            tag: 'div',\n            attrs: dict({'class': 'i-amphtml-story-overlay-text'}),\n            text: 'Expand your window to view this experience',\n          },\n        ],\n      },\n    ],\n  },\n];\n\nconst UNSUPPORTED_BROWSER_WARNING = [\n  {\n    tag: 'div',\n    attrs: dict({'class': 'i-amphtml-story-unsupported-browser-overlay'}),\n    children: [\n      {\n        tag: 'div',\n        attrs: dict({'class': 'i-amphtml-overlay-container'}),\n        children: [\n          {\n            tag: 'div',\n            attrs: dict({'class': 'i-amphtml-gear-icon'}),\n          },\n          {\n            tag: 'div',\n            attrs: dict({'class': 'i-amphtml-story-overlay-text'}),\n            text: 'We\\'re sorry, it looks like your browser doesn\\'t support ' +\n                'this experience',\n          },\n        ],\n      },\n    ],\n  },\n];\n\n\n/**\n * Container for \"pill-style\" share widget, rendered on desktop.\n * @private @const {!./simple-template.ElementDef}\n */\nconst SHARE_WIDGET_PILL_CONTAINER = {\n  tag: 'div',\n  attrs: dict({'class': 'i-amphtml-story-share-pill'}),\n};\n\n\n\n/**\n * Selector for elements that should be hidden when the bookend is open on\n * desktop view.\n * @private @const {string}\n */\nconst HIDE_ON_BOOKEND_SELECTOR =\n    'amp-story-page, .i-amphtml-story-system-layer';\n\n\n/**\n * @implements {./media-pool.MediaPoolRoot}\n */\nexport class AmpStory extends AMP.BaseElement {\n  /** @param {!AmpElement} element */\n  constructor(element) {\n    super(element);\n\n    /** @private {!NavigationState} */\n    this.navigationState_ =\n        new NavigationState(element, () => this.hasBookend_());\n\n    /** @private @const {!AmpStoryStateService} */\n    this.stateService_ = new AmpStoryStateService();\n\n    /** @const @private {!../../../src/service/vsync-impl.Vsync} */\n    this.vsync_ = this.getVsync();\n\n    /** @private @const {!Bookend} */\n    this.bookend_ = new Bookend(this.win);\n\n    /** @private @const {!SystemLayer} */\n    this.systemLayer_ = new SystemLayer(this.win, this.stateService_);\n\n    /** @private @const {!Array<string>} */\n    this.pageHistoryStack_ = [];\n\n    /** @private @const {!Array<!./amp-story-page.AmpStoryPage>} */\n    this.pages_ = [];\n\n    /** @private @const {!Array<!./amp-story-page.AmpStoryPage>} */\n    this.adPages_ = [];\n\n    /** @const @private {!AmpStoryVariableService} */\n    this.variableService_ = new AmpStoryVariableService();\n\n    /** @private @const {!function():!Promise<?./bookend.BookendConfigDef>} */\n    this.loadBookendConfig_ = once(() => this.loadBookendConfigImpl_());\n\n    /** @private {?./amp-story-page.AmpStoryPage} */\n    this.activePage_ = null;\n\n    /** @private @const */\n    this.desktopMedia_ = this.win.matchMedia(\n        `(min-width: ${DESKTOP_WIDTH_THRESHOLD}px) and ` +\n        `(min-height: ${DESKTOP_HEIGHT_THRESHOLD}px)`);\n\n    /** @private @const */\n    this.canRotateToDesktopMedia_ = this.win.matchMedia(\n        `(min-width: ${DESKTOP_HEIGHT_THRESHOLD}px) and ` +\n        `(min-height: ${DESKTOP_WIDTH_THRESHOLD}px)`);\n\n    /** @private {?AmpStoryBackground} */\n    this.background_ = null;\n\n    /** @private {?./pagination-buttons.PaginationButtons} */\n    this.paginationButtons_ = null;\n\n    /** @private {?Element} */\n    this.topBar_ = null;\n\n    /** @private {?ShareWidget} */\n    this.shareWidget_ = null;\n\n    /** @private @const {!Array<string>} */\n    this.originWhitelist_ = ORIGIN_WHITELIST;\n\n    /** @private {!AmpStoryHint} */\n    this.ampStoryHint_ = new AmpStoryHint(this.win);\n\n    /** @private {!MediaPool} */\n    this.mediaPool_ = MediaPool.for(this);\n\n    /** @private @const {!../../../src/service/timer-impl.Timer} */\n    this.timer_ = Services.timerFor(this.win);\n  }\n\n\n  /** @override */\n  buildCallback() {\n    this.assertAmpStoryExperiment_();\n\n    if (this.element.hasAttribute(AMP_STORY_STANDALONE_ATTRIBUTE)) {\n      this.initializeStandaloneStory_();\n    }\n\n    if (this.isDesktop_()) {\n      this.element.setAttribute('desktop','');\n    }\n    this.element.querySelector('amp-story-page').setAttribute('active', '');\n\n    this.initializeListeners_();\n    this.initializeListenersForDev_();\n\n    this.navigationState_.observe(stateChangeEvent =>\n      (new AmpStoryAnalytics(this.element)).onStateChange(stateChangeEvent));\n\n    this.navigationState_.observe(stateChangeEvent =>\n      this.variableService_.onStateChange(stateChangeEvent));\n\n    // Mute `amp-story` in beginning.\n    this.mute_();\n\n    upgradeBackgroundAudio(this.element);\n\n    registerServiceBuilder(this.win, 'story-variable',\n        () => this.variableService_);\n  }\n\n\n  /** @private */\n  initializeStandaloneStory_() {\n    const html = this.win.document.documentElement;\n    this.mutateElement(() => {\n      html.classList.add('i-amphtml-story-standalone');\n      // Lock body to prevent overflow.\n      this.lockBody_();\n      // Standalone CSS affects sizing of the entire page.\n      this.onResize();\n    }, html);\n\n    const embedMode = parseEmbedMode(this.win.location.hash);\n    this.stateService_.initializeEmbedMode(embedMode);\n  }\n\n\n  /**\n   * Builds the system layer DOM.  This is dependent on the pages_ array having\n   * been initialized, so it cannot happen at build time.\n   * @private\n   */\n  buildSystemLayer_() {\n    const pageIds = this.pages_.map(page => page.element.id);\n    this.element.appendChild(this.systemLayer_.build(pageIds));\n    this.updateAudioIcon_();\n  }\n\n  /**\n   * Builds the hint layer DOM.\n   * @private\n   */\n  buildHintLayer_() {\n    this.element.appendChild(this.ampStoryHint_.buildHintContainer());\n  }\n\n\n  /** @private */\n  initializeListeners_() {\n    this.element.addEventListener(EventType.NEXT_PAGE, () => {\n      this.next_();\n    });\n\n    this.element.addEventListener(EventType.PREVIOUS_PAGE, () => {\n      this.previous_();\n    });\n\n    this.element.addEventListener(EventType.SHOW_BOOKEND, () => {\n      this.hasBookend_().then(hasBookend => {\n        if (hasBookend) {\n          this.showBookend_();\n        }\n      });\n    });\n\n    this.element.addEventListener(EventType.CLOSE_BOOKEND, () => {\n      this.hideBookend_();\n    });\n\n    this.element.addEventListener(EventType.MUTE, () => {\n      this.mute_();\n    });\n\n    this.element.addEventListener(EventType.UNMUTE, () => {\n      this.unmute_();\n    });\n\n    this.element.addEventListener(EventType.AUDIO_PLAYING, () => {\n      this.audioPlaying_();\n    });\n\n    this.element.addEventListener(EventType.AUDIO_STOPPED, () => {\n      this.audioStopped_();\n    });\n\n    this.element.addEventListener(EventType.SWITCH_PAGE, e => {\n      if (this.bookend_.isActive()) {\n        // Disallow switching pages while the bookend is active.\n        return;\n      }\n\n      this.switchTo_(e.detail.targetPageId);\n      this.ampStoryHint_.hideAllNavigationHint();\n    });\n\n    this.element.addEventListener(EventType.PAGE_PROGRESS, e => {\n      const pageId = e.detail.pageId;\n      const progress = e.detail.progress;\n\n      if (pageId !== this.activePage_.element.id) {\n        // Ignore progress update events from inactive pages.\n        return;\n      }\n\n      if (!this.activePage_.isAd()) {\n        this.systemLayer_.updateProgress(pageId, progress);\n      }\n    });\n\n    this.element.addEventListener(EventType.REPLAY, () => {\n      this.replay_();\n    });\n\n    const noPreviousPageHelpShown = this.stateService_\n        .getState(StateType.NO_PREVIOUS_PAGE_HELP_SHOWN);\n\n    this.element.addEventListener(EventType.SHOW_NO_PREVIOUS_PAGE_HELP, () => {\n      if (noPreviousPageHelpShown.isModifiable()) {\n        this.ampStoryHint_.showFirstPageHintOverlay();\n      }\n    });\n\n    this.element.addEventListener(EventType.TAP_NAVIGATION, e => {\n      const {direction} = e.detail;\n      this.performTapNavigation_(direction);\n    });\n\n    this.win.document.addEventListener('keydown', e => {\n      this.onKeyDown_(e);\n    }, true);\n\n    this.getViewport().onResize(debounce(this.win, () => this.onResize(), 300));\n    this.installGestureRecognizers_();\n  }\n\n  /** @private */\n  installGestureRecognizers_() {\n    const {element} = this;\n    const gestures = Gestures.get(element, /* shouldNotPreventDefault */ true);\n\n    // Disables zoom on double-tap.\n    gestures.onGesture(DoubletapRecognizer, gesture => {\n      const {event} = gesture;\n      event.preventDefault();\n    });\n\n    // Shows \"tap to navigate\" hint when swiping.\n    gestures.onGesture(SwipeXYRecognizer, gesture => {\n      const {deltaX} = gesture.data;\n      if (this.bookend_.isActive()) {\n        return;\n      }\n      if (!this.isSwipeLargeEnoughForHint_(deltaX)) {\n        return;\n      }\n      const navigationOverlayHintShown = this.stateService_\n          .getState(StateType.NAVIGATION_OVERLAY_HINT_SHOWN);\n      if (!navigationOverlayHintShown.isModifiable()) {\n        return;\n      }\n\n      this.ampStoryHint_.showNavigationOverlay();\n    });\n  }\n\n  /** @private */\n  isSwipeLargeEnoughForHint_(deltaX) {\n    return (Math.abs(deltaX) >= MIN_SWIPE_FOR_HINT_OVERLAY_PX);\n  }\n\n  /** @private */\n  initializeListenersForDev_() {\n    if (!getMode().development) {\n      return;\n    }\n\n    this.element.addEventListener(EventType.DEV_LOG_ENTRIES_AVAILABLE, e => {\n      this.systemLayer_.logAll(e.detail);\n    });\n  }\n\n  /** @private */\n  lockBody_() {\n    const document = this.win.document;\n    setImportantStyles(document.documentElement, {\n      'overflow': 'hidden',\n    });\n    setImportantStyles(document.body, {\n      'overflow': 'hidden',\n    });\n\n    this.getViewport().resetTouchZoom();\n    this.getViewport().disableTouchZoom();\n    this.maybeLockScreenOrientation_();\n  }\n\n\n  /** @private */\n  maybeLockScreenOrientation_() {\n    const screen = this.win.screen;\n    if (!screen || !this.canRotateToDesktopMedia_.matches) {\n      return;\n    }\n\n    const lockOrientation = screen.lockOrientation ||\n        screen.mozLockOrientation || screen.msLockOrientation ||\n        (unusedOrientation => {});\n\n    try {\n      lockOrientation('portrait');\n    } catch (e) {\n      dev().warn(TAG, 'Failed to lock screen orientation:', e.message);\n    }\n  }\n\n  /** @private */\n  buildPaginationButtons_() {\n    this.paginationButtons_ = PaginationButtons.create(this.win.document);\n\n    this.paginationButtons_.attach(this.element);\n\n    this.navigationState_.observe(e =>\n      this.paginationButtons_.onNavigationStateChange(e));\n  }\n\n  /** @visibleForTesting */\n  buildPaginationButtonsForTesting() {\n    this.buildPaginationButtons_();\n  }\n\n  /** @private */\n  buildTopBar_() {\n    const doc = this.element.ownerDocument;\n\n    this.topBar_ = doc.createElement('div');\n    this.topBar_.classList.add('i-amphtml-story-top');\n    this.topBar_.appendChild(this.buildTopBarShare_());\n\n    this.element.insertBefore(this.topBar_, this.element.firstChild);\n  }\n\n  /**\n   * @return {!Node}\n   * @private\n   */\n  buildTopBarShare_() {\n    const container =\n        renderSimpleTemplate(this.win.document, SHARE_WIDGET_PILL_CONTAINER);\n\n    this.shareWidget_ = new ShareWidget(this.win);\n\n    container.appendChild(this.shareWidget_.build(this.getAmpDoc()));\n\n    this.loadBookendConfig_().then(bookendConfig => {\n      if (bookendConfig !== null) {\n        this.shareWidget_.setProviders(bookendConfig.shareProviders);\n      }\n    });\n\n    return container;\n  }\n\n  /** @override */\n  layoutCallback() {\n    if (!AmpStory.isBrowserSupported(this.win)) {\n      this.buildUnsupportedBrowserOverlay_();\n      dev().expectedError(TAG, 'Unsupported browser');\n      return Promise.resolve();\n    }\n\n    const firstPageEl = user().assertElement(\n        this.element.querySelector('amp-story-page'),\n        'Story must have at least one page.');\n\n    if (!this.paginationButtons_) {\n      this.buildPaginationButtons_();\n    }\n\n    const storyLayoutPromise = this.initializePages_()\n        .then(() => this.buildSystemLayer_())\n        .then(() => this.buildHintLayer_())\n        .then(() => this.buildLandscapeOrientationOverlay_())\n        .then(() => {\n          this.pages_.forEach(page => {\n            page.setActive(false);\n          });\n        })\n        .then(() => this.switchTo_(firstPageEl.id))\n        .then(() => this.preloadPagesByDistance_());\n\n    // Do not block the layout callback on the completion of these promises, as\n    // that prevents descendents from being laid out (and therefore loaded).\n    storyLayoutPromise.then(() => this.whenPagesLoaded_(PAGE_LOAD_TIMEOUT_MS))\n        .then(() => this.markStoryAsLoaded_());\n\n    return storyLayoutPromise;\n  }\n\n\n  /**\n   * @param {number} timeoutMs The maximum amount of time to wait, in\n   *     milliseconds.\n   * @return {!Promise} A promise that is resolved when the page is loaded or\n   *     the timeout has been exceeded, whichever happens first.\n   * @private\n   */\n  whenPagesLoaded_(timeoutMs = 0) {\n    const pagesToWaitFor = this.isDesktop_() ?\n      [this.pages_[0], this.pages_[1]] :\n      [this.pages_[0]];\n\n    const storyLoadPromise = Promise.all(\n        pagesToWaitFor.map(page => page.whenLoaded()));\n\n    return this.timer_.timeoutPromise(timeoutMs, storyLoadPromise)\n        .catch(() => {});\n  }\n\n\n  /** @private */\n  markStoryAsLoaded_() {\n    dispatch(this.element, EventType.STORY_LOADED, true);\n    this.signals().signal(CommonSignals.INI_LOAD);\n    this.mutateElement(() => {\n      this.element.classList.add(STORY_LOADED_CLASS_NAME);\n    });\n  }\n\n\n  /** @override */\n  isLayoutSupported(layout) {\n    return layout == Layout.CONTAINER;\n  }\n\n  /** @override */\n  prerenderAllowed() {\n    return true;\n  }\n\n\n  /** @private */\n  isAmpStoryEnabled_() {\n    if (isExperimentOn(this.win, TAG) || getMode().test) {\n      return true;\n    }\n\n    const origin = getSourceOrigin(this.win.location);\n    return this.isOriginWhitelisted_(origin);\n  }\n\n\n  /**\n   * @param {string} domain The domain part of the origin, to be hashed.\n   * @return {string} The hashed origin.\n   * @private\n   */\n  hashOrigin_(domain) {\n    return stringHash32(domain.toLowerCase());\n  }\n\n\n  /**\n   * @param {string} origin The origin to check.\n   * @return {boolean} Whether the specified origin is whitelisted to use the\n   *     amp-story extension.\n   * @private\n   */\n  isOriginWhitelisted_(origin) {\n    const hostName = parseUrl(origin).hostname;\n    const domains = hostName.split('.');\n\n    // Check all permutations of the domain to see if any level of the domain is\n    // whitelisted.  Taking the example of the whitelisted domain\n    // example.co.uk, if the page is served from www.example.co.uk/page.html:\n    //\n    //   www.example.co.uk => false\n    //   example.co.uk => true\n    //   co.uk => false\n    //   uk => false\n    //\n    // This is necessary, since we don't have any guarantees of which level of\n    // the domain is whitelisted.  For many domains (e.g. .com), the second\n    // level of the domain is likely to be whitelisted, whereas for others\n    // (e.g. .co.uk) the third level may be whitelisted.  Additionally, this\n    // allows subdomains to be whitelisted individually.\n    return domains.some((unusedDomain, index) => {\n      const domain = domains.slice(index, domains.length).join('.');\n      const domainHash = this.hashOrigin_(domain);\n      return this.originWhitelist_.includes(domainHash);\n    });\n  }\n\n\n  /** @private */\n  assertAmpStoryExperiment_() {\n    if (this.isAmpStoryEnabled_()) {\n      return;\n    }\n\n    const errorIconEl = this.win.document.createElement('div');\n    errorIconEl.classList.add('i-amphtml-story-experiment-icon');\n    errorIconEl.classList.add('i-amphtml-story-experiment-icon-error');\n\n    const errorMsgEl = this.win.document.createElement('span');\n    errorMsgEl.textContent = 'You must enable the amp-story experiment to ' +\n        'view this content.';\n\n    const experimentsLinkEl = this.win.document.createElement('button');\n    experimentsLinkEl.textContent = 'Enable';\n    experimentsLinkEl.addEventListener('click', () => {\n      toggleExperiment(this.win, 'amp-story', true);\n      errorIconEl.classList.remove('i-amphtml-story-experiment-icon-error');\n      errorIconEl.classList.add('i-amphtml-story-experiment-icon-done');\n      errorMsgEl.textContent = 'Experiment enabled.  Please reload.';\n      removeElement(experimentsLinkEl);\n    });\n\n    const errorEl = this.win.document.createElement('div');\n    errorEl.classList.add('i-amphtml-story-experiment-error');\n    errorEl.appendChild(errorIconEl);\n    errorEl.appendChild(errorMsgEl);\n    errorEl.appendChild(experimentsLinkEl);\n    this.element.appendChild(errorEl);\n\n    user().error(TAG, 'enable amp-story experiment');\n  }\n\n\n  /** @private */\n  initializePages_() {\n    const pageImplPromises = Array.prototype.map.call(\n        this.element.querySelectorAll('amp-story-page'),\n        (pageEl, index) => {\n          return pageEl.getImpl().then(pageImpl => {\n            this.pages_[index] = pageImpl;\n          });\n        });\n\n    return Promise.all(pageImplPromises);\n  }\n\n\n  /**\n   * Advance to the next screen in the story, if there is one.\n   * @param {boolean=} opt_isAutomaticAdvance Whether this navigation was caused\n   *     by an automatic advancement after a timeout.\n   * @private\n   */\n  next_(opt_isAutomaticAdvance) {\n    const activePage = dev().assert(this.activePage_,\n        'No active page set when navigating to next page.');\n\n    const lastPage = this.pages_[this.getPageCount() - 1];\n    if (activePage.element.hasAttribute(ADVANCE_TO_ATTR) ||\n        activePage !== lastPage) {\n      activePage.next(opt_isAutomaticAdvance);\n    } else {\n      dispatch(this.element, EventType.SHOW_BOOKEND);\n    }\n  }\n\n\n  /**\n   * Go back to the previous screen in the story, if there is one.\n   * @private\n   */\n  previous_() {\n    const activePage = dev().assert(this.activePage_,\n        'No active page set when navigating to next page.');\n    activePage.previous();\n  }\n\n\n  /**\n   * @param {!TapNavigationDirection} direction The direction to navigate.\n   * @private\n   */\n  performTapNavigation_(direction) {\n    if (this.isDesktop_()) {\n      this.next_();\n      return;\n    }\n\n    if (direction === TapNavigationDirection.NEXT) {\n      this.next_();\n    } else if (direction === TapNavigationDirection.PREVIOUS) {\n      this.previous_();\n    }\n  }\n\n\n  /**\n   * Switches to a particular page.\n   * @param {string} targetPageId\n   * @return {!Promise}\n   */\n  // TODO(newmuis): Update history state\n  switchTo_(targetPageId) {\n    const targetPage = this.getPageById(targetPageId);\n    const pageIndex = this.getPageIndex(targetPage);\n\n    this.updateBackground_(targetPage.element, /* initial */ !this.activePage_);\n\n    if (targetPage.isAd()) {\n      this.vsync_.mutate(() => {\n        this.element.setAttribute(AD_SHOWING_ATTR, '');\n      });\n    } else {\n      this.vsync_.mutate(() => {\n        this.element.removeAttribute(AD_SHOWING_ATTR);\n      });\n      // TODO(alanorozco): decouple this using NavigationState\n      this.systemLayer_.setActivePageId(targetPageId);\n    }\n\n    // TODO(alanorozco): check if autoplay\n    this.navigationState_.updateActivePage(\n        pageIndex,\n        this.getPageCount(),\n        targetPage.element.id);\n\n    const oldPage = this.activePage_;\n\n    // TODO(cvializ): Move this to the page class?\n    const activePriorSibling = targetPage.element.previousElementSibling;\n    const previousActivePriorSibling = this.element.querySelector(\n        `[${escapeCssSelectorIdent(PRE_ACTIVE_PAGE_ATTRIBUTE_NAME)}]`);\n\n    this.activePage_ = targetPage;\n\n    this.systemLayer_.resetDeveloperLogs();\n    this.systemLayer_.setDeveloperLogContextString(\n        this.activePage_.element.id);\n\n    return targetPage.beforeVisible().then(() => {\n      this.triggerActiveEventForPage_();\n\n      if (oldPage) {\n        oldPage.setActive(false);\n      }\n\n      targetPage.setActive(true);\n\n      if (activePriorSibling &&\n          matches(activePriorSibling, 'amp-story-page')) {\n        activePriorSibling.setAttribute(PRE_ACTIVE_PAGE_ATTRIBUTE_NAME, '');\n      }\n      if (previousActivePriorSibling) {\n        previousActivePriorSibling.removeAttribute(\n            PRE_ACTIVE_PAGE_ATTRIBUTE_NAME);\n      }\n\n      this.preloadPagesByDistance_();\n      this.reapplyMuting_();\n      this.forceRepaintForSafari_();\n      this.maybePreloadBookend_();\n    });\n  }\n\n\n  /** @private */\n  triggerActiveEventForPage_() {\n    // TODO(alanorozco): pass event priority once amphtml-story repo is merged\n    // with upstream.\n    Services.actionServiceForDoc(this.element)\n        .trigger(this.activePage_.element, 'active', /* event */ null,\n            ActionTrust.HIGH);\n  }\n\n\n  /**\n   * For some reason, Safari has an issue where sometimes when pages become\n   * visible, some descendants are not painted.  This is a hack where we detect\n   * that the browser is Safari and force it to repaint, to avoid this case.\n   * See newmuis/amphtml-story#106 for details.\n   * @private\n   */\n  forceRepaintForSafari_() {\n    const platform = Services.platformFor(this.win);\n    if (!platform.isSafari() && !platform.isIos()) {\n      return;\n    }\n    if (this.isDesktop_()) {\n      // Force repaint is only needed when transitioning from invisible to visible\n      return;\n    }\n\n    this.mutateElement(() => {\n      setStyle(this.element, 'display', 'none');\n\n      // Reading the height is what forces the repaint.  The conditional exists\n      // only to workaround the fact that the closure compiler would otherwise\n      // think that only reading the height has no effect.  Since the height is\n      // always >= 0, this conditional will always be executed.\n      const height = this.element./*OK*/offsetHeight;\n      if (height >= 0) {\n        setStyle(this.element, 'display', '');\n      }\n    });\n  }\n\n\n  /**\n   * Handles all key presses within the story.\n   * @param {!Event} e The keydown event.\n   * @private\n   */\n  onKeyDown_(e) {\n    if (this.bookend_.isActive()) {\n      return;\n    }\n\n    switch (e.keyCode) {\n      // TODO(newmuis): This will need to be flipped for RTL.\n      case KeyCodes.LEFT_ARROW:\n        this.previous_();\n        break;\n      case KeyCodes.RIGHT_ARROW:\n        this.next_();\n        break;\n    }\n  }\n\n\n  /**\n   * Handle resize events and set the story's desktop state.\n   * @visibleForTesting\n   */\n  onResize() {\n    if (this.isDesktop_()) {\n      this.element.setAttribute('desktop','');\n      this.element.classList.remove(LANDSCAPE_OVERLAY_CLASS);\n      if (!this.topBar_) {\n        this.buildTopBar_();\n      }\n      if (!this.background_) {\n        this.background_ = new AmpStoryBackground(this.win, this.element);\n        this.background_.attach();\n      }\n      if (this.activePage_) {\n        this.updateBackground_(this.activePage_.element, /* initial */ true);\n      }\n    } else {\n      this.vsync_.run({\n        measure: state => {\n          const {offsetWidth, offsetHeight} = this.element;\n          state.isLandscape = offsetWidth > offsetHeight;\n        },\n        mutate: state => {\n          this.element.classList.toggle(LANDSCAPE_OVERLAY_CLASS,\n              state.isLandscape);\n          this.element.removeAttribute('desktop');\n        },\n      }, {});\n    }\n  }\n\n  /**\n   * @return {boolean} True if the screen size matches the desktop media query.\n   */\n  isDesktop_() {\n    return !isExperimentOn(this.win, 'disable-amp-story-desktop') &&\n        this.desktopMedia_.matches;\n  }\n\n  /**\n   * Return right overlay for mobile or desktop\n   */\n  viewportWarningOverlay_() {\n    const platform = Services.platformFor(this.win);\n\n    return (platform.isIos() || platform.isAndroid())\n      ? LANDSCAPE_ORIENTATION_WARNING\n      : DESKTOP_SIZE_WARNING;\n  }\n\n  /**\n   * Build overlay for Landscape mode mobile\n   */\n  buildLandscapeOrientationOverlay_() {\n    this.mutateElement(() => {\n      this.element.insertBefore(\n          renderSimpleTemplate(this.win.document,\n              this.viewportWarningOverlay_()),\n          this.element.firstChild);\n    });\n  }\n\n  /**\n   * Build overlay for Landscape mode mobile\n   */\n  buildUnsupportedBrowserOverlay_() {\n    this.mutateElement(() => {\n      this.element.insertBefore(\n          renderSimpleTemplate(this.win.document, UNSUPPORTED_BROWSER_WARNING),\n          this.element.firstChild);\n    });\n  }\n\n\n  /**\n   * Get the URL of the given page's background resource.\n   * @param {!Element} pageElement\n   * @return {?string} The URL of the background resource\n   */\n  getBackgroundUrl_(pageElement) {\n    let fillElement = pageElement.querySelector(\n        '[template=\"fill\"]:not(.i-amphtml-hidden-by-media-query)');\n\n    if (!fillElement) {\n      return null;\n    }\n\n    fillElement = dev().assertElement(fillElement);\n\n    const fillPosterElement = fillElement.querySelector(\n        '[poster]:not(.i-amphtml-hidden-by-media-query)');\n\n    const srcElement = fillElement.querySelector(\n        '[src]:not(.i-amphtml-hidden-by-media-query)');\n\n    const fillPoster = fillPosterElement ?\n      fillPosterElement.getAttribute('poster') : '';\n    const src = srcElement ? srcElement.getAttribute('src') : '';\n\n    return fillPoster || src;\n  }\n\n\n  /**\n   * Update the background to the specified page's background.\n   * @param {!Element} pageElement\n   * @param {boolean=} initial\n   */\n  updateBackground_(pageElement, initial = false) {\n    if (!this.background_) {\n      return;\n    }\n\n    this.getVsync().run({\n      measure: state => {\n        state.url = this.getBackgroundUrl_(pageElement);\n        state.color = computedStyle(this.win, pageElement)\n            .getPropertyValue('background-color');\n      },\n      mutate: state => {\n        this.background_.setBackground(state.color, state.url, initial);\n      },\n    }, {});\n  }\n\n\n  /**\n   * Shows the bookend overlay.\n   * @private\n   */\n  showBookend_() {\n    if (this.bookend_.isActive()) {\n      return;\n    }\n\n    this.buildBookend_().then(() => {\n      this.systemLayer_.hideDeveloperLog();\n\n      this.activePage_.pauseCallback();\n\n      this.toggleElementsOnBookend_(/* display */ false);\n\n      this.element.classList.add('i-amphtml-story-bookend-active');\n\n      this.bookend_.show();\n    });\n  }\n\n\n  /**\n   * Hides the bookend overlay.\n   * @private\n   */\n  hideBookend_() {\n    if (!this.bookend_.isActive()) {\n      return;\n    }\n\n    this.activePage_.resumeCallback();\n\n    this.toggleElementsOnBookend_(/* display */ true);\n\n    this.element.classList.remove('i-amphtml-story-bookend-active');\n\n    this.bookend_.hide();\n  }\n\n  /**\n   * Toggle content when bookend is opened/closed.\n   * @param {boolean} display\n   * @private\n   */\n  toggleElementsOnBookend_(display) {\n    if (!this.isDesktop_()) {\n      return;\n    }\n\n    const elements = scopedQuerySelectorAll(this.element,\n        HIDE_ON_BOOKEND_SELECTOR);\n\n    Array.prototype.forEach.call(elements, el => {\n      if (display) {\n        resetStyles(el, ['opacity', 'transition']);\n      } else {\n        setImportantStyles(el, {\n          opacity: 0,\n          transition: 'opacity 0.3s',\n        });\n      }\n    });\n  }\n\n  /**\n   * @return {!Array<!Array<string>>} A 2D array representing lists of pages by\n   *     distance.  The outer array index represents the distance from the\n   *     active page; the inner array is a list of page IDs at the specified\n   *     distance.\n   */\n  getPagesByDistance_() {\n    const distanceMap = this.getPageDistanceMapHelper_(\n        /* distance */ 0, /* map */ {}, this.activePage_.element.id);\n\n    // Transpose the map into a 2D array.\n    const pagesByDistance = [];\n    Object.keys(distanceMap).forEach(pageId => {\n      const distance = distanceMap[pageId];\n      if (!pagesByDistance[distance]) {\n        pagesByDistance[distance] = [];\n      }\n      pagesByDistance[distance].push(pageId);\n    });\n\n    return pagesByDistance;\n  }\n\n  /**\n   * Creates a map of a page and all of the pages reachable from that page, by\n   * distance.\n   *\n   * @param {number} distance The distance that the page with the specified\n   *     pageId is from the active page.\n   * @param {!Object<string, number>} map A mapping from pageId to its distance\n   *     from the active page.\n   * @param {string} pageId The page to be added to the map.\n   * @return {!Object<string, number>} A mapping from page ID to the priority of\n   *     that page.\n   * @private\n   */\n  getPageDistanceMapHelper_(distance, map, pageId) {\n    if (map[pageId] !== undefined && map[pageId] <= distance) {\n      return map;\n    }\n\n    map[pageId] = distance;\n    const page = this.getPageById(pageId);\n    page.getAdjacentPageIds().forEach(adjacentPageId => {\n      if (map[adjacentPageId] !== undefined\n          && map[adjacentPageId] <= distance) {\n        return;\n      }\n\n      // TODO(newmuis): Remove the assignment and return, as they're unnecessary.\n      map = this.getPageDistanceMapHelper_(distance + 1, map, adjacentPageId);\n    });\n\n    return map;\n  }\n\n\n  /** @private */\n  preloadPagesByDistance_() {\n    const pagesByDistance = this.getPagesByDistance_();\n\n    this.mutateElement(() => {\n      pagesByDistance.forEach((pageIds, distance) => {\n        pageIds.forEach(pageId => {\n          const page = this.getPageById(pageId);\n          page.setDistance(distance);\n        });\n      });\n    });\n  }\n\n\n  /**\n   * Preloads the bookend config if on the last page.\n   * @private\n   */\n  maybePreloadBookend_() {\n    if (!this.activePage_) {\n      return;\n    }\n\n    const pageIndex = this.getPageIndex(this.activePage_);\n\n    if (pageIndex + 1 >= this.getPageCount()) {\n      this.buildBookend_();\n    }\n  }\n\n\n  /** @private */\n  buildBookend_() {\n    if (this.bookend_.isBuilt()) {\n      return Promise.resolve();\n    }\n\n    this.element.appendChild(this.bookend_.build(this.getAmpDoc()));\n    this.setAsOwner(this.bookend_.getRoot());\n\n    return this.loadBookendConfig_().then(bookendConfig => {\n      if (bookendConfig !== null) {\n        this.bookend_.setConfig(dev().assert(bookendConfig));\n      }\n      this.scheduleLayout(this.bookend_.getRoot());\n    });\n  }\n\n\n  /**\n   * @return {!Promise<?./bookend.BookendConfigDef>}\n   * @private\n   */\n  loadBookendConfigImpl_() {\n    return this.loadJsonFromAttribute_(BOOKEND_CONFIG_ATTRIBUTE_NAME)\n        .then(response => response && {\n          shareProviders: response['share-providers'],\n          relatedArticles:\n              relatedArticlesFromJson(response['related-articles']),\n        })\n        .catch(e => {\n          user().error(TAG, 'Error fetching bookend configuration', e.message);\n          return null;\n        });\n  }\n\n\n  /**\n   * @return {!Promise<boolean>}\n   * @private\n   */\n  hasBookend_() {\n    const bookendActive = this.stateService_.getState(StateType.BOOKEND_ACTIVE);\n    if (!bookendActive.isModifiable()) {\n      // Whether the bookend is active cannot be modified; its current value can\n      // be assumed.\n      return Promise.resolve(bookendActive.getValue());\n    }\n\n    // TODO(newmuis): Change this comment.\n    // On mobile there is always a bookend. On desktop, the bookend will only\n    // be shown if related articles have been configured.\n    if (!this.isDesktop_()) {\n      return Promise.resolve(true);\n    }\n    return this.loadBookendConfig_().then(config =>\n      config && config.relatedArticles && config.relatedArticles.length);\n  }\n\n\n  /**\n   * @param {string} attributeName\n   * @return {(!Promise<!JsonObject>|!Promise<null>)}\n   * @private\n   */\n  loadJsonFromAttribute_(attributeName) {\n    if (!this.element.hasAttribute(attributeName)) {\n      return Promise.resolve(null);\n    }\n\n    const rawUrl = this.element.getAttribute(attributeName);\n    const opts = {};\n    opts.requireAmpResponseSourceOrigin = false;\n\n    return Services.urlReplacementsForDoc(this.getAmpDoc())\n        .expandUrlAsync(user().assertString(rawUrl))\n        .then(url => Services.xhrFor(this.win).fetchJson(url, opts))\n        .then(response => {\n          user().assert(response.ok, 'Invalid HTTP response for bookend JSON');\n          return response.json();\n        });\n  }\n\n\n  /**\n   * @param {!Element} el\n   * @return {boolean}\n   * @private\n   */\n  isBookend_(el) {\n    return this.bookend_.isBuilt() && el === this.bookend_.getRoot();\n  }\n\n\n  /**\n   * @param {!Element} el\n   * @return {boolean}\n   * @private\n   */\n  isTopBar_(el) {\n    return !!this.topBar_ && this.topBar_.contains(el);\n  }\n\n\n  /**\n   * @param {string} id The ID of the page whose index should be retrieved.\n   * @return {number} The index of the page.\n   * @private\n   */\n  getPageIndexById_(id) {\n    const pageIndex = findIndex(this.pages_, page => page.element.id === id);\n\n    if (pageIndex < 0) {\n      user().error(TAG,\n          `Story refers to page \"${id}\", but no such page exists.`);\n    }\n\n    return pageIndex;\n  }\n\n\n  /**\n   * @param {string} id The ID of the page to be retrieved.\n   * @return {!./amp-story-page.AmpStoryPage} Retrieves the page with the\n   *     specified ID.\n   */\n  getPageById(id) {\n    const pageIndex = this.getPageIndexById_(id);\n    return dev().assert(this.pages_[pageIndex],\n        `Page at index ${pageIndex} exists, but is missing from the array.`);\n  }\n\n\n  /**\n   * @return {number}\n   */\n  getPageCount() {\n    return this.pages_.length - this.adPages_.length;\n  }\n\n  /**\n   * @param {!./amp-story-page.AmpStoryPage} desiredPage\n   * @return {number} The index of the page.\n   */\n  getPageIndex(desiredPage) {\n    return findIndex(this.pages_, page => page === desiredPage);\n  }\n\n\n  /**\n   * @param {!Element} element The element whose containing AmpStoryPage should\n   *     be retrieved\n   * @return {!./amp-story-page.AmpStoryPage} The AmpStoryPage containing the\n   *     specified element.\n   */\n  getPageContainingElement_(element) {\n    const pageIndex = findIndex(this.pages_, page => {\n      const pageEl = closest(element, el => {\n        return el === page.element;\n      });\n\n      return !!pageEl;\n    });\n\n    return dev().assert(this.pages_[pageIndex],\n        'Element not contained on any amp-story-page');\n  }\n\n\n  /** @override */\n  getElementDistance(element) {\n    const page = this.getPageContainingElement_(element);\n    return page.getDistance();\n  }\n\n\n  /** @override */\n  getMaxMediaElementCounts() {\n    const audioMediaElements =\n        this.element.querySelectorAll('amp-audio, [background-audio]');\n    const videoMediaElements = this.element.querySelectorAll('amp-video');\n\n    return {\n      [MediaType.AUDIO]: Math.min(\n          audioMediaElements.length, MAX_MEDIA_ELEMENT_COUNTS[MediaType.AUDIO]),\n      [MediaType.VIDEO]: Math.min(\n          videoMediaElements.length, MAX_MEDIA_ELEMENT_COUNTS[MediaType.VIDEO]),\n    };\n  }\n\n\n  /** @override */\n  getElement() {\n    return this.element;\n  }\n\n  /**\n   * Mutes the audio for the story.\n   * @private\n   */\n  mute_() {\n    this.pages_.forEach(page => {\n      page.muteAllMedia();\n    });\n    this.toggleMutedAttribute_(true);\n  }\n\n  /**\n   * Unmutes the audio for the story.\n   * @private\n   */\n  unmute_() {\n    const unmuteAllMedia = () => this.activePage_.unmuteAllMedia();\n    this.mediaPool_.blessAll()\n        .then(unmuteAllMedia, unmuteAllMedia);\n    this.toggleMutedAttribute_(false);\n  }\n\n\n  /**\n   * Reapplies the muting status for the currently-active media in the story.\n   */\n  reapplyMuting_() {\n    const isMuted = this.isMuted_();\n    if (!isMuted) {\n      this.mute_();\n      this.unmute_();\n    }\n  }\n\n\n  /**\n   * @return {boolean} Whether the story is currently muted.\n   * @private\n   */\n  isMuted_() {\n    return this.element.hasAttribute(AUDIO_MUTED_ATTRIBUTE);\n  }\n\n\n  /**\n   * Toggles mute or unmute attribute on element.\n   * @param {boolean} isMuted\n   * @private\n   */\n  toggleMutedAttribute_(isMuted) {\n    if (isMuted) {\n      this.element.setAttribute(AUDIO_MUTED_ATTRIBUTE, '');\n    } else {\n      this.element.removeAttribute(AUDIO_MUTED_ATTRIBUTE);\n    }\n  }\n\n  /**\n   * Shows the audio icon if the story has any media elements or background\n   * audio.\n   * @private\n   */\n  updateAudioIcon_() {\n    // TODO(#11857): Defer to any playing media element for whether any audio is\n    // being played.\n    const containsMediaElement = !!this.element.querySelector(\n        'amp-audio, amp-video, [background-audio]');\n    const hasStoryAudio = this.element.hasAttribute('background-audio');\n\n    if (containsMediaElement || hasStoryAudio) {\n      this.audioPlaying_();\n    }\n  }\n\n  /**\n   * Marks the story as having audio playing on the active page.\n   * @private\n   */\n  audioPlaying_() {\n    this.element.classList.add('audio-playing');\n  }\n\n  /**\n   * Marks the story as not having audio playing on the active page.\n   * @private\n   */\n  audioStopped_() {\n    this.element.classList.remove('audio-playing');\n  }\n\n  /** @private */\n  replay_() {\n    if (this.bookend_.isActive()) {\n      // Dispaching event instead of calling method directly so that all\n      // listeners can respond.\n      dispatch(this.element, EventType.CLOSE_BOOKEND);\n    }\n    this.switchTo_(dev().assertElement(this.pages_[0].element).id);\n  }\n\n  /** @return {!NavigationState} */\n  getNavigationState() {\n    return this.navigationState_;\n  }\n\n\n  /**\n   * Add page to back of pages_ array\n   * @param {!./amp-story-page.AmpStoryPage} page\n   */\n  addPage(page) {\n    this.pages_.push(page);\n\n    if (page.isAd()) {\n      this.adPages_.push(page);\n    }\n  }\n\n  /**\n   * Insert a new page in navigation flow by changing the attr pointers\n   * on amp-story-page elements\n   * @param {string} pageBeforeId\n   * @param {string} pageToBeInsertedId\n   * @return {boolean} was page inserted\n   */\n  insertPage(pageBeforeId, pageToBeInsertedId) {\n    // TODO(ccordry): make sure this method moves to PageManager when implemented\n    const pageToBeInserted = this.getPageById(pageToBeInsertedId);\n    const pageToBeInsertedEl = pageToBeInserted.element;\n\n    const allowAutomaticAdInsertion = this.stateService_\n        .getState(StateType.ALLOW_AUTOMATIC_AD_INSERTION);\n\n    if (pageToBeInserted.isAd() && !allowAutomaticAdInsertion.getValue()) {\n      dev().expectedError(TAG, 'Inserting ads automatically is disallowed.');\n      return false;\n    }\n\n    const pageBefore = this.getPageById(pageBeforeId);\n    const pageBeforeEl = pageBefore.element;\n\n    const nextPage = this.getNextPage(pageBefore);\n\n    if (!nextPage) {\n      return false;\n    }\n\n    pageBeforeEl.setAttribute(ADVANCE_TO_ATTR, pageToBeInsertedId);\n    pageBeforeEl.setAttribute(AUTO_ADVANCE_TO_ATTR, pageToBeInsertedId);\n    pageToBeInsertedEl.setAttribute(RETURN_TO_ATTR, pageBeforeId);\n\n    const nextPageEl = nextPage.element;\n    const nextPageId = nextPageEl.id;\n    pageToBeInsertedEl.setAttribute(ADVANCE_TO_ATTR, nextPageId);\n    pageToBeInsertedEl.setAttribute(AUTO_ADVANCE_TO_ATTR, nextPageId);\n    nextPageEl.setAttribute(RETURN_TO_ATTR, pageToBeInsertedId);\n\n    return true;\n  }\n\n\n  /**\n   * Get next page object\n   * @param {!./amp-story-page.AmpStoryPage} page\n   * @return {?./amp-story-page.AmpStoryPage}\n   */\n  getNextPage(page) {\n    const nextPageId = page.getNextPageId(true /*opt_isAutomaticAdvance */);\n    if (!nextPageId) {\n      return null;\n    }\n    return this.getPageById(nextPageId);\n  }\n\n\n  /**\n   * @param {!Window} win\n   * @return {boolean} true if the user's browser supports the features needed\n   *     for amp-story.\n   */\n  static isBrowserSupported(win) {\n    return win.CSS.supports('display', 'grid');\n  }\n}\n\n\nAMP.extension('amp-story', '0.1', AMP => {\n  AMP.registerElement('amp-story', AmpStory, CSS);\n});\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {StateChangeType} from './navigation-state';\nimport {dev} from '../../../src/log';\nimport {map} from '../../../src/utils/object';\nimport {triggerAnalyticsEvent} from '../../../src/analytics';\n\n\nconst Events = {\n  PAGE_VISIBLE: 'story-page-visible',\n};\n\n\n/**\n * Intermediate handler for amp-story specific analytics.\n */\nexport class AmpStoryAnalytics {\n  /**\n   * @param {!Element} element\n   */\n  constructor(element) {\n    this.element_ = element;\n\n    /** @private @const {!Object<number, boolean>} */\n    this.seenPagesIndices_ = map();\n  }\n\n  /**\n   * @param {!./navigation-state.StateChangeEventDef} stateChangeEvent\n   */\n  onStateChange(stateChangeEvent) {\n    switch (stateChangeEvent.type) {\n      case StateChangeType.ACTIVE_PAGE:\n        const {pageIndex, pageId} = stateChangeEvent.value;\n        this.onActivePageChange_(\n            dev().assertNumber(pageIndex),\n            dev().assertString(pageId));\n        break;\n    }\n  }\n\n  /**\n   * @param {number} pageIndex\n   * @param {string} pageId\n   */\n  onActivePageChange_(pageIndex, pageId) {\n    if (!this.seenPagesIndices_[pageIndex]) {\n      this.triggerEvent_(Events.PAGE_VISIBLE, {\n        'storyPageIndex': pageIndex.toString(),\n        'storyPageId': pageId,\n      });\n\n      this.seenPagesIndices_[pageIndex] = true;\n    }\n  }\n\n  /**\n   * @param {string} eventType\n   * @param {!Object<string, string>=} opt_vars A map of vars and their values.\n   * @private\n   */\n  triggerEvent_(eventType, opt_vars) {\n    triggerAnalyticsEvent(this.element_, eventType, opt_vars);\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {StoryAnimationPresetDef} from './animation-types';\nimport {px} from '../../../src/style';\n\n\n/** @const {!Object<string, !StoryAnimationPresetDef>} */\n// First keyframe will always be considered offset: 0 and will be applied to the\n// element as the first frame before animation starts.\nexport const PRESETS = {\n  'pulse': {\n    duration: 500,\n    easing: 'linear',\n    keyframes: [\n      {\n        offset: 0,\n        transform: 'scale(1)',\n      },\n      {\n        offset: 0.25,\n        transform: 'scale(0.95)',\n      },\n      {\n        offset: 0.75,\n        transform: 'scale(1.05)',\n      },\n      {\n        offset: 1,\n        transform: 'scale(1)',\n      },\n    ],\n  },\n  'fly-in-left': {\n    duration: 500,\n    easing: 'ease-out',\n    keyframes(dimensions) {\n      const offsetX = -(dimensions.targetX + dimensions.targetWidth);\n\n      return [\n        {transform: `translate(${px(offsetX)}, 0)`},\n        {transform: 'translate(0, 0)'},\n      ];\n    },\n  },\n  'fly-in-right': {\n    duration: 500,\n    easing: 'ease-out',\n    keyframes(dimensions) {\n      const offsetX = dimensions.pageWidth - dimensions.targetX;\n\n      return [\n        {transform: `translate(${px(offsetX)}, 0)`},\n        {transform: 'translate(0, 0)'},\n      ];\n    },\n  },\n  'fly-in-top': {\n    duration: 500,\n    easing: 'ease-out',\n    keyframes(dimensions) {\n      const offsetY = -(dimensions.targetY + dimensions.targetHeight);\n\n      return [\n        {transform: `translate(0, ${px(offsetY)})`},\n        {transform: 'translate(0, 0)'},\n      ];\n    },\n  },\n  'fly-in-bottom': {\n    duration: 500,\n    easing: 'ease-out',\n    keyframes(dimensions) {\n      const offsetY = dimensions.pageHeight - dimensions.targetY;\n\n      return [\n        {transform: `translate(0, ${px(offsetY)})`},\n        {transform: 'translate(0, 0)'},\n      ];\n    },\n  },\n  'rotate-in-left': {\n    duration: 700,\n    easing: 'ease-out',\n    keyframes(dimensions) {\n      const offsetX = -(dimensions.targetX + dimensions.targetWidth);\n\n      return [\n        {transform: `translate(${px(offsetX)}, 0) rotate(-360deg)`},\n        {transform: 'translate(0, 0) rotate(0)'},\n      ];\n    },\n  },\n  'rotate-in-right': {\n    duration: 700,\n    easing: 'ease-out',\n    keyframes(dimensions) {\n      const offsetX = dimensions.pageWidth - dimensions.targetX;\n\n      return [\n        {transform: `translate(${px(offsetX)}, 0) rotate(360deg)`},\n        {transform: 'translate(0, 0) rotate(0)'},\n      ];\n    },\n  },\n  'fade-in': {\n    duration: 500,\n    easing: 'ease-out',\n    keyframes: [\n      {\n        opacity: 0,\n      },\n      {\n        opacity: 1,\n      },\n    ],\n  },\n  'drop': {\n    duration: 1600,\n    keyframes(dimensions) {\n      const maxBounceHeight =\n          Math.max(160, dimensions.targetY + dimensions.targetHeight);\n\n      return [\n        {\n          offset: 0,\n          transform: `translateY(${px(-maxBounceHeight)})`,\n          easing: 'cubic-bezier(.75,.05,.86,.08)',\n        },\n        {\n          offset: 0.3,\n          transform: 'translateY(0)',\n          easing: 'cubic-bezier(.22,.61,.35,1)',\n        },\n        {\n          offset: 0.52,\n          transform: `translateY(${px(-0.6 * maxBounceHeight)})`,\n          easing: 'cubic-bezier(.75,.05,.86,.08)',\n        },\n        {\n          offset: 0.74,\n          transform: 'translateY(0)',\n          easing: 'cubic-bezier(.22,.61,.35,1)',\n        },\n        {\n          offset: 0.83,\n          transform: `translateY(${px(-0.3 * maxBounceHeight)})`,\n          easing: 'cubic-bezier(.75,.05,.86,.08)',\n        },\n        {\n          offset: 1,\n          transform: 'translateY(0)',\n          easing: 'cubic-bezier(.22,.61,.35,1)',\n        },\n      ];\n    },\n  },\n  'twirl-in': {\n    duration: 1000,\n    easing: 'cubic-bezier(.2,.75,.4,1)',\n    keyframes: [\n      {\n        transform: 'rotate(-540deg) scale(0.1)',\n        opacity: 0,\n      },\n      {\n        transform: 'none',\n        opacity: 1,\n      },\n    ],\n  },\n  'whoosh-in-left': {\n    duration: 500,\n    easing: 'ease-out',\n    keyframes(dimensions) {\n      const offsetX = -(dimensions.targetX + dimensions.targetWidth);\n\n      return [\n        {\n          opacity: 0,\n          transform: `translate(${px(offsetX)}, 0) scale(0.15)`,\n        },\n        {\n          opacity: 1,\n          transform: 'translate(0, 0) scale(1)',\n        },\n      ];\n    },\n  },\n  'whoosh-in-right': {\n    duration: 500,\n    easing: 'ease-out',\n    keyframes(dimensions) {\n      const offsetX = dimensions.pageWidth - dimensions.targetX;\n\n      return [\n        {\n          opacity: 0,\n          transform: `translate(${px(offsetX)}, 0) scale(0.15)`,\n        },\n        {\n          opacity: 1,\n          transform: 'translate(0, 0) scale(1)',\n        },\n      ];\n    },\n  },\n};\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** @typedef {!Array<!Object<string, *>>} */\nexport let KeyframesDef;\n\n\n/** @typedef {(function(StoryAnimationDimsDef):!KeyframesDef)|!KeyframesDef} */\nexport let KeyframesOrFilterFnDef;\n\n\n/**\n * @typedef {{\n *   pageWidth: number,\n *   pageHeight: number,\n *   targetWidth: number,\n *   targetHeight: number,\n *   targetX: number,\n *   targetY: number,\n * }}\n */\nexport let StoryAnimationDimsDef;\n\n\n/**\n * @typedef {{\n *   duration: number,\n *   easing: (string|undefined),\n *   keyframes: !KeyframesOrFilterFnDef,\n * }}\n */\nexport let StoryAnimationPresetDef;\n\n\n/**\n * @typedef {{\n *  target: !Element,\n *  startAfterId: (string|undefined),\n *  preset: !StoryAnimationPresetDef,\n *  duration: (number|undefined),\n *  delay: (number|undefined),\n * }}\n */\nexport let StoryAnimationDef;\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  KeyframesDef,\n  KeyframesOrFilterFnDef,\n  StoryAnimationDef,\n  StoryAnimationDimsDef,\n  StoryAnimationPresetDef,\n} from './animation-types';\nimport {PRESETS} from './animation-presets';\nimport {Services} from '../../../src/services';\nimport {\n  WebAnimationPlayState,\n} from '../../amp-animation/0.1/web-animation-types';\nimport {dev, user} from '../../../src/log';\nimport {escapeCssSelectorIdent, scopedQuerySelector, scopedQuerySelectorAll} from '../../../src/dom';\nimport {map, omit} from '../../../src/utils/object';\nimport {setStyles} from '../../../src/style';\nimport {timeStrToMillis, unscaledClientRect} from './utils';\n\n/** const {string} */\nconst ANIMATE_IN_ATTRIBUTE_NAME = 'animate-in';\n/** const {string} */\nconst ANIMATE_IN_DURATION_ATTRIBUTE_NAME = 'animate-in-duration';\n/** const {string} */\nconst ANIMATE_IN_DELAY_ATTRIBUTE_NAME = 'animate-in-delay';\n/** const {string} */\nconst ANIMATE_IN_AFTER_ATTRIBUTE_NAME = 'animate-in-after';\n/** const {string} */\nconst ANIMATABLE_ELEMENTS_SELECTOR = `[${ANIMATE_IN_ATTRIBUTE_NAME}]`;\n\n\n/**\n * @param {!Element} element\n * @return {boolean}\n */\n// TODO(alanorozco): maybe memoize?\nexport function hasAnimations(element) {\n  return !!scopedQuerySelector(element, ANIMATABLE_ELEMENTS_SELECTOR);\n}\n\n\n/** @enum {number} */\nconst PlaybackActivity = {\n  START: 0,\n  FINISH: 1,\n};\n\n\n/** Wraps WebAnimationRunner for story page elements. */\nclass AnimationRunner {\n  /**\n   * @param {!Element} page\n   * @param {!StoryAnimationDef} animationDef\n   * @param {!Promise<\n   *    !../../amp-animation/0.1/web-animations.Builder\n   * >} webAnimationBuilderPromise\n   * @param {!../../../src/service/vsync-impl.Vsync} vsync\n   * @param {!../../../src/service/timer-impl.Timer} timer\n   * @param {!AnimationSequence} sequence\n   */\n  constructor(\n    page, animationDef, webAnimationBuilderPromise, vsync, timer, sequence) {\n    /** @private @const */\n    this.page_ = page;\n\n    /** @private @const */\n    this.timer_ = timer;\n\n    /** @private @const */\n    this.vsync_ = vsync;\n\n    /** @private @const */\n    this.target_ = dev().assertElement(animationDef.target);\n\n    /** @private @const */\n    this.sequence_ = sequence;\n\n    /** @private @const */\n    this.animationDef_ = animationDef;\n\n    /** @private @const */\n    this.presetDef_ = animationDef.preset;\n\n    /** @private @const */\n    this.keyframes_ = this.filterKeyframes_(animationDef.preset.keyframes);\n\n    /** @private @const */\n    this.delay_ = animationDef.delay || this.presetDef_.delay || 0;\n\n    /** @private @const */\n    this.duration_ = animationDef.duration || this.presetDef_.duration || 0;\n\n    /**\n     * @private @const {!Promise<\n     *    !../../amp-animation/0.1/web-animations.WebAnimationRunner>}\n     */\n    this.runnerPromise_ = this.getWebAnimationDef_().then(webAnimDef =>\n      webAnimationBuilderPromise.then(builder =>\n        builder.createRunner(webAnimDef)));\n\n    /** @private @const {!Promise<!Object<string, *>>} */\n    this.firstFrameProps_ =\n        this.keyframes_.then(keyframes => omit(keyframes[0], ['offset']));\n\n    /** @private {?../../amp-animation/0.1/web-animations.WebAnimationRunner} */\n    this.runner_ = null;\n\n    /** @private {?PlaybackActivity} */\n    this.scheduledActivity_ = null;\n\n    /** @private {?Promise} */\n    this.scheduledWait_ = null;\n\n    this.keyframes_.then(keyframes => dev().assert(\n        !keyframes[0].offset,\n        'First keyframe offset for animation preset should be 0 or undefined'));\n\n    user().assert(\n        this.delay_ >= 0,\n        'Negative delays are not allowed in amp-story entrance animations.');\n\n    this.runnerPromise_.then(runner => this.onRunnerReady_(runner));\n  }\n\n  /**\n   * @return {!Promise<!StoryAnimationDimsDef>}\n   * @visibleForTesting\n   */\n  getDims() {\n    return this.vsync_.measurePromise(() => {\n      const targetRect = unscaledClientRect(this.target_);\n      const pageRect = unscaledClientRect(this.page_);\n\n      return /** @type {!StoryAnimationDimsDef} */ ({\n        pageWidth: pageRect.width,\n        pageHeight: pageRect.height,\n        targetWidth: targetRect.width,\n        targetHeight: targetRect.height,\n        targetX: targetRect.left - pageRect.left,\n        targetY: targetRect.top - pageRect.top,\n      });\n    });\n  }\n\n  /**\n   * @param {!KeyframesOrFilterFnDef} keyframesArrayOrFn\n   * @return {!Promise<!KeyframesDef>}\n   * @private\n   */\n  filterKeyframes_(keyframesArrayOrFn) {\n    if (Array.isArray(keyframesArrayOrFn)) {\n      return Promise.resolve(keyframesArrayOrFn);\n    }\n    return this.getDims().then(keyframesArrayOrFn);\n  }\n\n  /**\n   * @return {!Promise<\n   *   !../../amp-animation/0.1/web-animation-types.WebKeyframeAnimationDef>}\n   * @private\n   */\n  getWebAnimationDef_() {\n    return this.keyframes_.then(keyframes => ({\n      keyframes,\n      target: this.target_,\n      duration: `${this.duration_}ms`,\n      easing: this.presetDef_.easing,\n      fill: 'forwards',\n    }));\n  }\n\n  /** @return {!Promise<void>} */\n  applyFirstFrame() {\n    if (this.hasStarted()) {\n      return Promise.resolve();\n    }\n\n    if (this.runner_) {\n      this.runner_.cancel();\n    }\n\n    return this.firstFrameProps_.then(firstFrameProps =>\n      this.vsync_.mutatePromise(() => {\n        setStyles(this.target_, firstFrameProps);\n      }));\n  }\n\n  /** Starts or resumes the animation. */\n  start() {\n    if (this.hasStarted()) {\n      return;\n    }\n\n    this.playback_(PlaybackActivity.START, this.getStartWaitPromise_());\n  }\n\n  /**\n   * @return {!Promise}\n   * @private\n   */\n  getStartWaitPromise_() {\n    let promise = Promise.resolve();\n\n    if (this.animationDef_.startAfterId) {\n      const startAfterId = this.animationDef_.startAfterId;\n      promise = promise.then(() => this.sequence_.waitFor(startAfterId));\n    }\n\n    if (this.delay_) {\n      promise = promise.then(() => this.timer_.promise(this.delay_));\n    }\n\n    return promise;\n  }\n\n  /**\n   * @param {!../../amp-animation/0.1/web-animations.WebAnimationRunner} runner\n   * @private\n   */\n  startWhenReady_(runner) {\n    runner.start();\n  }\n\n  /** @return {boolean} */\n  hasStarted() {\n    return this.isActivityScheduled_(PlaybackActivity.START) ||\n        !!this.runner_ && dev().assert(this.runner_)\n            .getPlayState() == WebAnimationPlayState.RUNNING;\n  }\n\n  /** Force-finishes all animations. */\n  finish() {\n    if (!this.runner_) {\n      this.notifyFinish_();\n    }\n    this.playback_(PlaybackActivity.FINISH);\n  }\n\n  /**\n   * @param {!../../amp-animation/0.1/web-animations.WebAnimationRunner} runner\n   * @private\n   */\n  finishWhenReady_(runner) {\n    if (runner.getPlayState() == WebAnimationPlayState.RUNNING) {\n      runner.finish();\n    }\n  }\n\n  /** Cancels animation. */\n  cancel() {\n    this.scheduledActivity_ = null;\n    this.scheduledWait_ = null;\n\n    if (this.runner_) {\n      dev().assert(this.runner_).cancel();\n    }\n  }\n\n  /**\n   * @param {!PlaybackActivity} activity\n   * @param {!Promise=} opt_wait\n   * @private\n   */\n  playback_(activity, opt_wait) {\n    const wait = opt_wait || null;\n\n    this.scheduledActivity_ = activity;\n    this.scheduledWait_ = wait;\n\n    if (this.runner_) {\n      this.playbackWhenReady_(activity, wait);\n    }\n  }\n\n  /**\n   * Executes playback activity if runner is ready.\n   * @param {!PlaybackActivity} activity\n   * @param {?Promise} wait\n   * @private\n   */\n  playbackWhenReady_(activity, wait) {\n    const runner =\n        /**\n         * @type {!../../amp-animation/0.1/web-animations.WebAnimationRunner}\n         */\n        (dev().assert(\n            this.runner_,\n            'Tried to execute playbackWhenReady_ before runner was resolved.'));\n\n    (wait || Promise.resolve()).then(() => {\n      if (!this.isActivityScheduled_(activity)) {\n        return;\n      }\n\n      this.scheduledActivity_ = null;\n      this.scheduledWait_ = null;\n\n      switch (activity) {\n        case PlaybackActivity.START: return this.startWhenReady_(runner);\n        case PlaybackActivity.FINISH: return this.finishWhenReady_(runner);\n      }\n    });\n  }\n\n  /**\n   * Marks runner as ready and executes playback activity if needed.\n   * @param {!../../amp-animation/0.1/web-animations.WebAnimationRunner} runner\n   * @private\n   */\n  onRunnerReady_(runner) {\n    this.runner_ = runner;\n\n    runner.onPlayStateChanged(state => {\n      if (state == WebAnimationPlayState.FINISHED) {\n        this.notifyFinish_();\n      }\n    });\n\n    if (!this.isActivityScheduled_()) {\n      return;\n    }\n\n    this.playbackWhenReady_(\n        /** @type {!PlaybackActivity} */ (this.scheduledActivity_),\n        this.scheduledWait_);\n  }\n\n  /**\n   * @param {!PlaybackActivity=} opt_activity\n   * @return {boolean}\n   * @private\n   */\n  isActivityScheduled_(opt_activity) {\n    if (!opt_activity) {\n      return this.scheduledActivity_ !== null;\n    }\n    return this.scheduledActivity_ === opt_activity;\n  }\n\n  /** @private */\n  notifyFinish_() {\n    if (this.target_.id) {\n      this.sequence_.notifyFinish(this.target_.id);\n    }\n  }\n}\n\n\n// TODO(alanorozco): Looping animations\n/** Manager for animations in story pages. */\nexport class AnimationManager {\n  /**\n   * @param {!Element} root\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   */\n  constructor(root, ampdoc) {\n    dev().assert(hasAnimations(root));\n\n    /** @private @const */\n    this.root_ = root;\n\n    /** @private @const */\n    this.ampdoc_ = ampdoc;\n\n    /** @private @const */\n    this.vsync_ = Services.vsyncFor(this.ampdoc_.win);\n\n    /** @private @const */\n    this.resources_ = Services.resourcesForDoc(this.ampdoc_);\n\n    /** @private @const */\n    this.timer_ = Services.timerFor(this.ampdoc_.win);\n\n    /** @private @const */\n    this.builderPromise_ = this.createAnimationBuilderPromise_();\n\n    /** @private {?Array<!Promise<!AnimationRunner>>} */\n    this.runners_ = null;\n\n    /** @private */\n    this.sequence_ = AnimationSequence.create();\n  }\n\n  /**\n   * Decouples constructor so it can be stubbed in tests.\n   * @param {!Element} root\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @param {string} unusedBaseUrl\n   * @return {!AnimationManager}\n   */\n  static create(root, ampdoc, unusedBaseUrl) {\n    return new AnimationManager(root, ampdoc);\n  }\n\n  /**\n   * Applies first frame to target element before starting animation.\n   * @return {!Promise}\n   */\n  applyFirstFrame() {\n    return Promise.all(\n        this.getOrCreateRunners_().map(runner => runner.applyFirstFrame()));\n  }\n\n  /** Starts all entrance animations for the page. */\n  animateIn() {\n    this.getRunners_().forEach(runner => runner.start());\n  }\n\n  /** Skips all entrance animations for the page. */\n  finishAll() {\n    this.getRunners_().forEach(runner => runner.finish());\n  }\n\n  /** Cancels all entrance animations for the page. */\n  cancelAll() {\n    if (!this.runners_) {\n      // nothing to cancel when the first frame has not been applied yet.\n      return;\n    }\n    this.getRunners_().forEach(runner => runner.cancel());\n  }\n\n  /** Determines if there is an entrance animation running. */\n  hasAnimationStarted() {\n    return this.getRunners_().some(runner => runner.hasStarted());\n  }\n\n  /** @private */\n  getRunners_() {\n    return dev().assert(this.runners_, 'Executed before applyFirstFrame');\n  }\n\n  /**\n   * @return {!Array<!AnimationRunner>}\n   * @private\n   */\n  getOrCreateRunners_() {\n    if (!this.runners_) {\n      this.runners_ = Array.prototype.map.call(\n          scopedQuerySelectorAll(this.root_, ANIMATABLE_ELEMENTS_SELECTOR),\n          el => this.createRunner_(el));\n    }\n    return dev().assert(this.runners_);\n  }\n\n  /**\n   * @param {!Element} el\n   * @return {!AnimationRunner}\n   */\n  createRunner_(el) {\n    const preset = this.getPreset_(el);\n    const animationDef = this.createAnimationDef(el, preset);\n\n    return new AnimationRunner(\n        this.root_,\n        animationDef,\n        dev().assert(this.builderPromise_),\n        this.vsync_,\n        this.timer_,\n        this.sequence_);\n  }\n\n  /**\n   * @param {!Element} el\n   * @param {!StoryAnimationPresetDef} preset\n   * @return {!StoryAnimationDef}\n   */\n  createAnimationDef(el, preset) {\n    const animationDef = {target: el, preset};\n\n    if (el.hasAttribute(ANIMATE_IN_DURATION_ATTRIBUTE_NAME)) {\n      animationDef.duration =\n          timeStrToMillis(el.getAttribute(ANIMATE_IN_DURATION_ATTRIBUTE_NAME));\n    }\n\n    if (el.hasAttribute(ANIMATE_IN_DELAY_ATTRIBUTE_NAME)) {\n      animationDef.delay =\n          timeStrToMillis(el.getAttribute(ANIMATE_IN_DELAY_ATTRIBUTE_NAME));\n    }\n\n    if (el.hasAttribute(ANIMATE_IN_AFTER_ATTRIBUTE_NAME)) {\n      const dependencyId = el.getAttribute(ANIMATE_IN_AFTER_ATTRIBUTE_NAME);\n\n      user().assertElement(\n          this.root_.querySelector(`#${escapeCssSelectorIdent(dependencyId)}`),\n          `The attribute '${ANIMATE_IN_AFTER_ATTRIBUTE_NAME}' in tag ` +\n              `'${el.tagName}' is set to the invalid value ` +\n              `'${dependencyId}'. No children of parenting 'amp-story-page' ` +\n              `exist with id ${dependencyId}.`);\n\n      animationDef.startAfterId =\n          el.getAttribute(ANIMATE_IN_AFTER_ATTRIBUTE_NAME);\n    }\n\n    return animationDef;\n  }\n\n  /**\n   * @return {!Promise<!../../amp-animation/0.1/web-animations.Builder>}\n   * @private\n   */\n  createAnimationBuilderPromise_() {\n    return Services.extensionsFor(this.ampdoc_.win)\n        .installExtensionForDoc(this.ampdoc_, 'amp-animation')\n        .then(() => Services.webAnimationServiceFor(this.ampdoc_))\n        .then(webAnimationService => webAnimationService.createBuilder());\n  }\n\n  /**\n   * @param {!Element} el\n   * @return {!StoryAnimationPresetDef}\n   */\n  getPreset_(el) {\n    const name = el.getAttribute(ANIMATE_IN_ATTRIBUTE_NAME);\n\n    return user().assert(\n        PRESETS[name],\n        'Invalid %s preset \"%s\" for element %s',\n        ANIMATE_IN_ATTRIBUTE_NAME,\n        name,\n        el);\n  }\n}\n\n\n/** Bus for animation sequencing. */\nclass AnimationSequence {\n  constructor() {\n    /** @private @const {!Object<string, !Promise>} */\n    this.subscriptionPromises_ = map();\n\n    /** @private @const {!Object<string, !Function>} */\n    this.subscriptionResolvers_ = map();\n  }\n\n  /** Decouples constructor for testing. */\n  static create() {\n    return new AnimationSequence();\n  }\n\n  /**\n   * Notifies dependent elements that animation has finished.\n   * @param {string} id\n   */\n  notifyFinish(id) {\n    if (id in this.subscriptionPromises_) {\n      dev().assert(this.subscriptionResolvers_[id])();\n\n      delete this.subscriptionPromises_[id];\n    }\n  }\n\n  /**\n   * Waits for another element to finish animating.\n   * @param {string} id\n   * @return {!Promise<void>}\n   */\n  waitFor(id) {\n    if (!(id in this.subscriptionPromises_)) {\n      this.subscriptionPromises_[id] = new Promise(resolve => {\n        this.subscriptionResolvers_[id] = resolve;\n      });\n    }\n    return this.subscriptionPromises_[id];\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {assertHttpsUrl} from '../../../src/url';\n\n/**\n * @const {string}\n */\nconst BACKGROUND_AUDIO_ELEMENT_CLASS_NAME = 'i-amphtml-story-background-audio';\n\n\n/**\n * Adds support for the background-audio property on the specified element.\n * @param {!Element} element The element to upgrade with support for background\n *     audio.\n */\nexport function upgradeBackgroundAudio(element) {\n  if (element.hasAttribute('background-audio')) {\n    const audioEl = element.ownerDocument.createElement('audio');\n    const audioSrc =\n        assertHttpsUrl(element.getAttribute('background-audio'), element);\n    audioEl.setAttribute('src', audioSrc);\n    audioEl.setAttribute('preload', 'auto');\n    audioEl.setAttribute('loop', '');\n    audioEl.setAttribute('autoplay', '');\n    audioEl.setAttribute('muted', '');\n    audioEl.classList.add(BACKGROUND_AUDIO_ELEMENT_CLASS_NAME);\n    element.appendChild(audioEl);\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from '../../../src/services';\nimport {listenOncePromise} from '../../../src/event-helper';\nimport {setStyle} from '../../../src/style';\n\n\n/** @const {number} */\nconst SWAP_TIMEOUT_MS = 500;\n\n\nconst BACKGROUND_CLASS = 'i-amphtml-story-background';\n\nconst BACKGROUND_CONTAINER_CLASS = 'i-amphtml-story-background-container';\n\nconst BACKGROUND_OVERLAY_CLASS = 'i-amphtml-story-background-overlay';\n\n\n\n/**\n * @param {?string} url\n * @return {!Promise}\n */\nfunction maybeLoadImage(url) {\n  if (!url) {\n    return Promise.resolve();\n  }\n  const img = new Image;\n  img.src = url;\n  return listenOncePromise(img, 'load');\n}\n\n\n/**\n * TODO(cvializ): Investigate pre-rendering blurred backgrounds to canvas to\n * possibly improve performance?\n */\nexport class AmpStoryBackground {\n  /**\n   * @param {!Window} win\n   * @param {!Element} element\n   */\n  constructor(win, element) {\n    /* @private @const {!Element} */\n    this.element_ = element;\n\n    /* @private @const {!Window} */\n    this.win_ = win;\n\n    /* @private {number} */\n    this.count_ = 0;\n\n    /** @private @const */\n    this.container_ = this.element_.ownerDocument.createElement('div');\n\n    /** @private @const */\n    this.containerOverlay_ = this.element_.ownerDocument.createElement('div');\n\n    /** @private {!Element} */\n    this.hidden_ = this.createBackground_();\n\n    /** @private {!Element} */\n    this.active_ = this.createBackground_();\n\n    this.container_.classList.add(BACKGROUND_CONTAINER_CLASS);\n    this.containerOverlay_.classList.add(BACKGROUND_OVERLAY_CLASS);\n\n    this.container_.appendChild(this.hidden_);\n    this.container_.appendChild(this.active_);\n    this.container_.appendChild(this.containerOverlay_);\n  }\n\n  /**\n   * @return {!Element}\n   */\n  createBackground_() {\n    const bg = this.element_.ownerDocument.createElement('div');\n    bg.classList.add(BACKGROUND_CLASS);\n    return bg;\n  }\n\n  /**\n   * Attach the backgrounds to the document.\n   */\n  attach() {\n    this.element_.insertBefore(this.container_, this.element_.firstChild);\n  }\n\n  /**\n   * Update the background with new background image URL.\n   * @param {string} color\n   * @param {?string} url\n   * @param {boolean=} initial\n   */\n  setBackground(color, url, initial = false) {\n    const countAtAdd = ++this.count_;\n\n    const whenFresh = (promise, callback) => promise.then(() => {\n      if (this.count_ == countAtAdd) {\n        callback();\n      }\n    });\n\n    const imgLoad = maybeLoadImage(url);\n    const timeout =\n        Services.timerFor(this.win_).promise(initial ? 0 : SWAP_TIMEOUT_MS);\n\n    const hidden = this.hidden_;\n\n    setStyle(hidden, 'background-image', 'none');\n\n    // Image will be swapped on load.\n    whenFresh(imgLoad, () => {\n      setStyle(hidden, 'background-image', url ? `url(${url})` : null);\n    });\n\n    // Color will always be swapped on timeout.\n    whenFresh(Promise.race([imgLoad, timeout]), () => {\n      setStyle(hidden, 'background-color', color);\n      this.rotateActiveBackground_();\n    });\n  }\n\n  /**\n   * Rotates the classes on page background to bring the new bacground in foreground.\n   * @private\n   */\n  rotateActiveBackground_() {\n    const newHidden = this.active_;\n    this.active_ = this.hidden_;\n    this.hidden_ = newHidden;\n    this.active_.classList.add('active');\n    this.hidden_.classList.remove('active');\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {EventType, dispatch} from './events';\nimport {KeyCodes} from '../../../src/utils/key-codes';\nimport {ScrollableShareWidget} from './share';\nimport {Services} from '../../../src/services';\nimport {closest} from '../../../src/dom';\nimport {dev, user} from '../../../src/log';\nimport {dict} from './../../../src/utils/object';\nimport {getJsonLd} from './jsonld';\nimport {isArray} from '../../../src/types';\nimport {isProtocolValid} from '../../../src/url';\nimport {parseUrl} from '../../../src/url';\nimport {renderAsElement, renderSimpleTemplate} from './simple-template';\nimport {throttle} from '../../../src/utils/rate-limit';\n\n\n/**\n * @typedef {{\n *   shareProviders: (!JsonObject|undefined),\n *   relatedArticles: !Array<!./related-articles.RelatedArticleSetDef>\n * }}\n */\nexport let BookendConfigDef;\n\n\n/**\n * Scroll amount required for full-bleed in px.\n * @private @const {number}\n */\nconst FULLBLEED_THRESHOLD = 88;\n\n\n/** @private @const {string} */\nconst FULLBLEED_CLASSNAME = 'i-amphtml-story-bookend-fullbleed';\n\n\n/** @private @const {string} */\nconst HIDDEN_CLASSNAME = 'i-amphtml-hidden';\n\n\n/** @private @const {!./simple-template.ElementDef} */\nconst ROOT_TEMPLATE = {\n  tag: 'section',\n  attrs: dict({\n    'class': 'i-amphtml-story-bookend i-amphtml-story-system-reset ' +\n        HIDDEN_CLASSNAME}),\n  children: [\n    // Overflow container that gets pushed to the bottom when content height is\n    // smaller than viewport.\n    {\n      tag: 'div',\n      attrs: dict({'class': 'i-amphtml-story-bookend-overflow'}),\n      children: [\n        // Holds bookend content.\n        {\n          tag: 'div',\n          attrs: dict({'class': 'i-amphtml-story-bookend-inner'}),\n        },\n      ],\n    },\n  ],\n};\n\n\n/** @private @const {!./simple-template.ElementDef} */\nconst REPLAY_ICON_TEMPLATE = {\n  tag: 'div',\n  attrs: dict({'class': 'i-amphtml-story-bookend-replay-icon'}),\n};\n\n\n/**\n * @param {!./related-articles.RelatedArticleDef} articleData\n * @return {!./simple-template.ElementDef}\n */\nfunction buildArticleTemplate(articleData) {\n  const template = /** @type {!./simple-template.ElementDef} */ ({\n    tag: 'a',\n    attrs: dict({\n      'class': 'i-amphtml-story-bookend-article',\n      'href': articleData.url,\n      'target': '_top',\n    }),\n    children: [\n      {\n        tag: 'h2',\n        attrs: dict({'class': 'i-amphtml-story-bookend-article-heading'}),\n        text: articleData.title,\n      },\n      {\n        tag: 'div',\n        attrs: dict({'class': 'i-amphtml-story-bookend-article-meta'}),\n        text: articleData.domainName,\n      },\n    ],\n  });\n\n  if (articleData.image) {\n    template.children.unshift(/** @type {!./simple-template.ElementDef} */ ({\n      tag: 'amp-img',\n      attrs: dict({\n        'class': 'i-amphtml-story-bookend-article-image',\n        'src': articleData.image,\n        'width': 100,\n        'height': 100,\n      }),\n    }));\n  }\n\n  return template;\n}\n\n\n/**\n * @param {!Array<!./related-articles.RelatedArticleSetDef>} articleSets\n * @return {!Array<!./simple-template.ElementDef>}\n */\nfunction buildArticlesContainerTemplate(articleSets) {\n  const template = [];\n\n  articleSets.forEach(articleSet => {\n    if (articleSet.heading) {\n      template.push({\n        tag: 'h3',\n        attrs: dict({'class': 'i-amphtml-story-bookend-heading'}),\n        text: articleSet.heading,\n      });\n    }\n    template.push({\n      tag: 'div',\n      attrs: dict({'class': 'i-amphtml-story-bookend-article-set'}),\n      children: articleSet.articles.map(article =>\n        buildArticleTemplate(article)),\n    });\n  });\n\n  return template;\n}\n\n\n/**\n * @param {!Document} doc\n * @param {string} title\n * @param {string} domainName\n * @param {string=} opt_imageUrl\n * @return {!./simple-template.ElementDef}\n */\nfunction buildReplayButtonTemplate(doc, title, domainName, opt_imageUrl) {\n  return /** @type {!./simple-template.ElementDef} */ ({\n    tag: 'div',\n    attrs: dict({'class': 'i-amphtml-story-bookend-replay'}),\n    children: [\n      !opt_imageUrl ? REPLAY_ICON_TEMPLATE : {\n        tag: 'div',\n        attrs: dict({\n          'class': 'i-amphtml-story-bookend-replay-image',\n          'style': `background-image: url(${opt_imageUrl}) !important`,\n        }),\n        children: [REPLAY_ICON_TEMPLATE],\n      },\n      {\n        tag: 'h2',\n        attrs: dict({'class': 'i-amphtml-story-bookend-article-heading'}),\n        text: title,\n      },\n      {\n        tag: 'div',\n        attrs: dict({'class': 'i-amphtml-story-bookend-article-meta'}),\n        text: domainName,\n      },\n    ],\n  });\n}\n\n\n/**\n * Bookend component for <amp-story>.\n */\nexport class Bookend {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private {boolean} */\n    this.isBuilt_ = false;\n\n    /** @private {?Element} */\n    this.root_ = null;\n\n    /** @private {?Element} */\n    this.replayBtn_ = null;\n\n    /** @private {?Element} */\n    this.closeBtn_ = null;\n\n    /** @private {!ScrollableShareWidget} */\n    this.shareWidget_ = ScrollableShareWidget.create(win);\n  }\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @return {!Element}\n   */\n  build(ampdoc) {\n    if (this.isBuilt_) {\n      return this.getRoot();\n    }\n\n    this.isBuilt_ = true;\n\n    this.root_ = renderAsElement(this.win_.document, ROOT_TEMPLATE);\n\n    this.replayBtn_ = this.buildReplayButton_(ampdoc);\n\n    this.getInnerContainer_().appendChild(this.replayBtn_);\n    this.getInnerContainer_().appendChild(this.shareWidget_.build(ampdoc));\n\n    this.attachEvents_();\n\n    return this.getRoot();\n  }\n\n  /** @private */\n  attachEvents_() {\n    // TODO(alanorozco): Listen to tap event properly (i.e. fastclick)\n    this.root_.addEventListener('click', e => this.maybeClose_(e));\n    this.replayBtn_.addEventListener('click', e => this.onReplayBtnClick_(e));\n\n    this.getOverflowContainer_().addEventListener('scroll',\n        // minInterval is high since this is a step function that does not\n        // require smoothness\n        throttle(this.win_, () => this.onScroll_(), 100));\n\n    this.win_.addEventListener('keyup', e => {\n      if (!this.isActive()) {\n        return;\n      }\n      if (e.keyCode == KeyCodes.ESCAPE) {\n        e.preventDefault();\n        this.dispatchClose_();\n      }\n    });\n  }\n\n  /** @return {boolean} */\n  isActive() {\n    return this.isBuilt() &&\n        !this.getRoot().classList.contains(HIDDEN_CLASSNAME);\n  }\n\n  /**\n   * @param {!Event} e\n   * @private\n   */\n  onReplayBtnClick_(e) {\n    e.stopPropagation();\n    dispatch(this.getRoot(), EventType.REPLAY, /* opt_bubbles */ true);\n  }\n\n  /**\n   * Closes bookend if tapping outside usable area.\n   * @param {!Event} e\n   * @private\n   */\n  maybeClose_(e) {\n    if (this.elementOutsideUsableArea_(dev().assertElement(e.target))) {\n      e.stopPropagation();\n      this.dispatchClose_();\n    }\n  }\n\n  /** @private */\n  dispatchClose_() {\n    dispatch(this.getRoot(), EventType.CLOSE_BOOKEND, /* opt_bubbles */ true);\n  }\n\n  /**\n   * @param {!Element} el\n   * @return {boolean}\n   */\n  elementOutsideUsableArea_(el) {\n    return !closest(el, el => el == this.getInnerContainer_());\n  }\n\n  /**\n   * Changes between card view and full-bleed based on scroll position.\n   * @private\n   */\n  onScroll_() {\n    if (!this.isActive()) {\n      return;\n    }\n    Services.vsyncFor(this.win_).run({\n      measure: state => {\n        state.shouldBeFullBleed =\n            this.getOverflowContainer_()./*OK*/scrollTop >= FULLBLEED_THRESHOLD;\n      },\n      mutate: state => {\n        this.getRoot().classList.toggle(\n            FULLBLEED_CLASSNAME, state.shouldBeFullBleed);\n      },\n    }, {});\n  }\n\n  /** Hides bookend with a transition. */\n  hide() {\n    this.toggle_(false);\n  }\n\n  /** Shows bookend with a transition. */\n  show() {\n    this.toggle_(true);\n  }\n\n  /**\n   * @param {boolean} show\n   * @private\n   */\n  toggle_(show) {\n    Services.vsyncFor(this.win_).mutate(() => {\n      this.getRoot().classList.toggle(HIDDEN_CLASSNAME, !show);\n    });\n  }\n\n  /**\n   * @retun {boolean}\n   */\n  isBuilt() {\n    return this.isBuilt_;\n  }\n\n  /** @private */\n  assertBuilt_() {\n    dev().assert(this.isBuilt(), 'Bookend component needs to be built.');\n  }\n\n  /**\n   * @param {!BookendConfigDef} bookendConfig\n   */\n  setConfig(bookendConfig) {\n    this.assertBuilt_();\n\n    if (bookendConfig.shareProviders) {\n      this.shareWidget_.setProviders(\n          dev().assert(bookendConfig.shareProviders));\n    }\n\n    this.setRelatedArticles_(bookendConfig.relatedArticles);\n  }\n\n  /**\n   * @param {!Array<!./related-articles.RelatedArticleSetDef>} articleSets\n   * @private\n   */\n  setRelatedArticles_(articleSets) {\n    this.getInnerContainer_().appendChild(\n        renderSimpleTemplate(this.win_.document,\n            buildArticlesContainerTemplate(articleSets)));\n  }\n\n  /** @return {!Element} */\n  getRoot() {\n    this.assertBuilt_();\n    return dev().assertElement(this.root_);\n  }\n\n  /**\n   * Gets container for bookend content.\n   * @return {!Element}\n   * @private\n   */\n  getInnerContainer_() {\n    return dev().assertElement(this.getOverflowContainer_().firstElementChild);\n  }\n\n  /**\n   * Gets outer container that gets scrolled.\n   * @return {!Element}\n   * @private\n   */\n  getOverflowContainer_() {\n    return dev().assertElement(this.getRoot().firstElementChild);\n  }\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @return {{\n   *   title: string,\n   *   domainName: string,\n   *   imageUrl: (string|undefined),\n   * }}\n   * @private\n   */\n  getStoryMetadata_(ampdoc) {\n    const jsonLd = getJsonLd(ampdoc.getRootNode());\n\n    const metadata = {\n      title: jsonLd && jsonLd['headline'] ?\n        jsonLd['headline'] :\n        user().assertElement(\n            this.win_.document.head.querySelector('title'),\n            'Please set <title> or structured data (JSON-LD).').textContent,\n\n      domainName:\n          parseUrl(Services.documentInfoForDoc(ampdoc).canonicalUrl).hostname,\n    };\n\n    if (jsonLd && isArray(jsonLd['image']) && jsonLd['image'].length) {\n      user().assert(isProtocolValid(jsonLd['image']),\n          `Unsupported protocol for story image URL ${jsonLd['image']}`);\n      metadata.imageUrl = jsonLd['image'][0];\n    }\n\n    return metadata;\n  }\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @return {!Element}\n   * @private\n   */\n  buildReplayButton_(ampdoc) {\n    const metadata = this.getStoryMetadata_(ampdoc);\n    return renderAsElement(this.win_.document, buildReplayButtonTemplate(\n        this.win_.document,\n        metadata.title,\n        metadata.domainName,\n        metadata.imageUrl));\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const BLANK_AUDIO_SRC = 'data:audio/wav;base64,UklGRjIAAABXQVZFZm10IBA' +\n    'AAAABAAEAIlYAAESsAAACABAAZGF0YRAAAAAAAAAAAAAAAAAAAAAAAA==';\n\nexport const BLANK_VIDEO_SRC = 'data:video/mp4;base64,AAAAHGZ0eXBNNFYgAAACAG' +\n    'lzb21pc28yYXZjMQAAAAhmcmVlAAAGF21kYXTeBAAAbGliZmFhYyAxLjI4AABCAJMgBDIARw' +\n    'AAArEGBf//rdxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxNDIgcjIgOTU2YzhkOCAtIE' +\n    'guMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMTQgLSBodHRwOi8vd3' +\n    'd3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0wIHJlZj0zIGRlYm' +\n    'xvY2s9MTowOjAgYW5hbHlzZT0weDE6MHgxMTEgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3' +\n    'JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MSB0cmVsbG' +\n    'lzPTEgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV' +\n    '9xcF9vZmZzZXQ9LTIgdGhyZWFkcz02IGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3Rocm' +\n    'VhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb2' +\n    '5zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTI1MCBrZXlpbn' +\n    'RfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcm' +\n    'M9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcH' +\n    'N0ZXA9NCB2YnZfbWF4cmF0ZT03NjggdmJ2X2J1ZnNpemU9MzAwMCBjcmZfbWF4PTAuMCBuYW' +\n    'xfaHJkPW5vbmUgZmlsbGVyPTAgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAAFZliIQL8m' +\n    'KAAKvMnJycnJycnJycnXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' +\n    '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' +\n    'AAHQAAAAEAAAABAAAAHgAAAAIAAAABAAAAHwAAAAQAAAABAAAA4HN0c3oAAAAAAAAAAAAAAD' +\n    'MAAAAaAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAA' +\n    'AACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAA' +\n    'kAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAA' +\n    'AACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAAAJAAAACQAAAAkAAACMc3RjbwAAAA' +\n    'AAAAAfAAAALAAAA1UAAANyAAADhgAAA6IAAAO+AAAD0QAAA+0AAAQAAAAEHAAABC8AAARLAA' +\n    'AEZwAABHoAAASWAAAEqQAABMUAAATYAAAE9AAABRAAAAUjAAAFPwAABVIAAAVuAAAFgQAABZ' +\n    '0AAAWwAAAFzAAABegAAAX7AAAGFwAAAGJ1ZHRhAAAAWm1ldGEAAAAAAAAAIWhkbHIAAAAAAA' +\n    'AAAG1kaXJhcHBsAAAAAAAAAAAAAAAALWlsc3QAAAAlqXRvbwAAAB1kYXRhAAAAAQAAAABMYX' +\n    'ZmNTUuMzMuMTAw';\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {LogLevel, dev} from '../../../src/log';\nimport {Services} from '../../../src/services';\nimport {isArray} from '../../../src/types';\nimport {removeChildren} from '../../../src/dom';\n\n\n/**\n * @param {!../../../src/service/vsync-impl.Vsync} vsync\n * @param {!Element} el\n * @param {boolean} isHidden\n */\nfunction toggleHiddenAttribute(vsync, el, isHidden) {\n  vsync.mutate(() => {\n    if (isHidden) {\n      el.setAttribute('hidden', 'hidden');\n    } else {\n      el.removeAttribute('hidden');\n    }\n  });\n}\n\n\n/**\n * @param {!Window} win\n * @param {string|!Array<string>} classNameOrList\n * @param {function(Event)} handler\n * @return {!Element}\n */\nfunction createButton(win, classNameOrList, handler) {\n  const button = win.document.createElement('div');\n  button.setAttribute('role', 'button');\n\n  if (isArray(classNameOrList)) {\n    classNameOrList.forEach(className => button.classList.add(className));\n  } else {\n    button.classList.add(/** @type {string} */ (classNameOrList));\n  }\n  button.classList.add('i-amphtml-story-button');\n  button.addEventListener('click', handler);\n  return button;\n}\n\n\nexport class DevelopmentModeLogButtonSet {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private {?Element} */\n    this.root_ = null;\n\n    /** @private {?Element} */\n    this.errorButton_ = null;\n\n    /** @private {?Element} */\n    this.warningButton_ = null;\n\n    /** @private {?Element} */\n    this.successButton_ = null;\n  }\n\n\n  /**\n   * @param {!Window} win\n   */\n  static create(win) {\n    return new DevelopmentModeLogButtonSet(win);\n  }\n\n\n  /**\n   * Builds the developer log button set element.\n   * @param {function()} logButtonActionFn A callback function to be invoked when\n   *     the log buttons are clicked.\n   * @return {?Element}\n   */\n  build(logButtonActionFn) {\n    this.errorButton_ = createButton(this.win_,\n        ['i-amphtml-story-error-button', 'i-amphtml-story-dev-logs-button'],\n        () => logButtonActionFn());\n\n    this.warningButton_ = createButton(this.win_,\n        ['i-amphtml-story-warning-button', 'i-amphtml-story-dev-logs-button'],\n        () => logButtonActionFn());\n\n    this.successButton_ = createButton(this.win_,\n        ['i-amphtml-story-success-button', 'i-amphtml-story-dev-logs-button'],\n        () => logButtonActionFn());\n\n\n    this.root_ = this.win_.document.createElement('div');\n    this.root_.appendChild(this.errorButton_);\n    this.root_.appendChild(this.warningButton_);\n    this.root_.appendChild(this.successButton_);\n\n    return this.root_;\n  }\n\n\n  /**\n   * Gets the button associated to a given log entry.\n   * @param {!./logging.AmpStoryLogEntryDef} logEntry The log entry for which\n   *     the associated button shouldbe retrieved.\n   * @return {?Element} The button associated to the specified log entry, if one\n   *     exists.\n   * @private\n   */\n  getButtonForLogEntry_(logEntry) {\n    if (logEntry.conforms) {\n      return this.successButton_;\n    }\n\n    switch (logEntry.level) {\n      case LogLevel.ERROR:\n        return this.errorButton_;\n      case LogLevel.WARN:\n        return this.warningButton_;\n      default:\n        return null;\n    }\n  }\n\n\n  /**\n   * Logs an individual entry into the developer log.\n   * @param {!./logging.AmpStoryLogEntryDef} logEntry The entry to log.\n   */\n  log(logEntry) {\n    const button = this.getButtonForLogEntry_(logEntry);\n    if (!button) {\n      return;\n    }\n\n    const oldCount = parseInt(button.getAttribute('data-count') || 0, 10);\n    button.setAttribute('data-count', oldCount + 1);\n  }\n\n\n  /**\n   * Clears any error state held by the buttons.\n   */\n  clear() {\n    this.errorButton_.setAttribute('data-count', 0);\n    this.warningButton_.setAttribute('data-count', 0);\n    this.successButton_.setAttribute('data-count', 0);\n  }\n}\n\n\n/**\n * Development mode log for <amp-story>.\n */\nexport class DevelopmentModeLog {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private {boolean} */\n    this.isBuilt_ = false;\n\n    /** @private {?Element} */\n    this.root_ = null;\n\n    /** @private {?Element} */\n    this.errorButton_ = null;\n\n    /** @private {?Element} */\n    this.warningButton_ = null;\n\n    /** @private {?Element} */\n    this.successButton_ = null;\n\n    /** @private {?Element} */\n    this.entriesEl_ = null;\n\n    /** @private {?Element} */\n    this.contextStringEl_ = null;\n  }\n\n\n  /**\n   * @param {!Window} win\n   */\n  static create(win) {\n    return new DevelopmentModeLog(win);\n  }\n\n\n  /**\n   * Builds the developer log element.\n   * @return {?Element}\n   */\n  build() {\n    this.contextStringEl_ = this.win_.document.createElement('span');\n    this.contextStringEl_.classList\n        .add('i-amphtml-story-developer-log-context');\n    const titleEl = this.win_.document.createElement('div');\n    titleEl.textContent = 'Developer logs for page ';\n    titleEl.appendChild(this.contextStringEl_);\n\n    const closeDeveloperLogEl = createButton(this.win_,\n        'i-amphtml-story-developer-log-close',\n        () => this.hide());\n\n    const headerEl = this.win_.document.createElement('div');\n    headerEl.classList.add('i-amphtml-story-developer-log-header');\n    headerEl.appendChild(titleEl);\n    headerEl.appendChild(closeDeveloperLogEl);\n\n    this.entriesEl_ = this.win_.document.createElement('ul');\n    this.entriesEl_.classList\n        .add('i-amphtml-story-developer-log-entries');\n\n    this.root_ = this.win_.document.createElement('div');\n    this.root_.classList.add('i-amphtml-story-developer-log');\n    this.root_.setAttribute('hidden', '');\n    this.root_.appendChild(headerEl);\n    this.root_.appendChild(this.entriesEl_);\n\n    this.clear();\n    return this.root_;\n  }\n\n\n  /**\n   * @param {!LogLevel} logLevel\n   * @return {?string} The CSS class to be applied to the log entry, given the\n   *     specified log level, or null if no class should be added.\n   * @private\n   */\n  getCssLogLevelClass_(logLevel) {\n    switch (logLevel) {\n      case LogLevel.WARN:\n        return 'i-amphtml-story-developer-log-entry-warning';\n      case LogLevel.ERROR:\n        return 'i-amphtml-story-developer-log-entry-error';\n      default:\n        return null;\n    }\n  }\n\n\n  /**\n   * @param {boolean} conforms Whether the log entry is for an element that\n   *     conforms to a best practice.\n   * @return {?string} The CSS class to be applied to the log entry, given the\n   *     element's conformance to a best practice, or null if no class should be\n   *     added.\n   * @private\n   */\n  getCssConformanceClass_(conforms) {\n    if (conforms) {\n      return 'i-amphtml-story-developer-log-entry-success';\n    }\n\n    return null;\n  }\n\n\n  /**\n   * @param {!./logging.AmpStoryLogEntryDef} logEntry The entry to be logged.\n   */\n  log(logEntry) {\n    const logLevelClass = this.getCssLogLevelClass_(logEntry.level);\n    const conformanceClass = this.getCssConformanceClass_(logEntry.conforms);\n\n    const logEntryUi = this.win_.document.createElement('li');\n    logEntryUi.classList.add('i-amphtml-story-developer-log-entry');\n\n    if (logLevelClass) {\n      logEntryUi.classList.add(logLevelClass);\n    }\n\n    if (conformanceClass) {\n      logEntryUi.classList.add(conformanceClass);\n    }\n\n    logEntryUi.textContent = logEntry.message;\n    this.entriesEl_.appendChild(logEntryUi);\n  }\n\n\n  /**\n   * Clears all entries from the developer logs.\n   */\n  clear() {\n    Services.vsyncFor(this.win_).mutate(() => {\n      removeChildren(dev().assertElement(this.entriesEl_));\n    });\n  }\n\n\n  /**\n   * Sets the string providing context for the developer logs window.  This is\n   * often the name or ID of the element that all logs are for (e.g. the page).\n   * @param {string} contextString\n   */\n  setContextString(contextString) {\n    this.contextStringEl_.textContent = contextString;\n  }\n\n\n  /**\n   * Toggles the visibility of the developer log.\n   */\n  toggle() {\n    const newHiddenState = !this.root_.hasAttribute('hidden');\n    toggleHiddenAttribute(\n        Services.vsyncFor(this.win_), dev().assertElement(this.root_),\n        newHiddenState);\n  }\n\n\n  /**\n   * Hides the developer log in the UI.\n   */\n  hide() {\n    toggleHiddenAttribute(\n        Services.vsyncFor(this.win_), dev().assertElement(this.root_),\n        /* isHidden */ true);\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {isEnumValue} from '../../../src/types';\nimport {parseQueryString} from '../../../src/url';\n\n\n/**\n * Embed mode for AMP story.  See ../embed-modes.md for details.\n * @enum {number}\n */\nexport const EmbedMode = {\n  /**\n   * Default mode.\n   */\n  NOT_EMBEDDED: 0,\n\n  /**\n   * TBD embed mode.\n   *\n   * This differs from the NOT_EMBEDDED embed mode in the following ways:\n   * - Hides bookend\n   * - Hides all system layer buttons\n   * - Disables swipe-based user education\n   * - Disallows ads\n   * - Unmutes audio in the story by default\n   */\n  NAME_TBD: 1,\n};\n\n\n/**\n * @param {string} str\n * @return {!EmbedMode}\n * @private\n */\nexport function parseEmbedMode(str) {\n  const params = parseQueryString(str);\n  const unsanitizedEmbedMode = params['embedMode'];\n  const embedModeIndex = parseInt(unsanitizedEmbedMode, 10);\n\n  return isEnumValue(EmbedMode, embedModeIndex)\n    ? /** @type {!EmbedMode} */ (embedModeIndex)\n    : EmbedMode.NOT_EMBEDDED;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {createCustomEvent} from '../../../src/event-helper';\n\n\n/** @const {!Object<string, string>} */\nexport const EventType = {\n  // Triggered when the bookend should be opened\n  SHOW_BOOKEND: 'ampstory:showbookend',\n\n  // Triggered when the user clicks the close bookend button\n  CLOSE_BOOKEND: 'ampstory:closebookend',\n\n  // Triggered when the user mutes the story\n  MUTE: 'ampstory:mute',\n\n  // Triggered when the user unmutes the story\n  UNMUTE: 'ampstory:unmute',\n\n  // Triggered when there are audio sources playing on the active page\n  AUDIO_PLAYING: 'ampstory:audioplaying',\n\n  // Triggered when there are no audio sources playing on the active page\n  AUDIO_STOPPED: 'ampstory:audiostopped',\n\n  // Triggered when the story should switch to a specified page\n  SWITCH_PAGE: 'ampstory:switchpage',\n\n  // Triggered when the story should switch to the previous page\n  PREVIOUS_PAGE: 'ampstory:previouspage',\n\n  // Triggered when the story should switch to the next page\n  NEXT_PAGE: 'ampstory:nextpage',\n\n  // Triggered when the story should navigate after a tap on active page.\n  TAP_NAVIGATION: 'ampstory:tapnavigation',\n\n  // Triggered when a page updates its progress\n  PAGE_PROGRESS: 'ampstory:pageprogress',\n\n  // Triggered when the story should be replayed\n  REPLAY: 'ampstory:replay',\n\n  // DEVELOPMENT MODE ONLY: Triggered when a story page has log entries (e.g.\n  // warnings or errors).\n  DEV_LOG_ENTRIES_AVAILABLE: 'ampstory:devlogentriesavailable',\n\n  // Triggered when user clicks on left 25% of the first page\n  SHOW_NO_PREVIOUS_PAGE_HELP: 'ampstory:shownopreviouspagehelp',\n\n  // Triggered when a story has loaded at least its initial set of pages.\n  STORY_LOADED: 'ampstory:load',\n\n  // Triggered when a page has loaded at least one frame of all of its media.\n  PAGE_LOADED: 'ampstory:pageload',\n};\n\n\n/**\n * @param {!EventTarget} source\n * @param {string} eventName\n * @param {boolean=} opt_bubbles\n */\nexport function dispatch(source, eventName, opt_bubbles) {\n  const event = new Event(eventName, {bubbles: !!opt_bubbles});\n  if (event.initEvent) {\n    event.initEvent(eventName, /* bubbles */ !!opt_bubbles,\n        /* cancelable */ false);\n  }\n  source.dispatchEvent(event);\n}\n\n\n/**\n * @param {!Window} win\n * @param {!EventTarget} source\n * @param {string} eventName\n * @param {!Object} payload\n * @param {!CustomEventInit=} opt_eventInit\n */\nexport function dispatchCustom(win, source, eventName, payload, opt_eventInit) {\n  const event = createCustomEvent(win, eventName, payload, opt_eventInit);\n  source.dispatchEvent(event);\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isJsonLdScriptTag} from '../../../src/dom';\nimport {tryParseJson} from '../../../src/json';\nimport {user} from '../../../src/log';\n\nconst TAG = 'getJsonLd';\n\n/**\n * @param {!Node} root\n * @return {?JsonObject}\n */\nexport function getJsonLd(root) {\n  const scriptTag = root.querySelector('script[type=\"application/ld+json\"]');\n\n  if (!scriptTag || !isJsonLdScriptTag(scriptTag)) {\n    return null;\n  }\n\n  return tryParseJson(scriptTag.textContent, e => {\n    user().error(TAG, 'Failed to parse ld+json. Is it valid JSON?', e);\n  }) || null;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {dev} from '../../../src/log';\nimport {dict} from './../../../src/utils/object';\nimport {renderAsElement} from './simple-template';\n\n\n/** @const {string} */\nconst SPINNER_ACTIVE_ATTRIBUTE = 'active';\n\n\n/** @private @const {!./simple-template.ElementDef} */\nconst SPINNER = {\n  tag: 'div',\n  attrs: dict({\n    'class': 'i-amphtml-story-spinner',\n    'aria-hidden': 'true',\n    'aria-label': 'Loading video',\n  }),\n  children: [\n    {\n      tag: 'div',\n      attrs: dict({\n        'class': 'i-amphtml-story-spinner-container',\n      }),\n      children: [\n        {\n          tag: 'div',\n          attrs: dict({\n            'class': 'i-amphtml-story-spinner-layer',\n          }),\n          children: [\n            {\n              tag: 'div',\n              attrs: dict({\n                'class': 'i-amphtml-story-spinner-circle-clipper left',\n              }),\n            },\n            {\n              tag: 'div',\n              attrs: dict({\n                'class': 'i-amphtml-story-spinner-circle-clipper right',\n              }),\n            },\n          ],\n        },\n      ],\n    },\n  ],\n};\n\nexport class LoadingSpinner {\n  /**\n   * @param {!Document} doc\n   */\n  constructor(doc) {\n    /** @private @const {!Document} */\n    this.doc_ = doc;\n\n    /** @public {?Element} */\n    this.root_ = null;\n\n    /** @private {boolean} */\n    this.isActive_ = false;\n  }\n\n  build() {\n    if (this.root_) {\n      return this.root_;\n    }\n\n    this.root_ = renderAsElement(this.doc_, SPINNER);\n\n    return this.getRoot();\n  }\n\n  /** @return {!Element} */\n  getRoot() {\n    return dev().assertElement(this.root_);\n  }\n\n  /** @param {boolean} isActive */\n  toggle(isActive) {\n    if (isActive === this.isActive_) {\n      return;\n    }\n    if (isActive) {\n      this.root_.setAttribute(SPINNER_ACTIVE_ATTRIBUTE, '');\n      this.root_.setAttribute('aria-hidden', 'false');\n    } else {\n      this.root_.removeAttribute(SPINNER_ACTIVE_ATTRIBUTE);\n      this.root_.setAttribute('aria-hidden', 'true');\n    }\n    this.isActive_ = isActive;\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {LogLevel, dev} from '../../../src/log';\nimport {scopedQuerySelectorAll} from '../../../src/dom';\n\n\n/** @typedef {function(!Element): (boolean|!Promise<boolean>)} */\nlet ElementPredicateDef;\n\n/**\n * A log type is an abstract rule or best practice that should be followed when\n * constructing a story.  This is internal to this file, which handles finding\n * specific instances of these log types, and returning them as log entries.\n *\n * message: (required) The message shown to developers in development mode if\n *     the best practice is not followed.\n * level: (required) The log level at which this entry should be logged.\n * moreInfo: (optional) A URL to a page containing additional documentation on\n *     the best practice.\n * selector: (optional) A selector to be queried on the currently-active page,\n *     and whose results will be subject to the best practice (given that they\n *     also match the precondition).  If unspecified, the amp-story-page itself\n *     is assumed to be subject to the best practice.\n * precondition: (optional) A predicate that takes an element and returns true\n *     if the specified element should be subject to the best practice.  If\n *     unspecified, all elements that match the selector are subject to the best\n *     practice.\n * predicate: (optional) A predicate that takes an element and returns true if\n *     the element follows the best practice, or false otherwise.  If\n *     unspecified, all elements are assumed not to follow the best practice.\n *\n * @typedef {{\n *   message: string,\n *   level: !LogLevel,\n *   moreInfo: (string|undefined),\n *   selector: (string|undefined),\n *   precondition: (!ElementPredicateDef|undefined),\n *   predicate: (!ElementPredicateDef|undefined),\n * }}\n */\nlet AmpStoryLogTypeDef;\n\n\n/**\n * A log entry is a more concrete version of a rule or best practice; it refers\n * to whether a specific element on a specific page of a specific story conforms\n * to a given best practice.\n *\n * @typedef {{\n *   element: !Element,\n *   rootElement: !Element,\n *   message: string,\n *   level: !LogLevel,\n *   conforms: boolean,\n *   moreInfo: (string|undefined),\n * }}\n */\nexport let AmpStoryLogEntryDef;\n\n\n/** @private @const {string} */\nconst AMPPROJECT_DOCS = 'https://www.ampproject.org/docs';\n\n\nfunction getPosterFromVideo(el) {\n  return new Promise((resolve, reject) => {\n    const poster = new Image();\n    poster.onload = () => resolve(poster);\n    poster.onerror = reject;\n    poster.src = el.getAttribute('poster');\n  });\n}\n\n/** @enum {!AmpStoryLogTypeDef} */\nconst LogType = {\n  /** Errors */\n  VIDEOS_POSTER_SPECIFIED: {\n    message: 'Videos should specify a poster image.',\n    moreInfo: AMPPROJECT_DOCS + '/reference/components/amp-video#poster',\n    selector: 'video:not([poster])',\n    level: LogLevel.ERROR,\n  },\n\n  /** Warnings */\n  IMAGES_MAX_720P_OR_SRCSET: {\n    message: 'Images should not be larger than 720p.  If you wish to use' +\n        ' images that are larger than 720p, you should specify a srcset.',\n    moreInfo: AMPPROJECT_DOCS + '/guides/responsive/art_direction#srcset',\n    selector: 'img:not([srcset])',\n    predicate: el => el.naturalWidth <= 720 && el.naturalHeight <= 1280,\n    level: LogLevel.WARN,\n  },\n\n  IMAGES_PORTRAIT: {\n    message: 'Full-bleed images should be in portrait orientation.',\n    selector: 'amp-story-grid-layer[template=\"fill\"] > amp-img > img',\n    predicate: el => el.naturalWidth < el.naturalHeight,\n    level: LogLevel.WARN,\n  },\n\n  VIDEOS_MAX_720P: {\n    message: 'Videos should not be larger than 720p.',\n    selector: 'video',\n    predicate: el => el.videoWidth <= 720 && el.videoHeight <= 1280,\n    level: LogLevel.WARN,\n  },\n\n  VIDEOS_PORTRAIT: {\n    message: 'Full-bleed videos should be in portrait orientation.',\n    selector: 'amp-story-grid-layer[template=\"fill\"] > amp-video > video',\n    predicate: el => el.videoWidth < el.videoHeight,\n    level: LogLevel.WARN,\n  },\n\n  VIDEO_POSTER_MAX_720P: {\n    message: 'Video poster images should not be larger than 720p.',\n    selector: 'video[poster]',\n    predicate: el => getPosterFromVideo(el)\n        .then(poster => {\n          return poster.naturalWidth <= 720 && poster.naturalHeight <= 1280;\n        }),\n    level: LogLevel.WARN,\n  },\n\n  VIDEO_POSTER_POTRAIT: {\n    message: 'Poster images for full-bleed videos should be in portrait ' +\n        'orientation.',\n    selector: 'amp-story-grid-layer[template=\"fill\"] > amp-video > ' +\n        'video[poster]',\n    predicate: el => getPosterFromVideo(el)\n        .then(poster => poster.naturalWidth < poster.naturalHeight),\n    level: LogLevel.WARN,\n  },\n};\n\n\n/**\n * Gets the log type associated with the specified key.\n * @param {string} logTypeKey\n * @return {!AmpStoryLogTypeDef}\n */\nfunction getLogType(logTypeKey) {\n  const logType = LogType[logTypeKey];\n  dev().assert(logType, `There is no log type \"${logTypeKey}\".`);\n  dev().assert(logType.message,\n      `Log type \"${logTypeKey}\" has no associated message.`);\n  dev().assert(logType.level,\n      `Log type \"${logTypeKey}\" has no associated log level.`);\n\n  return logType;\n}\n\n\n/**\n * @param {!Element} rootElement\n * @param {!AmpStoryLogTypeDef} logType\n * @param {!Element} element\n * @return {!Promise<!AmpStoryLogEntryDef>}\n */\nfunction getLogEntry(rootElement, logType, element) {\n  const predicate = logType.predicate || (unusedEl => false);\n\n  return Promise.resolve(predicate(element))\n      .then(conforms => {\n        return new Promise(resolve => {\n          resolve({\n            rootElement,\n            element,\n            conforms,\n            level: logType.level,\n            message: logType.message,\n            moreInfo: logType.moreInfo,\n          });\n        });\n      });\n}\n\n\n/**\n * @param {!Element} rootElement\n * @param {!AmpStoryLogTypeDef} logType\n * @return {!Array<!Promise<!AmpStoryLogEntryDef>>}\n */\nfunction getLogEntriesForType(rootElement, logType) {\n  const precondition = logType.precondition || (unusedEl => true);\n\n  const elements = logType.selector ?\n    [].slice.call(scopedQuerySelectorAll(rootElement, logType.selector)) :\n    [rootElement];\n\n  return elements\n      .filter(precondition)\n      .map(getLogEntry.bind(/** thisArg */ null, rootElement, logType));\n}\n\n/**\n * @param {!AmpStoryLogEntryDef} logEntryA\n * @param {!AmpStoryLogEntryDef} logEntryB\n * @return {number}\n */\nfunction logEntryCompareFn(logEntryA, logEntryB) {\n  if (logEntryA.conforms == logEntryB.conforms) {\n    // For entries within that are all conformant or all non-conformant, sort by\n    // log level, with most severe entries first and least severe entries last.\n    return logEntryA.level <= logEntryB.level ? -1 : 1;\n  } else {\n    // false < true, so non-conformant issues go before conformant ones.\n    return logEntryA.conforms < logEntryB.conforms ? -1 : 1;\n  }\n}\n\n\n/**\n * Gets a promise which yields a list of log entries for the specified element.\n * @param {!Element} rootElement\n * @return {!Promise<!Array<!AmpStoryLogEntryDef>>}\n */\nexport function getLogEntries(rootElement) {\n  const logEntryPromises = Object.keys(LogType).reduce((entries, key) => {\n    const logType = getLogType(key);\n    const newEntries = getLogEntriesForType(rootElement, logType);\n    return entries.concat(newEntries);\n  }, []);\n\n  return Promise.all(logEntryPromises)\n      .then(logEntries => {\n        return logEntries.sort(logEntryCompareFn);\n      });\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {BLANK_AUDIO_SRC, BLANK_VIDEO_SRC} from './default-media';\nimport {\n  BlessTask,\n  ELEMENT_BLESSED_PROPERTY_NAME,\n  LoadTask,\n  MuteTask,\n  PauseTask,\n  PlayTask,\n  RewindTask,\n  SwapIntoDomTask,\n  SwapOutOfDomTask,\n  UnmuteTask,\n  UpdateSourcesTask,\n} from './media-tasks';\nimport {Services} from '../../../src/services';\nimport {Sources} from './sources';\nimport {ampMediaElementFor} from './utils';\nimport {dev} from '../../../src/log';\nimport {findIndex} from '../../../src/utils/array';\nimport {isConnectedNode} from '../../../src/dom';\nimport {toWin} from '../../../src/types';\n\n\n/** @const @enum {string} */\nexport const MediaType = {\n  UNSUPPORTED: 'unsupported',\n  AUDIO: 'audio',\n  VIDEO: 'video',\n};\n\n\n/**\n * Represents the distance of an element from the current place in the document.\n * @typedef {function(!HTMLMediaElement): number}\n */\nexport let ElementDistanceFnDef;\n\n\n/**\n * Represents a task to be executed on a media element.\n * @typedef {function(!HTMLMediaElement, *): !Promise}\n */\nlet ElementTaskDef;\n\n\n/**\n * @const {string}\n */\nconst DOM_MEDIA_ELEMENT_ID_PREFIX = 'i-amphtml-media-';\n\n\n/**\n * @const {string}\n */\nconst POOL_MEDIA_ELEMENT_PROPERTY_NAME = '__AMP_MEDIA_POOL_ID__';\n\n\n/**\n * @const {string}\n */\nconst ELEMENT_TASK_QUEUE_PROPERTY_NAME = '__AMP_MEDIA_ELEMENT_TASKS__';\n\n\n/**\n * The name for a string attribute that represents the ID of a media element\n * that the element containing this attribute replaced.\n * @const {string}\n */\nexport const REPLACED_MEDIA_PROPERTY_NAME = 'replaced-media';\n\n\n/**\n * @type {!Object<string, !MediaPool>}\n */\nconst instances = {};\n\n\n/**\n * @type {number}\n */\nlet nextInstanceId = 0;\n\n\nlet elId = 0;\n\n\nexport class MediaPool {\n  /**\n   * @param {!Window} win The window object.\n   * @param {!Object<!MediaType, number>} maxCounts The maximum amount of each\n   *     media element that can be allocated by the pool.\n   * @param {!ElementDistanceFnDef} distanceFn A function that, given an\n   *     element, returns the distance of that element from the current position\n   *     in the document.  The definition of \"distance\" can be implementation-\n   *     dependant, as long as it is consistent between invocations.\n   */\n  constructor(win, maxCounts, distanceFn) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!../../../src/service/timer-impl.Timer} */\n    this.timer_ = Services.timerFor(win);\n\n    /** @private @const {!../../../src/service/vsync-impl.Vsync} */\n    this.vsync_ = Services.vsyncFor(win);\n\n    /**\n     * The function used to retrieve the distance between an element and the\n     * current position in the document.\n     * @private @const {!ElementDistanceFnDef}\n     */\n    this.distanceFn_ = distanceFn;\n\n    /**\n     * Holds all of the media elements that have been allocated.\n     * @const {!Object<!MediaType, !Array<!HTMLMediaElement>>}\n     * @visibleForTesting\n     */\n    this.allocated = {};\n\n    /**\n     * Holds all of the media elements that have not been allocated.\n     * @const {!Object<!MediaType, !Array<!HTMLMediaElement>>}\n     * @visibleForTesting\n     */\n    this.unallocated = {};\n\n    /**\n     * Maps a media element's ID to the object containing its sources.\n     * @private @const {!Object<string, !Sources>}\n     */\n    this.sources_ = {};\n\n    /**\n     * Maps a media element's ID to the element.  This is necessary, as elements\n     * are kept in memory when they are swapped out of the DOM.\n     * @private @const {!Object<string, !HTMLMediaElement>}\n     */\n    this.domMediaEls_ = {};\n\n    /**\n     * Counter used to produce unique IDs for media elements.\n     * @private {number}\n     */\n    this.idCounter_ = 0;\n\n    /**\n     * Whether the media elements in this MediaPool instance have been \"blessed\"\n     * for unmuted playback without user gesture.\n     * @private {boolean}\n     */\n    this.blessed_ = false;\n\n    /** @const {!Object<string, (function(): !HTMLMediaElement)>} */\n    this.mediaFactory_ = {\n      [MediaType.AUDIO]: () => {\n        const audioEl = this.win_.document.createElement('audio');\n        audioEl.setAttribute('muted', '');\n        audioEl.muted = true;\n        audioEl.classList.add('i-amphtml-pool-media');\n        audioEl.classList.add('i-amphtml-pool-audio');\n        return audioEl;\n      },\n      [MediaType.VIDEO]: () => {\n        const videoEl = this.win_.document.createElement('video');\n        videoEl.setAttribute('muted', '');\n        videoEl.muted = true;\n        videoEl.setAttribute('playsinline', '');\n        videoEl.classList.add('i-amphtml-pool-media');\n        videoEl.classList.add('i-amphtml-pool-video');\n        return videoEl;\n      },\n    };\n\n    this.initializeMediaPool_(maxCounts);\n  }\n\n\n  /**\n   * Fills the media pool by creating the maximum number of media elements for\n   * each of the types of media elements.  We need to create these eagerly so\n   * that all media elements exist by the time that blessAll() is invoked,\n   * thereby \"blessing\" all media elements for playback without user gesture.\n   * @param {!Object<!MediaType, number>} maxCounts The maximum amount of each\n   *     media element that can be allocated by the pool.\n   * @private\n   */\n  initializeMediaPool_(maxCounts) {\n    this.forEachMediaType_(key => {\n      const type = MediaType[key];\n      const count = maxCounts[type] || 0;\n      this.allocated[type] = [];\n      this.unallocated[type] = [];\n      for (let i = 0; i < count; i++) {\n        this.vsync_.mutate(() => {\n          const mediaEl = this.mediaFactory_[type].call(this);\n          mediaEl.setAttribute('pool-element', elId++);\n          const sources = this.getDefaultSource_(type);\n          this.enqueueMediaElementTask_(mediaEl,\n              new UpdateSourcesTask(sources, this.vsync_));\n          // TODO(newmuis): Check the 'error' field to see if MEDIA_ERR_DECODE\n          // is returned.  If so, we should adjust the pool size/distribution\n          // between media types.\n          this.unallocated[type].push(mediaEl);\n        });\n      }\n    });\n  }\n\n\n  /**\n   * @param {!MediaType} mediaType The media type whose source should be\n   *     retrieved.\n   * @return {!Sources} The default source for the specified type of media.\n   */\n  getDefaultSource_(mediaType) {\n    switch (mediaType) {\n      case MediaType.AUDIO:\n        return new Sources(BLANK_AUDIO_SRC);\n      case MediaType.VIDEO:\n        return new Sources(BLANK_VIDEO_SRC);\n      default:\n        dev().error('AMP-STORY', `No default media for type ${mediaType}.`);\n        return new Sources();\n    }\n  }\n\n\n  /**\n   * Comparison function that compares the distance of each element from the\n   * current position in the document.\n   * @param {!HTMLMediaElement} mediaA The first element to compare.\n   * @param {!HTMLMediaElement} mediaB The second element to compare.\n   * @private\n   */\n  compareMediaDistances_(mediaA, mediaB) {\n    const distanceA = this.distanceFn_(mediaA);\n    const distanceB = this.distanceFn_(mediaB);\n    return distanceA < distanceB ? -1 : 1;\n  }\n\n\n  /**\n   * @return {string} A unique ID.\n   * @private\n   */\n  createDomMediaElementId_() {\n    return DOM_MEDIA_ELEMENT_ID_PREFIX + this.idCounter_++;\n  }\n\n  /**\n   * Gets the media type from a given element.\n   * @param {!HTMLMediaElement} mediaElement The element whose media type should\n   *     be retrieved.\n   * @return {!MediaType}\n   * @private\n   */\n  getMediaType_(mediaElement) {\n    const tagName = mediaElement.tagName.toLowerCase();\n    switch (tagName) {\n      case 'audio':\n        return MediaType.AUDIO;\n      case 'video':\n        return MediaType.VIDEO;\n      default:\n        return MediaType.UNSUPPORTED;\n    }\n  }\n\n\n  /**\n   * Reserves an element of the specified type by removing it from the set of\n   * unallocated elements and returning it.\n   * @param {!MediaType} mediaType The type of media element to reserve.\n   * @return {?HTMLMediaElement} The reserved element, if one exists.\n   * @private\n   */\n  reserveUnallocatedMediaElement_(mediaType) {\n    return this.unallocated[mediaType].pop();\n  }\n\n\n  /**\n   * Retrieves the media element from the pool that matches the specified\n   * element, if one exists.\n   * @param {!MediaType} mediaType The type of media element to get.\n   * @param {!HTMLMediaElement} domMediaEl The element whose matching media\n   *     element should be retrieved.\n   * @return {?HTMLMediaElement} The media element in the pool that represents\n   *     the specified media element\n   */\n  getMatchingMediaElementFromPool_(mediaType, domMediaEl) {\n    if (this.isAllocatedMediaElement_(mediaType, domMediaEl)) {\n      return domMediaEl;\n    }\n\n    const allocatedEls = this.allocated[mediaType];\n    const index = findIndex(allocatedEls, poolMediaEl => {\n      return poolMediaEl[REPLACED_MEDIA_PROPERTY_NAME] === domMediaEl.id;\n    });\n\n    return allocatedEls[index];\n  }\n\n\n  /**\n   * Allocates the specified media element of the specified type.\n   * @param {!MediaType} mediaType The type of media element to allocate.\n   * @param {!HTMLMediaElement} poolMediaEl The element to be allocated.\n   * @private\n   */\n  allocateMediaElement_(mediaType, poolMediaEl) {\n    this.allocated[mediaType].push(poolMediaEl);\n\n    const unallocatedEls = this.unallocated[mediaType];\n    const indexToRemove = unallocatedEls.indexOf(poolMediaEl);\n\n    if (indexToRemove >= 0) {\n      unallocatedEls.splice(indexToRemove, 1);\n    }\n  }\n\n\n  /**\n   * Deallocates and returns the media element of the specified type furthest\n   * from the current position in the document.\n   * @param {!MediaType} mediaType The type of media element to deallocate.\n   * @param {!HTMLMediaElement=} opt_elToAllocate If specified, the element that\n   *     is trying to be allocated, such that another element must be evicted.\n   * @return {?HTMLMediaElement} The deallocated element, if one exists.\n   * @private\n   */\n  deallocateMediaElement_(mediaType, opt_elToAllocate) {\n    const allocatedEls = this.allocated[mediaType];\n\n    // Sort the allocated media elements by distance to ensure that we are\n    // evicting the media element that is furthest from the current place in the\n    // document.\n    allocatedEls.sort((a, b) => this.compareMediaDistances_(a, b));\n\n    // Do not deallocate any media elements if the element being loaded or\n    // played is further than the farthest allocated element.\n    if (opt_elToAllocate) {\n      const furthestEl = allocatedEls[allocatedEls.length - 1];\n      if (!furthestEl ||\n          this.distanceFn_(furthestEl) < this.distanceFn_(opt_elToAllocate)) {\n        return null;\n      }\n    }\n\n    // De-allocate a media element.\n    const poolMediaEl = allocatedEls.pop();\n    this.unallocated[mediaType].push(poolMediaEl);\n    return poolMediaEl;\n  }\n\n\n  /**\n   * Forcibly deallocates a specific media element, regardless of its distance\n   * from the current position in the document.\n   * @param {!HTMLMediaElement} poolMediaEl The element to be deallocated.\n   * @return {!Promise} A promise that is resolved when the specified media\n   *     element has been successfully deallocated.\n   */\n  forceDeallocateMediaElement_(poolMediaEl) {\n    const mediaType = this.getMediaType_(poolMediaEl);\n    const allocatedEls = this.allocated[mediaType];\n    const removeFromDom = isConnectedNode(poolMediaEl) ?\n      this.swapPoolMediaElementOutOfDom_(poolMediaEl) : Promise.resolve();\n\n    return removeFromDom.then(() => {\n      const index = allocatedEls.indexOf(poolMediaEl);\n      dev().assert(index >= 0, 'Cannot deallocate unallocated media element.');\n      allocatedEls.splice(index, 1);\n      this.unallocated[mediaType].push(poolMediaEl);\n    });\n  }\n\n\n  /**\n   * Evicts an element of the specified type, replaces it in the DOM with the\n   * original media element, and returns it.\n   * @param {!MediaType} mediaType The type of media element to evict.\n   * @param {!HTMLMediaElement=} opt_elToAllocate If specified, the element that\n   *     is trying to be allocated, such that another element must be evicted.\n   * @return {?HTMLMediaElement} A media element of the specified type.\n   * @private\n   */\n  evictMediaElement_(mediaType, opt_elToAllocate) {\n    const poolMediaEl =\n        this.deallocateMediaElement_(mediaType, opt_elToAllocate);\n    if (!poolMediaEl) {\n      return null;\n    }\n\n    this.swapPoolMediaElementOutOfDom_(poolMediaEl);\n    return poolMediaEl;\n  }\n\n\n  /**\n   * @param {!MediaType} mediaType The media type to check.\n   * @param {!HTMLMediaElement} el The element to check.\n   * @return {boolean} true, if the specified element has already been allocated\n   *     as the specified type of media element.\n   * @private\n   */\n  isAllocatedMediaElement_(mediaType, el) {\n    return this.allocated[mediaType].indexOf(el) >= 0;\n  }\n\n\n  /**\n   * Replaces a media element that was originally in the DOM with a media\n   * element from the pool.\n   * @param {!HTMLMediaElement} domMediaEl The media element originating from\n   *     the DOM.\n   * @param {!HTMLMediaElement} poolMediaEl The media element originating from\n   *     the pool.\n   * @param {!Sources} sources The sources for the media element.\n   * @return {!Promise} A promise that is resolved when the media element has\n   *     been successfully swapped into the DOM.\n   * @private\n   */\n  swapPoolMediaElementIntoDom_(domMediaEl, poolMediaEl, sources) {\n    const ampMediaForPoolEl = ampMediaElementFor(poolMediaEl);\n    const ampMediaForDomEl = ampMediaElementFor(domMediaEl);\n    poolMediaEl[REPLACED_MEDIA_PROPERTY_NAME] = domMediaEl.id;\n\n    return this.enqueueMediaElementTask_(poolMediaEl,\n        new SwapIntoDomTask(domMediaEl, this.vsync_))\n        .then(() => {\n          this.maybeResetAmpMedia_(ampMediaForPoolEl);\n          this.maybeResetAmpMedia_(ampMediaForDomEl);\n          this.enqueueMediaElementTask_(poolMediaEl,\n              new UpdateSourcesTask(sources, this.vsync_));\n          this.enqueueMediaElementTask_(poolMediaEl, new LoadTask());\n        }, () => {\n          this.forceDeallocateMediaElement_(poolMediaEl);\n        });\n  }\n\n\n  /**\n   * @param {?Element} componentEl\n   * @private\n   */\n  maybeResetAmpMedia_(componentEl) {\n    if (!componentEl) {\n      return;\n    }\n\n    if (componentEl.tagName.toLowerCase() == 'amp-audio') {\n      // TODO(alanorozco): Implement reset for amp-audio\n      return;\n    }\n\n    componentEl.getImpl().then(impl => impl.resetOnDomChange());\n  }\n\n\n  /**\n   * @param {!HTMLMediaElement} poolMediaEl The element whose source should be\n   *     reset.\n   * @return {!Promise} A promise that is resolved when the pool media element\n   *     has been reset.\n   */\n  resetPoolMediaElementSource_(poolMediaEl) {\n    const mediaType = this.getMediaType_(poolMediaEl);\n    const defaultSources = this.getDefaultSource_(mediaType);\n\n    return this.enqueueMediaElementTask_(poolMediaEl,\n        new UpdateSourcesTask(defaultSources, this.vsync_));\n  }\n\n\n  /**\n   * Removes a pool media element from the DOM and replaces it with the video\n   * that it originally replaced.\n   * @param {!HTMLMediaElement} poolMediaEl The pool media element to remove\n   *     from the DOM.\n   * @return {!Promise} A promise that is resolved when the media element has\n   *     been successfully swapped out of the DOM.\n   * @private\n   */\n  swapPoolMediaElementOutOfDom_(poolMediaEl) {\n    const oldDomMediaElId = poolMediaEl[REPLACED_MEDIA_PROPERTY_NAME];\n    const oldDomMediaEl = /** @type {!HTMLMediaElement} */ (dev().assertElement(\n        this.domMediaEls_[oldDomMediaElId],\n        'No media element to put back into DOM after eviction.'));\n\n    const swapOutOfDom = this.enqueueMediaElementTask_(poolMediaEl,\n        new SwapOutOfDomTask(oldDomMediaEl, this.vsync_))\n        .then(() => {\n          poolMediaEl[REPLACED_MEDIA_PROPERTY_NAME] = null;\n        });\n\n    this.resetPoolMediaElementSource_(poolMediaEl);\n    return swapOutOfDom;\n  }\n\n\n  forEachMediaType_(callbackFn) {\n    Object.keys(MediaType).forEach(callbackFn.bind(this));\n  }\n\n\n  /**\n   * Invokes a function for all media managed by the media pool.\n   * @param {function(!HTMLMediaElement)} callbackFn The function to be\n   *     invoked.\n   * @private\n   */\n  forEachMediaElement_(callbackFn) {\n    this.forEachMediaType_(key => {\n      const type = MediaType[key];\n      const allocatedEls = this.allocated[type];\n      allocatedEls.forEach(callbackFn.bind(this));\n    });\n\n    this.forEachMediaType_(key => {\n      const type = MediaType[key];\n      const unallocatedEls = this.unallocated[type];\n      unallocatedEls.forEach(callbackFn.bind(this));\n    });\n  }\n\n\n  /**\n   * Preloads the content of the specified media element in the DOM and returns\n   * a media element that can be used in its stead for playback.\n   * @param {!HTMLMediaElement} domMediaEl The media element, found in the DOM,\n   *     whose content should be loaded.\n   * @return {Promise<!HTMLMediaElement>} A media element from the pool that can be used\n   *     to replace the specified element.\n   */\n  loadInternal_(domMediaEl) {\n    if (!isConnectedNode(domMediaEl)) {\n      // Don't handle nodes that aren't even in the document.\n      return Promise.resolve();\n    }\n\n    const mediaType = this.getMediaType_(domMediaEl);\n    const existingPoolMediaEl =\n        this.getMatchingMediaElementFromPool_(mediaType, domMediaEl);\n    if (existingPoolMediaEl) {\n      // The element being loaded already has an allocated media element.\n      return Promise.resolve(existingPoolMediaEl);\n    }\n\n    const sources = this.sources_[domMediaEl.id];\n    dev().assert(sources instanceof Sources,\n        'Cannot play unregistered element.');\n\n    const poolMediaEl = this.reserveUnallocatedMediaElement_(mediaType) ||\n        this.evictMediaElement_(mediaType, domMediaEl);\n\n    if (!poolMediaEl) {\n      // If there is no space in the pool to allocate a new element, and no\n      // element can be evicted, do not return any element.\n      return Promise.resolve();\n    }\n\n    this.allocateMediaElement_(mediaType, poolMediaEl);\n\n    return this.swapPoolMediaElementIntoDom_(domMediaEl, poolMediaEl, sources)\n        .then(() => poolMediaEl);\n  }\n\n\n  /**\n   * \"Blesses\" the specified media element for future playback without a user\n   * gesture.  In order for this to bless the media element, this function must\n   * be invoked in response to a user gesture.\n   * @param {!HTMLMediaElement} poolMediaEl The media element to bless.\n   * @return {!Promise} A promise that is resolved when blessing the media\n   *     element is complete.\n   */\n  bless_(poolMediaEl) {\n    if (poolMediaEl[ELEMENT_BLESSED_PROPERTY_NAME]) {\n      return Promise.resolve();\n    }\n\n    return this.enqueueMediaElementTask_(poolMediaEl, new BlessTask());\n  }\n\n\n  /**\n   * Registers the specified element to be usable by the media pool.  Elements\n   * should be registered as early as possible, in order to prevent them from\n   * being played while not managed by the media pool.  If the media element is\n   * already registered, this is a no-op.  Registering elements from within the\n   * pool is not allowed, and will also be a no-op.\n   * @param {!HTMLMediaElement} domMediaEl The media element to be registered.\n   * @return {!Promise} A promise that is resolved when the element has been\n   *     successfully registered, or rejected otherwise.\n   */\n  register(domMediaEl) {\n    const mediaType = this.getMediaType_(domMediaEl);\n    if (this.isAllocatedMediaElement_(mediaType, domMediaEl)) {\n      // This media element originated from the media pool.\n      return Promise.resolve();\n    }\n\n    const id = domMediaEl.id || this.createDomMediaElementId_();\n    if (this.sources_[id] && this.domMediaEls_[id]) {\n      // This media element is already registered.\n      return Promise.resolve();\n    }\n\n    // This media element has not yet been registered.\n    domMediaEl.id = id;\n    const sources = Sources.removeFrom(domMediaEl);\n    this.sources_[id] = sources;\n    this.domMediaEls_[id] = domMediaEl;\n\n    domMediaEl.muted = true;\n    domMediaEl.setAttribute('muted', '');\n    domMediaEl.pause();\n\n    return Promise.resolve();\n  }\n\n\n  /**\n   * Preloads the content of the specified media element in the DOM.\n   * @param {!HTMLMediaElement} domMediaEl The media element, found in the DOM,\n   *     whose content should be loaded.\n   * @return {!Promise} A promise that is resolved when the specified media\n   *     element has successfully started preloading.\n   */\n  preload(domMediaEl) {\n    // Empty then() invocation hides the value yielded by the loadInternal_\n    // promise, so that we do not leak the pool media element outside of the\n    // scope of the media pool.\n    return this.loadInternal_(domMediaEl).then();\n  }\n\n\n  /**\n   * Plays the specified media element in the DOM by replacing it with a media\n   * element from the pool and playing that.\n   * @param {!HTMLMediaElement} domMediaEl The media element to be played.\n   * @return {!Promise} A promise that is resolved when the specified media\n   *     element has been successfully played.\n   */\n  play(domMediaEl) {\n    return this.loadInternal_(domMediaEl)\n        .then(poolMediaEl => {\n          if (!poolMediaEl) {\n            return Promise.resolve();\n          }\n\n          return this.enqueueMediaElementTask_(poolMediaEl, new PlayTask());\n        });\n  }\n\n\n  /**\n   * Pauses the specified media element in the DOM.\n   * @param {!HTMLMediaElement} domMediaEl The media element to be paused.\n   * @param {boolean=} rewindToBeginning Whether to rewind the currentTime\n   *     of media items to the beginning.\n   * @return {!Promise} A promise that is resolved when the specified media\n   *     element has been successfully paused.\n   */\n  pause(domMediaEl, rewindToBeginning = false) {\n    const mediaType = this.getMediaType_(domMediaEl);\n    const poolMediaEl =\n        this.getMatchingMediaElementFromPool_(mediaType, domMediaEl);\n\n    if (!poolMediaEl) {\n      return Promise.resolve();\n    }\n\n    return this.enqueueMediaElementTask_(poolMediaEl, new PauseTask())\n        .then(() => {\n          if (rewindToBeginning) {\n            this.enqueueMediaElementTask_(\n                /** @type {!HTMLMediaElement} */ (poolMediaEl),\n                new RewindTask());\n          }\n        });\n  }\n\n\n  /**\n   * Rewinds a specified media element in the DOM to 0.\n   * @param {!HTMLMediaElement} domMediaEl The media element to be rewound.\n   * @return {!Promise} A promise that is resolved when the\n   *     specified media element has been successfully rewound.\n   */\n  rewindToBeginning(domMediaEl) {\n    const mediaType = this.getMediaType_(domMediaEl);\n    const poolMediaEl =\n        this.getMatchingMediaElementFromPool_(mediaType, domMediaEl);\n\n    if (!poolMediaEl) {\n      return Promise.resolve();\n    }\n\n    return this.enqueueMediaElementTask_(poolMediaEl, new RewindTask());\n  }\n\n\n  /**\n   * Mutes the specified media element in the DOM.\n   * @param {!HTMLMediaElement} domMediaEl The media element to be muted.\n   * @return {!Promise} A promise that is resolved when the specified media\n   *     element has been successfully muted.\n   */\n  mute(domMediaEl) {\n    const mediaType = this.getMediaType_(domMediaEl);\n    const poolMediaEl =\n        this.getMatchingMediaElementFromPool_(mediaType, domMediaEl);\n\n    if (!poolMediaEl) {\n      return Promise.resolve();\n    }\n\n    return this.enqueueMediaElementTask_(poolMediaEl, new MuteTask());\n  }\n\n\n  /**\n   * Unmutes the specified media element in the DOM.\n   * @param {!HTMLMediaElement} domMediaEl The media element to be unmuted.\n   * @return {!Promise} A promise that is resolved when the specified media\n   *     element has been successfully paused.\n   */\n  unmute(domMediaEl) {\n    const mediaType = this.getMediaType_(domMediaEl);\n    const poolMediaEl =\n        this.getMatchingMediaElementFromPool_(mediaType, domMediaEl);\n\n    if (!poolMediaEl) {\n      return Promise.resolve();\n    }\n\n    return this.enqueueMediaElementTask_(poolMediaEl, new UnmuteTask());\n  }\n\n\n  /**\n   * \"Blesses\" all media elements in the media pool for future playback without\n   * a user gesture.  In order for this to bless the media elements, this\n   * function must be invoked in response to a user gesture.\n   * @return {!Promise} A promise that is resolved when all media elements in\n   *     the pool are blessed.\n   */\n  blessAll() {\n    if (this.blessed_) {\n      return Promise.resolve();\n    }\n\n    const blessPromises = [];\n    this.forEachMediaElement_(mediaEl => {\n      blessPromises.push(this.bless_(mediaEl));\n    });\n\n    return Promise.all(blessPromises)\n        .then(() => {\n          this.blessed_ = true;\n        }).catch(reason => {\n          dev().expectedError('AMP-STORY', 'Blessing all media failed: ',\n              reason);\n        });\n  }\n\n\n  /**\n   * @param {!HTMLMediaElement} mediaEl The element whose task queue should be\n   *     executed.\n   * @private\n   */\n  executeNextMediaElementTask_(mediaEl) {\n    const queue = mediaEl[ELEMENT_TASK_QUEUE_PROPERTY_NAME];\n    if (queue.length === 0) {\n      return;\n    }\n\n    const task = queue[0];\n\n    const executionFn = () => {\n      task.execute(mediaEl)\n          .catch(reason => dev().error('AMP-STORY', reason))\n          .then(() => {\n            // Run regardless of success or failure of task execution.\n            queue.shift();\n            this.executeNextMediaElementTask_(mediaEl);\n          });\n    };\n\n    if (task.requiresSynchronousExecution()) {\n      executionFn.call(this);\n    } else {\n      this.timer_.delay(executionFn.bind(this), 0);\n    }\n  }\n\n\n  /**\n   * @param {!HTMLMediaElement} mediaEl The element for which the specified task\n   *     should be executed.\n   * @param {!./media-tasks.MediaTask} task The task to be executed.\n   * @return {!Promise} A promise that is resolved when the specified task is\n   *     completed.\n   * @private\n   */\n  enqueueMediaElementTask_(mediaEl, task) {\n    if (!mediaEl[ELEMENT_TASK_QUEUE_PROPERTY_NAME]) {\n      mediaEl[ELEMENT_TASK_QUEUE_PROPERTY_NAME] = [];\n    }\n\n    const queue = mediaEl[ELEMENT_TASK_QUEUE_PROPERTY_NAME];\n    const isQueueRunning = queue.length !== 0;\n\n    queue.push(task);\n\n    if (!isQueueRunning) {\n      this.executeNextMediaElementTask_(mediaEl);\n    }\n\n    return task.whenComplete();\n  }\n\n\n  /**\n   * @param {!MediaPoolRoot} root\n   * @return {!MediaPool}\n   */\n  static for(root) {\n    const element = root.getElement();\n    const existingId = element[POOL_MEDIA_ELEMENT_PROPERTY_NAME];\n    const hasInstanceAllocated = existingId && instances[existingId];\n\n    if (hasInstanceAllocated) {\n      return instances[existingId];\n    }\n\n    const newId = String(nextInstanceId++);\n    element[POOL_MEDIA_ELEMENT_PROPERTY_NAME] = newId;\n    instances[newId] = new MediaPool(\n        toWin(root.getElement().ownerDocument.defaultView),\n        root.getMaxMediaElementCounts(),\n        element => root.getElementDistance(element));\n\n    return instances[newId];\n  }\n}\n\n\n/**\n * Defines a common interface for elements that contain a MediaPool.\n *\n * @interface\n */\nexport class MediaPoolRoot {\n  /**\n   * @return {!Element} The root element of this media pool.\n   */\n  getElement() {}\n\n  /**\n   * @param {!Element} unusedElement The element whose distance should be\n   *    retrieved.\n   * @return {number} A numerical distance representing how far the specified\n   *     element is from the user's current position in the document.  The\n   *     absolute magnitude of this number is irrelevant; the relative magnitude\n   *     is used to determine which media elements should be evicted (elements\n   *     furthest from the user's current position in the document are evicted\n   *     from the MediaPool first).\n   */\n  getElementDistance(unusedElement) {}\n\n\n  /**\n   * @return {!Object<!MediaType, number>} The maximum amount of each media\n   *     type to allow within this element.\n   */\n  getMaxMediaElementCounts() {}\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Sources} from './sources';\nimport {isConnectedNode} from '../../../src/dom';\n\n\n\n/**\n * The name for a boolean property on an element indicating whether that element\n * has already been \"blessed\".\n * @const {string}\n */\nexport const ELEMENT_BLESSED_PROPERTY_NAME = '__AMP_MEDIA_IS_BLESSED__';\n\n\n/**\n * CSS class names that should not be removed from an element when swapping it\n * into/out of the DOM.\n * @const {!Array<string>}\n */\nconst PROTECTED_CSS_CLASS_NAMES = [\n  'i-amphtml-pool-media',\n  'i-amphtml-pool-audio',\n  'i-amphtml-pool-video',\n];\n\n\n/**\n * Attribute names that should not be removed from an element when swapping it\n * into/out of the DOM.\n * @const {!Array<string>}\n */\nconst PROTECTED_ATTRIBUTES = [\n  'id',\n  'src',\n  'class',\n  'autoplay',\n];\n\n\n\n/**\n * Determines whether a CSS class name is allowed to be removed or copied from\n * media elements.\n * @param {string} cssClassName The CSS class name name to check.\n * @return {boolean} true, if the specified CSS class name is allowed to be\n *     removed or copied from media elements; false otherwise.\n * @private\n */\nfunction isProtectedCssClassName(cssClassName) {\n  return PROTECTED_CSS_CLASS_NAMES.indexOf(cssClassName) >= 0;\n}\n\n\n/**\n * Determines whether an attribute is allowed to be removed or copied from\n * media elements.\n * @param {string} attributeName The attribute name to check.\n * @return {boolean} true, if the specified attribute is allowed to be removed\n *     or copied from media elements; false otherwise.\n * @private\n */\nfunction isProtectedAttributeName(attributeName) {\n  return PROTECTED_ATTRIBUTES.indexOf(attributeName) >= 0;\n}\n\n\n/**\n * Copies all unprotected CSS classes from fromEl to toEl.\n * @param {!HTMLMediaElement} fromEl The element from which CSS classes should\n *     be copied.\n * @param {!HTMLMediaElement} toEl The element to which CSS classes should be\n *     copied.\n * @private\n */\nfunction copyCssClasses(fromEl, toEl) {\n  // Remove all of the unprotected CSS classes from the toEl.\n  for (let i = toEl.classList.length - 1; i >= 0; i--) {\n    const cssClass = toEl.classList.item(i);\n    if (!isProtectedCssClassName(cssClass)) {\n      toEl.classList.remove(cssClass);\n    }\n  }\n\n  // Copy all of the unprotected CSS classes from the fromEl to the toEl.\n  for (let i = 0; i < fromEl.classList.length; i++) {\n    const cssClass = fromEl.classList.item(i);\n    if (!isProtectedCssClassName(cssClass)) {\n      toEl.classList.add(cssClass);\n    }\n  }\n}\n\n\n/**\n * Copies all unprotected attributes from fromEl to toEl.\n * @param {!HTMLMediaElement} fromEl The element from which attributes should\n *     be copied.\n * @param {!HTMLMediaElement} toEl The element to which attributes should be\n *     copied.\n * @private\n */\nfunction copyAttributes(fromEl, toEl) {\n  const fromAttributes = fromEl.attributes;\n  const toAttributes = toEl.attributes;\n\n  // Remove all of the unprotected attributes from the toEl.\n  for (let i = toAttributes.length - 1; i >= 0; i--) {\n    const attributeName = toAttributes[i].name;\n    if (!isProtectedAttributeName(attributeName)) {\n      toEl.removeAttribute(attributeName);\n    }\n  }\n\n  // Copy all of the unprotected attributes from the fromEl to the toEl.\n  for (let i = 0; i < fromAttributes.length; i++) {\n    const attributeName = fromAttributes[i].name;\n    const attributeValue = fromAttributes[i].value;\n    if (!isProtectedAttributeName(attributeName)) {\n      toEl.setAttribute(attributeName, attributeValue);\n    }\n  }\n}\n\n\n\n/**\n * Base class for tasks executed in order on HTMLMediaElements.\n */\nexport class MediaTask {\n  constructor(name) {\n    /** @private @const {string} */\n    this.name_ = name;\n\n    /** @private {?function()} */\n    this.resolve_ = null;\n\n    /** @private {?function(*)} */\n    this.reject_ = null;\n\n    /** @private @const {!Promise} */\n    this.completionPromise_ = new Promise((resolve, reject) => {\n      this.resolve_ = resolve;\n      this.reject_ = reject;\n    });\n  }\n\n  /**\n   * @return {string} The name of this task.\n   */\n  getName() {\n    return this.name_;\n  }\n\n  /**\n   * @return {!Promise<*>} A promise that is resolved when the task has\n   *     completed execution.\n   */\n  whenComplete() {\n    return this.completionPromise_;\n  }\n\n  /**\n   * @param {!HTMLMediaElement} mediaEl The media element on which this task\n   *     should be executed.\n   * @return {!Promise} A promise that is resolved when the task has completed\n   *     execution.\n   */\n  execute(mediaEl) {\n    return this.executeInternal(mediaEl)\n        .then(this.resolve_, this.reject_);\n  }\n\n  /**\n   * @param {!HTMLMediaElement} unusedMediaEl The media element on which this\n   *     task should be executed.\n   * @protected\n   */\n  executeInternal(unusedMediaEl) {\n    return Promise.resolve();\n  }\n\n  /**\n   * @return {boolean} true, if this task must be executed synchronously, e.g.\n   *    if it requires a user gesture.\n   */\n  requiresSynchronousExecution() {\n    return false;\n  }\n\n  /**\n   * @param {*} reason The reason for failing the task.\n   * @protected\n   */\n  failTask(reason) {\n    this.reject_(reason);\n  }\n}\n\n\n/**\n * Plays the specified media element.\n */\nexport class PlayTask extends MediaTask {\n  constructor() {\n    super('play');\n  }\n\n  /** @override */\n  executeInternal(mediaEl) {\n    if (!mediaEl.paused) {\n      // We do not want to invoke play() if the media element is already\n      // playing, as this can interrupt playback in some browsers.\n      return Promise.resolve();\n    }\n\n    // The play() invocation is wrapped in a Promise.resolve(...) due to the\n    // fact that some browsers return a promise from media elements' play()\n    // function, while others return a boolean.\n    return Promise.resolve(mediaEl.play());\n  }\n}\n\n\n/**\n * Pauses the specified media element.\n */\nexport class PauseTask extends MediaTask {\n  constructor() {\n    super('pause');\n  }\n\n  /** @override */\n  executeInternal(mediaEl) {\n    mediaEl.pause();\n    return Promise.resolve();\n  }\n}\n\n\n/**\n * Unmutes the specified media element.\n */\nexport class UnmuteTask extends MediaTask {\n  constructor() {\n    super('unmute');\n  }\n\n  /** @override */\n  executeInternal(mediaEl) {\n    mediaEl.muted = false;\n    mediaEl.removeAttribute('muted');\n    return Promise.resolve();\n  }\n}\n\n\n/**\n * Mutes the specified media element.\n */\nexport class MuteTask extends MediaTask {\n  constructor() {\n    super('mute');\n  }\n\n  /** @override */\n  executeInternal(mediaEl) {\n    mediaEl.muted = true;\n    mediaEl.setAttribute('muted', '');\n    return Promise.resolve();\n  }\n}\n\n\n/**\n * Seeks the specified media element to the beginning.\n */\nexport class RewindTask extends MediaTask {\n  constructor() {\n    super('rewind');\n  }\n\n  /** @override */\n  executeInternal(mediaEl) {\n    mediaEl.currentTime = 0;\n    return Promise.resolve();\n  }\n}\n\n\n/**\n * Loads the specified media element.\n */\nexport class LoadTask extends MediaTask {\n  constructor() {\n    super('load');\n  }\n\n  /** @override */\n  executeInternal(mediaEl) {\n    mediaEl.load();\n    return Promise.resolve();\n  }\n}\n\n\n/**\n * \"Blesses\" the specified media element for future playback without a user\n * gesture.  In order for this to bless the media element, this function must\n * be invoked in response to a user gesture.\n */\nexport class BlessTask extends MediaTask {\n  constructor() {\n    super('bless');\n  }\n\n  /** @override */\n  requiresSynchronousExecution() {\n    return true;\n  }\n\n  /** @override */\n  executeInternal(mediaEl) {\n    const isMuted = mediaEl.muted;\n    mediaEl.muted = false;\n    if (isMuted) {\n      mediaEl.muted = true;\n    }\n    return Promise.resolve();\n  }\n}\n\n\n/**\n * Updates the sources of the specified media element.\n */\nexport class UpdateSourcesTask extends MediaTask {\n  /**\n   * @param {!Sources} newSources The sources to which the media element should\n   *     be updated.\n   * @param {!../../../src/service/vsync-impl.Vsync} vsync\n   */\n  constructor(newSources, vsync) {\n    super('update-src');\n\n    /** @private @const {!Sources} */\n    this.newSources_ = newSources;\n\n    /** @private @const {!../../../src/service/vsync-impl.Vsync} */\n    this.vsync_ = vsync;\n  }\n\n  /** @override */\n  executeInternal(mediaEl) {\n    Sources.removeFrom(mediaEl);\n    this.newSources_.applyToElement(mediaEl);\n    return Promise.resolve();\n  }\n}\n\n\n/**\n * Swaps a media element into the DOM, in the place of another media element.\n */\nexport class SwapIntoDomTask extends MediaTask {\n  /**\n   * @param {!HTMLMediaElement} replacedMediaEl The element to be replaced by\n   *     the media element on which this task is executed.\n   * @param {!../../../src/service/vsync-impl.Vsync} vsync\n   */\n  constructor(replacedMediaEl, vsync) {\n    super('swap-into-dom');\n\n    /** @private @const {!HTMLMediaElement} */\n    this.replacedMediaEl_ = replacedMediaEl;\n\n    /** @private @const {!../../../src/service/vsync-impl.Vsync} */\n    this.vsync_ = vsync;\n  }\n\n  /** @override */\n  executeInternal(mediaEl) {\n    if (!isConnectedNode(this.replacedMediaEl_)) {\n      this.failTask('Cannot swap media for element that is not in DOM.');\n      return Promise.resolve();\n    }\n\n    copyCssClasses(this.replacedMediaEl_, mediaEl);\n    copyAttributes(this.replacedMediaEl_, mediaEl);\n    this.replacedMediaEl_.parentElement\n        .replaceChild(mediaEl, this.replacedMediaEl_);\n    return Promise.resolve();\n  }\n}\n\n\n/**\n * Swaps a media element out the DOM, in the place of a placeholder media\n * element.\n */\nexport class SwapOutOfDomTask extends MediaTask {\n  /**\n   * @param {!HTMLMediaElement} placeholderMediaEl The element to be replaced by\n   *     the media element on which this task is executed.\n   * @param {!../../../src/service/vsync-impl.Vsync} vsync\n   */\n  constructor(placeholderMediaEl, vsync) {\n    super('swap-out-of-dom');\n\n    /** @private @const {!HTMLMediaElement} */\n    this.placeholderMediaEl_ = placeholderMediaEl;\n\n    /** @private @const {!../../../src/service/vsync-impl.Vsync} */\n    this.vsync_ = vsync;\n  }\n\n  /** @override */\n  executeInternal(mediaEl) {\n    copyCssClasses(mediaEl, this.placeholderMediaEl_);\n    copyAttributes(mediaEl, this.placeholderMediaEl_);\n    mediaEl.parentElement.replaceChild(this.placeholderMediaEl_, mediaEl);\n    return Promise.resolve();\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {EventType} from './events';\nimport {Observable} from '../../../src/observable';\n\n\n/**\n * Types of state changes that can be consumed.\n * @enum {number}\n */\nexport const StateChangeType = {\n  ACTIVE_PAGE: 0,\n  BOOKEND_ENTER: 1,\n  BOOKEND_EXIT: 2,\n  END: 3,\n};\n\n\n/** @typedef {{type: !StateChangeType, value: *}} */\nexport let StateChangeEventDef;\n\n\n/**\n * State store to decouple navigation changes from consumers.\n */\nexport class NavigationState {\n  /**\n   * @param {!Element} storyElement\n   * @param {function():Promise<boolean>} hasBookend\n   */\n  constructor(storyElement, hasBookend) {\n    /** @private @const {!function():Promise<boolean>} */\n    this.hasBookend_ = hasBookend;\n\n    /** @private {!Observable<StateChangeEventDef>} */\n    this.observable_ = new Observable();\n\n    this.attachEvents_(storyElement);\n  }\n\n  /**\n   * @param {!Element} storyElement\n   * @private\n   */\n  attachEvents_(storyElement) {\n    storyElement.addEventListener(EventType.SHOW_BOOKEND, () => {\n      this.fire_(StateChangeType.BOOKEND_ENTER);\n      this.fire_(StateChangeType.END);\n    });\n\n    storyElement.addEventListener(EventType.CLOSE_BOOKEND, () => {\n      this.fire_(StateChangeType.BOOKEND_EXIT);\n    });\n  }\n\n  /** @param {function(!StateChangeEventDef):void} stateChangeFn */\n  observe(stateChangeFn) {\n    this.observable_.add(stateChangeFn);\n  }\n\n  /**\n   * @param {number} pageIndex\n   * @param {number} totalPages\n   * @param {string=} opt_pageId\n   */\n  // TODO(alanorozco): pass whether change was automatic or on user action\n  updateActivePage(pageIndex, totalPages, opt_pageId) {\n    const changeValue = {pageIndex, totalPages};\n\n    if (opt_pageId) {\n      changeValue.pageId = opt_pageId;\n    }\n\n    this.fire_(StateChangeType.ACTIVE_PAGE, changeValue);\n\n    if (pageIndex >= totalPages - 1) {\n      this.hasBookend_().then(hasBookend => {\n        if (!hasBookend) {\n          this.fire_(StateChangeType.END);\n        }\n      });\n    }\n  }\n\n  /**\n   * @param {!StateChangeType} type\n   * @param {*=} opt_changeValue\n   */\n  fire_(type, opt_changeValue) {\n    this.observable_.fire({type, value: opt_changeValue});\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A whitelist of djb2a hashes of publisher origins.\n * @const {!Array<string>}\n */\nexport const ORIGIN_WHITELIST = [\n  '1006163429',\n  '1008162951',\n  '10089108',\n  '101608808',\n  '1019348494',\n  '1024745460',\n  '1025683127',\n  '1040387537',\n  '1042067194',\n  '1048639639',\n  '1048768124',\n  '1055309246',\n  '1061774354',\n  '1066656902',\n  '1080553171',\n  '1081382723',\n  '1085278050',\n  '1087738722',\n  '1097876642',\n  '1098115586',\n  '1120549175',\n  '1122637707',\n  '1123796379',\n  '1137284944',\n  '1148058575',\n  '1158106191',\n  '1162517776',\n  '1167928101',\n  '1172399292',\n  '1180555863',\n  '1182996899',\n  '1191530385',\n  '1193086302',\n  '1203629527',\n  '1206202368',\n  '1209396307',\n  '1210508580',\n  '1212905960',\n  '1219663970',\n  '1221946827',\n  '1224563123',\n  '1224575240',\n  '122776143',\n  '1235870422',\n  '1239612924',\n  '1266686880',\n  '1267058499',\n  '1275112483',\n  '1279420495',\n  '1291285285',\n  '129196458',\n  '1296373605',\n  '1304908597',\n  '1314122247',\n  '1323716407',\n  '1331021272',\n  '1337085136',\n  '1343032467',\n  '1348111506',\n  '1358036688',\n  '1358275160',\n  '1362700107',\n  '1366298771',\n  '136948846',\n  '1370863654',\n  '1384161523',\n  '1384885545',\n  '1390195319',\n  '1390422041',\n  '1392973808',\n  '1403015859',\n  '1408213495',\n  '1409815047',\n  '1416203172',\n  '1416336576',\n  '1420964370',\n  '1424038674',\n  '1426205130',\n  '142793127',\n  '1429768323',\n  '1433535079',\n  '1436589466',\n  '1451865411',\n  '1452555948',\n  '1452631355',\n  '1454471704',\n  '1456452353',\n  '1462086116',\n  '1463873379',\n  '1472537769',\n  '1474107485',\n  '1476740172',\n  '1491204959',\n  '1502183300',\n  '1502183303',\n  '1506356073',\n  '1510693494',\n  '1512200976',\n  '1515192136',\n  '1516044894',\n  '1527955987',\n  '1531622827',\n  '1542113246',\n  '1542890108',\n  '1544071036',\n  '1544904918',\n  '154680092',\n  '1548043628',\n  '1551216225',\n  '1554302139',\n  '1560556568',\n  '156105329',\n  '1565761663',\n  '1568645882',\n  '1574632236',\n  '1587531568',\n  '1597805481',\n  '1604714840',\n  '1605964375',\n  '1606771939',\n  '1606845272',\n  '1628432066',\n  '1629009934',\n  '1633699767',\n  '1638733129',\n  '1639295851',\n  '1639843601',\n  '1641361303',\n  '1641755208',\n  '1645367571',\n  '1651834381',\n  '165218748',\n  '1657655384',\n  '166080441',\n  '166550074',\n  '167065142',\n  '167457365',\n  '1692205821',\n  '172062822',\n  '1727000213',\n  '1729406438',\n  '1734343726',\n  '1750274567',\n  '1752199172',\n  '1758506884',\n  '176099546',\n  '1762075722',\n  '1762779619',\n  '1765761661',\n  '1766408482',\n  '1778814731',\n  '1786821707',\n  '1790421447',\n  '1793364122',\n  '1796631487',\n  '179954814',\n  '1814333326',\n  '1820719129',\n  '1828302437',\n  '1831449632',\n  '1844097179',\n  '1857703569',\n  '1862429134',\n  '1866288580',\n  '1868825623',\n  '1873175698',\n  '1878840548',\n  '188153886',\n  '1885949806',\n  '1890684493',\n  '1891136033',\n  '1897877027',\n  '190058212',\n  '1911273138',\n  '19233369',\n  '1924394550',\n  '1926444709',\n  '192946894',\n  '1932332195',\n  '1934543421',\n  '1944707380',\n  '1948987049',\n  '1958476175',\n  '1960309827',\n  '1960384540',\n  '197478601',\n  '1980609434',\n  '198514785',\n  '2003114268',\n  '2025148527',\n  '2025653254',\n  '2034674542',\n  '2038626037',\n  '2038733725',\n  '2050218658',\n  '2051204756',\n  '2052997999',\n  '2062991370',\n  '2064945552',\n  '2072157691',\n  '2076974480',\n  '208348204',\n  '2109740133',\n  '2114974219',\n  '2116825342',\n  '2118239665',\n  '2124375454',\n  '2126860507',\n  '212690086',\n  '2128662947',\n  '2131418359',\n  '2134891083',\n  '2138194233',\n  '2139925877',\n  '2150296095',\n  '2151200413',\n  '2160997979',\n  '2163333100',\n  '2164891421',\n  '2183916165',\n  '2185544172',\n  '2199838184',\n  '220103233',\n  '220632861',\n  '2207832807',\n  '2214432888',\n  '2221548842',\n  '2231215830',\n  '2232562594',\n  '2236849121',\n  '2246978037',\n  '2247419316',\n  '2250390055',\n  '2250762825',\n  '2252559194',\n  '2254619785',\n  '2271213671',\n  '2277458929',\n  '2278516260',\n  '2284332078',\n  '2299758819',\n  '2311290044',\n  '2325333010',\n  '2326328585',\n  '2342924379',\n  '2360854839',\n  '2362191459',\n  '2373437534',\n  '2374338088',\n  '2375389254',\n  '2388222966',\n  '2393754227',\n  '2406112565',\n  '2413038656',\n  '2414533450',\n  '241505564',\n  '2422198952',\n  '2426360694',\n  '2427371871',\n  '2428857403',\n  '2434633986',\n  '2438549543',\n  '2450881433',\n  '2451485116',\n  '2465244303',\n  '2471412274',\n  '2472591333',\n  '2479885882',\n  '2483800093',\n  '2486258543',\n  '2487828098',\n  '2491279653',\n  '2497925282',\n  '2498415300',\n  '2500743291',\n  '25024500',\n  '250464294',\n  '2512768819',\n  '2514009950',\n  '2514987571',\n  '2517493756',\n  '251839354',\n  '25231870',\n  '2529138038',\n  '2529319010',\n  '255752794',\n  '2563128128',\n  '2569424332',\n  '2580152873',\n  '2587850265',\n  '2588277885',\n  '2600368355',\n  '2602595202',\n  '2606715995',\n  '2612967453',\n  '2613072379',\n  '2616846056',\n  '2619537797',\n  '2627761745',\n  '2629810525',\n  '2632194804',\n  '2635588792',\n  '2636391541',\n  '2637085339',\n  '2652634921',\n  '2662207691',\n  '2671290557',\n  '2672599929',\n  '2688673784',\n  '2690235168',\n  '2705736432',\n  '270580042',\n  '2713112922',\n  '2718273594',\n  '2718446350',\n  '2720496885',\n  '2723434276',\n  '2725145135',\n  '2732398879',\n  '273580543',\n  '2738155690',\n  '2741673809',\n  '2749835187',\n  '2754997109',\n  '2759976952',\n  '2761508292',\n  '2762302648',\n  '2766754689',\n  '2771839729',\n  '2774175302',\n  '2784479860',\n  '2787853368',\n  '2795182078',\n  '2797839121',\n  '2797844367',\n  '2798104093',\n  '2812672743',\n  '2820864954',\n  '2825564215',\n  '2830660705',\n  '2835331287',\n  '283661147',\n  '2845803411',\n  '2852627326',\n  '2861134475',\n  '2866448207',\n  '2866470331',\n  '2872980659',\n  '288246341',\n  '2887960156',\n  '2893467144',\n  '2893590542',\n  '2911378586',\n  '2914243153',\n  '2917909858',\n  '2919447987',\n  '2927763036',\n  '2930531110',\n  '2930818498',\n  '2933287666',\n  '2933678691',\n  '2934412348',\n  '2939338957',\n  '2941207893',\n  '294281365',\n  '294281662',\n  '296084766',\n  '2972849537',\n  '3003621454',\n  '3018496372',\n  '3018644774',\n  '3022092377',\n  '302251478',\n  '3024284791',\n  '3028558767',\n  '3034807703',\n  '3036809290',\n  '303732921',\n  '3040972817',\n  '3060985947',\n  '3063651839',\n  '3075313860',\n  '3090399922',\n  '3092172140',\n  '3108333779',\n  '3109674920',\n  '3121167307',\n  '3129729985',\n  '3132507840',\n  '3133369938',\n  '3144086645',\n  '3144741080',\n  '3153172095',\n  '3156001180',\n  '3162265419',\n  '3172876126',\n  '3181090214',\n  '3185535902',\n  '3188249139',\n  '3189406311',\n  '3201739013',\n  '3208039641',\n  '3213623864',\n  '3216947982',\n  '3226517851',\n  '3240528713',\n  '3244251087',\n  '3250723869',\n  '3252080663',\n  '3256754508',\n  '3259979025',\n  '3261687030',\n  '3263349802',\n  '3268659322',\n  '3271330177',\n  '3283747143',\n  '3284374556',\n  '3285310371',\n  '32924227',\n  '3295776646',\n  '3301018689',\n  '3301688194',\n  '3307671928',\n  '3308888367',\n  '3309952347',\n  '3319768647',\n  '3320829318',\n  '3322156041',\n  '3326846086',\n  '3341054457',\n  '3349409886',\n  '3353312560',\n  '3355368229',\n  '3355865416',\n  '335855777',\n  '335993804',\n  '3361466716',\n  '3362397554',\n  '3367171293',\n  '3376790055',\n  '3377688480',\n  '3381390900',\n  '3385268402',\n  '3385846727',\n  '338844244',\n  '3390751743',\n  '3394315494',\n  '3402978750',\n  '3408249191',\n  '3416831537',\n  '3422087589',\n  '3424311896',\n  '3429649351',\n  '3436742277',\n  '3446215673',\n  '3448620799',\n  '3450221390',\n  '3451824873',\n  '3455711044',\n  '3458310975',\n  '3464002149',\n  '3473901382',\n  '3494887100',\n  '3498056818',\n  '3500123957',\n  '3501893757',\n  '351733085',\n  '35263365',\n  '353380306',\n  '3535681127',\n  '354082441',\n  '3550596029',\n  '3551433075',\n  '3552657708',\n  '3561349461',\n  '3568064118',\n  '3572504894',\n  '3574354948',\n  '3584992110',\n  '3585356855',\n  '3589838638',\n  '3591084947',\n  '3591311390',\n  '3594356251',\n  '3607050633',\n  '3623074634',\n  '3635562717',\n  '363894702',\n  '365125059',\n  '3652728877',\n  '3655120568',\n  '365605518',\n  '3656736643',\n  '3657625030',\n  '3662429216',\n  '3670522374',\n  '3673866953',\n  '3685844947',\n  '3692367215',\n  '3695202375',\n  '369644343',\n  '3700425047',\n  '3700982698',\n  '3711744991',\n  '3712090763',\n  '3718288426',\n  '3739222329',\n  '3739723588',\n  '3741803823',\n  '3742076373',\n  '3743398870',\n  '3747063085',\n  '3768651282',\n  '3774834930',\n  '3782187505',\n  '3785031815',\n  '3802272349',\n  '3803427289',\n  '3808515023',\n  '3817759242',\n  '3821795909',\n  '3828921363',\n  '382915004',\n  '3835330948',\n  '3835931824',\n  '3838983789',\n  '3841844405',\n  '3842213279',\n  '3866956400',\n  '3867683259',\n  '3882775575',\n  '3887937944',\n  '3902596111',\n  '3907965689',\n  '3916735828',\n  '3919621757',\n  '3926983707',\n  '3931371606',\n  '3935672072',\n  '3942169396',\n  '39435537',\n  '3952253013',\n  '3952985875',\n  '3960376034',\n  '3964022265',\n  '3969333164',\n  '3980734000',\n  '3984648422',\n  '399163616',\n  '4011166599',\n  '4012569232',\n  '4015960781',\n  '402077837',\n  '4022635071',\n  '4031427958',\n  '4038419154',\n  '4038719404',\n  '4040963526',\n  '4045001232',\n  '4045348626',\n  '4047076163',\n  '4050194446',\n  '4051110478',\n  '4053566461',\n  '4062202631',\n  '4064403033',\n  '4067292809',\n  '4071169494',\n  '4072394641',\n  '4083044353',\n  '4084194935',\n  '4092369519',\n  '4092664937',\n  '4096098894',\n  '4097039999',\n  '4098138342',\n  '4102232185',\n  '410737467',\n  '4118683051',\n  '4127212193',\n  '4127351496',\n  '4129698325',\n  '4130370977',\n  '4136314176',\n  '4137746800',\n  '4138310485',\n  '4138748709',\n  '4139415765',\n  '4140762491',\n  '414191242',\n  '4143625838',\n  '4158727075',\n  '4162923732',\n  '4165850368',\n  '4166688207',\n  '4171920376',\n  '4177803870',\n  '4189681769',\n  '4190697962',\n  '4195946149',\n  '4199121874',\n  '4200069764',\n  '4205027822',\n  '4205379393',\n  '4206479264',\n  '4214687327',\n  '4220526267',\n  '4236710113',\n  '4237053731',\n  '4237182114',\n  '4237691393',\n  '4248203292',\n  '4249223952',\n  '4265092200',\n  '4269692612',\n  '4273375831',\n  '4278046063',\n  '4279918903',\n  '4286009170',\n  '431449824',\n  '436035672',\n  '436895478',\n  '446783407',\n  '455553168',\n  '468972428',\n  '473408210',\n  '475325125',\n  '481608910',\n  '497560025',\n  '508331528',\n  '509801075',\n  '524581881',\n  '525657889',\n  '535848262',\n  '552831033',\n  '56119367',\n  '589348565',\n  '590180088',\n  '590449081',\n  '605645428',\n  '607649949',\n  '613252162',\n  '616398681',\n  '616652136',\n  '620434036',\n  '628256541',\n  '630124302',\n  '637590687',\n  '646925241',\n  '649068147',\n  '664849843',\n  '666552315',\n  '667802223',\n  '673490260',\n  '675617839',\n  '676286387',\n  '679226261',\n  '681317506',\n  '684496063',\n  '687924735',\n  '690204840',\n  '699169033',\n  '699554795',\n  '699835401',\n  '708478954',\n  '709875223',\n  '721006546',\n  '722659024',\n  '740460396',\n  '750731789',\n  '759835262',\n  '760645918',\n  '76243793',\n  '763580606',\n  '764546410',\n  '770400223',\n  '773697188',\n  '777846327',\n  '779185847',\n  '781950191',\n  '785278645',\n  '791888271',\n  '793360597',\n  '795111685',\n  '799038630',\n  '802940860',\n  '803626326',\n  '805461297',\n  '809525143',\n  '812914966',\n  '817596813',\n  '826702818',\n  '829747121',\n  '830059440',\n  '834917366',\n  '836634675',\n  '840748945',\n  '845690173',\n  '851918419',\n  '853535426',\n  '855882027',\n  '865387614',\n  '870075114',\n  '878041739',\n  '884037848',\n  '884942273',\n  '885000263',\n  '886030867',\n  '887992794',\n  '9021761',\n  '904920502',\n  '90677328',\n  '907695148',\n  '911963500',\n  '919166850',\n  '926902921',\n  '92732745',\n  '92829579',\n  '93038994',\n  '932642421',\n  '932940871',\n  '938755445',\n  '947303209',\n  '956771599',\n  '958749034',\n  '959889676',\n  '960466505',\n  '962380673',\n  '965728075',\n  '973612916',\n  '976603789',\n  '978364597',\n  '9851868',\n  '986539863',\n  '989444878',\n  '990312922',\n];\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Services} from '../../../src/services';\nimport {VideoEvents} from '../../../src/video-interface';\nimport {closest, escapeCssSelectorIdent} from '../../../src/dom';\nimport {dev, user} from '../../../src/log';\nimport {hasTapAction, timeStrToMillis} from './utils';\nimport {listenOnce} from '../../../src/event-helper';\nimport {map} from '../../../src/utils/object';\n\n\n/** @private @const {number} */\nconst NEXT_SCREEN_AREA_RATIO = 0.75;\n\n/** @const {number} */\nexport const POLL_INTERVAL_MS = 300;\n\n/** @const @enum */\nexport const TapNavigationDirection = {\n  'NEXT': 1,\n  'PREVIOUS': 2,\n};\n\n/**\n * Base class for the AdvancementConfig.  By default, does nothing other than\n * tracking its internal state when started/stopped, and listeners will never be\n * invoked.\n */\nexport class AdvancementConfig {\n  constructor() {\n    /** @private @const {!Array<function(number)>} */\n    this.progressListeners_ = [];\n\n    /** @private @const {!Array<function()>} */\n    this.advanceListeners_ = [];\n\n    /** @private @const {!Array<function()>} */\n    this.previousListeners_ = [];\n\n    /** @private @const {!Array<function(number)>} */\n    this.tapNavigationListeners_ = [];\n\n    /** @private {boolean} */\n    this.isRunning_ = false;\n  }\n\n  /**\n   * @param {function(number)} progressListener A function that handles when the\n   *     progress of the current page has been updated.  It accepts a number\n   *     between 0.0 and 1.0 as its only argument, that represents the current\n   *     progress.\n   */\n  addProgressListener(progressListener) {\n    this.progressListeners_.push(progressListener);\n  }\n\n  /**\n   * @param {function()} advanceListener A function that handles when a\n   *     page should be advanced.\n   */\n  addAdvanceListener(advanceListener) {\n    this.advanceListeners_.push(advanceListener);\n  }\n\n  /**\n   * @param {function()} previousListener A function that handles when a\n   *     page should go back to the previous page.\n   */\n  addPreviousListener(previousListener) {\n    this.previousListeners_.push(previousListener);\n  }\n\n  /**\n   * @param {function(number)} onTapNavigationListener A function that handles when a\n   * navigation listener to be fired.\n   */\n  addOnTapNavigationListener(onTapNavigationListener) {\n    this.tapNavigationListeners_.push(onTapNavigationListener);\n  }\n\n  /**\n   * Invoked when the advancement configuration should begin taking effect.\n   */\n  start() {\n    this.isRunning_ = true;\n  }\n\n  /**\n   * Invoked when the advancement configuration should cease taking effect.\n   */\n  stop() {\n    this.isRunning_ = false;\n  }\n\n  /**\n   * @return {boolean}\n   * @protected\n   */\n  isRunning() {\n    return this.isRunning_;\n  }\n\n  /**\n   * @return {number}\n   * @protected\n   */\n  getProgress() {\n    return 1;\n  }\n\n  /** @protected */\n  onProgressUpdate() {\n    const progress = this.getProgress();\n    this.progressListeners_.forEach(progressListener => {\n      progressListener(progress);\n    });\n  }\n\n  /** @protected */\n  onAdvance() {\n    this.advanceListeners_.forEach(advanceListener => {\n      advanceListener();\n    });\n  }\n\n  /** @protected */\n  onPrevious() {\n    this.previousListeners_.forEach(previousListener => {\n      previousListener();\n    });\n  }\n\n  /**\n   * @param {number} navigationDirection Direction of navigation\n   * @protected\n   */\n  onTapNavigation(navigationDirection) {\n    this.tapNavigationListeners_.forEach(navigationListener => {\n      navigationListener(navigationDirection);\n    });\n  }\n\n  /**\n   * Provides an AdvancementConfig object for the specified amp-story-page.\n   * @param {!./amp-story-page.AmpStoryPage} page\n   * @return {!AdvancementConfig}\n   */\n  static forPage(page) {\n    const rootEl = page.element;\n    const win = rootEl.ownerDocument.defaultView;\n    const autoAdvanceStr = rootEl.getAttribute('auto-advance-after');\n\n    const supportedAdvancementModes = [\n      new ManualAdvancement(rootEl),\n      TimeBasedAdvancement.fromAutoAdvanceString(autoAdvanceStr, win),\n      MediaBasedAdvancement.fromAutoAdvanceString(autoAdvanceStr, win, rootEl),\n    ].filter(x => x !== null);\n\n    if (supportedAdvancementModes.length === 0) {\n      return new AdvancementConfig();\n    }\n\n    if (supportedAdvancementModes.length === 1) {\n      return supportedAdvancementModes[0];\n    }\n\n    return new MultipleAdvancementConfig(supportedAdvancementModes);\n  }\n}\n\n\n/**\n * An AdvancementConfig implementation that composes multiple other\n * AdvancementConfig implementations by simply delegating all of its calls to\n * an array of underlying advancement modes.\n */\nclass MultipleAdvancementConfig extends AdvancementConfig {\n  /**\n   * @param {!Array<!AdvancementConfig>} advancementModes A list of\n   *     AdvancementConfigs to which all calls should be delegated.\n   */\n  constructor(advancementModes) {\n    super();\n\n    /** @private @const {!Array<!AdvancementConfig>} */\n    this.advancementModes_ = advancementModes;\n  }\n\n  /** @override */\n  addProgressListener(progressListener) {\n    this.advancementModes_.forEach(advancementMode => {\n      advancementMode.addProgressListener(progressListener);\n    });\n  }\n\n  /** @override */\n  addOnTapNavigationListener(onTapNavigationListener) {\n    this.advancementModes_.forEach(advancementMode => {\n      advancementMode.addOnTapNavigationListener(onTapNavigationListener);\n    });\n  }\n\n  /** @override */\n  addAdvanceListener(advanceListener) {\n    this.advancementModes_.forEach(advancementMode => {\n      advancementMode.addAdvanceListener(advanceListener);\n    });\n  }\n\n  /** @override */\n  addPreviousListener(previousListener) {\n    this.advancementModes_.forEach(advancementMode => {\n      advancementMode.addPreviousListener(previousListener);\n    });\n  }\n\n  /** @override */\n  start() {\n    super.start();\n    this.advancementModes_.forEach(advancementMode => {\n      advancementMode.start();\n    });\n  }\n\n  /** @override */\n  stop() {\n    super.stop();\n    this.advancementModes_.forEach(advancementMode => {\n      advancementMode.stop();\n    });\n  }\n}\n\n\n/**\n * Always provides a progress of 1.0.  Advances when the user taps the rightmost\n * 75% of the screen; triggers the previous listener when the user taps the\n * leftmost 25% of the screen.\n */\nclass ManualAdvancement extends AdvancementConfig {\n  /**\n   * @param {!Element} element The element that, when clicked, can cause\n   *     advancing to the next page or going back to the previous.\n   */\n  constructor(element) {\n    super();\n    this.element_ = element;\n    this.clickListener_ = this.maybePerformNavigation_.bind(this);\n    this.hasAutoAdvanceStr_ = this.element_.getAttribute('auto-advance-after');\n  }\n\n  /** @override */\n  start() {\n    super.start();\n    this.element_.addEventListener('click', this.clickListener_, true);\n    if (!this.hasAutoAdvanceStr_) {\n      super.onProgressUpdate();\n    }\n  }\n\n  /** @override */\n  stop() {\n    super.stop();\n    this.element_.removeEventListener('click', this.clickListener_, true);\n  }\n\n  /** @override */\n  getProgress() {\n    return 1.0;\n  }\n\n  /**\n   * Determines whether a click should be used for navigation.  Navigate should\n   * occur unless the click is on the system layer, or on an element that\n   * defines on=\"tap:...\"\n   * @param {!Event} e 'click' event.\n   * @return {boolean} true, if the click should be used for navigation.\n   * @private\n   */\n  isNavigationalClick_(e) {\n    return !closest(dev().assertElement(e.target), el => {\n      return hasTapAction(el);\n    }, /* opt_stopAt */ this.element_);\n  }\n\n  /**\n   * We want clicks on certain elements to be exempted from normal page navigation\n   * @param {!Event} event\n   * @return {boolean}\n   */\n  isProtectedTarget_(event) {\n    const protectedElements = map({\n      A: true,\n      BUTTON: true,\n    });\n\n    return protectedElements[event.target.tagName] || false;\n  }\n\n\n  /**\n   * Performs a system navigation if it is determined that the specified event\n   * was a click intended for navigation.\n   * @param {!Event} event 'click' event\n   * @private\n   */\n  maybePerformNavigation_(event) {\n    if (!this.isNavigationalClick_(event) || this.isProtectedTarget_(event)) {\n      // If the system doesn't need to handle this click, then we can simply\n      // return and let the event propagate as it would have otherwise.\n      return;\n    }\n\n    event.stopPropagation();\n\n    // TODO(newmuis): This will need to be flipped for RTL.\n    const elRect = this.element_./*OK*/getBoundingClientRect();\n\n    // Using `left` as a fallback since Safari returns a ClientRect in some\n    // cases.\n    const offsetLeft = ('x' in elRect) ? elRect.x : elRect.left;\n    const offsetWidth = elRect.width;\n\n    const nextScreenAreaMin = offsetLeft +\n        ((1 - NEXT_SCREEN_AREA_RATIO) * offsetWidth);\n    const nextScreenAreaMax = offsetLeft + offsetWidth;\n\n    if (event.pageX >= nextScreenAreaMin && event.pageX < nextScreenAreaMax) {\n      this.onTapNavigation(TapNavigationDirection.NEXT);\n    } else if (event.pageX >= offsetLeft && event.pageX < nextScreenAreaMin) {\n      this.onTapNavigation(TapNavigationDirection.PREVIOUS);\n    }\n  }\n}\n\n\n/**\n * Provides progress and advancement based on a fixed duration of time,\n * specified in either seconds or milliseconds.\n */\nclass TimeBasedAdvancement extends AdvancementConfig {\n  /**\n   * @param {!Window} win The Window object.\n   * @param {number} delayMs The duration to wait before advancing.\n   */\n  constructor(win, delayMs) {\n    super();\n\n    /** @private @const {!../../../src/service/timer-impl.Timer} */\n    this.timer_ = Services.timerFor(win);\n\n    /** @private @const {number} */\n    this.delayMs_ = delayMs;\n\n    /** @private {?number} */\n    this.startTimeMs_ = null;\n\n    /** @private {number|string|null} */\n    this.timeoutId_ = null;\n  }\n\n  /**\n   * @return {number} The current timestamp, in milliseconds.\n   * @private\n   */\n  getCurrentTimestampMs_() {\n    return Date.now();\n  }\n\n  /** @override */\n  start() {\n    super.start();\n    this.startTimeMs_ = this.getCurrentTimestampMs_();\n\n    this.timeoutId_ = this.timer_.delay(() => this.onAdvance(), this.delayMs_);\n\n    this.timer_.poll(POLL_INTERVAL_MS, () => {\n      this.onProgressUpdate();\n      return !this.isRunning();\n    });\n  }\n\n  /** @override */\n  stop() {\n    super.stop();\n\n    if (this.timeoutId_ !== null) {\n      this.timer_.cancel(this.timeoutId_);\n    }\n  }\n\n  /** @override */\n  getProgress() {\n    if (this.startTimeMs_ === null) {\n      return 0;\n    }\n\n    const progress =\n        (this.getCurrentTimestampMs_() - this.startTimeMs_) / this.delayMs_;\n\n    return Math.min(Math.max(progress, 0), 1);\n  }\n\n  /**\n   * Gets an instance of TimeBasedAdvancement based on the value of the\n   * auto-advance string (from the 'auto-advance-after' attribute on the page).\n   * @param {string} autoAdvanceStr The value of the auto-advance-after\n   *     attribute.\n   * @return {?AdvancementConfig} An AdvancementConfig, if time-based\n   *     auto-advance is supported for the specified auto-advance string; null\n   *     otherwise.\n   */\n  static fromAutoAdvanceString(autoAdvanceStr, win) {\n    if (!autoAdvanceStr) {\n      return null;\n    }\n\n    const delayMs = timeStrToMillis(autoAdvanceStr);\n    if (delayMs === undefined || isNaN(delayMs)) {\n      return null;\n    }\n\n    return new TimeBasedAdvancement(win, Number(delayMs));\n  }\n}\n\n\n/**\n * Provides progress and advances pages based on the completion percentage of\n * playback of an HTMLMediaElement or a video that implements the AMP\n * video-interface.\n *\n * These are combined into a single AdvancementConfig implementation because we\n * may not know at build time whether a video implements the AMP\n * video-interface, since that is dependent on the amp-video buildCallback\n * having been executed before the amp-story-page buildCallback, which is not\n * guaranteed.\n */\nclass MediaBasedAdvancement extends AdvancementConfig {\n  constructor(win, element) {\n    super();\n\n    /** @private @const {!../../../src/service/timer-impl.Timer} */\n    this.timer_ = Services.timerFor(win);\n\n    /** @private @const {!Element} */\n    this.element_ = element;\n\n    /** @private {?Element} */\n    this.mediaElement_ = null;\n\n    /** @private {?../../../src/video-interface.VideoInterface} */\n    this.video_ = null;\n  }\n\n  /**\n   * Determines whether the element for auto advancement implements the video\n   * interface.\n   * @return {boolean} true, if the specified element implements the video\n   *     interface.\n   * @private\n   */\n  isVideoInterfaceVideo_() {\n    return this.element_.classList.contains('i-amphtml-video-interface');\n  }\n\n  /**\n   * Gets an HTMLMediaElement from an element that wraps it.\n   * @return {?Element} The underlying HTMLMediaElement, if one exists.\n   * @private\n   */\n  getMediaElement_() {\n    const tagName = this.element_.tagName.toLowerCase();\n\n    if (this.element_ instanceof HTMLMediaElement) {\n      return this.element_;\n    } else if (this.element_.hasAttribute('background-audio') &&\n        (tagName === 'amp-story' || tagName === 'amp-story-page')) {\n      return this.element_.querySelector('.i-amphtml-story-background-audio');\n    } else if (tagName === 'amp-audio') {\n      return this.element_.querySelector('audio');\n    }\n\n    return null;\n  }\n\n  /** @override */\n  start() {\n    super.start();\n\n    // Prevents race condition when checking for video interface classname.\n    (this.element_.whenBuilt ? this.element_.whenBuilt() : Promise.resolve())\n        .then(() => this.startWhenBuilt_());\n  }\n\n  /** @private */\n  startWhenBuilt_() {\n    if (this.isVideoInterfaceVideo_()) {\n      this.startVideoInterfaceElement_();\n      return;\n    }\n\n    if (!this.mediaElement_) {\n      this.mediaElement_ = this.getMediaElement_();\n    }\n\n    if (this.mediaElement_) {\n      this.startHtmlMediaElement_();\n      return;\n    }\n\n    user().error('AMP-STORY-PAGE',\n        `Element with ID ${this.element_.id} is not a media element ` +\n        'supported for automatic advancement.');\n  }\n\n  /** @private */\n  startHtmlMediaElement_() {\n    const mediaElement = dev().assertElement(this.mediaElement_,\n        'Media element was unspecified.');\n    listenOnce(mediaElement, 'ended', () => this.onAdvance());\n    listenOnce(mediaElement, 'timeupdate', () => this.onProgressUpdate());\n  }\n\n  /** @private */\n  startVideoInterfaceElement_() {\n    this.element_.getImpl().then(video => {\n      this.video_ = video;\n    });\n\n    listenOnce(this.element_, VideoEvents.ENDED, () => this.onAdvance(),\n        {capture: true});\n\n    this.timer_.poll(POLL_INTERVAL_MS, () => {\n      this.onProgressUpdate();\n      return !this.isRunning();\n    });\n  }\n\n  /** @override */\n  stop() {\n    // We don't need to explicitly stop the polling or media events listed\n    // above, since they are already bound to either the playback of the media\n    // on the page, or the isRunning state of this AdvancementConfig.\n    super.stop();\n  }\n\n  /** @override */\n  getProgress() {\n    if (this.isVideoInterfaceVideo_()) {\n      if (this.video_ && this.video_.getDuration()) {\n        return this.video_.getCurrentTime() / this.video_.getDuration();\n      }\n\n      return 0;\n    }\n\n    if (this.mediaElement_ && this.mediaElement_.duration) {\n      return this.mediaElement_.currentTime / this.mediaElement_.duration;\n    }\n\n    return super.getProgress();\n  }\n\n  /**\n   * Gets an instance of MediaBasedAdvancement based on the value of the\n   * auto-advance string (from the 'auto-advance-after' attribute on the page).\n   * @param {string} autoAdvanceStr The value of the auto-advance-after\n   *     attribute.\n   * @return {?AdvancementConfig} An AdvancementConfig, if media-element-based\n   *     auto-advance is supported for the specified auto-advance string; null\n   *     otherwise.\n   */\n  static fromAutoAdvanceString(autoAdvanceStr, win, rootEl) {\n    try {\n      const element = rootEl.querySelector(`#${\n        escapeCssSelectorIdent(autoAdvanceStr)\n      }`);\n\n      if (!element) {\n        return null;\n      }\n\n      return new MediaBasedAdvancement(win, element);\n    } catch (e) {\n      return null;\n    }\n  }\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Services} from '../../../src/services';\nimport {childElementsByTag, matches} from '../../../src/dom';\nimport {dev, user} from '../../../src/log';\nimport {isExperimentOn} from '../../../src/experiments';\nimport {px, setImportantStyles} from '../../../src/style';\nimport {throttle} from '../../../src/utils/rate-limit';\nimport {toArray, toWin} from '../../../src/types';\nimport {unscaledClientRect} from './utils';\n\n\n/** @private @const {number} */\nconst MIN_LAYER_WIDTH_PX = 380;\n\n\n/** @private @const {number} */\nconst MAX_LAYER_WIDTH_PX = 520;\n\n\n/** @private @const {string} */\nconst SCALING_APPLIED_CLASSNAME = 'i-amphtml-story-scaled';\n\n\n/** @struct @typedef {{factor: number, width: number, height: number}} */\nlet TargetDimensionsDef;\n\n\n/**\n * @struct\n * @typedef {{\n *   relativeWidth: number,\n *   relativeHeight: number,\n *   matrix: ?Array<number>,\n * }}\n */\nlet ScalableDimensionsDef;\n\n\n/**\n * @param {!Element} sizer\n * @return {!TargetDimensionsDef}\n */\nfunction targetDimensionsFor(sizer) {\n  const {width, height} = unscaledClientRect(sizer);\n\n  const ratio = width / height;\n\n  const targetWidth = Math.min(MAX_LAYER_WIDTH_PX,\n      Math.max(width, Math.max(1, ratio) * MIN_LAYER_WIDTH_PX));\n\n  const targetHeight = (targetWidth / ratio);\n\n  const factor = width / targetWidth;\n\n  return {factor, width: targetWidth, height: targetHeight};\n}\n\n\n/**\n * @param {number} factor\n * @param {number} width\n * @param {number} height\n * @param {!Array<number>} matrix\n * @return {!Object<string, *>}\n */\nfunction scaleTransform(factor, width, height, matrix) {\n  // TODO(alanorozco, #12934): Translate values are not correctly calculated if\n  // `scale`, `skew` or `rotate` have been user-defined.\n  const translateX = width * factor / 2 - width / 2;\n  const translateY = height * factor / 2 - height / 2;\n  return [\n    matrix[0] * factor,\n    matrix[1],\n    matrix[2],\n    matrix[3] * factor,\n    matrix[4] + translateX,\n    matrix[5] + translateY,\n  ];\n}\n\n\n/**\n * @param {!Element} page\n * @return {!Array<!Element>}\n */\nfunction scalableElements(page) {\n  return toArray(childElementsByTag(page, 'amp-story-grid-layer'));\n}\n\n\n/**\n * @param {!Element} page\n * @return {boolean}\n */\nfunction isScalingEnabled(page) {\n  // TODO(alanorozco, #12902): Clean up experiment flag.\n  // NOTE(alanorozco): Experiment flag is temporary. No need to clutter the\n  // signatures in this function path by adding `win` as a parameter.\n  const win = toWin(page.ownerDocument.defaultView);\n  if (isExperimentOn(win, 'amp-story-scaling')) {\n    return true;\n  }\n  return page.getAttribute('scaling') == 'relative';\n}\n\n\n/**\n * @param {!Element} page\n * @return {boolean}\n */\nfunction isScalingApplied(page) {\n  return page.classList.contains(SCALING_APPLIED_CLASSNAME);\n}\n\n\n/**\n * @param {!Element} page\n * @param {boolean} isApplied\n */\nfunction markScalingApplied(page, isApplied = true) {\n  page.classList.toggle(SCALING_APPLIED_CLASSNAME, isApplied);\n}\n\n\n/**\n * Required for lazy evaluation after resize.\n * @param {!Element} page\n * @return {boolean}\n */\nfunction withinRange(page) {\n  return matches(page, '[active], [distance=\"1\"], [desktop] > [distance=\"2\"]');\n}\n\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isCssZoomSupported(win) {\n  // IE supports `zoom`, but not `CSS.supports`.\n  return Services.platformFor(win).isIe() || win.CSS.supports('zoom', '1');\n}\n\n\n/**\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isCssCustomPropsSupported(win) {\n  return !Services.platformFor(win).isIe() && win.CSS.supports('(--foo: red)');\n}\n\n\n/** @private {?PageScalingService} */\nlet pageScalingService = null;\n\n\n/**\n * Service for scaling pages dynamically so their layers will be sized within a\n * certain pixel range independent of visual dimensions.\n */\n// TODO(alanorozco): Make this part of the runtime layout system to prevent\n// FOUC-like jump and allow for SSR.\nexport class PageScalingService {\n  /**\n   * @param {!Window} win\n   * @param {!Element} rootEl\n   */\n  constructor(win, rootEl) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!Element} */\n    this.rootEl_ = rootEl;\n\n    /** @private @const */\n    this.vsync_ = Services.vsyncFor(win);\n\n    /** @private @const {?Element} */\n    // Assumes active page to be determinant of the target size.\n    this.sizer_ = rootEl.querySelector('amp-story-page[active]');\n\n    /** @private {?TargetDimensionsDef} */\n    this.targetDimensions_ = null;\n\n    /** @private {!Object<string, !Array<!ScalableDimensionsDef>>} */\n    this.scalableElsDimensions_ = {};\n\n    Services.viewportForDoc(rootEl).onResize(\n        throttle(win, () => this.onViewportResize_(), 100));\n  }\n\n  /**\n   * @param {!Element} story\n   * @return {!PageScalingService}\n   */\n  static for(story) {\n    // Implemented as singleton for now, should be mapped to story element.\n    // TODO(alanorozco): Implement mapping to support multiple <amp-story>\n    // instances in one doc.\n    const win = toWin(story.ownerDocument.defaultView);\n    if (!pageScalingService) {\n      // TODO(alanorozco, #13064): Falling back to transform on iOS\n      if (!isCssZoomSupported(win) || Services.platformFor(win).isIos()) {\n        // TODO(alanorozco, #12934): Combine transform matrix.\n        user().warn('AMP-STORY',\n            '`amp-story-scaling` using CSS transforms as fallback.',\n            'Any `amp-story-grid-layer` with user-defined CSS transforms will',\n            'break.',\n            'See https://github.com/ampproject/amphtml/issues/12934');\n        pageScalingService = new TransformScalingService(win, story);\n      } else if (isCssCustomPropsSupported(win)) {\n        pageScalingService = new CssPropsZoomScalingService(win, story);\n      } else {\n        pageScalingService = new ZoomScalingService(win, story);\n      }\n    }\n    return pageScalingService;\n  }\n\n  /**\n   * @param {!Element} page\n   * @return {!Promise}\n   */\n  scale(page) {\n    return Promise.resolve(this.scale_(page));\n  }\n\n  /**\n   * @param {!Element} page\n   * @return {!Promise|undefined}\n   * @private\n   */\n  scale_(page) {\n    if (isScalingApplied(page)) {\n      return;\n    }\n    if (!isScalingEnabled(page)) {\n      return;\n    }\n    if (!withinRange(page)) {\n      return;\n    }\n    return this.vsync_.runPromise({\n      measure: state => {\n        state.targetDimensions = this.measureTargetDimensions_();\n        state.scalableElsDimensions = this.getOrMeasureScalableElsFor(page);\n      },\n      mutate: state => {\n        const {targetDimensions, scalableElsDimensions} = state;\n        scalableElements(page).forEach((el, i) => {\n          // `border-box` required since layer now has a width/height set.\n          setImportantStyles(el, {'box-sizing': 'border-box'});\n          setImportantStyles(el,\n              this.scalingStyles(targetDimensions, scalableElsDimensions[i]));\n        });\n        markScalingApplied(page);\n      },\n    }, /* state */ {});\n  }\n\n  /**\n   * @return {!TargetDimensionsDef}\n   * @private\n   */\n  measureTargetDimensions_() {\n    if (!this.targetDimensions_) {\n      const sizer = dev().assertElement(this.sizer_, 'No sizer.');\n      const dimensions = targetDimensionsFor(sizer);\n      this.targetDimensions_ = dimensions;\n      this.updateRootProps(dimensions);\n    }\n    return /** @type {!TargetDimensionsDef} */ (\n      dev().assert(this.targetDimensions_));\n  }\n\n  /**\n   * @param {!Element} page\n   * @return {!Array<!ScalableDimensionsDef>}\n   * @protected\n   */\n  getOrMeasureScalableElsFor(page) {\n    const pageId = user().assert(page.id, 'No page id.');\n\n    if (!this.scalableElsDimensions_[pageId]) {\n      this.scalableElsDimensions_[pageId] = this.measureScalableElsFor(page);\n    }\n\n    return /** @type {!Array<!ScalableDimensionsDef>} */ (\n      dev().assert(this.scalableElsDimensions_[pageId]));\n  }\n\n  /**\n   * Measures scalable elements in a page.\n   * @param {!Element} page\n   * @return {!Array<!ScalableDimensionsDef>}\n   * @protected\n   */\n  measureScalableElsFor(page) {\n    const {width, height} = unscaledClientRect(page);\n    const pageWidth = width;\n    const pageHeight = height;\n    return scalableElements(page).map(el => {\n      const {width, height} = unscaledClientRect(el);\n      return {\n        matrix: this.getTransformMatrix(el),\n        relativeWidth: width / pageWidth,\n        relativeHeight: height / pageHeight,\n      };\n    });\n  }\n\n  /** @private */\n  onViewportResize_() {\n    this.targetDimensions_ = null;\n    this.vsync_.measure(() => {\n      this.measureTargetDimensions_();\n    });\n    this.updatePagesOnResize();\n  }\n\n  /** @protected */\n  scaleAll() {\n    const pages = toArray(childElementsByTag(this.rootEl_, 'amp-story-page'));\n    pages.forEach(page => {\n      markScalingApplied(page, false);\n      this.scale_(page);\n    });\n  }\n\n  /**\n   * Updates properties on root element when target dimensions have been\n   * re-measured.\n   * @param {!TargetDimensionsDef} unusedTargetDimensions\n   */\n  updateRootProps(unusedTargetDimensions) {\n    // Intentionally left blank.\n  }\n\n  /** @protected */\n  updatePagesOnResize() {\n    // Intentionally left blank.\n  }\n\n  /**\n   * Gets an element's transform matrix.\n   * @param {!Element} unusedEl\n   * @return {?Array<number>}\n   */\n  getTransformMatrix(unusedEl) {\n    // Calculating a transform matrix is optional depending on scaling\n    // implementation.\n    return null;\n  }\n\n  /**\n   * @param {!TargetDimensionsDef} unusedTargetDimensions\n   * @param {!ScalableDimensionsDef} unusedScalableElDimensions\n   * @return {!Object<string, *>}\n   * @protected\n   */\n  scalingStyles(unusedTargetDimensions, unusedScalableElDimensions) {\n    dev().assert(false, 'Empty PageScalingService implementation.');\n    return {};\n  }\n}\n\n\n/** Uses CSS zoom as scaling method. */\nclass ZoomScalingService extends PageScalingService {\n  /** @protected */\n  updatePagesOnResize() {\n    this.scaleAll();\n  }\n\n  /** @override */\n  scalingStyles(targetDimensions, elementDimensions) {\n    const {width, height, factor} = targetDimensions;\n    const {relativeWidth, relativeHeight} = elementDimensions;\n    return {\n      'width': px(width * relativeWidth),\n      'height': px(height * relativeHeight),\n      'zoom': factor,\n    };\n  }\n}\n\n\n/** Uses combined CSS transform as scaling method. */\nclass TransformScalingService extends PageScalingService {\n  /** @protected */\n  updatePagesOnResize() {\n    this.scaleAll();\n  }\n\n  /** @override */\n  getTransformMatrix(unusedEl) {\n    // TODO(alanorozco, #12934): Implement.\n    return [1, 0, 0, 1, 0, 0];\n  }\n\n  /** @override */\n  scalingStyles(targetDimensions, elementDimensions) {\n    const {width, height, factor} = targetDimensions;\n    const {relativeWidth, relativeHeight, matrix} = elementDimensions;\n    const initialMatrix = /** @type {!Array<number>} */ (dev().assert(matrix));\n    const transformedMatrix =\n      scaleTransform(factor, width, height, initialMatrix);\n    return {\n      'width': px(width * relativeWidth),\n      'height': px(height * relativeHeight),\n      'transform': `matrix(${transformedMatrix.join()})`,\n    };\n  }\n}\n\n\n/** Uses CSS zoom and custom CSS properties as scaling method. */\nclass CssPropsZoomScalingService extends PageScalingService {\n  /** @override */\n  getOrMeasureScalableElsFor(page) {\n    // Circumvents element dimensions cache as layers are only mutated once.\n    return this.measureScalableElsFor(page);\n  }\n\n  /** @override */\n  updateRootProps() {\n    const {width, height, factor} = this.targetDimensions_;\n    this.vsync_.mutate(() => {\n      this.rootEl_.style.setProperty('--i-amphtml-story-width', px(width));\n      this.rootEl_.style.setProperty('--i-amphtml-story-height', px(height));\n      this.rootEl_.style.setProperty('--i-amphtml-story-factor',\n          factor.toString());\n    });\n  }\n\n  /** @override */\n  scalingStyles(unusedTargetDimensions, elementDimensions) {\n    const {relativeWidth, relativeHeight} = elementDimensions;\n    return {\n      'width': `calc(var(--i-amphtml-story-width) * ${relativeWidth})`,\n      'height': `calc(var(--i-amphtml-story-height) * ${relativeHeight})`,\n      'zoom': 'var(--i-amphtml-story-factor)',\n    };\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {EventType, dispatch} from './events';\nimport {StateChangeType} from './navigation-state';\nimport {dev} from '../../../src/log';\nimport {dict} from './../../../src/utils/object';\nimport {renderAsElement} from './simple-template';\n\n\n/** @struct @typedef {{className: string, triggers: (string|undefined)}} */\nlet ButtonStateDef;\n\n\n/** @const {!Object<string, !ButtonStateDef>} */\nconst BackButtonStates = {\n  HIDDEN: {className: 'i-amphtml-story-button-hidden'},\n  PREVIOUS_PAGE: {\n    className: 'i-amphtml-story-back-prev',\n    triggers: EventType.PREVIOUS_PAGE,\n  },\n  CLOSE_BOOKEND: {\n    className: 'i-amphtml-story-back-close-bookend',\n    triggers: EventType.CLOSE_BOOKEND,\n  },\n};\n\n\n/** @const {!Object<string, !ButtonStateDef>} */\nconst ForwardButtonStates = {\n  NEXT_PAGE: {\n    className: 'i-amphtml-story-fwd-next',\n    triggers: EventType.NEXT_PAGE,\n  },\n  SHOW_BOOKEND: {\n    className: 'i-amphtml-story-fwd-more',\n    triggers: EventType.SHOW_BOOKEND,\n  },\n  REPLAY: {\n    className: 'i-amphtml-story-fwd-replay',\n    triggers: EventType.REPLAY,\n  },\n};\n\n\n/** @private @const {!./simple-template.ElementDef} */\nconst BUTTON = {\n  tag: 'div',\n  attrs: dict({'class': 'i-amphtml-story-button-container'}),\n  children: [\n    {\n      tag: 'button',\n      attrs: dict({'class': 'i-amphtml-story-button-move'}),\n    },\n    {\n      tag: 'div',\n      attrs: dict({'class': 'i-amphtml-story-page-sentinel'}),\n    },\n  ],\n};\n\n\n/**\n * @param {!Element} hoverEl\n * @param {!Element} targetEl\n * @param {string} className\n */\nfunction setClassOnHover(hoverEl, targetEl, className) {\n  hoverEl.addEventListener('mouseenter', () => {\n    targetEl.classList.add(className);\n  });\n  hoverEl.addEventListener('mouseleave', () => {\n    targetEl.classList.remove(className);\n  });\n}\n\n\nclass PaginationButton {\n  /**\n   * @param {!Document} doc\n   * @param {!ButtonStateDef} initialState\n   */\n  constructor(doc, initialState) {\n    /** @private {!ButtonStateDef} */\n    this.state_ = initialState;\n\n    /** @public @const {!Element} */\n    this.element = renderAsElement(doc, BUTTON);\n\n    this.element.classList.add(initialState.className);\n\n    this.element.addEventListener('click', e => this.onClick_(e));\n  }\n\n  /** @param {!ButtonStateDef} state */\n  updateState(state) {\n    if (state === this.state_) {\n      return;\n    }\n    this.element.classList.remove(this.state_.className);\n    this.element.classList.add(state.className);\n    this.state_ = state;\n  }\n\n  /**\n   * @param {!Event} e\n   * @private\n   */\n  onClick_(e) {\n    if (!this.state_.triggers) {\n      return;\n    }\n    e.preventDefault();\n    dispatch(this.element, dev().assert(this.state_.triggers),\n        /* opt_bubbles */ true);\n  }\n}\n\n\n/** Pagination buttons layer. */\nexport class PaginationButtons {\n  /** @param {!Document} doc */\n  constructor(doc) {\n    /** @private @const {!PaginationButton} */\n    this.forwardButton_ =\n        new PaginationButton(doc, ForwardButtonStates.NEXT_PAGE);\n\n    /** @private @const {!PaginationButton} */\n    this.backButton_ = new PaginationButton(doc, BackButtonStates.HIDDEN);\n\n    this.forwardButton_.element.classList.add('next-container');\n    this.backButton_.element.classList.add('prev-container');\n  }\n\n  /**\n   * @param {!Document} doc\n   * @return {!PaginationButtons}\n   */\n  static create(doc) {\n    return new PaginationButtons(doc);\n  }\n\n  /** @param {!Element} element */\n  attach(element) {\n    setClassOnHover(\n        this.forwardButton_.element, element, 'i-amphtml-story-next-hover');\n\n    setClassOnHover(\n        this.backButton_.element, element, 'i-amphtml-story-prev-hover');\n\n    element.appendChild(this.forwardButton_.element);\n    element.appendChild(this.backButton_.element);\n  }\n\n  /** @param {!./navigation-state.StateChangeEventDef} event */\n  onNavigationStateChange(event) {\n    switch (event.type) {\n      case StateChangeType.ACTIVE_PAGE:\n        const {pageIndex, totalPages} = event.value;\n\n        this.backButton_.updateState(\n            pageIndex === 0 ?\n              BackButtonStates.HIDDEN :\n              BackButtonStates.PREVIOUS_PAGE);\n\n        this.forwardButton_.updateState(\n            pageIndex === totalPages - 1 ?\n              ForwardButtonStates.SHOW_BOOKEND :\n              ForwardButtonStates.NEXT_PAGE);\n        break;\n\n      case StateChangeType.BOOKEND_ENTER:\n        this.backButton_.updateState(BackButtonStates.CLOSE_BOOKEND);\n        break;\n\n      case StateChangeType.BOOKEND_EXIT:\n        this.backButton_.updateState(BackButtonStates.PREVIOUS_PAGE);\n        this.forwardButton_.updateState(ForwardButtonStates.SHOW_BOOKEND);\n        break;\n\n      case StateChangeType.END:\n        this.forwardButton_.updateState(ForwardButtonStates.REPLAY);\n        break;\n    }\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {POLL_INTERVAL_MS} from './page-advancement';\nimport {Services} from '../../../src/services';\nimport {dev} from '../../../src/log';\nimport {escapeCssSelectorNth, scopedQuerySelector} from '../../../src/dom';\nimport {hasOwn, map} from '../../../src/utils/object';\nimport {scale, setImportantStyles} from '../../../src/style';\n\n\n/**\n * Transition used to show the progress of a media. Has to be linear so the\n * animation is smooth and constant.\n * @const {string}\n */\nconst TRANSITION_LINEAR = `transform ${POLL_INTERVAL_MS}ms linear`;\n\n/**\n * Transition used to fully fill or unfill a progress bar item.\n * @const {string}\n */\nconst TRANSITION_EASE = 'transform 200ms ease';\n\n\n/**\n * Progress bar for <amp-story>.\n */\nexport class ProgressBar {\n  /**\n   * @param {!Window} win\n   */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private {boolean} */\n    this.isBuilt_ = false;\n\n    /** @private {?Element} */\n    this.root_ = null;\n\n    /** @private {number} */\n    this.segmentCount_ = 0;\n\n    /** @private {number} */\n    this.activeSegmentIndex_ = 0;\n\n    /** @private @const {!../../../src/service/vsync-impl.Vsync} */\n    this.vsync_ = Services.vsyncFor(this.win_);\n\n    /** @private {!Object<string, number>} */\n    this.segmentIdMap_ = map();\n  }\n\n  /**\n   * @param {!Window} win\n   */\n  static create(win) {\n    return new ProgressBar(win);\n  }\n\n  /**\n   * @param {!Array<string>} segmentIds The id of each segment in the story.\n   * @return {!Element}\n   */\n  build(segmentIds) {\n    if (this.isBuilt_) {\n      return this.getRoot();\n    }\n\n    const segmentCount = segmentIds.length;\n    dev().assert(segmentCount > 0);\n\n    this.isBuilt_ = true;\n    this.segmentCount_ = segmentCount;\n\n    segmentIds.forEach((id, i) => this.segmentIdMap_[id] = i);\n\n    this.root_ = this.win_.document.createElement('ol');\n    this.root_.classList.add('i-amphtml-story-progress-bar');\n\n    for (let i = 0; i < this.segmentCount_; i++) {\n      const segmentProgressBar = this.win_.document.createElement('li');\n      segmentProgressBar.classList.add('i-amphtml-story-page-progress-bar');\n      const segmentProgressValue = this.win_.document.createElement('div');\n      segmentProgressValue.classList.add('i-amphtml-story-page-progress-value');\n      segmentProgressBar.appendChild(segmentProgressValue);\n      this.root_.appendChild(segmentProgressBar);\n    }\n\n    return this.getRoot();\n  }\n\n\n  /**\n   * @return {!Element}\n   */\n  getRoot() {\n    return dev().assertElement(this.root_);\n  }\n\n\n  /**\n   * @param {string} segmentId The index of the new active segment.\n   * @public\n   */\n  setActiveSegmentId(segmentId) {\n    this.assertVaildSegmentId_(segmentId);\n    const segmentIndex = this.segmentIdMap_[segmentId];\n\n    for (let i = 0; i < this.segmentCount_; i++) {\n      if (i < segmentIndex) {\n        this.updateProgressByIndex_(i, 1.0,\n            /* withTransition */ i == segmentIndex - 1);\n      } else {\n        // The active segment manages its own progress by firing PAGE_PROGRESS\n        // events to amp-story.\n        this.updateProgressByIndex_(i, 0.0, /* withTransition */ (\n          segmentIndex != 0 && this.activeSegmentIndex_ != 1));\n      }\n    }\n  }\n\n  /**\n   * @param {string} segmentId The index to assert validity\n   * @private\n   */\n  assertVaildSegmentId_(segmentId) {\n    dev().assert(hasOwn(this.segmentIdMap_, segmentId),\n        'Invalid segment-id passed to progress-bar');\n  }\n\n  /**\n   * The\n   * @param {string} segmentId the id of the segment whos progress to change\n   * @param {number} progress A number from 0.0 to 1.0, representing the\n   *     progress of the current segment.\n   */\n  updateProgress(segmentId, progress) {\n    this.assertVaildSegmentId_(segmentId);\n    const segmentIndex = this.segmentIdMap_[segmentId];\n    this.updateProgressByIndex_(segmentIndex, progress);\n  }\n\n\n  /**\n   * @param {number} segmentIndex The index of the progress bar segment whose progress should be\n   *     changed.\n   * @param {number} progress A number from 0.0 to 1.0, representing the\n   *     progress of the current segment.\n   * @param {boolean=} withTransition\n   * @public\n   */\n  updateProgressByIndex_(segmentIndex, progress, withTransition = true) {\n    this.activeSegmentIndex_ = segmentIndex;\n\n    // Offset the index by 1, since nth-child indices start at 1 while\n    // JavaScript indices start at 0.\n    const nthChildIndex = segmentIndex + 1;\n    const progressEl = scopedQuerySelector(this.getRoot(),\n        `.i-amphtml-story-page-progress-bar:nth-child(${\n          escapeCssSelectorNth(nthChildIndex)\n        }) .i-amphtml-story-page-progress-value`);\n    this.vsync_.mutate(() => {\n      let transition = 'none';\n      if (withTransition) {\n        // Using an eased transition only if filling the bar to 0 or 1.\n        transition =\n            (progress === 1 || progress === 0) ?\n              TRANSITION_EASE : TRANSITION_LINEAR;\n      }\n      setImportantStyles(dev().assertElement(progressEl), {\n        'transform': scale(`${progress},1`),\n        'transition': transition,\n      });\n    });\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {dev, user} from '../../../src/log';\nimport {isProtocolValid, parseUrl} from '../../../src/url';\n\n\nconst TAG = 'amp-story';\n\n\n/**\n * @typedef {{\n *   title: string,\n *   url: string,\n *   domainName: string,\n *   image: (string|undefined),\n * }}\n */\nexport let RelatedArticleDef;\n\n\n/**\n * @typedef {{\n *   heading: (string|undefined),\n *   articles: !Array<!RelatedArticleDef>,\n * }}\n */\nexport let RelatedArticleSetDef;\n\n\n/**\n * @param {!JsonObject} articleJson\n * @return {?RelatedArticleDef}\n */\nfunction buildArticleFromJson_(articleJson) {\n  if (!articleJson['title'] || !articleJson['url']) {\n    user().error(TAG,\n        'Articles must contain `title` and `url` fields, skipping invalid.');\n    return null;\n  }\n\n  user().assert(isProtocolValid(articleJson['url']),\n      `Unsupported protocol for article URL ${articleJson['url']}`);\n\n  const article = {\n    title: dev().assert(articleJson['title']),\n    url: dev().assert(articleJson['url']),\n    domainName: parseUrl(dev().assert(articleJson['url'])).hostname,\n  };\n\n  if (articleJson['image']) {\n    user().assert(isProtocolValid(articleJson['image']),\n        `Unsupported protocol for article image URL ${articleJson['image']}`);\n    article.image = dev().assert(articleJson['image']);\n  }\n\n  return /** @type {!RelatedArticleDef} */ (article);\n}\n\n\n/**\n * @param {!JsonObject=} opt_articleSetsResponse\n * @return {!Array<!RelatedArticleSetDef>}\n */\nexport function relatedArticlesFromJson(opt_articleSetsResponse) {\n  return /** @type {!Array<!RelatedArticleSetDef>} */ (\n    Object.keys(opt_articleSetsResponse || {}).map(headingKey => {\n      const articleSet = {\n        articles:\n              opt_articleSetsResponse[headingKey]\n                  .map(buildArticleFromJson_)\n                  .filter(a => !!a),\n      };\n\n      if (headingKey.trim().length) {\n        articleSet.heading = headingKey;\n      }\n\n      return /** @type {!RelatedArticleSetDef} */ (articleSet);\n    }));\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Services} from '../../../src/services';\nimport {Toast} from './toast';\nimport {\n  copyTextToClipboard,\n  isCopyingToClipboardSupported,\n} from '../../../src/clipboard';\nimport {dev, user} from '../../../src/log';\nimport {dict} from './../../../src/utils/object';\nimport {isObject} from '../../../src/types';\nimport {listen} from '../../../src/event-helper';\nimport {px, setImportantStyles} from '../../../src/style';\nimport {renderAsElement, renderSimpleTemplate} from './simple-template';\nimport {throttle} from '../../../src/utils/rate-limit';\n\n\n/**\n * Maps share provider type to visible name.\n * If the name only needs to be capitalized (e.g. `facebook` to `Facebook`) it\n * does not need to be included here.\n * @const {!JsonObject}\n */\nconst SHARE_PROVIDER_NAME = dict({\n  'gplus': 'Google+',\n  'linkedin': 'LinkedIn',\n  'system': 'More',\n  'whatsapp': 'WhatsApp',\n});\n\n\n/**\n * Default left/right padding for share buttons.\n * @private @const {number}\n */\nconst DEFAULT_BUTTON_PADDING = 16;\n\n/**\n * Minimum left/right padding for share buttons.\n * @private @const {number}\n */\nconst MIN_BUTTON_PADDING = 10;\n\n\n/** @private @const {!./simple-template.ElementDef} */\nconst TEMPLATE = {\n  tag: 'div',\n  attrs: dict({'class': 'i-amphtml-story-share-widget'}),\n  children: [{\n    tag: 'ul',\n    attrs: dict({'class': 'i-amphtml-story-share-list'}),\n    children: [\n      {\n        tag: 'li',\n        attrs: dict({'class': 'i-amphtml-story-share-system'}),\n      },\n    ],\n  }],\n};\n\n\n/** @private @const {!./simple-template.ElementDef} */\nconst SHARE_ITEM_TEMPLATE = {\n  tag: 'li',\n  attrs: dict({'class': 'i-amphtml-story-share-item'}),\n};\n\n\n/** @private @const {!./simple-template.ElementDef} */\nconst LINK_SHARE_ITEM_TEMPLATE = {\n  tag: 'div',\n  attrs: dict({\n    'class':\n        'i-amphtml-story-share-icon i-amphtml-story-share-icon-link',\n  }),\n  text: 'Get Link', // TODO(alanorozco): i18n\n};\n\n\n/** @private @const {string} */\nconst SCROLLABLE_CLASSNAME = 'i-amphtml-story-share-widget-scrollable';\n\n\n/**\n * @param {!JsonObject=} opt_params\n * @return {!JsonObject}\n */\nfunction buildProviderParams(opt_params) {\n  const attrs = dict();\n\n  if (opt_params) {\n    Object.keys(opt_params).forEach(field => {\n      attrs[`data-param-${field}`] = opt_params[field];\n    });\n  }\n\n  return attrs;\n}\n\n\n/**\n * @param {!Document} doc\n * @param {string} shareType\n * @param {!JsonObject=} opt_params\n * @return {!Node}\n */\nfunction buildProvider(doc, shareType, opt_params) {\n  return renderSimpleTemplate(doc,\n      /** @type {!Array<!./simple-template.ElementDef>} */ ([\n        {\n          tag: 'amp-social-share',\n          attrs: /** @type {!JsonObject} */ (Object.assign(\n              dict({\n                'width': 48,\n                'height': 66,\n                'class': 'i-amphtml-story-share-icon',\n                'type': shareType,\n              }),\n              buildProviderParams(opt_params))),\n          text: SHARE_PROVIDER_NAME[shareType] || shareType,\n        },\n      ]));\n}\n\n\n/**\n * @param {!Document} doc\n * @param {string} url\n * @return {!Element}\n */\nfunction buildCopySuccessfulToast(doc, url) {\n  return renderAsElement(doc, /** @type {!./simple-template.ElementDef} */ ({\n    tag: 'div',\n    attrs: dict({'class': 'i-amphtml-story-copy-successful'}),\n    children: [\n      {\n        tag: 'div',\n        text: 'Link copied!', // TODO(alanorozco): i18n\n      },\n      {\n        tag: 'div',\n        attrs: dict({'class': 'i-amphtml-story-copy-url'}),\n        text: url,\n      },\n    ],\n  }));\n}\n\n\n/**\n * Social share widget for story bookend.\n */\nexport class ShareWidget {\n  /** @param {!Window} win */\n  constructor(win) {\n    /** @private {?../../../src/service/ampdoc-impl.AmpDoc} */\n    this.ampdoc_ = null;\n\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private {?Element} */\n    this.root_ = null;\n  }\n\n  /** @param {!Window} win */\n  static create(win) {\n    return new ShareWidget(win);\n  }\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @return {!Element}\n   */\n  build(ampdoc) {\n    dev().assert(!this.root_, 'Already built.');\n\n    this.ampdoc_ = ampdoc;\n\n    this.root_ = renderAsElement(this.win_.document, TEMPLATE);\n\n    this.maybeAddLinkShareButton_();\n    this.maybeAddSystemShareButton_();\n\n    return this.root_;\n  }\n\n  /** @private */\n  maybeAddLinkShareButton_() {\n    if (!isCopyingToClipboardSupported(this.win_.document)) {\n      return;\n    }\n\n    const linkShareButton =\n        renderAsElement(this.win_.document, LINK_SHARE_ITEM_TEMPLATE);\n\n    this.add_(linkShareButton);\n\n    // TODO(alanorozco): Listen for proper tap event (i.e. fastclick)\n    listen(linkShareButton, 'click', e => {\n      e.preventDefault();\n      this.copyUrlToClipboard_();\n    });\n  }\n\n  /** @private */\n  // TODO(alanorozco): i18n for toast.\n  copyUrlToClipboard_() {\n    const url = Services.documentInfoForDoc(\n        /** @type {!../../../src/service/ampdoc-impl.AmpDoc} */ (\n          dev().assert(this.ampdoc_))).canonicalUrl;\n\n    if (!copyTextToClipboard(this.win_, url)) {\n      Toast.show(this.win_, 'Could not copy link to clipboard :(');\n      return;\n    }\n\n    Toast.show(this.win_, buildCopySuccessfulToast(this.win_.document, url));\n  }\n\n  /** @private */\n  maybeAddSystemShareButton_() {\n    if (!this.isSystemShareSupported_()) {\n      // `amp-social-share` will hide `system` buttons when not supported, but\n      // we also need to avoid adding it for rendering reasons.\n      return;\n    }\n\n    const container = dev().assertElement(this.root_).querySelector(\n        '.i-amphtml-story-share-system');\n\n    this.loadRequiredExtensions_();\n\n    container.appendChild(buildProvider(this.win_.document, 'system'));\n  }\n\n  /** @private */\n  // NOTE(alanorozco): This is a duplicate of the logic in the\n  // `amp-social-share` component.\n  isSystemShareSupported_() {\n    const viewer = Services.viewerForDoc(\n        /** @type {!../../../src/service/ampdoc-impl.AmpDoc} */ (\n          dev().assert(this.ampdoc_)));\n\n    const platform = Services.platformFor(this.win_);\n\n    // Chrome exports navigator.share in WebView but does not implement it.\n    // See https://bugs.chromium.org/p/chromium/issues/detail?id=765923\n    const isChromeWebview = viewer.isWebviewEmbedded() && platform.isChrome();\n\n    return ('share' in navigator) && !isChromeWebview;\n  }\n\n  /**\n   * @param {!Object<string, (!JsonObject|boolean)>} providers\n   * @public\n   */\n  // TODO(alanorozco): Set story metadata in share config\n  setProviders(providers) {\n    this.loadRequiredExtensions_();\n\n    Object.keys(providers).forEach(type => {\n      if (type == 'system') {\n        user().warn('AMP-STORY',\n            '`system` is not a valid share provider type. Native sharing is ' +\n            'enabled by default and cannot be turned off.',\n            type);\n        return;\n      }\n\n      if (isObject(providers[type])) {\n        this.add_(buildProvider(this.win_.document, type,\n            /** @type {!JsonObject} */ (providers[type])));\n        return;\n      }\n\n      // Bookend config API requires real boolean, not just truthy\n      if (providers[type] === true) {\n        this.add_(buildProvider(this.win_.document, type));\n        return;\n      }\n\n      user().warn('AMP-STORY',\n          'Invalid amp-story bookend share configuration for %s. ' +\n          'Value must be `true` or a params object.',\n          type);\n    });\n  }\n\n  /** @private */\n  loadRequiredExtensions_() {\n    const ampdoc = /** @type {!../../../src/service/ampdoc-impl.AmpDoc} */ (\n      dev().assert(this.ampdoc_));\n\n    Services.extensionsFor(this.win_)\n        .installExtensionForDoc(ampdoc, 'amp-social-share');\n  }\n\n  /**\n   * @param {!Node} node\n   * @private\n   */\n  add_(node) {\n    const list = dev().assert(this.root_).firstElementChild;\n    const item = renderAsElement(this.win_.document, SHARE_ITEM_TEMPLATE);\n\n    item.appendChild(node);\n\n    // `lastElementChild` is the system share button container, which should\n    // always be last in list\n    list.insertBefore(item, list.lastElementChild);\n  }\n}\n\n\n/**\n * Social share widget for story bookend with a scrollable layout.\n * This class is coupled to the DOM structure for ShareWidget, but that's ok.\n */\nexport class ScrollableShareWidget {\n  /** @param {!Window} win */\n  constructor(win) {\n    /** @private @const {!Window} */\n    this.win_ = win;\n\n    /** @private @const {!../../../src/service/vsync-impl.Vsync} */\n    this.vsync_ = Services.vsyncFor(win);\n\n    /** @private @const {!ShareWidget} */\n    this.mixin_ = ShareWidget.create(win);\n\n    /**\n     * Container width is being tracked to prevent unnecessary layout\n     * calculations.\n     * @private {?number}\n     */\n    this.containerWidth_ = null;\n\n    /** @private {?Element} */\n    this.root_ = null;\n  }\n\n  /** @param {!Window} win */\n  static create(win) {\n    return new ScrollableShareWidget(win);\n  }\n\n  /**\n   * @param {!../../../src/service/ampdoc-impl.AmpDoc} ampdoc\n   * @return {!Element}\n   */\n  build(ampdoc) {\n    this.root_ = this.mixin_.build(ampdoc);\n\n    this.root_.classList.add(SCROLLABLE_CLASSNAME);\n\n    Services.viewportForDoc(ampdoc).onResize(\n        // we don't require a lot of smoothness here, so we throttle\n        throttle(this.win_, () => this.applyButtonPadding_(), 100));\n\n    return this.root_;\n  }\n\n  /**\n   * Calculates padding between buttons so that the result is that there's\n   * always one item visually \"cut off\" for scroll affordance.\n   * @private\n   */\n  applyButtonPadding_() {\n    const items = this.getVisibleItems_();\n\n    if (!items.length) {\n      return;\n    }\n\n    this.vsync_.run({\n      measure: state => {\n        const containerWidth = this.root_./*OK*/clientWidth;\n\n        if (containerWidth == this.containerWidth_) {\n          // Don't recalculate if width has not changed (i.e. onscreen keyboard)\n          state.noop = true;\n          return;\n        }\n\n        const icon = dev().assert(items[0].firstElementChild);\n\n        const leftMargin = icon./*OK*/offsetLeft - this.root_./*OK*/offsetLeft;\n        const iconWidth = icon./*OK*/offsetWidth;\n\n        // Total width that the buttons will occupy with minimum padding.\n        const totalItemWidth =\n            (iconWidth * items.length + 2 * MIN_BUTTON_PADDING *\n                (items.length - 1));\n\n        // If buttons don't fit within the available area, calculate padding so\n        // that there will be an element cut-off.\n        if (totalItemWidth > (containerWidth - leftMargin * 2)) {\n          const availableWidth = containerWidth - leftMargin - iconWidth / 2;\n          const amountVisible =\n              Math.floor(availableWidth / (iconWidth + MIN_BUTTON_PADDING * 2));\n\n          state.padding = 0.5 * (availableWidth / amountVisible - iconWidth);\n        } else {\n          // Otherwise, calculate padding in from MIN_PADDING to DEFAULT_PADDING\n          // so that all elements fit and take as much area as possible.\n          const totalPadding =\n              ((containerWidth - leftMargin * 2) - iconWidth * items.length) /\n              (items.length - 1);\n\n          state.padding = Math.min(DEFAULT_BUTTON_PADDING, 0.5 * totalPadding);\n        }\n\n        this.containerWidth_ = containerWidth;\n      },\n      mutate: state => {\n        if (state.noop) {\n          return;\n        }\n        items.forEach((el, i) => {\n          if (i != 0) {\n            setImportantStyles(el, {'padding-left': px(state.padding)});\n          }\n          if (i != items.length - 1) {\n            setImportantStyles(el, {'padding-right': px(state.padding)});\n          }\n        });\n      },\n    }, {});\n  }\n\n  /**\n   * @return {!Array<!Element>}\n   * @private\n   */\n  getVisibleItems_() {\n    return Array.prototype.filter.call(\n        dev().assertElement(this.root_).querySelectorAll('li'),\n        el => !!el.firstElementChild);\n  }\n\n  /**\n   * @param {!Object<string, (!JsonObject|boolean)>} providers\n   * @public\n   */\n  setProviders(providers) {\n    this.mixin_.setProviders(providers);\n    this.applyButtonPadding_();\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {createElementWithAttributes} from '../../../src/dom';\nimport {isArray} from '../../../src/types';\n\n\n/**\n * @typedef {{\n *   tag: string,\n *   attrs: (!JsonObject|undefined),\n *   text: (string|undefined),\n *   children: (!Array<!ElementDef>|undefined),\n * }}\n */\nexport let ElementDef;\n\n\n/**\n * @param {!Document} doc\n * @param {!ElementDef|!Array<!ElementDef>} elementsDef\n * @return {!Node}\n */\nexport function renderSimpleTemplate(doc, elementsDef) {\n  if (isArray(elementsDef)) {\n    return renderMulti(doc, /** @type {!Array<!ElementDef>} */ (elementsDef));\n  }\n  return renderSingle(doc, /** @type {!ElementDef} */ (elementsDef));\n}\n\n\n/**\n * @param {!Document} doc\n * @param {!ElementDef} elementDef\n * @return {!Element}\n */\nexport function renderAsElement(doc, elementDef) {\n  return renderSingle(doc, elementDef);\n}\n\n\n/**\n * @param {!Document} doc\n * @param {!Array<!ElementDef>} elementsDef\n * @return {!Node}\n */\nfunction renderMulti(doc, elementsDef) {\n  const fragment = doc.createDocumentFragment();\n  elementsDef.forEach(elementDef =>\n    fragment.appendChild(renderSingle(doc, elementDef)));\n  return fragment;\n}\n\n\n/**\n * @param {!Document} doc\n * @param {!ElementDef} elementDef\n * @return {!Element}\n */\nfunction renderSingle(doc, elementDef) {\n  const el = elementDef.attrs ?\n    createElementWithAttributes(doc, elementDef.tag, elementDef.attrs) :\n    doc.createElement(elementDef.tag);\n\n  if (elementDef.text) {\n    el.textContent = elementDef.text;\n  }\n\n  if (elementDef.children) {\n    el.appendChild(renderMulti(doc, elementDef.children));\n  }\n\n  return el;\n}\n","/**\n * Copyright 2018 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ampMediaElementFor} from './utils';\nimport {removeElement} from '../../../src/dom';\n\n\n\nexport class Sources {\n  /**\n   * @param {?string=} opt_srcAttr The 'src' attribute of the media element.\n   * @param {?IArrayLike<!Element>=} opt_srcEls Any child <source> tags of the\n   *     media element.\n   * @param {?IArrayLike<!Element>=} opt_trackEls Any child <track> tags of the\n   *     media element.\n   */\n  constructor(opt_srcAttr, opt_srcEls, opt_trackEls) {\n    /** @private @const {?string} */\n    this.srcAttr_ = opt_srcAttr && opt_srcAttr.length ? opt_srcAttr : null;\n\n    /** @private @const {!IArrayLike<!Element>} */\n    this.srcEls_ = opt_srcEls || [];\n\n    /** @private @const {!IArrayLike<!Element>} */\n    this.trackEls_ = opt_trackEls || [];\n  }\n\n\n  /**\n   * Applies track tags to a specified element. This is done in a separate\n   * method from the source tags, because we must wait for \"loadedmetadata\"\n   * video event before doing this.\n   * @param {!HTMLMediaElement} element The element to adopt the text tracks\n   *     represented by this object.\n   * @private\n   */\n  applyTracksToElement_(element) {\n    Array.prototype.forEach.call(this.trackEls_, trackEl => {\n      const track = document.createElement('track');\n      track.id = trackEl.id;\n      track.kind = trackEl.kind;\n      track.label = trackEl.label;\n      track.srclang = trackEl.srclang;\n      track.default = trackEl.default;\n      track.src = trackEl.src;\n      track.addEventListener('load', () => {\n        track.mode = 'showing';\n        element.textTracks[0].mode = 'showing';\n      });\n      element.appendChild(track);\n    });\n  }\n\n\n  /**\n   * Applies the src attribute and source tags to a specified element.\n   * @param {!HTMLMediaElement} element The element to adopt the sources\n   *     represented by this object.\n   */\n  applyToElement(element) {\n    Sources.removeFrom(element);\n\n    if (!this.srcAttr_) {\n      element.removeAttribute('src');\n    } else {\n      element.setAttribute('src', this.srcAttr_);\n    }\n\n    Array.prototype.forEach.call(this.srcEls_,\n        srcEl => element.appendChild(srcEl));\n\n    if (this.trackEls_.length > 0) {\n      // Wait for \"loadedmetadata\" before adding tracks.\n      // Firefox adds tracks, but does not toggle them on unless video metadata\n      // is loaded first.\n      if (element.readyState >= 1 /* HAVE_METADATA */) {\n        this.applyTracksToElement_(element);\n      } else {\n        const addTracksHandler = () => {\n          element.removeEventListener('loadedmetadata', addTracksHandler);\n          this.applyTracksToElement_(element);\n        };\n\n        element.addEventListener('loadedmetadata', addTracksHandler);\n      }\n    }\n  }\n\n\n  /**\n   * Removes and returns the sources from a specified element.\n   * @param {!Element} element The element whose sources should be removed and\n   *     returned.\n   * @return {!Sources} An object representing the sources of the specified\n   *     element.\n   */\n  static removeFrom(element) {\n    const elementToUse = ampMediaElementFor(element) || element;\n    const srcAttr = elementToUse.getAttribute('src');\n    elementToUse.removeAttribute('src');\n\n    const srcEls = elementToUse.querySelectorAll('source');\n    Array.prototype.forEach.call(srcEls, srcEl => removeElement(srcEl));\n\n    const trackEls = elementToUse.querySelectorAll('track');\n    Array.prototype.forEach.call(trackEls, trackEl => removeElement(trackEl));\n\n    return new Sources(srcAttr, srcEls, trackEls);\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {DevelopmentModeLog, DevelopmentModeLogButtonSet} from './development-ui';\nimport {EventType, dispatch} from './events';\nimport {ProgressBar} from './progress-bar';\nimport {Services} from '../../../src/services';\nimport {StateType} from './amp-story-state-service';\nimport {dev} from '../../../src/log';\nimport {dict} from '../../../src/utils/object';\nimport {getMode} from '../../../src/mode';\nimport {matches} from '../../../src/dom';\nimport {renderAsElement} from './simple-template';\n\n\nconst MUTE_CLASS = 'i-amphtml-story-mute-audio-control';\n\nconst UNMUTE_CLASS = 'i-amphtml-story-unmute-audio-control';\n\n/** @private @const {!./simple-template.ElementDef} */\nconst TEMPLATE = {\n  tag: 'aside',\n  attrs: dict(\n      {'class': 'i-amphtml-story-system-layer i-amphtml-story-system-reset'}),\n  children: [\n    {\n      tag: 'div',\n      attrs: dict({'class': 'i-amphtml-story-ui-left'}),\n      children: [\n        {\n          tag: 'div',\n          attrs: dict({\n            'role': 'button',\n            'class': UNMUTE_CLASS + ' i-amphtml-story-button',\n          }),\n        },\n        {\n          tag: 'div',\n          attrs: dict({\n            'role': 'button',\n            'class': MUTE_CLASS + ' i-amphtml-story-button',\n          }),\n        },\n      ],\n    },\n    {\n      tag: 'div',\n      attrs: dict({'class': 'i-amphtml-story-ui-right'}),\n      children: [\n        {\n          tag: 'div',\n          attrs: dict({\n            'role': 'button',\n            'class': UNMUTE_CLASS + ' i-amphtml-story-button',\n          }),\n        },\n        {\n          tag: 'div',\n          attrs: dict({\n            'role': 'button',\n            'class': MUTE_CLASS + ' i-amphtml-story-button',\n          }),\n        },\n      ],\n    },\n  ],\n};\n\n\n/**\n * System Layer (i.e. UI Chrome) for <amp-story>.\n * Chrome contains:\n *   - mute/unmute button\n *   - story progress bar\n *   - bookend close butotn\n */\nexport class SystemLayer {\n  /**\n   * @param {!Window} win\n   * @param {!./amp-story-state-service.AmpStoryStateService} stateService\n   */\n  constructor(win, stateService) {\n    /** @private {!Window} */\n    this.win_ = win;\n\n    /** @private {boolean} */\n    this.isBuilt_ = false;\n\n    /** @private {?Element} */\n    this.root_ = null;\n\n    /** @private {?Element} */\n    this.muteAudioBtn_ = null;\n\n    /** @private {?Element} */\n    this.unmuteAudioBtn_ = null;\n\n    /** @private {?Element} */\n    this.leftButtonTray_ = null;\n\n    /** @private @const {!ProgressBar} */\n    this.progressBar_ = ProgressBar.create(win);\n\n    /** @private {!DevelopmentModeLog} */\n    this.developerLog_ = DevelopmentModeLog.create(win);\n\n    /** @private {!DevelopmentModeLogButtonSet} */\n    this.developerButtons_ = DevelopmentModeLogButtonSet.create(win);\n\n    /** @private {!./amp-story-state-service.AmpStoryStateService} */\n    this.stateService_ = stateService;\n  }\n\n  /**\n   * @param {!Array<string>} pageIds the ids of each page in the story\n   * @return {!Element}\n   */\n  build(pageIds) {\n    if (this.isBuilt_) {\n      return this.getRoot();\n    }\n\n    this.isBuilt_ = true;\n\n    this.root_ = renderAsElement(this.win_.document, TEMPLATE);\n\n    this.root_.insertBefore(\n        this.progressBar_.build(pageIds), this.root_.lastChild);\n\n    this.leftButtonTray_ =\n        this.root_.querySelector('.i-amphtml-story-ui-left');\n\n    this.buildForDevelopmentMode_();\n\n    this.addEventHandlers_();\n\n    const systemLayerButtonsShown = this.stateService_\n        .getState(StateType.SYSTEM_LAYER_BUTTONS_SHOWN);\n\n    // TODO(newmuis): Observe this value.\n    if (!systemLayerButtonsShown.getValue() &&\n        !systemLayerButtonsShown.isModifiable()) {\n      this.root_.classList.add('i-amphtml-story-ui-no-buttons');\n    }\n\n    return this.getRoot();\n  }\n\n  /**\n   * @private\n   */\n  buildForDevelopmentMode_() {\n    if (!getMode().development) {\n      return;\n    }\n\n    this.leftButtonTray_.appendChild(this.developerButtons_.build(\n        this.developerLog_.toggle.bind(this.developerLog_)));\n    this.root_.appendChild(this.developerLog_.build());\n  }\n\n  /**\n   * @private\n   */\n  addEventHandlers_() {\n    // TODO(alanorozco): Listen to tap event properly (i.e. fastclick)\n    this.root_.addEventListener('click', e => {\n      const target = dev().assertElement(e.target);\n\n      if (matches(target, `.${MUTE_CLASS}, .${MUTE_CLASS} *`)) {\n        this.onMuteAudioClick_(e);\n      } else if (matches(target, `.${UNMUTE_CLASS}, .${UNMUTE_CLASS} *`)) {\n        this.onUnmuteAudioClick_(e);\n      }\n    });\n  }\n\n\n  /**\n   * @return {!Element}\n   */\n  getRoot() {\n    return dev().assertElement(this.root_);\n  }\n\n  /**\n   * @param {!Event} e\n   * @private\n   */\n  onMuteAudioClick_(e) {\n    this.dispatch_(EventType.MUTE, e);\n  }\n\n  /**\n   * @param {!Event} e\n   * @private\n   */\n  onUnmuteAudioClick_(e) {\n    this.dispatch_(EventType.UNMUTE, e);\n  }\n\n  /**\n   * @param {string} eventType\n   * @param {!Event=} opt_event\n   * @private\n   */\n  dispatch_(eventType, opt_event) {\n    if (opt_event) {\n      dev().assert(opt_event).stopPropagation();\n    }\n\n    dispatch(this.getRoot(), eventType, /* opt_bubbles */ true);\n  }\n\n  /**\n   * @param {string} pageId The page id of the new active page.\n   * @public\n   */\n  setActivePageId(pageId) {\n    // TODO(newmuis) avoid passing progress logic through system-layer\n    this.progressBar_.setActiveSegmentId(pageId);\n  }\n\n  /**\n   * @param {string} pageId The id of the page whose progress should be\n   *     changed.\n   * @param {number} progress A number from 0.0 to 1.0, representing the\n   *     progress of the current page.\n   * @public\n   */\n  updateProgress(pageId, progress) {\n    // TODO(newmuis) avoid passing progress logic through system-layer\n    this.progressBar_.updateProgress(pageId, progress);\n  }\n\n  /**\n   * @param {!./logging.AmpStoryLogEntryDef} logEntry\n   * @private\n   */\n  logInternal_(logEntry) {\n    this.developerButtons_.log(logEntry);\n    this.developerLog_.log(logEntry);\n  }\n\n  /**\n   * Logs an array of entries to the developer logs.\n   * @param {!Array<!./logging.AmpStoryLogEntryDef>} logEntries\n   */\n  logAll(logEntries) {\n    if (!getMode().development) {\n      return;\n    }\n\n    Services.vsyncFor(this.win_).mutate(() => {\n      logEntries.forEach(logEntry => this.logInternal_(logEntry));\n    });\n  }\n\n  /**\n   * Logs a single entry to the developer logs.\n   * @param {!./logging.AmpStoryLogEntryDef} logEntry\n   */\n  log(logEntry) {\n    if (!getMode().development) {\n      return;\n    }\n\n    this.logInternal_(logEntry);\n  }\n\n  /**\n   * Clears any state held by the developer log or buttons.\n   */\n  resetDeveloperLogs() {\n    if (!getMode().development) {\n      return;\n    }\n\n    this.developerButtons_.clear();\n    this.developerLog_.clear();\n  }\n\n  /**\n   * Sets the string providing context for the developer logs window.  This is\n   * often the name or ID of the element that all logs are for (e.g. the page).\n   * @param {string} contextString\n   */\n  setDeveloperLogContextString(contextString) {\n    if (!getMode().development) {\n      return;\n    }\n\n    this.developerLog_.setContextString(contextString);\n  }\n\n  /**\n   * Toggles the visibility of the developer log.\n   * @private\n   */\n  toggleDeveloperLog_() {\n    if (!getMode().development) {\n      return;\n    }\n\n    this.developerLog_.toggle();\n  }\n\n  /**\n   * Hides the developer log in the UI.\n   */\n  hideDeveloperLog() {\n    if (!getMode().development) {\n      return;\n    }\n\n    this.developerLog_.hide();\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Services} from '../../../src/services';\nimport {createElementWithAttributes, removeElement} from '../../../src/dom';\n\n\n/** @private @const {string} */\nconst TOAST_CLASSNAME = 'i-amphtml-story-toast';\n\n\n/**\n * Should be higher than total animation time.\n * @private @const {number}\n */\nconst TOAST_VISIBLE_TIME_MS = 2600;\n\n\nexport class Toast {\n  /**\n   * @param {!Window} win\n   * @param {!Node|string} childNodeOrText\n   */\n  static show(win, childNodeOrText) {\n    const toast = createElementWithAttributes(win.document, 'div',\n        /** @type {!JsonObject} */ ({'class': TOAST_CLASSNAME}));\n\n    if (typeof childNodeOrText == 'string') {\n      toast.textContent = childNodeOrText;\n    } else {\n      toast.appendChild(childNodeOrText);\n    }\n\n    win.document.body.appendChild(toast);\n\n    Services.timerFor(win)\n        .delay(() => removeElement(toast), TOAST_VISIBLE_TIME_MS);\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {closestBySelector} from '../../../src/dom';\nimport {user} from '../../../src/log';\n\n/**\n * Returns millis as number if given a string(e.g. 1s, 200ms etc)\n * @param {string} time\n * @return {number|undefined}\n */\nexport function timeStrToMillis(time) {\n  const match = time.toLowerCase().match(/^([0-9\\.]+)\\s*(s|ms)$/);\n  if (!match) {\n    return NaN;\n  }\n\n  const num = match[1];\n  const units = match[2];\n\n  user().assert(\n      match &&\n          match.length == 3 &&\n          (units == 's' || units == 'ms'),\n      'Invalid time string %s', time);\n\n  return units == 's' ? parseFloat(num) * 1000 : parseInt(num, 10);\n}\n\n\n/**\n * Determines whether the specified element has an action for its on=\"tap:...\"\n * handler.\n * @param {!Element} el\n * @return {boolean}\n */\nexport function hasTapAction(el) {\n  // There are better ways to determine this, but they're all bound to action\n  // service race conditions. This is good enough for our use case.\n  return el.hasAttribute('on') &&\n      !!el.getAttribute('on').match(/(^|;)\\s*tap\\s*:/);\n}\n\n\n/**\n * Calculates a client rect without applying scaling transformations.\n * @note Must be run in a vsync measure context.\n * @param {!Element} el\n * @return {!ClientRect}\n */\nexport function unscaledClientRect(el) {\n  const {width, height, left, top} = el./*OK*/getBoundingClientRect();\n\n  const scaleFactorX = width == 0 ? 1 : width / el./*OK*/offsetWidth;\n  const scaleFactorY = height == 0 ? 1 : height / el./*OK*/offsetHeight;\n\n  return /** @type {!ClientRect} */ ({\n    left: left / scaleFactorX,\n    top: top / scaleFactorY,\n    width: width / scaleFactorX,\n    height: height / scaleFactorY,\n  });\n}\n\n\n/**\n * Finds an amp-video/amp-audio ancestor.\n * @param {!Element} el\n * @return {?AmpElement}\n */\nexport function ampMediaElementFor(el) {\n  return closestBySelector(el, 'amp-video, amp-audio');\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {StateChangeType} from './navigation-state';\nimport {dev} from '../../../src/log';\n\n\n/**\n * Variable service for amp-story.\n * Used for URL replacement service. See usage in src/url-replacements-impl.\n */\nexport class AmpStoryVariableService {\n  constructor() {\n    /** @private {?string} */\n    this.pageIndex_ = null;\n\n    /** @private {?number} */\n    this.pageId_ = null;\n  }\n\n  /**\n   * @param {!./navigation-state.StateChangeEventDef} stateChangeEvent\n   */\n  onStateChange(stateChangeEvent) {\n    switch (stateChangeEvent.type) {\n      case StateChangeType.ACTIVE_PAGE:\n        const {pageIndex, pageId} = stateChangeEvent.value;\n        this.pageIndex_ = pageIndex;\n        this.pageId_ = pageId;\n        break;\n    }\n  }\n\n  /**\n   * @return {number}\n   */\n  get pageIndex() {\n    return dev().assertNumber(this.pageIndex_);\n  }\n\n  /**\n   * @return {string}\n   */\n  get pageId() {\n    return dev().assertString(this.pageId_);\n  }\n}\n","/*!\n\nCopyright (C) 2014-2016 by Andrea Giammarchi - @WebReflection\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n*/\n// global window Object\n// optional polyfill info\n//    'auto' used by default, everything is feature detected\n//    'force' use the polyfill even if not fully needed\nfunction installCustomElements(window, polyfill) {'use strict';\n\n  // DO NOT USE THIS FILE DIRECTLY, IT WON'T WORK\n  // THIS IS A PROJECT BASED ON A BUILD SYSTEM\n  // THIS FILE IS JUST WRAPPED UP RESULTING IN\n  // build/document-register-element.node.js\n\n  var\n    document = window.document,\n    Object = window.Object\n  ;\n\n  var htmlClass = (function (info) {\n    // (C) Andrea Giammarchi - @WebReflection - MIT Style\n    var\n      catchClass = /^[A-Z]+[a-z]/,\n      filterBy = function (re) {\n        var arr = [], tag;\n        for (tag in register) {\n          if (re.test(tag)) arr.push(tag);\n        }\n        return arr;\n      },\n      add = function (Class, tag) {\n        tag = tag.toLowerCase();\n        if (!(tag in register)) {\n          register[Class] = (register[Class] || []).concat(tag);\n          register[tag] = (register[tag.toUpperCase()] = Class);\n        }\n      },\n      register = (Object.create || Object)(null),\n      htmlClass = {},\n      i, section, tags, Class\n    ;\n    for (section in info) {\n      for (Class in info[section]) {\n        tags = info[section][Class];\n        register[Class] = tags;\n        for (i = 0; i < tags.length; i++) {\n          register[tags[i].toLowerCase()] =\n          register[tags[i].toUpperCase()] = Class;\n        }\n      }\n    }\n    htmlClass.get = function get(tagOrClass) {\n      return typeof tagOrClass === 'string' ?\n        (register[tagOrClass] || (catchClass.test(tagOrClass) ? [] : '')) :\n        filterBy(tagOrClass);\n    };\n    htmlClass.set = function set(tag, Class) {\n      return (catchClass.test(tag) ?\n        add(tag, Class) :\n        add(Class, tag)\n      ), htmlClass;\n    };\n    return htmlClass;\n  }({\n    \"collections\": {\n      \"HTMLAllCollection\": [\n        \"all\"\n      ],\n      \"HTMLCollection\": [\n        \"forms\"\n      ],\n      \"HTMLFormControlsCollection\": [\n        \"elements\"\n      ],\n      \"HTMLOptionsCollection\": [\n        \"options\"\n      ]\n    },\n    \"elements\": {\n      \"Element\": [\n        \"element\"\n      ],\n      \"HTMLAnchorElement\": [\n        \"a\"\n      ],\n      \"HTMLAppletElement\": [\n        \"applet\"\n      ],\n      \"HTMLAreaElement\": [\n        \"area\"\n      ],\n      \"HTMLAttachmentElement\": [\n        \"attachment\"\n      ],\n      \"HTMLAudioElement\": [\n        \"audio\"\n      ],\n      \"HTMLBRElement\": [\n        \"br\"\n      ],\n      \"HTMLBaseElement\": [\n        \"base\"\n      ],\n      \"HTMLBodyElement\": [\n        \"body\"\n      ],\n      \"HTMLButtonElement\": [\n        \"button\"\n      ],\n      \"HTMLCanvasElement\": [\n        \"canvas\"\n      ],\n      \"HTMLContentElement\": [\n        \"content\"\n      ],\n      \"HTMLDListElement\": [\n        \"dl\"\n      ],\n      \"HTMLDataElement\": [\n        \"data\"\n      ],\n      \"HTMLDataListElement\": [\n        \"datalist\"\n      ],\n      \"HTMLDetailsElement\": [\n        \"details\"\n      ],\n      \"HTMLDialogElement\": [\n        \"dialog\"\n      ],\n      \"HTMLDirectoryElement\": [\n        \"dir\"\n      ],\n      \"HTMLDivElement\": [\n        \"div\"\n      ],\n      \"HTMLDocument\": [\n        \"document\"\n      ],\n      \"HTMLElement\": [\n        \"element\",\n        \"abbr\",\n        \"address\",\n        \"article\",\n        \"aside\",\n        \"b\",\n        \"bdi\",\n        \"bdo\",\n        \"cite\",\n        \"code\",\n        \"command\",\n        \"dd\",\n        \"dfn\",\n        \"dt\",\n        \"em\",\n        \"figcaption\",\n        \"figure\",\n        \"footer\",\n        \"header\",\n        \"i\",\n        \"kbd\",\n        \"mark\",\n        \"nav\",\n        \"noscript\",\n        \"rp\",\n        \"rt\",\n        \"ruby\",\n        \"s\",\n        \"samp\",\n        \"section\",\n        \"small\",\n        \"strong\",\n        \"sub\",\n        \"summary\",\n        \"sup\",\n        \"u\",\n        \"var\",\n        \"wbr\"\n      ],\n      \"HTMLEmbedElement\": [\n        \"embed\"\n      ],\n      \"HTMLFieldSetElement\": [\n        \"fieldset\"\n      ],\n      \"HTMLFontElement\": [\n        \"font\"\n      ],\n      \"HTMLFormElement\": [\n        \"form\"\n      ],\n      \"HTMLFrameElement\": [\n        \"frame\"\n      ],\n      \"HTMLFrameSetElement\": [\n        \"frameset\"\n      ],\n      \"HTMLHRElement\": [\n        \"hr\"\n      ],\n      \"HTMLHeadElement\": [\n        \"head\"\n      ],\n      \"HTMLHeadingElement\": [\n        \"h1\",\n        \"h2\",\n        \"h3\",\n        \"h4\",\n        \"h5\",\n        \"h6\"\n      ],\n      \"HTMLHtmlElement\": [\n        \"html\"\n      ],\n      \"HTMLIFrameElement\": [\n        \"iframe\"\n      ],\n      \"HTMLImageElement\": [\n        \"img\"\n      ],\n      \"HTMLInputElement\": [\n        \"input\"\n      ],\n      \"HTMLKeygenElement\": [\n        \"keygen\"\n      ],\n      \"HTMLLIElement\": [\n        \"li\"\n      ],\n      \"HTMLLabelElement\": [\n        \"label\"\n      ],\n      \"HTMLLegendElement\": [\n        \"legend\"\n      ],\n      \"HTMLLinkElement\": [\n        \"link\"\n      ],\n      \"HTMLMapElement\": [\n        \"map\"\n      ],\n      \"HTMLMarqueeElement\": [\n        \"marquee\"\n      ],\n      \"HTMLMediaElement\": [\n        \"media\"\n      ],\n      \"HTMLMenuElement\": [\n        \"menu\"\n      ],\n      \"HTMLMenuItemElement\": [\n        \"menuitem\"\n      ],\n      \"HTMLMetaElement\": [\n        \"meta\"\n      ],\n      \"HTMLMeterElement\": [\n        \"meter\"\n      ],\n      \"HTMLModElement\": [\n        \"del\",\n        \"ins\"\n      ],\n      \"HTMLOListElement\": [\n        \"ol\"\n      ],\n      \"HTMLObjectElement\": [\n        \"object\"\n      ],\n      \"HTMLOptGroupElement\": [\n        \"optgroup\"\n      ],\n      \"HTMLOptionElement\": [\n        \"option\"\n      ],\n      \"HTMLOutputElement\": [\n        \"output\"\n      ],\n      \"HTMLParagraphElement\": [\n        \"p\"\n      ],\n      \"HTMLParamElement\": [\n        \"param\"\n      ],\n      \"HTMLPictureElement\": [\n        \"picture\"\n      ],\n      \"HTMLPreElement\": [\n        \"pre\"\n      ],\n      \"HTMLProgressElement\": [\n        \"progress\"\n      ],\n      \"HTMLQuoteElement\": [\n        \"blockquote\",\n        \"q\",\n        \"quote\"\n      ],\n      \"HTMLScriptElement\": [\n        \"script\"\n      ],\n      \"HTMLSelectElement\": [\n        \"select\"\n      ],\n      \"HTMLShadowElement\": [\n        \"shadow\"\n      ],\n      \"HTMLSlotElement\": [\n        \"slot\"\n      ],\n      \"HTMLSourceElement\": [\n        \"source\"\n      ],\n      \"HTMLSpanElement\": [\n        \"span\"\n      ],\n      \"HTMLStyleElement\": [\n        \"style\"\n      ],\n      \"HTMLTableCaptionElement\": [\n        \"caption\"\n      ],\n      \"HTMLTableCellElement\": [\n        \"td\",\n        \"th\"\n      ],\n      \"HTMLTableColElement\": [\n        \"col\",\n        \"colgroup\"\n      ],\n      \"HTMLTableElement\": [\n        \"table\"\n      ],\n      \"HTMLTableRowElement\": [\n        \"tr\"\n      ],\n      \"HTMLTableSectionElement\": [\n        \"thead\",\n        \"tbody\",\n        \"tfoot\"\n      ],\n      \"HTMLTemplateElement\": [\n        \"template\"\n      ],\n      \"HTMLTextAreaElement\": [\n        \"textarea\"\n      ],\n      \"HTMLTimeElement\": [\n        \"time\"\n      ],\n      \"HTMLTitleElement\": [\n        \"title\"\n      ],\n      \"HTMLTrackElement\": [\n        \"track\"\n      ],\n      \"HTMLUListElement\": [\n        \"ul\"\n      ],\n      \"HTMLUnknownElement\": [\n        \"unknown\",\n        \"vhgroupv\",\n        \"vkeygen\"\n      ],\n      \"HTMLVideoElement\": [\n        \"video\"\n      ]\n    },\n    \"nodes\": {\n      \"Attr\": [\n        \"node\"\n      ],\n      \"Audio\": [\n        \"audio\"\n      ],\n      \"CDATASection\": [\n        \"node\"\n      ],\n      \"CharacterData\": [\n        \"node\"\n      ],\n      \"Comment\": [\n        \"#comment\"\n      ],\n      \"Document\": [\n        \"#document\"\n      ],\n      \"DocumentFragment\": [\n        \"#document-fragment\"\n      ],\n      \"DocumentType\": [\n        \"node\"\n      ],\n      \"HTMLDocument\": [\n        \"#document\"\n      ],\n      \"Image\": [\n        \"img\"\n      ],\n      \"Option\": [\n        \"option\"\n      ],\n      \"ProcessingInstruction\": [\n        \"node\"\n      ],\n      \"ShadowRoot\": [\n        \"#shadow-root\"\n      ],\n      \"Text\": [\n        \"#text\"\n      ],\n      \"XMLDocument\": [\n        \"xml\"\n      ]\n    }\n  }));\n  \n  \n    \n  // passed at runtime, configurable\n  // via nodejs module\n  if (!polyfill) polyfill = 'auto';\n  \n  var\n    // V0 polyfill entry\n    REGISTER_ELEMENT = 'registerElement',\n  \n    // IE < 11 only + old WebKit for attributes + feature detection\n    EXPANDO_UID = '__' + REGISTER_ELEMENT + (window.Math.random() * 10e4 >> 0),\n  \n    // shortcuts and costants\n    ADD_EVENT_LISTENER = 'addEventListener',\n    ATTACHED = 'attached',\n    CALLBACK = 'Callback',\n    DETACHED = 'detached',\n    EXTENDS = 'extends',\n  \n    ATTRIBUTE_CHANGED_CALLBACK = 'attributeChanged' + CALLBACK,\n    ATTACHED_CALLBACK = ATTACHED + CALLBACK,\n    CONNECTED_CALLBACK = 'connected' + CALLBACK,\n    DISCONNECTED_CALLBACK = 'disconnected' + CALLBACK,\n    CREATED_CALLBACK = 'created' + CALLBACK,\n    DETACHED_CALLBACK = DETACHED + CALLBACK,\n  \n    ADDITION = 'ADDITION',\n    MODIFICATION = 'MODIFICATION',\n    REMOVAL = 'REMOVAL',\n  \n    DOM_ATTR_MODIFIED = 'DOMAttrModified',\n    DOM_CONTENT_LOADED = 'DOMContentLoaded',\n    DOM_SUBTREE_MODIFIED = 'DOMSubtreeModified',\n  \n    PREFIX_TAG = '<',\n    PREFIX_IS = '=',\n  \n    // valid and invalid node names\n    validName = /^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,\n    invalidNames = [\n      'ANNOTATION-XML',\n      'COLOR-PROFILE',\n      'FONT-FACE',\n      'FONT-FACE-SRC',\n      'FONT-FACE-URI',\n      'FONT-FACE-FORMAT',\n      'FONT-FACE-NAME',\n      'MISSING-GLYPH'\n    ],\n  \n    // registered types and their prototypes\n    types = [],\n    protos = [],\n  \n    // to query subnodes\n    query = '',\n  \n    // html shortcut used to feature detect\n    documentElement = document.documentElement,\n  \n    // ES5 inline helpers || basic patches\n    indexOf = types.indexOf || function (v) {\n      for(var i = this.length; i-- && this[i] !== v;){}\n      return i;\n    },\n  \n    // other helpers / shortcuts\n    OP = Object.prototype,\n    hOP = OP.hasOwnProperty,\n    iPO = OP.isPrototypeOf,\n  \n    defineProperty = Object.defineProperty,\n    empty = [],\n    gOPD = Object.getOwnPropertyDescriptor,\n    gOPN = Object.getOwnPropertyNames,\n    gPO = Object.getPrototypeOf,\n    sPO = Object.setPrototypeOf,\n  \n    // jshint proto: true\n    hasProto = !!Object.__proto__,\n  \n    // V1 helpers\n    fixGetClass = false,\n    DRECEV1 = '__dreCEv1',\n    customElements = window.customElements,\n    usableCustomElements = polyfill !== 'force' && !!(\n      customElements &&\n      customElements.define &&\n      customElements.get &&\n      customElements.whenDefined\n    ),\n    Dict = Object.create || Object,\n    Map = window.Map || function Map() {\n      var K = [], V = [], i;\n      return {\n        get: function (k) {\n          return V[indexOf.call(K, k)];\n        },\n        set: function (k, v) {\n          i = indexOf.call(K, k);\n          if (i < 0) V[K.push(k) - 1] = v;\n          else V[i] = v;\n        }\n      };\n    },\n    Promise = window.Promise || function (fn) {\n      var\n        notify = [],\n        done = false,\n        p = {\n          'catch': function () {\n            return p;\n          },\n          'then': function (cb) {\n            notify.push(cb);\n            if (done) setTimeout(resolve, 1);\n            return p;\n          }\n        }\n      ;\n      function resolve(value) {\n        done = true;\n        while (notify.length) notify.shift()(value);\n      }\n      fn(resolve);\n      return p;\n    },\n    justCreated = false,\n    constructors = Dict(null),\n    waitingList = Dict(null),\n    nodeNames = new Map(),\n    secondArgument = function (is) {\n      return is.toLowerCase();\n    },\n  \n    // used to create unique instances\n    create = Object.create || function Bridge(proto) {\n      // silly broken polyfill probably ever used but short enough to work\n      return proto ? ((Bridge.prototype = proto), new Bridge()) : this;\n    },\n  \n    // will set the prototype if possible\n    // or copy over all properties\n    setPrototype = sPO || (\n      hasProto ?\n        function (o, p) {\n          o.__proto__ = p;\n          return o;\n        } : (\n      (gOPN && gOPD) ?\n        (function(){\n          function setProperties(o, p) {\n            for (var\n              key,\n              names = gOPN(p),\n              i = 0, length = names.length;\n              i < length; i++\n            ) {\n              key = names[i];\n              if (!hOP.call(o, key)) {\n                defineProperty(o, key, gOPD(p, key));\n              }\n            }\n          }\n          return function (o, p) {\n            do {\n              setProperties(o, p);\n            } while ((p = gPO(p)) && !iPO.call(p, o));\n            return o;\n          };\n        }()) :\n        function (o, p) {\n          for (var key in p) {\n            o[key] = p[key];\n          }\n          return o;\n        }\n    )),\n  \n    // DOM shortcuts and helpers, if any\n  \n    MutationObserver = window.MutationObserver ||\n                       window.WebKitMutationObserver,\n  \n    HTMLElementPrototype = (\n      window.HTMLElement ||\n      window.Element ||\n      window.Node\n    ).prototype,\n  \n    IE8 = !iPO.call(HTMLElementPrototype, documentElement),\n  \n    safeProperty = IE8 ? function (o, k, d) {\n      o[k] = d.value;\n      return o;\n    } : defineProperty,\n  \n    isValidNode = IE8 ?\n      function (node) {\n        return node.nodeType === 1;\n      } :\n      function (node) {\n        return iPO.call(HTMLElementPrototype, node);\n      },\n  \n    targets = IE8 && [],\n  \n    attachShadow = HTMLElementPrototype.attachShadow,\n    cloneNode = HTMLElementPrototype.cloneNode,\n    dispatchEvent = HTMLElementPrototype.dispatchEvent,\n    getAttribute = HTMLElementPrototype.getAttribute,\n    hasAttribute = HTMLElementPrototype.hasAttribute,\n    removeAttribute = HTMLElementPrototype.removeAttribute,\n    setAttribute = HTMLElementPrototype.setAttribute,\n  \n    // replaced later on\n    createElement = document.createElement,\n    patchedCreateElement = createElement,\n  \n    // shared observer for all attributes\n    attributesObserver = MutationObserver && {\n      attributes: true,\n      characterData: true,\n      attributeOldValue: true\n    },\n  \n    // useful to detect only if there's no MutationObserver\n    DOMAttrModified = MutationObserver || function(e) {\n      doesNotSupportDOMAttrModified = false;\n      documentElement.removeEventListener(\n        DOM_ATTR_MODIFIED,\n        DOMAttrModified\n      );\n    },\n  \n    // will both be used to make DOMNodeInserted asynchronous\n    asapQueue,\n    asapTimer = 0,\n  \n    // internal flags\n    V0 = REGISTER_ELEMENT in document,\n    setListener = true,\n    justSetup = false,\n    doesNotSupportDOMAttrModified = true,\n    dropDomContentLoaded = true,\n  \n    // needed for the innerHTML helper\n    notFromInnerHTMLHelper = true,\n  \n    // optionally defined later on\n    onSubtreeModified,\n    callDOMAttrModified,\n    getAttributesMirror,\n    observer,\n    observe,\n  \n    // based on setting prototype capability\n    // will check proto or the expando attribute\n    // in order to setup the node once\n    patchIfNotAlready,\n    patch\n  ;\n  \n  // only if needed\n  if (!V0) {\n  \n    if (sPO || hasProto) {\n        patchIfNotAlready = function (node, proto) {\n          if (!iPO.call(proto, node)) {\n            setupNode(node, proto);\n          }\n        };\n        patch = setupNode;\n    } else {\n        patchIfNotAlready = function (node, proto) {\n          if (!node[EXPANDO_UID]) {\n            node[EXPANDO_UID] = Object(true);\n            setupNode(node, proto);\n          }\n        };\n        patch = patchIfNotAlready;\n    }\n  \n    if (IE8) {\n      doesNotSupportDOMAttrModified = false;\n      (function (){\n        var\n          descriptor = gOPD(HTMLElementPrototype, ADD_EVENT_LISTENER),\n          addEventListener = descriptor.value,\n          patchedRemoveAttribute = function (name) {\n            var e = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true});\n            e.attrName = name;\n            e.prevValue = getAttribute.call(this, name);\n            e.newValue = null;\n            e[REMOVAL] = e.attrChange = 2;\n            removeAttribute.call(this, name);\n            dispatchEvent.call(this, e);\n          },\n          patchedSetAttribute = function (name, value) {\n            var\n              had = hasAttribute.call(this, name),\n              old = had && getAttribute.call(this, name),\n              e = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true})\n            ;\n            setAttribute.call(this, name, value);\n            e.attrName = name;\n            e.prevValue = had ? old : null;\n            e.newValue = value;\n            if (had) {\n              e[MODIFICATION] = e.attrChange = 1;\n            } else {\n              e[ADDITION] = e.attrChange = 0;\n            }\n            dispatchEvent.call(this, e);\n          },\n          onPropertyChange = function (e) {\n            // jshint eqnull:true\n            var\n              node = e.currentTarget,\n              superSecret = node[EXPANDO_UID],\n              propertyName = e.propertyName,\n              event\n            ;\n            if (superSecret.hasOwnProperty(propertyName)) {\n              superSecret = superSecret[propertyName];\n              event = new CustomEvent(DOM_ATTR_MODIFIED, {bubbles: true});\n              event.attrName = superSecret.name;\n              event.prevValue = superSecret.value || null;\n              event.newValue = (superSecret.value = node[propertyName] || null);\n              if (event.prevValue == null) {\n                event[ADDITION] = event.attrChange = 0;\n              } else {\n                event[MODIFICATION] = event.attrChange = 1;\n              }\n              dispatchEvent.call(node, event);\n            }\n          }\n        ;\n        descriptor.value = function (type, handler, capture) {\n          if (\n            type === DOM_ATTR_MODIFIED &&\n            this[ATTRIBUTE_CHANGED_CALLBACK] &&\n            this.setAttribute !== patchedSetAttribute\n          ) {\n            this[EXPANDO_UID] = {\n              className: {\n                name: 'class',\n                value: this.className\n              }\n            };\n            this.setAttribute = patchedSetAttribute;\n            this.removeAttribute = patchedRemoveAttribute;\n            addEventListener.call(this, 'propertychange', onPropertyChange);\n          }\n          addEventListener.call(this, type, handler, capture);\n        };\n        defineProperty(HTMLElementPrototype, ADD_EVENT_LISTENER, descriptor);\n      }());\n    } else if (!MutationObserver) {\n      documentElement[ADD_EVENT_LISTENER](DOM_ATTR_MODIFIED, DOMAttrModified);\n      documentElement.setAttribute(EXPANDO_UID, 1);\n      documentElement.removeAttribute(EXPANDO_UID);\n      if (doesNotSupportDOMAttrModified) {\n        onSubtreeModified = function (e) {\n          var\n            node = this,\n            oldAttributes,\n            newAttributes,\n            key\n          ;\n          if (node === e.target) {\n            oldAttributes = node[EXPANDO_UID];\n            node[EXPANDO_UID] = (newAttributes = getAttributesMirror(node));\n            for (key in newAttributes) {\n              if (!(key in oldAttributes)) {\n                // attribute was added\n                return callDOMAttrModified(\n                  0,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  ADDITION\n                );\n              } else if (newAttributes[key] !== oldAttributes[key]) {\n                // attribute was changed\n                return callDOMAttrModified(\n                  1,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  MODIFICATION\n                );\n              }\n            }\n            // checking if it has been removed\n            for (key in oldAttributes) {\n              if (!(key in newAttributes)) {\n                // attribute removed\n                return callDOMAttrModified(\n                  2,\n                  node,\n                  key,\n                  oldAttributes[key],\n                  newAttributes[key],\n                  REMOVAL\n                );\n              }\n            }\n          }\n        };\n        callDOMAttrModified = function (\n          attrChange,\n          currentTarget,\n          attrName,\n          prevValue,\n          newValue,\n          action\n        ) {\n          var e = {\n            attrChange: attrChange,\n            currentTarget: currentTarget,\n            attrName: attrName,\n            prevValue: prevValue,\n            newValue: newValue\n          };\n          e[action] = attrChange;\n          onDOMAttrModified(e);\n        };\n        getAttributesMirror = function (node) {\n          for (var\n            attr, name,\n            result = {},\n            attributes = node.attributes,\n            i = 0, length = attributes.length;\n            i < length; i++\n          ) {\n            attr = attributes[i];\n            name = attr.name;\n            if (name !== 'setAttribute') {\n              result[name] = attr.value;\n            }\n          }\n          return result;\n        };\n      }\n    }\n  \n    // set as enumerable, writable and configurable\n    document[REGISTER_ELEMENT] = function registerElement(type, options) {\n      upperType = type.toUpperCase();\n      if (setListener) {\n        // only first time document.registerElement is used\n        // we need to set this listener\n        // setting it by default might slow down for no reason\n        setListener = false;\n        if (MutationObserver) {\n          observer = (function(attached, detached){\n            function checkEmAll(list, callback) {\n              for (var i = 0, length = list.length; i < length; callback(list[i++])){}\n            }\n            return new MutationObserver(function (records) {\n              for (var\n                current, node, newValue,\n                i = 0, length = records.length; i < length; i++\n              ) {\n                current = records[i];\n                if (current.type === 'childList') {\n                  checkEmAll(current.addedNodes, attached);\n                  checkEmAll(current.removedNodes, detached);\n                } else {\n                  node = current.target;\n                  if (notFromInnerHTMLHelper &&\n                      node[ATTRIBUTE_CHANGED_CALLBACK] &&\n                      current.attributeName !== 'style') {\n                    newValue = getAttribute.call(node, current.attributeName);\n                    if (newValue !== current.oldValue) {\n                      node[ATTRIBUTE_CHANGED_CALLBACK](\n                        current.attributeName,\n                        current.oldValue,\n                        newValue\n                      );\n                    }\n                  }\n                }\n              }\n            });\n          }(executeAction(ATTACHED), executeAction(DETACHED)));\n          observe = function (node) {\n            observer.observe(\n              node,\n              {\n                childList: true,\n                subtree: true\n              }\n            );\n            return node;\n          };\n          observe(document);\n          if (attachShadow) {\n            HTMLElementPrototype.attachShadow = function () {\n              return observe(attachShadow.apply(this, arguments));\n            };\n          }\n        } else {\n          asapQueue = [];\n          document[ADD_EVENT_LISTENER]('DOMNodeInserted', onDOMNode(ATTACHED));\n          document[ADD_EVENT_LISTENER]('DOMNodeRemoved', onDOMNode(DETACHED));\n        }\n  \n        document[ADD_EVENT_LISTENER](DOM_CONTENT_LOADED, onReadyStateChange);\n        document[ADD_EVENT_LISTENER]('readystatechange', onReadyStateChange);\n  \n        HTMLElementPrototype.cloneNode = function (deep) {\n          var\n            node = cloneNode.call(this, !!deep),\n            i = getTypeIndex(node)\n          ;\n          if (-1 < i) patch(node, protos[i]);\n          if (deep && query.length) loopAndSetup(node.querySelectorAll(query));\n          return node;\n        };\n      }\n  \n      if (justSetup) return (justSetup = false);\n  \n      if (-2 < (\n        indexOf.call(types, PREFIX_IS + upperType) +\n        indexOf.call(types, PREFIX_TAG + upperType)\n      )) {\n        throwTypeError(type);\n      }\n  \n      if (!validName.test(upperType) || -1 < indexOf.call(invalidNames, upperType)) {\n        throw new Error('The type ' + type + ' is invalid');\n      }\n  \n      var\n        constructor = function () {\n          return extending ?\n            document.createElement(nodeName, upperType) :\n            document.createElement(nodeName);\n        },\n        opt = options || OP,\n        extending = hOP.call(opt, EXTENDS),\n        nodeName = extending ? options[EXTENDS].toUpperCase() : upperType,\n        upperType,\n        i\n      ;\n  \n      if (extending && -1 < (\n        indexOf.call(types, PREFIX_TAG + nodeName)\n      )) {\n        throwTypeError(nodeName);\n      }\n  \n      i = types.push((extending ? PREFIX_IS : PREFIX_TAG) + upperType) - 1;\n  \n      query = query.concat(\n        query.length ? ',' : '',\n        extending ? nodeName + '[is=\"' + type.toLowerCase() + '\"]' : nodeName\n      );\n  \n      constructor.prototype = (\n        protos[i] = hOP.call(opt, 'prototype') ?\n          opt.prototype :\n          create(HTMLElementPrototype)\n      );\n  \n      if (query.length) loopAndVerify(\n        document.querySelectorAll(query),\n        ATTACHED\n      );\n  \n      return constructor;\n    };\n  \n    document.createElement = (patchedCreateElement = function (localName, typeExtension) {\n      var\n        is = getIs(typeExtension),\n        node = is ?\n          createElement.call(document, localName, secondArgument(is)) :\n          createElement.call(document, localName),\n        name = '' + localName,\n        i = indexOf.call(\n          types,\n          (is ? PREFIX_IS : PREFIX_TAG) +\n          (is || name).toUpperCase()\n        ),\n        setup = -1 < i\n      ;\n      if (is) {\n        node.setAttribute('is', is = is.toLowerCase());\n        if (setup) {\n          setup = isInQSA(name.toUpperCase(), is);\n        }\n      }\n      notFromInnerHTMLHelper = !document.createElement.innerHTMLHelper;\n      if (setup) patch(node, protos[i]);\n      return node;\n    });\n  \n  }\n  \n  function ASAP() {\n    var queue = asapQueue.splice(0, asapQueue.length);\n    asapTimer = 0;\n    while (queue.length) {\n      queue.shift().call(\n        null, queue.shift()\n      );\n    }\n  }\n  \n  function loopAndVerify(list, action) {\n    for (var i = 0, length = list.length; i < length; i++) {\n      verifyAndSetupAndAction(list[i], action);\n    }\n  }\n  \n  function loopAndSetup(list) {\n    for (var i = 0, length = list.length, node; i < length; i++) {\n      node = list[i];\n      patch(node, protos[getTypeIndex(node)]);\n    }\n  }\n  \n  function executeAction(action) {\n    return function (node) {\n      if (isValidNode(node)) {\n        verifyAndSetupAndAction(node, action);\n        if (query.length) loopAndVerify(\n          node.querySelectorAll(query),\n          action\n        );\n      }\n    };\n  }\n  \n  function getTypeIndex(target) {\n    var\n      is = getAttribute.call(target, 'is'),\n      nodeName = target.nodeName.toUpperCase(),\n      i = indexOf.call(\n        types,\n        is ?\n            PREFIX_IS + is.toUpperCase() :\n            PREFIX_TAG + nodeName\n      )\n    ;\n    return is && -1 < i && !isInQSA(nodeName, is) ? -1 : i;\n  }\n  \n  function isInQSA(name, type) {\n    return -1 < query.indexOf(name + '[is=\"' + type + '\"]');\n  }\n  \n  function onDOMAttrModified(e) {\n    var\n      node = e.currentTarget,\n      attrChange = e.attrChange,\n      attrName = e.attrName,\n      target = e.target,\n      addition = e[ADDITION] || 2,\n      removal = e[REMOVAL] || 3\n    ;\n    if (notFromInnerHTMLHelper &&\n        (!target || target === node) &&\n        node[ATTRIBUTE_CHANGED_CALLBACK] &&\n        attrName !== 'style' && (\n          e.prevValue !== e.newValue ||\n          // IE9, IE10, and Opera 12 gotcha\n          e.newValue === '' && (\n            attrChange === addition ||\n            attrChange === removal\n          )\n    )) {\n      node[ATTRIBUTE_CHANGED_CALLBACK](\n        attrName,\n        attrChange === addition ? null : e.prevValue,\n        attrChange === removal ? null : e.newValue\n      );\n    }\n  }\n  \n  function onDOMNode(action) {\n    var executor = executeAction(action);\n    return function (e) {\n      asapQueue.push(executor, e.target);\n      if (asapTimer) clearTimeout(asapTimer);\n      asapTimer = setTimeout(ASAP, 1);\n    };\n  }\n  \n  function onReadyStateChange(e) {\n    if (dropDomContentLoaded) {\n      dropDomContentLoaded = false;\n      e.currentTarget.removeEventListener(DOM_CONTENT_LOADED, onReadyStateChange);\n    }\n    if (query.length) loopAndVerify(\n      (e.target || document).querySelectorAll(query),\n      e.detail === DETACHED ? DETACHED : ATTACHED\n    );\n    if (IE8) purge();\n  }\n  \n  function patchedSetAttribute(name, value) {\n    // jshint validthis:true\n    var self = this;\n    setAttribute.call(self, name, value);\n    onSubtreeModified.call(self, {target: self});\n  }\n  \n  function setupNode(node, proto) {\n    setPrototype(node, proto);\n    if (observer) {\n      observer.observe(node, attributesObserver);\n    } else {\n      if (doesNotSupportDOMAttrModified) {\n        node.setAttribute = patchedSetAttribute;\n        node[EXPANDO_UID] = getAttributesMirror(node);\n        node[ADD_EVENT_LISTENER](DOM_SUBTREE_MODIFIED, onSubtreeModified);\n      }\n      node[ADD_EVENT_LISTENER](DOM_ATTR_MODIFIED, onDOMAttrModified);\n    }\n    if (node[CREATED_CALLBACK] && notFromInnerHTMLHelper) {\n      node.created = true;\n      node[CREATED_CALLBACK]();\n      node.created = false;\n    }\n  }\n  \n  function purge() {\n    for (var\n      node,\n      i = 0,\n      length = targets.length;\n      i < length; i++\n    ) {\n      node = targets[i];\n      if (!documentElement.contains(node)) {\n        length--;\n        targets.splice(i--, 1);\n        verifyAndSetupAndAction(node, DETACHED);\n      }\n    }\n  }\n  \n  function throwTypeError(type) {\n    throw new Error('A ' + type + ' type is already registered');\n  }\n  \n  function verifyAndSetupAndAction(node, action) {\n    var\n      fn,\n      i = getTypeIndex(node)\n    ;\n    if (-1 < i) {\n      patchIfNotAlready(node, protos[i]);\n      i = 0;\n      if (action === ATTACHED && !node[ATTACHED]) {\n        node[DETACHED] = false;\n        node[ATTACHED] = true;\n        i = 1;\n        if (IE8 && indexOf.call(targets, node) < 0) {\n          targets.push(node);\n        }\n      } else if (action === DETACHED && !node[DETACHED]) {\n        node[ATTACHED] = false;\n        node[DETACHED] = true;\n        i = 1;\n      }\n      if (i && (fn = node[action + CALLBACK])) fn.call(node);\n    }\n  }\n  \n  \n  \n  // V1 in da House!\n  function CustomElementRegistry() {}\n  \n  CustomElementRegistry.prototype = {\n    constructor: CustomElementRegistry,\n    // a workaround for the stubborn WebKit\n    define: usableCustomElements ?\n      function (name, Class, options) {\n        if (options) {\n          CERDefine(name, Class, options);\n        } else {\n          var NAME = name.toUpperCase();\n          constructors[NAME] = {\n            constructor: Class,\n            create: [NAME]\n          };\n          nodeNames.set(Class, NAME);\n          customElements.define(name, Class);\n        }\n      } :\n      CERDefine,\n    get: usableCustomElements ?\n      function (name) {\n        return customElements.get(name) || get(name);\n      } :\n      get,\n    whenDefined: usableCustomElements ?\n      function (name) {\n        return Promise.race([\n          customElements.whenDefined(name),\n          whenDefined(name)\n        ]);\n      } :\n      whenDefined\n  };\n  \n  function CERDefine(name, Class, options) {\n    var\n      is = options && options[EXTENDS] || '',\n      CProto = Class.prototype,\n      proto = create(CProto),\n      attributes = Class.observedAttributes || empty,\n      definition = {prototype: proto}\n    ;\n    // TODO: is this needed at all since it's inherited?\n    // defineProperty(proto, 'constructor', {value: Class});\n    safeProperty(proto, CREATED_CALLBACK, {\n        value: function () {\n          if (justCreated) justCreated = false;\n          else if (!this[DRECEV1]) {\n            this[DRECEV1] = true;\n            new Class(this);\n            if (CProto[CREATED_CALLBACK])\n              CProto[CREATED_CALLBACK].call(this);\n            var info = constructors[nodeNames.get(Class)];\n            if (!usableCustomElements || info.create.length > 1) {\n              notifyAttributes(this);\n            }\n          }\n      }\n    });\n    safeProperty(proto, ATTRIBUTE_CHANGED_CALLBACK, {\n      value: function (name) {\n        if (-1 < indexOf.call(attributes, name))\n          CProto[ATTRIBUTE_CHANGED_CALLBACK].apply(this, arguments);\n      }\n    });\n    if (CProto[CONNECTED_CALLBACK]) {\n      safeProperty(proto, ATTACHED_CALLBACK, {\n        value: CProto[CONNECTED_CALLBACK]\n      });\n    }\n    if (CProto[DISCONNECTED_CALLBACK]) {\n      safeProperty(proto, DETACHED_CALLBACK, {\n        value: CProto[DISCONNECTED_CALLBACK]\n      });\n    }\n    if (is) definition[EXTENDS] = is;\n    name = name.toUpperCase();\n    constructors[name] = {\n      constructor: Class,\n      create: is ? [is, secondArgument(name)] : [name]\n    };\n    nodeNames.set(Class, name);\n    document[REGISTER_ELEMENT](name.toLowerCase(), definition);\n    whenDefined(name);\n    waitingList[name].r();\n  }\n  \n  function get(name) {\n    var info = constructors[name.toUpperCase()];\n    return info && info.constructor;\n  }\n  \n  function getIs(options) {\n    return typeof options === 'string' ?\n        options : (options && options.is || '');\n  }\n  \n  function notifyAttributes(self) {\n    var\n      callback = self[ATTRIBUTE_CHANGED_CALLBACK],\n      attributes = callback ? self.attributes : empty,\n      i = attributes.length,\n      attribute\n    ;\n    while (i--) {\n      attribute =  attributes[i]; // || attributes.item(i);\n      callback.call(\n        self,\n        attribute.name || attribute.nodeName,\n        null,\n        attribute.value || attribute.nodeValue\n      );\n    }\n  }\n  \n  function whenDefined(name) {\n    name = name.toUpperCase();\n    if (!(name in waitingList)) {\n      waitingList[name] = {};\n      waitingList[name].p = new Promise(function (resolve) {\n        waitingList[name].r = resolve;\n      });\n    }\n    return waitingList[name].p;\n  }\n  \n  function polyfillV1() {\n    if (customElements) delete window.customElements;\n    defineProperty(window, 'customElements', {\n      configurable: true,\n      value: new CustomElementRegistry()\n    });\n    defineProperty(window, 'CustomElementRegistry', {\n      configurable: true,\n      value: CustomElementRegistry\n    });\n    for (var\n      patchClass = function (name) {\n        var Class = window[name];\n        if (Class) {\n          window[name] = function CustomElementsV1(self) {\n            var info, isNative;\n            if (!self) self = this;\n            if (!self[DRECEV1]) {\n              justCreated = true;\n              info = constructors[nodeNames.get(self.constructor)];\n              isNative = usableCustomElements && info.create.length === 1;\n              self = isNative ?\n                Reflect.construct(Class, empty, info.constructor) :\n                document.createElement.apply(document, info.create);\n              self[DRECEV1] = true;\n              justCreated = false;\n              if (!isNative) notifyAttributes(self);\n            }\n            return self;\n          };\n          window[name].prototype = Class.prototype;\n          try {\n            Class.prototype.constructor = window[name];\n          } catch(WebKit) {\n            fixGetClass = true;\n            defineProperty(Class, DRECEV1, {value: window[name]});\n          }\n        }\n      },\n      Classes = htmlClass.get(/^HTML[A-Z]*[a-z]/),\n      i = Classes.length;\n      i--;\n      patchClass(Classes[i])\n    ) {}\n    (document.createElement = function (name, options) {\n      var is = getIs(options);\n      return is ?\n        patchedCreateElement.call(this, name, secondArgument(is)) :\n        patchedCreateElement.call(this, name);\n    });\n    if (!V0) {\n      justSetup = true;\n      document[REGISTER_ELEMENT]('');\n    }\n  }\n  \n  // if customElements is not there at all\n  if (!customElements || polyfill === 'force') polyfillV1();\n  else {\n    // if available test extends work as expected\n    try {\n      (function (DRE, options, name) {\n        options[EXTENDS] = 'a';\n        DRE.prototype = create(HTMLAnchorElement.prototype);\n        DRE.prototype.constructor = DRE;\n        window.customElements.define(name, DRE, options);\n        if (\n          getAttribute.call(document.createElement('a', {is: name}), 'is') !== name ||\n          (usableCustomElements && getAttribute.call(new DRE(), 'is') !== name)\n        ) {\n          throw options;\n        }\n      }(\n        function DRE() {\n          return Reflect.construct(HTMLAnchorElement, [], DRE);\n        },\n        {},\n        'document-register-element-a'\n      ));\n    } catch(o_O) {\n      // or force the polyfill if not\n      // and keep internal original reference\n      polyfillV1();\n    }\n  }\n  \n  try {\n    createElement.call(document, 'a', 'a');\n  } catch(FireFox) {\n    secondArgument = function (is) {\n      return {is: is.toLowerCase()};\n    };\n  }\n  \n}\n\nmodule.exports = installCustomElements;\ninstallCustomElements(global);\n","'use strict';\n\n/**\n * Constructs a ES6/Promises A+ Promise instance.\n *\n * @constructor\n * @param {function(function(*=), function (*=))} resolver\n */\nfunction Promise(resolver) {\n  if (!(this instanceof Promise)) {\n    throw new TypeError('Constructor Promise requires `new`');\n  }\n  if (!isFunction(resolver)) {\n    throw new TypeError('Must pass resolver function');\n  }\n\n  /**\n   * @type {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise}\n   * @private\n   */\n  this._state = PendingPromise;\n\n  /**\n   * @type {*}\n   * @private\n   */\n  this._value = [];\n\n  /**\n   * @type {boolean}\n   * @private\n   */\n  this._isChainEnd = true;\n\n  doResolve(\n    this,\n    adopter(this, FulfilledPromise),\n    adopter(this, RejectedPromise),\n    { then: resolver }\n  );\n}\n\n/****************************\n  Public Instance Methods\n ****************************/\n\n/**\n * Creates a new promise instance that will receive the result of this promise\n * as inputs to the onFulfilled or onRejected callbacks.\n *\n * @param {function(*)} onFulfilled\n * @param {function(*)} onRejected\n */\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  onFulfilled = isFunction(onFulfilled) ? onFulfilled : void 0;\n  onRejected = isFunction(onRejected) ? onRejected : void 0;\n\n  if (onFulfilled || onRejected) {\n    this._isChainEnd = false;\n  }\n\n  return this._state(\n    this._value,\n    onFulfilled,\n    onRejected\n  );\n};\n\n/**\n * Creates a new promise that will handle the rejected state of this promise.\n *\n * @param {function(*)} onRejected\n * @returns {!Promise}\n */\nPromise.prototype.catch = function(onRejected) {\n  return this.then(void 0, onRejected);\n};\n\n/****************************\n  Public Static Methods\n ****************************/\n\n/**\n * Creates a fulfilled Promise of value. If value is itself a then-able,\n * resolves with the then-able's value.\n *\n * @this {!Promise}\n * @param {*=} value\n * @returns {!Promise}\n */\nPromise.resolve = function(value) {\n  var Constructor = this;\n  var promise;\n\n  if (isObject(value) && value instanceof this) {\n    promise = value;\n  } else {\n    promise = new Constructor(function(resolve) {\n      resolve(value);\n    });\n  }\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a rejected Promise of reason.\n *\n * @this {!Promise}\n * @param {*=} reason\n * @returns {!Promise}\n */\nPromise.reject = function(reason) {\n  var Constructor = this;\n  var promise = new Constructor(function(_, reject) {\n    reject(reason);\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve with an array of the values of the\n * passed in promises. If any promise rejects, the returned promise will\n * reject.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.all = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    var length = promises.length;\n    var values = new Array(length);\n\n    if (length === 0) {\n      return resolve(values);\n    }\n\n    each(promises, function(promise, index) {\n      Constructor.resolve(promise).then(function(value) {\n        values[index] = value;\n        if (--length === 0) {\n          resolve(values);\n        }\n      }, reject);\n    });\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\n/**\n * Creates a Promise that will resolve or reject based on the first\n * resolved or rejected promise.\n *\n * @this {!Promise}\n * @param {!Array<Promise|*>} promises\n * @returns {!Promise}\n */\nPromise.race = function(promises) {\n  var Constructor = this;\n  var promise = new Constructor(function(resolve, reject) {\n    for (var i = 0; i < promises.length; i++) {\n      Constructor.resolve(promises[i]).then(resolve, reject);\n    }\n  });\n\n  return /** @type {!Promise} */(promise);\n};\n\nvar onPossiblyUnhandledRejection = function(reason, promise) {\n  throw reason;\n};\n\n/**\n * An internal use static function.\n */\nPromise._overrideUnhandledExceptionHandler = function(handler) {\n  onPossiblyUnhandledRejection = handler;\n};\n\n/****************************\n  Private functions\n ****************************/\n\n/**\n * The Fulfilled Promise state. Calls onFulfilled with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onFulfilled, returns the current promise to avoid an promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} value The current promise's resolved value.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} unused\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Fulfilled state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction FulfilledPromise(value, onFulfilled, unused, deferred) {\n  if (!onFulfilled) {\n    deferredAdopt(deferred, FulfilledPromise, value);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onFulfilled, value));\n  return deferred.promise;\n}\n\n/**\n * The Rejected Promise state. Calls onRejected with the resolved value of\n * this promise, creating a new promise.\n *\n * If there is no onRejected, returns the current promise to avoid an promise\n * instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} reason The current promise's rejection reason.\n * @param {function(*=)=} unused\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Rejected state from the\n *     Pending state.\n * @returns {!Promise}\n */\nfunction RejectedPromise(reason, unused, onRejected, deferred) {\n  if (!onRejected) {\n    deferredAdopt(deferred, RejectedPromise, reason);\n    return this;\n  }\n  if (!deferred) {\n    deferred = new Deferred(this.constructor);\n  }\n  defer(tryCatchDeferred(deferred, onRejected, reason));\n  return deferred.promise;\n}\n\n/**\n * The Pending Promise state. Eventually calls onFulfilled once the promise has\n * resolved, or onRejected once the promise rejects.\n *\n * If there is no onFulfilled and no onRejected, returns the current promise to\n * avoid an promise instance.\n *\n * @this {!Promise} The current promise\n * @param {*=} queue The current promise's pending promises queue.\n * @param {function(*=)=} onFulfilled\n * @param {function(*=)=} onRejected\n * @param {Deferred} deferred A deferred object that holds a promise and its\n *     resolve and reject functions. It IS NOT passed when called from\n *     Promise#then to save an object instance (since we may return the current\n *     promise). It IS passed in when adopting the Pending state from the\n *     Pending state of another promise.\n * @returns {!Promise}\n */\nfunction PendingPromise(queue, onFulfilled, onRejected, deferred) {\n  if (!deferred) {\n    if (!onFulfilled && !onRejected) { return this; }\n    deferred = new Deferred(this.constructor);\n  }\n  queue.push({\n    deferred: deferred,\n    onFulfilled: onFulfilled || deferred.resolve,\n    onRejected: onRejected || deferred.reject\n  });\n  return deferred.promise;\n}\n\n/**\n * Constructs a deferred instance that holds a promise and its resolve and\n * reject functions.\n *\n * @constructor\n */\nfunction Deferred(Promise) {\n  var deferred = this;\n  /** @type {!Promise} */\n  this.promise = new Promise(function(resolve, reject) {\n    /** @type {function(*=)} */\n    deferred.resolve = resolve;\n\n    /** @type {function(*=)} */\n    deferred.reject = reject;\n  });\n  return deferred;\n}\n\n/**\n * Transitions the state of promise to another state. This is only ever called\n * on with a promise that is currently in the Pending state.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction adopt(promise, state, value, adoptee) {\n  var queue = promise._value;\n  promise._state = state;\n  promise._value = value;\n\n  if (adoptee && state === PendingPromise) {\n    adoptee._state(value, void 0, void 0, {\n      promise: promise,\n      resolve: void 0,\n      reject: void 0\n    });\n  }\n\n  for (var i = 0; i < queue.length; i++) {\n    var next = queue[i];\n    promise._state(\n      value,\n      next.onFulfilled,\n      next.onRejected,\n      next.deferred\n    );\n  }\n  queue.length = 0;\n\n  // Determine if this rejected promise will be \"handled\".\n  if (state === RejectedPromise && promise._isChainEnd) {\n    setTimeout(function() {\n      if (promise._isChainEnd) {\n        onPossiblyUnhandledRejection(value, promise);\n      }\n    }, 0);\n  }\n}\n\n/**\n * A partial application of adopt.\n *\n * @param {!Promise} promise\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @returns {function(*=)}\n */\nfunction adopter(promise, state) {\n  return function(value) {\n    adopt(promise, state, value);\n  };\n}\n\n/**\n * Updates a deferred promises state. Necessary for updating an adopting\n * promise's state when the adoptee resolves.\n *\n * @param {?Deferred} deferred\n * @param {function(this:Promise,*=,function(*=),function(*=),Deferred):!Promise} state\n * @param {*=} value\n */\nfunction deferredAdopt(deferred, state, value) {\n  if (deferred) {\n    var promise = deferred.promise;\n    promise._state = state;\n    promise._value = value;\n  }\n}\n\n/**\n * A no-op function to prevent double resolving.\n */\nfunction noop() {}\n\n/**\n * Tests if fn is a Function\n *\n * @param {*} fn\n * @returns {boolean}\n */\nfunction isFunction(fn) {\n  return typeof fn === 'function';\n}\n\n/**\n * Tests if fn is an Object\n *\n * @param {*} obj\n * @returns {boolean}\n */\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\n/**\n * Iterates over each element of an array, calling the iterator with the\n * element and its index.\n *\n * @param {!Array} collection\n * @param {function(*=,number)} iterator\n */\nfunction each(collection, iterator) {\n  for (var i = 0; i < collection.length; i++) {\n    iterator(collection[i], i);\n  }\n}\n\n/**\n * Creates a function that will attempt to resolve the deferred with the return\n * of fn. If any error is raised, rejects instead.\n *\n * @param {!Deferred} deferred\n * @param {function(*=)} fn\n * @param {*} arg\n * @returns {function()}\n */\nfunction tryCatchDeferred(deferred, fn, arg) {\n  var promise = deferred.promise;\n  var resolve = deferred.resolve;\n  var reject = deferred.reject;\n  return function() {\n    try {\n      var result = fn(arg);\n      doResolve(promise, resolve, reject, result, result);\n    } catch (e) {\n      reject(e);\n    }\n  };\n}\n\n/**\n * Queues and executes multiple deferred functions on another run loop.\n */\nvar defer = (function() {\n  /**\n   * Defers fn to another run loop.\n   */\n  var scheduleFlush;\n  if (typeof window !== 'undefined' && window.postMessage) {\n    window.addEventListener('message', flush);\n    scheduleFlush = function() {\n      window.postMessage('macro-task', '*');\n    };\n  } else {\n    scheduleFlush = function() {\n      setTimeout(flush, 0);\n    };\n  }\n\n  var queue = new Array(16);\n  var length = 0;\n\n  function flush() {\n    for (var i = 0; i < length; i++) {\n      var fn = queue[i];\n      queue[i] = null;\n      fn();\n    }\n    length = 0;\n  }\n\n  /**\n   * @param {function()} fn\n   */\n  function defer(fn) {\n    if (length === 0) { scheduleFlush(); }\n    queue[length++] = fn;\n  }\n\n  return defer;\n})();\n\n/**\n * The Promise resolution procedure.\n * https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n *\n * @param {!Promise} promise\n * @param {function(*=)} resolve\n * @param {function(*=)} reject\n * @param {*} value\n * @param {*=} context\n */\nfunction doResolve(promise, resolve, reject, value, context) {\n  var _reject = reject;\n  var then;\n  var _resolve;\n  try {\n    if (value === promise) {\n      throw new TypeError('Cannot fulfill promise with itself');\n    }\n    var isObj = isObject(value);\n    if (isObj && value instanceof promise.constructor) {\n      adopt(promise, value._state, value._value, value);\n    } else if (isObj && (then = value.then) && isFunction(then)) {\n      _resolve = function(value) {\n        _resolve = _reject = noop;\n        doResolve(promise, resolve, reject, value, value);\n      };\n      _reject = function(reason) {\n        _resolve = _reject = noop;\n        reject(reason);\n      };\n      then.call(\n        context,\n        function(value) { _resolve(value); },\n        function(reason) { _reject(reason); }\n      );\n    } else {\n      resolve(value);\n    }\n  } catch (e) {\n    _reject(e);\n  }\n}\n\nmodule.exports = Promise;\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Trust level of an action.\n *\n * Corresponds to degree of user intent, i.e. events triggered with strong\n * user intent have high trust.\n *\n * @enum {number}\n */\nexport const ActionTrust = {\n  LOW: 1,\n  HIGH: 100,\n};\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\n\n/**\n * Helper method to trigger analytics event if amp-analytics is available.\n * TODO: Do not expose this function\n * @param {!Element} target\n * @param {string} eventType\n * @param {!Object<string, string>=} opt_vars A map of vars and their values.\n */\nexport function triggerAnalyticsEvent(target, eventType, opt_vars) {\n  Services.analyticsForDocOrNull(target).then(analytics => {\n    if (!analytics) {\n      return;\n    }\n    analytics.triggerEventForTarget(target, eventType, opt_vars);\n  });\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {removeElement} from './dom';\nimport {setStyles} from './style';\n\n\n/**\n * @param {!Window} win\n * @param {string} text\n * @return {boolean}\n */\nexport function copyTextToClipboard(win, text) {\n  let copySuccessful = false;\n  const doc = win.document;\n\n  const textarea = doc.createElement('textarea');\n\n  setStyles(textarea, {\n    'position': 'fixed',\n    'top': 0,\n    'left': 0,\n    'width': '50px',\n    'height': '50px',\n    'padding': 0,\n    'border': 'none',\n    'outline': 'none',\n    'background': 'transparent',\n  });\n\n  textarea.value = text;\n  textarea.readOnly = true;\n  textarea.contentEditable = true;\n\n  doc.body.appendChild(textarea);\n  const range = doc.createRange();\n  range.selectNode(textarea);\n  win.getSelection().removeAllRanges();\n  win.getSelection().addRange(range);\n  textarea.setSelectionRange(0, text.length);\n\n  try {\n    copySuccessful = doc.execCommand('copy');\n  } catch (e) {\n    // \n  }\n\n  removeElement(textarea);\n\n  return copySuccessful;\n}\n\n\n/**\n * @param {!Document} doc\n * @return {boolean}\n */\nexport function isCopyingToClipboardSupported(doc) {\n  return doc.queryCommandSupported('copy');\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Commonly used signals across different elements and documents.\n * @enum {string}\n */\nexport const CommonSignals = {\n\n  /**\n   * The element has been built.\n   */\n  BUILT: 'built',\n\n  /**\n   * The initial contents of an element/document/embed have been loaded.\n   */\n  INI_LOAD: 'ini-load',\n\n  /**\n   * The element has been loaded.\n   */\n  LOAD_END: 'load-end',\n\n  /**\n   * The element has started loading.\n   */\n  LOAD_START: 'load-start',\n\n  /**\n   * Rendering has been confirmed to have been started.\n   */\n  RENDER_START: 'render-start',\n\n  /**\n   * The element has been unlaid out.\n   */\n  UNLOAD: 'unload',\n};\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Allows for runtime configuration. Internally, the runtime should\n * use the src/config.js module for various constants. We can use the\n * AMP_CONFIG global to translate user-defined configurations to this\n * module.\n * @type {!Object<string, string>}\n */\nconst env = self.AMP_CONFIG || {};\n\nconst thirdPartyFrameRegex = typeof env['thirdPartyFrameRegex'] == 'string' ?\n  new RegExp(env['thirdPartyFrameRegex']) : env['thirdPartyFrameRegex'];\n\nconst cdnProxyRegex = typeof env['cdnProxyRegex'] == 'string' ?\n  new RegExp(env['cdnProxyRegex']) : env['cdnProxyRegex'];\n\n/** @type {!Object<string, string|boolean|RegExp>} */\nexport const urls = {\n  thirdParty: env['thirdPartyUrl'] || 'https://3p.ampproject.net',\n  thirdPartyFrameHost: env['thirdPartyFrameHost'] || 'ampproject.net',\n  thirdPartyFrameRegex: thirdPartyFrameRegex || /^d-\\d+\\.ampproject\\.net$/,\n  cdn: env['cdnUrl'] || 'https://cdn.ampproject.org',\n  /* Note that cdnProxyRegex is only ever checked against origins\n   * (proto://host[:port]) so does not need to consider path\n   */\n  cdnProxyRegex: cdnProxyRegex ||\n      /^https:\\/\\/([a-zA-Z0-9_-]+\\.)?cdn\\.ampproject\\.org$/,\n  localhostRegex: /^https?:\\/\\/localhost(:\\d+)?$/,\n  errorReporting: env['errorReportingUrl'] ||\n      'https://amp-error-reporting.appspot.com/r',\n  localDev: env['localDev'] || false,\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {endsWith} from './string';\nimport {\n  isProxyOrigin,\n  parseUrl,\n  tryDecodeUriComponent,\n} from './url';\nimport {urls} from './config';\n\n\n/**\n * Returns the value of the cookie. The cookie access is restricted and must\n * go through the privacy review. Before using this method please file a\n * GitHub issue with \"Privacy Review\" label.\n *\n * Returns the cookie's value or `null`.\n *\n * @param {!Window} win\n * @param {string} name\n * @return {?string}\n */\nexport function getCookie(win, name) {\n  const cookieString = tryGetDocumentCookieNoInline(win);\n  if (!cookieString) {\n    return null;\n  }\n  const cookies = cookieString.split(';');\n  for (let i = 0; i < cookies.length; i++) {\n    const cookie = cookies[i].trim();\n    const eq = cookie.indexOf('=');\n    if (eq == -1) {\n      continue;\n    }\n    if (tryDecodeUriComponent(cookie.substring(0, eq).trim()) == name) {\n      const value = cookie.substring(eq + 1).trim();\n      return tryDecodeUriComponent(value, value);\n    }\n  }\n  return null;\n}\n\n/**\n * This method should not be inlined to prevent TryCatch deoptimization.\n * NoInline keyword at the end of function name also prevents Closure compiler\n * from inlining the function.\n * @param {!Window} win\n * @return {string}\n */\nfunction tryGetDocumentCookieNoInline(win) {\n  try {\n    return win.document.cookie;\n  } catch (e) {\n    // Act as if no cookie is available. Exceptions can be thrown when\n    // AMP docs are opened on origins that do not allow setting\n    // cookies such as null origins.\n    return '';\n  }\n}\n\n/**\n * Sets the value of the cookie. The cookie access is restricted and must\n * go through the privacy review. Before using this method please file a\n * GitHub issue with \"Privacy Review\" label.\n *\n * @param {!Window} win\n * @param {string} name\n * @param {string} value\n * @param {time} expirationTime\n * @param {{\n *   highestAvailableDomain:(boolean|undefined),\n *   domain:(string|undefined)\n * }=} opt_options\n *     - highestAvailableDomain: If true, set the cookie at the widest domain\n *       scope allowed by the browser. E.g. on example.com if we are currently\n *       on www.example.com.\n *     - domain: Explicit domain to set.\n *     - allowOnProxyOrigin: Allow setting a cookie on the AMP Cache.\n */\nexport function setCookie(win, name, value, expirationTime, opt_options) {\n  checkOriginForSettingCookie(win, opt_options, name);\n  if (opt_options && opt_options.highestAvailableDomain) {\n    const parts = win.location.hostname.split('.');\n    let domain = parts[parts.length - 1];\n    for (let i = parts.length - 2; i >= 0; i--) {\n      domain = parts[i] + '.' + domain;\n      trySetCookie(win, name, value, expirationTime, domain);\n      if (getCookie(win, name) == value) {\n        return;\n      }\n    }\n  }\n  let domain = undefined;\n  if (opt_options && opt_options.domain) {\n    domain = opt_options.domain;\n  }\n  trySetCookie(win, name, value, expirationTime, domain);\n}\n\n/**\n * Attempt to set a cookie with the given params.\n *\n * @param {!Window} win\n * @param {string} name\n * @param {string} value\n * @param {time} expirationTime\n * @param {string|undefined} domain\n */\nfunction trySetCookie(win, name, value, expirationTime, domain) {\n  // We do not allow setting cookies on the domain that contains both\n  // the cdn. and www. hosts.\n  if (domain == 'ampproject.org') {\n    // Actively delete them.\n    value = 'delete';\n    expirationTime = 0;\n  }\n  const cookie = encodeURIComponent(name) + '=' +\n      encodeURIComponent(value) +\n      '; path=/' +\n      (domain ? '; domain=' + domain : '') +\n      '; expires=' + new Date(expirationTime).toUTCString();\n  try {\n    win.document.cookie = cookie;\n  } catch (ignore) {\n    // Do not throw if setting the cookie failed Exceptions can be thrown\n    // when AMP docs are opened on origins that do not allow setting\n    // cookies such as null origins.\n  }\n}\n\n/**\n * Throws if a given cookie should not be set on the given origin.\n * This is a defense-in-depth. Callers should never run into this.\n *\n * @param {!Window} win\n * @param {!Object|undefined} options\n * @param {string} name For the error message.\n */\nfunction checkOriginForSettingCookie(win, options, name) {\n  if (options && options.allowOnProxyOrigin) {\n    return;\n  }\n  if (isProxyOrigin(win.location.href)) {\n    throw new Error('Should never attempt to set cookie on proxy origin: '\n        + name);\n  }\n\n  const current = parseUrl(win.location.href).hostname.toLowerCase();\n  const proxy = parseUrl(urls.cdn).hostname.toLowerCase();\n  if (current == proxy || endsWith(current, '.' + proxy)) {\n    throw new Error('Should never attempt to set cookie on proxy origin.'\n        + ' (in depth check): ' + name);\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {cssEscape} from '../third_party/css-escape/css-escape';\nimport {dev} from './log';\nimport {dict} from './utils/object';\nimport {startsWith} from './string';\nimport {toWin} from './types';\n\nconst HTML_ESCAPE_CHARS = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#x27;',\n  '`': '&#x60;',\n};\nconst HTML_ESCAPE_REGEX = /(&|<|>|\"|'|`)/g;\n\n/** @const {string} */\nexport const UPGRADE_TO_CUSTOMELEMENT_PROMISE =\n    '__AMP_UPG_PRM';\n\n/** @const {string} */\nexport const UPGRADE_TO_CUSTOMELEMENT_RESOLVER =\n    '__AMP_UPG_RES';\n\n/**\n * Waits until the child element is constructed. Once the child is found, the\n * callback is executed.\n * @param {!Element} parent\n * @param {function(!Element):boolean} checkFunc\n * @param {function()} callback\n */\nexport function waitForChild(parent, checkFunc, callback) {\n  if (checkFunc(parent)) {\n    callback();\n    return;\n  }\n  /** @const {!Window} */\n  const win = toWin(parent.ownerDocument.defaultView);\n  if (win.MutationObserver) {\n    /** @const {MutationObserver} */\n    const observer = new win.MutationObserver(() => {\n      if (checkFunc(parent)) {\n        observer.disconnect();\n        callback();\n      }\n    });\n    observer.observe(parent, {childList: true});\n  } else {\n    /** @const {number} */\n    const interval = win.setInterval(() => {\n      if (checkFunc(parent)) {\n        win.clearInterval(interval);\n        callback();\n      }\n    }, /* milliseconds */ 5);\n  }\n}\n\n/**\n * Waits until the child element is constructed. Once the child is found, the\n * promise is resolved.\n * @param {!Element} parent\n * @param {function(!Element):boolean} checkFunc\n * @return {!Promise}\n */\nexport function waitForChildPromise(parent, checkFunc) {\n  return new Promise(resolve => {\n    waitForChild(parent, checkFunc, resolve);\n  });\n}\n\n/**\n * Waits for document's body to be available.\n * Will be deprecated soon; use {@link AmpDoc#whenBodyAvailable} or\n * @{link DocumentState#onBodyAvailable} instead.\n * @param {!Document} doc\n * @param {function()} callback\n */\nexport function waitForBody(doc, callback) {\n  waitForChild(doc.documentElement, () => !!doc.body, callback);\n}\n\n\n/**\n * Waits for document's body to be available.\n * @param {!Document} doc\n * @return {!Promise}\n */\nexport function waitForBodyPromise(doc) {\n  return new Promise(resolve => {\n    waitForBody(doc, resolve);\n  });\n}\n\n\n/**\n * Removes the element.\n * @param {!Element} element\n */\nexport function removeElement(element) {\n  if (element.parentElement) {\n    element.parentElement.removeChild(element);\n  }\n}\n\n\n/**\n * Removes all child nodes of the specified element.\n * @param {!Element} parent\n */\nexport function removeChildren(parent) {\n  while (parent.firstChild) {\n    parent.removeChild(parent.firstChild);\n  }\n}\n\n\n/**\n * Copies all children nodes of element \"from\" to element \"to\". Child nodes\n * are deeply cloned. Notice, that this method should be used with care and\n * preferably on smaller subtrees.\n * @param {!Element} from\n * @param {!Element|!DocumentFragment} to\n */\nexport function copyChildren(from, to) {\n  const frag = to.ownerDocument.createDocumentFragment();\n  for (let n = from.firstChild; n; n = n.nextSibling) {\n    frag.appendChild(n.cloneNode(true));\n  }\n  to.appendChild(frag);\n}\n\n/**\n * Insert the element in the root after the element named after or\n * if that is null at the beginning.\n * @param {!Element|!ShadowRoot} root\n * @param {!Element} element\n * @param {?Node} after\n */\nexport function insertAfterOrAtStart(root, element, after) {\n  if (after) {\n    if (after.nextSibling) {\n      root.insertBefore(element, after.nextSibling);\n    } else {\n      root.appendChild(element);\n    }\n  } else {\n    // Add at the start.\n    root.insertBefore(element, root.firstChild);\n  }\n}\n\n/**\n * Add attributes to an element.\n * @param {!Element} element\n * @param {!JsonObject<string, string>} attributes\n * @return {!Element} created element\n */\nexport function addAttributesToElement(element, attributes) {\n  for (const attr in attributes) {\n    element.setAttribute(attr, attributes[attr]);\n  }\n  return element;\n}\n\n/**\n * Create a new element on document with specified tagName and attributes.\n * @param {!Document} doc\n * @param {string} tagName\n * @param {!JsonObject<string, string>} attributes\n * @return {!Element} created element\n */\nexport function createElementWithAttributes(doc, tagName, attributes) {\n  const element = doc.createElement(tagName);\n  return addAttributesToElement(element, attributes);\n}\n\n/**\n * Returns true if node is connected (attached).\n * @param {!Node} node\n * @return {boolean}\n * @see https://dom.spec.whatwg.org/#connected\n */\nexport function isConnectedNode(node) {\n  // \"An element is connected if its shadow-including root is a document.\"\n  let n = node;\n  do {\n    n = rootNodeFor(n);\n    if (n.host) {\n      n = n.host;\n    } else {\n      break;\n    }\n  } while (true);\n  return n.nodeType === Node.DOCUMENT_NODE;\n}\n\n/**\n * Returns the root for a given node. Does not cross shadow DOM boundary.\n * @param {!Node} node\n * @return {!Node}\n */\nexport function rootNodeFor(node) {\n  if (Node.prototype.getRootNode) {\n    // Type checker says `getRootNode` may return null.\n    return node.getRootNode() || node;\n  }\n  let n;\n  for (n = node; !!n.parentNode; n = n.parentNode) {}\n  return n;\n}\n\n/**\n * Finds the closest element that satisfies the callback from this element\n * up the DOM subtree.\n * @param {!Element} element\n * @param {function(!Element):boolean} callback\n * @param {Element=} opt_stopAt optional elemnt to stop the search at.\n * @return {?Element}\n */\nexport function closest(element, callback, opt_stopAt) {\n  for (let el = element; el && el !== opt_stopAt; el = el.parentElement) {\n    if (callback(el)) {\n      return el;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds the closest node that satisfies the callback from this node\n * up the DOM subtree.\n * @param {!Node} node\n * @param {function(!Node):boolean} callback\n * @return {?Node}\n */\nexport function closestNode(node, callback) {\n  for (let n = node; n; n = n.parentNode) {\n    if (callback(n)) {\n      return n;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds the closest element with the specified name from this element\n * up the DOM subtree.\n * @param {!Element} element\n * @param {string} tagName\n * @return {?Element}\n */\nexport function closestByTag(element, tagName) {\n  if (element.closest) {\n    return element.closest(tagName);\n  }\n  tagName = tagName.toUpperCase();\n  return closest(element, el => {\n    return el.tagName == tagName;\n  });\n}\n\n/**\n * Finds the closest element with the specified selector from this element\n * @param {!Element} element\n * @param {string} selector\n * @return {?Element} closest ancestor if found.\n */\nexport function closestBySelector(element, selector) {\n  if (element.closest) {\n    return element.closest(selector);\n  }\n\n  return closest(element, el => {\n    return matches(el, selector);\n  });\n}\n\n/**\n * Checks if the given element matches the selector\n * @param  {!Element} el The element to verify\n * @param  {string} selector The selector to check against\n * @return {boolean} True if the element matched the selector. False otherwise.\n */\nexport function matches(el, selector) {\n  const matcher = el.matches ||\n      el.webkitMatchesSelector ||\n      el.mozMatchesSelector ||\n      el.msMatchesSelector ||\n      el.oMatchesSelector;\n  if (matcher) {\n    return matcher.call(el, selector);\n  }\n  return false; // IE8 always returns false.\n}\n\n/**\n * Finds the first descendant element with the specified name.\n * @param {!Element|!Document|!ShadowRoot} element\n * @param {string} tagName\n * @return {?Element}\n */\nexport function elementByTag(element, tagName) {\n  const elements = element.getElementsByTagName(tagName);\n  return elements[0] || null;\n}\n\n\n/**\n * Finds the first child element that satisfies the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {?Element}\n */\nexport function childElement(parent, callback) {\n  for (let child = parent.firstElementChild; child;\n    child = child.nextElementSibling) {\n    if (callback(child)) {\n      return child;\n    }\n  }\n  return null;\n}\n\n\n/**\n * Finds all child elements that satisfy the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {!Array<!Element>}\n */\nexport function childElements(parent, callback) {\n  const children = [];\n  for (let child = parent.firstElementChild; child;\n    child = child.nextElementSibling) {\n    if (callback(child)) {\n      children.push(child);\n    }\n  }\n  return children;\n}\n\n\n/**\n * Finds the last child element that satisfies the callback.\n * @param {!Element} parent\n * @param {function(!Element):boolean} callback\n * @return {?Element}\n */\nexport function lastChildElement(parent, callback) {\n  for (let child = parent.lastElementChild; child;\n    child = child.previousElementSibling) {\n    if (callback(child)) {\n      return child;\n    }\n  }\n  return null;\n}\n\n/**\n * Finds all child nodes that satisfy the callback.\n * These nodes can include Text, Comment and other child nodes.\n * @param {!Node} parent\n * @param {function(!Node):boolean} callback\n * @return {!Array<!Node>}\n */\nexport function childNodes(parent, callback) {\n  const nodes = [];\n  for (let child = parent.firstChild; child;\n    child = child.nextSibling) {\n    if (callback(child)) {\n      nodes.push(child);\n    }\n  }\n  return nodes;\n}\n\n/**\n * @type {boolean|undefined}\n * @visibleForTesting\n */\nlet scopeSelectorSupported;\n\n/**\n * @param {boolean|undefined} val\n * @visibleForTesting\n */\nexport function setScopeSelectorSupportedForTesting(val) {\n  scopeSelectorSupported = val;\n}\n\n/**\n * Test that the :scope selector is supported and behaves correctly.\n * @param {!Element} parent\n * @return {boolean}\n */\nfunction isScopeSelectorSupported(parent) {\n  const doc = parent.ownerDocument;\n  try {\n    const testElement = doc.createElement('div');\n    const testChild = doc.createElement('div');\n    testElement.appendChild(testChild);\n    // NOTE(cvializ, #12383): Firefox's implementation is incomplete,\n    // therefore we test actual functionality of`:scope` as well.\n    return testElement./*OK*/querySelector(':scope div') === testChild;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Finds the first child element that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {?Element}\n */\nexport function childElementByAttr(parent, attr) {\n  return scopedQuerySelector/*OK*/(parent, `> [${attr}]`);\n}\n\n\n/**\n * Finds the last child element that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {?Element}\n */\nexport function lastChildElementByAttr(parent, attr) {\n  return lastChildElement(parent, el => {\n    return el.hasAttribute(attr);\n  });\n}\n\n\n/**\n * Finds all child elements that has the specified attribute.\n * @param {!Element} parent\n * @param {string} attr\n * @return {!NodeList<!Element>}\n */\nexport function childElementsByAttr(parent, attr) {\n  return scopedQuerySelectorAll/*OK*/(parent, `> [${attr}]`);\n}\n\n\n/**\n * Finds the first child element that has the specified tag name.\n * @param {!Element} parent\n * @param {string} tagName\n * @return {?Element}\n */\nexport function childElementByTag(parent, tagName) {\n  return scopedQuerySelector/*OK*/(parent, `> ${tagName}`);\n}\n\n\n/**\n * Finds all child elements with the specified tag name.\n * @param {!Element} parent\n * @param {string} tagName\n * @return {!NodeList<!Element>}\n */\nexport function childElementsByTag(parent, tagName) {\n  return scopedQuerySelectorAll/*OK*/(parent, `> ${tagName}`);\n}\n\n\n/**\n * Finds the first element that matches `selector`, scoped inside `root`.\n * Note: in IE, this causes a quick mutation of the element's class list.\n * @param {!Element} root\n * @param {string} selector\n * @return {?Element}\n */\nexport function scopedQuerySelector(root, selector) {\n  if (scopeSelectorSupported == null) {\n    scopeSelectorSupported = isScopeSelectorSupported(root);\n  }\n  if (scopeSelectorSupported) {\n    return root./*OK*/querySelector(`:scope ${selector}`);\n  }\n\n  // Only IE.\n  const unique = 'i-amphtml-scoped';\n  root.classList.add(unique);\n  const element = root./*OK*/querySelector(`.${unique} ${selector}`);\n  root.classList.remove(unique);\n  return element;\n}\n\n\n/**\n * Finds the every element that matches `selector`, scoped inside `root`.\n * Note: in IE, this causes a quick mutation of the element's class list.\n * @param {!Element} root\n * @param {string} selector\n * @return {!NodeList<!Element>}\n */\nexport function scopedQuerySelectorAll(root, selector) {\n  if (scopeSelectorSupported == null) {\n    scopeSelectorSupported = isScopeSelectorSupported(root);\n  }\n  if (scopeSelectorSupported) {\n    return root./*OK*/querySelectorAll(`:scope ${selector}`);\n  }\n\n  // Only IE.\n  const unique = 'i-amphtml-scoped';\n  root.classList.add(unique);\n  const elements = root./*OK*/querySelectorAll(`.${unique} ${selector}`);\n  root.classList.remove(unique);\n  return elements;\n}\n\n\n/**\n * Returns element data-param- attributes as url parameters key-value pairs.\n * e.g. data-param-some-attr=value -> {someAttr: value}.\n * @param {!Element} element\n * @param {function(string):string=} opt_computeParamNameFunc to compute the parameter\n *    name, get passed the camel-case parameter name.\n * @param {!RegExp=} opt_paramPattern Regex pattern to match data attributes.\n * @return {!JsonObject}\n */\nexport function getDataParamsFromAttributes(element, opt_computeParamNameFunc,\n  opt_paramPattern) {\n  const computeParamNameFunc = opt_computeParamNameFunc || (key => key);\n  const dataset = element.dataset;\n  const params = dict();\n  const paramPattern = opt_paramPattern ? opt_paramPattern : /^param(.+)/;\n  for (const key in dataset) {\n    const matches = key.match(paramPattern);\n    if (matches) {\n      const param = matches[1][0].toLowerCase() + matches[1].substr(1);\n      params[computeParamNameFunc(param)] = dataset[key];\n    }\n  }\n  return params;\n}\n\n/**\n * Whether the element have a next node in the document order.\n * This means either:\n *  a. The element itself has a nextSibling.\n *  b. Any of the element ancestors has a nextSibling.\n * @param {!Element} element\n * @param {?Node} opt_stopNode\n * @return {boolean}\n */\nexport function hasNextNodeInDocumentOrder(element, opt_stopNode) {\n  let currentElement = element;\n  do {\n    if (currentElement.nextSibling) {\n      return true;\n    }\n  } while ((currentElement = currentElement.parentNode) &&\n            currentElement != opt_stopNode);\n  return false;\n}\n\n\n/**\n * Finds all ancestor elements that satisfy predicate.\n * @param {!Element} child\n * @param {function(!Element):boolean} predicate\n * @return {!Array<!Element>}\n */\nexport function ancestorElements(child, predicate) {\n  const ancestors = [];\n  for (let ancestor = child.parentElement; ancestor;\n    ancestor = ancestor.parentElement) {\n    if (predicate(ancestor)) {\n      ancestors.push(ancestor);\n    }\n  }\n  return ancestors;\n}\n\n\n/**\n * Finds all ancestor elements that has the specified tag name.\n * @param {!Element} child\n * @param {string} tagName\n * @return {!Array<!Element>}\n */\nexport function ancestorElementsByTag(child, tagName) {\n  tagName = tagName.toUpperCase();\n  return ancestorElements(child, el => {\n    return el.tagName == tagName;\n  });\n}\n\n/**\n * Returns a clone of the content of a template element.\n *\n * Polyfill to replace .content access for browsers that do not support\n * HTMLTemplateElements natively.\n *\n * @param {!HTMLTemplateElement|!Element} template\n * @return {!DocumentFragment}\n */\nexport function templateContentClone(template) {\n  if ('content' in template) {\n    return template.content.cloneNode(true);\n  } else {\n    const content = template.ownerDocument.createDocumentFragment();\n    copyChildren(template, content);\n    return content;\n  }\n}\n\n/**\n * Iterate over an array-like. Some collections like NodeList are\n * lazily evaluated in some browsers, and accessing `length` forces full\n * evaluation. We can improve performance by iterating until an element is\n * `undefined` to avoid checking the `length` property.\n * Test cases: https://jsperf.com/iterating-over-collections-of-elements\n * @param {!IArrayLike<T>} iterable\n * @param {function(T, number)} cb\n * @template T\n */\nexport function iterateCursor(iterable, cb) {\n  for (let i = 0, value; (value = iterable[i]) !== undefined; i++) {\n    cb(value, i);\n  }\n}\n\n/**\n * This method wraps around window's open method. It first tries to execute\n * `open` call with the provided target and if it fails, it retries the call\n * with the `_top` target. This is necessary given that in some embedding\n * scenarios, such as iOS' WKWebView, navigation to `_blank` and other targets\n * is blocked by default.\n *\n * @param {!Window} win\n * @param {string} url\n * @param {string} target\n * @param {string=} opt_features\n * @return {?Window}\n */\nexport function openWindowDialog(win, url, target, opt_features) {\n  // Try first with the specified target. If we're inside the WKWebView or\n  // a similar environments, this method is expected to fail by default for\n  // all targets except `_top`.\n  let res;\n  try {\n    res = win.open(url, target, opt_features);\n  } catch (e) {\n    dev().error('DOM', 'Failed to open url on target: ', target, e);\n  }\n\n  // Then try with `_top` target.\n  if (!res && target != '_top') {\n    res = win.open(url, '_top');\n  }\n  return res;\n}\n\n/**\n * Whether the element is a script tag with application/json type.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isJsonScriptTag(element) {\n  return element.tagName == 'SCRIPT' &&\n            element.getAttribute('type').toUpperCase() == 'APPLICATION/JSON';\n}\n\n/**\n * Whether the element is a script tag with application/json type.\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isJsonLdScriptTag(element) {\n  return element.tagName == 'SCRIPT' &&\n      element.getAttribute('type').toUpperCase() == 'APPLICATION/LD+JSON';\n}\n\n/**\n * Whether the page's direction is right to left or not.\n * @param {!Document} doc\n * @return {boolean}\n */\nexport function isRTL(doc) {\n  const dir = doc.body.getAttribute('dir')\n                 || doc.documentElement.getAttribute('dir')\n                 || 'ltr';\n  return dir == 'rtl';\n}\n\n\n/**\n * Escapes an ident (ID or a class name) to be used as a CSS selector.\n *\n * See https://drafts.csswg.org/cssom/#serialize-an-identifier.\n *\n * @param {string} ident\n * @return {string}\n */\nexport function escapeCssSelectorIdent(ident) {\n  return cssEscape(ident);\n}\n\n/**\n * Escapes an ident in a way that can be used by :nth-child() psuedo-class.\n *\n * See https://github.com/w3c/csswg-drafts/issues/2306.\n *\n * @param {string|number} ident\n * @return {string}\n */\nexport function escapeCssSelectorNth(ident) {\n  const escaped = String(ident);\n  // Ensure it doesn't close the nth-child psuedo class.\n  dev().assert(escaped.indexOf(')') === -1);\n  return escaped;\n}\n\n/**\n * Escapes `<`, `>` and other HTML charcaters with their escaped forms.\n * @param {string} text\n * @return {string}\n */\nexport function escapeHtml(text) {\n  if (!text) {\n    return text;\n  }\n  return text.replace(HTML_ESCAPE_REGEX, escapeHtmlChar);\n}\n\n/**\n * @param {string} c\n * @return string\n */\nfunction escapeHtmlChar(c) {\n  return HTML_ESCAPE_CHARS[c];\n}\n\n/**\n * Tries to focus on the given element; fails silently if browser throws an\n * exception.\n * @param {!Element} element\n */\nexport function tryFocus(element) {\n  try {\n    element./*OK*/focus();\n  } catch (e) {\n    // IE <= 7 may throw exceptions when focusing on hidden items.\n  }\n}\n\n/**\n * Whether the given window is in an iframe or not.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isIframed(win) {\n  return win.parent && win.parent != win;\n}\n\n/**\n * Determines if this element is an AMP element\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isAmpElement(element) {\n  const tag = element.tagName;\n  // Use prefix to recognize AMP element. This is necessary because stub\n  // may not be attached yet.\n  return startsWith(tag, 'AMP-') &&\n      // Some \"amp-*\" elements are not really AMP elements. :smh:\n      !(tag == 'AMP-STICKY-AD-TOP-PADDING' || tag == 'AMP-BODY');\n}\n\n/**\n * Return a promise that resolve when an AMP element upgrade from HTMLElement\n * to CustomElement\n * @param {!Element} element\n * @return {!Promise<!Element>}\n */\nexport function whenUpgradedToCustomElement(element) {\n  dev().assert(isAmpElement(element), 'element is not AmpElement');\n  if (element.createdCallback) {\n    // Element already is CustomElement;\n    return Promise.resolve(element);\n  }\n  // If Element is still HTMLElement, wait for it to upgrade to customElement\n  // Note: use pure string to avoid obfuscation between versions.\n  if (!element[UPGRADE_TO_CUSTOMELEMENT_PROMISE]) {\n    element[UPGRADE_TO_CUSTOMELEMENT_PROMISE] = new Promise(resolve => {\n      element[UPGRADE_TO_CUSTOMELEMENT_RESOLVER] = resolve;\n    });\n  }\n\n  return element[UPGRADE_TO_CUSTOMELEMENT_PROMISE];\n}\n\n/**\n * Replacement for `Element.requestFullscreen()` method.\n * https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen\n * @param {!Element} element\n */\nexport function fullscreenEnter(element) {\n  const requestFs = element.requestFullscreen\n   || element.requestFullScreen\n   || element.webkitRequestFullscreen\n   || element.webkitRequestFullScreen\n   || element.webkitEnterFullscreen\n   || element.webkitEnterFullScreen\n   || element.msRequestFullscreen\n   || element.msRequestFullScreen\n   || element.mozRequestFullscreen\n   || element.mozRequestFullScreen;\n  if (requestFs) {\n    requestFs.call(element);\n  }\n}\n\n/**\n * Replacement for `Document.exitFullscreen()` method.\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/exitFullscreen\n * @param {!Element} element\n */\nexport function fullscreenExit(element) {\n  let exitFs = element.cancelFullScreen\n              || element.exitFullscreen\n              || element.exitFullScreen\n              || element.webkitExitFullscreen\n              || element.webkitExitFullScreen\n              || element.webkitCancelFullScreen\n              || element.mozCancelFullScreen\n              || element.msExitFullscreen;\n  if (exitFs) {\n    exitFs.call(element);\n    return;\n  }\n  if (element.ownerDocument) {\n    exitFs = element.ownerDocument.cancelFullScreen\n             || element.ownerDocument.exitFullscreen\n             || element.ownerDocument.exitFullScreen\n             || element.ownerDocument.webkitExitFullscreen\n             || element.ownerDocument.webkitExitFullScreen\n             || element.ownerDocument.webkitCancelFullScreen\n             || element.ownerDocument.mozCancelFullScreen\n             || element.ownerDocument.msExitFullscreen;\n  }\n  if (exitFs) {\n    exitFs.call(element.ownerDocument);\n    return;\n  }\n}\n\n\n/**\n * Replacement for `Document.fullscreenElement`.\n * https://developer.mozilla.org/en-US/docs/Web/API/Document/fullscreenElement\n * @param {!Element} element\n * @return {boolean}\n */\nexport function isFullscreenElement(element) {\n  const isFullscreen = element.webkitDisplayingFullscreen;\n  if (isFullscreen) {\n    return true;\n  }\n  if (element.ownerDocument) {\n    const fullscreenElement = element.ownerDocument.fullscreenElement\n             || element.ownerDocument.webkitFullscreenElement\n             || element.ownerDocument.mozFullScreenElement\n             || element.webkitCurrentFullScreenElement;\n    if (fullscreenElement == element) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Returns true if node is not disabled.\n *\n * IE8 can return false positives, see {@link matches}.\n * @param {!Element} element\n * @return {boolean}\n * @see https://www.w3.org/TR/html5/forms.html#concept-fe-disabled\n */\nexport function isEnabled(element) {\n  return !(element.disabled || matches(element, ':disabled'));\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as dom from './dom';\nimport {\n  getAmpdoc,\n  getExistingServiceForDocInEmbedScope,\n  getServicePromise,\n  getServicePromiseForDoc,\n  getServicePromiseOrNull,\n  getServicePromiseOrNullForDoc,\n  getTopWindow,\n} from './service';\nimport {toWin} from './types';\nimport {user} from './log';\n\n/**\n * Returns a promise for a service for the given id and window. Also expects\n * an element that has the actual implementation. The promise resolves when\n * the implementation loaded.\n * Users should typically wrap this as a special purpose function (e.g.\n * Services.viewportForDoc(...)) for type safety and because the factory should not be\n * passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an\n *     element, not the extension.\n * @return {!Promise<*>}\n */\nexport function getElementService(win, id, extension, opt_element) {\n  return getElementServiceIfAvailable(win, id, extension, opt_element).then(\n      service => assertService(service, id, extension));\n}\n\n/**\n * Same as getElementService but produces null if the given element is not\n * actually available on the current page.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an\n *     element, not the extension.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailable(win, id, extension, opt_element) {\n  const s = getServicePromiseOrNull(win, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (s);\n  }\n  return getElementServicePromiseOrNull(win, id, extension, opt_element);\n}\n\n/**\n * @param {!Window} win\n * @param {string} elementName Name of an extended custom element.\n * @return {boolean} Whether this element is scheduled to be loaded.\n */\nfunction isElementScheduled(win, elementName) {\n  // Set in custom-element.js\n  if (!win.ampExtendedElements) {\n    return false;\n  }\n  return !!win.ampExtendedElements[elementName];\n}\n\n\n/**\n * Returns a promise for a service for the given id and window. Also expects\n * an element that has the actual implementation. The promise resolves when\n * the implementation loaded.\n * Users should typically wrap this as a special purpose function (e.g.\n * Services.viewportForDoc(...)) for type safety and because the factory should not be\n * passed around.\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an\n *     element, not the extension.\n * @return {!Promise<*>}\n */\nexport function getElementServiceForDoc(nodeOrDoc, id, extension, opt_element) {\n  return getElementServiceIfAvailableForDoc(\n      nodeOrDoc, id, extension, opt_element)\n      .then(service => assertService(service, id, extension));\n}\n\n/**\n * Same as getElementService but produces null if the given element is not\n * actually available on the current page.\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom extension that provides the\n *     implementation of this service.\n * @param {boolean=} opt_element Whether this service is provided by an\n *     element, not the extension.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailableForDoc(\n  nodeOrDoc, id, extension, opt_element) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  const s = getServicePromiseOrNullForDoc(nodeOrDoc, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (s);\n  }\n  // Microtask is necessary to ensure that window.ampExtendedElements has been\n  // initialized.\n  return Promise.resolve().then(() => {\n    if (!opt_element && isElementScheduled(ampdoc.win, extension)) {\n      return getServicePromiseForDoc(nodeOrDoc, id);\n    }\n    // Wait for HEAD to fully form before denying access to the service.\n    return ampdoc.whenBodyAvailable().then(() => {\n      // If this service is provided by an element, then we can't depend on the\n      // service (they may not use the element).\n      if (opt_element) {\n        return getServicePromiseOrNullForDoc(nodeOrDoc, id);\n      } else if (isElementScheduled(ampdoc.win, extension)) {\n        return getServicePromiseForDoc(nodeOrDoc, id);\n      }\n      return null;\n    });\n  });\n}\n\n/**\n * Returns a promise for service for the given id in the embed scope of\n * a given node, if it exists. Otherwise, falls back to ampdoc scope IFF\n * the given node is in the top-level window.\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id of the service.\n * @param {string} extension Name of the custom element that provides\n *     the implementation of this service.\n * @return {!Promise<?Object>}\n */\nexport function getElementServiceIfAvailableForDocInEmbedScope(\n  nodeOrDoc, id, extension) {\n  const s = getExistingServiceForDocInEmbedScope(nodeOrDoc, id);\n  if (s) {\n    return /** @type {!Promise<?Object>} */ (Promise.resolve(s));\n  }\n  // Return embed-scope element service promise if scheduled.\n  if (nodeOrDoc.nodeType) {\n    const win = toWin(/** @type {!Document} */ (\n      nodeOrDoc.ownerDocument || nodeOrDoc).defaultView);\n    const topWin = getTopWindow(win);\n    // In embeds, doc-scope services are window-scope. But make sure to\n    // only do this for embeds (not the top window), otherwise we'd grab\n    // a promise from the wrong service holder which would never resolve.\n    if (win !== topWin) {\n      return getElementServicePromiseOrNull(win, id, extension);\n    } else {\n      // Fallback to ampdoc IFF the given node is _not_ FIE.\n      return getElementServiceIfAvailableForDoc(nodeOrDoc, id, extension);\n    }\n  }\n  return /** @type {!Promise<?Object>} */ (Promise.resolve(null));\n}\n\n/**\n * Throws user error if `service` is null.\n * @param {Object} service\n * @param {string} id\n * @param {string} extension\n * @return {!Object}\n * @private\n */\nfunction assertService(service, id, extension) {\n  return /** @type {!Object} */ (user().assert(service,\n      'Service %s was requested to be provided through %s, ' +\n      'but %s is not loaded in the current page. To fix this ' +\n      'problem load the JavaScript file for %s in this page.',\n      id, extension, extension, extension));\n}\n\n/**\n * Returns the promise for service with `id` on the given window if available.\n * Otherwise, resolves with null (service was not registered).\n * @param {!Window} win\n * @param {string} id\n * @param {string} extension\n * @param {boolean=} opt_element\n * @return {!Promise<Object>}\n * @private\n */\nfunction getElementServicePromiseOrNull(win, id, extension, opt_element) {\n  // Microtask is necessary to ensure that window.ampExtendedElements has been\n  // initialized.\n  return Promise.resolve().then(() => {\n    if (!opt_element && isElementScheduled(win, extension)) {\n      return getServicePromise(win, id);\n    }\n    // Wait for HEAD to fully form before denying access to the service.\n    return dom.waitForBodyPromise(win.document).then(() => {\n      // If this service is provided by an element, then we can't depend on the\n      // service (they may not use the element).\n      if (opt_element) {\n        return getServicePromiseOrNull(win, id);\n      } else if (isElementScheduled(win, extension)) {\n        return getServicePromise(win, id);\n      }\n      return null;\n    });\n  });\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n  * Whether addEventListener supports options or only takes capture as a boolean\n  * @type {boolean|undefined}\n  * @visibleForTesting\n  */\nlet optsSupported;\n\n/**\n * Listens for the specified event on the element.\n *\n * Do not use this directly. This method is implemented as a shared\n * dependency. Use `listen()` in either `event-helper` or `3p-frame-messaging`,\n * depending on your use case.\n *\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function internalListenImplementation(element, eventType, listener,\n  opt_evtListenerOpts) {\n  let localElement = element;\n  let localListener = listener;\n  /** @type {?Function}  */\n  let wrapped = event => {\n    try {\n      return localListener(event);\n    } catch (e) {\n      // reportError is installed globally per window in the entry point.\n      self.reportError(e);\n      throw e;\n    }\n  };\n  const optsSupported = detectEvtListenerOptsSupport();\n  let capture = false;\n  if (opt_evtListenerOpts) {\n    capture = opt_evtListenerOpts.capture;\n  }\n  localElement.addEventListener(\n      eventType,\n      wrapped,\n      optsSupported ? opt_evtListenerOpts : capture\n  );\n  return () => {\n    if (localElement) {\n      localElement.removeEventListener(\n          eventType,\n          wrapped,\n          optsSupported ? opt_evtListenerOpts : capture\n      );\n    }\n    // Ensure these are GC'd\n    localListener = null;\n    localElement = null;\n    wrapped = null;\n  };\n}\n\n/**\n * Tests whether the browser supports options as an argument of addEventListener\n * or not.\n *\n * @return {boolean}\n */\nexport function detectEvtListenerOptsSupport() {\n  // Only run the test once\n  if (optsSupported !== undefined) {\n    return optsSupported;\n  }\n\n  optsSupported = false;\n  try {\n    // Test whether browser supports EventListenerOptions or not\n    const options = {\n      get capture() {\n        optsSupported = true;\n      },\n    };\n    self.addEventListener('test-options', null, options);\n    self.removeEventListener('test-options', null, options);\n  } catch (err) {\n    // EventListenerOptions are not supported\n  }\n  return optsSupported;\n}\n\n/**\n  * Resets the test for whether addEventListener supports options or not.\n  */\nexport function resetEvtListenerOptsSupportForTesting() {\n  optsSupported = undefined;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {internalListenImplementation} from './event-helper-listen';\nimport {user} from './log';\n\n/** @const {string}  */\nconst LOAD_FAILURE_PREFIX = 'Failed to load:';\n\n/**\n * Returns a CustomEvent with a given type and detail; supports fallback for IE.\n * @param {!Window} win\n * @param {string} type\n * @param {Object} detail\n * @param {EventInit=} opt_eventInit\n * @return {!Event}\n */\nexport function createCustomEvent(win, type, detail, opt_eventInit) {\n  const eventInit = /** @type {!CustomEventInit} */ ({detail});\n  Object.assign(eventInit, opt_eventInit);\n  // win.CustomEvent is a function on Edge, Chrome, FF, Safari but\n  // is an object on IE 11.\n  if (typeof win.CustomEvent == 'function') {\n    return new win.CustomEvent(type, eventInit);\n  } else {\n    // Deprecated fallback for IE.\n    const e = win.document.createEvent('CustomEvent');\n    e.initCustomEvent(\n        type, !!eventInit.bubbles, !!eventInit.cancelable, detail);\n    return e;\n  }\n}\n\n/**\n * Listens for the specified event on the element.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function listen(element, eventType, listener, opt_evtListenerOpts) {\n  return internalListenImplementation(\n      element, eventType, listener, opt_evtListenerOpts);\n}\n\n/**\n * Returns the data property of an event with the correct type.\n * @param {!Event|{data: !JsonObject}} event\n * @return {?JsonObject|string|undefined}\n */\nexport function getData(event) {\n  return /** @type {?JsonObject|string|undefined} */ (event.data);\n}\n\n/**\n * Listens for the specified event on the element and removes the listener\n * as soon as event has been received.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {function(!Event)} listener\n * @param {Object=} opt_evtListenerOpts\n * @return {!UnlistenDef}\n */\nexport function listenOnce(element, eventType, listener, opt_evtListenerOpts) {\n  let localListener = listener;\n  const unlisten = internalListenImplementation(element, eventType, event => {\n    try {\n      localListener(event);\n    } finally {\n      // Ensure listener is GC'd\n      localListener = null;\n      unlisten();\n    }\n  }, opt_evtListenerOpts);\n  return unlisten;\n}\n\n\n/**\n * Returns  a promise that will resolve as soon as the specified event has\n * fired on the element.\n * @param {!EventTarget} element\n * @param {string} eventType\n * @param {Object=} opt_evtListenerOpts\n * @param {function(!UnlistenDef)=} opt_cancel An optional function that, when\n *     provided, will be called with the unlistener. This gives the caller\n *     access to the unlistener, so it may be called manually when necessary.\n * @return {!Promise<!Event>}\n */\nexport function listenOncePromise(element, eventType, opt_evtListenerOpts,\n  opt_cancel) {\n  let unlisten;\n  const eventPromise = new Promise(resolve => {\n    unlisten = listenOnce(element, eventType, resolve, opt_evtListenerOpts);\n  });\n  eventPromise.then(unlisten, unlisten);\n  if (opt_cancel) {\n    opt_cancel(unlisten);\n  }\n  return eventPromise;\n}\n\n\n/**\n * Whether the specified element/window has been loaded already.\n * @param {!Element|!Window} eleOrWindow\n * @return {boolean}\n */\nexport function isLoaded(eleOrWindow) {\n  return !!(eleOrWindow.complete || eleOrWindow.readyState == 'complete'\n      // If the passed in thing is a Window, infer loaded state from\n      //\n      || (eleOrWindow.document\n          && eleOrWindow.document.readyState == 'complete'));\n}\n\n/**\n * Returns a promise that will resolve or fail based on the eleOrWindow's 'load'\n * and 'error' events. Optionally this method takes a timeout, which will reject\n * the promise if the resource has not loaded by then.\n * @param {T} eleOrWindow Supports both Elements and as a special case Windows.\n * @return {!Promise<T>}\n * @template T\n */\nexport function loadPromise(eleOrWindow) {\n  let unlistenLoad;\n  let unlistenError;\n  if (isLoaded(eleOrWindow)) {\n    return Promise.resolve(eleOrWindow);\n  }\n  const loadingPromise = new Promise((resolve, reject) => {\n    // Listen once since IE 5/6/7 fire the onload event continuously for\n    // animated GIFs.\n    const tagName = eleOrWindow.tagName;\n    if (tagName === 'AUDIO' || tagName === 'VIDEO') {\n      unlistenLoad = listenOnce(eleOrWindow, 'loadstart', resolve);\n    } else {\n      unlistenLoad = listenOnce(eleOrWindow, 'load', resolve);\n    }\n    // For elements, unlisten on error (don't for Windows).\n    if (tagName) {\n      unlistenError = listenOnce(eleOrWindow, 'error', reject);\n    }\n  });\n\n  return loadingPromise.then(() => {\n    if (unlistenError) {\n      unlistenError();\n    }\n    return eleOrWindow;\n  }, () => {\n    if (unlistenLoad) {\n      unlistenLoad();\n    }\n    failedToLoad(eleOrWindow);\n  });\n}\n\n/**\n * Emit error on load failure.\n * @param {!Element|!Window} eleOrWindow Supports both Elements and as a special\n *     case Windows.\n */\nfunction failedToLoad(eleOrWindow) {\n  // Report failed loads as user errors so that they automatically go\n  // into the \"document error\" bucket.\n  let target = eleOrWindow;\n  if (target && target.src) {\n    target = target.src;\n  }\n  throw user().createError(LOAD_FAILURE_PREFIX, target);\n}\n\n/**\n * Returns true if this error message is was created for a load error.\n * @param {string} message An error message\n * @return {boolean}\n */\nexport function isLoadErrorMessage(message) {\n  return message.indexOf(LOAD_FAILURE_PREFIX) != -1;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Experiments system allows a developer to opt-in to test\n * features that are not yet fully tested.\n *\n * Experiments page: https://cdn.ampproject.org/experiments.html *\n */\n\nimport {OriginExperiments} from './origin-experiments';\nimport {Services} from './services';\nimport {getCookie, setCookie} from './cookies';\nimport {parseQueryString} from './url';\nimport {user} from './log';\n\n/** @const {string} */\nconst TAG = 'experiments';\n\n/** @const {string} */\nconst COOKIE_NAME = 'AMP_EXP';\n\n/** @const {number} */\nconst COOKIE_MAX_AGE_DAYS = 180; // 6 month\n\n/** @const {time} */\nconst COOKIE_EXPIRATION_INTERVAL = COOKIE_MAX_AGE_DAYS * 24 * 60 * 60 * 1000;\n\n/** @const {string} */\nconst TOGGLES_WINDOW_PROPERTY = '__AMP__EXPERIMENT_TOGGLES';\n\n/** @const {!webCrypto.JsonWebKey} */\nconst ORIGIN_EXPERIMENTS_PUBLIC_JWK = /** @type {!webCrypto.JsonWebKey} */ ({\n  'alg': 'RS256',\n  'e': 'AQAB',\n  'ext': true,\n  'key_ops': ['verify'],\n  'kty': 'RSA',\n  /*eslint \"max-len\": 0*/\n  'n': 'uAGSMYKze8Fit508UaGHz1eZowfX4YsA0lmyi-65xQfjF7nMo61c4Iz4erdqgRp-ov662yVPquhPmTxgB-nzNcTPrj15Jo05Js78Q9hS2hrPIjKMlzcKSYQN_08QieWKOSmVbLSv_-4n9Ms5ta8nRs4pwc_2nX5n7m5B5GH4VerGbqIWIn9FRNYMShBRQ9TCHpb6BIUTwUn6iwmJLenq0A1xhGrQ9rswGC1QJhjotkeReKXZDLLWaFr0uRw-IyvRa5RiiEGntgOvcbvamM5TnbKavc2rxvg2TWTCNQnb7lWSAzldJA_yAOYet_MjnHMyj2srUdbQSDCk8kPWWuafiQ',\n});\n\n/** @type {?Promise} */\nlet originExperimentsPromise;\n\n/** @private {?OriginExperiments} */\nlet originExperiments;\n\n/**\n * @typedef {{\n *   isTrafficEligible: function(!Window):boolean,\n *   branches: !Array<string>\n * }}\n */\nexport let ExperimentInfo;\n\n/**\n * Whether we are in canary.\n * @param {!Window} win\n * @return {boolean}\n */\nexport function isCanary(win) {\n  return !!(win.AMP_CONFIG && win.AMP_CONFIG.canary);\n}\n\n/**\n * Returns binary type, e.g., canary, control, or production.\n * @param {!Window} win\n * @return {string}\n */\nexport function getBinaryType(win) {\n  return win.AMP_CONFIG && win.AMP_CONFIG.type ?\n    win.AMP_CONFIG.type : 'unknown';\n}\n\n/**\n * Verifies a single origin experiment token and enables the corresponding\n * experiment on success. If token verification fails, a user error is logged.\n * @param {!Window} win\n * @param {string} token\n * @param {!./service/crypto-impl.Crypto} crypto\n * @param {!webCrypto.CryptoKey} publicKey\n * @return {!Promise}\n * @private\n */\nfunction verifyOriginExperimentToken(win, token, crypto, publicKey) {\n  if (!crypto.isPkcsAvailable()) {\n    user().error(TAG, 'Crypto is unavailable.');\n    return Promise.resolve();\n  }\n  if (!originExperiments) {\n    originExperiments = new OriginExperiments(crypto);\n  }\n  const verify = originExperiments.verifyToken(token, win.location, publicKey);\n  return verify.then(experimentId => {\n    toggleExperiment(win, experimentId, true, /* transientExperiment */ true);\n  }, error => {\n    user().error(TAG, 'Failed to verify experiment token:' + error);\n  });\n}\n\n/**\n * Scan the page for origin experiment tokens, verifies them, and enables\n * the corresponding experiments for verified tokens.\n * @param {!Window} win\n * @param {!webCrypto.JsonWebKey} publicJwk\n * @return {!Promise}\n * @private\n */\nfunction scanForOriginExperimentTokens(win, publicJwk) {\n  const metas =\n      win.document.head.querySelectorAll('meta[name=\"amp-experiment-token\"]');\n  if (metas.length == 0) {\n    return Promise.resolve();\n  }\n  const crypto = Services.cryptoFor(win);\n  return crypto.importPkcsKey(publicJwk).then(publicKey => {\n    const promises = [];\n    for (let i = 0; i < metas.length; i++) {\n      const meta = metas[i];\n      const token = meta.getAttribute('content');\n      if (token) {\n        const p = verifyOriginExperimentToken(win, token, crypto, publicKey);\n        promises.push(p);\n      } else {\n        user().error(TAG, 'Missing content for experiment token.');\n      }\n    }\n    return Promise.all(promises);\n  });\n}\n\n/**\n * Asynchronously checks whether the specified origin experiment is on or off.\n * On the first invocation, triggers scan of origin experiment tokens on page.\n * @param {!Window} win\n * @param {string} experimentId\n * @param {boolean=} opt_forceScan Forces rescan of page for experiment tokens.\n * @return {!Promise<boolean>}\n */\nexport function isOriginExperimentOn(win, experimentId, opt_forceScan) {\n  if (!originExperimentsPromise || opt_forceScan) {\n    originExperimentsPromise =\n        scanForOriginExperimentTokens(win, ORIGIN_EXPERIMENTS_PUBLIC_JWK);\n  }\n  return originExperimentsPromise.then(() => isExperimentOn(win, experimentId));\n}\n\n/**\n * Whether the specified experiment is on or off.\n * @param {!Window} win\n * @param {string} experimentId\n * @return {boolean}\n */\nexport function isExperimentOn(win, experimentId) {\n  const toggles = experimentToggles(win);\n  return !!toggles[experimentId];\n}\n\n/**\n * Toggles the experiment on or off. Returns the actual value of the experiment\n * after toggling is done.\n * @param {!Window} win\n * @param {string} experimentId\n * @param {boolean=} opt_on\n * @param {boolean=} opt_transientExperiment  Whether to toggle the\n *     experiment state \"transiently\" (i.e., for this page load only) or\n *     durably (by saving the experiment IDs to the cookie after toggling).\n *     Default: false (save durably).\n * @return {boolean} New state for experimentId.\n */\nexport function toggleExperiment(win, experimentId, opt_on,\n  opt_transientExperiment) {\n  const currentlyOn = isExperimentOn(win, experimentId);\n  const on = !!(opt_on !== undefined ? opt_on : !currentlyOn);\n  if (on != currentlyOn) {\n    const toggles = experimentToggles(win);\n    toggles[experimentId] = on;\n\n    if (!opt_transientExperiment) {\n      const cookieToggles = getExperimentTogglesFromCookie(win);\n      cookieToggles[experimentId] = on;\n      saveExperimentTogglesToCookie(win, cookieToggles);\n    }\n  }\n  return on;\n}\n\n/**\n * Calculate whether the experiment is on or off based off of the\n * cookieFlag or the global config frequency given.\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n */\nexport function experimentToggles(win) {\n  if (win[TOGGLES_WINDOW_PROPERTY]) {\n    return win[TOGGLES_WINDOW_PROPERTY];\n  }\n  win[TOGGLES_WINDOW_PROPERTY] = Object.create(null);\n  const toggles = win[TOGGLES_WINDOW_PROPERTY];\n\n  // Read the default config of this build.\n  if (win.AMP_CONFIG) {\n    for (const experimentId in win.AMP_CONFIG) {\n      const frequency = win.AMP_CONFIG[experimentId];\n      if (typeof frequency === 'number' && frequency >= 0 && frequency <= 1) {\n        toggles[experimentId] = Math.random() < frequency;\n      }\n    }\n  }\n  // Read document level override from meta tag.\n  if (win.AMP_CONFIG\n      && Array.isArray(win.AMP_CONFIG['allow-doc-opt-in'])\n      && win.AMP_CONFIG['allow-doc-opt-in'].length > 0) {\n    const allowed = win.AMP_CONFIG['allow-doc-opt-in'];\n    const meta =\n        win.document.head.querySelector('meta[name=\"amp-experiments-opt-in\"]');\n    if (meta) {\n      const optedInExperiments = meta.getAttribute('content').split(',');\n      for (let i = 0; i < optedInExperiments.length; i++) {\n        if (allowed.indexOf(optedInExperiments[i]) != -1) {\n          toggles[optedInExperiments[i]] = true;\n        }\n      }\n    }\n  }\n\n  Object.assign(toggles, getExperimentTogglesFromCookie(win));\n\n  if (win.AMP_CONFIG\n      && Array.isArray(win.AMP_CONFIG['allow-url-opt-in'])\n      && win.AMP_CONFIG['allow-url-opt-in'].length > 0) {\n    const allowed = win.AMP_CONFIG['allow-url-opt-in'];\n    const hash = win.location.originalHash || win.location.hash;\n    const params = parseQueryString(hash);\n    for (let i = 0; i < allowed.length; i++) {\n      const param = params[`e-${allowed[i]}`];\n      if (param == '1') {\n        toggles[allowed[i]] = true;\n      }\n      if (param == '0') {\n        toggles[allowed[i]] = false;\n      }\n    }\n  }\n  return toggles;\n}\n\n/**\n * Returns the cached experiments toggles, or null if they have not been\n * computed yet.\n * @param {!Window} win\n * @return {Object<string, boolean>}\n */\nexport function experimentTogglesOrNull(win) {\n  return win[TOGGLES_WINDOW_PROPERTY] || null;\n}\n\n/**\n * Returns a set of experiment IDs currently on.\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n */\nfunction getExperimentTogglesFromCookie(win) {\n  const experimentCookie = getCookie(win, COOKIE_NAME);\n  const tokens = experimentCookie ? experimentCookie.split(/\\s*,\\s*/g) : [];\n\n  const toggles = Object.create(null);\n  for (let i = 0; i < tokens.length; i++) {\n    if (tokens[i].length == 0) {\n      continue;\n    }\n    if (tokens[i][0] == '-') {\n      toggles[tokens[i].substr(1)] = false;\n    } else {\n      toggles[tokens[i]] = true;\n    }\n  }\n\n  return toggles;\n}\n\n/**\n * Saves a set of experiment IDs currently on.\n * @param {!Window} win\n * @param {!Object<string, boolean>} toggles\n */\nfunction saveExperimentTogglesToCookie(win, toggles) {\n  const experimentIds = [];\n  for (const experiment in toggles) {\n    experimentIds.push((toggles[experiment] === false ? '-' : '') + experiment);\n  }\n\n  setCookie(win, COOKIE_NAME, experimentIds.join(','),\n      Date.now() + COOKIE_EXPIRATION_INTERVAL, {\n        // Set explicit domain, so the cookie gets send to sub domains.\n        domain: win.location.hostname,\n        allowOnProxyOrigin: true,\n      });\n}\n\n/**\n * See getExperimentTogglesFromCookie().\n * @param {!Window} win\n * @return {!Object<string, boolean>}\n * @visibleForTesting\n */\nexport function getExperimentToglesFromCookieForTesting(win) {\n  return getExperimentTogglesFromCookie(win);\n}\n\n/**\n * Resets the experimentsToggle cache for testing purposes.\n * @param {!Window} win\n * @visibleForTesting\n */\nexport function resetExperimentTogglesForTesting(win) {\n  setCookie(win, COOKIE_NAME, '', 0, {\n    domain: win.location.hostname,\n  });\n  win[TOGGLES_WINDOW_PROPERTY] = null;\n}\n\n/**\n * In some browser implementations of Math.random(), sequential calls of\n * Math.random() are correlated and can cause a bias.  In particular,\n * if the previous random() call was < 0.001 (as it will be if we select\n * into an experiment), the next value could be less than 0.5 more than\n * 50.7% of the time.  This provides an implementation that roots down into\n * the crypto API, when available, to produce less biased samples.\n *\n * @return {number} Pseudo-random floating-point value on the range [0, 1).\n */\nfunction slowButAccuratePrng() {\n  // TODO(tdrl): Implement.\n  return Math.random();\n}\n\n/**\n * Container for alternate random number generator implementations.  This\n * allows us to set an \"accurate\" PRNG for branch selection, but to mock it\n * out easily in tests.\n *\n * @visibleForTesting\n * @const {!{accuratePrng: function():number}}\n */\nexport const RANDOM_NUMBER_GENERATORS = {\n  accuratePrng: slowButAccuratePrng,\n};\n\n/**\n * Selects, uniformly at random, a single item from the array.\n * @param {!Array<string>} arr Object to select from.\n * @return {?string} Single item from arr or null if arr was empty.\n */\nfunction selectRandomItem(arr) {\n  const rn = RANDOM_NUMBER_GENERATORS.accuratePrng();\n  return arr[Math.floor(rn * arr.length)] || null;\n}\n\n/**\n * Selects which page-level experiment branches are enabled. If a given\n * experiment name is already set (including to the null / no branches selected\n * state), this won't alter its state.\n *\n * Check whether a given experiment is set using isExperimentOn(win,\n * experimentName) and, if it is on, look for which branch is selected in\n * win.experimentBranches[experimentName].\n *\n * @param {!Window} win Window context on which to save experiment\n *     selection state.\n * @param {!Object<string, !ExperimentInfo>} experiments  Set of experiments to\n *     configure for this page load.\n * @visibleForTesting\n */\nexport function randomlySelectUnsetExperiments(win, experiments) {\n  win.experimentBranches = win.experimentBranches || {};\n  for (const experimentName in experiments) {\n    // Skip experimentName if it is not a key of experiments object or if it\n    // has already been populated by some other property.\n    if (!experiments.hasOwnProperty(experimentName) ||\n        win.experimentBranches.hasOwnProperty(experimentName)) {\n      continue;\n    }\n\n    if (!experiments[experimentName].isTrafficEligible ||\n        !experiments[experimentName].isTrafficEligible(win)) {\n      win.experimentBranches[experimentName] = null;\n      continue;\n    }\n\n    // If we're in the experiment, but we haven't already forced a specific\n    // experiment branch (e.g., via a test setup), then randomize the branch\n    // choice.\n    if (!win.experimentBranches[experimentName] &&\n        isExperimentOn(win, experimentName)) {\n      const branches = experiments[experimentName].branches;\n      win.experimentBranches[experimentName] = selectRandomItem(branches);\n    }\n  }\n}\n\n/**\n * Returns the experiment branch enabled for the given experiment ID.\n * For example, 'control' or 'experiment'.\n *\n * @param {!Window} win Window context to check for experiment state.\n * @param {string} experimentName Name of the experiment to check.\n * @return {?string} Active experiment branch ID for experimentName (possibly\n *     null if experimentName has been tested but no branch was enabled).\n */\nexport function getExperimentBranch(win, experimentName) {\n  return win.experimentBranches ? win.experimentBranches[experimentName] : null;\n}\n\n/**\n * Force enable (or disable) a specific branch of a given experiment name.\n * Disables the experiment name altogether if branchId is falseish.\n *\n * @param {!Window} win Window context to check for experiment state.\n * @param {string} experimentName Name of the experiment to check.\n * @param {?string} branchId ID of branch to force or null to disable\n *     altogether.\n * @visibleForTesting\n */\nexport function forceExperimentBranch(win, experimentName, branchId) {\n  win.experimentBranches = win.experimentBranches || {};\n  toggleExperiment(win, experimentName, !!branchId, true);\n  win.experimentBranches[experimentName] = branchId;\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {GestureRecognizer} from './gesture';\nimport {calcVelocity} from './motion';\n\n\n/**\n * A \"tap\" gesture.\n * @typedef {{\n *   clientX: number,\n *   clientY: number\n * }}\n */\nlet TapDef;\n\n\n/**\n * Recognizes \"tap\" gestures.\n * @extends {GestureRecognizer<TapDef>}\n */\nexport class TapRecognizer extends GestureRecognizer {\n  /**\n   * @param {!./gesture.Gestures} manager\n   */\n  constructor(manager) {\n    super('tap', manager);\n\n    /** @private {number} */\n    this.startX_ = 0;\n\n    /** @private {number} */\n    this.startY_ = 0;\n\n    /** @private {number} */\n    this.lastX_ = 0;\n\n    /** @private {number} */\n    this.lastY_ = 0;\n  }\n\n  /** @override */\n  onTouchStart(e) {\n    const touches = e.touches;\n    if (touches && touches.length == 1) {\n      this.startX_ = touches[0].clientX;\n      this.startY_ = touches[0].clientY;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** @override */\n  onTouchMove(e) {\n    const touches = e.changedTouches || e.touches;\n    if (touches && touches.length == 1) {\n      this.lastX_ = touches[0].clientX;\n      this.lastY_ = touches[0].clientY;\n      const dx = Math.abs(this.lastX_ - this.startX_) >= 8;\n      const dy = Math.abs(this.lastY_ - this.startY_) >= 8;\n      if (dx || dy) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /** @override */\n  onTouchEnd(unusedE) {\n    this.signalReady(0);\n  }\n\n  /** @override */\n  acceptStart() {\n    this.signalEmit({clientX: this.lastX_, clientY: this.lastY_}, null);\n    this.signalEnd();\n  }\n}\n\n\n\n/**\n * A \"doubletap\" gesture.\n * @typedef {{\n *   clientX: number,\n *   clientY: number\n * }}\n */\nlet DoubletapDef;\n\n\n/**\n * Recognizes a \"doubletap\" gesture. This gesture will block a single \"tap\"\n * for about 300ms while it's expecting the second \"tap\".\n * @extends {GestureRecognizer<DoubletapDef>}\n */\nexport class DoubletapRecognizer extends GestureRecognizer {\n  /**\n   * @param {!./gesture.Gestures} manager\n   */\n  constructor(manager) {\n    super('doubletap', manager);\n\n    /** @private {number} */\n    this.startX_ = 0;\n\n    /** @private {number} */\n    this.startY_ = 0;\n\n    /** @private {number} */\n    this.lastX_ = 0;\n\n    /** @private {number} */\n    this.lastY_ = 0;\n\n    /** @private {number} */\n    this.tapCount_ = 0;\n\n    /** @private {?Event} */\n    this.event_ = null;\n  }\n\n  /** @override */\n  onTouchStart(e) {\n    if (this.tapCount_ > 1) {\n      return false;\n    }\n    const touches = e.touches;\n    if (touches && touches.length == 1) {\n      this.startX_ = touches[0].clientX;\n      this.startY_ = touches[0].clientY;\n      this.lastX_ = touches[0].clientX;\n      this.lastY_ = touches[0].clientY;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** @override */\n  onTouchMove(e) {\n    const touches = e.touches;\n    if (touches && touches.length == 1) {\n      this.lastX_ = touches[0].clientX;\n      this.lastY_ = touches[0].clientY;\n      const dx = Math.abs(this.lastX_ - this.startX_) >= 8;\n      const dy = Math.abs(this.lastY_ - this.startY_) >= 8;\n      if (dx || dy) {\n        this.acceptCancel();\n        return false;\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** @override */\n  onTouchEnd(e) {\n    this.tapCount_++;\n    if (this.tapCount_ < 2) {\n      this.signalPending(300);\n    } else {\n      this.event_ = e;\n      this.signalReady(0);\n    }\n  }\n\n  /** @override */\n  acceptStart() {\n    this.tapCount_ = 0;\n    this.signalEmit({clientX: this.lastX_, clientY: this.lastY_}, this.event_);\n    this.signalEnd();\n  }\n\n  /** @override */\n  acceptCancel() {\n    this.tapCount_ = 0;\n  }\n}\n\n\n\n/**\n * A \"swipe-xy\", \"swipe-x\" or \"swipe-y\" gesture. A number of these gestures\n * may be emitted for a single touch series.\n * @typedef {{\n *   first: boolean,\n *   last: boolean,\n *   deltaX: number,\n *   deltaY: number,\n *   velocityX: number,\n *   velocityY: number\n * }}\n */\nexport let SwipeDef;\n\n\n/**\n * Recognizes swipe gestures. This gesture will yield about 10ms to other\n * gestures.\n * @extends {GestureRecognizer<SwipeDef>}\n */\nclass SwipeRecognizer extends GestureRecognizer {\n  /**\n   * @param {!./gesture.Gestures} manager\n   */\n  constructor(type, manager, horiz, vert) {\n    super(type, manager);\n\n    /** @private {boolean} */\n    this.horiz_ = horiz;\n\n    /** @private {boolean} */\n    this.vert_ = vert;\n\n    /** @private {boolean} */\n    this.eventing_ = false;\n\n    /** @private {number} */\n    this.startX_ = 0;\n\n    /** @private {number} */\n    this.startY_ = 0;\n\n    /** @private {number} */\n    this.lastX_ = 0;\n\n    /** @private {number} */\n    this.lastY_ = 0;\n\n    /** @private {number} */\n    this.prevX_ = 0;\n\n    /** @private {number} */\n    this.prevY_ = 0;\n\n    /** @private {time} */\n    this.startTime_ = 0;\n\n    /** @private {time} */\n    this.lastTime_ = 0;\n\n    /** @private {time} */\n    this.prevTime_ = 0;\n\n    /** @private {number} */\n    this.velocityX_ = 0;\n\n    /** @private {number} */\n    this.velocityY_ = 0;\n  }\n\n  /** @override */\n  onTouchStart(e) {\n    const touches = e.touches;\n    if (touches && touches.length == 1) {\n      this.startTime_ = Date.now();\n      this.startX_ = touches[0].clientX;\n      this.startY_ = touches[0].clientY;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** @override */\n  onTouchMove(e) {\n    const touches = e.touches;\n    if (touches && touches.length == 1) {\n      const x = touches[0].clientX;\n      const y = touches[0].clientY;\n      this.lastX_ = x;\n      this.lastY_ = y;\n      if (this.eventing_) {\n        this.emit_(false, false, e);\n      } else {\n        const dx = Math.abs(x - this.startX_);\n        const dy = Math.abs(y - this.startY_);\n        // Swipe is penalized slightly since it's one of the least demanding\n        // gesture, thus -10 in signalReady.\n        if (this.horiz_ && this.vert_) {\n          if (dx >= 8 || dy >= 8) {\n            this.signalReady(-10);\n          }\n        } else if (this.horiz_) {\n          if (dx >= 8 && dx > dy) {\n            this.signalReady(-10);\n          } else if (dy >= 8) {\n            return false;\n          }\n        } else if (this.vert_) {\n          if (dy >= 8 && dy > dx) {\n            this.signalReady(-10);\n          } else if (dx >= 8) {\n            return false;\n          }\n        } else {\n          return false;\n        }\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** @override */\n  onTouchEnd(e) {\n    this.end_(e);\n  }\n\n  /** @override */\n  acceptStart() {\n    this.eventing_ = true;\n    // Reset start coordinates to where the gesture began to avoid visible\n    // jump, but preserve them as \"prev\" coordinates to calculate the right\n    // velocity.\n    this.prevX_ = this.startX_;\n    this.prevY_ = this.startY_;\n    this.prevTime_ = this.startTime_;\n    this.startX_ = this.lastX_;\n    this.startY_ = this.lastY_;\n    this.emit_(true, false, null);\n  }\n\n  /** @override */\n  acceptCancel() {\n    this.eventing_ = false;\n  }\n\n  /**\n   * @param {boolean} first\n   * @param {boolean} last\n   * @param {?Event} event\n   * @private\n   */\n  emit_(first, last, event) {\n    this.lastTime_ = Date.now();\n    const deltaTime = this.lastTime_ - this.prevTime_;\n    // It's often that `touchend` arrives on the next frame. These should\n    // be ignored to avoid a significant velocity downgrade.\n    if (!last && deltaTime > 4 || last && deltaTime > 16) {\n      this.velocityX_ = calcVelocity(this.lastX_ - this.prevX_, deltaTime,\n          this.velocityX_);\n      this.velocityY_ = calcVelocity(this.lastY_ - this.prevY_, deltaTime,\n          this.velocityY_);\n      this.velocityX_ = Math.abs(this.velocityX_) > 1e-4 ? this.velocityX_ : 0;\n      this.velocityY_ = Math.abs(this.velocityY_) > 1e-4 ? this.velocityY_ : 0;\n      this.prevX_ = this.lastX_;\n      this.prevY_ = this.lastY_;\n      this.prevTime_ = this.lastTime_;\n    }\n\n    this.signalEmit({\n      first,\n      last,\n      time: this.lastTime_,\n      deltaX: this.horiz_ ? this.lastX_ - this.startX_ : 0,\n      deltaY: this.vert_ ? this.lastY_ - this.startY_ : 0,\n      velocityX: this.horiz_ ? this.velocityX_ : 0,\n      velocityY: this.vert_ ? this.velocityY_ : 0,\n    }, event);\n  }\n\n  /**\n   * @param {?Event} event\n   * @private\n   */\n  end_(event) {\n    if (this.eventing_) {\n      this.eventing_ = false;\n      this.emit_(false, true, event);\n      this.signalEnd();\n    }\n  }\n}\n\n\n/**\n * Recognizes \"swipe-xy\" gesture. Yields about 10ms to other gestures.\n */\nexport class SwipeXYRecognizer extends SwipeRecognizer {\n  /**\n   * @param {!./gesture.Gestures} manager\n   */\n  constructor(manager) {\n    super('swipe-xy', manager, true, true);\n  }\n}\n\n\n/**\n * Recognizes \"swipe-x\" gesture. Yields about 10ms to other gestures.\n */\nexport class SwipeXRecognizer extends SwipeRecognizer {\n  /**\n   * @param {!./gesture.Gestures} manager\n   */\n  constructor(manager) {\n    super('swipe-x', manager, true, false);\n  }\n}\n\n\n/**\n * Recognizes \"swipe-y\" gesture. Yields about 10ms to other gestures.\n */\nexport class SwipeYRecognizer extends SwipeRecognizer {\n  /**\n   * @param {!./gesture.Gestures} manager\n   */\n  constructor(manager) {\n    super('swipe-y', manager, false, true);\n  }\n}\n\n\n\n/**\n * A \"tapzoom\" gesture. It has a center, delta off the center center and\n * the velocity of moving away from the center.\n * @typedef {{\n *   first: boolean,\n *   last: boolean,\n *   centerClientX: number,\n *   centerClientY: number,\n *   deltaX: number,\n *   deltaY: number,\n *   velocityX: number,\n *   velocityY: number\n * }}\n */\nlet TapzoomDef;\n\n\n/**\n * Recognizes a \"tapzoom\" gesture. This gesture will block other gestures\n * for about 400ms after first \"tap\" while it's expecting swipe.\n * @extends {GestureRecognizer<TapzoomDef>}\n */\nexport class TapzoomRecognizer extends GestureRecognizer {\n  /**\n   * @param {!./gesture.Gestures} manager\n   */\n  constructor(manager) {\n    super('tapzoom', manager);\n\n    /** @private {boolean} */\n    this.eventing_ = false;\n\n    /** @private {number} */\n    this.startX_ = 0;\n\n    /** @private {number} */\n    this.startY_ = 0;\n\n    /** @private {number} */\n    this.lastX_ = 0;\n\n    /** @private {number} */\n    this.lastY_ = 0;\n\n    /** @private {number} */\n    this.tapX_ = 0;\n\n    /** @private {number} */\n    this.tapY_ = 0;\n\n    /** @private {number} */\n    this.tapCount_ = 0;\n\n    /** @private {number} */\n    this.prevX_ = 0;\n\n    /** @private {number} */\n    this.prevY_ = 0;\n\n    /** @private {time} */\n    this.startTime_ = 0;\n\n    /** @private {time} */\n    this.lastTime_ = 0;\n\n    /** @private {time} */\n    this.prevTime_ = 0;\n\n    /** @private {number} */\n    this.velocityX_ = 0;\n\n    /** @private {number} */\n    this.velocityY_ = 0;\n  }\n\n  /** @override */\n  onTouchStart(e) {\n    if (this.eventing_) {\n      return false;\n    }\n    const touches = e.touches;\n    if (touches && touches.length == 1) {\n      this.startX_ = touches[0].clientX;\n      this.startY_ = touches[0].clientY;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** @override */\n  onTouchMove(e) {\n    const touches = e.touches;\n    if (touches && touches.length == 1) {\n      this.lastX_ = touches[0].clientX;\n      this.lastY_ = touches[0].clientY;\n      if (this.eventing_) {\n        this.emit_(false, false, e);\n      } else {\n        const dx = Math.abs(this.lastX_ - this.startX_) >= 8;\n        const dy = Math.abs(this.lastY_ - this.startY_) >= 8;\n        if (dx || dy) {\n          if (this.tapCount_ == 0) {\n            this.acceptCancel();\n            return false;\n          } else {\n            this.signalReady(0);\n          }\n        }\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** @override */\n  onTouchEnd(e) {\n    if (this.eventing_) {\n      this.end_(e);\n      return;\n    }\n\n    this.tapCount_++;\n    if (this.tapCount_ == 1) {\n      this.signalPending(400);\n      this.tapX_ = this.lastX_;\n      this.tapY_ = this.lastY_;\n      return;\n    }\n\n    this.acceptCancel();\n  }\n\n  /** @override */\n  acceptStart() {\n    this.tapCount_ = 0;\n    this.eventing_ = true;\n    this.emit_(true, false, null);\n  }\n\n  /** @override */\n  acceptCancel() {\n    this.tapCount_ = 0;\n    this.eventing_ = false;\n  }\n\n  /**\n   * @param {boolean} first\n   * @param {boolean} last\n   * @param {?Event} event\n   * @private\n   */\n  emit_(first, last, event) {\n    this.lastTime_ = Date.now();\n    if (first) {\n      this.startTime_ = this.lastTime_;\n      this.velocityX_ = this.velocityY_ = 0;\n    } else if (this.lastTime_ - this.prevTime_ > 2) {\n      this.velocityX_ = calcVelocity(this.lastX_ - this.prevX_,\n          this.lastTime_ - this.prevTime_, this.velocityX_);\n      this.velocityY_ = calcVelocity(this.lastY_ - this.prevY_,\n          this.lastTime_ - this.prevTime_, this.velocityY_);\n    }\n    this.prevX_ = this.lastX_;\n    this.prevY_ = this.lastY_;\n    this.prevTime_ = this.lastTime_;\n\n    this.signalEmit({\n      first,\n      last,\n      centerClientX: this.startX_,\n      centerClientY: this.startY_,\n      deltaX: this.lastX_ - this.startX_,\n      deltaY: this.lastY_ - this.startY_,\n      velocityX: this.velocityX_,\n      velocityY: this.velocityY_,\n    }, event);\n  }\n\n  /**\n   * @param {?Event} event\n   * @private\n   */\n  end_(event) {\n    if (this.eventing_) {\n      this.eventing_ = false;\n      this.emit_(false, true, event);\n      this.signalEnd();\n    }\n  }\n}\n\n\n\n/**\n * A \"pinch\" gesture. It has a center, delta off the center center and\n * the velocity of moving away from the center. \"dir\" component of `1`\n * indicates that it's a expand motion and `-1` indicates pinch motion.\n * @typedef {{\n *   first: boolean,\n *   last: boolean,\n *   centerClientX: number,\n *   centerClientY: number,\n *   dir: number,\n *   deltaX: number,\n *   deltaY: number,\n *   velocityX: number,\n *   velocityY: number\n * }}\n */\nlet PinchDef;\n\n/**\n * Threshold in pixels for how much two touches move away from\n * each other before we recognize the gesture as a pinch.\n */\nconst PINCH_ACCEPT_THRESHOLD = 4;\n\n/**\n * Threshold in pixels for how much two touches move in the same\n * direction before we reject the gesture as a pinch.\n */\nconst PINCH_REJECT_THRESHOLD = 10;\n\n/**\n * Recognizes a \"pinch\" gesture.\n * @extends {GestureRecognizer<PinchDef>}\n */\nexport class PinchRecognizer extends GestureRecognizer {\n  /**\n   * @param {!./gesture.Gestures} manager\n   */\n  constructor(manager) {\n    super('pinch', manager);\n\n    /** @private {boolean} */\n    this.eventing_ = false;\n\n    /** @private {number} */\n    this.startX1_ = 0;\n    /** @private {number} */\n    this.startY1_ = 0;\n\n    /** @private {number} */\n    this.startX2_ = 0;\n    /** @private {number} */\n    this.startY2_ = 0;\n\n    /** @private {number} */\n    this.lastX1_ = 0;\n    /** @private {number} */\n    this.lastY1_ = 0;\n\n    /** @private {number} */\n    this.lastX2_ = 0;\n    /** @private {number} */\n    this.lastY2_ = 0;\n\n    /** @private {number} */\n    this.prevDeltaX_ = 0;\n    /** @private {number} */\n    this.prevDeltaY_ = 0;\n\n    /** @private {number} */\n    this.centerClientX_ = 0;\n    /** @private {number} */\n    this.centerClientY_ = 0;\n\n    /** @private {time} */\n    this.startTime_ = 0;\n    /** @private {time} */\n    this.lastTime_ = 0;\n    /** @private {time} */\n    this.prevTime_ = 0;\n\n    /** @private {number} */\n    this.velocityX_ = 0;\n    /** @private {number} */\n    this.velocityY_ = 0;\n  }\n\n  /** @override */\n  onTouchStart(e) {\n    const touches = e.touches;\n    // Pinch touches are not always simultaneous, continue to listen\n    // for second touch.\n    if (touches && touches.length == 1) {\n      return true;\n    } else if (touches && touches.length == 2) {\n      this.startTime_ = Date.now();\n      this.startX1_ = touches[0].clientX;\n      this.startY1_ = touches[0].clientY;\n      this.startX2_ = touches[1].clientX;\n      this.startY2_ = touches[1].clientY;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** @override */\n  onTouchMove(e) {\n    const touches = e.touches;\n    // Pinch touches are not always simultaneous, continue to listen\n    // for second touch.\n    if (touches && touches.length == 1) {\n      return true;\n    } else if (touches && touches.length == 2) {\n      this.lastX1_ = touches[0].clientX;\n      this.lastY1_ = touches[0].clientY;\n      this.lastX2_ = touches[1].clientX;\n      this.lastY2_ = touches[1].clientY;\n      if (this.eventing_) {\n        this.emit_(false, false, e);\n      } else {\n        const dx1 = this.lastX1_ - this.startX1_;\n        const dy1 = this.lastY1_ - this.startY1_;\n        const dx2 = this.lastX2_ - this.startX2_;\n        const dy2 = this.lastY2_ - this.startY2_;\n        // Fingers should move in opposite directions and go over the threshold.\n        if (dx1 * dx2 <= 0 && dy1 * dy2 <= 0) {\n          if (Math.abs(dx1 - dx2) >= PINCH_ACCEPT_THRESHOLD\n            || Math.abs(dy1 - dy2) >= PINCH_ACCEPT_THRESHOLD) {\n            this.signalReady(0);\n          }\n        } else if (Math.abs(dx1 + dx2) >= PINCH_REJECT_THRESHOLD\n          || Math.abs(dy1 + dy2) >= PINCH_REJECT_THRESHOLD) {\n          // Moving in the same direction over a threshold.\n          return false;\n        }\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /** @override */\n  onTouchEnd(e) {\n    this.end_(e);\n  }\n\n  /** @override */\n  acceptStart() {\n    this.eventing_ = true;\n    this.prevTime_ = this.startTime_;\n    this.prevDeltaX_ = 0;\n    this.prevDeltaY_ = 0;\n    this.centerClientX_ = (this.startX1_ + this.startX2_) * 0.5;\n    this.centerClientY_ = (this.startY1_ + this.startY2_) * 0.5;\n    this.emit_(true, false, null);\n  }\n\n  /** @override */\n  acceptCancel() {\n    this.eventing_ = false;\n  }\n\n  /**\n   * @param {boolean} first\n   * @param {boolean} last\n   * @param {?Event} event\n   * @private\n   */\n  emit_(first, last, event) {\n    this.lastTime_ = Date.now();\n    const deltaTime = this.lastTime_ - this.prevTime_;\n    const deltaX = this.deltaX_();\n    const deltaY = this.deltaY_();\n    // It's often that `touchend` arrives on the next frame. These should\n    // be ignored to avoid a significant velocity downgrade.\n    if (!last && deltaTime > 4 || last && deltaTime > 16) {\n      this.velocityX_ = calcVelocity(deltaX - this.prevDeltaX_, deltaTime,\n          this.velocityX_);\n      this.velocityY_ = calcVelocity(deltaY - this.prevDeltaY_, deltaTime,\n          this.velocityY_);\n      this.velocityX_ = Math.abs(this.velocityX_) > 1e-4 ? this.velocityX_ : 0;\n      this.velocityY_ = Math.abs(this.velocityY_) > 1e-4 ? this.velocityY_ : 0;\n      this.prevDeltaX_ = deltaX;\n      this.prevDeltaY_ = deltaY;\n      this.prevTime_ = this.lastTime_;\n    }\n\n    const startSq = this.sqDist_(this.startX1_, this.startX2_,\n        this.startY1_, this.startY2_);\n    const lastSq = this.sqDist_(this.lastX1_, this.lastX2_,\n        this.lastY1_, this.lastY2_);\n    this.signalEmit({\n      first,\n      last,\n      time: this.lastTime_,\n      centerClientX: this.centerClientX_,\n      centerClientY: this.centerClientY_,\n      dir: Math.sign(lastSq - startSq),\n      deltaX: deltaX * 0.5,\n      deltaY: deltaY * 0.5,\n      velocityX: this.velocityX_ * 0.5,\n      velocityY: this.velocityY_ * 0.5,\n    }, event);\n  }\n\n  /**\n   * @param {?Event} event\n   * @private\n   */\n  end_(event) {\n    if (this.eventing_) {\n      this.eventing_ = false;\n      this.emit_(false, true, event);\n      this.signalEnd();\n    }\n  }\n\n  /**\n   * @param {number} x1\n   * @param {number} x2\n   * @param {number} y1\n   * @param {number} y2\n   * @return {number}\n   * @private\n   */\n  sqDist_(x1, x2, y1, y2) {\n    return (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n  }\n\n  /**\n   * @return {number}\n   * @private\n   */\n  deltaX_() {\n    return Math.abs((this.lastX1_ - this.startX1_) -\n        (this.lastX2_ - this.startX2_));\n  }\n\n  /**\n   * @return {number}\n   * @private\n   */\n  deltaY_() {\n    return Math.abs((this.lastY1_ - this.startY1_) -\n        (this.lastY2_ - this.startY2_));\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Observable} from './observable';\nimport {Pass} from './pass';\nimport {dev} from './log';\nimport {findIndex} from './utils/array';\nimport {toWin} from './types';\n\n\nconst PROP_ = '__AMP_Gestures';\n\n\n/**\n * A gesture object contains the type and data of the gesture such as\n * a tap or a double-tap or a swipe. See {@link GestureRecognizer} for\n * more details.\n * @struct\n * @const\n * @template DATA\n */\nexport class Gesture {\n  /**\n   * @param {string} type The gesture's string type.\n   * @param {DATA} data The data of the gesture.\n   * @param {time} time The time that the gesture has been emitted.\n   * @param {?Event} event An optional browser event that resulted in the\n   *   gesture.\n   */\n  constructor(type, data, time, event) {\n    /** @const {string} */\n    this.type = type;\n    /** @const {DATA} */\n    this.data = data;\n    /** @const {time} */\n    this.time = time;\n    /** @const {?Event} */\n    this.event = event;\n  }\n}\n\n\n/**\n * Gestures object manages all gestures on a particular element. It listens\n * to all pointer events and delegates them to individual gesture recognizers.\n * When a recognizer has recognized a gesture and ready to start emitting it\n * it requests permission to do so from this class which resolves conflicts\n * between competing recognizers to decide which gesture should go forward.\n */\nexport class Gestures {\n\n  /**\n   * Creates if not yet created and returns the shared Gestures instance for\n   * the specified element.\n   * @param {!Element} element\n   * @param {boolean=} opt_shouldNotPreventDefault\n   * @return {!Gestures}\n   */\n  static get(element, opt_shouldNotPreventDefault = false) {\n    let res = element[PROP_];\n    if (!res) {\n      res = new Gestures(element, opt_shouldNotPreventDefault);\n      element[PROP_] = res;\n    }\n    return res;\n  }\n\n  /**\n   * @param {!Element} element\n   */\n  constructor(element, shouldNotPreventDefault) {\n    /** @private {!Element} */\n    this.element_ = element;\n\n    /** @private {!Array<!GestureRecognizer>} */\n    this.recognizers_ = [];\n\n    /** @private {!Array<boolean>} */\n    this.tracking_ = [];\n\n    /** @private {!Array<time>} */\n    this.ready_ = [];\n\n    /** @private {!Array<time>} */\n    this.pending_ = [];\n\n    /** @private {?GestureRecognizer} */\n    this.eventing_ = null;\n\n    /** @private {boolean} */\n    this.shouldNotPreventDefault_ = shouldNotPreventDefault;\n\n    /**\n     * This variable indicates that the eventing has stopped on this\n     * event cycle.\n     * @private {boolean}\n     */\n    this.wasEventing_ = false;\n\n    /** @private {!Pass} */\n    this.pass_ = new Pass(toWin(element.ownerDocument.defaultView),\n        this.doPass_.bind(this));\n\n    /** @private {!Observable} */\n    this.pointerDownObservable_ = new Observable();\n\n    /**\n     * Observers for each type of registered gesture types.\n     * @private {!Object<string, !Observable<!Gesture>>}\n     */\n    this.overservers_ = Object.create(null);\n\n    /** @private @const {function(!Event)} */\n    this.boundOnTouchStart_ = this.onTouchStart_.bind(this);\n    /** @private @const {function(!Event)} */\n    this.boundOnTouchEnd_ = this.onTouchEnd_.bind(this);\n    /** @private @const {function(!Event)} */\n    this.boundOnTouchMove_ = this.onTouchMove_.bind(this);\n    /** @private @const {function(!Event)} */\n    this.boundOnTouchCancel_ = this.onTouchCancel_.bind(this);\n\n    this.element_.addEventListener('touchstart', this.boundOnTouchStart_);\n    this.element_.addEventListener('touchend', this.boundOnTouchEnd_);\n    this.element_.addEventListener('touchmove', this.boundOnTouchMove_);\n    this.element_.addEventListener('touchcancel', this.boundOnTouchCancel_);\n\n    /** @private {boolean} */\n    this.passAfterEvent_ = false;\n  }\n\n  /**\n   * Unsubscribes from all pointer events and removes the shared cache instance.\n   */\n  cleanup() {\n    this.element_.removeEventListener('touchstart', this.boundOnTouchStart_);\n    this.element_.removeEventListener('touchend', this.boundOnTouchEnd_);\n    this.element_.removeEventListener('touchmove', this.boundOnTouchMove_);\n    this.element_.removeEventListener('touchcancel', this.boundOnTouchCancel_);\n    delete this.element_[PROP_];\n    this.pass_.cancel();\n  }\n\n  /**\n   * Subscribes to a gesture emitted by the specified recognizer. For a first\n   * gesture handler registered in this method the recognizer is installed\n   * and from that point on it participates in the event processing.\n   *\n   * @param {function(new:GestureRecognizer<DATA>, !Gestures)} recognizerConstr\n   * @param {function(!Gesture<DATA>)} handler\n   * @return {!UnlistenDef}\n   * @template DATA\n   */\n  onGesture(recognizerConstr, handler) {\n    const recognizer = new recognizerConstr(this);\n    const type = recognizer.getType();\n    let overserver = this.overservers_[type];\n    if (!overserver) {\n      this.recognizers_.push(recognizer);\n      overserver = new Observable();\n      this.overservers_[type] = overserver;\n    }\n    return overserver.add(handler);\n  }\n\n  /**\n   * Unsubscribes all handlers from the given gesture recognizer. Returns\n   * true if anything was done. Returns false if there were no handlers\n   * registered on the given gesture recognizer in first place.\n   *\n   * @param {function(new:GestureRecognizer<DATA>, !Gestures)} recognizerConstr\n   * @return {boolean}\n   */\n  removeGesture(recognizerConstr) {\n    const type = new recognizerConstr(this).getType();\n    const overserver = this.overservers_[type];\n    if (overserver) {\n      overserver.removeAll();\n      const index = findIndex(this.recognizers_, e => e.getType() == type);\n      if (index < 0) {\n        return false;\n      }\n      // Remove the recognizer as well as all associated tracking state\n      this.recognizers_.splice(index, 1);\n      this.ready_.splice(index, 1);\n      this.pending_.splice(index, 1);\n      this.tracking_.splice(index, 1);\n      delete this.overservers_[type];\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * Subscribes to pointer down events, such as \"touchstart\" or \"mousedown\".\n   * @param {!Function} handler\n   * @return {!UnlistenDef}\n   */\n  onPointerDown(handler) {\n    return this.pointerDownObservable_.add(handler);\n  }\n\n  /**\n   * Handles all \"touchstart\" events and dispatches them to the tracking\n   * recognizers.\n   * @param {!Event} event\n   * @private\n   */\n  onTouchStart_(event) {\n    const now = Date.now();\n    this.wasEventing_ = false;\n\n    this.pointerDownObservable_.fire(event);\n\n    for (let i = 0; i < this.recognizers_.length; i++) {\n      if (this.ready_[i]) {\n        // If the recognizer is in the \"ready\" state, it won't receive\n        // any more touch series until it's allowed to emit.\n        continue;\n      }\n      if (this.pending_[i] && this.pending_[i] < now) {\n        // Pending state expired. Reset.\n        this.stopTracking_(i);\n      }\n      if (this.recognizers_[i].onTouchStart(event)) {\n        // When a recognizer is interested in the touch series it returns \"true\"\n        // from its onTouchStart method. For this recognizer we start tracking\n        // the whole series of touch events from touchstart to touchend. Other\n        // recognizers will not receive them unless they return \"true\" from\n        // onTouchStart.\n        this.startTracking_(i);\n      }\n    }\n\n    this.afterEvent_(event);\n  }\n\n  /**\n   * Handles all \"touchmove\" events and dispatches them to the tracking\n   * recognizers.\n   * @param {!Event} event\n   * @private\n   */\n  onTouchMove_(event) {\n    const now = Date.now();\n\n    for (let i = 0; i < this.recognizers_.length; i++) {\n      if (!this.tracking_[i]) {\n        // The whole touch series are ignored for non-tracking recognizers.\n        continue;\n      }\n      if (this.pending_[i] && this.pending_[i] < now) {\n        // Pending state expired. Reset.\n        this.stopTracking_(i);\n        continue;\n      }\n      if (!this.recognizers_[i].onTouchMove(event)) {\n        // Recognizer lost interest in the series. Reset.\n        this.stopTracking_(i);\n      }\n    }\n\n    this.afterEvent_(event);\n  }\n\n  /**\n   * Handles all \"touchend\" events and dispatches them to the tracking\n   * recognizers.\n   * @param {!Event} event\n   * @private\n   */\n  onTouchEnd_(event) {\n    const now = Date.now();\n\n    for (let i = 0; i < this.recognizers_.length; i++) {\n      if (!this.tracking_[i]) {\n        // The whole touch series are ignored for non-tracking recognizers.\n        continue;\n      }\n      if (this.pending_[i] && this.pending_[i] < now) {\n        // Pending state expired. Reset.\n        this.stopTracking_(i);\n        continue;\n      }\n      this.recognizers_[i].onTouchEnd(event);\n      if (!this.pending_[i] || this.pending_[i] < now) {\n        this.stopTracking_(i);\n      }\n    }\n\n    this.afterEvent_(event);\n  }\n\n  /**\n   * Handles all \"touchcancel\" events. Cancels all tracking/emitting\n   * recognizers.\n   * @param {!Event} event\n   * @private\n   */\n  onTouchCancel_(event) {\n    for (let i = 0; i < this.recognizers_.length; i++) {\n      this.cancelEventing_(i);\n    }\n    this.afterEvent_(event);\n  }\n\n  /**\n   * Callback for a gesture recognizer to communicate that it's ready to\n   * start emitting gestures. Gestures instance may or may not allow the\n   * recognizer to proceed.\n   * @param {!GestureRecognizer} recognizer\n   * @param {number} offset\n   * @private\n   */\n  signalReady_(recognizer, offset) {\n    // Somebody got here first.\n    if (this.eventing_) {\n      recognizer.acceptCancel();\n      return;\n    }\n\n    // Set the recognizer as ready and wait for the pass to\n    // make the decision.\n    const now = Date.now();\n    for (let i = 0; i < this.recognizers_.length; i++) {\n      if (this.recognizers_[i] == recognizer) {\n        this.ready_[i] = now + offset;\n        this.pending_[i] = 0;\n      }\n    }\n    this.passAfterEvent_ = true;\n  }\n\n  /**\n   * Callback for a gesture recognizer to communicate that it's close to\n   * start emitting gestures, but needs more time to see more events. Once\n   * this time expires the recognizer should either signal readiness or it\n   * will be canceled.\n   * @param {!GestureRecognizer} recognizer\n   * @param {number} timeLeft\n   * @private\n   */\n  signalPending_(recognizer, timeLeft) {\n    // Somebody got here first.\n    if (this.eventing_) {\n      recognizer.acceptCancel();\n      return;\n    }\n\n    const now = Date.now();\n    for (let i = 0; i < this.recognizers_.length; i++) {\n      if (this.recognizers_[i] == recognizer) {\n        this.pending_[i] = now + timeLeft;\n      }\n    }\n  }\n\n  /**\n   * Callback for a gesture recognizer to communicate that it's done\n   * emitting gestures.\n   * @param {!GestureRecognizer} recognizer\n   * @private\n   */\n  signalEnd_(recognizer) {\n    if (this.eventing_ == recognizer) {\n      this.eventing_ = null;\n      this.wasEventing_ = true;\n    }\n  }\n\n  /**\n   * Callback for a gesture emit the gesture. Only the currently emitting\n   * recognizer is allowed to emit gestures.\n   * @param {!GestureRecognizer} recognizer\n   * @param {*} data\n   * @param {?Event} event\n   * @private\n   */\n  signalEmit_(recognizer, data, event) {\n    dev().assert(this.eventing_ == recognizer,\n        'Recognizer is not currently allowed: %s', recognizer.getType());\n    const overserver = this.overservers_[recognizer.getType()];\n    if (overserver) {\n      overserver.fire(new Gesture(recognizer.getType(), data, Date.now(),\n          event));\n    }\n  }\n\n  /**\n   * @param {!Event} event\n   * @private\n   */\n  afterEvent_(event) {\n    let cancelEvent = !!this.eventing_ || this.wasEventing_;\n    this.wasEventing_ = false;\n    if (!cancelEvent) {\n      const now = Date.now();\n      for (let i = 0; i < this.recognizers_.length; i++) {\n        if (this.ready_[i] ||\n                this.pending_[i] && this.pending_[i] >= now) {\n          cancelEvent = true;\n          break;\n        }\n      }\n    }\n    if (cancelEvent) {\n      event.stopPropagation();\n      if (!this.shouldNotPreventDefault_) {\n        event.preventDefault();\n      }\n    }\n    if (this.passAfterEvent_) {\n      this.passAfterEvent_ = false;\n      this.doPass_();\n    }\n  }\n\n  /**\n   * The pass that decides which recognizers can start emitting and which\n   * are canceled.\n   * @private\n   */\n  doPass_() {\n    const now = Date.now();\n\n    // The \"most ready\" recognizer is the youngest in the \"ready\" set.\n    // Otherwise we wouldn't wait for it at all.\n    let readyIndex = -1;\n    for (let i = 0; i < this.recognizers_.length; i++) {\n      if (!this.ready_[i]) {\n        if (this.pending_[i] && this.pending_[i] < now) {\n          // Pending state expired. Reset.\n          this.stopTracking_(i);\n        }\n        continue;\n      }\n      if (readyIndex == -1 || this.ready_[i] > this.ready_[readyIndex]) {\n        readyIndex = i;\n      }\n    }\n\n    if (readyIndex == -1) {\n      // Nothing to do.\n      return;\n    }\n\n    // Look for conflicts.\n    let waitTime = 0;\n    for (let i = 0; i < this.recognizers_.length; i++) {\n      if (this.ready_[i] || !this.tracking_[i]) {\n        continue;\n      }\n      waitTime = Math.max(waitTime, this.pending_[i] - now);\n    }\n\n    if (waitTime < 2) {\n      // We waited long enough.\n      this.startEventing_(readyIndex);\n      return;\n    }\n\n    // Some conflicts: have to wait to see who wins.\n    this.pass_.schedule(waitTime);\n  }\n\n  /**\n   * This recognizer is given \"go ahead\" and all others are canceled.\n   * @param {number} index\n   * @private\n   */\n  startEventing_(index) {\n    const recognizer = this.recognizers_[index];\n    for (let i = 0; i < this.recognizers_.length; i++) {\n      if (i != index) {\n        this.cancelEventing_(i);\n      }\n    }\n    this.ready_[index] = 0;\n    this.pending_[index] = 0;\n    this.eventing_ = recognizer;\n    recognizer.acceptStart();\n  }\n\n  /**\n   * @param {number} index\n   * @private\n   */\n  startTracking_(index) {\n    this.tracking_[index] = true;\n    this.pending_[index] = 0;\n  }\n\n  /**\n   * @param {number} index\n   * @private\n   */\n  stopTracking_(index) {\n    this.tracking_[index] = false;\n    this.pending_[index] = 0;\n    if (!this.ready_[index]) {\n      this.recognizers_[index].acceptCancel();\n    }\n  }\n\n  /**\n   * @param {number} index\n   * @private\n   */\n  cancelEventing_(index) {\n    this.ready_[index] = 0;\n    this.stopTracking_(index);\n  }\n}\n\n\n/**\n * The gesture recognizer receives the pointer events from Gestures instance.\n * Based on these events, it can \"recognize\" the gesture it's responsible for,\n * request to start emitting and emit gestures. Gestures instances manages\n * several competing recognizers and decides which ones get to emit gestures\n * and which do not.\n *\n * The recognizer can be in several main states:\n * 1. Tracking state. In this state the recognizer is receiving the series of\n *    touch events from touchstart to touchend. To get into this state the\n *    recognizer has to return \"true\" from the {@link onTouchStart}.\n * 2. Pending state (optional). The recognizer matched part of the gesture,\n *    but needs more time to get track more events. It requests more time\n *    by calling {@link signalPending}, By the end of this time the recognizer\n *    has either matched the gesture or has been canceled.\n * 3. Ready state. The recognizer matched the whole gesture and ready to start\n *    emitting. It communicates to the Gestures this readiness by calling\n *    {@link signalReady}.\n * 5. Emitting state. If Gestures decides to go ahead with this recognizer, it\n *    will call {@link acceptStart} method. Otherwise, it will call\n *    {@link acceptCancel} method. Once in the emitting state, the recognizer\n *    can emit any number of events by calling {@link signalEmit}.\n * 6. Complete state. Once done, the recognizer can call {@link signalEnd} to\n *    communicate that it's done.\n *\n * @template DATA\n */\nexport class GestureRecognizer {\n\n  /**\n   * @param {string} type\n   * @param {!Gestures} manager\n   */\n  constructor(type, manager) {\n    /** @private @const {string} */\n    this.type_ = type;\n\n    /** @private @const {!Gestures} */\n    this.manager_ = manager;\n  }\n\n  /**\n   * Returns the type of the gesture emitted by the instance of this class.\n   * It has to be unique in the scope of the Gestures instance.\n   * @return {string}\n   */\n  getType() {\n    return this.type_;\n  }\n\n  /**\n   * The recognizer can call this method to communicate that it's ready to\n   * start emitting the gesture. Optionally it can pass a zero, positive or\n   * negative offset - a time on how much the gesture should be penalized or\n   * given advantage in conflict resolution. The recognizer at this point is\n   * in the \"ready\" state.\n   * @param {time} offset\n   */\n  signalReady(offset) {\n    this.manager_.signalReady_(this, offset);\n  }\n\n  /**\n   * The recognizer can call this method to communicate that it needs more\n   * time (timeLeft) to match the gesture. By the end of this time the\n   * recognizer has to either transit to the ready state using\n   * {@link signalReady} or it will be canceled. The recognizer is in the\n   * \"pending\" state.\n   * @param {time} timeLeft\n   */\n  signalPending(timeLeft) {\n    this.manager_.signalPending_(this, timeLeft);\n  }\n\n  /**\n   * The recognizer can call this method to communicate that it's done\n   * emitting the gestures. It will return to the waiting state. Recognizer\n   * can only call this method if it has previously received the\n   * {@link acceptStart} call.\n   */\n  signalEnd() {\n    this.manager_.signalEnd_(this);\n  }\n\n  /**\n   * The recognizer can call this method to emit the gestures while in the\n   * \"emitting\" state. Recognizer can only call this method if it has\n   * previously received the {@link acceptStart} call.\n   * @param {DATA} data\n   * @param {?Event} event\n   */\n  signalEmit(data, event) {\n    this.manager_.signalEmit_(this, data, event);\n  }\n\n  /**\n   * The Gestures instance calls this method to allow the recognizer to start\n   * emitting the gestures. At this point the recognizer is in the \"emitting\"\n   * state. It will be in this state until it calls {@link signalEnd} or\n   * the {@link acceptCancel} is called by the Gestures instance.\n   */\n  acceptStart() {\n  }\n\n  /**\n   * The Gestures instance calls this method to reset the recognizer. At this\n   * point the recognizer is in the initial waiting state.\n   */\n  acceptCancel() {\n  }\n\n  /**\n   * The Gestures instance calls this method for each \"touchstart\" event. If\n   * the recognizer wants to receive other touch events in the series, it has\n   * to return \"true\".\n   * @param {!Event} unusedEvent\n   * @return {boolean}\n   */\n  onTouchStart(unusedEvent) {\n    return false;\n  }\n\n  /**\n   * The Gestures instance calls this method for each \"touchmove\" event. If\n   * the recognizer wants to continue receiving touch events in the series,\n   * it has to return \"true\".\n   * @param {!Event} unusedEvent\n   * @return {boolean}\n   */\n  onTouchMove(unusedEvent) {\n    return false;\n  }\n\n  /**\n   * The Gestures instance calls this method for the \"touchend\" event.\n   * Somewhere within this touch series the recognizer has to call\n   * {@link signalReady} or {@link signalPending} or it will be reset for the\n   * next touch series.\n   * @param {!Event} unusedEvent\n   */\n  onTouchEnd(unusedEvent) {\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview This module declares JSON types as defined in the\n * {@link http://json.org/}.\n */\n\nimport {isObject} from './types';\n\n\n// NOTE Type are changed to {*} because of\n// https://github.com/google/closure-compiler/issues/1999\n\n/**\n * JSON scalar. It's either string, number or boolean.\n * @typedef {*} should be string|number|boolean\n */\nlet JSONScalarDef;\n\n\n/**\n * JSON object. It's a map with string keys and JSON values.\n * @typedef {*} should be !Object<string, ?JSONValueDef>\n */\nlet JSONObjectDef;\n\n\n/**\n * JSON array. It's an array with JSON values.\n * @typedef {*} should be !Array<?JSONValueDef>\n */\nlet JSONArrayDef;\n\n\n/**\n * JSON value. It's either a scalar, an object or an array.\n * @typedef {*} should be !JSONScalarDef|!JSONObjectDef|!JSONArrayDef\n */\nlet JSONValueDef;\n\n/**\n * Recreates objects with prototype-less copies.\n * @param {!JsonObject} obj\n * @return {!JsonObject}\n */\nexport function recreateNonProtoObject(obj) {\n  const copy = Object.create(null);\n  for (const k in obj) {\n    if (!hasOwnProperty(obj, k)) {\n      continue;\n    }\n    const v = obj[k];\n    copy[k] = isObject(v) ? recreateNonProtoObject(v) : v;\n  }\n  return /** @type {!JsonObject} */ (copy);\n}\n\n/**\n * Returns a value from an object for a field-based expression. The expression\n * is a simple nested dot-notation of fields, such as `field1.field2`. If any\n * field in a chain does not exist or is not an object or array, the returned\n * value will be `undefined`.\n *\n * @param {!JsonObject} obj\n * @param {string} expr\n * @return {*}\n */\nexport function getValueForExpr(obj, expr) {\n  // The `.` indicates \"the object itself\".\n  if (expr == '.') {\n    return obj;\n  }\n  // Otherwise, navigate via properties.\n  const parts = expr.split('.');\n  let value = obj;\n  for (let i = 0; i < parts.length; i++) {\n    const part = parts[i];\n    if (part &&\n        value &&\n        value[part] !== undefined &&\n        hasOwnProperty(value, part)\n    ) {\n      value = value[part];\n      continue;\n    }\n    value = undefined;\n    break;\n  }\n  return value;\n}\n\n/**\n * Simple wrapper around JSON.parse that casts the return value\n * to JsonObject.\n * Create a new wrapper if an array return value is desired.\n * @param {*} json JSON string to parse\n * @return {?JsonObject} May be extend to parse arrays.\n */\nexport function parseJson(json) {\n  return /** @type {?JsonObject} */(JSON.parse(/** @type {string} */ (json)));\n}\n\n/**\n * Parses the given `json` string without throwing an exception if not valid.\n * Returns `undefined` if parsing fails.\n * Returns the `Object` corresponding to the JSON string when parsing succeeds.\n * @param {*} json JSON string to parse\n * @param {function(!Error)=} opt_onFailed Optional function that will be called\n *     with the error if parsing fails.\n * @return {?JsonObject|undefined} May be extend to parse arrays.\n */\nexport function tryParseJson(json, opt_onFailed) {\n  try {\n    return parseJson(json);\n  } catch (e) {\n    if (opt_onFailed) {\n      opt_onFailed(e);\n    }\n    return undefined;\n  }\n}\n\n/**\n * Recursively checks strict equality of items in nested arrays and objects.\n *\n * @param {JSONValueDef} a\n * @param {JSONValueDef} b\n * @param {number} depth The maximum recursion depth. Must be finite.\n * @return {boolean}\n * @throws {Error} If depth argument is not finite.\n */\nexport function recursiveEquals(a, b, depth = 3) {\n  if (!isFinite(depth)) {\n    throw new Error('depth arg must be finite: ' + depth);\n  }\n  if (a === b) {\n    return true;\n  }\n  // Only check shallow equality for depth < 1.\n  if (depth < 1) {\n    return false;\n  }\n  if (typeof a !== typeof b) {\n    return false;\n  }\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (let i = 0; i < a.length; i++) {\n      if (!recursiveEquals(a[i], b[i], depth - 1)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  if (a && b && typeof a === 'object' && typeof b === 'object') {\n    const keysA = Object.keys(/** @type {!Object} */ (a));\n    const keysB = Object.keys(/** @type {!Object} */ (b));\n    if (keysA.length !== keysB.length) {\n      return false;\n    }\n    for (let i = 0; i < keysA.length; i++) {\n      const keyA = keysA[i];\n      const valueA = a[keyA];\n      const valueB = b[keyA];\n      if (!recursiveEquals(valueA, valueB, depth - 1)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n}\n\n\n/**\n * @param {*} obj\n * @param {string} key\n * @return {boolean}\n */\nfunction hasOwnProperty(obj, key) {\n  if (obj == null || typeof obj != 'object') {\n    return false;\n  }\n  return Object.prototype.hasOwnProperty.call(\n      /** @type {!Object} */ (obj), key);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Implements element layout. See https://goo.gl/9avXuT for\n * details.\n */\n\nimport {dev, user} from './log';\nimport {isFiniteNumber} from './types';\nimport {setStyle, setStyles} from './style';\nimport {startsWith} from './string';\n\n\n/**\n * @enum {string}\n */\nexport const Layout = {\n  NODISPLAY: 'nodisplay',\n  FIXED: 'fixed',\n  FIXED_HEIGHT: 'fixed-height',\n  RESPONSIVE: 'responsive',\n  CONTAINER: 'container',\n  FILL: 'fill',\n  FLEX_ITEM: 'flex-item',\n  FLUID: 'fluid',\n};\n\n\n/**\n * CSS Length type. E.g. \"1px\" or \"20vh\".\n * @typedef {string}\n */\nexport let LengthDef;\n\n\n/**\n * @typedef {{\n *   width: string,\n *   height: string\n * }}\n */\nlet DimensionsDef;\n\n\n/**\n * The set of elements with natural dimensions, that is, elements\n * which have a known dimension either based on their value specified here,\n * or, if the value is null, a dimension specific to the browser.\n * `hasNaturalDimensions` checks for membership in this set.\n * `getNaturalDimensions` determines the dimensions for an element in the\n *    set and caches it.\n * @type {!Object<string, ?DimensionsDef>}\n * @private  Visible for testing only!\n */\nexport const naturalDimensions_ = {\n  'AMP-PIXEL': {width: '0px', height: '0px'},\n  'AMP-ANALYTICS': {width: '1px', height: '1px'},\n  // TODO(dvoytenko): audio should have width:auto.\n  'AMP-AUDIO': null,\n  'AMP-SOCIAL-SHARE': {width: '60px', height: '44px'},\n};\n\n\n/**\n * Elements that the progess can be shown for. This set has to be externalized\n * since the element's implementation may not be downloaded yet.\n * @enum {boolean}\n * @private  Visible for testing only!\n */\nexport const LOADING_ELEMENTS_ = {\n  'AMP-ANIM': true,\n  'AMP-BRIGHTCOVE': true,\n  'AMP-EMBED': true,\n  'AMP-IFRAME': true,\n  'AMP-IMG': true,\n  'AMP-INSTAGRAM': true,\n  'AMP-LIST': true,\n  'AMP-OOYALA-PLAYER': true,\n  'AMP-PINTEREST': true,\n  'AMP-PLAYBUZZ': true,\n  'AMP-VIDEO': true,\n  'AMP-YOUTUBE': true,\n};\n\n\n/**\n * @param {string} s\n * @return {Layout|undefined} Returns undefined in case of failure to parse\n *   the layout string.\n */\nexport function parseLayout(s) {\n  for (const k in Layout) {\n    if (Layout[k] == s) {\n      return Layout[k];\n    }\n  }\n  return undefined;\n}\n\n\n/**\n * @param {!Layout} layout\n * @return {string}\n */\nexport function getLayoutClass(layout) {\n  return 'i-amphtml-layout-' + layout;\n}\n\n\n/**\n * Whether an element with this layout inherently defines the size.\n * @param {!Layout} layout\n * @return {boolean}\n */\nexport function isLayoutSizeDefined(layout) {\n  return (layout == Layout.FIXED ||\n      layout == Layout.FIXED_HEIGHT ||\n      layout == Layout.RESPONSIVE ||\n      layout == Layout.FILL ||\n      layout == Layout.FLEX_ITEM ||\n      layout == Layout.FLUID);\n}\n\n\n/**\n * Whether the tag is an internal (service) AMP tag.\n * @param {!Node|string} tag\n * @return {boolean}\n */\nexport function isInternalElement(tag) {\n  const tagName = (typeof tag == 'string') ? tag : tag.tagName;\n  return tagName && startsWith(tagName.toLowerCase(), 'i-');\n}\n\n\n/**\n * Parses the CSS length value. If no units specified, the assumed value is\n * \"px\". Returns undefined in case of parsing error.\n * @param {string|undefined} s\n * @return {!LengthDef|undefined}\n */\nexport function parseLength(s) {\n  if (typeof s == 'number') {\n    return s + 'px';\n  }\n  if (!s) {\n    return undefined;\n  }\n  if (!/^\\d+(\\.\\d+)?(px|em|rem|vh|vw|vmin|vmax|cm|mm|q|in|pc|pt)?$/.test(s)) {\n    return undefined;\n  }\n  if (/^\\d+(\\.\\d+)?$/.test(s)) {\n    return s + 'px';\n  }\n  return s;\n}\n\n\n\n/**\n * Asserts that the supplied value is a non-percent CSS Length value.\n * @param {!LengthDef|string|null|undefined} length\n * @return {!LengthDef}\n */\nexport function assertLength(length) {\n  user().assert(\n      /^\\d+(\\.\\d+)?(px|em|rem|vh|vw|vmin|vmax|cm|mm|q|in|pc|pt)$/.test(length),\n      'Invalid length value: %s', length);\n  return /** @type {!LengthDef} */ (length);\n}\n\n\n\n\n/**\n * Asserts that the supplied value is a CSS Length value\n * (including percent unit).\n * @param {!LengthDef|string} length\n * @return {!LengthDef}\n */\nexport function assertLengthOrPercent(length) {\n  user().assert(/^\\d+(\\.\\d+)?(px|em|rem|vh|vw|vmin|vmax|%)$/.test(length),\n      'Invalid length or percent value: %s', length);\n  return length;\n}\n\n\n/**\n * Returns units from the CSS length value.\n * @param {!LengthDef|string|null|undefined} length\n * @return {string}\n */\nexport function getLengthUnits(length) {\n  assertLength(length);\n  dev().assertString(length);\n  const m = user().assert(length.match(/[a-z]+/i),\n      'Failed to read units from %s', length);\n  return m[0];\n}\n\n\n/**\n * Returns the numeric value of a CSS length value.\n * @param {!LengthDef|string|null|undefined} length\n * @return {number|undefined}\n */\nexport function getLengthNumeral(length) {\n  const res = parseFloat(length);\n  return isFiniteNumber(res) ? res : undefined;\n}\n\n\n/**\n * Determines whether the tagName is a known element that has natural dimensions\n * in our runtime or the browser.\n * @param {string} tagName The element tag name.\n * @return {boolean}\n */\nexport function hasNaturalDimensions(tagName) {\n  tagName = tagName.toUpperCase();\n  return naturalDimensions_[tagName] !== undefined;\n}\n\n\n/**\n * Determines the default dimensions for an element which could vary across\n * different browser implementations, like <audio> for instance.\n * This operation can only be completed for an element whitelisted by\n * `hasNaturalDimensions`.\n * @param {!Element} element\n * @return {DimensionsDef}\n */\nexport function getNaturalDimensions(element) {\n  const tagName = element.tagName.toUpperCase();\n  dev().assert(naturalDimensions_[tagName] !== undefined);\n  if (!naturalDimensions_[tagName]) {\n    const doc = element.ownerDocument;\n    const naturalTagName = tagName.replace(/^AMP\\-/, '');\n    const temp = doc.createElement(naturalTagName);\n    // For audio, should no-op elsewhere.\n    temp.controls = true;\n    setStyles(temp, {\n      position: 'absolute',\n      visibility: 'hidden',\n    });\n    doc.body.appendChild(temp);\n    naturalDimensions_[tagName] = {\n      width: (temp./*OK*/offsetWidth || 1) + 'px',\n      height: (temp./*OK*/offsetHeight || 1) + 'px',\n    };\n    doc.body.removeChild(temp);\n  }\n  return /** @type {DimensionsDef} */ (naturalDimensions_[tagName]);\n}\n\n\n/**\n * Whether the loading can be shown for the specified elemeent. This set has\n * to be externalized since the element's implementation may not be\n * downloaded yet.\n * @param {!Element} element.\n * @return {boolean}\n */\nexport function isLoadingAllowed(element) {\n  const tagName = element.tagName.toUpperCase();\n  if (tagName == 'AMP-AD' || tagName == 'AMP-EMBED') {\n    return true;\n  }\n  return LOADING_ELEMENTS_[tagName] || false;\n}\n\n\n/**\n * Applies layout to the element. Visible for testing only.\n *\n * \\   \\  /  \\  /   / /   \\     |   _  \\     |  \\ |  | |  | |  \\ |  |  / _____|\n *  \\   \\/    \\/   / /  ^  \\    |  |_)  |    |   \\|  | |  | |   \\|  | |  |  __\n *   \\            / /  /_\\  \\   |      /     |  . `  | |  | |  . `  | |  | |_ |\n *    \\    /\\    / /  _____  \\  |  |\\  \\----.|  |\\   | |  | |  |\\   | |  |__| |\n *     \\__/  \\__/ /__/     \\__\\ | _| `._____||__| \\__| |__| |__| \\__|  \\______|\n *\n * The equivalent of this method is used for server-side rendering (SSR) and\n * any changes made to it must be made in coordination with caches that\n * implement SSR. For more information on SSR see bit.ly/amp-ssr.\n *\n * @param {!Element} element\n * @return {!Layout}\n */\nexport function applyStaticLayout(element) {\n  // Check if the layout has already been done by server-side rendering. The\n  // document may be visible to the user if the boilerplate was removed so\n  // please take care in making changes here.\n  const completedLayoutAttr = element.getAttribute('i-amphtml-layout');\n  if (completedLayoutAttr) {\n    const layout = /** @type {!Layout} */ (dev().assert(\n        parseLayout(completedLayoutAttr)));\n    if (layout == Layout.RESPONSIVE && element.firstElementChild) {\n      // Find sizer, but assume that it might not have been parsed yet.\n      element.sizerElement =\n          element.querySelector('i-amphtml-sizer') || undefined;\n    } else if (layout == Layout.NODISPLAY) {\n      applyNoDisplayLayout(element);\n    }\n    return layout;\n  }\n\n  // If the layout was already done by server-side rendering (SSR), then the code\n  // below will not run. Any changes below will necessitate a change to SSR and must\n  // be coordinated with caches that implement SSR. See bit.ly/amp-ssr.\n\n  // Parse layout from the element.\n  const layoutAttr = element.getAttribute('layout');\n  const widthAttr = element.getAttribute('width');\n  const heightAttr = element.getAttribute('height');\n  const sizesAttr = element.getAttribute('sizes');\n  const heightsAttr = element.getAttribute('heights');\n\n  // Input layout attributes.\n  const inputLayout = layoutAttr ? parseLayout(layoutAttr) : null;\n  user().assert(inputLayout !== undefined, 'Unknown layout: %s', layoutAttr);\n  const inputWidth = (widthAttr && widthAttr != 'auto') ?\n    parseLength(widthAttr) : widthAttr;\n  user().assert(inputWidth !== undefined, 'Invalid width value: %s', widthAttr);\n  const inputHeight = (heightAttr && heightAttr != 'fluid') ?\n    parseLength(heightAttr) : heightAttr;\n  user().assert(inputHeight !== undefined, 'Invalid height value: %s',\n      heightAttr);\n\n  // Effective layout attributes. These are effectively constants.\n  let width;\n  let height;\n  let layout;\n\n  // Calculate effective width and height.\n  if ((!inputLayout || inputLayout == Layout.FIXED ||\n      inputLayout == Layout.FIXED_HEIGHT) &&\n      (!inputWidth || !inputHeight) && hasNaturalDimensions(element.tagName)) {\n    // Default width and height: handle elements that do not specify a\n    // width/height and are defined to have natural browser dimensions.\n    const dimensions = getNaturalDimensions(element);\n    width = (inputWidth || inputLayout == Layout.FIXED_HEIGHT) ? inputWidth :\n      dimensions.width;\n    height = inputHeight || dimensions.height;\n  } else {\n    width = inputWidth;\n    height = inputHeight;\n  }\n\n  // Calculate effective layout.\n  if (inputLayout) {\n    layout = inputLayout;\n  } else if (!width && !height) {\n    layout = Layout.CONTAINER;\n  } else if (height == 'fluid') {\n    layout = Layout.FLUID;\n  } else if (height && (!width || width == 'auto')) {\n    layout = Layout.FIXED_HEIGHT;\n  } else if (height && width && (sizesAttr || heightsAttr)) {\n    layout = Layout.RESPONSIVE;\n  } else {\n    layout = Layout.FIXED;\n  }\n\n  // Verify layout attributes.\n  if (layout == Layout.FIXED || layout == Layout.FIXED_HEIGHT ||\n      layout == Layout.RESPONSIVE) {\n    user().assert(height, 'Expected height to be available: %s', heightAttr);\n  }\n  if (layout == Layout.FIXED_HEIGHT) {\n    user().assert(!width || width == 'auto',\n        'Expected width to be either absent or equal \"auto\" ' +\n        'for fixed-height layout: %s', widthAttr);\n  }\n  if (layout == Layout.FIXED || layout == Layout.RESPONSIVE) {\n    user().assert(width && width != 'auto',\n        'Expected width to be available and not equal to \"auto\": %s',\n        widthAttr);\n  }\n  if (layout == Layout.RESPONSIVE) {\n    user().assert(getLengthUnits(width) == getLengthUnits(height),\n        'Length units should be the same for width and height: %s, %s',\n        widthAttr, heightAttr);\n  } else {\n    user().assert(heightsAttr === null,\n        'Unexpected \"heights\" attribute for none-responsive layout');\n  }\n\n  // Apply UI.\n  element.classList.add(getLayoutClass(layout));\n  if (isLayoutSizeDefined(layout)) {\n    element.classList.add('i-amphtml-layout-size-defined');\n  }\n  if (layout == Layout.NODISPLAY) {\n    // CSS defines layout=nodisplay automatically with `display:none`. Thus\n    // no additional styling is needed.\n    applyNoDisplayLayout(element);\n  } else if (layout == Layout.FIXED) {\n    setStyles(element, {\n      width: dev().assertString(width),\n      height: dev().assertString(height),\n    });\n  } else if (layout == Layout.FIXED_HEIGHT) {\n    setStyle(element, 'height', dev().assertString(height));\n  } else if (layout == Layout.RESPONSIVE) {\n    const sizer = element.ownerDocument.createElement('i-amphtml-sizer');\n    setStyles(sizer, {\n      display: 'block',\n      paddingTop:\n        ((getLengthNumeral(height) / getLengthNumeral(width)) * 100) + '%',\n    });\n    element.insertBefore(sizer, element.firstChild);\n    element.sizerElement = sizer;\n  } else if (layout == Layout.FILL) {\n    // Do nothing.\n  } else if (layout == Layout.CONTAINER) {\n    // Do nothing. Elements themselves will check whether the supplied\n    // layout value is acceptable. In particular container is only OK\n    // sometimes.\n  } else if (layout == Layout.FLEX_ITEM) {\n    // Set height and width to a flex item if they exist.\n    // The size set to a flex item could be overridden by `display: flex` later.\n    if (width) {\n      setStyle(element, 'width', width);\n    }\n    if (height) {\n      setStyle(element, 'height', height);\n    }\n  } else if (layout == Layout.FLUID) {\n    element.classList.add('i-amphtml-layout-awaiting-size');\n    if (width) {\n      setStyle(element, 'width', width);\n    }\n    setStyle(element, 'height', 0);\n  }\n  return layout;\n}\n\n\n/**\n * @param {!Element} element\n */\nfunction applyNoDisplayLayout(element) {\n  // TODO(dvoytenko, #9353): once `toggleLayoutDisplay` API has been deployed\n  // everywhere, switch all relevant elements to this API. In the meantime,\n  // simply unblock display toggling via `style=\"display: ...\"`.\n  setStyle(element, 'display', 'none');\n  element.classList.add('i-amphtml-display');\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\nimport {getModeObject} from './mode-object';\nimport {isEnumValue} from './types';\n\n/**\n * Triple zero width space.\n *\n * This is added to user error messages, so that we can later identify\n * them, when the only thing that we have is the message. This is the\n * case in many browsers when the global exception handler is invoked.\n *\n * @const {string}\n */\nexport const USER_ERROR_SENTINEL = '\\u200B\\u200B\\u200B';\n\n\n/**\n * Four zero width space.\n *\n * @const {string}\n */\nexport const USER_ERROR_EMBED_SENTINEL = '\\u200B\\u200B\\u200B\\u200B';\n\n\n/**\n * @return {boolean} Whether this message was a user error.\n */\nexport function isUserErrorMessage(message) {\n  return message.indexOf(USER_ERROR_SENTINEL) >= 0;\n}\n\n/**\n * @return {boolean} Whether this message was a a user error from an iframe embed.\n */\nexport function isUserErrorEmbed(message) {\n  return message.indexOf(USER_ERROR_EMBED_SENTINEL) >= 0;\n}\n\n\n/**\n * @enum {number}\n * @private Visible for testing only.\n */\nexport const LogLevel = {\n  OFF: 0,\n  ERROR: 1,\n  WARN: 2,\n  INFO: 3,\n  FINE: 4,\n};\n\n/**\n * Sets reportError function. Called from error.js to break cyclic\n * dependency.\n * @param {function(*, !Element=)|undefined} fn\n */\nexport function setReportError(fn) {\n  self.reportError = fn;\n}\n\n/**\n * Logging class.\n * Use of sentinel string instead of a boolean to check user/dev errors\n * because errors could be rethrown by some native code as a new error, and only a message would survive.\n * Also, some browser dont support a 5th error object argument in window.onerror. List of supporting browser can be found\n * here: https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror.html\n * @final\n * @private Visible for testing only.\n */\nexport class Log {\n  /**\n   * opt_suffix will be appended to error message to identify the type of the error message.\n   * We can't rely on the error object to pass along the type because\n   * some browsers do not have this param in its window.onerror API.\n   * See: https://blog.sentry.io/2016/01/04/client-javascript-reporting-window-onerror.html\n   *\n   * @param {!Window} win\n   * @param {function(!./mode.ModeDef):!LogLevel} levelFunc\n   * @param {string=} opt_suffix\n   */\n  constructor(win, levelFunc, opt_suffix) {\n    /**\n     * In tests we use the main test window instead of the iframe where\n     * the tests runs because only the former is relayed to the console.\n     * @const {!Window}\n     */\n    this.win = (getMode().test && win.AMP_TEST_IFRAME) ? win.parent : win;\n\n    /** @private @const {function(!./mode.ModeDef):!LogLevel} */\n    this.levelFunc_ = levelFunc;\n\n    /** @private @const {!LogLevel} */\n    this.level_ = this.calcLevel_();\n\n    /** @private @const {string} */\n    this.suffix_ = opt_suffix || '';\n  }\n\n  /**\n   * @return {!LogLevel}\n   * @private\n   */\n  calcLevel_() {\n    // No console - can't enable logging.\n    if (!this.win.console || !this.win.console.log) {\n      return LogLevel.OFF;\n    }\n\n    // Logging has been explicitly disabled.\n    if (getMode().log == '0') {\n      return LogLevel.OFF;\n    }\n\n    // Logging is enabled for tests directly.\n    if (getMode().test && this.win.ENABLE_LOG) {\n      return LogLevel.FINE;\n    }\n\n    // LocalDev by default allows INFO level, unless overriden by `#log`.\n    if (getMode().localDev && !getMode().log) {\n      return LogLevel.INFO;\n    }\n\n    // Delegate to the specific resolver.\n    return this.levelFunc_(getModeObject());\n  }\n\n  /**\n   * @param {string} tag\n   * @param {string} level\n   * @param {!Array} messages\n   */\n  msg_(tag, level, messages) {\n    if (this.level_ != LogLevel.OFF) {\n      let fn = this.win.console.log;\n      if (level == 'ERROR') {\n        fn = this.win.console.error || fn;\n      } else if (level == 'INFO') {\n        fn = this.win.console.info || fn;\n      } else if (level == 'WARN') {\n        fn = this.win.console.warn || fn;\n      }\n      if (getMode().localDev) {\n        messages.unshift('[' + tag + ']');\n      }\n      fn.apply(this.win.console, messages);\n    }\n  }\n\n  /**\n   * Whether the logging is enabled.\n   * @return {boolean}\n   */\n  isEnabled() {\n    return this.level_ != LogLevel.OFF;\n  }\n\n  /**\n   * Reports a fine-grained message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  fine(tag, var_args) {\n    if (this.level_ >= LogLevel.FINE) {\n      this.msg_(tag, 'FINE', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a informational message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  info(tag, var_args) {\n    if (this.level_ >= LogLevel.INFO) {\n      this.msg_(tag, 'INFO', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports a warning message.\n   * @param {string} tag\n   * @param {...*} var_args\n   */\n  warn(tag, var_args) {\n    if (this.level_ >= LogLevel.WARN) {\n      this.msg_(tag, 'WARN', Array.prototype.slice.call(arguments, 1));\n    }\n  }\n\n  /**\n   * Reports an error message. If the logging is disabled, the error is rethrown\n   * asynchronously.\n   * @param {string} tag\n   * @param {...*} var_args\n   * @return {!Error|undefined}\n   * @private\n   */\n  error_(tag, var_args) {\n    if (this.level_ >= LogLevel.ERROR) {\n      this.msg_(tag, 'ERROR', Array.prototype.slice.call(arguments, 1));\n    } else {\n      const error = createErrorVargs.apply(null,\n          Array.prototype.slice.call(arguments, 1));\n      this.prepareError_(error);\n      return error;\n    }\n  }\n\n  /**\n   * Reports an error message.\n   * @param {string} tag\n   * @param {...*} var_args\n   * @return {!Error|undefined}\n   */\n  error(tag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      error.name = tag || error.name;\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Reports an error message and marks with an expected property. If the\n   * logging is disabled, the error is rethrown asynchronously.\n   * @param {string} unusedTag\n   * @param {...*} var_args\n   */\n  expectedError(unusedTag, var_args) {\n    const error = this.error_.apply(this, arguments);\n    if (error) {\n      error.expected = true;\n      // reportError is installed globally per window in the entry point.\n      self.reportError(error);\n    }\n  }\n\n  /**\n   * Creates an error object.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    return error;\n  }\n\n  /**\n   * Creates an error object with its expected property set to true.\n   * @param {...*} var_args\n   * @return {!Error}\n   */\n  createExpectedError(var_args) {\n    const error = createErrorVargs.apply(null, arguments);\n    this.prepareError_(error);\n    error.expected = true;\n    return error;\n  }\n\n  /**\n   * Throws an error if the first argument isn't trueish.\n   *\n   * Supports argument substitution into the message via %s placeholders.\n   *\n   * Throws an error object that has two extra properties:\n   * - associatedElement: This is the first element provided in the var args.\n   *   It can be used for improved display of error messages.\n   * - messageArray: The elements of the substituted message as non-stringified\n   *   elements in an array. When e.g. passed to console.error this yields\n   *   native displays of things like HTML elements.\n   *\n   * @param {T} shouldBeTrueish The value to assert. The assert fails if it does\n   *     not evaluate to true.\n   * @param {string=} opt_message The assertion message\n   * @param {...*} var_args Arguments substituted into %s in the message.\n   * @return {T} The value of shouldBeTrueish.\n   * @template T\n   */\n  /*eslint \"google-camelcase/google-camelcase\": 0*/\n  assert(shouldBeTrueish, opt_message, var_args) {\n    let firstElement;\n    if (!shouldBeTrueish) {\n      const message = opt_message || 'Assertion failed';\n      const splitMessage = message.split('%s');\n      const first = splitMessage.shift();\n      let formatted = first;\n      const messageArray = [];\n      pushIfNonEmpty(messageArray, first);\n      for (let i = 2; i < arguments.length; i++) {\n        const val = arguments[i];\n        if (val && val.tagName) {\n          firstElement = val;\n        }\n        const nextConstant = splitMessage.shift();\n        messageArray.push(val);\n        pushIfNonEmpty(messageArray, nextConstant.trim());\n        formatted += toString(val) + nextConstant;\n      }\n      const e = new Error(formatted);\n      e.fromAssert = true;\n      e.associatedElement = firstElement;\n      e.messageArray = messageArray;\n      this.prepareError_(e);\n      // reportError is installed globally per window in the entry point.\n      self.reportError(e);\n      throw e;\n    }\n    return shouldBeTrueish;\n  }\n\n  /**\n   * Throws an error if the first argument isn't an Element\n   *\n   * Otherwise see `assert` for usage\n   *\n   * @param {*} shouldBeElement\n   * @param {string=} opt_message The assertion message\n   * @return {!Element} The value of shouldBeTrueish.\n   * @template T\n   */\n  /*eslint \"google-camelcase/google-camelcase\": 2*/\n  assertElement(shouldBeElement, opt_message) {\n    const shouldBeTrueish = shouldBeElement && shouldBeElement.nodeType == 1;\n    this.assert(shouldBeTrueish, (opt_message || 'Element expected') + ': %s',\n        shouldBeElement);\n    return /** @type {!Element} */ (shouldBeElement);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a string. The string can\n   * be empty.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeString\n   * @param {string=} opt_message The assertion message\n   * @return {string} The string value. Can be an empty string.\n   */\n  /*eslint \"google-camelcase/google-camelcase\": 2*/\n  assertString(shouldBeString, opt_message) {\n    this.assert(typeof shouldBeString == 'string',\n        (opt_message || 'String expected') + ': %s', shouldBeString);\n    return /** @type {string} */ (shouldBeString);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a number. The allowed values\n   * include `0` and `NaN`.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeNumber\n   * @param {string=} opt_message The assertion message\n   * @return {number} The number value. The allowed values include `0`\n   *   and `NaN`.\n   */\n  assertNumber(shouldBeNumber, opt_message) {\n    this.assert(typeof shouldBeNumber == 'number',\n        (opt_message || 'Number expected') + ': %s', shouldBeNumber);\n    return /** @type {number} */ (shouldBeNumber);\n  }\n\n  /**\n   * Throws an error if the first argument isn't a boolean.\n   *\n   * For more details see `assert`.\n   *\n   * @param {*} shouldBeBoolean\n   * @param {string=} opt_message The assertion message\n   * @return {boolean} The boolean value.\n   */\n  assertBoolean(shouldBeBoolean, opt_message) {\n    this.assert(!!shouldBeBoolean === shouldBeBoolean,\n        (opt_message || 'Boolean expected') + ': %s', shouldBeBoolean);\n    return /** @type {boolean} */ (shouldBeBoolean);\n  }\n\n  /**\n   * Asserts and returns the enum value. If the enum doesn't contain such a value,\n   * the error is thrown.\n   *\n   * @param {!Object<T>} enumObj\n   * @param {string} s\n   * @param {string=} opt_enumName\n   * @return T\n   * @template T\n   */\n  /*eslint \"google-camelcase/google-camelcase\": 2*/\n  assertEnumValue(enumObj, s, opt_enumName) {\n    if (isEnumValue(enumObj, s)) {\n      return s;\n    }\n    this.assert(false,\n        'Unknown %s value: \"%s\"',\n        opt_enumName || 'enum', s);\n  }\n\n  /**\n   * @param {!Error} error\n   * @private\n   */\n  prepareError_(error) {\n    error = duplicateErrorIfNecessary(error);\n    if (this.suffix_) {\n      if (!error.message) {\n        error.message = this.suffix_;\n      } else if (error.message.indexOf(this.suffix_) == -1) {\n        error.message += this.suffix_;\n      }\n    } else if (isUserErrorMessage(error.message)) {\n      error.message = error.message.replace(USER_ERROR_SENTINEL, '');\n    }\n  }\n}\n\n/**\n * @param {string|!Element} val\n * @return {string}\n */\nfunction toString(val) {\n  // Do check equivalent to `val instanceof Element` without cross-window bug\n  if (val && val.nodeType == 1) {\n    return val.tagName.toLowerCase() + (val.id ? '#' + val.id : '');\n  }\n  return /** @type {string} */ (val);\n}\n\n\n/**\n * @param {!Array} array\n * @param {*} val\n */\nfunction pushIfNonEmpty(array, val) {\n  if (val != '') {\n    array.push(val);\n  }\n}\n\n/**\n * Some exceptions (DOMException, namely) have read-only message.\n * @param {!Error} error\n * @return {!Error};\n */\nexport function duplicateErrorIfNecessary(error) {\n  const message = error.message;\n  const test = String(Math.random());\n  error.message = test;\n\n  if (error.message === test) {\n    error.message = message;\n    return error;\n  }\n\n  const e = new Error(error.message);\n  // Copy all the extraneous things we attach.\n  for (const prop in error) {\n    e[prop] = error[prop];\n  }\n  // Ensure these are copied.\n  e.stack = error.stack;\n  return e;\n}\n\n/**\n * @param {...*} var_args\n * @return {!Error}\n * @private\n */\nfunction createErrorVargs(var_args) {\n  let error = null;\n  let message = '';\n  for (let i = 0; i < arguments.length; i++) {\n    const arg = arguments[i];\n    if (arg instanceof Error && !error) {\n      error = duplicateErrorIfNecessary(arg);\n    } else {\n      if (message) {\n        message += ' ';\n      }\n      message += arg;\n    }\n  }\n\n  if (!error) {\n    error = new Error(message);\n  } else if (message) {\n    error.message = message + ': ' + error.message;\n  }\n  return error;\n}\n\n\n/**\n * Rethrows the error without terminating the current context. This preserves\n * whether the original error designation is a user error or a dev error.\n * @param {...*} var_args\n */\nexport function rethrowAsync(var_args) {\n  const error = createErrorVargs.apply(null, arguments);\n  setTimeout(() => {\n    // reportError is installed globally per window in the entry point.\n    self.reportError(error);\n    throw error;\n  });\n}\n\n\n/**\n * Cache for logs. We do not use a Service since the service module depends\n * on Log and closure literally can't even.\n * @type {{user: ?Log, dev: ?Log, userForEmbed: ?Log}}\n */\nself.log = (self.log || {\n  user: null,\n  dev: null,\n  userForEmbed: null,\n});\n\nconst logs = self.log;\n\n/**\n * Eventually holds a constructor for Log objects. Lazily initialized, so we\n * can avoid ever referencing the real constructor except in JS binaries\n * that actually want to include the implementation.\n * @type {?Function}\n */\nlet logConstructor = null;\n\n\nexport function initLogConstructor() {\n  logConstructor = Log;\n  // Initialize instances for use. If a binary (an extension for example) that\n  // does not call `initLogConstructor` invokes `dev()` or `user()` earlier\n  // than the binary that does call `initLogConstructor` (amp.js), the extension\n  // will throw an error as that extension will never be able to initialize\n  // the log instances and we also don't want it to call `initLogConstructor`\n  // either (since that will cause the Log implementation to be bundled into that\n  // binary). So we must initialize the instances eagerly so that they are\n  // ready for use (stored globally) after the main binary calls\n  // `initLogConstructor`.\n  dev();\n  user();\n}\n\nexport function resetLogConstructorForTesting() {\n  logConstructor = null;\n}\n\n/**\n * Publisher level log.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Development mode is enabled via `#development=1` or logging is explicitly\n *     enabled via `#log=D` where D >= 1.\n *\n * @param {!Element=} opt_element\n * @return {!Log}\n */\nexport function user(opt_element) {\n  if (!logs.user) {\n    logs.user = getUserLogger(USER_ERROR_SENTINEL);\n  }\n  if (!isFromEmbed(logs.user.win, opt_element)) {\n    return logs.user;\n  } else {\n    if (logs.userForEmbed) {\n      return logs.userForEmbed;\n    }\n    return logs.userForEmbed = getUserLogger(USER_ERROR_EMBED_SENTINEL);\n  }\n}\n\n/**\n * Getter for user logger\n * @param {string=} suffix\n * @returns {!Log}\n */\nfunction getUserLogger(suffix) {\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (mode.development || logNum >= 1) {\n      return LogLevel.FINE;\n    }\n    return LogLevel.WARN;\n  }, suffix);\n}\n\n/**\n * AMP development log. Calls to `devLog().assert` and `dev.fine` are stripped in\n * the PROD binary. However, `devLog().assert` result is preserved in either case.\n *\n * Enabled in the following conditions:\n *  1. Not disabled using `#log=0`.\n *  2. Logging is explicitly enabled via `#log=D`, where D >= 2.\n *\n * @return {!Log}\n */\nexport function dev() {\n  if (logs.dev) {\n    return logs.dev;\n  }\n  if (!logConstructor) {\n    throw new Error('failed to call initLogConstructor');\n  }\n  return logs.dev = new logConstructor(self, mode => {\n    const logNum = parseInt(mode.log, 10);\n    if (logNum >= 3) {\n      return LogLevel.FINE;\n    }\n    if (logNum >= 2) {\n      return LogLevel.INFO;\n    }\n    return LogLevel.OFF;\n  });\n}\n\n/**\n * @param {!Window} win\n * @param {!Element=} opt_element\n * @returns {boolean} isEmbed\n */\nexport function isFromEmbed(win, opt_element) {\n  if (!opt_element) {\n    return false;\n  }\n  return opt_element.ownerDocument.defaultView != win;\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\n\n/**\n * Provides info about the current app. This return value may be cached and\n * passed around as it will always be DCE'd.\n * @param {?Window=} opt_win\n * @return {!./mode.ModeDef}\n */\nexport function getModeObject(opt_win) {\n  return {\n    localDev: getMode(opt_win).localDev,\n    development: getMode(opt_win).development,\n    filter: getMode(opt_win).filter,\n    minified: getMode(opt_win).minified,\n    lite: getMode(opt_win).lite,\n    test: getMode(opt_win).test,\n    log: getMode(opt_win).log,\n    version: getMode(opt_win).version,\n    rtvVersion: getMode(opt_win).rtvVersion,\n  };\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {parseQueryString_} from './url-parse-query-string';\n\n/**\n * @typedef {{\n *   localDev: boolean,\n *   development: boolean,\n *   filter: (string|undefined),\n *   minified: boolean,\n *   lite: boolean,\n *   test: boolean,\n *   log: (string|undefined),\n *   version: string,\n *   rtvVersion: string,\n * }}\n */\nexport let ModeDef;\n\n/** @type {string} */\nconst version = '$internalRuntimeVersion$';\n\n/**\n * `rtvVersion` is the prefixed version we serve off of the cdn.\n * The prefix denotes canary(00) or prod(01) or an experiment version ( > 01).\n * @type {string}\n */\nlet rtvVersion = '';\n\n/**\n * Provides info about the current app.\n * @param {?Window=} opt_win\n * @return {!ModeDef}\n */\nexport function getMode(opt_win) {\n  const win = opt_win || self;\n  if (win.AMP_MODE) {\n    return win.AMP_MODE;\n  }\n  return win.AMP_MODE = getMode_(win);\n}\n\n/**\n * Provides info about the current app.\n * @param {!Window} win\n * @return {!ModeDef}\n */\nfunction getMode_(win) {\n  // Magic constants that are replaced by closure compiler.\n  // IS_MINIFIED is always replaced with true when closure compiler is used\n  // while IS_DEV is only replaced when `gulp dist` is called without the\n  // --fortesting flag.\n  const IS_DEV = true;\n  const IS_MINIFIED = false;\n\n  const localDevEnabled = !!(self.AMP_CONFIG && self.AMP_CONFIG.localDev);\n  const runningTests = IS_DEV && !!(win.AMP_TEST || win.__karma__);\n  const isLocalDev = IS_DEV && (localDevEnabled || runningTests);\n  const hashQuery = parseQueryString_(\n      // location.originalHash is set by the viewer when it removes the fragment\n      // from the URL.\n      win.location.originalHash || win.location.hash);\n\n  const searchQuery = parseQueryString_(win.location.search);\n\n  if (!rtvVersion) {\n    rtvVersion = getRtvVersion(win, isLocalDev);\n  }\n\n  // The `minified`, `test` and `localDev` properties are replaced\n  // as boolean literals when we run `gulp dist` without the `--fortesting`\n  // flags. This improved DCE on the production file we deploy as the code\n  // paths for localhost/testing/development are eliminated.\n  return {\n    localDev: isLocalDev,\n    // Triggers validation\n    development: !!(hashQuery['development'] == '1' || win.AMP_DEV_MODE),\n    examiner: hashQuery['development'] == '2',\n    // Allows filtering validation errors by error category. For the\n    // available categories, see ErrorCategory in validator/validator.proto.\n    filter: hashQuery['filter'],\n    minified: IS_MINIFIED,\n    // Whether document is in an amp-lite viewer. It signal that the user\n    // would prefer to use less bandwidth.\n    lite: searchQuery['amp_lite'] != undefined,\n    test: runningTests,\n    log: hashQuery['log'],\n    version,\n    rtvVersion,\n  };\n}\n\n/**\n * Retrieve the `rtvVersion` which will have a numeric prefix\n * denoting canary/prod/experiment (unless `isLocalDev` is true).\n *\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n */\nfunction getRtvVersion(win, isLocalDev) {\n  // If it's local dev then we won't actually have a full version so\n  // just use the version.\n  if (isLocalDev) {\n    return version;\n  }\n\n  if (win.AMP_CONFIG && win.AMP_CONFIG.v) {\n    return win.AMP_CONFIG.v;\n  }\n\n  // Currently `$internalRuntimeVersion$` and thus `mode.version` contain only\n  // major version. The full version however must also carry the minor version.\n  // We will default to production default `01` minor version for now.\n  // TODO(erwinmombay): decide whether $internalRuntimeVersion$ should contain\n  // minor version.\n  return `01${version}`;\n}\n\n\n/**\n * @param {!Window} win\n * @param {boolean} isLocalDev\n * @return {string}\n * @visibleForTesting\n */\nexport function getRtvVersionForTesting(win, isLocalDev) {\n  return getRtvVersion(win, isLocalDev);\n}\n\n\n/** @visibleForTesting */\nexport function resetRtvVersionForTesting() {\n  rtvVersion = '';\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\n\n/** @const {function()} */\nconst NOOP_CALLBACK_ = function() {};\n\n/** @const {number} */\nconst MIN_VELOCITY_ = 0.02;\n\n/** @const {number} */\nconst FRAME_CONST_ = 16.67;\n\n/** @const {number} */\nconst EXP_FRAME_CONST_ = Math.round(-FRAME_CONST_ / Math.log(0.95));\n\n/**\n * Depreciation factor of 1/100 of a millisecond. This is how much previous\n * velocity is depreciated when calculating the new velocity.\n * @const {number}\n */\nconst VELOCITY_DEPR_FACTOR_ = FRAME_CONST_ * 2;\n\n\n/**\n * Calculates velocity for an object traveling the distance deltaV in the\n * time deltaTime given the previous velocity prevVelocity. The calculation\n * assumes a basic informational depreciation of previous velocity.\n * @param {number} deltaV\n * @param {time} deltaTime\n * @param {number} prevVelocity\n * @return {number}\n */\nexport function calcVelocity(deltaV, deltaTime, prevVelocity) {\n  if (deltaTime < 1) {\n    deltaTime = 1;\n  }\n\n  // Calculate speed and speed depreciation.\n  const speed = deltaV / deltaTime;\n\n  // Depreciation is simply an informational quality. It basically means:\n  // we can't ignore the velocity we knew recently, but we'd only consider\n  // it proportionally to how long ago we've seen it. Currently, this\n  // depreciation factor is 1/100 of a millisecond. New average velocity is\n  // calculated by weighing toward the new velocity and away from old\n  // velocity based on the depreciation.\n  const depr = 0.5 + Math.min(deltaTime / VELOCITY_DEPR_FACTOR_, 0.5);\n  return speed * depr + prevVelocity * (1 - depr);\n}\n\n\n/**\n * Returns a motion process that will yield when the velocity has run down to\n * zerp. For each iteration, the velocity is depreciated and the coordinates\n * are advanced from start X/Y to the destination according to velocity\n * vectors. For each such iteration the callback is called with the new x and y.\n * @param {!Node} contextNode\n * @param {number} startX Start X coordinate.\n * @param {number} startY Start Y coordinate.\n * @param {number} veloX Starting X velocity.\n * @param {number} veloY Starting Y velocity.\n * @param {function(number, number):boolean} callback The callback for each\n *   step of the deceleration motion.\n * @param {!./service/vsync-impl.Vsync=} opt_vsync Mostly for testing only.\n * @return {!Motion}\n */\nexport function continueMotion(contextNode, startX, startY, veloX, veloY,\n  callback, opt_vsync) {\n  return new Motion(contextNode, startX, startY, veloX, veloY,\n      callback, opt_vsync).start_();\n}\n\n\n/**\n * Motion process that allows tracking and monitoring of the running motion.\n * Most importantly it exposes methods \"then\" and \"thenAlways\" that have the\n * semantics of a Promise and signal when the motion has completed or failed.\n * Additionally, it exposes the method \"halt\" which allows to stop/reset the\n * motion.\n * @implements {IThenable}\n */\nexport class Motion {\n  /**\n   * @param {!Node} contextNode Context node.\n   * @param {number} startX Start X coordinate.\n   * @param {number} startY Start Y coordinate.\n   * @param {number} veloX Starting X velocity.\n   * @param {number} veloY Starting Y velocity.\n   * @param {function(number, number):boolean} callback The callback for each\n   *   step of the deceleration motion.\n   * @param {!./service/vsync-impl.Vsync=} opt_vsync\n   */\n  constructor(contextNode, startX, startY, veloX, veloY, callback, opt_vsync) {\n    /** @private @const {!./service/vsync-impl.Vsync} */\n    this.vsync_ = opt_vsync || Services.vsyncFor(self);\n\n    /** @private @const {!Node} */\n    this.contextNode_ = contextNode;\n\n    /** @private @const */\n    this.callback_ = callback;\n\n    /** @private {number} */\n    this.lastX_ = startX;\n\n    /** @private {number} */\n    this.lastY_ = startY;\n\n    /** @private {number} */\n    this.maxVelocityX_ = veloX;\n\n    /** @private {number} */\n    this.maxVelocityY_ = veloY;\n\n    /** @private {number} */\n    this.velocityX_ = 0;\n\n    /** @private {number} */\n    this.velocityY_ = 0;\n\n    /** @private {time} */\n    this.startTime_ = Date.now();\n\n    /** @private {time} */\n    this.lastTime_ = this.startTime_;\n\n    /** @private {!Function} */\n    this.resolve_;\n\n    /** @private {!Function} */\n    this.reject_;\n\n    /** @private {!Promise} */\n    this.promise_ = new Promise((resolve, reject) => {\n      this.resolve_ = resolve;\n      this.reject_ = reject;\n    });\n\n    /** @private {boolean} */\n    this.continuing_ = false;\n  }\n\n  /** @private */\n  start_() {\n    this.continuing_ = true;\n    if (Math.abs(this.maxVelocityX_) <= MIN_VELOCITY_ &&\n            Math.abs(this.maxVelocityY_) <= MIN_VELOCITY_) {\n      this.fireMove_();\n      this.completeContinue_(true);\n    } else {\n      this.runContinuing_();\n    }\n    return this;\n  }\n\n  /**\n   * Halts the motion. The motion promise will be rejected since the motion\n   * has been interrupted.\n   */\n  halt() {\n    if (this.continuing_) {\n      this.completeContinue_(false);\n    }\n  }\n\n  /**\n   * Chains to the motion's promise that will resolve when the motion has\n   * completed or will reject if motion has failed or was interrupted.\n   * @override\n   */\n  then(opt_resolve, opt_reject) {\n    if (!opt_resolve && !opt_reject) {\n      return this.promise_;\n    }\n    return this.promise_.then(opt_resolve, opt_reject);\n  }\n\n  /**\n   * Callback for regardless whether the motion succeeds or fails.\n   * @param {function()=} opt_callback\n   * @return {!Promise}\n   */\n  thenAlways(opt_callback) {\n    const callback = opt_callback || NOOP_CALLBACK_;\n    return /** @type {!Promise} */ (this.then(callback, callback));\n  }\n\n  /**\n   * @return {!Promise}\n   * @private\n   */\n  runContinuing_() {\n    this.velocityX_ = this.maxVelocityX_;\n    this.velocityY_ = this.maxVelocityY_;\n    const boundStep = this.stepContinue_.bind(this);\n    const boundComplete = this.completeContinue_.bind(this, true);\n    return this.vsync_.runAnimMutateSeries(this.contextNode_, boundStep, 5000)\n        .then(boundComplete, boundComplete);\n  }\n\n  /**\n   * Returns \"true\" to continue and \"false\" to stop motion process.\n   * @param {time} timeSinceStart\n   * @param {time} timeSincePrev\n   * @return {boolean}\n   * @private\n   */\n  stepContinue_(timeSinceStart, timeSincePrev) {\n    if (!this.continuing_) {\n      return false;\n    }\n\n    this.lastTime_ = Date.now();\n    this.lastX_ += timeSincePrev * this.velocityX_;\n    this.lastY_ += timeSincePrev * this.velocityY_;\n    if (!this.fireMove_()) {\n      return false;\n    }\n\n    const decel = Math.exp(-timeSinceStart / EXP_FRAME_CONST_);\n    this.velocityX_ = this.maxVelocityX_ * decel;\n    this.velocityY_ = this.maxVelocityY_ * decel;\n    return (Math.abs(this.velocityX_) > MIN_VELOCITY_ ||\n        Math.abs(this.velocityY_) > MIN_VELOCITY_);\n  }\n\n  /**\n   * @param {boolean} success\n   * @private\n   */\n  completeContinue_(success) {\n    if (!this.continuing_) {\n      return;\n    }\n    this.continuing_ = false;\n    this.lastTime_ = Date.now();\n    this.fireMove_();\n    if (success) {\n      this.resolve_();\n    } else {\n      this.reject_();\n    }\n  }\n\n  /** @private */\n  fireMove_() {\n    return this.callback_(this.lastX_, this.lastY_);\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n\n/**\n * This class helps to manage observers. Observers can be added, removed or\n * fired through and instance of this class.\n * @template TYPE\n */\nexport class Observable {\n\n  constructor() {\n    /** @type {?Array<function(TYPE)>} */\n    this.handlers_ = null;\n  }\n\n  /**\n   * Adds the observer to this instance.\n   * @param {function(TYPE)} handler Observer's handler.\n   * @return {!UnlistenDef}\n   */\n  add(handler) {\n    if (!this.handlers_) {\n      this.handlers_ = [];\n    }\n    this.handlers_.push(handler);\n    return () => {\n      this.remove(handler);\n    };\n  }\n\n  /**\n   * Removes the observer from this instance.\n   * @param {function(TYPE)} handler Observer's instance.\n   */\n  remove(handler) {\n    if (!this.handlers_) {\n      return;\n    }\n    const index = this.handlers_.indexOf(handler);\n    if (index > -1) {\n      this.handlers_.splice(index, 1);\n    }\n  }\n\n  /**\n   * Removes all observers.\n   */\n  removeAll() {\n    if (!this.handlers_) {\n      return;\n    }\n    this.handlers_.length = 0;\n  }\n\n  /**\n   * Fires an event. All observers are called.\n   * @param {TYPE=} opt_event\n   */\n  fire(opt_event) {\n    if (!this.handlers_) {\n      return;\n    }\n    const handlers = this.handlers_;\n    for (let i = 0; i < handlers.length; i++) {\n      const handler = handlers[i];\n      handler(opt_event);\n    }\n  }\n\n  /**\n   * Returns number of handlers. Mostly needed for tests.\n   * @return {number}\n   */\n  getHandlerCount() {\n    if (!this.handlers_) {\n      return 0;\n    }\n    return this.handlers_.length;\n  }\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {bytesToString, stringToBytes} from './utils/bytes';\nimport {getSourceOrigin, parseUrl} from './url';\nimport {parseJson} from './json';\n\n/**\n * Generates, signs and verifies origin experiments.\n */\nexport class OriginExperiments {\n  /**\n   * @param {!./service/crypto-impl.Crypto} crypto\n   */\n  constructor(crypto) {\n    /** @private {!./service/crypto-impl.Crypto} */\n    this.crypto_ = crypto;\n  }\n\n  /**\n   * Generates an RSA public/private key pair for signing and verifying.\n   * @return {!Promise}\n   */\n  generateKeys() {\n    const generationAlgo = Object.assign({\n      modulusLength: 2048,\n      publicExponent: Uint8Array.of(1, 0, 1),\n    }, this.crypto_.pkcsAlgo);\n    return this.crypto_.subtle.generateKey(\n        /** @type {{name: string}} */ (generationAlgo),\n        /* extractable */ true,\n        /* keyUsages */ ['sign', 'verify']);\n  }\n\n  /**\n   * Generates an origin experiment token given a config json.\n   * @param {number} version\n   * @param {!JsonObject} json\n   * @param {!webCrypto.CryptoKey} privateKey\n   * @return {!Promise<string>}\n   */\n  generateToken(version, json, privateKey) {\n    const config = stringToBytes(JSON.stringify(json));\n    const data = this.prepend_(version, config);\n    return this.sign_(data, privateKey).then(signature => {\n      return this.append_(data, new Uint8Array(signature));\n    });\n  }\n\n  /**\n   * Verifies an origin experiment token given a public key.\n   * @param {string} token\n   * @param {!Location} location\n   * @param {!webCrypto.CryptoKey} publicKey\n   * @return {!Promise<string>} If token is valid, resolves with the\n   *     experiment ID. Otherwise, rejects with validation error.\n   */\n  verifyToken(token, location, publicKey) {\n    return new Promise(resolve => {\n      let i = 0;\n      const bytes = stringToBytes(atob(token));\n\n      // Parse version.\n      const version = bytes[i];\n      if (version !== 0) {\n        throw new Error(`Unrecognized token version: ${version}`);\n      }\n      i += 1;\n\n      // Parse config length.\n      const length = new DataView(bytes.buffer).getUint32(i);\n      i += 4; // Number of bytes in Uint32 config length.\n      if (length > bytes.length - i) {\n        throw new Error(`Unexpected config length: ${length}`);\n      }\n\n      // Parse config itself.\n      const configBytes = bytes.subarray(i, i + length);\n      i += length;\n\n      // Parse unsigned data and its signature.\n      const data = bytes.subarray(0, i);\n      const signature = bytes.subarray(i);\n\n      resolve(this.verify_(signature, data, publicKey).then(verified => {\n        if (!verified) {\n          throw new Error('Failed to verify token signature.');\n        }\n        // Convert config from bytes to JS object.\n        const configStr = bytesToString(configBytes);\n        const config = parseJson(configStr);\n\n        // Check token experiment origin against `location`.\n        const approvedOrigin = parseUrl(config['origin']).origin;\n        const sourceOrigin = getSourceOrigin(location);\n        if (approvedOrigin !== sourceOrigin) {\n          throw new Error(`Config origin (${approvedOrigin}) does not match ` +\n              `window (${sourceOrigin}).`);\n        }\n\n        // Check token expiration date.\n        const experimentId = config['experiment'];\n        const expiration = config['expiration'];\n        if (expiration >= Date.now()) {\n          return experimentId;\n        } else {\n          throw new Error(`Experiment \"${experimentId}\" has expired.`);\n        }\n      }));\n    });\n  }\n\n  /**\n   * Returns a byte array: (version + config.length + config)\n   * @param {number} version\n   * @param {!Uint8Array} config\n   * @return {!Uint8Array}\n   */\n  prepend_(version, config) {\n    const data = new Uint8Array(config.length + 5);\n    data[0] = version;\n    // Insert config length into bytes 1 through 5.\n    new DataView(data.buffer).setUint32(1, config.length, false);\n    data.set(config, 5);\n    return data;\n  }\n\n  /**\n   * Returns base64(data + signature).\n   * @param {!Uint8Array} data\n   * @param {!Uint8Array} signature\n   * @return {string}\n   */\n  append_(data, signature) {\n    const string = bytesToString(data) + bytesToString(signature);\n    return btoa(string);\n  }\n\n  /**\n   * Wraps SubtleCrypto.sign().\n   * @param {!Uint8Array} data\n   * @param {!webCrypto.CryptoKey} privateKey\n   * @return {!Promise}\n   */\n  sign_(data, privateKey) {\n    return this.crypto_.subtle.sign(this.crypto_.pkcsAlgo, privateKey, data);\n  }\n\n  /**\n   * Wraps SubtleCrypto.verify().\n   * @param {!Uint8Array} signature\n   * @param {!Uint8Array} data\n   * @param {!webCrypto.CryptoKey} publicKey\n   * @return {!Promise<boolean>}\n   */\n  verify_(signature, data, publicKey) {\n    return this.crypto_.verifyPkcs(publicKey, signature, data);\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Services} from './services';\n\n\n/**\n * Pass class helps to manage single-pass process. A pass is scheduled using\n * delay method. Only one pass can be pending at a time. If no pass is pending\n * the process is considered to be \"idle\".\n */\nexport class Pass {\n\n  /**\n   * Creates a new Pass instance.\n   * @param {!Window} win\n   * @param {function()} handler Handler to be executed when pass is triggered.\n   * @param {number=} opt_defaultDelay Default delay to be used when schedule\n   *   is called without one.\n   */\n  constructor(win, handler, opt_defaultDelay) {\n    this.timer_ = Services.timerFor(win);\n\n    /** @private @const {function()} */\n    this.handler_ = handler;\n\n    /** @private @const {number} */\n    this.defaultDelay_ = opt_defaultDelay || 0;\n\n    /** @private {number|string} */\n    this.scheduled_ = -1;\n\n    /** @private {number} */\n    this.nextTime_ = 0;\n\n    /** @private {boolean} */\n    this.running_ = false;\n\n    /** @private @const {!Function} */\n    this.boundPass_ = () => this.pass_();\n  }\n\n  /**\n   * Whether or not a pass is currently pending.\n   * @return {boolean}\n   */\n  isPending() {\n    return this.scheduled_ != -1;\n  }\n\n  /**\n   * Tries to schedule a new pass optionally with specified delay. If the new\n   * requested pass is requested before the pending pass, the pending pass is\n   * canceled. If the new pass is requested after the pending pass, the newly\n   * requested pass is ignored.\n   *\n   * Returns {@code true} if the pass has been scheduled and {@code false} if\n   * ignored.\n   *\n   * @param {number=} opt_delay Delay to schedule the pass. If not specified\n   *   the default delay is used, falling back to 0.\n   * @return {boolean}\n   */\n  schedule(opt_delay) {\n    let delay = opt_delay || this.defaultDelay_;\n    if (this.running_ && delay < 10) {\n      // If we get called recursively, wait at least 10ms for the next\n      // execution.\n      delay = 10;\n    }\n\n    const nextTime = Date.now() + delay;\n    // Schedule anew if nothing is scheduled currently or if the new time is\n    // sooner then previously requested.\n    if (!this.isPending() || nextTime - this.nextTime_ < -10) {\n      this.cancel();\n      this.nextTime_ = nextTime;\n      this.scheduled_ = this.timer_.delay(this.boundPass_, delay);\n\n      return true;\n    }\n\n    return false;\n  }\n\n  pass_() {\n    this.scheduled_ = -1;\n    this.nextTime_ = 0;\n    this.running_ = true;\n    this.handler_();\n    this.running_ = false;\n  }\n\n  /**\n   * Cancels the pending pass if any.\n   */\n  cancel() {\n    if (this.isPending()) {\n      this.timer_.cancel(this.scheduled_);\n      this.scheduled_ = -1;\n    }\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {getMode} from './mode';\nimport {install as installArrayIncludes} from './polyfills/array-includes';\nimport {\n  install as installDOMTokenListToggle,\n} from './polyfills/domtokenlist-toggle';\nimport {install as installDocContains} from './polyfills/document-contains';\nimport {install as installMathSign} from './polyfills/math-sign';\nimport {install as installObjectAssign} from './polyfills/object-assign';\nimport {install as installPromise} from './polyfills/promise';\n// Importing the document-register-element module has the side effect\n// of installing the custom elements polyfill if necessary.\nimport installCustomElements from\n  'document-register-element/build/document-register-element.node';\n\n/**\n  Only install in closure binary and not in babel/browserify binary, since in\n  the closure binary we strip out the `document-register-element` install side\n  effect so we can tree shake the dependency correctly and we have to make\n  sure to not `install` it during dev since the `install` is done as a side\n  effect in importing the module.\n*/\nif (!getMode().localDev) {\n  installCustomElements(self, 'auto');\n}\ninstallDOMTokenListToggle(self);\ninstallMathSign(self);\ninstallObjectAssign(self);\ninstallPromise(self);\ninstallDocContains(self);\ninstallArrayIncludes(self);\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Returns true if the element is in the array and false otherwise.\n *\n * @param {*} value\n * @param {number=} opt_fromIndex\n * @return {boolean}\n * @this {Array}\n */\nfunction includes(value, opt_fromIndex) {\n  const fromIndex = opt_fromIndex || 0;\n  const len = this.length;\n  let i = fromIndex >= 0 ? fromIndex : Math.max(len + fromIndex, 0);\n  for (; i < len; i++) {\n    const other = this[i];\n    // If value has been found OR (value is NaN AND other is NaN)\n    /*eslint \"no-self-compare\": 0*/\n    if (other === value || (value !== value && other !== other)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n* Sets the Array.contains polyfill if it does not exist.\n* @param {!Window} win\n*/\nexport function install(win) {\n  if (!win.Array.prototype.includes) {\n    win.Object.defineProperty(Array.prototype, 'includes', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: includes,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Polyfill for `document.contains()` method. Notice that according to spec\n * `document.contains` is inclusionary.\n * See https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n * @param {?Node} node\n * @return {boolean}\n * @this {Node}\n */\nfunction documentContainsPolyfill(node) {\n  // Per spec, \"contains\" method is inclusionary\n  // i.e. `node.contains(node) == true`. However, we still need to test\n  // equality to the document itself.\n  return node == this || this.documentElement.contains(node);\n}\n\n\n/**\n * Polyfills `HTMLDocument.contains` API.\n * @param {!Window} win\n */\nexport function install(win) {\n  // HTMLDocument is undefined in Internet Explorer 10, but it has Document,\n  // so we use that as a fallback.\n  const documentClass = win.HTMLDocument || win.Document;\n  if (!documentClass.prototype.contains) {\n    win.Object.defineProperty(documentClass.prototype, 'contains', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: documentContainsPolyfill,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Polyfill for `DOMTokenList.prototype.toggle(token, opt_force)` method.\n * This is specially important because IE does not support `opt_force` attribute.\n * See https://goo.gl/hgKNYY for details.\n * @param {string} token\n * @param {boolean=} opt_force\n * @this {DOMTokenList}\n * @return {boolean}\n */\nfunction domTokenListTogglePolyfill(token, opt_force) {\n  const remove = opt_force === undefined ? this.contains(token) : !opt_force;\n  if (remove) {\n    this.remove(token);\n    return false;\n  } else {\n    this.add(token);\n    return true;\n  }\n}\n\n\n/**\n * Polyfills `DOMTokenList.prototype.toggle` API in IE.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (isIe(win) && win.DOMTokenList) {\n    win.Object.defineProperty(win.DOMTokenList.prototype, 'toggle', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: domTokenListTogglePolyfill,\n    });\n  }\n}\n\n\n/**\n * Whether the current browser is a IE browser.\n * @param {!Window} win\n * @return {boolean}\n */\nfunction isIe(win) {\n  return /Trident|MSIE|IEMobile/i.test(win.navigator.userAgent);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Parses the number x and returns its sign. For positive x returns 1, for\n * negative, -1. For 0 and -0, returns 0 and -0 respectively. For any number\n * that parses to NaN, returns NaN.\n *\n * @param {number} x\n * @returns {number}\n */\nexport function sign(x) {\n  x = Number(x);\n\n  // If x is 0, -0, or NaN, return it.\n  if (!x) {\n    return x;\n  }\n\n  return x > 0 ? 1 : -1;\n}\n\n\n/**\n * Sets the Math.sign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Math.sign) {\n    win.Object.defineProperty(win.Math, 'sign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: sign,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Copies values of all enumerable own properties from one or more source\n * objects (provided as extended arguments to the function) to a target object.\n *\n * @param {!Object} target\n * @param {...Object} var_args\n * @returns {!Object}\n */\nexport function assign(target, var_args) {\n  if (target == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1; i < arguments.length; i++) {\n    const source = arguments[i];\n    if (source != null) {\n      for (const key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n}\n\n\n/**\n * Sets the Object.assign polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Object.assign) {\n    win.Object.defineProperty(win.Object, 'assign', {\n      enumerable: false,\n      configurable: true,\n      writable: true,\n      value: assign,\n    });\n  }\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\nimport * as Promise from 'promise-pjs/promise';\n\n/**\n * Sets the Promise polyfill if it does not exist.\n * @param {!Window} win\n */\nexport function install(win) {\n  if (!win.Promise) {\n    win.Promise = /** @type {?} */ (Promise);\n    // In babel the * export is an Object with a default property.\n    // In closure compiler it is the Promise function itself.\n    if (Promise.default) {\n      win.Promise = Promise.default;\n    }\n    // We copy the individual static methods, because closure\n    // compiler flattens the polyfill namespace.\n    win.Promise.resolve = Promise.resolve;\n    win.Promise.reject = Promise.reject;\n    win.Promise.all = Promise.all;\n    win.Promise.race = Promise.race;\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Registration and getter functions for AMP services.\n *\n * Invariant: Service getters never return null for registered services.\n */\n\n// src/polyfills.js must be the first import.\nimport './polyfills'; // eslint-disable-line sort-imports-es6-autofix/sort-imports-es6\n\nimport {dev} from './log';\nimport {toWin} from './types';\n\n\n/**\n * Holds info about a service.\n * - obj: Actual service implementation when available.\n * - promise: Promise for the obj.\n * - resolve: Function to resolve the promise with the object.\n * - context: Argument for ctor, either a window or an ampdoc.\n * - ctor: Function that constructs and returns the service.\n * @typedef {{\n *   obj: (?Object),\n *   promise: (?Promise),\n *   resolve: (?function(!Object)),\n *   context: (?Window|?./service/ampdoc-impl.AmpDoc),\n *   ctor: (?function(new:Object, !Window)|\n *          ?function(new:Object, !./service/ampdoc-impl.AmpDoc)),\n * }}\n */\nlet ServiceHolderDef;\n\n\n/**\n * This interface provides a `dispose` method that will be called by\n * runtime when a service needs to be disposed of.\n * @interface\n */\nexport class Disposable {\n\n  /**\n   * Instructs the service to release any resources it might be holding. Can\n   * be called only once in the lifecycle of a service.\n   */\n  dispose() {}\n}\n\n\n/**\n * This interface provides a `adoptEmbedWindow` method that will be called by\n * runtime for a new embed window.\n * @interface\n */\nexport class EmbeddableService {\n\n  /**\n   * Instructs the service to adopt the embed window and add any necessary\n   * listeners and resources.\n   * @param {!Window} unusedEmbedWin\n   */\n  adoptEmbedWindow(unusedEmbedWin) {}\n}\n\n\n/**\n * Returns a service with the given id. Assumes that it has been registered\n * already.\n * @param {!Window} win\n * @param {string} id\n * @param {boolean=} opt_fallbackToTopWin\n * @return {Object} The service.\n */\nexport function getExistingServiceInEmbedScope(win, id, opt_fallbackToTopWin) {\n  // First, try to resolve via local (embed) window.\n  const local = getLocalExistingServiceForEmbedWinOrNull(win, id);\n  if (local) {\n    return local;\n  }\n  if (opt_fallbackToTopWin) {\n    return getService(win, id);\n  }\n  return null;\n}\n\n/**\n * Returns a service with the given id. Assumes that it has been constructed\n * already.\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id\n * @param {boolean=} opt_fallbackToTopWin\n * @return {Object} The service.\n */\nexport function getExistingServiceForDocInEmbedScope(\n  nodeOrDoc, id, opt_fallbackToTopWin) {\n  // First, try to resolve via local (embed) window.\n  if (nodeOrDoc.nodeType) {\n    // If a node is passed, try to resolve via this node.\n    const win = toWin(/** @type {!Document} */ (\n      nodeOrDoc.ownerDocument || nodeOrDoc).defaultView);\n    const local = getLocalExistingServiceForEmbedWinOrNull(win, id);\n    if (local) {\n      return local;\n    }\n  }\n  // If an ampdoc is passed or fallback is allowed, continue resolving.\n  if (!nodeOrDoc.nodeType || opt_fallbackToTopWin) {\n    return getServiceForDoc(nodeOrDoc, id);\n  }\n  return null;\n}\n\n/**\n * Installs a service override on amp-doc level.\n * @param {!Window} embedWin\n * @param {string} id\n * @param {!Object} service The service.\n */\nexport function installServiceInEmbedScope(embedWin, id, service) {\n  const topWin = getTopWindow(embedWin);\n  dev().assert(embedWin != topWin,\n      'Service override can only be installed in embed window: %s', id);\n  dev().assert(!getLocalExistingServiceForEmbedWinOrNull(embedWin, id),\n      'Service override has already been installed: %s', id);\n  registerServiceInternal(embedWin, embedWin, id, () => service);\n  getServiceInternal(embedWin, id); // Force service to build.\n}\n\n/**\n * @param {!Window} embedWin\n * @param {string} id\n * @return {?Object}\n */\nfunction getLocalExistingServiceForEmbedWinOrNull(embedWin, id) {\n  // Note that this method currently only resolves against the given window.\n  // It does not try to go all the way up the parent window chain. We can change\n  // this in the future, but for now this gives us a better performance.\n  const topWin = getTopWindow(embedWin);\n  if (embedWin != topWin && isServiceRegistered(embedWin, id)) {\n    return getServiceInternal(embedWin, id);\n  } else {\n    return null;\n  }\n}\n\n/**\n * Registers a service given a class to be used as implementation.\n * @param {!Window} win\n * @param {string} id of the service.\n * @param {function(new:Object, !Window)} constructor\n * @param {boolean=} opt_instantiate Whether to immediately create the service\n */\nexport function registerServiceBuilder(win,\n  id,\n  constructor,\n  opt_instantiate) {\n  win = getTopWindow(win);\n  registerServiceInternal(win, win, id, constructor);\n  if (opt_instantiate) {\n    getServiceInternal(win, id);\n  }\n}\n\n\n/**\n * Returns a service and registers it given a class to be used as\n * implementation.\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id of the service.\n * @param {function(new:Object, !./service/ampdoc-impl.AmpDoc)} constructor\n * @param {boolean=} opt_instantiate Whether to immediately create the service\n */\nexport function registerServiceBuilderForDoc(nodeOrDoc,\n  id,\n  constructor,\n  opt_instantiate) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  registerServiceInternal(holder, ampdoc, id, constructor);\n  if (opt_instantiate) {\n    getServiceInternal(holder, id);\n  }\n}\n\n\n/**\n * Returns a service for the given id and window (a per-window singleton).\n * Users should typically wrap this as a special purpose function (e.g.\n * `Services.vsyncFor(win)`) for type safety and because the factory should not be\n * passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @template T\n * @return {T}\n */\nexport function getService(win, id) {\n  win = getTopWindow(win);\n  return getServiceInternal(win, id);\n}\n\n\n/**\n * Returns a promise for a service for the given id and window. Also expects\n * an element that has the actual implementation. The promise resolves when\n * the implementation loaded.\n * Users should typically wrap this as a special purpose function (e.g.\n * `Services.vsyncFor(win)`) for type safety and because the factory should not be\n * passed around.\n * @param {!Window} win\n * @param {string} id of the service.\n * @return {!Promise<!Object>}\n */\nexport function getServicePromise(win, id) {\n  return getServicePromiseInternal(win, id);\n}\n\n\n/**\n * Returns a service or null with the given id.\n * @param {!Window} win\n * @param {string} id\n * @return {?Object} The service.\n */\nexport function getExistingServiceOrNull(win, id) {\n  win = getTopWindow(win);\n  if (isServiceRegistered(win, id)) {\n    return getServiceInternal(win, id);\n  } else {\n    return null;\n  }\n}\n\n\n/**\n * Like getServicePromise but returns null if the service was never registered.\n * @param {!Window} win\n * @param {string} id of the service.\n * @return {?Promise<!Object>}\n */\nexport function getServicePromiseOrNull(win, id) {\n  return getServicePromiseOrNullInternal(win, id);\n}\n\n\n/**\n * Returns a service for the given id and ampdoc (a per-ampdoc singleton).\n * Expects service `id` to be registered.\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id of the service.\n * @return {T}\n * @template T\n */\nexport function getServiceForDoc(nodeOrDoc, id) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  return getServiceInternal(holder, id);\n}\n\n\n/**\n * Returns a promise for a service for the given id and ampdoc. Also expects\n * a service that has the actual implementation. The promise resolves when\n * the implementation loaded.\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id of the service.\n * @return {!Promise<!Object>}\n */\nexport function getServicePromiseForDoc(nodeOrDoc, id) {\n  return getServicePromiseInternal(\n      getAmpdocServiceHolder(nodeOrDoc), id);\n}\n\n\n/**\n * Like getServicePromiseForDoc but returns null if the service was never\n * registered for this ampdoc.\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @param {string} id of the service.\n * @return {?Promise<!Object>}\n */\nexport function getServicePromiseOrNullForDoc(nodeOrDoc, id) {\n  return getServicePromiseOrNullInternal(\n      getAmpdocServiceHolder(nodeOrDoc), id);\n}\n\n/**\n * Set the parent and top windows on a child window (friendly iframe).\n * @param {!Window} win\n * @param {!Window} parentWin\n */\nexport function setParentWindow(win, parentWin) {\n  win.__AMP_PARENT = parentWin;\n  win.__AMP_TOP = getTopWindow(parentWin);\n}\n\n\n/**\n * Returns the parent window for a child window (friendly iframe).\n * @param {!Window} win\n * @return {!Window}\n */\nexport function getParentWindow(win) {\n  return win.__AMP_PARENT || win;\n}\n\n\n/**\n * Returns the top window where AMP Runtime is installed for a child window\n * (friendly iframe).\n * @param {!Window} win\n * @return {!Window}\n */\nexport function getTopWindow(win) {\n  return win.__AMP_TOP || win;\n}\n\n\n/**\n * Returns the parent \"friendly\" iframe if the node belongs to a child window.\n * @param {!Node} node\n * @param {!Window} topWin\n * @return {?HTMLIFrameElement}\n */\nexport function getParentWindowFrameElement(node, topWin) {\n  const childWin = (node.ownerDocument || node).defaultView;\n  if (childWin && childWin != topWin && getTopWindow(childWin) == topWin) {\n    try {\n      return /** @type {?HTMLIFrameElement} */ (childWin.frameElement);\n    } catch (e) {\n      // Ignore the error.\n    }\n  }\n  return null;\n}\n\n\n/**\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @return {!./service/ampdoc-impl.AmpDoc}\n */\nexport function getAmpdoc(nodeOrDoc) {\n  if (nodeOrDoc.nodeType) {\n    const win = toWin(/** @type {!Document} */ (\n      nodeOrDoc.ownerDocument || nodeOrDoc).defaultView);\n    return getAmpdocService(win).getAmpDoc(/** @type {!Node} */ (nodeOrDoc));\n  }\n  return /** @type {!./service/ampdoc-impl.AmpDoc} */ (nodeOrDoc);\n}\n\n\n/**\n * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n * @return {!./service/ampdoc-impl.AmpDoc|!Window}\n */\nfunction getAmpdocServiceHolder(nodeOrDoc) {\n  const ampdoc = getAmpdoc(nodeOrDoc);\n  return ampdoc.isSingleDoc() ? ampdoc.win : ampdoc;\n}\n\n\n/**\n * This is essentially a duplicate of `ampdoc.js`, but necessary to avoid\n * circular dependencies.\n * @param {!Window} win\n * @return {!./service/ampdoc-impl.AmpDocService}\n */\nfunction getAmpdocService(win) {\n  return /** @type {!./service/ampdoc-impl.AmpDocService} */ (\n    getService(win, 'ampdoc'));\n}\n\n\n/**\n * Get service `id` from `holder`. Assumes the service\n * has already been registered.\n * @param {!Object} holder Object holding the service instance.\n * @param {string} id of the service.\n * @return {Object}\n * @template T\n */\nfunction getServiceInternal(holder, id) {\n  dev().assert(isServiceRegistered(holder, id),\n      `Expected service ${id} to be registered`);\n  const services = getServices(holder);\n  const s = services[id];\n  if (!s.obj) {\n    dev().assert(s.ctor, `Service ${id} registered without ctor nor impl.`);\n    dev().assert(s.context, `Service ${id} registered without context.`);\n    s.obj = new s.ctor(s.context);\n    dev().assert(s.obj, `Service ${id} constructed to null.`);\n    s.ctor = null;\n    s.context = null;\n    // The service may have been requested already, in which case we have a\n    // pending promise we need to fulfill.\n    if (s.resolve) {\n      s.resolve(s.obj);\n    }\n  }\n  return s.obj;\n}\n\n/**\n * @param {!Object} holder Object holding the service instance.\n * @param {!Window|!./service/ampdoc-impl.AmpDoc} context Win or AmpDoc.\n * @param {string} id of the service.\n * @param {?function(new:Object, !Window)|\n *         ?function(new:Object, !./service/ampdoc-impl.AmpDoc)}\n *     ctor Constructor function to new the service. Called with context.\n */\nfunction registerServiceInternal(holder, context, id, ctor) {\n  const services = getServices(holder);\n  let s = services[id];\n\n  if (!s) {\n    s = services[id] = {\n      obj: null,\n      promise: null,\n      resolve: null,\n      context: null,\n      ctor: null,\n    };\n  }\n\n  if (s.ctor || s.obj) {\n    // Service already registered.\n    return;\n  }\n\n  s.ctor = ctor;\n  s.context = context;\n\n  // The service may have been requested already, in which case there is a\n  // pending promise that needs to fulfilled.\n  if (s.resolve) {\n    // getServiceInternal will resolve the promise.\n    getServiceInternal(holder, id);\n  }\n}\n\n/**\n * @param {!Object} holder\n * @param {string} id of the service.\n * @return {!Promise<!Object>}\n */\nfunction getServicePromiseInternal(holder, id) {\n  const cached = getServicePromiseOrNullInternal(holder, id);\n  if (cached) {\n    return cached;\n  }\n  // Service is not registered.\n\n  // TODO(@cramforce): Add a check that if the element is eventually registered\n  // that the service is actually provided and this promise resolves.\n  let resolve;\n  const promise = new Promise(r => {\n    resolve = r;\n  });\n  const services = getServices(holder);\n  services[id] = {\n    obj: null,\n    promise,\n    resolve,\n    context: null,\n    ctor: null,\n  };\n  return promise;\n}\n\n\n/**\n * Returns a promise for service `id` if the service has been registered\n * on `holder`.\n * @param {!Object} holder\n * @param {string} id of the service.\n * @return {?Promise<!Object>}\n */\nfunction getServicePromiseOrNullInternal(holder, id) {\n  const services = getServices(holder);\n  const s = services[id];\n  if (s) {\n    if (s.promise) {\n      return s.promise;\n    } else {\n      // Instantiate service if not already instantiated.\n      getServiceInternal(holder, id);\n      return s.promise = Promise.resolve(/** @type {!Object} */ (s.obj));\n    }\n  }\n  return null;\n}\n\n\n/**\n * Returns the object that holds the services registered in a holder.\n * @param {!Object} holder\n * @return {!Object<string,!ServiceHolderDef>}\n */\nfunction getServices(holder) {\n  let services = holder.services;\n  if (!services) {\n    services = holder.services = {};\n  }\n  return services;\n}\n\n\n/**\n * Whether the specified service implements `Disposable` interface.\n * @param {!Object} service\n * @return {boolean}\n */\nexport function isDisposable(service) {\n  return typeof service.dispose == 'function';\n}\n\n\n/**\n * Asserts that the specified service implements `Disposable` interface and\n * typecasts the instance to `Disposable`.\n * @param {!Object} service\n * @return {!Disposable}\n */\nexport function assertDisposable(service) {\n  dev().assert(isDisposable(service), 'required to implement Disposable');\n  return /** @type {!Disposable} */ (service);\n}\n\n\n/**\n * Disposes all disposable (implements `Disposable` interface) services in\n * ampdoc scope.\n * @param {!./service/ampdoc-impl.AmpDoc} ampdoc\n */\nexport function disposeServicesForDoc(ampdoc) {\n  disposeServicesInternal(ampdoc);\n}\n\n\n/**\n * Disposes all disposable (implements `Disposable` interface) services in\n * embed scope.\n * @param {!Window} embedWin\n */\nexport function disposeServicesForEmbed(embedWin) {\n  disposeServicesInternal(embedWin);\n}\n\n\n/**\n * @param {!Object} holder Object holding the service instances.\n */\nfunction disposeServicesInternal(holder) {\n  // TODO(dvoytenko): Consider marking holder as destroyed for later-arriving\n  // service to be canceled automatically.\n  const services = getServices(holder);\n  for (const id in services) {\n    if (!Object.prototype.hasOwnProperty.call(services, id)) {\n      continue;\n    }\n    const serviceHolder = services[id];\n    if (serviceHolder.obj) {\n      disposeServiceInternal(id, serviceHolder.obj);\n    } else if (serviceHolder.promise) {\n      serviceHolder.promise.then(\n          instance => disposeServiceInternal(id, instance));\n    }\n  }\n}\n\n\n/**\n * @param {string} id\n * @param {!Object} service\n */\nfunction disposeServiceInternal(id, service) {\n  if (!isDisposable(service)) {\n    return;\n  }\n  try {\n    assertDisposable(service).dispose();\n  } catch (e) {\n    // Ensure that a failure to dispose a service does not disrupt other\n    // services.\n    dev().error('SERVICE', 'failed to dispose service', id, e);\n  }\n}\n\n\n/**\n * Whether the specified service implements `EmbeddableService` interface.\n * @param {!Object} service\n * @return {boolean}\n */\nexport function isEmbeddable(service) {\n  return typeof service.adoptEmbedWindow == 'function';\n}\n\n\n/**\n * Adopts an embeddable (implements `EmbeddableService` interface) service\n * in embed scope.\n * @param {!Window} embedWin\n * @param {string} serviceId\n */\nexport function adoptServiceForEmbed(embedWin, serviceId) {\n  const adopted = adoptServiceForEmbedIfEmbeddable(embedWin, serviceId);\n  dev().assert(adopted, `Service ${serviceId} not found on parent ` +\n      'or doesn\\'t implement EmbeddableService.');\n}\n\n\n/**\n * Adopts an embeddable (implements `EmbeddableService` interface) service\n * in embed scope.\n * @param {!Window} embedWin\n * @param {string} serviceId\n * @return {boolean}\n */\nexport function adoptServiceForEmbedIfEmbeddable(embedWin, serviceId) {\n  const frameElement = /** @type {!Node} */ (dev().assert(\n      embedWin.frameElement,\n      'frameElement not found for embed'));\n  const ampdoc = getAmpdoc(frameElement);\n  const holder = getAmpdocServiceHolder(ampdoc);\n  if (!isServiceRegistered(holder, serviceId)) {\n    return false;\n  }\n  const service = getServiceForDoc(frameElement, serviceId);\n  if (!isEmbeddable(service)) {\n    return false;\n  }\n  service.adoptEmbedWindow(embedWin);\n  return true;\n}\n\n\n/**\n * Resets a single service, so it gets recreated on next getService invocation.\n * @param {!Object} holder\n * @param {string} id of the service.\n */\nexport function resetServiceForTesting(holder, id) {\n  if (holder.services) {\n    holder.services[id] = null;\n  }\n}\n\n/**\n * @param {!Object} holder Object holding the service instance.\n * @param {string} id of the service.\n * @return {boolean}\n */\nfunction isServiceRegistered(holder, id) {\n  const service = holder.services && holder.services[id];\n  // All registered services must have an implementation or a constructor.\n  return !!(service && (service.ctor || service.obj));\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  getAmpdoc,\n  getExistingServiceForDocInEmbedScope,\n  getExistingServiceOrNull,\n  getService,\n  getServiceForDoc,\n  getServicePromiseForDoc,\n} from './service';\nimport {\n  getElementServiceForDoc,\n  getElementServiceIfAvailable,\n  getElementServiceIfAvailableForDoc,\n  getElementServiceIfAvailableForDocInEmbedScope,\n} from './element-service';\n\n/** @typedef {!../extensions/amp-subscriptions/0.1/amp-subscriptions.SubscriptionService} */\nexport let SubscriptionService;\n\nexport class Services {\n  /**\n   * Returns a promise for the Access service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!Promise<!../extensions/amp-access/0.1/amp-access.AccessService>}\n   */\n  static accessServiceForDoc(nodeOrDoc) {\n    return (/** @type {!Promise<\n        !../extensions/amp-access/0.1/amp-access.AccessService>} */ (\n        getElementServiceForDoc(nodeOrDoc, 'access', 'amp-access')));\n  }\n\n  /**\n   * Returns a promise for the Subscriptions service.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!Promise<!SubscriptionService>}\n   */\n  static subscriptionsServiceForDoc(nodeOrDoc) {\n    return (/** @type {!Promise<SubscriptionService>} */ (\n      getElementServiceForDoc(nodeOrDoc, 'subscriptions',\n          'amp-subscriptions')));\n  }\n\n  /**\n   * Returns a promise for the Access service or a promise for null if the service\n   * is not available on the current page.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!Promise<?../extensions/amp-access/0.1/amp-access.AccessService>}\n   */\n  static accessServiceForDocOrNull(nodeOrDoc) {\n    return (/** @type {\n        !Promise<?../extensions/amp-access/0.1/amp-access.AccessService>} */ (\n        getElementServiceIfAvailableForDoc(nodeOrDoc, 'access', 'amp-access')));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/action-impl.ActionService}\n   */\n  static actionServiceForDoc(nodeOrDoc) {\n    return /** @type {!./service/action-impl.ActionService} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'action', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!Promise<!Activity>}\n   */\n  static activityForDoc(nodeOrDoc) {\n    return /** @type {!Promise<!Activity>} */ (\n      getElementServiceForDoc(nodeOrDoc, 'activity', 'amp-analytics'));\n  }\n\n  /**\n   * Returns the global instance of the `AmpDocService` service that can be\n   * used to resolve an ampdoc for any node: either in the single-doc or\n   * shadow-doc environment.\n   * @param {!Window} window\n   * @return {!./service/ampdoc-impl.AmpDocService}\n   */\n  static ampdocServiceFor(window) {\n    return /** @type {!./service/ampdoc-impl.AmpDocService} */ (\n      getService(window, 'ampdoc'));\n  }\n\n  /**\n   * Returns the AmpDoc for the specified context node.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/ampdoc-impl.AmpDoc}\n   */\n  static ampdoc(nodeOrDoc) {\n    return getAmpdoc(nodeOrDoc);\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @param {boolean=} loadAnalytics\n   * @return {!Promise<!../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>}\n   */\n  static analyticsForDoc(nodeOrDoc, loadAnalytics = false) {\n    if (loadAnalytics) {\n      // Get Extensions service and force load analytics extension.\n      const ampdoc = getAmpdoc(nodeOrDoc);\n      Services.extensionsFor(ampdoc.win)./*OK*/installExtensionForDoc(\n          ampdoc, 'amp-analytics');\n    }\n    return (/** @type {!Promise<\n              !../extensions/amp-analytics/0.1/instrumentation.InstrumentationService\n            >} */ (getElementServiceForDoc(\n          nodeOrDoc, 'amp-analytics-instrumentation', 'amp-analytics')));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!Promise<?../extensions/amp-analytics/0.1/instrumentation.InstrumentationService>}\n   */\n  static analyticsForDocOrNull(nodeOrDoc) {\n    return (/** @type {!Promise<\n              ?../extensions/amp-analytics/0.1/instrumentation.InstrumentationService\n            >} */ (getElementServiceIfAvailableForDoc(\n          nodeOrDoc, 'amp-analytics-instrumentation', 'amp-analytics')));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/batched-xhr-impl.BatchedXhr}\n   */\n  static batchedXhrFor(window) {\n    return /** @type {!./service/batched-xhr-impl.BatchedXhr} */ (\n      getService(window, 'batched-xhr'));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!Promise<?../extensions/amp-bind/0.1/bind-impl.Bind>}\n   */\n  static bindForDocOrNull(nodeOrDoc) {\n    return /** @type {!Promise<?../extensions/amp-bind/0.1/bind-impl.Bind>} */ (\n      getElementServiceIfAvailableForDocInEmbedScope(\n          nodeOrDoc, 'bind', 'amp-bind'));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!Promise<!./service/cid-impl.Cid>}\n   */\n  static cidForDoc(nodeOrDoc) {\n    return /** @type {!Promise<!./service/cid-impl.Cid>} */ (\n      getServicePromiseForDoc(nodeOrDoc, 'cid'));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/navigation.Navigation}\n   */\n  static navigationForDoc(nodeOrDoc) {\n    return /** @type {!./service/navigation.Navigation} */ (\n      getServiceForDoc(nodeOrDoc, 'navigation'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/crypto-impl.Crypto}\n   */\n  static cryptoFor(window) {\n    return (/** @type {!./service/crypto-impl.Crypto} */ (\n      getService(window, 'crypto')));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/document-info-impl.DocumentInfoDef} Info about the doc\n   */\n  static documentInfoForDoc(nodeOrDoc) {\n    return /** @type {!./service/document-info-impl.DocInfo} */ (\n      getServiceForDoc(nodeOrDoc, 'documentInfo')).get();\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/document-state.DocumentState}\n   */\n  static documentStateFor(window) {\n    return getService(window, 'documentState');\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/extensions-impl.Extensions}\n   */\n  static extensionsFor(window) {\n    return /** @type {!./service/extensions-impl.Extensions} */ (\n      getService(window, 'extensions'));\n  }\n\n  /**\n   * Returns service implemented in service/history-impl.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/history-impl.History}\n   */\n  static historyForDoc(nodeOrDoc) {\n    return /** @type {!./service/history-impl.History} */ (\n      getServiceForDoc(nodeOrDoc, 'history'));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {!./input.Input}\n   */\n  static inputFor(win) {\n    return getService(win, 'input');\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/layers-impl.LayoutLayers}\n   */\n  static layersForDoc(nodeOrDoc) {\n    return /** @type {!./service/layers-impl.LayoutLayers} */ (\n      getServiceForDoc(nodeOrDoc, 'layers'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/performance-impl.Performance}\n   */\n  static performanceFor(window) {\n    return /** @type {!./service/performance-impl.Performance}*/ (\n      getService(window, 'performance'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/performance-impl.Performance}\n   */\n  static performanceForOrNull(window) {\n    return /** @type {!./service/performance-impl.Performance}*/ (\n      getExistingServiceOrNull(window, 'performance'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/platform-impl.Platform}\n   */\n  static platformFor(window) {\n    return /** @type {!./service/platform-impl.Platform} */ (\n      getService(window, 'platform'));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/resources-impl.Resources}\n   */\n  static resourcesForDoc(nodeOrDoc) {\n    return /** @type {!./service/resources-impl.Resources} */ (\n      getServiceForDoc(nodeOrDoc, 'resources'));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?{incomingFragment: string, outgoingFragment: string}>}\n   */\n  static shareTrackingForOrNull(win) {\n    return (/** @type {\n      !Promise<?{incomingFragment: string, outgoingFragment: string}>} */ (\n        getElementServiceIfAvailable(win, 'share-tracking',\n            'amp-share-tracking', true)));\n  }\n\n  /**\n   * @param {!Window} win\n   * @return {?Promise<?../extensions/amp-story/0.1/variable-service.AmpStoryVariableService>}\n   */\n  static storyVariableServiceForOrNull(win) {\n    return (\n    /** @type {!Promise<\n         * ?../extensions/amp-story/0.1/variable-service.AmpStoryVariableService\n         * >} */ (\n        getElementServiceIfAvailable(win, 'story-variable', 'amp-story',\n            true)));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!Promise<!../extensions/amp-animation/0.1/web-animation-service.WebAnimationService>}\n   */\n  static webAnimationServiceFor(nodeOrDoc) {\n    return (/** @type {\n        !Promise<!../extensions/amp-animation/0.1/web-animation-service.WebAnimationService>} */\n      (getElementServiceForDoc(nodeOrDoc, 'web-animation', 'amp-animation')));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!Promise<!./service/storage-impl.Storage>}\n   */\n  static storageForDoc(nodeOrDoc) {\n    return /** @type {!Promise<!./service/storage-impl.Storage>} */ (\n      getServicePromiseForDoc(nodeOrDoc, 'storage'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/template-impl.Templates}\n   */\n  static templatesFor(window) {\n    return /** @type {!./service/template-impl.Templates} */ (\n      getService(window, 'templates'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/timer-impl.Timer}\n   */\n  static timerFor(window) {\n    return /** @type {!./service/timer-impl.Timer} */ (\n      getService(window, 'timer'));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/url-replacements-impl.UrlReplacements}\n   */\n  static urlReplacementsForDoc(nodeOrDoc) {\n    return /** @type {!./service/url-replacements-impl.UrlReplacements} */ (\n      getExistingServiceForDocInEmbedScope(\n          nodeOrDoc, 'url-replace', /* opt_fallbackToTopWin */ true));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!Promise<!../extensions/amp-user-notification/0.1/amp-user-notification.UserNotificationManager>}\n   */\n  static userNotificationManagerForDoc(nodeOrDoc) {\n    return (/** @type {!Promise<!../extensions/amp-user-notification/0.1/amp-user-notification.UserNotificationManager>} */\n      (getElementServiceForDoc(nodeOrDoc, 'userNotificationManager',\n          'amp-user-notification')));\n  }\n\n  /**\n   * Returns a promise for the experiment variants or a promise for null if it is\n   * not available on the current page.\n   * @param {!Window} win\n   * @return {!Promise<?Object<string>>}\n   */\n  static variantForOrNull(win) {\n    return /** @type {!Promise<?Object<string>>} */ (\n      getElementServiceIfAvailable(win, 'variant', 'amp-experiment', true));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/video-manager-impl.VideoManager}\n   */\n  static videoManagerForDoc(nodeOrDoc) {\n    return /** @type {!./service/video-manager-impl.VideoManager} */ (\n      getServiceForDoc(nodeOrDoc, 'video-manager'));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/viewer-impl.Viewer}\n   */\n  static viewerForDoc(nodeOrDoc) {\n    return /** @type {!./service/viewer-impl.Viewer} */ (\n      getServiceForDoc(nodeOrDoc, 'viewer'));\n  }\n\n  /**\n   * Returns promise for the viewer. This is an unusual case and necessary only\n   * for services that need reference to the viewer before it has been\n   * initialized. Most of the code, however, just should use `viewerForDoc`.\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!Promise<!./service/viewer-impl.Viewer>}\n   */\n  static viewerPromiseForDoc(nodeOrDoc) {\n    return /** @type {!Promise<!./service/viewer-impl.Viewer>} */ (\n      getServicePromiseForDoc(nodeOrDoc, 'viewer'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/vsync-impl.Vsync}\n   */\n  static vsyncFor(window) {\n    return /** @type {!./service/vsync-impl.Vsync} */ (\n      getService(window, 'vsync'));\n  }\n\n  /**\n   * @param {!Node|!./service/ampdoc-impl.AmpDoc} nodeOrDoc\n   * @return {!./service/viewport/viewport-impl.Viewport}\n   */\n  static viewportForDoc(nodeOrDoc) {\n    return /** @type {!./service/viewport/viewport-impl.Viewport} */ (\n      getServiceForDoc(nodeOrDoc, 'viewport'));\n  }\n\n  /**\n   * @param {!Window} window\n   * @return {!./service/xhr-impl.Xhr}\n   */\n  static xhrFor(window) {\n    return /** @type {!./service/xhr-impl.Xhr} */ (getService(window, 'xhr'));\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @param {string} _match\n * @param {string} character\n * @return {string}\n */\nfunction toUpperCase(_match, character) {\n  return character.toUpperCase();\n}\n\n/**\n * @param {string} match\n * @return {string}\n */\nfunction prependDashAndToLowerCase(match) {\n  return '-' + match.toLowerCase();\n}\n\n/**\n * @param {string} name Attribute name containing dashes.\n * @return {string} Dashes removed and successive character sent to upper case.\n * visibleForTesting\n */\nexport function dashToCamelCase(name) {\n  return name.replace(/-([a-z])/g, toUpperCase);\n}\n\n/**\n * Converts a string that is in camelCase to one that is in dash-case.\n *\n * @param {string} string The string to convert.\n * @return {string} The string in dash-case.\n */\nexport function camelCaseToDash(string) {\n  return string.replace(/(?!^)[A-Z]/g, prependDashAndToLowerCase);\n}\n\n/**\n * @param {string} name Attribute name with dashes\n * @return {string} Dashes replaced by underlines.\n */\nexport function dashToUnderline(name) {\n  return name.replace('-', '_');\n}\n\n/**\n * Polyfill for String.prototype.endsWith.\n * @param {string} string\n * @param {string} suffix\n * @return {boolean}\n */\nexport function endsWith(string, suffix) {\n  const index = string.length - suffix.length;\n  return index >= 0 && string.indexOf(suffix, index) == index;\n}\n\n/**\n * Polyfill for String.prototype.startsWith.\n * @param {string} string\n * @param {string} prefix\n * @return {boolean}\n */\nexport function startsWith(string, prefix) {\n  if (prefix.length > string.length) {\n    return false;\n  }\n  return string.lastIndexOf(prefix, 0) == 0;\n}\n\n/**\n * Expands placeholders in a given template string with values.\n *\n * Placeholders use ${key-name} syntax and are replaced with the value\n * returned from the given getter function.\n *\n * @param {string} template The template string to expand.\n * @param {function(string):*} getter Function used to retrieve a value for a\n *   placeholder. Returns values will be coerced into strings.\n * @param {number=} opt_maxIterations Number of times to expand the template.\n *   Defaults to 1, but should be set to a larger value your placeholder tokens\n *   can be expanded to other placeholder tokens. Take caution with large values\n *   as recursively expanding a string can be exponentially expensive.\n */\nexport function expandTemplate(template, getter, opt_maxIterations) {\n  const maxIterations = opt_maxIterations || 1;\n  for (let i = 0; i < maxIterations; i++) {\n    let matches = 0;\n    template = template.replace(/\\${([^}]*)}/g, (_a, b) => {\n      matches++;\n      return getter(b);\n    });\n    if (!matches) {\n      break;\n    }\n  }\n  return template;\n}\n\n/**\n * Hash function djb2a\n * This is intended to be a simple, fast hashing function using minimal code.\n * It does *not* have good cryptographic properties.\n * @param {string} str\n * @return {string} 32-bit unsigned hash of the string\n */\nexport function stringHash32(str) {\n  const length = str.length;\n  let hash = 5381;\n  for (let i = 0; i < length; i++) {\n    hash = hash * 33 ^ str.charCodeAt(i);\n  }\n  // Convert from 32-bit signed to unsigned.\n  return String(hash >>> 0);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Note: loaded by 3p system. Cannot rely on babel polyfills.\nimport {map} from './utils/object.js';\nimport {startsWith} from './string';\n\n\n/** @type {Object<string, string>} */\nlet propertyNameCache;\n\n/** @const {!Array<string>} */\nconst vendorPrefixes = ['Webkit', 'webkit', 'Moz', 'moz', 'ms', 'O', 'o'];\n\n\n/**\n * @export\n * @param {string} camelCase camel cased string\n * @return {string} title cased string\n */\nexport function camelCaseToTitleCase(camelCase) {\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n}\n\n/**\n * Checks the style if a prefixed version of a property exists and returns\n * it or returns an empty string.\n * @private\n * @param {!Object} style\n * @param {string} titleCase the title case version of a css property name\n * @return {string} the prefixed property name or null.\n */\nfunction getVendorJsPropertyName_(style, titleCase) {\n  for (let i = 0; i < vendorPrefixes.length; i++) {\n    const propertyName = vendorPrefixes[i] + titleCase;\n    if (style[propertyName] !== undefined) {\n      return propertyName;\n    }\n  }\n  return '';\n}\n\n/**\n * Returns the possibly prefixed JavaScript property name of a style property\n * (ex. WebkitTransitionDuration) given a camelCase'd version of the property\n * (ex. transitionDuration).\n * @export\n * @param {!Object} style\n * @param {string} camelCase the camel cased version of a css property name\n * @param {boolean=} opt_bypassCache bypass the memoized cache of property\n *   mapping\n * @return {string}\n */\nexport function getVendorJsPropertyName(style, camelCase, opt_bypassCache) {\n  if (startsWith(camelCase, '--')) {\n    // CSS vars are returned as is.\n    return camelCase;\n  }\n  if (!propertyNameCache) {\n    propertyNameCache = map();\n  }\n  let propertyName = propertyNameCache[camelCase];\n  if (!propertyName || opt_bypassCache) {\n    propertyName = camelCase;\n    if (style[camelCase] === undefined) {\n      const titleCase = camelCaseToTitleCase(camelCase);\n      const prefixedPropertyName = getVendorJsPropertyName_(style, titleCase);\n\n      if (style[prefixedPropertyName] !== undefined) {\n        propertyName = prefixedPropertyName;\n      }\n    }\n    if (!opt_bypassCache) {\n      propertyNameCache[camelCase] = propertyName;\n    }\n  }\n  return propertyName;\n}\n\n\n/**\n * Sets the CSS styles of the specified element with !important. The styles\n * are specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, *>} styles\n */\nexport function setImportantStyles(element, styles) {\n  for (const k in styles) {\n    element.style.setProperty(\n        getVendorJsPropertyName(styles, k), styles[k].toString(), 'important');\n  }\n}\n\n\n/**\n * Sets the CSS style of the specified element with optional units, e.g. \"px\".\n * @param {Element} element\n * @param {string} property\n * @param {*} value\n * @param {string=} opt_units\n * @param {boolean=} opt_bypassCache\n */\nexport function setStyle(element, property, value, opt_units, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (propertyName) {\n    element.style[propertyName] =\n      /** @type {string} */ (opt_units ? value + opt_units : value);\n  }\n}\n\n\n/**\n * Returns the value of the CSS style of the specified element.\n * @param {!Element} element\n * @param {string} property\n * @param {boolean=} opt_bypassCache\n * @return {*}\n */\nexport function getStyle(element, property, opt_bypassCache) {\n  const propertyName = getVendorJsPropertyName(element.style, property,\n      opt_bypassCache);\n  if (!propertyName) {\n    return undefined;\n  }\n  return element.style[propertyName];\n}\n\n\n/**\n * Sets the CSS styles of the specified element. The styles\n * a specified as a map from CSS property names to their values.\n * @param {!Element} element\n * @param {!Object<string, *>} styles\n */\nexport function setStyles(element, styles) {\n  for (const k in styles) {\n    setStyle(element, k, styles[k]);\n  }\n}\n\n\n/**\n * Shows or hides the specified element.\n * @param {!Element} element\n * @param {boolean=} opt_display\n */\nexport function toggle(element, opt_display) {\n  if (opt_display === undefined) {\n    opt_display = getStyle(element, 'display') == 'none';\n  }\n  setStyle(element, 'display', opt_display ? '' : 'none');\n}\n\n\n/**\n * Returns a pixel value.\n * @param {number} value\n * @return {string}\n */\nexport function px(value) {\n  return value + 'px';\n}\n\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function translateX(value) {\n  if (typeof value == 'string') {\n    return `translateX(${value})`;\n  }\n  return `translateX(${px(value)})`;\n}\n\n\n/**\n * Returns a \"translateX\" for CSS \"transform\" property.\n * @param {number|string} x\n * @param {(number|string)=} opt_y\n * @return {string}\n */\nexport function translate(x, opt_y) {\n  if (typeof x == 'number') {\n    x = px(x);\n  }\n  if (opt_y === undefined) {\n    return `translate(${x})`;\n  }\n  if (typeof opt_y == 'number') {\n    opt_y = px(opt_y);\n  }\n  return `translate(${x}, ${opt_y})`;\n}\n\n\n/**\n * Returns a \"scale\" for CSS \"transform\" property.\n * @param {number|string} value\n * @return {string}\n */\nexport function scale(value) {\n  return `scale(${value})`;\n}\n\n/**\n * Remove alpha value from a rgba color value.\n * Return the new color property with alpha equals if has the alpha value.\n * Caller needs to make sure the input color value is a valid rgba/rgb value\n * @param {string} rgbaColor\n * @return {string}\n */\nexport function removeAlphaFromColor(rgbaColor) {\n  return rgbaColor.replace(\n      /\\(([^,]+),([^,]+),([^,)]+),[^)]+\\)/g, '($1,$2,$3, 1)');\n}\n\n/**\n * Gets the computed style of the element. The helper is necessary to enforce\n * the possible `null` value returned by a buggy Firefox.\n *\n * @param {!Window} win\n * @param {!Element} el\n * @return {!Object<string, string>}\n */\nexport function computedStyle(win, el) {\n  const style = /** @type {?CSSStyleDeclaration} */(win.getComputedStyle(el));\n  return /** @type {!Object<string, string>} */(style) || map();\n}\n\n\n/**\n * Resets styles that were set dynamically (i.e. inline)\n * @param {!Element} element\n * @param {!Array<string>} properties\n */\nexport function resetStyles(element, properties) {\n  const styleObj = {};\n  properties.forEach(prop => {\n    styleObj[prop] = null;\n  });\n  setStyles(element, styleObj);\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* @const */\nconst toString_ = Object.prototype.toString;\n\n/**\n * Returns the ECMA [[Class]] of a value\n * @param {*} value\n * @return {string}\n */\nfunction toString(value) {\n  return toString_.call(value);\n}\n\n/**\n * Determines if value is actually an Array.\n * @param {*} value\n * @return {boolean}\n */\nexport function isArray(value) {\n  return Array.isArray(value);\n}\n\n/**\n * Converts an array-like object to an array.\n * @param {?IArrayLike<T>|string} arrayLike\n * @return {!Array<T>}\n * @template T\n */\nexport function toArray(arrayLike) {\n  if (!arrayLike) {\n    return [];\n  }\n  const array = new Array(arrayLike.length);\n  for (let i = 0; i < arrayLike.length; i++) {\n    array[i] = arrayLike[i];\n  }\n  return array;\n}\n\n/**\n * Determines if value is actually an Object.\n * @param {*} value\n * @return {boolean}\n */\nexport function isObject(value) {\n  return toString(value) === '[object Object]';\n}\n\n/**\n * Determines if value is of number type and finite.\n * NaN and Infinity are not considered a finite number.\n * String numbers are not considered numbers.\n * @param {*} value\n * @return {boolean}\n */\nexport function isFiniteNumber(value) {\n  return (typeof value === 'number' && isFinite(value));\n}\n\n/**\n * Checks whether `s` is a valid value of `enumObj`.\n *\n * @param {!Object<T>} enumObj\n * @param {T} s\n * @return {boolean}\n * @template T\n */\nexport function isEnumValue(enumObj, s) {\n  for (const k in enumObj) {\n    if (enumObj[k] === s) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Externs declare that access `defaultView` from `document` or\n * `ownerDocument` is of type `(Window|null)` but most of our parameter types\n * assume that it is never null. This is OK in practice as we ever only get\n * null on disconnected documents or old IE.\n * This helper function casts it into just a simple Window return type.\n *\n * @param {!Window|null} winOrNull\n * @return {!Window}\n */\nexport function toWin(winOrNull) {\n  return /** @type {!Window} */ (winOrNull);\n}\n\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {tryDecodeUriComponent_} from './url-try-decode-uri-component';\n\nconst regex = /(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * DO NOT import the function from this file. Instead, import parseQueryString\n * from `src/url.js`.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString_(queryString) {\n  const params = /** @type {!JsonObject} */ (Object.create(null));\n  if (!queryString) {\n    return params;\n  }\n\n  let match;\n  while ((match = regex.exec(queryString))) {\n    const name = tryDecodeUriComponent_(match[1], match[1]);\n    const value = match[2] ? tryDecodeUriComponent_(match[2], match[2]) : '';\n    params[name] = value;\n  }\n  return params;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Tries to decode a URI component, falling back to opt_fallback (or an empty\n * string)\n *\n * DO NOT import the function from this file. Instead, import\n * tryDecodeUriComponent from `src/url.js`.\n *\n * @param {string} component\n * @param {string=} fallback\n * @return {string}\n */\nexport function tryDecodeUriComponent_(component, fallback = '') {\n  try {\n    return decodeURIComponent(component);\n  } catch (e) {\n    return fallback;\n  }\n}\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {endsWith, startsWith} from './string';\nimport {getMode} from './mode';\nimport {isArray} from './types';\nimport {parseQueryString_} from './url-parse-query-string';\nimport {tryDecodeUriComponent_} from './url-try-decode-uri-component';\nimport {urls} from './config';\nimport {user} from './log';\n\n/**\n * Cached a-tag to avoid memory allocation during URL parsing.\n * @type {HTMLAnchorElement}\n */\nlet a;\n\n/**\n * We cached all parsed URLs. As of now there are no use cases\n * of AMP docs that would ever parse an actual large number of URLs,\n * but we often parse the same one over and over again.\n * @type {Object<string, !Location>}\n */\nlet cache;\n\n/** @private @const Matches amp_js_* parameters in query string. */\nconst AMP_JS_PARAMS_REGEX = /[?&]amp_js[^&]*/;\n\n/** @private @const Matches usqp parameters from goog experiment in query string. */\nconst GOOGLE_EXPERIMENT_PARAMS_REGEX = /[?&]usqp[^&]*/;\n\nconst INVALID_PROTOCOLS = [\n  /*eslint no-script-url: 0*/ 'javascript:',\n  /*eslint no-script-url: 0*/ 'data:',\n  /*eslint no-script-url: 0*/ 'vbscript:',\n];\n\n/** @const {string} */\nexport const SOURCE_ORIGIN_PARAM = '__amp_source_origin';\n\n/**\n * Returns the correct origin for a given window.\n * @param {!Window} win\n * @return {string} origin\n */\nexport function getWinOrigin(win) {\n  return win.origin || parseUrl(win.location.href).origin;\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * Consider the returned object immutable. This is enforced during\n * testing by freezing the object.\n * @param {string} url\n * @param {boolean=} opt_nocache\n * @return {!Location}\n */\nexport function parseUrl(url, opt_nocache) {\n  if (!a) {\n    a = /** @type {!HTMLAnchorElement} */ (self.document.createElement('a'));\n    cache = self.UrlCache || (self.UrlCache = Object.create(null));\n  }\n\n  const fromCache = cache[url];\n  if (fromCache) {\n    return fromCache;\n  }\n\n  const info = parseUrlWithA(a, url);\n\n  // Freeze during testing to avoid accidental mutation.\n  const frozen = (getMode().test && Object.freeze) ? Object.freeze(info) : info;\n\n  if (opt_nocache) {\n    return frozen;\n  }\n  return cache[url] = frozen;\n}\n\n/**\n * Returns a Location-like object for the given URL. If it is relative,\n * the URL gets resolved.\n * @param {!HTMLAnchorElement} a\n * @param {string} url\n * @return {!Location}\n * @restricted\n */\nexport function parseUrlWithA(a, url) {\n  a.href = url;\n\n  // IE11 doesn't provide full URL components when parsing relative URLs.\n  // Assigning to itself again does the trick #3449.\n  if (!a.protocol) {\n    a.href = a.href;\n  }\n\n  const info = /** @type {!Location} */({\n    href: a.href,\n    protocol: a.protocol,\n    host: a.host,\n    hostname: a.hostname,\n    port: a.port == '0' ? '' : a.port,\n    pathname: a.pathname,\n    search: a.search,\n    hash: a.hash,\n    origin: null, // Set below.\n  });\n\n  // Some IE11 specific polyfills.\n  // 1) IE11 strips out the leading '/' in the pathname.\n  if (info.pathname[0] !== '/') {\n    info.pathname = '/' + info.pathname;\n  }\n\n  // 2) For URLs with implicit ports, IE11 parses to default ports while\n  // other browsers leave the port field empty.\n  if ((info.protocol == 'http:' && info.port == 80)\n      || (info.protocol == 'https:' && info.port == 443)) {\n    info.port = '';\n    info.host = info.hostname;\n  }\n\n  // For data URI a.origin is equal to the string 'null' which is not useful.\n  // We instead return the actual origin which is the full URL.\n  if (a.origin && a.origin != 'null') {\n    info.origin = a.origin;\n  } else if (info.protocol == 'data:' || !info.host) {\n    info.origin = info.href;\n  } else {\n    info.origin = info.protocol + '//' + info.host;\n  }\n  return info;\n}\n\n/**\n * Appends the string just before the fragment part (or optionally\n * to the front of the query string) of the URL.\n * @param {string} url\n * @param {string} paramString\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function appendEncodedParamStringToUrl(url, paramString,\n  opt_addToFront) {\n  if (!paramString) {\n    return url;\n  }\n  const mainAndFragment = url.split('#', 2);\n  const mainAndQuery = mainAndFragment[0].split('?', 2);\n\n  let newUrl = mainAndQuery[0] + (\n    mainAndQuery[1]\n      ? (opt_addToFront\n        ? `?${paramString}&${mainAndQuery[1]}`\n        : `?${mainAndQuery[1]}&${paramString}`)\n      : `?${paramString}`);\n  newUrl += mainAndFragment[1] ? `#${mainAndFragment[1]}` : '';\n  return newUrl;\n}\n/**\n * Appends a query string field and value to a url. `key` and `value`\n * will be ran through `encodeURIComponent` before appending.\n * @param {string} url\n * @param {string} key\n * @param {string} value\n * @param {boolean=} opt_addToFront\n * @return {string}\n */\nexport function addParamToUrl(url, key, value, opt_addToFront) {\n  const field = `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n  return appendEncodedParamStringToUrl(url, field, opt_addToFront);\n}\n\n/**\n * Appends query string fields and values to a url. The `params` objects'\n * `key`s and `value`s will be transformed into query string keys/values.\n * @param {string} url\n * @param {!JsonObject<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function addParamsToUrl(url, params) {\n  return appendEncodedParamStringToUrl(url, serializeQueryString(params));\n}\n\n/**\n * Serializes the passed parameter map into a query string with both keys\n * and values encoded.\n * @param {!JsonObject<string, string|!Array<string>>} params\n * @return {string}\n */\nexport function serializeQueryString(params) {\n  const s = [];\n  for (const k in params) {\n    const v = params[k];\n    if (v == null) {\n      continue;\n    } else if (isArray(v)) {\n      for (let i = 0; i < v.length; i++) {\n        const sv = /** @type {string} */ (v[i]);\n        s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n      }\n    } else {\n      const sv = /** @type {string} */ (v);\n      s.push(`${encodeURIComponent(k)}=${encodeURIComponent(sv)}`);\n    }\n  }\n  return s.join('&');\n}\n\n/**\n * Returns `true` if the URL is secure: either HTTPS or localhost (for testing).\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isSecureUrl(url) {\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n  return (url.protocol == 'https:' ||\n      url.hostname == 'localhost' ||\n      endsWith(url.hostname, '.localhost'));\n}\n\n/**\n * Asserts that a given url is HTTPS or protocol relative. It's a user-level\n * assert.\n *\n * Provides an exception for localhost.\n *\n * @param {?string|undefined} urlString\n * @param {!Element|string} elementContext Element where the url was found.\n * @param {string=} sourceName Used for error messages.\n * @return {string}\n */\nexport function assertHttpsUrl(\n  urlString, elementContext, sourceName = 'source') {\n  user().assert(urlString != null, '%s %s must be available',\n      elementContext, sourceName);\n  // (erwinm, #4560): type cast necessary until #4560 is fixed.\n  const theUrlString = /** @type {string} */ (urlString);\n  user().assert(isSecureUrl(theUrlString) || /^(\\/\\/)/.test(theUrlString),\n      '%s %s must start with ' +\n      '\"https://\" or \"//\" or be relative and served from ' +\n      'either https or from localhost. Invalid value: %s',\n      elementContext, sourceName, theUrlString);\n  return theUrlString;\n}\n\n/**\n * Asserts that a given url is an absolute HTTP or HTTPS URL.\n * @param {string} urlString\n * @return {string}\n */\nexport function assertAbsoluteHttpOrHttpsUrl(urlString) {\n  user().assert(/^https?\\:/i.test(urlString),\n      'URL must start with \"http://\" or \"https://\". Invalid value: %s',\n      urlString);\n  return parseUrl(urlString).href;\n}\n\n\n/**\n * Parses the query string of an URL. This method returns a simple key/value\n * map. If there are duplicate keys the latest value is returned.\n *\n * This function is implemented in a separate file to avoid a circular\n * dependency.\n *\n * @param {string} queryString\n * @return {!JsonObject}\n */\nexport function parseQueryString(queryString) {\n  return parseQueryString_(queryString);\n}\n\n/**\n * Returns the URL without fragment. If URL doesn't contain fragment, the same\n * string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function removeFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return url;\n  }\n  return url.substring(0, index);\n}\n\n/**\n * Returns the fragment from the URL. If the URL doesn't contain fragment,\n * the empty string is returned.\n * @param {string} url\n * @return {string}\n */\nexport function getFragment(url) {\n  const index = url.indexOf('#');\n  if (index == -1) {\n    return '';\n  }\n  return url.substring(index);\n}\n\n/**\n * Returns whether the URL has the origin of a proxy.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isProxyOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n  return urls.cdnProxyRegex.test(url.origin);\n}\n\n/**\n * Returns whether the URL origin is localhost.\n * @param {string|!Location} url URL of an AMP document.\n * @return {boolean}\n */\nexport function isLocalhostOrigin(url) {\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n  return urls.localhostRegex.test(url.origin);\n}\n\n/**\n * Returns whether the URL has valid protocol.\n * Deep link protocol is valid, but not javascript etc.\n * @param {string|!Location} url\n * @return {boolean}\n */\nexport function isProtocolValid(url) {\n  if (!url) {\n    return true;\n  }\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n  return !INVALID_PROTOCOLS.includes(url.protocol);\n}\n\n/**\n * Removes parameters that start with amp js parameter pattern and returns the new\n * search string.\n * @param {string} urlSearch\n * @return {string}\n */\nfunction removeAmpJsParams(urlSearch) {\n  if (!urlSearch || urlSearch == '?') {\n    return '';\n  }\n  const search = urlSearch\n      .replace(AMP_JS_PARAMS_REGEX, '')\n      .replace(GOOGLE_EXPERIMENT_PARAMS_REGEX, '')\n      .replace(/^[?&]/, ''); // Removes first ? or &.\n  return search ? '?' + search : '';\n}\n\n/**\n * Returns the source URL of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string}\n */\nexport function getSourceUrl(url) {\n  if (typeof url == 'string') {\n    url = parseUrl(url);\n  }\n\n  // Not a proxy URL - return the URL itself.\n  if (!isProxyOrigin(url)) {\n    return url.href;\n  }\n\n  // A proxy URL.\n  // Example path that is being matched here.\n  // https://cdn.ampproject.org/c/s/www.origin.com/foo/\n  // The /s/ is optional and signals a secure origin.\n  const path = url.pathname.split('/');\n  const prefix = path[1];\n  user().assert(prefix == 'a' || prefix == 'c' || prefix == 'v',\n      'Unknown path prefix in url %s', url.href);\n  const domainOrHttpsSignal = path[2];\n  const origin = domainOrHttpsSignal == 's'\n    ? 'https://' + decodeURIComponent(path[3])\n    : 'http://' + decodeURIComponent(domainOrHttpsSignal);\n  // Sanity test that what we found looks like a domain.\n  user().assert(origin.indexOf('.') > 0, 'Expected a . in origin %s', origin);\n  path.splice(1, domainOrHttpsSignal == 's' ? 3 : 2);\n  return origin + path.join('/') + removeAmpJsParams(url.search) +\n      (url.hash || '');\n}\n\n/**\n * Returns the source origin of an AMP document for documents served\n * on a proxy origin or directly.\n * @param {string|!Location} url URL of an AMP document.\n * @return {string} The source origin of the URL.\n */\nexport function getSourceOrigin(url) {\n  return parseUrl(getSourceUrl(url)).origin;\n}\n\n/**\n * Returns absolute URL resolved based on the relative URL and the base.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n */\nexport function resolveRelativeUrl(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrl(baseUrl);\n  }\n  if (typeof URL == 'function') {\n    return new URL(relativeUrlString, baseUrl.href).toString();\n  }\n  return resolveRelativeUrlFallback_(relativeUrlString, baseUrl);\n}\n\n/**\n * Fallback for URL resolver when URL class is not available.\n * @param {string} relativeUrlString\n * @param {string|!Location} baseUrl\n * @return {string}\n * @private Visible for testing.\n */\nexport function resolveRelativeUrlFallback_(relativeUrlString, baseUrl) {\n  if (typeof baseUrl == 'string') {\n    baseUrl = parseUrl(baseUrl);\n  }\n  relativeUrlString = relativeUrlString.replace(/\\\\/g, '/');\n  const relativeUrl = parseUrl(relativeUrlString);\n\n  // Absolute URL.\n  if (startsWith(relativeUrlString.toLowerCase(), relativeUrl.protocol)) {\n    return relativeUrl.href;\n  }\n\n  // Protocol-relative URL.\n  if (startsWith(relativeUrlString, '//')) {\n    return baseUrl.protocol + relativeUrlString;\n  }\n\n  // Absolute path.\n  if (startsWith(relativeUrlString, '/')) {\n    return baseUrl.origin + relativeUrlString;\n  }\n\n  // Relative path.\n  return baseUrl.origin + baseUrl.pathname.replace(/\\/[^/]*$/, '/')\n      + relativeUrlString;\n}\n\n\n/**\n * Add \"__amp_source_origin\" query parameter to the URL.\n * @param {!Window} win\n * @param {string} url\n * @return {string}\n */\nexport function getCorsUrl(win, url) {\n  checkCorsUrl(url);\n  const sourceOrigin = getSourceOrigin(win.location.href);\n  return addParamToUrl(url, SOURCE_ORIGIN_PARAM, sourceOrigin);\n}\n\n\n/**\n * Checks if the url have __amp_source_origin and throws if it does.\n * @param {string} url\n */\nexport function checkCorsUrl(url) {\n  const parsedUrl = parseUrl(url);\n  const query = parseQueryString(parsedUrl.search);\n  user().assert(!(SOURCE_ORIGIN_PARAM in query),\n      'Source origin is not allowed in %s', url);\n}\n\n/**\n * Tries to decode a URI component, falling back to opt_fallback (or an empty\n * string)\n *\n * @param {string} component\n * @param {string=} opt_fallback\n * @return {string}\n */\nexport function tryDecodeUriComponent(component, opt_fallback) {\n  return tryDecodeUriComponent_(component, opt_fallback);\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A bit like Array#filter, but removes elements that filter false from the\n * array. Returns the filtered items.\n *\n * @param {!Array<T>} array\n * @param {function(T, number, !Array<T>):boolean} filter\n * @return {!Array<T>}\n * @template T\n */\nexport function filterSplice(array, filter) {\n  const splice = [];\n  let index = 0;\n  for (let i = 0; i < array.length; i++) {\n    const item = array[i];\n    if (filter(item, i, array)) {\n      if (index < i) {\n        array[index] = item;\n      }\n      index++;\n    } else {\n      splice.push(item);\n    }\n  }\n\n  if (index < array.length) {\n    array.length = index;\n  }\n\n  return splice;\n}\n\n/**\n * Returns the index of the first element matching the predicate.\n * Like Array#findIndex.\n *\n * @param {!Array<T>} array\n * @param {function(T, number, !Array<T>):boolean} predicate\n * @return {number}\n * @template T\n */\nexport function findIndex(array, predicate) {\n  for (let i = 0; i < array.length; i++) {\n    if (predicate(array[i], i, array)) {\n      return i;\n    }\n  }\n  return -1;\n}\n\n/**\n * Converts the given iterator to an array.\n *\n * @param {!Iterator<T>} iterator\n * @return {Array<T>}\n * @template T\n */\nexport function fromIterator(iterator) {\n  const array = [];\n  for (let e = iterator.next(); !e.done; e = iterator.next()) {\n    array.push(e.value);\n  }\n  return array;\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {dev} from '../log';\n\n/**\n * Interpret a byte array as a UTF-8 string.\n * @param {!BufferSource} bytes\n * @return {string}\n */\nexport function utf8Decode(bytes) {\n  if (typeof TextDecoder !== 'undefined') {\n    return new TextDecoder('utf-8').decode(bytes);\n  }\n  const asciiString = bytesToString(new Uint8Array(bytes.buffer || bytes));\n  return decodeURIComponent(escape(asciiString));\n}\n\n/**\n * Turn a string into UTF-8 bytes.\n * @param {string} string\n * @return {!Uint8Array}\n */\nexport function utf8Encode(string) {\n  if (typeof TextEncoder !== 'undefined') {\n    return new TextEncoder('utf-8').encode(string);\n  }\n  return stringToBytes(unescape(encodeURIComponent(string)));\n}\n\n/**\n * Converts a string which holds 8-bit code points, such as the result of atob,\n * into a Uint8Array with the corresponding bytes.\n * If you have a string of characters, you probably want to be using utf8Encode.\n * @param {string} str\n * @return {!Uint8Array}\n */\nexport function stringToBytes(str) {\n  const bytes = new Uint8Array(str.length);\n  for (let i = 0; i < str.length; i++) {\n    const charCode = str.charCodeAt(i);\n    dev().assert(charCode <= 255, 'Characters must be in range [0,255]');\n    bytes[i] = charCode;\n  }\n  return bytes;\n}\n\n/**\n * Converts a 8-bit bytes array into a string\n * @param {!Uint8Array} bytes\n * @return {string}\n */\nexport function bytesToString(bytes) {\n  // Intentionally avoids String.fromCharCode.apply so we don't suffer a\n  // stack overflow. #10495, https://jsperf.com/bytesToString-2\n  const array = new Array(bytes.length);\n  for (let i = 0; i < bytes.length; i++) {\n    array[i] = String.fromCharCode(bytes[i]);\n  }\n  return array.join('');\n}\n\n/**\n * Converts a 4-item byte array to an unsigned integer.\n * Assumes bytes are big endian.\n * @param {!Uint8Array} bytes\n * @return {number}\n */\nexport function bytesToUInt32(bytes) {\n  if (bytes.length != 4) {\n    throw new Error('Received byte array with length != 4');\n  }\n  const val = (bytes[0] & 0xFF) << 24 |\n     (bytes[1] & 0xFF) << 16 |\n     (bytes[2] & 0xFF) << 8 |\n     (bytes[3] & 0xFF);\n  // Convert to unsigned.\n  return val >>> 0;\n}\n\n/**\n * Generate a random bytes array with specific length using\n * win.crypto.getRandomValues. Return null if it is not available.\n * @param {number} length\n * @return {?Uint8Array}\n */\nexport function getCryptoRandomBytesArray(win, length) {\n  if (!win.crypto || !win.crypto.getRandomValues) {\n    return null;\n  }\n\n  // Widely available in browsers we support:\n  // http://caniuse.com/#search=getRandomValues\n  const uint8array = new Uint8Array(length);\n  win.crypto.getRandomValues(uint8array);\n  return uint8array;\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * Creates a function that is evaluated only once and returns the cached result\n * subsequently.\n * @param {function():(T|undefined)} fn\n * @return {function():(T|undefined)}\n * @template T\n * @suppress {checkTypes} Compiler complains about \"fn = null\" for GC.\n */\nexport function once(fn) {\n  let evaluated = false;\n  let retValue = null;\n  return () => {\n    if (!evaluated) {\n      retValue = fn();\n      evaluated = true;\n      fn = null; // GC\n    }\n    return retValue;\n  };\n}\n","/**\n * Copyright 2017 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @enum {number}\n */\nexport const KeyCodes = {\n  ENTER: 13,\n  ESCAPE: 27,\n  SPACE: 32,\n  LEFT_ARROW: 37,\n  UP_ARROW: 38,\n  RIGHT_ARROW: 39,\n  DOWN_ARROW: 40,\n};\n","/**\n * Copyright 2015 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {isObject} from '../types';\n\n/* @const */\nconst hasOwn_ = Object.prototype.hasOwnProperty;\n\n/**\n * Returns a map-like object.\n * If opt_initial is provided, copies its own properties into the\n * newly created object.\n * @param {T=} opt_initial This should typically be an object literal.\n * @return {T}\n * @template T\n */\nexport function map(opt_initial) {\n  const obj = Object.create(null);\n  if (opt_initial) {\n    Object.assign(obj, opt_initial);\n  }\n  return obj;\n}\n\n/**\n * Return an empty JsonObject or makes the passed in object literal\n * an JsonObject.\n * The JsonObject type is just a simple object that is at-dict.\n * See\n * https://github.com/google/closure-compiler/wiki/@struct-and-@dict-Annotations\n * for what a dict is type-wise.\n * The linter enforces that the argument is, in fact, at-dict like.\n * @param {!Object=} opt_initial\n * @return {!JsonObject}\n */\nexport function dict(opt_initial) {\n  // We do not copy. The linter enforces that the passed in object is a literal\n  // and thus the caller cannot have a reference to it.\n  return /** @type {!JsonObject} */ (opt_initial || {});\n}\n\n/**\n * Checks if the given key is a property in the map.\n *\n * @param {T}  obj a map like property.\n * @param {string}  key\n * @return {boolean}\n * @template T\n */\nexport function hasOwn(obj, key) {\n  return hasOwn_.call(obj, key);\n}\n\n/**\n * Returns obj[key] iff key is obj's own property (is not inherited).\n * Otherwise, returns undefined.\n *\n * @param {Object} obj\n * @param {string} key\n * @return {*}\n */\nexport function ownProperty(obj, key) {\n  if (hasOwn(obj, key)) {\n    return obj[key];\n  } else {\n    return undefined;\n  }\n}\n\n/**\n * Deep merges source into target.\n *\n * @param {!Object} target\n * @param {!Object} source\n * @param {number} depth The maximum merge depth. If exceeded, Object.assign\n *                       will be used instead.\n * @return {!Object}\n * @throws {Error} If source contains a circular reference.\n * @note Only nested objects are deep-merged, primitives and arrays are not.\n */\nexport function deepMerge(target, source, depth = 10) {\n  // Keep track of seen objects to detect recursive references.\n  const seen = [];\n\n  /** @type {!Array<{t: !Object, s: !Object, d: number}>} */\n  const queue = [];\n  queue.push({t: target, s: source, d: 0});\n\n  // BFS to ensure objects don't have recursive references at shallower depths.\n  while (queue.length > 0) {\n    const {t, s, d} = queue.shift();\n    if (seen.includes(s)) {\n      throw new Error('Source object has a circular reference.');\n    }\n    seen.push(s);\n    if (t === s) {\n      continue;\n    }\n    if (d > depth) {\n      Object.assign(t, s);\n      continue;\n    }\n    Object.keys(s).forEach(key => {\n      const newValue = s[key];\n      // Perform a deep merge IFF both target and source have the same key\n      // whose corresponding values are objects.\n      if (hasOwn(t, key)) {\n        const oldValue = t[key];\n        if (isObject(newValue) && isObject(oldValue)) {\n          queue.push({t: oldValue, s: newValue, d: d + 1});\n          return;\n        }\n      }\n      t[key] = newValue;\n    });\n  }\n  return target;\n}\n\n/**\n * @param {!Object} o An object to remove properties from\n * @param {!Array<string>} props A list of properties to remove from the Object\n * @return {!Object} An object with the given properties removed\n */\nexport function omit(o, props) {\n  return Object.keys(o).reduce((acc, key) => {\n    if (!props.includes(key)) {\n      acc[key] = o[key];\n    }\n    return acc;\n  }, {});\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Wraps a given callback and applies a rate limit.\n * It throttles the calls so that no consequent calls have time interval\n * smaller than the given minimal interval.\n *\n * @param {!Window} win\n * @param {function(...*)} callback\n * @param {number} minInterval the minimum time interval in millisecond\n * @returns {function(...*)}\n */\nexport function throttle(win, callback, minInterval) {\n  let locker = 0;\n  let nextCallArgs = null;\n\n  function fire(args) {\n    nextCallArgs = null;\n    // Lock the fire for minInterval milliseconds\n    locker = win.setTimeout(waiter, minInterval);\n\n    callback.apply(null, args);\n  }\n\n  function waiter() {\n    locker = 0;\n    // If during the period there're invocations queued up, fire once.\n    if (nextCallArgs) {\n      fire(nextCallArgs);\n    }\n  }\n\n  return function(...args) {\n    if (locker) {\n      nextCallArgs = args;\n    } else {\n      fire(args);\n    }\n  };\n}\n\n/**\n * Wraps a given callback and applies a wait timer, so that minInterval\n * milliseconds must pass since the last call before the callback is actually\n * invoked.\n *\n * @param {!Window} win\n * @param {function(...*)} callback\n * @param {number} minInterval the minimum time interval in millisecond\n * @returns {function(...*)}\n */\nexport function debounce(win, callback, minInterval) {\n  let locker = 0;\n  let timestamp = 0;\n  let nextCallArgs = null;\n\n  function fire(args) {\n    nextCallArgs = null;\n    callback.apply(null, args);\n  }\n\n  function waiter() {\n    locker = 0;\n    const remaining = minInterval - (win.Date.now() - timestamp);\n    if (remaining > 0) {\n      locker = win.setTimeout(waiter, remaining);\n    } else {\n      fire(nextCallArgs);\n    }\n  }\n\n  return function(...args) {\n    timestamp = win.Date.now();\n    nextCallArgs = args;\n    if (!locker) {\n      locker = win.setTimeout(waiter, minInterval);\n    }\n  };\n}\n","/**\n * Copyright 2016 The AMP HTML Authors. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS-IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {ActionTrust} from './action-trust'; // eslint-disable-line no-unused-vars\n\n/**\n * VideoInterface defines a common video API which any AMP component that plays\n * videos is expected to implement.\n *\n * AMP runtime uses this common API to provide consistent video experience and\n * analytics across all video players.\n *\n * Components implementing this interface must also extend\n * {@link ./base-element.BaseElement} and register with the\n * Video Manager {@link ./service/video-manager-impl.VideoManager} during\n * their `builtCallback`.\n *\n * @interface\n */\nexport class VideoInterface {\n\n  /**\n   * Whether the component supports video playback in the current platform.\n   * If false, component will be not treated as a video component.\n   * @return {boolean}\n   */\n  supportsPlatform() {}\n\n  /**\n   * Whether users can interact with the video such as pausing it.\n   * Example of non-interactive videos include design background videos where\n   * all controls are hidden from the user.\n   *\n   * @return {boolean}\n   */\n  isInteractive() {}\n\n  /**\n   * Current playback time in seconds at time of trigger\n   * @return {number}\n   */\n  getCurrentTime() {}\n\n  /**\n   * Total duration of the video in seconds\n   * @return {number}\n   */\n  getDuration() {}\n\n  /**\n   * Get a 2d array of start and stop times that the user has watched.\n   * @return {!Array<Array<number>>}\n   */\n  getPlayedRanges() {}\n\n  /**\n   * Plays the video..\n   *\n   * @param {boolean} unusedIsAutoplay Whether the call to the `play` method is\n   * triggered by the autoplay functionality. Video players can use this hint\n   * to make decisions such as not playing pre-roll video ads.\n   */\n  play(unusedIsAutoplay) {}\n\n  /**\n   * Pauses the video.\n   */\n  pause() {}\n\n  /**\n   * Mutes the video.\n   */\n  mute() {}\n\n  /**\n   * Unmutes the video.\n   */\n  unmute() {}\n\n  /**\n   * Makes the video UI controls visible.\n   *\n   * AMP will not call this method if `controls` attribute is not set.\n   */\n  showControls() {}\n\n  /**\n   * Hides the video UI controls.\n   *\n   * AMP will not call this method if `controls` attribute is not set.\n   */\n  hideControls() {}\n\n  /**\n   * Returns video's meta data (artwork, title, artist, album, etc.) for use\n   * with the Media Session API\n   * artwork (Array): URL to the poster image (preferably a 512x512 PNG)\n   * title (string): Name of the video\n   * artist (string): Name of the video's author/artist\n   * album (string): Name of the video's album if it exists\n   * @return {!./mediasession-helper.MetadataDef|undefined} metadata\n   */\n  getMetadata() {}\n\n  /**\n   * If this returns true then it will be assumed that the player implements\n   * the MediaSession API internally so that the video manager does not override\n   * it. If not, the video manager will use the metadata variable as well as\n   * inferred meta-data to update the video's Media Session notification.\n   *\n   * @return {boolean}\n   */\n  preimplementsMediaSessionAPI() {}\n\n\n  /**\n   * Automatically comes from {@link ./base-element.BaseElement}\n   *\n   * @return {!AmpElement}\n   */\n  get element() {}\n\n  /**\n   * Automatically comes from {@link ./base-element.BaseElement}\n   *\n   * @return {boolean}\n   */\n  isInViewport() {}\n\n  /**\n   * Enables fullscreen on the internal video element\n   * NOTE: While implementing, keep in mind that Safari/iOS do not allow taking\n   * any element other than <video> to fullscreen, if the player has an internal\n   * implementation of fullscreen (flash for example) then check\n   * if Services.platformFor(this.win).isSafari is true and use the internal\n   * implementation instead. If not, it is recommended to take the iframe\n   * to fullscreen using fullscreenEnter from dom.js\n   */\n  fullscreenEnter() {}\n\n  /**\n   * Quits fullscreen mode\n   */\n  fullscreenExit() {}\n\n  /**\n   * Returns whether the video is currently in fullscreen mode or not\n   * @return {boolean}\n   */\n  isFullscreen() {}\n\n  /**\n   * Automatically comes from {@link ./base-element.BaseElement}\n   *\n   * @param {string} unusedMethod\n   * @param {function(!./service/action-impl.ActionInvocation)} unusedHandler\n   * @param {ActionTrust} unusedMinTrust\n   * @public\n   */\n  registerAction(unusedMethod, unusedHandler, unusedMinTrust) {}\n}\n\n\n/**\n * Attributes\n *\n * Components implementing the VideoInterface are expected to support\n * the following attributes.\n *\n * @constant {!Object<string, string>}\n */\nexport const VideoAttributes = {\n  /**\n   * autoplay\n   *\n   * Whether the developer has configured autoplay on the component.\n   * This is normally done by setting `autoplay` attribute on the component.\n   *\n   * AMP runtime manages autoplay behaviour itself using methods such as `play`,\n   * `pause`, `showControls`, `hideControls`, `mute`, etc.. therefore components\n   * should not propagate the autoplay attribute to the underlying player\n   * implementation.\n   *\n   * When a video is requested to autoplay, AMP will automatically\n   * mute and hide the controls for the video, when video is 75% visible in\n   * the viewport, AMP will play the video and later pauses it when 25%\n   * or more of the video exits the viewport. If an auto-playing video also has\n   * controls, AMP will install a tap\n   * handler on the video, and when an end-user taps the video, AMP will show\n   * the controls.\n   *\n   */\n  AUTOPLAY: 'autoplay',\n  /**\n   * dock\n   *\n   * Setting the `dock` attribute on the component makes the video minimize\n   * to the corner when scrolled out of view and has been interacted with.\n   */\n  DOCK: 'dock',\n  /**\n   * fullscreen-on-landscape\n   *\n   * If enabled, this automatically expands the currently visible video and\n   * playing to fullscreen when the user changes the device's orientation to\n   * landscape if the video was started following a user interaction\n   * (not autoplay)\n   *\n   * Dependent upon browser support of\n   * http://caniuse.com/#feat=screen-orientation\n   * and http://caniuse.com/#feat=fullscreen\n   */\n  FULLSCREEN_ON_LANDSCAPE: 'fullscreen-on-landscape',\n};\n\n\n/**\n * Events\n *\n * Components implementing the VideoInterface are expected to dispatch\n * the following DOM events.\n *\n * @constant {!Object<string, string>}\n */\nexport const VideoEvents = {\n  /**\n   * registered\n   *\n   * Fired when the video player element is built and has been registered with\n   * the video manager.\n   *\n   * @event registered\n   */\n  REGISTERED: 'registered',\n\n  /**\n   * load\n   *\n   * Fired when the video player is loaded and calls to methods such as `play()`\n   * are allowed.\n   *\n   * @event load\n   */\n  LOAD: 'load',\n\n  /**\n   * playing\n   *\n   * Fired when the video begins playing.\n   *\n   * @event playing\n   */\n  PLAYING: 'playing',\n\n  /**\n   * pause\n   *\n   * Fired when the video pauses.\n   *\n   * @event pause\n   */\n  PAUSE: 'pause',\n\n  /**\n   * ended\n   *\n   * Fired when the video ends.\n   *\n   * This event should be fired in addition to `pause` when video ends.\n   *\n   * @event ended\n   */\n  ENDED: 'ended',\n\n  /**\n   * muted\n   *\n   * Fired when the video is muted.\n   *\n   * @event muted\n   */\n  MUTED: 'muted',\n\n  /**\n   * unmuted\n   *\n   * Fired when the video is unmuted.\n   *\n   * @event unmuted\n   */\n  UNMUTED: 'unmuted',\n\n  /**\n   * amp:video:visibility\n   *\n   * Fired when the video's visibility changes. Normally fired\n   * from `viewportCallback`.\n   *\n   * @event amp:video:visibility\n   * @property {boolean} visible Whether the video player is visible or not.\n   */\n  VISIBILITY: 'amp:video:visibility',\n\n  /**\n   * reload\n   *\n   * Fired when the video's src changes.\n   *\n   * @event reloaded\n   */\n  RELOAD: 'reloaded',\n\n  /**\n   * pre/mid/post Ad start\n   *\n   * Fired when an Ad starts playing.\n   *\n   * This is used to remove any overlay shims during Ad play during autoplay\n   * or minimized-to-corner version of the player.\n   *\n   * @event ad_start\n   */\n  AD_START: 'ad_start',\n\n  /**\n   * pre/mid/post Ad ends\n   *\n   * Fired when an Ad ends playing.\n   *\n   * This is used to restore any overlay shims during Ad play during autoplay\n   * or minimized-to-corner version of the player.\n   *\n   * @event ad_end\n   */\n  AD_END: 'ad_end',\n};\n\n\n/**\n * Playing States\n *\n * Internal playing states used to distinguish between video playing on user's\n * command and videos playing automatically\n *\n * @constant {!Object<string, string>}\n */\nexport const PlayingStates = {\n  /**\n   * playing_manual\n   *\n   * When the video user manually interacted with the video and the video\n   * is now playing\n   *\n   * @event playing_manual\n   */\n  PLAYING_MANUAL: 'playing_manual',\n\n  /**\n   * playing_auto\n   *\n   * When the video has autoplay and the user hasn't interacted with it yet\n   *\n   * @event playing_auto\n   */\n  PLAYING_AUTO: 'playing_auto',\n\n  /**\n   * paused\n   *\n   * When the video is paused.\n   *\n   * @event paused\n   */\n  PAUSED: 'paused',\n};\n\n\n/** @enum {string} */\nexport const VideoAnalyticsEvents = {\n  /**\n   * video-ended\n   *\n   * Indicates that a video ended.\n   * @property {!VideoAnalyticsDetailsDef} details\n   * @event video-ended\n   */\n  ENDED: 'video-ended',\n\n  /**\n   * video-pause\n   *\n   * Indicates that a video paused.\n   * @property {!VideoAnalyticsDetailsDef} details\n   * @event video-pause\n   */\n  PAUSE: 'video-pause',\n\n  /**\n   * video-play\n   *\n   * Indicates that a video began to play.\n   * @property {!VideoAnalyticsDetailsDef} details\n   * @event video-play\n   */\n  PLAY: 'video-play',\n\n  /**\n   * video-session\n   *\n   * Indicates that some segment of the video played.\n   * @property {!VideoAnalyticsDetailsDef} details\n   * @event video-session\n   */\n  SESSION: 'video-session',\n\n  /**\n   * video-session-visible\n   *\n   * Indicates that some segment of the video played in the viewport.\n   * @property {!VideoAnalyticsDetailsDef} details\n   * @event video-session-visible\n   */\n  SESSION_VISIBLE: 'video-session-visible',\n\n  /**\n   * video-seconds-played\n   *\n   * Indicates that a video was playing when the\n   * video-seconds-played interval fired.\n   * @property {!VideoAnalyticsDetailsDef} details\n   * @event video-session-visible\n   */\n  SECONDS_PLAYED: 'video-seconds-played',\n};\n\n\n/**\n * @typedef {{\n *   autoplay: boolean,\n *   currentTime: number,\n *   duration: number,\n *   height: number,\n *   id: string,\n *   playedRangesJson: string,\n *   playedTotal: number,\n *   muted: boolean,\n *   state: string,\n *   width: number\n * }}\n */\nexport let VideoAnalyticsDetailsDef;\n","/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n\n\n/**\n * This regex consists of 4 matching capture groups and one (non-matching) fallback:\n *\n * - (\\0), catch the null terminator character so it may be replaced by UTF\n *   Replacement Char\n * - ^(-)$, catch a solitary dash char, so that it may be backslash escaped.\n *   This is a separate capture group so that the legal-chars (group 4) doesn't\n *   capture it first, since that group doesn't need to escape its dash.\n * - ([\\x01-\\x1f\\x7f]|^-?[0-9]), catch a UTF control char, or any leading\n *   number (with an optional leading dash). The control or the number (but not\n *   the leading dash) must be hex-escaped,.\n * - ([\\x80-\\uffff0-9a-zA-Z_-]+), catch legal-chars, with the exception of a\n *   solitary dash, which will already have matched in group 1.\n * - [^], finally, a catch-all that allows us to backslash escape the char.\n *\n * Together, this matches everything necessary for CSS.escape.\n */\nvar regex = /(\\0)|^(-)$|([\\x01-\\x1f\\x7f]|^-?[0-9])|([\\x80-\\uffff0-9a-zA-Z_-]+)|[^]/g;\n\nfunction escaper(match, nil, dash, hexEscape, chars) {\n  // Chars is the legal-chars (group 4) capture\n  if (chars) {\n    return chars;\n  }\n  // Nil is the null terminator (group 1) capture\n  if (nil) {\n    return '\\uFFFD';\n  }\n  // Both UTF control chars, and leading numbers (with optional leading dash)\n  // (group 3) must be backslash escaped with a trailing space.  Funnily, the\n  // leading dash must not be escaped, but the number. :shrug:\n  if (hexEscape) {\n    return match.slice(0, -1) + '\\\\' + match.slice(-1).charCodeAt(0).toString(16) + ' '\n  }\n  // Finally, the solitary dash and the catch-all chars require backslash\n  // escaping.\n  return '\\\\' + match;\n}\n\n/**\n * https://drafts.csswg.org/cssom/#serialize-an-identifier\n * @param {string} value\n * @return {string}\n */\nexport function cssEscape(value) {\n  return String(value).replace(regex, escaper);\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJidWlsZC9hbXAtc3RvcnktMC4xLmNzcy5qcyIsImV4dGVuc2lvbnMvYW1wLWFuaW1hdGlvbi8wLjEvd2ViLWFuaW1hdGlvbi10eXBlcy5qcyIsImV4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9hbXAtc3RvcnktYXV0by1hZHMuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYW1wLXN0b3J5LWJhc2UtbGF5ZXIuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYW1wLXN0b3J5LWdyaWQtbGF5ZXIuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYW1wLXN0b3J5LWhpbnQuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYW1wLXN0b3J5LXBhZ2UuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYW1wLXN0b3J5LXN0YXRlLXNlcnZpY2UuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYW1wLXN0b3J5LmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2FuYWx5dGljcy5qcyIsImV4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9hbmltYXRpb24tcHJlc2V0cy5qcyIsImV4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9hbmltYXRpb24tdHlwZXMuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYW5pbWF0aW9uLmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2F1ZGlvLmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2JhY2tncm91bmQuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvYm9va2VuZC5qcyIsImV4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9kZWZhdWx0LW1lZGlhLmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2RldmVsb3BtZW50LXVpLmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2VtYmVkLW1vZGUuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvZXZlbnRzLmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL2pzb25sZC5qcyIsImV4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9sb2FkaW5nLXNwaW5uZXIuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvbG9nZ2luZy5qcyIsImV4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9tZWRpYS1wb29sLmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL21lZGlhLXRhc2tzLmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL25hdmlnYXRpb24tc3RhdGUuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvb3JpZ2luLXdoaXRlbGlzdC5qcyIsImV4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9wYWdlLWFkdmFuY2VtZW50LmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL3BhZ2Utc2NhbGluZy5qcyIsImV4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9wYWdpbmF0aW9uLWJ1dHRvbnMuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvcHJvZ3Jlc3MtYmFyLmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL3JlbGF0ZWQtYXJ0aWNsZXMuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvc2hhcmUuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvc2ltcGxlLXRlbXBsYXRlLmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL3NvdXJjZXMuanMiLCJleHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvc3lzdGVtLWxheWVyLmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL3RvYXN0LmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL3V0aWxzLmpzIiwiZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL3ZhcmlhYmxlLXNlcnZpY2UuanMiLCJub2RlX21vZHVsZXMvZG9jdW1lbnQtcmVnaXN0ZXItZWxlbWVudC9idWlsZC9kb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50Lm5vZGUuanMiLCJub2RlX21vZHVsZXMvcHJvbWlzZS1wanMvcHJvbWlzZS5qcyIsInNyYy9hY3Rpb24tdHJ1c3QuanMiLCJzcmMvYW5hbHl0aWNzLmpzIiwic3JjL2NsaXBib2FyZC5qcyIsInNyYy9jb21tb24tc2lnbmFscy5qcyIsInNyYy9jb25maWcuanMiLCJzcmMvY29va2llcy5qcyIsInNyYy9kb20uanMiLCJzcmMvZWxlbWVudC1zZXJ2aWNlLmpzIiwic3JjL2V2ZW50LWhlbHBlci1saXN0ZW4uanMiLCJzcmMvZXZlbnQtaGVscGVyLmpzIiwic3JjL2V4cGVyaW1lbnRzLmpzIiwic3JjL2dlc3R1cmUtcmVjb2duaXplcnMuanMiLCJzcmMvZ2VzdHVyZS5qcyIsInNyYy9qc29uLmpzIiwic3JjL2xheW91dC5qcyIsInNyYy9sb2cuanMiLCJzcmMvbW9kZS1vYmplY3QuanMiLCJzcmMvbW9kZS5qcyIsInNyYy9tb3Rpb24uanMiLCJzcmMvb2JzZXJ2YWJsZS5qcyIsInNyYy9vcmlnaW4tZXhwZXJpbWVudHMuanMiLCJzcmMvcGFzcy5qcyIsInNyYy9wb2x5ZmlsbHMuanMiLCJzcmMvcG9seWZpbGxzL2FycmF5LWluY2x1ZGVzLmpzIiwic3JjL3BvbHlmaWxscy9kb2N1bWVudC1jb250YWlucy5qcyIsInNyYy9wb2x5ZmlsbHMvZG9tdG9rZW5saXN0LXRvZ2dsZS5qcyIsInNyYy9wb2x5ZmlsbHMvbWF0aC1zaWduLmpzIiwic3JjL3BvbHlmaWxscy9vYmplY3QtYXNzaWduLmpzIiwic3JjL3BvbHlmaWxscy9wcm9taXNlLmpzIiwic3JjL3NlcnZpY2UuanMiLCJzcmMvc2VydmljZXMuanMiLCJzcmMvc3RyaW5nLmpzIiwic3JjL3N0eWxlLmpzIiwic3JjL3R5cGVzLmpzIiwic3JjL3VybC1wYXJzZS1xdWVyeS1zdHJpbmcuanMiLCJzcmMvdXJsLXRyeS1kZWNvZGUtdXJpLWNvbXBvbmVudC5qcyIsInNyYy91cmwuanMiLCJzcmMvdXRpbHMvYXJyYXkuanMiLCJzcmMvdXRpbHMvYnl0ZXMuanMiLCJzcmMvdXRpbHMvZnVuY3Rpb24uanMiLCJzcmMvdXRpbHMva2V5LWNvZGVzLmpzIiwic3JjL3V0aWxzL29iamVjdC5qcyIsInNyYy91dGlscy9yYXRlLWxpbWl0LmpzIiwic3JjL3ZpZGVvLWludGVyZmFjZS5qcyIsInRoaXJkX3BhcnR5L2Nzcy1lc2NhcGUvY3NzLWVzY2FwZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztBQ0FPLElBQU0sb0JBQU0sMm0yREFBWjs7Ozs7O1FDb01TLGlCLEdBQUEsaUI7QUFwTWhCOzs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBOzs7Ozs7OztBQVFPLElBQUksa0RBQUo7O0FBR1A7Ozs7Ozs7OztBQVNPLElBQUksNERBQUo7O0FBR1A7Ozs7Ozs7OztBQVNPLElBQUksOERBQUo7O0FBR1A7Ozs7Ozs7OztBQVNPLElBQUksMERBQUo7O0FBR1A7Ozs7Ozs7OztBQVNPLElBQUksa0VBQUo7O0FBR1A7OztBQUdPLElBQUksa0RBQUo7O0FBR1A7Ozs7Ozs7Ozs7Ozs7OztBQWVPLElBQUksOERBQUo7O0FBR1A7Ozs7Ozs7QUFPTyxJQUFJLDBEQUFKOztBQUdQOzs7Ozs7Ozs7QUFTTyxJQUFJLHdFQUFKOztBQUdQOzs7Ozs7O0FBT08sSUFBSSxrRUFBSjs7QUFHUDs7Ozs7Ozs7O0FBU08sSUFBSSxvRUFBSjs7QUFHUDs7OztBQUlPLElBQU0sd0RBQXdCO0FBQ25DLFFBQU0sTUFENkI7QUFFbkMsV0FBUyxTQUYwQjtBQUduQyxXQUFTLFNBSDBCO0FBSW5DLFVBQVEsUUFKMkI7QUFLbkMsWUFBVTtBQUx5QixDQUE5Qjs7QUFTUDs7OztBQUlPLElBQU0sb0VBQThCO0FBQ3pDLFVBQVEsUUFEaUM7QUFFekMsV0FBUyxTQUZnQztBQUd6QyxhQUFXLFdBSDhCO0FBSXpDLHFCQUFtQjtBQUpzQixDQUFwQzs7QUFRUDs7OztBQUlPLElBQU0sMERBQXlCO0FBQ3BDLFFBQU0sTUFEOEI7QUFFcEMsWUFBVSxVQUYwQjtBQUdwQyxhQUFXLFdBSHlC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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ242Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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LElBQUksb0VBQUo7Ozs7OztRQ2hhUyxTLEdBQUEsUztBQS9DaEI7O0FBR0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBaUJBLElBQUksUUFBUSx3RUFBWjs7QUFFQSxTQUFTLE9BQVQsQ0FBaUIsS0FBakIsRUFBd0IsR0FBeEIsRUFBNkIsSUFBN0IsRUFBbUMsU0FBbkMsRUFBOEMsS0FBOUMsRUFBcUQ7QUFDbkQ7QUFDQSxNQUFJLEtBQUosRUFBVztBQUNULFdBQU8sS0FBUDtBQUNEO0FBQ0Q7QUFDQSxNQUFJLEdBQUosRUFBUztBQUNQLFdBQU8sUUFBUDtBQUNEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsTUFBSSxTQUFKLEVBQWU7QUFDYixXQUFPLE1BQU0sS0FBTixDQUFZLENBQVosRUFBZSxDQUFDLENBQWhCLElBQXFCLElBQXJCLEdBQTRCLE1BQU0sS0FBTixDQUFZLENBQUMsQ0FBYixFQUFnQixVQUFoQixDQUEyQixDQUEzQixFQUE4QixRQUE5QixDQUF1QyxFQUF2QyxDQUE1QixHQUF5RSxHQUFoRjtBQUNEO0FBQ0Q7QUFDQTtBQUNBLFNBQU8sT0FBTyxLQUFkO0FBQ0Q7O0FBRUQ7Ozs7O0FBS08sU0FBUyxTQUFULENBQW1CLEtBQW5CLEVBQTBCO0FBQy9CLFNBQU8sT0FBTyxLQUFQLEVBQWMsT0FBZCxDQUFzQixLQUF0QixFQUE2QixPQUE3QixDQUFQO0FBQ0QiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiZXhwb3J0IGNvbnN0IENTUyA9IFwiLmktYW1waHRtbC1zdG9yeS1iYWNrZ3JvdW5ke2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnR9YW1wLXN0b3J5W3N0YW5kYWxvbmVdW2Rlc2t0b3Bde21heC13aWR0aDpub25lIWltcG9ydGFudDttYXgtaGVpZ2h0Om5vbmUhaW1wb3J0YW50O3dpZHRoOjEwMHZ3IWltcG9ydGFudH1bZGVza3RvcF0gLmktYW1waHRtbC1zdG9yeS1sb2dve2Rpc3BsYXk6YmxvY2shaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYmFja2dyb3VuZC1jb250YWluZXJ7b3BhY2l0eTouOCFpbXBvcnRhbnQ7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDtyaWdodDowIWltcG9ydGFudDtib3R0b206MCFpbXBvcnRhbnQ7bGVmdDowIWltcG9ydGFudDtvdmVyZmxvdzpoaWRkZW4haW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYmFja2dyb3VuZC1vdmVybGF5LC5pLWFtcGh0bWwtc3RvcnktYmFja2dyb3VuZC1vdmVybGF5OmFmdGVye3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDtsZWZ0OjAhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDtoZWlnaHQ6MTAwJSFpbXBvcnRhbnQ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7ei1pbmRleDoxIWltcG9ydGFudDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMC4yKSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1iYWNrZ3JvdW5kLW92ZXJsYXk6YWZ0ZXJ7Y29udGVudDpcXFwiXFxcIiFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7b3BhY2l0eTowIWltcG9ydGFudDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMC41KSFpbXBvcnRhbnQ7LXdlYmtpdC10cmFuc2l0aW9uOm9wYWNpdHkgMC4zcyFpbXBvcnRhbnQ7dHJhbnNpdGlvbjpvcGFjaXR5IDAuM3MhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1hY3RpdmUgLmktYW1waHRtbC1zdG9yeS1iYWNrZ3JvdW5kLW92ZXJsYXk6YWZ0ZXJ7b3BhY2l0eToxIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWJhY2tncm91bmR7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3RvcDotMTUwcHghaW1wb3J0YW50O3JpZ2h0Oi0xNTBweCFpbXBvcnRhbnQ7Ym90dG9tOi0xNTBweCFpbXBvcnRhbnQ7bGVmdDotMTUwcHghaW1wb3J0YW50O29wYWNpdHk6MCFpbXBvcnRhbnQ7LXdlYmtpdC1maWx0ZXI6Ymx1cig1MHB4KSFpbXBvcnRhbnQ7ZmlsdGVyOmJsdXIoNTBweCkhaW1wb3J0YW50O2JhY2tncm91bmQtc2l6ZTpjb3ZlciFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudCFpbXBvcnRhbnQ7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCUhaW1wb3J0YW50O3dpbGwtY2hhbmdlOm9wYWNpdHksei1pbmRleCFpbXBvcnRhbnQ7ei1pbmRleDowIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWJhY2tncm91bmQuYWN0aXZle29wYWNpdHk6MSFpbXBvcnRhbnQ7ei1pbmRleDoxIWltcG9ydGFudH1bZGVza3RvcF0gYW1wLXN0b3J5LXBhZ2V7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMS4wKSB0cmFuc2xhdGVYKC0zNTAlKSB0cmFuc2xhdGVZKDAlKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnNjYWxlKDEuMCkgdHJhbnNsYXRlWCgtMzUwJSkgdHJhbnNsYXRlWSgwJSkhaW1wb3J0YW50O29wYWNpdHk6LjA1IWltcG9ydGFudDstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46bGVmdCFpbXBvcnRhbnQ7dHJhbnNmb3JtLW9yaWdpbjpsZWZ0IWltcG9ydGFudDtib3JkZXItcmFkaXVzOjE2cHghaW1wb3J0YW50fVtkZXNrdG9wXSBhbXAtc3RvcnktcGFnZVtkaXN0YW5jZT1cXFwiMFxcXCJdLFtkZXNrdG9wXSBhbXAtc3RvcnktcGFnZVtkaXN0YW5jZT1cXFwiMVxcXCJdey13ZWJraXQtdHJhbnNpdGlvbjpvcGFjaXR5IDMwMG1zIGxpbmVhciwtd2Via2l0LXRyYW5zZm9ybSAzMDBtcyBjdWJpYy1iZXppZXIoMC40LDAuMCwwLjIsMSkhaW1wb3J0YW50O3RyYW5zaXRpb246b3BhY2l0eSAzMDBtcyBsaW5lYXIsLXdlYmtpdC10cmFuc2Zvcm0gMzAwbXMgY3ViaWMtYmV6aWVyKDAuNCwwLjAsMC4yLDEpIWltcG9ydGFudDt0cmFuc2l0aW9uOm9wYWNpdHkgMzAwbXMgbGluZWFyLHRyYW5zZm9ybSAzMDBtcyBjdWJpYy1iZXppZXIoMC40LDAuMCwwLjIsMSkhaW1wb3J0YW50O3RyYW5zaXRpb246b3BhY2l0eSAzMDBtcyBsaW5lYXIsdHJhbnNmb3JtIDMwMG1zIGN1YmljLWJlemllcigwLjQsMC4wLDAuMiwxKSwtd2Via2l0LXRyYW5zZm9ybSAzMDBtcyBjdWJpYy1iZXppZXIoMC40LDAuMCwwLjIsMSkhaW1wb3J0YW50fVtkZXNrdG9wXSAuaS1hbXBodG1sLXN0b3J5LWJ1dHRvbi1jb250YWluZXJ7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDtib3R0b206MCFpbXBvcnRhbnQ7bGVmdDowIWltcG9ydGFudDtyaWdodDowIWltcG9ydGFudDt6LWluZGV4OjEwMDAwMiFpbXBvcnRhbnQ7cG9pbnRlci1ldmVudHM6bm9uZSFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayFpbXBvcnRhbnR9W2Rlc2t0b3BdIC5pLWFtcGh0bWwtc3RvcnktYnV0dG9uLWNvbnRhaW5lcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcIjtwb3NpdGlvbjphYnNvbHV0ZSFpbXBvcnRhbnQ7dG9wOjAhaW1wb3J0YW50O2JvdHRvbTowIWltcG9ydGFudDt3aWR0aDpjYWxjKDUwdncgLSAyM3ZoIC0gMzJweCkhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYmFjay1wcmV2Pi5pLWFtcGh0bWwtc3RvcnktcGFnZS1zZW50aW5lbCwuaS1hbXBodG1sLXN0b3J5LWJ1dHRvbi1tb3ZlLC5pLWFtcGh0bWwtc3RvcnktZndkLW5leHQ+LmktYW1waHRtbC1zdG9yeS1wYWdlLXNlbnRpbmVse3BvaW50ZXItZXZlbnRzOmFsbCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1idXR0b24taGlkZGVuPi5pLWFtcGh0bWwtc3RvcnktYnV0dG9uLW1vdmV7Y3Vyc29yOmRlZmF1bHQhaW1wb3J0YW50O3BvaW50ZXItZXZlbnRzOm5vbmUhaW1wb3J0YW50O29wYWNpdHk6MCFpbXBvcnRhbnR9W2Rlc2t0b3BdPi5uZXh0LWNvbnRhaW5lcjpiZWZvcmV7cmlnaHQ6MCFpbXBvcnRhbnQ7YmFja2dyb3VuZDotd2Via2l0LWxpbmVhci1ncmFkaWVudChsZWZ0LHJnYmEoMzMsMzMsMzMsMCkscmdiYSgzMywzMywzMywwLjMyKSkhaW1wb3J0YW50O2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDkwZGVnLHJnYmEoMzMsMzMsMzMsMCkgMCUscmdiYSgzMywzMywzMywwLjMyKSkhaW1wb3J0YW50fVtkZXNrdG9wXT4ucHJldi1jb250YWluZXI6YmVmb3Jle2xlZnQ6MCFpbXBvcnRhbnQ7YmFja2dyb3VuZDotd2Via2l0LWxpbmVhci1ncmFkaWVudChsZWZ0LHJnYmEoMzMsMzMsMzMsMC4zMikscmdiYSgzMywzMywzMywwKSkhaW1wb3J0YW50O2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDkwZGVnLHJnYmEoMzMsMzMsMzMsMC4zMikgMCUscmdiYSgzMywzMywzMywwKSkhaW1wb3J0YW50fVtkZXNrdG9wXT4ubmV4dC1jb250YWluZXI+LmktYW1waHRtbC1zdG9yeS1idXR0b24tbW92ZXtyaWdodDowIWltcG9ydGFudH0ucHJldi1jb250YWluZXI+LmktYW1waHRtbC1zdG9yeS1wYWdlLXNlbnRpbmVsLFtkZXNrdG9wXSBhbXAtc3RvcnktcGFnZVtwcmUtYWN0aXZlXXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgwLjkpIHRyYW5zbGF0ZVgoY2FsYygtMTUwJSAtIDY0cHgpKSB0cmFuc2xhdGVZKDAlKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnNjYWxlKDAuOSkgdHJhbnNsYXRlWChjYWxjKC0xNTAlIC0gNjRweCkpIHRyYW5zbGF0ZVkoMCUpIWltcG9ydGFudH1bZGVza3RvcF0gYW1wLXN0b3J5LXBhZ2VbYWN0aXZlXXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjApIHRyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSgwJSkhaW1wb3J0YW50O3RyYW5zZm9ybTpzY2FsZSgxLjApIHRyYW5zbGF0ZVgoLTUwJSkgdHJhbnNsYXRlWSgwJSkhaW1wb3J0YW50O29wYWNpdHk6MSFpbXBvcnRhbnR9Lm5leHQtY29udGFpbmVyPi5pLWFtcGh0bWwtc3RvcnktcGFnZS1zZW50aW5lbCxbZGVza3RvcF0gYW1wLXN0b3J5LXBhZ2VbYWN0aXZlXSthbXAtc3RvcnktcGFnZXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgwLjkpIHRyYW5zbGF0ZShjYWxjKDUwJSArIDY0cHgpKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnNjYWxlKDAuOSkgdHJhbnNsYXRlKGNhbGMoNTAlICsgNjRweCkpIWltcG9ydGFudH1bZGVza3RvcF0gYW1wLXN0b3J5LXBhZ2VbYWN0aXZlXSthbXAtc3RvcnktcGFnZX5hbXAtc3RvcnktcGFnZSxbZGlyPXJ0bF0gW2Rlc2t0b3BdIGFtcC1zdG9yeS1wYWdley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDAuOSkgdHJhbnNsYXRlWCgyNTB2dykgdHJhbnNsYXRlWSgwJSkhaW1wb3J0YW50O3RyYW5zZm9ybTpzY2FsZSgwLjkpIHRyYW5zbGF0ZVgoMjUwdncpIHRyYW5zbGF0ZVkoMCUpIWltcG9ydGFudH1bZGlyPXJ0bF0gW2Rlc2t0b3BdIGFtcC1zdG9yeS1wYWdlW3ByZS1hY3RpdmVdey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDAuOSkgdHJhbnNsYXRlWChjYWxjKDUwJSArIDY0cHgpKSB0cmFuc2xhdGVZKDAlKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnNjYWxlKDAuOSkgdHJhbnNsYXRlWChjYWxjKDUwJSArIDY0cHgpKSB0cmFuc2xhdGVZKDAlKSFpbXBvcnRhbnR9W2Rpcj1ydGxdIFtkZXNrdG9wXSBhbXAtc3RvcnktcGFnZVthY3RpdmVdey13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEuMCkgdHJhbnNsYXRlWCgtNTAlKSB0cmFuc2xhdGVZKDAlKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnNjYWxlKDEuMCkgdHJhbnNsYXRlWCgtNTAlKSB0cmFuc2xhdGVZKDAlKSFpbXBvcnRhbnQ7b3BhY2l0eToxIWltcG9ydGFudH1bZGlyPXJ0bF0gW2Rlc2t0b3BdIGFtcC1zdG9yeS1wYWdlW2FjdGl2ZV0rYW1wLXN0b3J5LXBhZ2V7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMC45KSB0cmFuc2xhdGVYKGNhbGMoLTE1MCUgLSA2NHB4KSkgdHJhbnNsYXRlWSgwJSkhaW1wb3J0YW50O3RyYW5zZm9ybTpzY2FsZSgwLjkpIHRyYW5zbGF0ZVgoY2FsYygtMTUwJSAtIDY0cHgpKSB0cmFuc2xhdGVZKDAlKSFpbXBvcnRhbnR9W2Rpcj1ydGxdIFtkZXNrdG9wXSBhbXAtc3RvcnktcGFnZVthY3RpdmVdK2FtcC1zdG9yeS1wYWdlfmFtcC1zdG9yeS1wYWdley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDAuOSkgdHJhbnNsYXRlWCgtMzUwJSkgdHJhbnNsYXRlWSgwJSkhaW1wb3J0YW50O3RyYW5zZm9ybTpzY2FsZSgwLjkpIHRyYW5zbGF0ZVgoLTM1MCUpIHRyYW5zbGF0ZVkoMCUpIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXBhZ2Utc2VudGluZWwsW2Rlc2t0b3BdPmFtcC1zdG9yeS1wYWdle2xlZnQ6NTAlIWltcG9ydGFudDtyaWdodDphdXRvIWltcG9ydGFudDttYXJnaW46YXV0byFpbXBvcnRhbnQ7bWF4LWhlaWdodDo3NXZoIWltcG9ydGFudDttYXgtd2lkdGg6NDV2aCFpbXBvcnRhbnQ7bWluLXdpZHRoOjMyMHB4IWltcG9ydGFudDttaW4taGVpZ2h0OjUzM3B4IWltcG9ydGFudH1bZGVza3RvcF0+YW1wLXN0b3J5LXBhZ2V7Ym94LXNoYWRvdzowIDAgMTVweCByZ2JhKDAsMCwwLDAuNCkhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktcGFnZS1zZW50aW5lbHt3aWR0aDoxMDB2dyFpbXBvcnRhbnQ7aGVpZ2h0OjEwMHZoIWltcG9ydGFudDttYXJnaW4tbGVmdDotMzJweCFpbXBvcnRhbnQ7Y3Vyc29yOnBvaW50ZXJ9LmktYW1waHRtbC1zdG9yeS1idXR0b24tbW92ZSwuaS1hbXBodG1sLXN0b3J5LXBhZ2Utc2VudGluZWx7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDtib3R0b206MCFpbXBvcnRhbnQ7ei1pbmRleDoxMDAwMDIhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYnV0dG9uLW1vdmV7bWFyZ2luOmF1dG8gNDBweCFpbXBvcnRhbnQ7d2lkdGg6NjBweCFpbXBvcnRhbnQ7aGVpZ2h0OjYwcHghaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6NTAlIWltcG9ydGFudDtib3JkZXI6MCFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjojZmZmIWltcG9ydGFudDtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQhaW1wb3J0YW50O2JhY2tncm91bmQtc2l6ZToxMnB4IDE3cHghaW1wb3J0YW50O2Rpc3BsYXk6LXdlYmtpdC1ib3ghaW1wb3J0YW50O2Rpc3BsYXk6LW1zLWZsZXhib3ghaW1wb3J0YW50O2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtcGFjazpjZW50ZXIhaW1wb3J0YW50Oy1tcy1mbGV4LXBhY2s6Y2VudGVyIWltcG9ydGFudDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyIWltcG9ydGFudDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXIhaW1wb3J0YW50Oy1tcy1mbGV4LWFsaWduOmNlbnRlciFpbXBvcnRhbnQ7YWxpZ24taXRlbXM6Y2VudGVyIWltcG9ydGFudDtvcGFjaXR5Oi41IWltcG9ydGFudDstd2Via2l0LXRyYW5zaXRpb246b3BhY2l0eSAxNTBtcyBsaW5lYXIsLXdlYmtpdC10cmFuc2Zvcm0gMzAwbXMgbGluZWFyIWltcG9ydGFudDt0cmFuc2l0aW9uOm9wYWNpdHkgMTUwbXMgbGluZWFyLC13ZWJraXQtdHJhbnNmb3JtIDMwMG1zIGxpbmVhciFpbXBvcnRhbnQ7dHJhbnNpdGlvbjpvcGFjaXR5IDE1MG1zIGxpbmVhcix0cmFuc2Zvcm0gMzAwbXMgbGluZWFyIWltcG9ydGFudDt0cmFuc2l0aW9uOm9wYWNpdHkgMTUwbXMgbGluZWFyLHRyYW5zZm9ybSAzMDBtcyBsaW5lYXIsLXdlYmtpdC10cmFuc2Zvcm0gMzAwbXMgbGluZWFyIWltcG9ydGFudDtjdXJzb3I6cG9pbnRlciFpbXBvcnRhbnQ7b3V0bGluZTpub25lIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LW5leHQtaG92ZXI+YW1wLXN0b3J5LXBhZ2VbYWN0aXZlXSthbXAtc3RvcnktcGFnZSwuaS1hbXBodG1sLXN0b3J5LXByZXYtaG92ZXI+YW1wLXN0b3J5LXBhZ2VbcHJlLWFjdGl2ZV17b3BhY2l0eTowLjMhaW1wb3J0YW50fS5wcmV2LWNvbnRhaW5lcj4uaS1hbXBodG1sLXN0b3J5LWJ1dHRvbi1tb3Zle2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0Nzdmcgd2lkdGg9JzE2JyBoZWlnaHQ9JzI1JyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnJTNFJTNDcGF0aCBkPSdNMTUuNyAyMmwtOS41LTkuNUwxNS43IDNsLTMtM0wuNCAxMi42IDEyLjggMjUnLyUzRSUzQy9zdmclM0VcXFwiKSFpbXBvcnRhbnQ7YmFja2dyb3VuZC1wb3NpdGlvbjo0NSUgNTAlIWltcG9ydGFudDtsZWZ0OjAhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktZndkLW5leHQ+LmktYW1waHRtbC1zdG9yeS1idXR0b24tbW92ZXtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHdpZHRoPScxNicgaGVpZ2h0PScyNScgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyUzRSUzQ3BhdGggZD0nTS4zIDNsOS41IDkuNUwuMyAyMmwzIDMgMTIuNC0xMi41TDMuMiAwJy8lM0UlM0Mvc3ZnJTNFXFxcIikhaW1wb3J0YW50O2JhY2tncm91bmQtcG9zaXRpb246NTUlIDUwJSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1md2QtcmVwbGF5Pi5pLWFtcGh0bWwtc3RvcnktYnV0dG9uLW1vdmV7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMicgaGVpZ2h0PSczMicgdmlld0JveD0nMCAwIDI0IDI0JyUzRSUzQ3BhdGggZD0nTTE3LjY1IDYuMzVBNy45NTggNy45NTggMCAwIDAgMTIgNGMtNC40MiAwLTcuOTkgMy41OC03Ljk5IDhzMy41NyA4IDcuOTkgOGMzLjczIDAgNi44NC0yLjU1IDcuNzMtNmgtMi4wOEE1Ljk5IDUuOTkgMCAwIDEgMTIgMThjLTMuMzEgMC02LTIuNjktNi02czIuNjktNiA2LTZjMS42NiAwIDMuMTQuNjkgNC4yMiAxLjc4TDEzIDExaDdWNGwtMi4zNSAyLjM1eicvJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0Mvc3ZnJTNFXFxcIikhaW1wb3J0YW50O2JhY2tncm91bmQtcG9zaXRpb246NTAlO2JhY2tncm91bmQtc2l6ZTozMnB4IDMycHghaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktZndkLW1vcmU+LmktYW1waHRtbC1zdG9yeS1idXR0b24tbW92ZXtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzI0JyBoZWlnaHQ9JzI0JyB2aWV3Qm94PScwIDAgMjQgMjQnJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0NwYXRoIGQ9J002IDEwYy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMiAyLS45IDItMi0uOS0yLTItMnptMTIgMGMtMS4xIDAtMiAuOS0yIDJzLjkgMiAyIDIgMi0uOSAyLTItLjktMi0yLTJ6bS02IDBjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yeicvJTNFJTNDL3N2ZyUzRVxcXCIpIWltcG9ydGFudDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjUwJTtiYWNrZ3JvdW5kLXNpemU6MzJweCAzMnB4IWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LW5leHQtaG92ZXI+Lm5leHQtY29udGFpbmVyPi5pLWFtcGh0bWwtc3RvcnktYnV0dG9uLW1vdmUsLmktYW1waHRtbC1zdG9yeS1wcmV2LWhvdmVyPi5wcmV2LWNvbnRhaW5lcj4uaS1hbXBodG1sLXN0b3J5LWJ1dHRvbi1tb3Zley13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDEuMSkhaW1wb3J0YW50O3RyYW5zZm9ybTpzY2FsZSgxLjEpIWltcG9ydGFudDtvcGFjaXR5OjEhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktcHJldi1ob3Zlcj4uaS1hbXBodG1sLXN0b3J5LWJ1dHRvbi1oaWRkZW4+LmktYW1waHRtbC1zdG9yeS1idXR0b24tbW92ZXtvcGFjaXR5OjAhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktbmV4dC1ob3Zlcj4uaS1hbXBodG1sLXN0b3J5LWZ3ZC1uZXh0Pi5pLWFtcGh0bWwtc3RvcnktYnV0dG9uLW1vdmV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWCg4cHgpIWltcG9ydGFudDt0cmFuc2Zvcm06dHJhbnNsYXRlWCg4cHgpIWltcG9ydGFudDtvcGFjaXR5OjEhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktcHJldi1ob3Zlcj4uaS1hbXBodG1sLXN0b3J5LWJhY2stY2xvc2UtYm9va2VuZD4uaS1hbXBodG1sLXN0b3J5LWJ1dHRvbi1tb3ZlLC5pLWFtcGh0bWwtc3RvcnktcHJldi1ob3Zlcj4uaS1hbXBodG1sLXN0b3J5LWJhY2stcHJldj4uaS1hbXBodG1sLXN0b3J5LWJ1dHRvbi1tb3Zley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoLThweCkhaW1wb3J0YW50O3RyYW5zZm9ybTp0cmFuc2xhdGVYKC04cHgpIWltcG9ydGFudDtvcGFjaXR5OjEhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktdG9we3Bvc2l0aW9uOnJlbGF0aXZlIWltcG9ydGFudDtkaXNwbGF5OmJsb2NrIWltcG9ydGFudDtoZWlnaHQ6OTZweCFpbXBvcnRhbnQ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7ei1pbmRleDoxIWltcG9ydGFudDtiYWNrZ3JvdW5kOi13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCxyZ2JhKDMzLDMzLDMzLDAuMzIpLHJnYmEoMzMsMzMsMzMsMCkpIWltcG9ydGFudDtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCgxODBkZWcscmdiYSgzMywzMywzMywwLjMyKSAwJSxyZ2JhKDMzLDMzLDMzLDApKSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1waWxse2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnQ7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDtyaWdodDo0MHB4IWltcG9ydGFudDtib3R0b206MCFpbXBvcnRhbnQ7bWFyZ2luOmF1dG8haW1wb3J0YW50O2hlaWdodDo0MHB4IWltcG9ydGFudDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXIhaW1wb3J0YW50Oy1tcy1mbGV4LWFsaWduOmNlbnRlciFpbXBvcnRhbnQ7YWxpZ24taXRlbXM6Y2VudGVyIWltcG9ydGFudH1bZGVza3RvcF0gLmktYW1waHRtbC1zdG9yeS1zaGFyZS1waWxse2Rpc3BsYXk6LXdlYmtpdC1ib3ghaW1wb3J0YW50O2Rpc3BsYXk6LW1zLWZsZXhib3ghaW1wb3J0YW50O2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1waWxsOmFmdGVye2ZvbnQtZmFtaWx5OlJvYm90byxzYW5zLXNlcmlmIWltcG9ydGFudDtjb250ZW50OlxcXCJTSEFSRVxcXCIhaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDtyaWdodDoxNXB4IWltcG9ydGFudDt0ZXh0LWFsaWduOmNlbnRlciFpbXBvcnRhbnQ7d2lkdGg6NjBweCFpbXBvcnRhbnQ7Zm9udC1zaXplOjEycHghaW1wb3J0YW50O2ZvbnQtd2VpZ2h0OjcwMCFpbXBvcnRhbnQ7bGV0dGVyLXNwYWNpbmc6LjVweCFpbXBvcnRhbnQ7bWFyZ2luOmF1dG8haW1wb3J0YW50O2NvbG9yOiNmZmYhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtcGlsbDpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O2NvbnRlbnQ6XFxcIlxcXCIhaW1wb3J0YW50O3dpZHRoOjU4cHghaW1wb3J0YW50O2hlaWdodDo0MHB4IWltcG9ydGFudDtwYWRkaW5nOjAgMTZweCFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjpoc2xhKDAsMCUsMTAwJSwwLjIpIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjUwMHB4IWltcG9ydGFudDstd2Via2l0LXRyYW5zaXRpb246d2lkdGggMzAwbXMgZWFzZS1pbi1vdXQhaW1wb3J0YW50O3RyYW5zaXRpb246d2lkdGggMzAwbXMgZWFzZS1pbi1vdXQhaW1wb3J0YW50O3JpZ2h0OjAhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtcGlsbCAuaS1hbXBodG1sLXN0b3J5LXNoYXJlLWl0ZW17b3BhY2l0eTowIWltcG9ydGFudDstd2Via2l0LXRyYW5zaXRpb246b3BhY2l0eSAzMDBtcyBsaW5lYXIhaW1wb3J0YW50O3RyYW5zaXRpb246b3BhY2l0eSAzMDBtcyBsaW5lYXIhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtcGlsbDpob3ZlciAuaS1hbXBodG1sLXN0b3J5LXNoYXJlLWl0ZW17b3BhY2l0eToxIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNoYXJlLXBpbGwgLmktYW1waHRtbC1zdG9yeS1zaGFyZS1pdGVte21hcmdpbjowIWltcG9ydGFudDt3aWR0aDo0OHB4IWltcG9ydGFudDtoZWlnaHQ6NDhweCFpbXBvcnRhbnQ7cGFkZGluZzowIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNoYXJlLXBpbGw6aG92ZXIgLmktYW1waHRtbC1zdG9yeS1zaGFyZS1pdGVtOm50aC1jaGlsZCg5KXstd2Via2l0LXRyYW5zaXRpb24tZGVsYXk6MzBtcyFpbXBvcnRhbnQ7dHJhbnNpdGlvbi1kZWxheTozMG1zIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNoYXJlLXBpbGw6aG92ZXIgLmktYW1waHRtbC1zdG9yeS1zaGFyZS1pdGVtOm50aC1jaGlsZCg4KXstd2Via2l0LXRyYW5zaXRpb24tZGVsYXk6NjBtcyFpbXBvcnRhbnQ7dHJhbnNpdGlvbi1kZWxheTo2MG1zIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNoYXJlLXBpbGw6aG92ZXIgLmktYW1waHRtbC1zdG9yeS1zaGFyZS1pdGVtOm50aC1jaGlsZCg3KXstd2Via2l0LXRyYW5zaXRpb24tZGVsYXk6OTBtcyFpbXBvcnRhbnQ7dHJhbnNpdGlvbi1kZWxheTo5MG1zIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNoYXJlLXBpbGw6aG92ZXIgLmktYW1waHRtbC1zdG9yeS1zaGFyZS1pdGVtOm50aC1jaGlsZCg2KXstd2Via2l0LXRyYW5zaXRpb24tZGVsYXk6MTIwbXMhaW1wb3J0YW50O3RyYW5zaXRpb24tZGVsYXk6MTIwbXMhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtcGlsbDpob3ZlciAuaS1hbXBodG1sLXN0b3J5LXNoYXJlLWl0ZW06bnRoLWNoaWxkKDUpey13ZWJraXQtdHJhbnNpdGlvbi1kZWxheToxNTBtcyFpbXBvcnRhbnQ7dHJhbnNpdGlvbi1kZWxheToxNTBtcyFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1waWxsOmhvdmVyIC5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtaXRlbTpudGgtY2hpbGQoNCl7LXdlYmtpdC10cmFuc2l0aW9uLWRlbGF5OjE4MG1zIWltcG9ydGFudDt0cmFuc2l0aW9uLWRlbGF5OjE4MG1zIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNoYXJlLXBpbGw6aG92ZXIgLmktYW1waHRtbC1zdG9yeS1zaGFyZS1pdGVtOm50aC1jaGlsZCgzKXstd2Via2l0LXRyYW5zaXRpb24tZGVsYXk6MjEwbXMhaW1wb3J0YW50O3RyYW5zaXRpb24tZGVsYXk6MjEwbXMhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtcGlsbDpob3ZlciAuaS1hbXBodG1sLXN0b3J5LXNoYXJlLWl0ZW06bnRoLWNoaWxkKDIpey13ZWJraXQtdHJhbnNpdGlvbi1kZWxheToyNDBtcyFpbXBvcnRhbnQ7dHJhbnNpdGlvbi1kZWxheToyNDBtcyFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1waWxsOmhvdmVyIC5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtaXRlbTpmaXJzdC1jaGlsZHstd2Via2l0LXRyYW5zaXRpb24tZGVsYXk6MjcwbXMhaW1wb3J0YW50O3RyYW5zaXRpb24tZGVsYXk6MjcwbXMhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtcGlsbCAuaS1hbXBodG1sLXN0b3J5LXNoYXJlLWxpc3R7cGFkZGluZzowIWltcG9ydGFudDttYXJnaW46MCA3MnB4IDAgMCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1waWxsOmhvdmVyOmJlZm9yZXt3aWR0aDpjYWxjKDEwMCUgLSAzMnB4KSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1waWxsIC5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtaWNvbntkaXNwbGF5Oi13ZWJraXQtYm94IWltcG9ydGFudDtkaXNwbGF5Oi1tcy1mbGV4Ym94IWltcG9ydGFudDtkaXNwbGF5OmZsZXghaW1wb3J0YW50Oy13ZWJraXQtYm94LXBhY2s6Y2VudGVyOy1tcy1mbGV4LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7LXdlYmtpdC1ib3gtYWxpZ246Y2VudGVyOy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7d2lkdGg6NDhweCFpbXBvcnRhbnQ7aGVpZ2h0OjQ4cHghaW1wb3J0YW50O3BhZGRpbmc6MH1bZGVza3RvcF0gLmktYW1waHRtbC1zdG9yeS1zaGFyZS1pY29ue2ZvbnQtc2l6ZTowcHghaW1wb3J0YW50O2JhY2tncm91bmQtc2l6ZToyNHB4IDI0cHghaW1wb3J0YW50O2JhY2tncm91bmQtcG9zaXRpb246NTAlIWltcG9ydGFudDtwYWRkaW5nOjAhaW1wb3J0YW50fVtkZXNrdG9wXSAuaS1hbXBodG1sLXN0b3J5LXNoYXJlLWljb24uYW1wLXNvY2lhbC1zaGFyZS1mYWNlYm9va3tiYWNrZ3JvdW5kLXNpemU6MjhweCAyOHB4IWltcG9ydGFudDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjUwJSFpbXBvcnRhbnR9W2Rlc2t0b3BdIC5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtaWNvbjphY3RpdmU6YmVmb3JlLFtkZXNrdG9wXSAuaS1hbXBodG1sLXN0b3J5LXNoYXJlLWljb246YmVmb3Jle2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9W2Rlc2t0b3BdIC5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtbGlzdHttYXJnaW4tcmlnaHQ6NzJweCFpbXBvcnRhbnR9W2Rlc2t0b3BdIC5pLWFtcGh0bWwtc3Rvcnktc3lzdGVtLWxheWVye2JhY2tncm91bmQ6LXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLHJnYmEoMzMsMzMsMzMsMCkscmdiYSgzMywzMywzMywwLjMyKSkhaW1wb3J0YW50O2JhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDE4MGRlZyxyZ2JhKDMzLDMzLDMzLDApIDAlLHJnYmEoMzMsMzMsMzMsMC4zMikpIWltcG9ydGFudDt0b3A6YXV0byFpbXBvcnRhbnQ7Ym90dG9tOjAhaW1wb3J0YW50O2hlaWdodDo5NnB4IWltcG9ydGFudDtkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy13ZWJraXQtYm94LWFsaWduOmNlbnRlcjstbXMtZmxleC1hbGlnbjpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyOy13ZWJraXQtYm94LXBhY2s6Y2VudGVyOy1tcy1mbGV4LXBhY2s6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9W2Rlc2t0b3BdIC5pLWFtcGh0bWwtc3RvcnktcHJvZ3Jlc3MtYmFye3Bvc2l0aW9uOnJlbGF0aXZlIWltcG9ydGFudDtoZWlnaHQ6M3B4IWltcG9ydGFudDt3aWR0aDozMy4zMzMzM3Z3IWltcG9ydGFudDttYXJnaW46MHB4IWltcG9ydGFudH1bZGVza3RvcF0gLmktYW1waHRtbC1zdG9yeS1wYWdlLXByb2dyZXNzLWJhcntib3JkZXItcmFkaXVzOjEwMHB4IWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXVpLWxlZnQsW2Rlc2t0b3BdIC5pLWFtcGh0bWwtc3Rvcnktc3lzdGVtLWxheWVyIC5pLWFtcGh0bWwtc3RvcnktdWktcmlnaHQgLmktYW1waHRtbC1zdG9yeS1tdXRlLWF1ZGlvLWNvbnRyb2wsW2Rlc2t0b3BdIC5pLWFtcGh0bWwtc3Rvcnktc3lzdGVtLWxheWVyIC5pLWFtcGh0bWwtc3RvcnktdWktcmlnaHQgLmktYW1waHRtbC1zdG9yeS11bm11dGUtYXVkaW8tY29udHJvbHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fVtkZXNrdG9wXSAuaS1hbXBodG1sLXN0b3J5LXN5c3RlbS1sYXllciAuaS1hbXBodG1sLXN0b3J5LXVpLWxlZnR7ZGlzcGxheTotd2Via2l0LWJveCFpbXBvcnRhbnQ7ZGlzcGxheTotbXMtZmxleGJveCFpbXBvcnRhbnQ7ZGlzcGxheTpmbGV4IWltcG9ydGFudDtoZWlnaHQ6NDBweCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtZmxleDoxIWltcG9ydGFudDstbXMtZmxleDoxIWltcG9ydGFudDtmbGV4OjEhaW1wb3J0YW50O21pbi13aWR0aDoyMDBweDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXI7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjstd2Via2l0LWJveC1wYWNrOmVuZDstbXMtZmxleC1wYWNrOmVuZDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmQ7bWFyZ2luLXJpZ2h0OjMycHh9W2Rlc2t0b3BdIC5pLWFtcGh0bWwtc3Rvcnktc3lzdGVtLWxheWVyIC5pLWFtcGh0bWwtc3RvcnktdWktcmlnaHR7ZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtZmxleDoxIWltcG9ydGFudDstbXMtZmxleDoxIWltcG9ydGFudDtmbGV4OjEhaW1wb3J0YW50fVtkZXNrdG9wXSAuaS1hbXBodG1sLXN0b3J5LXRvcHt6LWluZGV4OjEwMDAwMiFpbXBvcnRhbnR9W2Rlc2t0b3BdIC5pLWFtcGh0bWwtc3RvcnktYm9va2VuZCAuaS1hbXBodG1sLXN0b3J5LXNoYXJlLXdpZGdldHtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fVtkZXNrdG9wXSAuaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtaW5uZXJ7Ym94LXNpemluZzpib3JkZXItYm94IWltcG9ydGFudDttaW4taGVpZ2h0OjEwMHZoIWltcG9ydGFudDtwYWRkaW5nOjEwNHB4IDE1NnB4IDY0cHghaW1wb3J0YW50O21hcmdpbjowIWltcG9ydGFudH1bZGVza3RvcF0gLmktYW1waHRtbC1zdG9yeS1ib29rZW5kLWlubmVyOmJlZm9yZSxbZGVza3RvcF0gLmktYW1waHRtbC1zdG9yeS1ib29rZW5kLXJlcGxheXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fVtkZXNrdG9wXSAuaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtb3ZlcmZsb3d7bWFyZ2luLXRvcDowIWltcG9ydGFudDttYXJnaW4tYm90dG9tOjAhaW1wb3J0YW50fUBtZWRpYSAobWluLXdpZHRoOjk1MnB4KXtbZGVza3RvcF0gLmktYW1waHRtbC1zdG9yeS1ib29rZW5kLWFydGljbGV7bWF4LXdpZHRoOjUwJSFpbXBvcnRhbnR9fUBtZWRpYSAobWluLXdpZHRoOjEyNzJweCl7W2Rlc2t0b3BdIC5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1hcnRpY2xle21heC13aWR0aDozMyUhaW1wb3J0YW50fX0uaS1hbXBodG1sLXN0b3J5LWdyaWQtdGVtcGxhdGUtdmVydGljYWx7LW1zLWZsZXgtbGluZS1wYWNrOnN0YXJ0O2FsaWduLWNvbnRlbnQ6c3RhcnQ7Z3JpZC1nYXA6MTZweDstd2Via2l0LWJveC1wYWNrOnN0cmV0Y2g7LW1zLWZsZXgtcGFjazpzdHJldGNoO2p1c3RpZnktY29udGVudDpzdHJldGNoO2p1c3RpZnktaXRlbXM6c3RhcnQ7cGFkZGluZzozMnB4fS5pLWFtcGh0bWwtc3RvcnktZ3JpZC10ZW1wbGF0ZS12ZXJ0aWNhbD4qe3dpZHRoOjEwMCV9LmktYW1waHRtbC1zdG9yeS1ncmlkLXRlbXBsYXRlLWhvcml6b250YWx7LW1zLWZsZXgtbGluZS1wYWNrOnN0cmV0Y2g7YWxpZ24tY29udGVudDpzdHJldGNoOy13ZWJraXQtYm94LWFsaWduOnN0YXJ0Oy1tcy1mbGV4LWFsaWduOnN0YXJ0O2FsaWduLWl0ZW1zOnN0YXJ0O2dyaWQtZ2FwOjE2cHg7LXdlYmtpdC1ib3gtcGFjazpzdGFydDstbXMtZmxleC1wYWNrOnN0YXJ0O2p1c3RpZnktY29udGVudDpzdGFydDtwYWRkaW5nOjMycHh9LmktYW1waHRtbC1zdG9yeS1ncmlkLXRlbXBsYXRlLXRoaXJkc3twYWRkaW5nOjMycHh9YW1wLXN0b3J5LWdyaWQtbGF5ZXJ7cGFkZGluZzo2OHB4IDMycHggMzJweH0uaS1hbXBodG1sLXN0b3J5LWhpbnQtY29udGFpbmVyey13ZWJraXQtdHJhbnNpdGlvbi1wcm9wZXJ0eTpvcGFjaXR5IWltcG9ydGFudDt0cmFuc2l0aW9uLXByb3BlcnR5Om9wYWNpdHkhaW1wb3J0YW50Oy13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbjoyMDBtcyFpbXBvcnRhbnQ7dHJhbnNpdGlvbi1kdXJhdGlvbjoyMDBtcyFpbXBvcnRhbnQ7Y29udGFpbjpzdHJpY3QhaW1wb3J0YW50O3BvaW50ZXItZXZlbnRzOm5vbmUhaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDtsZWZ0OjAhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDtyaWdodDowIWltcG9ydGFudDtib3R0b206MCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1oaW50LWNvbnRhaW5lci5pLWFtcGh0bWwtaGlkZGVue29wYWNpdHk6MCFpbXBvcnRhbnR9W2Rlc2t0b3BdIC5pLWFtcGh0bWwtc3RvcnktaGludC1jb250YWluZXJ7ZGlzcGxheTpub25lIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWhpbnQtY29udGFpbmVyIC5pLWFtcGh0bWwtc3RvcnktbmF2aWdhdGlvbi1oZWxwLW92ZXJsYXl7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O2xlZnQ6MCFpbXBvcnRhbnQ7dG9wOjAhaW1wb3J0YW50O3JpZ2h0OjAhaW1wb3J0YW50O2JvdHRvbTowIWltcG9ydGFudDtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC43KSFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtb3JpZW50Omhvcml6b250YWwhaW1wb3J0YW50Oy13ZWJraXQtYm94LWRpcmVjdGlvbjpub3JtYWwhaW1wb3J0YW50Oy1tcy1mbGV4LWRpcmVjdGlvbjpyb3chaW1wb3J0YW50O2ZsZXgtZGlyZWN0aW9uOnJvdyFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnQ7Zm9udC1zaXplOjIwcHghaW1wb3J0YW50O3BhZGRpbmc6MTZweCAwIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LW5hdmlnYXRpb24taGVscC1zZWN0aW9ue2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LXdlYmtpdC1ib3gtYWxpZ246Y2VudGVyOy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7LXdlYmtpdC1ib3gtcGFjazpjZW50ZXI7LW1zLWZsZXgtcGFjazpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn0ucHJldi1wYWdley13ZWJraXQtYm94LWZsZXg6MSFpbXBvcnRhbnQ7LW1zLWZsZXg6MSFpbXBvcnRhbnQ7ZmxleDoxIWltcG9ydGFudH0uc2hvdy1maXJzdC1wYWdlLW92ZXJsYXkgLmktYW1waHRtbC1zdG9yeS1uYXZpZ2F0aW9uLWhlbHAtb3ZlcmxheXtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50IWltcG9ydGFudH0uc2hvdy1maXJzdC1wYWdlLW92ZXJsYXkgLnByZXYtcGFnZXtiYWNrZ3JvdW5kOi13ZWJraXQtbGluZWFyLWdyYWRpZW50KGxlZnQscmdiYSgwLDAsMCwwLjUpLHRyYW5zcGFyZW50KSFpbXBvcnRhbnQ7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoOTBkZWcscmdiYSgwLDAsMCwwLjUpLHRyYW5zcGFyZW50KSFpbXBvcnRhbnR9LnNob3ctZmlyc3QtcGFnZS1vdmVybGF5IC5uZXh0LXBhZ2V7b3BhY2l0eTowIWltcG9ydGFudH0uc2hvdy1maXJzdC1wYWdlLW92ZXJsYXkgLmktYW1waHRtbC1zdG9yeS1oaW50LXBsYWNlaG9sZGVye2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LnNob3ctZmlyc3QtcGFnZS1vdmVybGF5IC5pLWFtcGh0bWwtc3RvcnktbmF2aWdhdGlvbi1oZWxwLW92ZXJsYXl7cGFkZGluZzowcHghaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktaGludC1jb250YWluZXIgLm5leHQtcGFnZXstd2Via2l0LWJveC1mbGV4OjMhaW1wb3J0YW50Oy1tcy1mbGV4OjMhaW1wb3J0YW50O2ZsZXg6MyFpbXBvcnRhbnQ7Ym9yZGVyLWxlZnQ6MXB4IGRhc2hlZCB0cmFuc3BhcmVudCFpbXBvcnRhbnQ7Ym9yZGVyLWltYWdlLXNvdXJjZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMCcgaGVpZ2h0PSczMCclM0UlM0NwYXRoIGZpbGw9J25vbmUnIHN0cm9rZS1saW5lY2FwPSdzcXVhcmUnIHN0cm9rZS1kYXNoYXJyYXk9JzYsNicgc3Ryb2tlPSclMjNmZmYnIGQ9J00wIDB2MzAnLyUzRSUzQy9zdmclM0VcXFwiKSFpbXBvcnRhbnQ7Ym9yZGVyLWltYWdlLXNsaWNlOjMzJSAzMyUhaW1wb3J0YW50O2JvcmRlci1pbWFnZS1yZXBlYXQ6cmVwZWF0IWltcG9ydGFudDtib3JkZXItaW1hZ2Utd2lkdGg6MTRweCFpbXBvcnRhbnR9LnNob3ctZmlyc3QtcGFnZS1vdmVybGF5IC5pLWFtcGh0bWwtc3RvcnktbmF2aWdhdGlvbi1oZWxwLW92ZXJsYXksLnNob3ctbmF2aWdhdGlvbi1vdmVybGF5IC5pLWFtcGh0bWwtc3RvcnktbmF2aWdhdGlvbi1oZWxwLW92ZXJsYXl7ZGlzcGxheTotd2Via2l0LWJveCFpbXBvcnRhbnQ7ZGlzcGxheTotbXMtZmxleGJveCFpbXBvcnRhbnQ7ZGlzcGxheTpmbGV4IWltcG9ydGFudH0uc2hvdy1maXJzdC1wYWdlLW92ZXJsYXkgLnByZXYtcGFnZSAuaS1hbXBodG1sLXN0b3J5LWhpbnQtdGFwLWJ1dHRvbnt2aXNpYmlsaXR5OmhpZGRlbn0uc2hvdy1uYXZpZ2F0aW9uLW92ZXJsYXkgLnByZXYtcGFnZSAuaS1hbXBodG1sLXN0b3J5LWhpbnQtdGFwLWJ1dHRvbi1pY29uOmJlZm9yZXtjb250ZW50OlxcXCJcXFwiIWltcG9ydGFudDtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzMwJyBoZWlnaHQ9JzMwJyB2aWV3Qm94PScwIDAgMjQgMjQnJTNFJTNDcGF0aCBkPSdNMTUuNDEgNy40MUwxNCA2bC02IDYgNiA2IDEuNDEtMS40MUwxMC44MyAxMnonLyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDL3N2ZyUzRVxcXCIpIWltcG9ydGFudDt3aWR0aDozMHB4IWltcG9ydGFudDtoZWlnaHQ6MzBweCFpbXBvcnRhbnQ7ZGlzcGxheTppbmxpbmUtYmxvY2shaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktaGludC1jb250YWluZXIgLmktYW1waHRtbC1zdG9yeS1oaW50LXRhcC1idXR0b257cG9zaXRpb246cmVsYXRpdmUhaW1wb3J0YW50O3dpZHRoOjQ0cHghaW1wb3J0YW50O2hlaWdodDo0NHB4IWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWhpbnQtdGFwLWJ1dHRvbjphZnRlciwuaS1hbXBodG1sLXN0b3J5LWhpbnQtdGFwLWJ1dHRvbjpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O2NvbnRlbnQ6XFxcIlxcXCIhaW1wb3J0YW50O3dpZHRoOjQ0cHghaW1wb3J0YW50O2hlaWdodDo0NHB4IWltcG9ydGFudDtib3JkZXItcmFkaXVzOjUwJSFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjpoc2xhKDAsMCUsMTAwJSwwLjUpIWltcG9ydGFudDtsZWZ0OjAhaW1wb3J0YW50O3JpZ2h0OjAhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktaGludC10YXAtYnV0dG9uOmJlZm9yZXstd2Via2l0LWFuaW1hdGlvbjpleHBhbmRpbmdCdWJibGUgMTAwMG1zIGluZmluaXRlIGN1YmljLWJlemllcigwLjQsMCwwLjIsMSkhaW1wb3J0YW50O2FuaW1hdGlvbjpleHBhbmRpbmdCdWJibGUgMTAwMG1zIGluZmluaXRlIGN1YmljLWJlemllcigwLjQsMCwwLjIsMSkhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktaGludC10YXAtYnV0dG9uOmFmdGVye2JhY2tncm91bmQtY29sb3I6I2ZmZiFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1oaW50LWNvbnRhaW5lciAuaS1hbXBodG1sLXN0b3J5LWhpbnQtdGFwLWJ1dHRvbi1pY29ue3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDt6LWluZGV4OjEhaW1wb3J0YW50O2hlaWdodDo0NHB4IWltcG9ydGFudDt3aWR0aDo0NHB4IWltcG9ydGFudDtkaXNwbGF5Oi13ZWJraXQtYm94IWltcG9ydGFudDtkaXNwbGF5Oi1tcy1mbGV4Ym94IWltcG9ydGFudDtkaXNwbGF5OmZsZXghaW1wb3J0YW50Oy13ZWJraXQtYm94LXBhY2s6Y2VudGVyIWltcG9ydGFudDstbXMtZmxleC1wYWNrOmNlbnRlciFpbXBvcnRhbnQ7anVzdGlmeS1jb250ZW50OmNlbnRlciFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtYWxpZ246Y2VudGVyIWltcG9ydGFudDstbXMtZmxleC1hbGlnbjpjZW50ZXIhaW1wb3J0YW50O2FsaWduLWl0ZW1zOmNlbnRlciFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1oaW50LXRhcC1idXR0b24taWNvbjphZnRlciwuaS1hbXBodG1sLXN0b3J5LWhpbnQtdGFwLWJ1dHRvbi1pY29uOmJlZm9yZXt2ZXJ0aWNhbC1hbGlnbjptaWRkbGUhaW1wb3J0YW50O21hcmdpbjowIDJweCFpbXBvcnRhbnQ7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCV9Lm5leHQtcGFnZSAuaS1hbXBodG1sLXN0b3J5LWhpbnQtdGFwLWJ1dHRvbi1pY29uOmFmdGVye2NvbnRlbnQ6XFxcIlxcXCIhaW1wb3J0YW50O2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMzAnIGhlaWdodD0nMzAnIHZpZXdCb3g9JzAgMCAyNCAyNCclM0UlM0NwYXRoIGQ9J00xMCA2TDguNTkgNy40MSAxMy4xNyAxMmwtNC41OCA0LjU5TDEwIDE4bDYtNnonLyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDL3N2ZyUzRVxcXCIpIWltcG9ydGFudDt3aWR0aDoyNHB4IWltcG9ydGFudDtoZWlnaHQ6MjRweCFpbXBvcnRhbnQ7ZGlzcGxheTppbmxpbmUtYmxvY2shaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktaGludC1wbGFjZWhvbGRlcnt0b3A6NTAlIWltcG9ydGFudDtwb3NpdGlvbjphYnNvbHV0ZX0uaS1hbXBodG1sLXN0b3J5LWhpbnQtY29udGFpbmVyIC5pLWFtcGh0bWwtc3RvcnktaGludC10YXAtYnV0dG9uLXRleHR7Y29sb3I6I2ZmZiFpbXBvcnRhbnQ7Zm9udC1zaXplOjE2cHghaW1wb3J0YW50O2ZvbnQtZmFtaWx5OlJvYm90by1NZWRpdW0sc2Fucy1zZXJpZiFpbXBvcnRhbnQ7bWFyZ2luLXRvcDoyNHB4IWltcG9ydGFudDt0ZXh0LWFsaWduOmNlbnRlciFpbXBvcnRhbnR9QC13ZWJraXQta2V5ZnJhbWVzIGV4cGFuZGluZ0J1YmJsZXswJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSk7b3BhY2l0eTowfTUwJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjUpO3RyYW5zZm9ybTpzY2FsZSgxLjUpO29wYWNpdHk6MX10b3std2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSk7b3BhY2l0eTowfX1Aa2V5ZnJhbWVzIGV4cGFuZGluZ0J1YmJsZXswJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSk7b3BhY2l0eTowfTUwJXstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxLjUpO3RyYW5zZm9ybTpzY2FsZSgxLjUpO29wYWNpdHk6MX10b3std2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSk7b3BhY2l0eTowfX0uaS1hbXBodG1sLXN0b3J5LWFkLWxpbmt7YmFja2dyb3VuZC1jb2xvcjojZmZmIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjIwcHghaW1wb3J0YW50O2JvdHRvbTozMnB4IWltcG9ydGFudDtib3gtc2hhZG93OjBweCAycHggMTJweCByZ2JhKDAsMCwwLDAuMTYpIWltcG9ydGFudDtjb2xvcjojNDI4NWY0IWltcG9ydGFudDtmb250LXNpemU6MHB4IWltcG9ydGFudDtmb250LWZhbWlseTpSb2JvdG8tQm9sZCxzYW5zLXNlcmlmIWltcG9ydGFudDtoZWlnaHQ6MzZweCFpbXBvcnRhbnQ7bGVmdDo1MCUhaW1wb3J0YW50O2xldHRlci1zcGFjaW5nOjAuMnB4IWltcG9ydGFudDtsaW5lLWhlaWdodDozNnB4O21hcmdpbi1sZWZ0Oi02MHB4IWltcG9ydGFudDtvcGFjaXR5OjAhaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgwKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnNjYWxlKDApIWltcG9ydGFudDt0ZXh0LWFsaWduOmNlbnRlcjt0ZXh0LWRlY29yYXRpb246bm9uZSFpbXBvcnRhbnQ7d2lkdGg6MTIwcHghaW1wb3J0YW50fWFtcC1zdG9yeS1wYWdlW2FjdGl2ZV0gLmktYW1waHRtbC1zdG9yeS1hZC1saW5rey13ZWJraXQtYW5pbWF0aW9uLWRlbGF5OjEwMG1zIWltcG9ydGFudDthbmltYXRpb24tZGVsYXk6MTAwbXMhaW1wb3J0YW50Oy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOjMwMG1zIWltcG9ydGFudDthbmltYXRpb24tZHVyYXRpb246MzAwbXMhaW1wb3J0YW50Oy13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC40LDAuMCwwLjIsMSkhaW1wb3J0YW50O2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuNCwwLjAsMC4yLDEpIWltcG9ydGFudDstd2Via2l0LWFuaW1hdGlvbi1maWxsLW1vZGU6Zm9yd2FyZHMhaW1wb3J0YW50O2FuaW1hdGlvbi1maWxsLW1vZGU6Zm9yd2FyZHMhaW1wb3J0YW50Oy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6YWQtY3RhIWltcG9ydGFudDthbmltYXRpb24tbmFtZTphZC1jdGEhaW1wb3J0YW50fUAtd2Via2l0LWtleWZyYW1lcyBhZC1jdGF7MCV7b3BhY2l0eTowO2ZvbnQtc2l6ZTowcHg7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMCk7dHJhbnNmb3JtOnNjYWxlKDApfXRve29wYWNpdHk6MTtmb250LXNpemU6MTNweDstd2Via2l0LXRyYW5zZm9ybTpzY2FsZSgxKTt0cmFuc2Zvcm06c2NhbGUoMSl9fUBrZXlmcmFtZXMgYWQtY3RhezAle29wYWNpdHk6MDtmb250LXNpemU6MHB4Oy13ZWJraXQtdHJhbnNmb3JtOnNjYWxlKDApO3RyYW5zZm9ybTpzY2FsZSgwKX10b3tvcGFjaXR5OjE7Zm9udC1zaXplOjEzcHg7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoMSk7dHJhbnNmb3JtOnNjYWxlKDEpfX0uaS1hbXBodG1sLWFkLW92ZXJsYXktY29udGFpbmVye2hlaWdodDoyNHB4IWltcG9ydGFudDtwYWRkaW5nOjE0cHggMCAwIWltcG9ydGFudDtwb3NpdGlvbjphYnNvbHV0ZSFpbXBvcnRhbnQ7ei1pbmRleDo1IWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWFkLWF0dHJpYnV0aW9ue2NvbG9yOiNmZmYhaW1wb3J0YW50O2ZvbnQtc2l6ZToxOHB4IWltcG9ydGFudDtmb250LWZhbWlseTpSb2JvdG8tQm9sZCxzYW5zLXNlcmlmIWltcG9ydGFudDtsZXR0ZXItc3BhY2luZzowLjVweCFpbXBvcnRhbnQ7bWFyZ2luOjAgMCAwIDE2cHghaW1wb3J0YW50O3BhZGRpbmc6MCFpbXBvcnRhbnQ7dmlzaWJpbGl0eTpoaWRkZW4haW1wb3J0YW50fWFtcC1zdG9yeVthZC1zaG93aW5nXSAuaS1hbXBodG1sLXN0b3J5LWFkLWF0dHJpYnV0aW9ue3Zpc2liaWxpdHk6dmlzaWJsZSFpbXBvcnRhbnR9YW1wLXN0b3J5W2FkLXNob3dpbmddIC5pLWFtcGh0bWwtc3RvcnktcHJvZ3Jlc3MtYmFye3Zpc2liaWxpdHk6aGlkZGVuIWltcG9ydGFudH1hbXAtc3RvcnksYW1wLXN0b3J5LWN0YS1sYXllcixhbXAtc3RvcnktZ3JpZC1sYXllcixhbXAtc3RvcnktcGFnZXtjb250YWluOnN0cmljdCFpbXBvcnRhbnQ7b3ZlcmZsb3c6aGlkZGVuIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXN5c3RlbS1yZXNldCwuaS1hbXBodG1sLXN0b3J5LXN5c3RlbS1yZXNldCAqe2JvcmRlcjpub25lIWltcG9ydGFudDtjb2xvcjppbml0aWFsIWltcG9ydGFudDtmb250LWZhbWlseTpSb2JvdG8sc2Fucy1zZXJpZiFpbXBvcnRhbnQ7Zm9udC1zaXplOmluaXRpYWwhaW1wb3J0YW50O2ZvbnQtd2VpZ2h0OmluaXRpYWwhaW1wb3J0YW50O2hlaWdodDphdXRvIWltcG9ydGFudDttYXJnaW46MCFpbXBvcnRhbnQ7cGFkZGluZzowIWltcG9ydGFudDt0ZXh0LWFsaWduOmxlZnQhaW1wb3J0YW50O3dpZHRoOmF1dG8haW1wb3J0YW50fWFtcC1zdG9yeXtoZWlnaHQ6MTAwJSFpbXBvcnRhbnQ7cG9zaXRpb246cmVsYXRpdmUhaW1wb3J0YW50O3RleHQtcmVuZGVyaW5nOmdlb21ldHJpY1ByZWNpc2lvbiFpbXBvcnRhbnQ7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lIWltcG9ydGFudDstbW96LXVzZXItc2VsZWN0Om5vbmUhaW1wb3J0YW50Oy1tcy11c2VyLXNlbGVjdDpub25lIWltcG9ydGFudDt1c2VyLXNlbGVjdDpub25lIWltcG9ydGFudDt3aWR0aDoxMDAlIWltcG9ydGFudH1odG1sLmktYW1waHRtbC1zdG9yeS1zdGFuZGFsb25lLGh0bWwuaS1hbXBodG1sLXN0b3J5LXN0YW5kYWxvbmUgYm9keXtoZWlnaHQ6MTAwJSFpbXBvcnRhbnQ7bWFyZ2luOjAhaW1wb3J0YW50O3BhZGRpbmc6MCFpbXBvcnRhbnQ7d2lkdGg6MTAwJSFpbXBvcnRhbnQ7Y3Vyc29yOmF1dG8haW1wb3J0YW50Oy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjpyZ2JhKDAsMCwwLDApIWltcG9ydGFudH1odG1sLmktYW1waHRtbC1zdG9yeS1zdGFuZGFsb25lIGJvZHl7ZGlzcGxheTpncmlkIWltcG9ydGFudH1hbXAtc3Rvcnlbc3RhbmRhbG9uZV17LW1zLWZsZXgtaXRlbS1hbGlnbjpjZW50ZXIhaW1wb3J0YW50O2FsaWduLXNlbGY6Y2VudGVyIWltcG9ydGFudDtib3gtc2hhZG93OjJweCAycHggMjBweCByZ2JhKDAsMCwwLDAuNSkhaW1wb3J0YW50O2hlaWdodDoxMDAlIWltcG9ydGFudDtqdXN0aWZ5LXNlbGY6Y2VudGVyIWltcG9ydGFudH1hbXAtc3Rvcnlbc3RhbmRhbG9uZV06LXdlYmtpdC1mdWxsLXNjcmVlbntoZWlnaHQ6MTAwdmghaW1wb3J0YW50O21heC1oZWlnaHQ6bm9uZSFpbXBvcnRhbnQ7bWF4LXdpZHRoOm5vbmUhaW1wb3J0YW50fWFtcC1zdG9yeVtzdGFuZGFsb25lXTotbW96LWZ1bGwtc2NyZWVue2hlaWdodDoxMDB2aCFpbXBvcnRhbnQ7bWF4LWhlaWdodDpub25lIWltcG9ydGFudDttYXgtd2lkdGg6bm9uZSFpbXBvcnRhbnR9YW1wLXN0b3J5W3N0YW5kYWxvbmVdOi1tcy1mdWxsc2NyZWVue2hlaWdodDoxMDB2aCFpbXBvcnRhbnQ7bWF4LWhlaWdodDpub25lIWltcG9ydGFudDttYXgtd2lkdGg6bm9uZSFpbXBvcnRhbnR9YW1wLXN0b3J5W3N0YW5kYWxvbmVdOmZ1bGxzY3JlZW57aGVpZ2h0OjEwMHZoIWltcG9ydGFudDttYXgtaGVpZ2h0Om5vbmUhaW1wb3J0YW50O21heC13aWR0aDpub25lIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXN5c3RlbS1sYXllcntiYWNrZ3JvdW5kOi13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCxyZ2JhKDAsMCwwLDAuMzUpLHRyYW5zcGFyZW50KSFpbXBvcnRhbnQ7YmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoMTgwZGVnLHJnYmEoMCwwLDAsMC4zNSksdHJhbnNwYXJlbnQpIWltcG9ydGFudDtwb3NpdGlvbjphYnNvbHV0ZSFpbXBvcnRhbnQ7dG9wOjAhaW1wb3J0YW50O2xlZnQ6MCFpbXBvcnRhbnQ7cmlnaHQ6MCFpbXBvcnRhbnQ7aGVpZ2h0OjQ2cHghaW1wb3J0YW50O3otaW5kZXg6MTAwMDAwIWltcG9ydGFudDtwYWRkaW5nOjRweCAwIDAhaW1wb3J0YW50O2JveC1zaXppbmc6Ym9yZGVyLWJveCFpbXBvcnRhbnQ7LXdlYmtpdC10cmFuc2l0aW9uOm9wYWNpdHkgMC4zcyFpbXBvcnRhbnQ7dHJhbnNpdGlvbjpvcGFjaXR5IDAuM3MhaW1wb3J0YW50O3BvaW50ZXItZXZlbnRzOm5vbmUhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktdWktbGVmdCwuaS1hbXBodG1sLXN0b3J5LXVpLXJpZ2h0e3BvaW50ZXItZXZlbnRzOmF1dG8haW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1hY3RpdmU+LmktYW1waHRtbC1zdG9yeS1zeXN0ZW0tbGF5ZXJ7b3BhY2l0eTowLjMhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktdWktcmlnaHR7ZmxvYXQ6cmlnaHQhaW1wb3J0YW50O21hcmdpbjowIDhweCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1idXR0b257YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0IWltcG9ydGFudDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjUwJSFpbXBvcnRhbnQ7aGVpZ2h0OjQwcHghaW1wb3J0YW50O3dpZHRoOjQwcHghaW1wb3J0YW50O2N1cnNvcjpwb2ludGVyIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjQwcHghaW1wb3J0YW50O2JveC1zaXppbmc6Ym9yZGVyLWJveCFpbXBvcnRhbnQ7cGFkZGluZzo4cHghaW1wb3J0YW50O3Bvc2l0aW9uOnJlbGF0aXZlIWltcG9ydGFudDtiYWNrZ3JvdW5kOjUwJSBuby1yZXBlYXQhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYnV0dG9uOmFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsMC4yKSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zeXN0ZW0tbGF5ZXIgLmktYW1waHRtbC1zdG9yeS1idXR0b257ZmxvYXQ6bGVmdCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1wcm9ncmVzcy1iYXJ7Ym9yZGVyOjAhaW1wb3J0YW50O2Rpc3BsYXk6LXdlYmtpdC1ib3ghaW1wb3J0YW50O2Rpc3BsYXk6LW1zLWZsZXhib3ghaW1wb3J0YW50O2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnQ7aGVpZ2h0OjJweCFpbXBvcnRhbnQ7bGVmdDowIWltcG9ydGFudDttYXJnaW46NHB4IDAgMCFpbXBvcnRhbnQ7cGFkZGluZzowIDJweCFpbXBvcnRhbnQ7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3JpZ2h0OjAhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDt2aXNpYmlsaXR5OnZpc2libGUhaW1wb3J0YW50O3otaW5kZXg6MTAwMDAxIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXBhZ2UtcHJvZ3Jlc3MtYmFye2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsMC40KSFpbXBvcnRhbnQ7Ym9yZGVyLXJhZGl1czoxcHghaW1wb3J0YW50O2hlaWdodDoxMDAlIWltcG9ydGFudDtsaXN0LXN0eWxlLXR5cGU6bm9uZSFpbXBvcnRhbnQ7bWFyZ2luOjAgMnB4IWltcG9ydGFudDtvdmVyZmxvdzpoaWRkZW4haW1wb3J0YW50O3dpZHRoOjEwMCUhaW1wb3J0YW50Oy13ZWJraXQtbWFzay1pbWFnZTp1cmwoZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FJQUFBQ1FkMVBlQUFBQUdYUkZXSFJUYjJaMGQyRnlaUUJCWkc5aVpTQkpiV0ZuWlZKbFlXUjVjY2xsUEFBQUFBNUpSRUZVZU5waVlHQmdBQWd3QUFBRUFBR2JBK29KQUFBQUFFbEZUa1N1UW1DQykhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktcGFnZS1wcm9ncmVzcy12YWx1ZXtiYWNrZ3JvdW5kOiNmZmYhaW1wb3J0YW50O2hlaWdodDoxMDAlIWltcG9ydGFudDt3aWR0aDoxMDAlIWltcG9ydGFudDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVaKDApIHNjYWxlWCgwKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnRyYW5zbGF0ZVooMCkgc2NhbGVYKDApIWltcG9ydGFudDstd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46bGVmdCFpbXBvcnRhbnQ7dHJhbnNmb3JtLW9yaWdpbjpsZWZ0IWltcG9ydGFudDt3aWxsLWNoYW5nZTp0cmFuc2Zvcm0sdHJhbnNpdGlvbiFpbXBvcnRhbnR9W2Rpcj1ydGxdIC5pLWFtcGh0bWwtc3RvcnktcHJvZ3Jlc3MtdmFsdWV7LXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOnJpZ2h0IWltcG9ydGFudDt0cmFuc2Zvcm0tb3JpZ2luOnJpZ2h0IWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LW11dGUtYXVkaW8tY29udHJvbCwuaS1hbXBodG1sLXN0b3J5LXVubXV0ZS1hdWRpby1jb250cm9se2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LmF1ZGlvLXBsYXlpbmc6bm90KFttdXRlZF0pIC5pLWFtcGh0bWwtc3RvcnktbXV0ZS1hdWRpby1jb250cm9sLC5hdWRpby1wbGF5aW5nW211dGVkXSAuaS1hbXBodG1sLXN0b3J5LXVubXV0ZS1hdWRpby1jb250cm9se2Rpc3BsYXk6YmxvY2shaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktdWktbm8tYnV0dG9ucyAuaS1hbXBodG1sLXN0b3J5LWJ1dHRvbiwuaS1hbXBodG1sLXN0b3J5LXVpLW5vLWJ1dHRvbnMgLmktYW1waHRtbC1zdG9yeS11aS1sZWZ0LC5pLWFtcGh0bWwtc3RvcnktdWktbm8tYnV0dG9ucyAuaS1hbXBodG1sLXN0b3J5LXVpLXJpZ2h0LFtkZXNrdG9wXSAuaS1hbXBodG1sLXN0b3J5LXVpLW5vLWJ1dHRvbnMgLmktYW1waHRtbC1zdG9yeS11aS1sZWZ0LFtkZXNrdG9wXSAuaS1hbXBodG1sLXN0b3J5LXVpLW5vLWJ1dHRvbnMgLmktYW1waHRtbC1zdG9yeS11aS1yaWdodCxhbXAtc3RvcnktcGFnZSxhbXAtc3RvcnkgLmFtcC12aWRlby1lcXtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fWFtcC1zdG9yeS1wYWdle2JvdHRvbTowIWltcG9ydGFudDtoZWlnaHQ6YXV0byFpbXBvcnRhbnQ7bGVmdDowIWltcG9ydGFudDtwb3NpdGlvbjphYnNvbHV0ZSFpbXBvcnRhbnQ7cmlnaHQ6MCFpbXBvcnRhbnQ7dG9wOjAhaW1wb3J0YW50Oy13ZWJraXQtdHJhbnNpdGlvbjpub25lIWltcG9ydGFudDt0cmFuc2l0aW9uOm5vbmUhaW1wb3J0YW50fWFtcC1zdG9yeS1wYWdlLmktYW1waHRtbC1sYXlvdXQtY29udGFpbmVye2Rpc3BsYXk6YmxvY2shaW1wb3J0YW50fWFtcC1zdG9yeTpub3QoW2Rlc2t0b3BdKT5hbXAtc3RvcnktcGFnZS5pLWFtcGh0bWwtbGF5b3V0LWNvbnRhaW5lcjpub3QoW2FjdGl2ZV0pey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwMCUpIWltcG9ydGFudDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDAwJSkhaW1wb3J0YW50fWFtcC1zdG9yeS1wYWdlW2FjdGl2ZV0sYW1wLXN0b3J5Om5vdChbZGVza3RvcF0pPmFtcC1zdG9yeS1wYWdlLmktYW1waHRtbC1sYXlvdXQtY29udGFpbmVyW2Rpc3RhbmNlPVxcXCIwXFxcIl17LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCkhaW1wb3J0YW50fWFtcC1zdG9yeTpub3QoW2Rlc2t0b3BdKT5hbXAtc3RvcnktcGFnZS5pLWFtcGh0bWwtbGF5b3V0LWNvbnRhaW5lcltkaXN0YW5jZT1cXFwiMVxcXCJdey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwJSkhaW1wb3J0YW50O3RyYW5zZm9ybTp0cmFuc2xhdGVZKDEwMCUpIWltcG9ydGFudH1hbXAtc3Rvcnk6bm90KFtkZXNrdG9wXSk+YW1wLXN0b3J5LXBhZ2UuaS1hbXBodG1sLWxheW91dC1jb250YWluZXJbZGlzdGFuY2U9XFxcIjJcXFwiXXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDIwMCUpIWltcG9ydGFudDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgyMDAlKSFpbXBvcnRhbnR9YW1wLXN0b3J5Om5vdChbZGVza3RvcF0pPmFtcC1zdG9yeS1wYWdlLmktYW1waHRtbC1sYXlvdXQtY29udGFpbmVyW2Rpc3RhbmNlPVxcXCIzXFxcIl17LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgzMDAlKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMzAwJSkhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1hY3RpdmU6bm90KFtkZXNrdG9wXSk+YW1wLXN0b3J5LXBhZ2UuaS1hbXBodG1sLWxheW91dC1jb250YWluZXJbYWN0aXZlXXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHNjYWxlKDEuMikhaW1wb3J0YW50O3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHNjYWxlKDEuMikhaW1wb3J0YW50Oy13ZWJraXQtZmlsdGVyOmJsdXIoMTVweCkhaW1wb3J0YW50O2ZpbHRlcjpibHVyKDE1cHgpIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtYWN0aXZlPmFtcC1zdG9yeS1wYWdlW2FjdGl2ZV06YWZ0ZXJ7Y29udGVudDpcXFwiXFxcIiFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7dG9wOjAhaW1wb3J0YW50O2JhY2tncm91bmQ6aHNsYSgwLDAlLDQ2JSwwLjMpIWltcG9ydGFudDt6LWluZGV4OjIhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1hY3RpdmU+YW1wLXN0b3J5LXBhZ2VbYWN0aXZlXTphZnRlcixhbXAtc3RvcnktY3RhLWxheWVyLGFtcC1zdG9yeS1ncmlkLWxheWVye2xlZnQ6MCFpbXBvcnRhbnQ7Ym90dG9tOjAhaW1wb3J0YW50O3JpZ2h0OjAhaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudH1hbXAtc3RvcnktY3RhLWxheWVye2Rpc3BsYXk6YmxvY2shaW1wb3J0YW50O2hlaWdodDoyMCUhaW1wb3J0YW50O3otaW5kZXg6MyFpbXBvcnRhbnR9YW1wLXN0b3J5LWdyaWQtbGF5ZXJ7ZGlzcGxheTpncmlkIWltcG9ydGFudDt0b3A6MCFpbXBvcnRhbnQ7ei1pbmRleDoyIWltcG9ydGFudH1hbXAtc3RvcnktZ3JpZC1sYXllciAqe2JveC1zaXppbmc6Ym9yZGVyLWJveCFpbXBvcnRhbnQ7bWFyZ2luOjAhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktZ3JpZC10ZW1wbGF0ZS1maWxsPjpub3QoOmZpcnN0LWNoaWxkKSwuaS1hbXBodG1sLXN0b3J5LWxvZ297ZGlzcGxheTpub25lIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWxvZ297bWFyZ2luOjE1cHghaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktZ3JpZC10ZW1wbGF0ZS1maWxsPjpmaXJzdC1jaGlsZHtib3R0b206MCFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7aGVpZ2h0OmF1dG8haW1wb3J0YW50O2xlZnQ6MCFpbXBvcnRhbnQ7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3JpZ2h0OjAhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDt3aWR0aDphdXRvIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWdyaWQtdGVtcGxhdGUtZmlsbD5hbXAtYW5pbSBpbWcsLmktYW1waHRtbC1zdG9yeS1ncmlkLXRlbXBsYXRlLWZpbGw+YW1wLWltZyBpbWcsLmktYW1waHRtbC1zdG9yeS1ncmlkLXRlbXBsYXRlLWZpbGw+YW1wLXZpZGVvIHZpZGVvey1vLW9iamVjdC1maXQ6Y292ZXIhaW1wb3J0YW50O29iamVjdC1maXQ6Y292ZXIhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktZ3JpZC10ZW1wbGF0ZS12ZXJ0aWNhbHtncmlkLWF1dG8tZmxvdzpyb3chaW1wb3J0YW50O2dyaWQtdGVtcGxhdGUtY29sdW1uczoxMDAlIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWdyaWQtdGVtcGxhdGUtaG9yaXpvbnRhbHtncmlkLWF1dG8tZmxvdzpjb2x1bW4haW1wb3J0YW50O2dyaWQtdGVtcGxhdGUtcm93czoxMDAlIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWdyaWQtdGVtcGxhdGUtdGhpcmRze2dyaWQtdGVtcGxhdGUtcm93czozMyUgMzMlIDMzJSFpbXBvcnRhbnQ7Z3JpZC10ZW1wbGF0ZS1hcmVhczpcXFwidXBwZXItdGhpcmRcXFwiIFxcXCJtaWRkbGUtdGhpcmRcXFwiIFxcXCJsb3dlci10aGlyZFxcXCIhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZHt0ZXh0LWFsaWduOmxlZnQhaW1wb3J0YW50O2NvbG9yOiNmZmYhaW1wb3J0YW50O2JvdHRvbTowIWltcG9ydGFudDtkaXNwbGF5Oi13ZWJraXQtYm94IWltcG9ydGFudDtkaXNwbGF5Oi1tcy1mbGV4Ym94IWltcG9ydGFudDtkaXNwbGF5OmZsZXghaW1wb3J0YW50Oy13ZWJraXQtYm94LW9yaWVudDp2ZXJ0aWNhbCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtZGlyZWN0aW9uOm5vcm1hbCFpbXBvcnRhbnQ7LW1zLWZsZXgtZGlyZWN0aW9uOmNvbHVtbiFpbXBvcnRhbnQ7ZmxleC1kaXJlY3Rpb246Y29sdW1uIWltcG9ydGFudDtsZWZ0OjAhaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDtyaWdodDowIWltcG9ydGFudDt0b3A6MCFpbXBvcnRhbnQ7ei1pbmRleDoxMDAwMDEhaW1wb3J0YW50Oy13ZWJraXQtdHJhbnNpdGlvbjotd2Via2l0LXRyYW5zZm9ybSAwLjNzIGVhc2Utb3V0IWltcG9ydGFudDt0cmFuc2l0aW9uOi13ZWJraXQtdHJhbnNmb3JtIDAuM3MgZWFzZS1vdXQhaW1wb3J0YW50O3RyYW5zaXRpb246dHJhbnNmb3JtIDAuM3MgZWFzZS1vdXQhaW1wb3J0YW50O3RyYW5zaXRpb246dHJhbnNmb3JtIDAuM3MgZWFzZS1vdXQsLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBlYXNlLW91dCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1ib29rZW5kLmktYW1waHRtbC1oaWRkZW57LXdlYmtpdC10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLWluIWltcG9ydGFudDt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLWluIWltcG9ydGFudDstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDEwMHZoKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwdmgpIWltcG9ydGFudDtwb2ludGVyLWV2ZW50czpub25lIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtaGlkZGVue3BvaW50ZXItZXZlbnRzOm5vbmUhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1vdmVyZmxvd3tvdmVyZmxvdzphdXRvIWltcG9ydGFudDttYXJnaW4tdG9wOmF1dG8haW1wb3J0YW50Oy13ZWJraXQtdHJhbnNpdGlvbjpvcGFjaXR5IDAuM3MsLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBlYXNlLW91dCFpbXBvcnRhbnQ7dHJhbnNpdGlvbjpvcGFjaXR5IDAuM3MsLXdlYmtpdC10cmFuc2Zvcm0gMC4zcyBlYXNlLW91dCFpbXBvcnRhbnQ7dHJhbnNpdGlvbjpvcGFjaXR5IDAuM3MsdHJhbnNmb3JtIDAuM3MgZWFzZS1vdXQhaW1wb3J0YW50O3RyYW5zaXRpb246b3BhY2l0eSAwLjNzLHRyYW5zZm9ybSAwLjNzIGVhc2Utb3V0LC13ZWJraXQtdHJhbnNmb3JtIDAuM3MgZWFzZS1vdXQhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1oaWRkZW4gLmktYW1waHRtbC1zdG9yeS1ib29rZW5kLW92ZXJmbG93ey13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoMjAwcHgpIWltcG9ydGFudDt0cmFuc2Zvcm06dHJhbnNsYXRlWSgyMDBweCkhaW1wb3J0YW50O29wYWNpdHk6MCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1ib29rZW5kLWlubmVye21hcmdpbjo4OHB4IDAgMCFpbXBvcnRhbnQ7cG9zaXRpb246cmVsYXRpdmUhaW1wb3J0YW50O3BhZGRpbmctdG9wOjMycHghaW1wb3J0YW50O292ZXJmbG93OmhpZGRlbiFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1ib29rZW5kLWlubmVyOmJlZm9yZXtjb250ZW50OlxcXCIgXFxcIiFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7ei1pbmRleDotMSFpbXBvcnRhbnQ7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuNzUpIWltcG9ydGFudDtwb3NpdGlvbjphYnNvbHV0ZSFpbXBvcnRhbnQ7bGVmdDo4cHghaW1wb3J0YW50O3RvcDo4cHghaW1wb3J0YW50O2JvdHRvbTo4cHghaW1wb3J0YW50O3JpZ2h0OjhweCFpbXBvcnRhbnQ7Ym9yZGVyLXJhZGl1czo4cHghaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1mdWxsYmxlZWQgLmktYW1waHRtbC1zdG9yeS1ib29rZW5kLWlubmVyOmJlZm9yZSxbZGVza3RvcF0gLmktYW1waHRtbC1zdG9yeS1ib29rZW5kLWlubmVyOmJlZm9yZXtsZWZ0OjAhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDtib3R0b206MCFpbXBvcnRhbnQ7cmlnaHQ6MCFpbXBvcnRhbnQ7Ym9yZGVyLXJhZGl1czowIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtaGVhZGluZ3t0ZXh0LXRyYW5zZm9ybTp1cHBlcmNhc2UhaW1wb3J0YW50O2ZvbnQtc2l6ZToxMnB4IWltcG9ydGFudDtwYWRkaW5nLWJvdHRvbTo4cHghaW1wb3J0YW50O21hcmdpbjo0OHB4IDAgOHB4IWltcG9ydGFudDtib3JkZXItYm90dG9tOjFweCBzb2xpZCBoc2xhKDAsMCUsMTAwJSwwLjI1KSFpbXBvcnRhbnQ7Y29sb3I6aHNsYSgwLDAlLDEwMCUsMC41NCkhaW1wb3J0YW50O2ZvbnQtZmFtaWx5OlJvYm90byxzYW5zLXNlcmlmO2ZvbnQtd2VpZ2h0OjcwMCFpbXBvcnRhbnQ7bGV0dGVyLXNwYWNpbmc6MC44M3B4IWltcG9ydGFudDtsaW5lLWhlaWdodDoxIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtYXJ0aWNsZS1tZXRhe2ZvbnQtZmFtaWx5OlJvYm90byxzYW5zLXNlcmlmO2ZvbnQtd2VpZ2h0OjQwMCFpbXBvcnRhbnQ7Zm9udC1zaXplOjE0cHghaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjEhaW1wb3J0YW50O2NvbG9yOmhzbGEoMCwwJSwxMDAlLDAuNikhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1hcnRpY2xle2JveC1zaXppbmc6Ym9yZGVyLWJveCFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmUhaW1wb3J0YW50O2NvbG9yOmluaGVyaXQhaW1wb3J0YW50O292ZXJmbG93OmhpZGRlbiFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtZmxleDoxIWltcG9ydGFudDstbXMtZmxleDoxIDAgMzIwcHghaW1wb3J0YW50O2ZsZXg6MSAwIDMyMHB4IWltcG9ydGFudDttaW4td2lkdGg6MzMlIWltcG9ydGFudDttYXJnaW46MjRweCAwIWltcG9ydGFudDtwYWRkaW5nOjAgMzJweCFpbXBvcnRhbnR9QG1lZGlhIChtaW4td2lkdGg6NjQwcHgpey5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1hcnRpY2xle21heC13aWR0aDo1MCUhaW1wb3J0YW50fX1AbWVkaWEgKG1pbi13aWR0aDo5NjBweCl7LmktYW1waHRtbC1zdG9yeS1ib29rZW5kLWFydGljbGV7bWF4LXdpZHRoOjMzJSFpbXBvcnRhbnR9fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1hcnRpY2xlLWhlYWRpbmd7Zm9udC1mYW1pbHk6Um9ib3RvLHNhbnMtc2VyaWYhaW1wb3J0YW50O2ZvbnQtd2VpZ2h0OjQwMCFpbXBvcnRhbnQ7Zm9udC1zaXplOjE2cHghaW1wb3J0YW50O2NvbG9yOiNmZmYhaW1wb3J0YW50O2xpbmUtaGVpZ2h0OjEuNDttYXJnaW46MCAwIDhweCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1ib29rZW5kLWFydGljbGUtaW1hZ2UsLmktYW1waHRtbC1zdG9yeS1ib29rZW5kLXJlcGxheS1pbWFnZXt3aWR0aDoxMDBweCFpbXBvcnRhbnQ7aGVpZ2h0OjEwMHB4IWltcG9ydGFudDtib3JkZXItcmFkaXVzOjhweCFpbXBvcnRhbnQ7b3ZlcmZsb3c6aGlkZGVufS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1hcnRpY2xlLWltYWdlLmFtcC1ub3RzdXBwb3J0ZWR7ZGlzcGxheTpub25lIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtYXJ0aWNsZS1pbWFnZT5pbWd7LW8tb2JqZWN0LWZpdDpjb3ZlcjtvYmplY3QtZml0OmNvdmVyfS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1yZXBsYXktaW1hZ2V7YmFja2dyb3VuZC1wb3NpdGlvbjo1MCUhaW1wb3J0YW50O2JhY2tncm91bmQtc2l6ZTpjb3ZlciFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1ib29rZW5kLWFydGljbGUtaW1hZ2UsLmktYW1waHRtbC1zdG9yeS1ib29rZW5kLXJlcGxheS1pY29uLC5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1yZXBsYXktaW1hZ2V7ZmxvYXQ6cmlnaHQhaW1wb3J0YW50O21hcmdpbi1sZWZ0OjI0cHghaW1wb3J0YW50O3Bvc2l0aW9uOnJlbGF0aXZlIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtcmVwbGF5e3BhZGRpbmc6MTZweCAwIWltcG9ydGFudDttYXJnaW46MCAwIDI0cHghaW1wb3J0YW50O292ZXJmbG93OmhpZGRlbiFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1ib29rZW5kLXJlcGxheS1pY29ue2JhY2tncm91bmQ6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMzInIGhlaWdodD0nMzInIHZpZXdCb3g9JzAgMCAyNCAyNCcgZmlsbD0nJTIzZmZmJyUzRSUzQ3BhdGggZD0nTTE3LjY1IDYuMzVBNy45NTggNy45NTggMCAwIDAgMTIgNGMtNC40MiAwLTcuOTkgMy41OC03Ljk5IDhzMy41NyA4IDcuOTkgOGMzLjczIDAgNi44NC0yLjU1IDcuNzMtNmgtMi4wOEE1Ljk5IDUuOTkgMCAwIDEgMTIgMThjLTMuMzEgMC02LTIuNjktNi02czIuNjktNiA2LTZjMS42NiAwIDMuMTQuNjkgNC4yMiAxLjc4TDEzIDExaDdWNGwtMi4zNSAyLjM1eicvJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0Mvc3ZnJTNFXFxcIikgNTAlIG5vLXJlcGVhdCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1ib29rZW5kLXJlcGxheS1pbWFnZT4uaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtcmVwbGF5LWljb257d2lkdGg6MTAwJSFpbXBvcnRhbnQ7aGVpZ2h0OjEwMCUhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6cmdiYSgwLDAsMCwwLjMpIWltcG9ydGFudDtwb3NpdGlvbjphYnNvbHV0ZSFpbXBvcnRhbnQ7bWFyZ2luLWxlZnQ6MCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1ib29rZW5kLXJlcGxheT4uaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtcmVwbGF5LWljb257d2lkdGg6NDhweCFpbXBvcnRhbnQ7aGVpZ2h0OjQ4cHghaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6cmdiYSg2MCw2MCw2MCwwLjUpIWltcG9ydGFudDtwb3NpdGlvbjpzdGF0aWMhaW1wb3J0YW50O2JvcmRlci1yYWRpdXM6NHB4IWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtaGVhZGluZysuaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtYXJ0aWNsZS1zZXR7Ym9yZGVyLXRvcDpub25lIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtYXJ0aWNsZS1zZXR7Ym9yZGVyLXRvcDoxcHggc29saWQgaHNsYSgwLDAlLDEwMCUsMC4yNSkhaW1wb3J0YW50O21hcmdpbi1ib3R0b206MzJweCFpbXBvcnRhbnQ7ZGlzcGxheTotd2Via2l0LWJveCFpbXBvcnRhbnQ7ZGlzcGxheTotbXMtZmxleGJveCFpbXBvcnRhbnQ7ZGlzcGxheTpmbGV4IWltcG9ydGFudDstbXMtZmxleC13cmFwOndyYXAhaW1wb3J0YW50O2ZsZXgtd3JhcDp3cmFwIWltcG9ydGFudDstd2Via2l0LWJveC1wYWNrOmp1c3RpZnkhaW1wb3J0YW50Oy1tcy1mbGV4LXBhY2s6anVzdGlmeSFpbXBvcnRhbnQ7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW4haW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1oZWFkaW5nLC5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1yZXBsYXl7bWFyZ2luLWxlZnQ6MzJweCFpbXBvcnRhbnQ7bWFyZ2luLXJpZ2h0OjMycHghaW1wb3J0YW50fS5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtd2lkZ2V0e2Rpc3BsYXk6LXdlYmtpdC1ib3ghaW1wb3J0YW50O2Rpc3BsYXk6LW1zLWZsZXhib3ghaW1wb3J0YW50O2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnQ7bWFyZ2luOjE2cHggOHB4IWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNoYXJlLXdpZGdldC1zY3JvbGxhYmxle3BhZGRpbmc6MTZweCAwIWltcG9ydGFudDtoZWlnaHQ6NjZweCFpbXBvcnRhbnQ7b3ZlcmZsb3c6YXV0byFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1ib29rZW5kLWZ1bGxibGVlZCAuaS1hbXBodG1sLXN0b3J5LXNoYXJlLXdpZGdldHttYXJnaW4tbGVmdDowIWltcG9ydGFudDttYXJnaW4tcmlnaHQ6MCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS13aWRnZXQ6Oi13ZWJraXQtc2Nyb2xsYmFye3dpZHRoOjBweCFpbXBvcnRhbnQ7YmFja2dyb3VuZDp0cmFuc3BhcmVudCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1saXN0e2xpc3Qtc3R5bGU6bm9uZSFpbXBvcnRhbnQ7cGFkZGluZzowIDhweCFpbXBvcnRhbnQ7bWFyZ2luOjAhaW1wb3J0YW50O2Rpc3BsYXk6LXdlYmtpdC1ib3ghaW1wb3J0YW50O2Rpc3BsYXk6LW1zLWZsZXhib3ghaW1wb3J0YW50O2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1ib29rZW5kLWZ1bGxibGVlZCAuaS1hbXBodG1sLXN0b3J5LXNoYXJlLWxpc3R7cGFkZGluZy1sZWZ0OjE2cHghaW1wb3J0YW50O3BhZGRpbmctcmlnaHQ6MTZweCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1pdGVte3dpZHRoOjQ4cHghaW1wb3J0YW50O2hlaWdodDo2NnB4IWltcG9ydGFudDtwYWRkaW5nOjAgMTZweCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS13aWRnZXQtc2Nyb2xsYWJsZT4qPi5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtaXRlbXtkaXNwbGF5OmJsb2NrIWltcG9ydGFudDttYXJnaW46MCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1pdGVtOmVtcHR5e2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1pY29ue2JveC1zaXppbmc6Ym9yZGVyLWJveCFpbXBvcnRhbnQ7cG9zaXRpb246cmVsYXRpdmUhaW1wb3J0YW50O3dpZHRoOjQ4cHghaW1wb3J0YW50O2hlaWdodDo2NnB4IWltcG9ydGFudDtwYWRkaW5nOjU2cHggMCAwIWltcG9ydGFudDtiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50IWltcG9ydGFudDtkaXNwbGF5OmJsb2NrIWltcG9ydGFudDt0ZXh0LXRyYW5zZm9ybTpjYXBpdGFsaXplIWltcG9ydGFudDtmb250LWZhbWlseTpSb2JvdG8sc2Fucy1zZXJpZiFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnQ7Zm9udC13ZWlnaHQ6NDAwIWltcG9ydGFudDtsaW5lLWhlaWdodDoxMHB4IWltcG9ydGFudDtmb250LXNpemU6MTBweCFpbXBvcnRhbnQ7dGV4dC1hbGlnbjpjZW50ZXIhaW1wb3J0YW50O2N1cnNvcjpwb2ludGVyIWltcG9ydGFudDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjhweCA4cHghaW1wb3J0YW50O2JhY2tncm91bmQtc2l6ZTozMnB4IDMycHghaW1wb3J0YW50O2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1pY29uLmFtcC1zb2NpYWwtc2hhcmUtZmFjZWJvb2t7YmFja2dyb3VuZC1zaXplOjM4cHggMzhweCFpbXBvcnRhbnQ7YmFja2dyb3VuZC1wb3NpdGlvbjo1cHggNXB4IWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNoYXJlLWljb246YmVmb3Jle2NvbnRlbnQ6XFxcIiBcXFwiIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjRweCFpbXBvcnRhbnQ7YmFja2dyb3VuZC1jb2xvcjpoc2xhKDAsMCUsMTAwJSwwLjE1KSFpbXBvcnRhbnQ7d2lkdGg6NDhweCFpbXBvcnRhbnQ7aGVpZ2h0OjQ4cHghaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDtkaXNwbGF5OmJsb2NrIWltcG9ydGFudDt0b3A6MCFpbXBvcnRhbnQ7bGVmdDowIWltcG9ydGFudDt6LWluZGV4Oi0xIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNoYXJlLWljb246YWN0aXZlLC5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtaWNvbjpmb2N1c3tvdXRsaW5lOm5vbmUhaW1wb3J0YW50O2JveC1zaGFkb3c6bm9uZSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1pY29uOmFjdGl2ZTpiZWZvcmV7YmFja2dyb3VuZC1jb2xvcjojNzg3ODc4IWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNoYXJlLWljb25bdHlwZT1lbWFpbF17YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPSczMicgaGVpZ2h0PSczMicgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPSclMjNmZmYnJTNFJTNDcGF0aCBkPSdNMjAgNEg0Yy0xLjEgMC0xLjk5LjktMS45OSAyTDIgMThjMCAxLjEuOSAyIDIgMmgxNmMxLjEgMCAyLS45IDItMlY2YzAtMS4xLS45LTItMi0yem0wIDRsLTggNS04LTVWNmw4IDUgOC01djJ6Jy8lM0UlM0NwYXRoIGQ9J00wIDBoMjR2MjRIMHonIGZpbGw9J25vbmUnLyUzRSUzQy9zdmclM0VcXFwiKSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zaGFyZS1pY29uW3R5cGU9c3lzdGVtXXtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzI0JyBoZWlnaHQ9JzI0JyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9JyUyM2ZmZiclM0UlM0NwYXRoIGQ9J00wIDBoMjR2MjRIMHonIGZpbGw9J25vbmUnLyUzRSUzQ3BhdGggZD0nTTYgMTBjLTEuMSAwLTIgLjktMiAycy45IDIgMiAyIDItLjkgMi0yLS45LTItMi0yem0xMiAwYy0xLjEgMC0yIC45LTIgMnMuOSAyIDIgMiAyLS45IDItMi0uOS0yLTItMnptLTYgMGMtMS4xIDAtMiAuOS0yIDJzLjkgMiAyIDIgMi0uOSAyLTItLjktMi0yLTJ6Jy8lM0UlM0Mvc3ZnJTNFXFxcIikhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtaWNvbi1saW5re2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMzInIGhlaWdodD0nMzInIHZpZXdCb3g9JzAgMCAyNCAyNCcgZmlsbD0nJTIzZmZmJyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDcGF0aCBkPSdNMy45IDEyYzAtMS43MSAxLjM5LTMuMSAzLjEtMy4xaDRWN0g3Yy0yLjc2IDAtNSAyLjI0LTUgNXMyLjI0IDUgNSA1aDR2LTEuOUg3Yy0xLjcxIDAtMy4xLTEuMzktMy4xLTMuMXpNOCAxM2g4di0ySDh2MnptOS02aC00djEuOWg0YzEuNzEgMCAzLjEgMS4zOSAzLjEgMy4xcy0xLjM5IDMuMS0zLjEgMy4xaC00VjE3aDRjMi43NiAwIDUtMi4yNCA1LTVzLTIuMjQtNS01LTV6Jy8lM0UlM0Mvc3ZnJTNFXFxcIikhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1hY3RpdmUgLmktYW1waHRtbC1zdG9yeS1kZXYtbG9ncy1idXR0b24sLmktYW1waHRtbC1zdG9yeS1kZXYtbG9ncy1idXR0b25bZGF0YS1jb3VudD1cXFwiMFxcXCJde2Rpc3BsYXk6bm9uZSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1kZXYtbG9ncy1idXR0b257YmFja2dyb3VuZC1wb3NpdGlvbjo1MCUhaW1wb3J0YW50O2JhY2tncm91bmQtcmVwZWF0Om5vLXJlcGVhdCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1kZXYtbG9ncy1idXR0b246YWZ0ZXJ7YmFja2dyb3VuZC1jb2xvcjojZmZmIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjZweCFpbXBvcnRhbnQ7Ym94LXNpemluZzpib3JkZXItYm94IWltcG9ydGFudDtjb2xvcjojNDQ0O2NvbnRlbnQ6YXR0cihkYXRhLWNvdW50KSFpbXBvcnRhbnQ7ZGlzcGxheTppbmxpbmUtYmxvY2shaW1wb3J0YW50O2ZvbnQtZmFtaWx5OlJvYm90byFpbXBvcnRhbnQ7Zm9udC1zaXplOjExcHghaW1wb3J0YW50O2hlaWdodDoxMnB4IWltcG9ydGFudDtsaW5lLWhlaWdodDoxMnB4IWltcG9ydGFudDtwYWRkaW5nOjAgNnB4IWltcG9ydGFudDtwb3NpdGlvbjphYnNvbHV0ZSFpbXBvcnRhbnQ7cmlnaHQ6MCFpbXBvcnRhbnQ7dG9wOjZweCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1lcnJvci1idXR0b257YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCcgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPSclMjNEQjQ0MzcnJTNFJTNDcGF0aCBkPSdNMTIgMkM2LjQ3IDIgMiA2LjQ3IDIgMTJzNC40NyAxMCAxMCAxMCAxMC00LjQ3IDEwLTEwUzE3LjUzIDIgMTIgMnptNSAxMy41OUwxNS41OSAxNyAxMiAxMy40MSA4LjQxIDE3IDcgMTUuNTkgMTAuNTkgMTIgNyA4LjQxIDguNDEgNyAxMiAxMC41OSAxNS41OSA3IDE3IDguNDEgMTMuNDEgMTIgMTcgMTUuNTl6Jy8lM0UlM0NwYXRoIGQ9J00wIDBoMjR2MjRIMHonIGZpbGw9J25vbmUnLyUzRSUzQy9zdmclM0VcXFwiKSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS13YXJuaW5nLWJ1dHRvbntiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzI0JyBoZWlnaHQ9JzI0JyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9JyUyM0ZGQzEwNyclM0UlM0NwYXRoIGQ9J00wIDBoMjR2MjRIMHonIGZpbGw9J25vbmUnLyUzRSUzQ3BhdGggZD0nTTEgMjFoMjJMMTIgMiAxIDIxem0xMi0zaC0ydi0yaDJ2MnptMC00aC0ydi00aDJ2NHonLyUzRSUzQy9zdmclM0VcXFwiKSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zdWNjZXNzLWJ1dHRvbntiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzI0JyBoZWlnaHQ9JzI0JyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9JyUyMzBGOUQ1OCclM0UlM0NwYXRoIGQ9J00wIDBoMjR2MjRIMHonIGZpbGw9J25vbmUnLyUzRSUzQ3BhdGggZD0nTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bS0yIDE1bC01LTUgMS40MS0xLjQxTDEwIDE0LjE3bDcuNTktNy41OUwxOSA4bC05IDl6Jy8lM0UlM0Mvc3ZnJTNFXFxcIikhaW1wb3J0YW50fWFtcC1zdG9yeVtzdGFuZGFsb25lXSAuaS1hbXBodG1sLXN0b3J5LWRldmVsb3Blci1sb2d7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuODUpIWltcG9ydGFudDtib3R0b206MCFpbXBvcnRhbnQ7Ym94LXNpemluZzpib3JkZXItYm94IWltcG9ydGFudDtjb2xvcjojZmZmIWltcG9ydGFudDtkaXNwbGF5Oi13ZWJraXQtYm94IWltcG9ydGFudDtkaXNwbGF5Oi1tcy1mbGV4Ym94IWltcG9ydGFudDtkaXNwbGF5OmZsZXghaW1wb3J0YW50Oy13ZWJraXQtYm94LW9yaWVudDp2ZXJ0aWNhbCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtZGlyZWN0aW9uOm5vcm1hbCFpbXBvcnRhbnQ7LW1zLWZsZXgtZGlyZWN0aW9uOmNvbHVtbiFpbXBvcnRhbnQ7ZmxleC1kaXJlY3Rpb246Y29sdW1uIWltcG9ydGFudDtmb250LWZhbWlseTpSb2JvdG8haW1wb3J0YW50O2xlZnQ6MCFpbXBvcnRhbnQ7bWF4LWhlaWdodDo0NSUhaW1wb3J0YW50O3BhZGRpbmc6MCFpbXBvcnRhbnQ7cG9zaXRpb246Zml4ZWQhaW1wb3J0YW50O3JpZ2h0OjAhaW1wb3J0YW50O3RleHQtYWxpZ246bGVmdCFpbXBvcnRhbnQ7ei1pbmRleDoxMDAwMDIhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktZGV2ZWxvcGVyLWxvZy1oZWFkZXJ7LXdlYmtpdC1ib3gtYWxpZ246Y2VudGVyIWltcG9ydGFudDstbXMtZmxleC1hbGlnbjpjZW50ZXIhaW1wb3J0YW50O2FsaWduLWl0ZW1zOmNlbnRlciFpbXBvcnRhbnQ7YmFja2dyb3VuZDpyZ2JhKDMsMTY5LDI0NCwwLjg1KSFpbXBvcnRhbnQ7ZGlzcGxheTotd2Via2l0LWJveCFpbXBvcnRhbnQ7ZGlzcGxheTotbXMtZmxleGJveCFpbXBvcnRhbnQ7ZGlzcGxheTpmbGV4IWltcG9ydGFudDtmb250LXdlaWdodDo3MDAhaW1wb3J0YW50Oy13ZWJraXQtYm94LXBhY2s6anVzdGlmeSFpbXBvcnRhbnQ7LW1zLWZsZXgtcGFjazpqdXN0aWZ5IWltcG9ydGFudDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbiFpbXBvcnRhbnQ7cGFkZGluZzoxMnB4IDIwcHghaW1wb3J0YW50O3RleHQtYWxpZ246Y2VudGVyIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWRldmVsb3Blci1sb2ctY2xvc2UsLmktYW1waHRtbC1zdG9yeS1kZXZlbG9wZXItbG9nLWhlYWRlcnstd2Via2l0LWJveC1mbGV4OjAhaW1wb3J0YW50Oy1tcy1mbGV4LXBvc2l0aXZlOjAhaW1wb3J0YW50O2ZsZXgtZ3JvdzowIWltcG9ydGFudDstbXMtZmxleC1uZWdhdGl2ZTowIWltcG9ydGFudDtmbGV4LXNocmluazowIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWRldmVsb3Blci1sb2ctY2xvc2V7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyBmaWxsPSclMjNGRkYnIGhlaWdodD0nMjQnIHZpZXdCb3g9JzAgMCAyNCAyNCcgd2lkdGg9JzI0JyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnJTNFJTNDcGF0aCBkPSdNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeicvJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0Mvc3ZnJTNFXFxcIikhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktZGV2ZWxvcGVyLWxvZy1jb250ZXh0e2NvbG9yOiMwMDAhaW1wb3J0YW50O2ZvbnQtZmFtaWx5OlJvYm90byBNb25vIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWRldmVsb3Blci1sb2ctZW50cmllc3tsaXN0LXN0eWxlLXR5cGU6bm9uZSFpbXBvcnRhbnQ7bWFyZ2luOjAhaW1wb3J0YW50O292ZXJmbG93LXg6aGlkZGVuIWltcG9ydGFudDtvdmVyZmxvdy15OmF1dG8haW1wb3J0YW50O3BhZGRpbmc6MCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1kZXZlbG9wZXItbG9nLWVudHJ5ey13ZWJraXQtYm94LWFsaWduOmNlbnRlciFpbXBvcnRhbnQ7LW1zLWZsZXgtYWxpZ246Y2VudGVyIWltcG9ydGFudDthbGlnbi1pdGVtczpjZW50ZXIhaW1wb3J0YW50O2JvcmRlci1ib3R0b206MXB4IHNvbGlkIGhzbGEoMCwwJSwxMDAlLDAuNSkhaW1wb3J0YW50O2Rpc3BsYXk6LXdlYmtpdC1ib3ghaW1wb3J0YW50O2Rpc3BsYXk6LW1zLWZsZXhib3ghaW1wb3J0YW50O2Rpc3BsYXk6ZmxleCFpbXBvcnRhbnQ7cGFkZGluZzoyMHB4IWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWRldmVsb3Blci1sb2ctZW50cnk6YmVmb3Jle2JhY2tncm91bmQtcG9zaXRpb246NTAlIWltcG9ydGFudDtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQhaW1wb3J0YW50O2JhY2tncm91bmQtc2l6ZTpjb3ZlciFpbXBvcnRhbnQ7Y29udGVudDpcXFwiXFxcIjtkaXNwbGF5OmlubGluZS1ibG9jayFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtZmxleDowIWltcG9ydGFudDstbXMtZmxleC1wb3NpdGl2ZTowIWltcG9ydGFudDtmbGV4LWdyb3c6MCFpbXBvcnRhbnQ7LW1zLWZsZXgtbmVnYXRpdmU6MCFpbXBvcnRhbnQ7ZmxleC1zaHJpbms6MCFpbXBvcnRhbnQ7aGVpZ2h0OjMycHghaW1wb3J0YW50O21hcmdpbi1yaWdodDoyMHB4IWltcG9ydGFudDt3aWR0aDozMnB4IWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWRldmVsb3Blci1sb2ctZW50cnktZXJyb3I6YmVmb3Jle2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnIHZpZXdCb3g9JzAgMCAyNCAyNCcgZmlsbD0nJTIzREI0NDM3JyUzRSUzQ3BhdGggZD0nTTEyIDJDNi40NyAyIDIgNi40NyAyIDEyczQuNDcgMTAgMTAgMTAgMTAtNC40NyAxMC0xMFMxNy41MyAyIDEyIDJ6bTUgMTMuNTlMMTUuNTkgMTcgMTIgMTMuNDEgOC40MSAxNyA3IDE1LjU5IDEwLjU5IDEyIDcgOC40MSA4LjQxIDcgMTIgMTAuNTkgMTUuNTkgNyAxNyA4LjQxIDEzLjQxIDEyIDE3IDE1LjU5eicvJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0Mvc3ZnJTNFXFxcIikhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktZGV2ZWxvcGVyLWxvZy1lbnRyeS13YXJuaW5nOmJlZm9yZXtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzI0JyBoZWlnaHQ9JzI0JyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9JyUyM0ZGQzEwNyclM0UlM0NwYXRoIGQ9J00wIDBoMjR2MjRIMHonIGZpbGw9J25vbmUnLyUzRSUzQ3BhdGggZD0nTTEgMjFoMjJMMTIgMiAxIDIxem0xMi0zaC0ydi0yaDJ2MnptMC00aC0ydi00aDJ2NHonLyUzRSUzQy9zdmclM0VcXFwiKSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1kZXZlbG9wZXItbG9nLWVudHJ5LXN1Y2Nlc3M6YmVmb3Jle2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnIHZpZXdCb3g9JzAgMCAyNCAyNCcgZmlsbD0nJTIzMEY5RDU4JyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDcGF0aCBkPSdNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptLTIgMTVsLTUtNSAxLjQxLTEuNDFMMTAgMTQuMTdsNy41OS03LjU5TDE5IDhsLTkgOXonLyUzRSUzQy9zdmclM0VcXFwiKSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1leHBlcmltZW50LWVycm9yey13ZWJraXQtYm94LWFsaWduOmNlbnRlciFpbXBvcnRhbnQ7LW1zLWZsZXgtYWxpZ246Y2VudGVyIWltcG9ydGFudDthbGlnbi1pdGVtczpjZW50ZXIhaW1wb3J0YW50Oy1tcy1mbGV4LWxpbmUtcGFjazpjZW50ZXIhaW1wb3J0YW50O2FsaWduLWNvbnRlbnQ6Y2VudGVyIWltcG9ydGFudDtiYWNrZ3JvdW5kLWNvbG9yOiMyMjIhaW1wb3J0YW50O2JvdHRvbTowIWltcG9ydGFudDtjb2xvcjojZjBmMGYwIWltcG9ydGFudDtkaXNwbGF5Oi13ZWJraXQtYm94IWltcG9ydGFudDtkaXNwbGF5Oi1tcy1mbGV4Ym94IWltcG9ydGFudDtkaXNwbGF5OmZsZXghaW1wb3J0YW50Oy13ZWJraXQtYm94LW9yaWVudDp2ZXJ0aWNhbCFpbXBvcnRhbnQ7LXdlYmtpdC1ib3gtZGlyZWN0aW9uOm5vcm1hbCFpbXBvcnRhbnQ7LW1zLWZsZXgtZGlyZWN0aW9uOmNvbHVtbiFpbXBvcnRhbnQ7ZmxleC1kaXJlY3Rpb246Y29sdW1uIWltcG9ydGFudDtmb250LWZhbWlseTpSb2JvdG8sc2Fucy1zZXJpZiFpbXBvcnRhbnQ7Zm9udC1zaXplOjIwcHghaW1wb3J0YW50Oy13ZWJraXQtYm94LXBhY2s6Y2VudGVyIWltcG9ydGFudDstbXMtZmxleC1wYWNrOmNlbnRlciFpbXBvcnRhbnQ7anVzdGlmeS1jb250ZW50OmNlbnRlciFpbXBvcnRhbnQ7bGVmdDowIWltcG9ydGFudDtwYWRkaW5nOjMycHghaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDtyaWdodDowIWltcG9ydGFudDt0b3A6MCFpbXBvcnRhbnQ7ei1pbmRleDo5OTk5OTkhaW1wb3J0YW50O3RleHQtYWxpZ246Y2VudGVyIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWV4cGVyaW1lbnQtaWNvbntiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXQhaW1wb3J0YW50O2JhY2tncm91bmQtc2l6ZTpjb3ZlciFpbXBvcnRhbnQ7aGVpZ2h0OjY0cHghaW1wb3J0YW50O21hcmdpbjowIGF1dG8gMTZweCFpbXBvcnRhbnQ7d2lkdGg6NjRweCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1leHBlcmltZW50LWljb24tZXJyb3J7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCcgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPSclMjNGRkYnJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0NwYXRoIGQ9J00xIDIxaDIyTDEyIDIgMSAyMXptMTItM2gtMnYtMmgydjJ6bTAtNGgtMnYtNGgydjR6Jy8lM0UlM0Mvc3ZnJTNFXFxcIikhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktZXhwZXJpbWVudC1pY29uLWRvbmV7YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCcgdmlld0JveD0nMCAwIDI0IDI0JyBmaWxsPSclMjNGRkYnJTNFJTNDcGF0aCBmaWxsPSdub25lJyBkPSdNMCAwaDI0djI0SDB6Jy8lM0UlM0NwYXRoIGQ9J005IDE2LjJMNC44IDEybC0xLjQgMS40TDkgMTkgMjEgN2wtMS40LTEuNEw5IDE2LjJ6Jy8lM0UlM0Mvc3ZnJTNFXFxcIikhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktZXhwZXJpbWVudC1lcnJvciBidXR0b257YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudCFpbXBvcnRhbnQ7Ym9yZGVyOjFweCBzb2xpZCAjZjBmMGYwIWltcG9ydGFudDtib3JkZXItcmFkaXVzOjhweCFpbXBvcnRhbnQ7Y29sb3I6I2YwZjBmMCFpbXBvcnRhbnQ7Y3Vyc29yOnBvaW50ZXIhaW1wb3J0YW50O2ZvbnQtc2l6ZToyMHB4IWltcG9ydGFudDtmb250LWZhbWlseTpSb2JvdG8sc2Fucy1zZXJpZiFpbXBvcnRhbnQ7bWFyZ2luOjE2cHggMCAwIWltcG9ydGFudDtvdXRsaW5lOm5vbmUhaW1wb3J0YW50O3BhZGRpbmc6OHB4IDMycHghaW1wb3J0YW50O3RleHQtdHJhbnNmb3JtOnVwcGVyY2FzZSFpbXBvcnRhbnQ7d2lkdGg6NTAlIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWV4cGVyaW1lbnQtZXJyb3IgYnV0dG9uOmFjdGl2ZSwuaS1hbXBodG1sLXN0b3J5LWV4cGVyaW1lbnQtZXJyb3IgYnV0dG9uOmZvY3Vze2JhY2tncm91bmQtY29sb3I6I2YwZjBmMCFpbXBvcnRhbnQ7Y29sb3I6IzIyMiFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS11bm11dGUtYXVkaW8tY29udHJvbHtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzI0JyBoZWlnaHQ9JzI0JyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9JyUyM0ZGRiclM0UlM0NwYXRoIGQ9J00xNi41IDEyQTQuNSA0LjUgMCAwIDAgMTQgNy45N3YyLjIxbDIuNDUgMi40NWMuMDMtLjIuMDUtLjQxLjA1LS42M3ptMi41IDBjMCAuOTQtLjIgMS44Mi0uNTQgMi42NGwxLjUxIDEuNTFBOC43OTYgOC43OTYgMCAwIDAgMjEgMTJjMC00LjI4LTIuOTktNy44Ni03LTguNzd2Mi4wNmMyLjg5Ljg2IDUgMy41NCA1IDYuNzF6TTQuMjcgM0wzIDQuMjcgNy43MyA5SDN2Nmg0bDUgNXYtNi43M2w0LjI1IDQuMjVjLS42Ny41Mi0xLjQyLjkzLTIuMjUgMS4xOHYyLjA2YTguOTkgOC45OSAwIDAgMCAzLjY5LTEuODFMMTkuNzMgMjEgMjEgMTkuNzNsLTktOUw0LjI3IDN6TTEyIDRMOS45MSA2LjA5IDEyIDguMThWNHonLyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDL3N2ZyUzRVxcXCIpIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LW11dGUtYXVkaW8tY29udHJvbHtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgd2lkdGg9JzI0JyBoZWlnaHQ9JzI0JyB2aWV3Qm94PScwIDAgMjQgMjQnIGZpbGw9JyUyM0ZGRiclM0UlM0NwYXRoIGQ9J00zIDl2Nmg0bDUgNVY0TDcgOUgzem0xMy41IDNBNC41IDQuNSAwIDAgMCAxNCA3Ljk3djguMDVjMS40OC0uNzMgMi41LTIuMjUgMi41LTQuMDJ6TTE0IDMuMjN2Mi4wNmMyLjg5Ljg2IDUgMy41NCA1IDYuNzFzLTIuMTEgNS44NS01IDYuNzF2Mi4wNmM0LjAxLS45MSA3LTQuNDkgNy04Ljc3cy0yLjk5LTcuODYtNy04Ljc3eicvJTNFJTNDcGF0aCBkPSdNMCAwaDI0djI0SDB6JyBmaWxsPSdub25lJy8lM0UlM0Mvc3ZnJTNFXFxcIikhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3RvcnktYm9va2VuZC1jbG9zZXtvcGFjaXR5OjAuNSFpbXBvcnRhbnQ7dG9wOjhweCFpbXBvcnRhbnQ7bGVmdDo4cHghaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDtiYWNrZ3JvdW5kLWltYWdlOnVybChcXFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsJTNDc3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycgZmlsbD0nJTIzRkZGJyBoZWlnaHQ9JzI0JyB2aWV3Qm94PScwIDAgMjQgMjQnIHdpZHRoPScyNCclM0UlM0NwYXRoIGQ9J00xOSA2LjQxTDE3LjU5IDUgMTIgMTAuNTkgNi40MSA1IDUgNi40MSAxMC41OSAxMiA1IDE3LjU5IDYuNDEgMTkgMTIgMTMuNDEgMTcuNTkgMTkgMTkgMTcuNTkgMTMuNDEgMTJ6Jy8lM0UlM0NwYXRoIGQ9J00wIDBoMjR2MjRIMHonIGZpbGw9J25vbmUnLyUzRSUzQy9zdmclM0VcXFwiKSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1ib29rZW5kLWZ1bGxibGVlZCAuaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtY2xvc2V7b3BhY2l0eToxIWltcG9ydGFudDtwb3NpdGlvbjpmaXhlZCFpbXBvcnRhbnQ7ei1pbmRleDoyIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtZnVsbGJsZWVkOmJlZm9yZXtjb250ZW50OlxcXCIgXFxcIiFpbXBvcnRhbnQ7ZGlzcGxheTpibG9jayFpbXBvcnRhbnQ7YmFja2dyb3VuZC1pbWFnZTotd2Via2l0LWxpbmVhci1ncmFkaWVudChib3R0b20scmdiYSgxLDEsMSwwKSwjMDAwKSFpbXBvcnRhbnQ7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQoMGRlZyxyZ2JhKDEsMSwxLDApLCMwMDApIWltcG9ydGFudDtwb3NpdGlvbjpmaXhlZCFpbXBvcnRhbnQ7dG9wOjAhaW1wb3J0YW50O2xlZnQ6MCFpbXBvcnRhbnQ7cmlnaHQ6MCFpbXBvcnRhbnQ7aGVpZ2h0OjQwcHghaW1wb3J0YW50O3BvaW50ZXItZXZlbnRzOm5vbmUhaW1wb3J0YW50O3otaW5kZXg6MSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS10b2FzdHtwb3NpdGlvbjpmaXhlZCFpbXBvcnRhbnQ7Ym90dG9tOjAhaW1wb3J0YW50O2xlZnQ6MCFpbXBvcnRhbnQ7cmlnaHQ6MCFpbXBvcnRhbnQ7ZGlzcGxheTppbmxpbmUtYmxvY2shaW1wb3J0YW50O3BhZGRpbmc6MS4xNmVtIDEuMzNlbSFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6MS4zMyFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnQ7YmFja2dyb3VuZDojMjEyMTIxIWltcG9ydGFudDstd2Via2l0LWFuaW1hdGlvbjp0b2FzdCAyLjJzIWltcG9ydGFudDthbmltYXRpb246dG9hc3QgMi4ycyFpbXBvcnRhbnQ7LXdlYmtpdC1hbmltYXRpb24tZmlsbC1tb2RlOmJvdGghaW1wb3J0YW50O2FuaW1hdGlvbi1maWxsLW1vZGU6Ym90aCFpbXBvcnRhbnQ7Zm9udC1mYW1pbHk6Um9ib3RvLHNhbnMtc2VyaWYhaW1wb3J0YW50O2ZvbnQtd2VpZ2h0OjQwMCFpbXBvcnRhbnQ7Zm9udC1zaXplOjEycHghaW1wb3J0YW50O21heC13aWR0aDo2NDBweCFpbXBvcnRhbnQ7ei1pbmRleDoxMDAwMDIhaW1wb3J0YW50fUBtZWRpYSAobWluLXdpZHRoOjY0MHB4KXsuaS1hbXBodG1sLXN0b3J5LXRvYXN0e3JpZ2h0OmF1dG8haW1wb3J0YW50O2ZvbnQtc2l6ZToxNHB4IWltcG9ydGFudDttYXJnaW46MCBhdXRvIDEuMTZlbSAxLjE2ZW0haW1wb3J0YW50O2JvcmRlci1yYWRpdXM6NnB4fX1ALXdlYmtpdC1rZXlmcmFtZXMgdG9hc3R7MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDBweCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwcHgpO2Vhc2luZzpjdWJpYy1iZXppZXIoMC4wLDAuMCwwLjIsMSl9OCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX05MiV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKTtlYXNpbmc6Y3ViaWMtYmV6aWVyKDAuNCwwLjAsMSwxKX10b3std2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDEwMHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDBweCl9fUBrZXlmcmFtZXMgdG9hc3R7MCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDBweCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMTAwcHgpO2Vhc2luZzpjdWJpYy1iZXppZXIoMC4wLDAuMCwwLjIsMSl9OCV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKX05MiV7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgwKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgwKTtlYXNpbmc6Y3ViaWMtYmV6aWVyKDAuNCwwLjAsMSwxKX10b3std2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKDEwMHB4KTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgxMDBweCl9fS5pLWFtcGh0bWwtc3RvcnktY29weS1zdWNjZXNzZnVse2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnIHZpZXdCb3g9JzAgMCAyNCAyNCcgZmlsbD0nJTIzZmZmJyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDcGF0aCBkPSdNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptLTIgMTVsLTUtNSAxLjQxLTEuNDFMMTAgMTQuMTdsNy41OS03LjU5TDE5IDhsLTkgOXonLyUzRSUzQy9zdmclM0VcXFwiKSFpbXBvcnRhbnQ7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0IWltcG9ydGFudDtiYWNrZ3JvdW5kLXNpemU6MTZweCAxNnB4IWltcG9ydGFudDtwYWRkaW5nLWxlZnQ6MjRweCFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnQ7ZGlzcGxheTotd2Via2l0LWJveCFpbXBvcnRhbnQ7ZGlzcGxheTotbXMtZmxleGJveCFpbXBvcnRhbnQ7ZGlzcGxheTpmbGV4IWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWNvcHktdXJsey13ZWJraXQtYm94LWZsZXg6MSFpbXBvcnRhbnQ7LW1zLWZsZXg6MSFpbXBvcnRhbnQ7ZmxleDoxIWltcG9ydGFudDtjb2xvcjpoc2xhKDAsMCUsMTAwJSwwLjUpIWltcG9ydGFudDttYXJnaW4tbGVmdDo0MHB4IWltcG9ydGFudDt0ZXh0LW92ZXJmbG93OmVsbGlwc2lzIWltcG9ydGFudDtvdmVyZmxvdzpoaWRkZW4haW1wb3J0YW50O3doaXRlLXNwYWNlOm5vd3JhcCFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS11bnN1cHBvcnRlZC1icm93c2VyLW92ZXJsYXksYW1wLXN0b3J5W3N0YW5kYWxvbmVdIC5pLWFtcGh0bWwtc3Rvcnktbm8tcm90YXRpb24tb3ZlcmxheXtwb3NpdGlvbjpmaXhlZCFpbXBvcnRhbnQ7ei1pbmRleDoyMDAwMDAhaW1wb3J0YW50O2ZvbnQtZmFtaWx5OlJvYm90byxzYW5zLXNlcmlmO2ZvbnQtd2VpZ2h0OjcwMCFpbXBvcnRhbnQ7bGluZS1oZWlnaHQ6MS41O3BhZGRpbmc6MzJweDtiYWNrZ3JvdW5kLWNvbG9yOiMwMDAhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDtsZWZ0OjAhaW1wb3J0YW50O3JpZ2h0OjAhaW1wb3J0YW50O2JvdHRvbTowIWltcG9ydGFudDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXIhaW1wb3J0YW50Oy1tcy1mbGV4LWFsaWduOmNlbnRlciFpbXBvcnRhbnQ7YWxpZ24taXRlbXM6Y2VudGVyIWltcG9ydGFudDstd2Via2l0LWJveC1wYWNrOmNlbnRlciFpbXBvcnRhbnQ7LW1zLWZsZXgtcGFjazpjZW50ZXIhaW1wb3J0YW50O2p1c3RpZnktY29udGVudDpjZW50ZXIhaW1wb3J0YW50O3RleHQtYWxpZ246Y2VudGVyIWltcG9ydGFudDtkaXNwbGF5Om5vbmUhaW1wb3J0YW50fVtkZXNrdG9wXSAuaS1hbXBodG1sLXN0b3J5LW5vLXJvdGF0aW9uLW92ZXJsYXl7ZGlzcGxheTpub25lIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXVuc3VwcG9ydGVkLWJyb3dzZXItb3ZlcmxheSxhbXAtc3Rvcnlbc3RhbmRhbG9uZV0uaS1hbXBodG1sLXN0b3J5LWxhbmRzY2FwZSAuaS1hbXBodG1sLXN0b3J5LW5vLXJvdGF0aW9uLW92ZXJsYXl7ZGlzcGxheTotd2Via2l0LWJveCFpbXBvcnRhbnQ7ZGlzcGxheTotbXMtZmxleGJveCFpbXBvcnRhbnQ7ZGlzcGxheTpmbGV4IWltcG9ydGFudH1hbXAtc3RvcnkgLmktYW1waHRtbC1zdG9yeS1uby1yb3RhdGlvbi1vdmVybGF5LGFtcC1zdG9yeSAuaS1hbXBodG1sLXN0b3J5LXVuc3VwcG9ydGVkLWJyb3dzZXItb3ZlcmxheXtjb2xvcjojZmZmIWltcG9ydGFudH1hbXAtc3RvcnkgLmktYW1waHRtbC1kZXNrdG9wLXNpemUtaWNvbixhbXAtc3RvcnkgLmktYW1waHRtbC1nZWFyLWljb24sYW1wLXN0b3J5IC5pLWFtcGh0bWwtcm90YXRlLWljb257YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0IWltcG9ydGFudDtiYWNrZ3JvdW5kLXBvc2l0aW9uOjUwJSFpbXBvcnRhbnQ7Ym9yZGVyLXJhZGl1czo1MCUhaW1wb3J0YW50O2JhY2tncm91bmQtY29sb3I6I2ZmZiFpbXBvcnRhbnQ7cGFkZGluZzoxNnB4IWltcG9ydGFudDtoZWlnaHQ6MjRweCFpbXBvcnRhbnQ7d2lkdGg6MjRweCFpbXBvcnRhbnQ7bWFyZ2luOjE2cHggYXV0byFpbXBvcnRhbnR9YW1wLXN0b3J5IC5pLWFtcGh0bWwtcm90YXRlLWljb257YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCcgdmlld0JveD0nMCAwIDI0IDI0JyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDcGF0aCBkPSdNMTYuNDggMi41MmMzLjI3IDEuNTUgNS42MSA0LjcyIDUuOTcgOC40OGgxLjVDMjMuNDQgNC44NCAxOC4yOSAwIDEyIDBsLS42Ni4wMyAzLjgxIDMuODEgMS4zMy0xLjMyem0tNi4yNS0uNzdhMS40OSAxLjQ5IDAgMCAwLTIuMTIgMEwxLjc1IDguMTFhMS40OSAxLjQ5IDAgMCAwIDAgMi4xMmwxMi4wMiAxMi4wMmMuNTkuNTkgMS41NC41OSAyLjEyIDBsNi4zNi02LjM2Yy41OS0uNTkuNTktMS41NCAwLTIuMTJMMTAuMjMgMS43NXptNC42IDE5LjQ0TDIuODEgOS4xN2w2LjM2LTYuMzYgMTIuMDIgMTIuMDItNi4zNiA2LjM2em0tNy4zMS4yOUExMC40ODcgMTAuNDg3IDAgMCAxIDEuNTUgMTNILjA1Qy41NiAxOS4xNiA1LjcxIDI0IDEyIDI0bC42Ni0uMDMtMy44MS0zLjgxLTEuMzMgMS4zMnonLyUzRSUzQy9zdmclM0VcXFwiKSFpbXBvcnRhbnR9YW1wLXN0b3J5IC5pLWFtcGh0bWwtZ2Vhci1pY29ue2JhY2tncm91bmQtaW1hZ2U6dXJsKFxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwlM0NzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnIHZpZXdCb3g9JzAgMCAyMCAyMCclM0UlM0NwYXRoIGZpbGw9J25vbmUnIGQ9J00wIDBoMjB2MjBIMFYweicvJTNFJTNDcGF0aCBkPSdNMTUuOTUgMTAuNzhjLjAzLS4yNS4wNS0uNTEuMDUtLjc4cy0uMDItLjUzLS4wNi0uNzhsMS42OS0xLjMyYy4xNS0uMTIuMTktLjM0LjEtLjUxbC0xLjYtMi43N2MtLjEtLjE4LS4zMS0uMjQtLjQ5LS4xOGwtMS45OS44Yy0uNDItLjMyLS44Ni0uNTgtMS4zNS0uNzhMMTIgMi4zNGEuNC40IDAgMCAwLS40LS4zNEg4LjRjLS4yIDAtLjM2LjE0LS4zOS4zNGwtLjMgMi4xMmMtLjQ5LjItLjk0LjQ3LTEuMzUuNzhsLTEuOTktLjhjLS4xOC0uMDctLjM5IDAtLjQ5LjE4bC0xLjYgMi43N2MtLjEuMTgtLjA2LjM5LjEuNTFsMS42OSAxLjMyYy0uMDQuMjUtLjA3LjUyLS4wNy43OHMuMDIuNTMuMDYuNzhMMi4zNyAxMi4xYy0uMTUuMTItLjE5LjM0LS4xLjUxbDEuNiAyLjc3Yy4xLjE4LjMxLjI0LjQ5LjE4bDEuOTktLjhjLjQyLjMyLjg2LjU4IDEuMzUuNzhsLjMgMi4xMmMuMDQuMi4yLjM0LjQuMzRoMy4yYy4yIDAgLjM3LS4xNC4zOS0uMzRsLjMtMi4xMmMuNDktLjIuOTQtLjQ3IDEuMzUtLjc4bDEuOTkuOGMuMTguMDcuMzkgMCAuNDktLjE4bDEuNi0yLjc3Yy4xLS4xOC4wNi0uMzktLjEtLjUxbC0xLjY3LTEuMzJ6TTEwIDEzYy0xLjY1IDAtMy0xLjM1LTMtM3MxLjM1LTMgMy0zIDMgMS4zNSAzIDMtMS4zNSAzLTMgM3onLyUzRSUzQy9zdmclM0VcXFwiKSFpbXBvcnRhbnR9YW1wLXN0b3J5IC5pLWFtcGh0bWwtZGVza3RvcC1zaXplLWljb257YmFja2dyb3VuZC1pbWFnZTp1cmwoXFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCUzQ3N2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScyNCcgaGVpZ2h0PScyNCcgdmlld0JveD0nMCAwIDI0IDI0JyUzRSUzQ3BhdGggZD0nTTAgMGgyNHYyNEgweicgZmlsbD0nbm9uZScvJTNFJTNDcGF0aCBkPSdNMTIuMDEgNS41TDEwIDhoNGwtMS45OS0yLjV6TTE4IDEwdjRsMi41LTEuOTlMMTggMTB6TTYgMTBsLTIuNSAyLjAxTDYgMTR2LTR6bTggNmgtNGwyLjAxIDIuNUwxNCAxNnptNy0xM0gzYy0xLjEgMC0yIC45LTIgMnYxNGMwIDEuMS45IDIgMiAyaDE4YzEuMSAwIDItLjkgMi0yVjVjMC0xLjEtLjktMi0yLTJ6bTAgMTYuMDFIM1Y0Ljk5aDE4djE0LjAyeicvJTNFJTNDL3N2ZyUzRVxcXCIpIWltcG9ydGFudH1hbXAtc3RvcnkgLmktYW1waHRtbC1zdG9yeS1vdmVybGF5LXRleHR7Y29sb3I6I2ZmZiFpbXBvcnRhbnQ7Zm9udC13ZWlnaHQ6NzAwIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LWJ1dHRvbi1jb250YWluZXJ7ZGlzcGxheTpub25lIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNwaW5uZXJ7ZGlzcGxheTppbmxpbmUtYmxvY2shaW1wb3J0YW50O3Bvc2l0aW9uOmFic29sdXRlIWltcG9ydGFudDt0b3A6Y2FsYygxMDAlIC0gMzZweCkhaW1wb3J0YW50O3JpZ2h0OjEycHghaW1wb3J0YW50O3dpZHRoOjI0cHghaW1wb3J0YW50O2hlaWdodDoyNHB4IWltcG9ydGFudDt6LWluZGV4OjEwIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNwaW5uZXItY29udGFpbmVye3dpZHRoOjEwMCUhaW1wb3J0YW50O2hlaWdodDoxMDAlIWltcG9ydGFudDtkaXJlY3Rpb246bHRyIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNwaW5uZXJbYWN0aXZlXSAuaS1hbXBodG1sLXN0b3J5LXNwaW5uZXItY29udGFpbmVyey13ZWJraXQtYW5pbWF0aW9uOmNvbnRhaW5lci1yb3RhdGUgMTI5NG1zIGxpbmVhciBpbmZpbml0ZSFpbXBvcnRhbnQ7YW5pbWF0aW9uOmNvbnRhaW5lci1yb3RhdGUgMTI5NG1zIGxpbmVhciBpbmZpbml0ZSFpbXBvcnRhbnR9QC13ZWJraXQta2V5ZnJhbWVzIGNvbnRhaW5lci1yb3RhdGV7dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDM2MGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpfX1Aa2V5ZnJhbWVzIGNvbnRhaW5lci1yb3RhdGV7dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDM2MGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpfX0uaS1hbXBodG1sLXN0b3J5LXNwaW5uZXItbGF5ZXJ7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3dpZHRoOjEwMCUhaW1wb3J0YW50O2hlaWdodDoxMDAlIWltcG9ydGFudDtvcGFjaXR5OjAhaW1wb3J0YW50O3doaXRlLXNwYWNlOm5vd3JhcCFpbXBvcnRhbnQ7Y29sb3I6I2ZmZiFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zcGlubmVyW2FjdGl2ZV0gLmktYW1waHRtbC1zdG9yeS1zcGlubmVyLWxheWVyey13ZWJraXQtYW5pbWF0aW9uLW5hbWU6ZmlsbC11bmZpbGwtcm90YXRlIWltcG9ydGFudDthbmltYXRpb24tbmFtZTpmaWxsLXVuZmlsbC1yb3RhdGUhaW1wb3J0YW50Oy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOjQ0MDBtcyFpbXBvcnRhbnQ7YW5pbWF0aW9uLWR1cmF0aW9uOjQ0MDBtcyFpbXBvcnRhbnQ7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjQsMC4wLDAuMiwxKSFpbXBvcnRhbnQ7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC40LDAuMCwwLjIsMSkhaW1wb3J0YW50Oy13ZWJraXQtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZSFpbXBvcnRhbnQ7YW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZSFpbXBvcnRhbnQ7b3BhY2l0eToxIWltcG9ydGFudH1ALXdlYmtpdC1rZXlmcmFtZXMgZmlsbC11bmZpbGwtcm90YXRlezEyLjUley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxMzVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMTM1ZGVnKX0yNSV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDI3MGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgyNzBkZWcpfTM3LjUley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSg0MDVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoNDA1ZGVnKX01MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDU0MGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSg1NDBkZWcpfTYyLjUley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSg2NzVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoNjc1ZGVnKX03NSV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDgxMGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSg4MTBkZWcpfTg3LjUley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSg5NDVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoOTQ1ZGVnKX10b3std2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMTA4MGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgxMDgwZGVnKX19QGtleWZyYW1lcyBmaWxsLXVuZmlsbC1yb3RhdGV7MTIuNSV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDEzNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgxMzVkZWcpfTI1JXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMjcwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDI3MGRlZyl9MzcuNSV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDQwNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSg0MDVkZWcpfTUwJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoNTQwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDU0MGRlZyl9NjIuNSV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDY3NWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSg2NzVkZWcpfTc1JXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoODEwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDgxMGRlZyl9ODcuNSV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDk0NWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSg5NDVkZWcpfXRvey13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxMDgwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDEwODBkZWcpfX0uaS1hbXBodG1sLXN0b3J5LXNwaW5uZXItY2lyY2xlLWNsaXBwZXJ7ZGlzcGxheTppbmxpbmUtYmxvY2shaW1wb3J0YW50O3Bvc2l0aW9uOnJlbGF0aXZlIWltcG9ydGFudDt3aWR0aDo1MCUhaW1wb3J0YW50O2hlaWdodDoxMDAlIWltcG9ydGFudDtvdmVyZmxvdzpoaWRkZW4haW1wb3J0YW50fS5pLWFtcGh0bWwtc3Rvcnktc3Bpbm5lci1sYXllcjphZnRlcntsZWZ0OjQ1JSFpbXBvcnRhbnQ7d2lkdGg6MTAlIWltcG9ydGFudDtib3JkZXItdG9wLXN0eWxlOnNvbGlkIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNwaW5uZXItY2lyY2xlLWNsaXBwZXI6YWZ0ZXIsLmktYW1waHRtbC1zdG9yeS1zcGlubmVyLWxheWVyOmFmdGVye2NvbnRlbnQ6XFxcIlxcXCIhaW1wb3J0YW50O2JveC1zaXppbmc6Ym9yZGVyLWJveCFpbXBvcnRhbnQ7cG9zaXRpb246YWJzb2x1dGUhaW1wb3J0YW50O3RvcDowIWltcG9ydGFudDtib3JkZXItd2lkdGg6M3B4IWltcG9ydGFudDtib3JkZXItcmFkaXVzOjUwJSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zcGlubmVyLWNpcmNsZS1jbGlwcGVyOmFmdGVye2JvdHRvbTowIWltcG9ydGFudDt3aWR0aDoyMDAlIWltcG9ydGFudDtib3JkZXItc3R5bGU6c29saWQhaW1wb3J0YW50O2JvcmRlci1ib3R0b20tY29sb3I6dHJhbnNwYXJlbnQhaW1wb3J0YW50fS5pLWFtcGh0bWwtc3Rvcnktc3Bpbm5lci1jaXJjbGUtY2xpcHBlci5sZWZ0OmFmdGVye2xlZnQ6MCFpbXBvcnRhbnQ7Ym9yZGVyLXJpZ2h0LWNvbG9yOnRyYW5zcGFyZW50IWltcG9ydGFudDstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMTI5ZGVnKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnJvdGF0ZSgxMjlkZWcpIWltcG9ydGFudH0uaS1hbXBodG1sLXN0b3J5LXNwaW5uZXItY2lyY2xlLWNsaXBwZXIucmlnaHQ6YWZ0ZXJ7bGVmdDotMTAwJSFpbXBvcnRhbnQ7Ym9yZGVyLWxlZnQtY29sb3I6dHJhbnNwYXJlbnQhaW1wb3J0YW50Oy13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtMTI5ZGVnKSFpbXBvcnRhbnQ7dHJhbnNmb3JtOnJvdGF0ZSgtMTI5ZGVnKSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zcGlubmVyW2FjdGl2ZV0gLmktYW1waHRtbC1zdG9yeS1zcGlubmVyLWNpcmNsZS1jbGlwcGVyOmFmdGVyey13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOjExMDBtcyFpbXBvcnRhbnQ7YW5pbWF0aW9uLWR1cmF0aW9uOjExMDBtcyFpbXBvcnRhbnQ7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjQsMC4wLDAuMiwxKSFpbXBvcnRhbnQ7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC40LDAuMCwwLjIsMSkhaW1wb3J0YW50Oy13ZWJraXQtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZSFpbXBvcnRhbnQ7YW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZSFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zcGlubmVyW2FjdGl2ZV0gLmktYW1waHRtbC1zdG9yeS1zcGlubmVyLWNpcmNsZS1jbGlwcGVyLmxlZnQ6YWZ0ZXJ7LXdlYmtpdC1hbmltYXRpb24tbmFtZTpsZWZ0LXNwaW4haW1wb3J0YW50O2FuaW1hdGlvbi1uYW1lOmxlZnQtc3BpbiFpbXBvcnRhbnR9LmktYW1waHRtbC1zdG9yeS1zcGlubmVyW2FjdGl2ZV0gLmktYW1waHRtbC1zdG9yeS1zcGlubmVyLWNpcmNsZS1jbGlwcGVyLnJpZ2h0OmFmdGVyey13ZWJraXQtYW5pbWF0aW9uLW5hbWU6cmlnaHQtc3BpbiFpbXBvcnRhbnQ7YW5pbWF0aW9uLW5hbWU6cmlnaHQtc3BpbiFpbXBvcnRhbnR9QC13ZWJraXQta2V5ZnJhbWVzIGxlZnQtc3BpbnswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMTMwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDEzMGRlZyl9NTAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNWRlZyl9dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDEzMGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgxMzBkZWcpfX1Aa2V5ZnJhbWVzIGxlZnQtc3BpbnswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMTMwZGVnKTt0cmFuc2Zvcm06cm90YXRlKDEzMGRlZyl9NTAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgtNWRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtNWRlZyl9dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDEzMGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgxMzBkZWcpfX1ALXdlYmtpdC1rZXlmcmFtZXMgcmlnaHQtc3BpbnswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTEzMGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtMTMwZGVnKX01MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoNWRlZyl9dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC0xMzBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoLTEzMGRlZyl9fUBrZXlmcmFtZXMgcmlnaHQtc3BpbnswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTEzMGRlZyk7dHJhbnNmb3JtOnJvdGF0ZSgtMTMwZGVnKX01MCV7LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDVkZWcpO3RyYW5zZm9ybTpyb3RhdGUoNWRlZyl9dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKC0xMzBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoLTEzMGRlZyl9fVxcbi8qIyBzb3VyY2VVUkw9L2V4dGVuc2lvbnMvYW1wLXN0b3J5LzAuMS9hbXAtc3RvcnkuY3NzKi9cIjtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogQHR5cGVkZWYge1xuICogICAhV2ViTXVsdGlBbmltYXRpb25EZWZ8XG4gKiAgICFXZWJTd2l0Y2hBbmltYXRpb25EZWZ8XG4gKiAgICFXZWJDb21wQW5pbWF0aW9uRGVmfFxuICogICAhV2ViS2V5ZnJhbWVBbmltYXRpb25EZWZcbiAqIH1cbiAqL1xuZXhwb3J0IGxldCBXZWJBbmltYXRpb25EZWY7XG5cblxuLyoqXG4gKiBAbWl4ZXMgV2ViQW5pbWF0aW9uU2VsZWN0b3JEZWZcbiAqIEBtaXhlcyBXZWJBbmltYXRpb25UaW1pbmdEZWZcbiAqIEBtaXhlcyBXZWJBbmltYXRpb25WYXJzRGVmXG4gKiBAbWl4ZXMgV2ViQW5pbWF0aW9uQ29uZGl0aW9uYWxEZWZcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGFuaW1hdGlvbnM6ICFBcnJheTwhV2ViQW5pbWF0aW9uRGVmPixcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgV2ViTXVsdGlBbmltYXRpb25EZWY7XG5cblxuLyoqXG4gKiBAbWl4ZXMgV2ViQW5pbWF0aW9uU2VsZWN0b3JEZWZcbiAqIEBtaXhlcyBXZWJBbmltYXRpb25UaW1pbmdEZWZcbiAqIEBtaXhlcyBXZWJBbmltYXRpb25WYXJzRGVmXG4gKiBAbWl4ZXMgV2ViQW5pbWF0aW9uQ29uZGl0aW9uYWxEZWZcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHN3aXRjaDogIUFycmF5PCFXZWJBbmltYXRpb25EZWY+LFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBXZWJTd2l0Y2hBbmltYXRpb25EZWY7XG5cblxuLyoqXG4gKiBAbWl4ZXMgV2ViQW5pbWF0aW9uU2VsZWN0b3JEZWZcbiAqIEBtaXhlcyBXZWJBbmltYXRpb25UaW1pbmdEZWZcbiAqIEBtaXhlcyBXZWJBbmltYXRpb25WYXJzRGVmXG4gKiBAbWl4ZXMgV2ViQW5pbWF0aW9uQ29uZGl0aW9uYWxEZWZcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGFuaW1hdGlvbjogc3RyaW5nLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBXZWJDb21wQW5pbWF0aW9uRGVmO1xuXG5cbi8qKlxuICogQG1peGVzIFdlYkFuaW1hdGlvblNlbGVjdG9yRGVmXG4gKiBAbWl4ZXMgV2ViQW5pbWF0aW9uVGltaW5nRGVmXG4gKiBAbWl4ZXMgV2ViQW5pbWF0aW9uVmFyc0RlZlxuICogQG1peGVzIFdlYkFuaW1hdGlvbkNvbmRpdGlvbmFsRGVmXG4gKiBAdHlwZWRlZiB7e1xuICogICBrZXlmcmFtZXM6IChzdHJpbmd8IVdlYktleWZyYW1lc0RlZiksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IFdlYktleWZyYW1lQW5pbWF0aW9uRGVmO1xuXG5cbi8qKlxuICogQHR5cGVkZWYgeyFPYmplY3Q8c3RyaW5nLCAqPnwhQXJyYXk8IU9iamVjdDxzdHJpbmcsICo+Pn1cbiAqL1xuZXhwb3J0IGxldCBXZWJLZXlmcmFtZXNEZWY7XG5cblxuLyoqXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0FuaW1hdGlvbkVmZmVjdFRpbWluZ1Byb3BlcnRpZXNcbiAqXG4gKiBAbWl4aW5cbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGR1cmF0aW9uOiAodGltZXx1bmRlZmluZWQpLFxuICogICBkZWxheTogKHRpbWV8dW5kZWZpbmVkKSxcbiAqICAgZW5kRGVsYXk6ICh0aW1lfHVuZGVmaW5lZCksXG4gKiAgIGl0ZXJhdGlvbnM6IChudW1iZXJ8c3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIGl0ZXJhdGlvblN0YXJ0OiAobnVtYmVyfHVuZGVmaW5lZCksXG4gKiAgIGVhc2luZzogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBkaXJlY3Rpb246ICghV2ViQW5pbWF0aW9uVGltaW5nRGlyZWN0aW9ufHVuZGVmaW5lZCksXG4gKiAgIGZpbGw6ICghV2ViQW5pbWF0aW9uVGltaW5nRmlsbHx1bmRlZmluZWQpLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBXZWJBbmltYXRpb25UaW1pbmdEZWY7XG5cblxuLyoqXG4gKiBJbmRpY2F0ZXMgYW4gZXh0ZW5zaW9uIHRvIGEgdHlwZSB0aGF0IGFsbG93cyBzcGVjaWZ5aW5nIHZhcnMuIFZhcnMgYXJlXG4gKiBzcGVjaWZpZWQgYXMgcHJvcGVydGllcyB3aXRoIHRoZSBuYW1lIGluIHRoZSBmb3JtYXQgb2YgYC0tdmFyTmFtZWAuXG4gKlxuICogQG1peGluXG4gKiBAdHlwZWRlZiB7T2JqZWN0fVxuICovXG5leHBvcnQgbGV0IFdlYkFuaW1hdGlvblZhcnNEZWY7XG5cblxuLyoqXG4gKiBEZWZpbmVzIG1lZGlhIHBhcmFtZXRlcnMgZm9yIGFuIGFuaW1hdGlvbi5cbiAqXG4gKiBAbWl4aW5cbiAqIEB0eXBlZGVmIHt7XG4gKiAgIG1lZGlhOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIHN1cHBvcnRzOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IFdlYkFuaW1hdGlvbkNvbmRpdGlvbmFsRGVmO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgdGFyZ2V0OiAoIUVsZW1lbnR8dW5kZWZpbmVkKSxcbiAqICAgc2VsZWN0b3I6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqICAgc3VidGFyZ2V0czogKCFBcnJheTwhV2ViQW5pbWF0aW9uU3VidGFyZ2V0RGVmPnx1bmRlZmluZWQpLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBXZWJBbmltYXRpb25TZWxlY3RvckRlZjtcblxuXG4vKipcbiAqIEBtaXhlcyBXZWJBbmltYXRpb25UaW1pbmdEZWZcbiAqIEBtaXhlcyBXZWJBbmltYXRpb25WYXJzRGVmXG4gKiBAdHlwZWRlZiB7e1xuICogICBtYXRjaGVyOiAoZnVuY3Rpb24oIUVsZW1lbnQsIG51bWJlcik6Ym9vbGVhbnx1bmRlZmluZWQpLFxuICogICBpbmRleDogKG51bWJlcnx1bmRlZmluZWQpLFxuICogICBzZWxlY3RvcjogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogfX1cbiAqL1xuZXhwb3J0IGxldCBXZWJBbmltYXRpb25TdWJ0YXJnZXREZWY7XG5cblxuLyoqXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0FuaW1hdGlvbi9wbGF5U3RhdGVcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBXZWJBbmltYXRpb25QbGF5U3RhdGUgPSB7XG4gIElETEU6ICdpZGxlJyxcbiAgUEVORElORzogJ3BlbmRpbmcnLFxuICBSVU5OSU5HOiAncnVubmluZycsXG4gIFBBVVNFRDogJ3BhdXNlZCcsXG4gIEZJTklTSEVEOiAnZmluaXNoZWQnLFxufTtcblxuXG4vKipcbiAqIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQW5pbWF0aW9uRWZmZWN0VGltaW5nUHJvcGVydGllcy9kaXJlY3Rpb25cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBXZWJBbmltYXRpb25UaW1pbmdEaXJlY3Rpb24gPSB7XG4gIE5PUk1BTDogJ25vcm1hbCcsXG4gIFJFVkVSU0U6ICdyZXZlcnNlJyxcbiAgQUxURVJOQVRFOiAnYWx0ZXJuYXRlJyxcbiAgQUxURVJOQVRFX1JFVkVSU0U6ICdhbHRlcm5hdGUtcmV2ZXJzZScsXG59O1xuXG5cbi8qKlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9BbmltYXRpb25FZmZlY3RUaW1pbmdQcm9wZXJ0aWVzL2ZpbGxcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBXZWJBbmltYXRpb25UaW1pbmdGaWxsID0ge1xuICBOT05FOiAnbm9uZScsXG4gIEZPUldBUkRTOiAnZm9yd2FyZHMnLFxuICBCQUNLV0FSRFM6ICdiYWNrd2FyZHMnLFxuICBCT1RIOiAnYm90aCcsXG4gIEFVVE86ICdhdXRvJyxcbn07XG5cblxuLyoqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fSAqL1xuY29uc3QgV0hJVEVMSVNURURfUlBPUFMgPSB7XG4gICdvcGFjaXR5JzogdHJ1ZSxcbiAgJ3RyYW5zZm9ybSc6IHRydWUsXG4gICd2aXNpYmlsaXR5JzogdHJ1ZSxcbiAgJ29mZnNldC1kaXN0YW5jZSc6IHRydWUsXG4gICdvZmZzZXREaXN0YW5jZSc6IHRydWUsXG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1doaXRlbGlzdGVkUHJvcChwcm9wKSB7XG4gIHJldHVybiBXSElURUxJU1RFRF9SUE9QU1twcm9wXSB8fCBmYWxzZTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBBbXBTdG9yeVN0YXRlU2VydmljZSxcbiAgU3RhdGVUeXBlLFxufSBmcm9tICcuL2FtcC1zdG9yeS1zdGF0ZS1zZXJ2aWNlJztcbmltcG9ydCB7Q29tbW9uU2lnbmFsc30gZnJvbSAnLi4vLi4vLi4vc3JjL2NvbW1vbi1zaWduYWxzJztcbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge1N0YXRlQ2hhbmdlVHlwZX0gZnJvbSAnLi9uYXZpZ2F0aW9uLXN0YXRlJztcbmltcG9ydCB7Y3JlYXRlRWxlbWVudFdpdGhBdHRyaWJ1dGVzfSBmcm9tICcuLi8uLi8uLi9zcmMvZG9tJztcbmltcG9ydCB7ZGV2LCB1c2VyfSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7ZGljdCwgaGFzT3duLCBtYXB9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtpc0pzb25TY3JpcHRUYWd9IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuaW1wb3J0IHtwYXJzZUVtYmVkTW9kZX0gZnJvbSAnLi9lbWJlZC1tb2RlJztcbmltcG9ydCB7cGFyc2VKc29ufSBmcm9tICcuLi8uLi8uLi9zcmMvanNvbic7XG5cblxuLyoqIEBjb25zdCAqL1xuY29uc3QgTUlOX0lOVEVSVkFMID0gMztcblxuLyoqIEBjb25zdCAqL1xuY29uc3QgVEFHID0gJ2FtcC1zdG9yeS1hdXRvLWFkcyc7XG5cbi8qKiBAY29uc3QgKi9cbmNvbnN0IEFEX1RBRyA9ICdhbXAtYWQnO1xuXG4vKiogQGNvbnN0ICovXG5jb25zdCBNVVNUQUNIRV9UQUcgPSAnYW1wLW11c3RhY2hlJztcblxuLyoqIEBjb25zdCAqL1xuY29uc3QgVElNRU9VVF9MSU1JVCA9IDEwMDAwOyAvLyAxMCBzZWNvbmRzXG5cbi8qKiBAY29uc3QgKi9cbmNvbnN0IERBVEFfQVRUUiA9IHtcbiAgQ1RBX1RZUEU6ICdkYXRhLXZhcnMtY3RhdHlwZScsXG4gIENUQV9VUkw6ICdkYXRhLXZhcnMtY3RhdXJsJyxcbn07XG5cbi8qKiBAY29uc3QgKi9cbmNvbnN0IENUQV9UWVBFUyA9IHtcbiAgRVhQTE9SRTogJ0V4cGxvcmUgTm93JyxcbiAgU0hPUDogJ1Nob3AgTm93JyxcbiAgUkVBRDogJ1JlYWQgTm93Jyxcbn07XG5cbi8qKiBAY29uc3QgKi9cbmNvbnN0IEFEX1NUQVRFID0ge1xuICBQRU5ESU5HOiAwLFxuICBQTEFDRUQ6IDEsXG4gIEZBSUxFRDogMixcbn07XG5cbi8qKiBAY29uc3QgKi9cbmNvbnN0IEFMTE9XRURfQURfVFlQRVMgPSBtYXAoe1xuICAnY3VzdG9tJzogdHJ1ZSxcbn0pO1xuXG5cbmV4cG9ydCBjbGFzcyBBbXBTdG9yeUF1dG9BZHMgZXh0ZW5kcyBBTVAuQmFzZUVsZW1lbnQge1xuXG4gIC8qKiBAcGFyYW0geyFBbXBFbGVtZW50fSBlbGVtZW50ICovXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICBzdXBlcihlbGVtZW50KTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Py4vYW1wLXN0b3J5LkFtcFN0b3J5fSAqL1xuICAgIHRoaXMuYW1wU3RvcnlfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Py4vbmF2aWdhdGlvbi1zdGF0ZS5OYXZpZ2F0aW9uU3RhdGV9ICovXG4gICAgdGhpcy5uYXZpZ2F0aW9uU3RhdGVfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMudW5pcXVlUGFnZXNDb3VudF8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59ICovXG4gICAgdGhpcy51bmlxdWVQYWdlSWRzXyA9IGRpY3Qoe30pO1xuXG4gICAgLyoqIEBwcml2YXRlIHshQXJyYXk8RWxlbWVudD59ICovXG4gICAgdGhpcy5hZFBhZ2VFbHNfID0gW107XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLnRpbWVDdXJyZW50UGFnZUNyZWF0ZWRfID0gLUluZmluaXR5O1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5hZHNQbGFjZWRfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuYWRQYWdlc0NyZWF0ZWRfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VsZW1lbnR9ICovXG4gICAgdGhpcy5jdXJyZW50QWRFbGVtZW50XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5pc0N1cnJlbnRBZExvYWRlZF8gPSBmYWxzZTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7T2JqZWN0PHN0cmluZywgc3RyaW5nPn0gKi9cbiAgICB0aGlzLmNvbmZpZ18gPSB7fTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBbXBTdG9yeVN0YXRlU2VydmljZX0gKi9cbiAgICB0aGlzLnN0YXRlU2VydmljZV8gPSBuZXcgQW1wU3RvcnlTdGF0ZVNlcnZpY2UoKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYnVpbGRDYWxsYmFjaygpIHtcbiAgICBjb25zdCBlbWJlZE1vZGUgPSBwYXJzZUVtYmVkTW9kZSh0aGlzLndpbi5sb2NhdGlvbi5oYXNoKTtcbiAgICB0aGlzLnN0YXRlU2VydmljZV8uaW5pdGlhbGl6ZUVtYmVkTW9kZShlbWJlZE1vZGUpO1xuICAgIGlmICghdGhpcy5pc0F1dG9tYXRpY0FkSW5zZXJ0aW9uQWxsb3dlZF8oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGFtcFN0b3J5RWxlbWVudCA9IHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgIHVzZXIoKS5hc3NlcnQoYW1wU3RvcnlFbGVtZW50LnRhZ05hbWUgPT09ICdBTVAtU1RPUlknLFxuICAgICAgICBgPCR7VEFHfT4gc2hvdWxkIGJlIGNoaWxkIG9mIDxhbXAtc3Rvcnk+YCk7XG5cbiAgICBjb25zdCBhbXBkb2MgPSB0aGlzLmdldEFtcERvYygpO1xuICAgIFNlcnZpY2VzLmV4dGVuc2lvbnNGb3IodGhpcy53aW4pLi8qT0sqL2luc3RhbGxFeHRlbnNpb25Gb3JEb2MoXG4gICAgICAgIGFtcGRvYywgQURfVEFHKTtcbiAgICBTZXJ2aWNlcy5leHRlbnNpb25zRm9yKHRoaXMud2luKS4vKk9LKi9pbnN0YWxsRXh0ZW5zaW9uRm9yRG9jKFxuICAgICAgICBhbXBkb2MsIE1VU1RBQ0hFX1RBRyk7XG5cbiAgICByZXR1cm4gYW1wU3RvcnlFbGVtZW50LmdldEltcGwoKS50aGVuKGltcGwgPT4ge1xuICAgICAgdGhpcy5hbXBTdG9yeV8gPSBpbXBsO1xuICAgICAgdGhpcy5uYXZpZ2F0aW9uU3RhdGVfID0gdGhpcy5hbXBTdG9yeV8uZ2V0TmF2aWdhdGlvblN0YXRlKCk7XG4gICAgICB0aGlzLm5hdmlnYXRpb25TdGF0ZV8ub2JzZXJ2ZSh0aGlzLmhhbmRsZVN0YXRlQ2hhbmdlXy5iaW5kKHRoaXMpKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBpc0xheW91dFN1cHBvcnRlZCgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBsYXlvdXRDYWxsYmFjaygpIHtcbiAgICBpZiAoIXRoaXMuaXNBdXRvbWF0aWNBZEluc2VydGlvbkFsbG93ZWRfKCkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5hbXBTdG9yeV8uc2lnbmFscygpLndoZW5TaWduYWwoQ29tbW9uU2lnbmFscy5JTklfTE9BRClcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuY3JlYXRlQWRPdmVybGF5XygpO1xuICAgICAgICAgIHRoaXMucmVhZENvbmZpZ18oKTtcbiAgICAgICAgICB0aGlzLnNjaGVkdWxlUGFnZV8oKTtcbiAgICAgICAgfSk7XG4gIH1cblxuXG4gIGlzQXV0b21hdGljQWRJbnNlcnRpb25BbGxvd2VkXygpIHtcbiAgICBjb25zdCBhbGxvd0F1dG9tYXRpY0FkSW5zZXJ0aW9uID0gdGhpcy5zdGF0ZVNlcnZpY2VfXG4gICAgICAgIC5nZXRTdGF0ZShTdGF0ZVR5cGUuQUxMT1dfQVVUT01BVElDX0FEX0lOU0VSVElPTik7XG5cbiAgICByZXR1cm4gYWxsb3dBdXRvbWF0aWNBZEluc2VydGlvbi5nZXRWYWx1ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIGxvYWQgaW4gY29uZmlnIGZyb20gY2hpbGQgPHNjcmlwdD4gZWxlbWVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcmVhZENvbmZpZ18oKSB7XG4gICAgY29uc3QgY2hpbGQgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW5bMF07XG4gICAgdXNlcigpLmFzc2VydChcbiAgICAgICAgaXNKc29uU2NyaXB0VGFnKGNoaWxkKSxcbiAgICAgICAgYFRoZSA8JHtUQUd9PiBjb25maWcgc2hvdWxkIGAgK1xuICAgICAgICAnYmUgaW5zaWRlIGEgPHNjcmlwdD4gdGFnIHdpdGggdHlwZT1cImFwcGxpY2F0aW9uL2pzb25cIicpO1xuXG4gICAgdGhpcy5jb25maWdfID0gcGFyc2VKc29uKGNoaWxkLnRleHRDb250ZW50KTtcbiAgICB0aGlzLnZhbGlkYXRlQ29uZmlnXygpO1xuICB9XG5cblxuICAvKipcbiAgICogQ3JlYXRlIGEgaGlkZGVuIFVJIHRoYXQgd2lsbCBiZSBzaG93biB3aGVuIGFkIGlzIGRpc3BsYXllZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY3JlYXRlQWRPdmVybGF5XygpIHtcbiAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhc2lkZScpO1xuICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSAnaS1hbXBodG1sLWFkLW92ZXJsYXktY29udGFpbmVyJztcblxuICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgc3Bhbi5jbGFzc05hbWUgPSAnaS1hbXBodG1sLXN0b3J5LWFkLWF0dHJpYnV0aW9uJztcbiAgICBzcGFuLnRleHRDb250ZW50ID0gJ0FkJztcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzcGFuKTtcbiAgICB0aGlzLmFtcFN0b3J5Xy5lbGVtZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBtYWtlIHN1cmUgZ2l2ZW4gSlNPTiBjb25maWcgaXMgc2hhcGVkIGNvcnJlY3RseVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdmFsaWRhdGVDb25maWdfKCkge1xuICAgIGNvbnN0IGFkQXR0cmlidXRlcyA9IHRoaXMuY29uZmlnX1snYWQtYXR0cmlidXRlcyddO1xuICAgIHVzZXIoKS5hc3NlcnQoYWRBdHRyaWJ1dGVzLCBgPCR7VEFHfT46IEVycm9yIHJlYWRpbmcgY29uZmlnLmAgK1xuICAgICAgJ1RvcCBsZXZlbCBKU09OIHNob3VsZCBoYXZlIGFuIFwiYWQtYXR0cmlidXRlc1wiIGtleScpO1xuXG4gICAgY29uc3QgdHlwZSA9IGFkQXR0cmlidXRlcy50eXBlO1xuICAgIHVzZXIoKS5hc3NlcnQodHlwZSwgYDwke1RBR30+OiBFcnJvciByZWFkaW5nIGNvbmZpZy5gICtcbiAgICAgICdNaXNzaW5nIFtcImFkLWF0dHJpYnVlc1wiXVtcInR5cGVcIl0ga2V5Jyk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBidWlsZCBwYWdlIGFuZCBzdGFydCBwcmVsb2FkaW5nXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzY2hlZHVsZVBhZ2VfKCkge1xuICAgIGNvbnN0IHBhZ2UgPSB0aGlzLmNyZWF0ZUFkUGFnZV8oKTtcbiAgICB0aGlzLmFkUGFnZUVsc18ucHVzaChwYWdlKTtcblxuICAgIHRoaXMuYW1wU3RvcnlfLmVsZW1lbnQuYXBwZW5kQ2hpbGQocGFnZSk7XG5cbiAgICBwYWdlLmdldEltcGwoKS50aGVuKGltcGwgPT4ge1xuICAgICAgdGhpcy5hbXBTdG9yeV8uYWRkUGFnZShpbXBsKTtcbiAgICAgIHRoaXMudGltZUN1cnJlbnRQYWdlQ3JlYXRlZF8gPSBEYXRlLm5vdygpO1xuICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogY3JlYXRlIGFuIGBhbXAtc3RvcnktcGFnZWAgY29udGFpbmluZyBhbiBgYW1wLWFkYFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY3JlYXRlQWRQYWdlXygpIHtcbiAgICBjb25zdCBhbXBTdG9yeUFkUGFnZSA9IHRoaXMuY3JlYXRlUGFnZUVsZW1lbnRfKCk7XG4gICAgY29uc3QgYW1wQWQgPSB0aGlzLmNyZWF0ZUFkRWxlbWVudF8oKTtcblxuICAgIGNvbnN0IGdyaWRMYXllciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2FtcC1zdG9yeS1ncmlkLWxheWVyJyk7XG4gICAgZ3JpZExheWVyLnNldEF0dHJpYnV0ZSgndGVtcGxhdGUnLCAnZmlsbCcpO1xuICAgIGdyaWRMYXllci5hcHBlbmRDaGlsZChhbXBBZCk7XG4gICAgYW1wU3RvcnlBZFBhZ2UuYXBwZW5kQ2hpbGQoZ3JpZExheWVyKTtcblxuICAgIHRoaXMuY3VycmVudEFkRWxlbWVudF8gPSBhbXBBZDtcbiAgICB0aGlzLmlzQ3VycmVudEFkTG9hZGVkXyA9IGZhbHNlO1xuXG4gICAgLy8gc2V0IHVwIGxpc3RlbmVyIGZvciBhZC1sb2FkZWQgZXZlbnRcbiAgICBhbXBBZC5nZXRJbXBsKCkudGhlbihpbXBsID0+IHtcbiAgICAgIGNvbnN0IHNpZ25hbHMgPSBpbXBsLnNpZ25hbHMoKTtcbiAgICAgIHJldHVybiBzaWduYWxzLndoZW5TaWduYWwoQ29tbW9uU2lnbmFscy5JTklfTE9BRCk7XG4gICAgfSkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLmlzQ3VycmVudEFkTG9hZGVkXyA9IHRydWU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYW1wU3RvcnlBZFBhZ2U7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNyZWF0ZVBhZ2VFbGVtZW50XygpIHtcbiAgICBjb25zdCBpZCA9ICsrdGhpcy5hZFBhZ2VzQ3JlYXRlZF87XG4gICAgY29uc3QgYXR0cmlidXRlcyA9IGRpY3Qoe1xuICAgICAgJ2lkJzogYGktYW1waHRtbC1hZC1wYWdlLSR7aWR9YCxcbiAgICAgICdhZCc6ICcnLFxuICAgICAgJ2Rpc3RhbmNlJzogJzEnLFxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNyZWF0ZUVsZW1lbnRXaXRoQXR0cmlidXRlcyhcbiAgICAgICAgZG9jdW1lbnQsICdhbXAtc3RvcnktcGFnZScsIGF0dHJpYnV0ZXMpO1xuICB9XG5cblxuICAvKipcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjcmVhdGVBZEVsZW1lbnRfKCkge1xuICAgIGNvbnN0IHJlcXVpcmVkQXR0cnMgPSB7XG4gICAgICAnY2xhc3MnOiAnaS1hbXBodG1sLXN0b3J5LWFkJyxcbiAgICAgICdsYXlvdXQnOiAnZmlsbCcsXG4gICAgfTtcblxuICAgIGNvbnN0IGNvbmZpZ0F0dHJzID0gdGhpcy5jb25maWdfWydhZC1hdHRyaWJ1dGVzJ107XG5cbiAgICBbJ2hlaWdodCcsICd3aWR0aCcsICdsYXlvdXQnXS5mb3JFYWNoKGF0dHIgPT4ge1xuICAgICAgaWYgKGNvbmZpZ0F0dHJzW2F0dHJdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdXNlcigpLndhcm4oVEFHLCBgYWQtYXR0cmlidXRlIFwiJHthdHRyfVwiIGlzIG5vdCBhbGxvd2VkYCk7XG4gICAgICAgIGRlbGV0ZSBjb25maWdBdHRyc1thdHRyXTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHVzZXIoKS5hc3NlcnQoISFBTExPV0VEX0FEX1RZUEVTW2NvbmZpZ0F0dHJzLnR5cGVdLCBgJHtUQUd9OiBgICtcbiAgICAgIGBcIiR7Y29uZmlnQXR0cnMudHlwZX1cIiBhZCB0eXBlIGlzIG5vdCBzdXBwb3J0ZWRgKTtcblxuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSAvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoT2JqZWN0LmFzc2lnbih7fSxcbiAgICAgICAgY29uZmlnQXR0cnMsIHJlcXVpcmVkQXR0cnMpKTtcblxuICAgIHJldHVybiBjcmVhdGVFbGVtZW50V2l0aEF0dHJpYnV0ZXMoXG4gICAgICAgIGRvY3VtZW50LCAnYW1wLWFkJywgYXR0cmlidXRlcyk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSBhZC1zZXJ2ZXIgcmVzcG9uc2UgaGFzIHJlcXVpcmVtZW50cyB0byBidWlsZCBvdXRsaW5rXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGFkUGFnZUVsZW1lbnRcbiAgICovXG4gIG1heWJlQ3JlYXRlQ3RhTGF5ZXJfKGFkUGFnZUVsZW1lbnQpIHtcbiAgICAvLyBpZiBtYWtpbmcgYSBDVEEgbGF5ZXIgd2UgbmVlZCBhIGJ1dHRvbiBuYW1lICYgb3V0bGluayB1cmxcbiAgICBjb25zdCBjdGFVcmwgPSB0aGlzLmN1cnJlbnRBZEVsZW1lbnRfLmdldEF0dHJpYnV0ZShEQVRBX0FUVFIuQ1RBX1VSTCk7XG4gICAgY29uc3QgY3RhVHlwZSA9IHRoaXMuY3VycmVudEFkRWxlbWVudF8uZ2V0QXR0cmlidXRlKERBVEFfQVRUUi5DVEFfVFlQRSk7XG5cbiAgICBpZiAoIWN0YVVybCB8fCAhY3RhVHlwZSkge1xuICAgICAgdXNlcigpLmVycm9yKFRBRywgJ0JvdGggQ1RBIFR5cGUgJiBDVEEgVXJsICcgK1xuICAgICAgICAgICdhcmUgcmVxdWlyZWQgaW4gYWQtc2VydmVyIHJlc3BvbnNlLlwiJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgY3RhVGV4dCA9IENUQV9UWVBFU1tjdGFUeXBlXTtcbiAgICBpZiAoIWN0YVR5cGUpIHtcbiAgICAgIHVzZXIoKS5lcnJvcihUQUcsICdpbnZhbGlkIFwiQ1RBIFR5cGVcIiBpbiBhZCByZXNwb25zZScpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmNyZWF0ZUN0YUxheWVyXyhhZFBhZ2VFbGVtZW50LCBjdGFUZXh0LCBjdGFVcmwpO1xuICB9XG5cblxuICAvKipcbiAgICogQ3JlYXRlIGxheWVyIHRvIGNvbnRhaW4gb3V0bGluayBidXR0b25cbiAgICogQHBhcmFtIHshRWxlbWVudH0gYWRQYWdlRWxlbWVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gY3RhVGV4dFxuICAgKiBAcGFyYW0ge3N0cmluZ30gY3RhVXJsXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBjcmVhdGVDdGFMYXllcl8oYWRQYWdlRWxlbWVudCwgY3RhVGV4dCwgY3RhVXJsKSB7XG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICBhLmNsYXNzTmFtZSA9ICdpLWFtcGh0bWwtc3RvcnktYWQtbGluayc7XG4gICAgYS5zZXRBdHRyaWJ1dGUoJ3RhcmdldCcsICdfYmxhbmsnKTtcbiAgICBhLmhyZWYgPSBjdGFVcmw7XG4gICAgYS50ZXh0Q29udGVudCA9IGN0YVRleHQ7XG5cbiAgICBpZiAoYS5wcm90b2NvbCAhPT0gJ2h0dHBzOicgJiYgYS5wcm90b2NvbCAhPT0gJ2h0dHA6Jykge1xuICAgICAgdXNlcigpLndhcm4oVEFHLCAnQ1RBIHVybCBpcyBub3QgdmFsaWQuIEFkIHdhcyBkaXNjYXJkZWQnKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBjdGFMYXllciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2FtcC1zdG9yeS1jdGEtbGF5ZXInKTtcbiAgICBjdGFMYXllci5hcHBlbmRDaGlsZChhKTtcbiAgICBhZFBhZ2VFbGVtZW50LmFwcGVuZENoaWxkKGN0YUxheWVyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVTdGF0ZUNoYW5nZV8oc3RhdGVDaGFuZ2VFdmVudCkge1xuICAgIHN3aXRjaCAoc3RhdGVDaGFuZ2VFdmVudC50eXBlKSB7XG4gICAgICBjYXNlIFN0YXRlQ2hhbmdlVHlwZS5BQ1RJVkVfUEFHRTpcbiAgICAgICAgY29uc3Qge3BhZ2VJbmRleCwgcGFnZUlkfSA9IHN0YXRlQ2hhbmdlRXZlbnQudmFsdWU7XG4gICAgICAgIHRoaXMuaGFuZGxlQWN0aXZlUGFnZUNoYW5nZV8oXG4gICAgICAgICAgICBkZXYoKS5hc3NlcnROdW1iZXIocGFnZUluZGV4KSxcbiAgICAgICAgICAgIGRldigpLmFzc2VydFN0cmluZyhwYWdlSWQpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBhZ2VJbmRleFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGFnZUlkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYW5kbGVBY3RpdmVQYWdlQ2hhbmdlXyhwYWdlSW5kZXgsIHBhZ2VJZCkge1xuICAgIGlmICghaGFzT3duKHRoaXMudW5pcXVlUGFnZUlkc18sIHBhZ2VJZCkpIHtcbiAgICAgIHRoaXMudW5pcXVlUGFnZXNDb3VudF8rKztcbiAgICAgIHRoaXMudW5pcXVlUGFnZUlkc19bcGFnZUlkXSA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudW5pcXVlUGFnZXNDb3VudF8gPiBNSU5fSU5URVJWQUwpIHtcbiAgICAgIGNvbnN0IGFkU3RhdGUgPSB0aGlzLnRyeVRvUGxhY2VBZEFmdGVyUGFnZV8ocGFnZUlkKTtcblxuICAgICAgaWYgKGFkU3RhdGUgPT09IEFEX1NUQVRFLlBMQUNFRCkge1xuICAgICAgICB0aGlzLmFkc1BsYWNlZF8rKztcbiAgICAgICAgLy8gc3RhcnQgbG9hZGluZyBuZXh0IGFkXG4gICAgICAgIHRoaXMuc3RhcnROZXh0UGFnZV8oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGFkU3RhdGUgPT09IEFEX1NUQVRFLkZBSUxFRCkge1xuICAgICAgICB0aGlzLnN0YXJ0TmV4dFBhZ2VfKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogc3RhcnQgdGhlIHByb2Nlc3Mgb3ZlclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhcnROZXh0UGFnZV8oKSB7XG4gICAgdGhpcy51bmlxdWVQYWdlc0NvdW50XyA9IDA7XG4gICAgdGhpcy5zY2hlZHVsZVBhZ2VfKCk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBQbGFjZSBhZCBiYXNlZCBvbiB1c2VyIGNvbmZpZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gY3VycmVudFBhZ2VJZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdHJ5VG9QbGFjZUFkQWZ0ZXJQYWdlXyhjdXJyZW50UGFnZUlkKSB7XG4gICAgY29uc3QgbmV4dEFkUGFnZUVsID0gdGhpcy5hZFBhZ2VFbHNfW3RoaXMuYWRQYWdlRWxzXy5sZW5ndGggLSAxXTtcbiAgICBpZiAoIXRoaXMuaXNDdXJyZW50QWRMb2FkZWRfICYmIHRoaXMuYWRUaW1lZE91dF8oKSkge1xuICAgICAgLy8gdGltZW91dCBmYWlsXG4gICAgICByZXR1cm4gQURfU1RBVEUuRkFJTEVEO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRQYWdlID0gdGhpcy5hbXBTdG9yeV8uZ2V0UGFnZUJ5SWQoY3VycmVudFBhZ2VJZCk7XG4gICAgY29uc3QgbmV4dFBhZ2UgPSB0aGlzLmFtcFN0b3J5Xy5nZXROZXh0UGFnZShjdXJyZW50UGFnZSk7XG5cbiAgICBpZiAoIXRoaXMuaXNDdXJyZW50QWRMb2FkZWRfIHx8IGN1cnJlbnRQYWdlLmlzQWQoKSB8fFxuICAgICAgICAobmV4dFBhZ2UgJiYgbmV4dFBhZ2UuaXNBZCgpKSkge1xuICAgICAgLy8gaWYgd2UgYXJlIGdvaW5nIHRvIGNhdXNlIHR3byBjb25zZWN1dGl2ZSBhZHMgb3IgYWQgaXMgc3RpbGxcbiAgICAgIC8vIGxvYWRpbmcgd2Ugd2lsbCB0cnkgYWdhaW4gb24gbmV4dCB1c2VyIGludGVyYWN0aW9uXG4gICAgICByZXR1cm4gQURfU1RBVEUuUEVORElORztcbiAgICB9XG5cbiAgICBjb25zdCBjdGFDcmVhdGVkID0gdGhpcy5tYXliZUNyZWF0ZUN0YUxheWVyXyhuZXh0QWRQYWdlRWwpO1xuICAgIGlmICghY3RhQ3JlYXRlZCkge1xuICAgICAgLy8gZmFpbGVkIG9uIGFkLXNlcnZlciByZXNwb25zZSBmb3JtYXRcbiAgICAgIHJldHVybiBBRF9TVEFURS5GQUlMRUQ7XG4gICAgfVxuXG4gICAgdGhpcy5hbXBTdG9yeV8uaW5zZXJ0UGFnZShjdXJyZW50UGFnZUlkLCBuZXh0QWRQYWdlRWwuaWQpO1xuICAgIHJldHVybiBBRF9TVEFURS5QTEFDRUQ7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgYWRUaW1lZE91dF8oKSB7XG4gICAgcmV0dXJuIChEYXRlLm5vdygpIC0gdGhpcy50aW1lQ3VycmVudFBhZ2VDcmVhdGVkXykgPiBUSU1FT1VUX0xJTUlUO1xuICB9XG59XG5cbkFNUC5yZWdpc3RlckVsZW1lbnQoVEFHLCBBbXBTdG9yeUF1dG9BZHMpO1xuXG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEJhc2UgbGF5ZXIgZnJvbSB3aGljaCBvdGhlciBsYXllcnMgaW4gYSBzdG9yeSBwYWdlIGV4dGVuZCBmcm9tLlxuICovXG5cbmltcG9ydCB7TGF5b3V0fSBmcm9tICcuLi8uLi8uLi9zcmMvbGF5b3V0JztcblxuZXhwb3J0IGNsYXNzIEFtcFN0b3J5QmFzZUxheWVyIGV4dGVuZHMgQU1QLkJhc2VFbGVtZW50IHtcbiAgLyoqIEBwYXJhbSB7IUFtcEVsZW1lbnR9IGVsZW1lbnQgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgIHN1cGVyKGVsZW1lbnQpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBpc0xheW91dFN1cHBvcnRlZChsYXlvdXQpIHtcbiAgICByZXR1cm4gbGF5b3V0ID09IExheW91dC5DT05UQUlORVI7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGJ1aWxkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1zdG9yeS1sYXllcicpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFRoaXMgaXMgYSBsYXllciB0aGF0IGxheXMgaXRzIGNoaWxkcmVuIG91dCBpbnRvIGEgZ3JpZC4gSXRzXG4gKiBpbXBsZW1lbnRhdGlvbiBpcyBiYXNlZCBvZmYgb2YgdGhlIENTUyBHcmlkIFNwZWMuXG4gKlxuICogRXhhbXBsZTpcbiAqIDxjb2RlPlxuICogPGFtcC1zdG9yeS1ncmlkLWxheWVyIHRlbXBsYXRlPVwiZmlsbFwiPlxuICogICAuLi5cbiAqIDwvYW1wLXN0b3J5LWdyaWQtbGF5ZXI+XG4gKiA8L2NvZGU+XG4gKi9cblxuaW1wb3J0IHtBbXBTdG9yeUJhc2VMYXllcn0gZnJvbSAnLi9hbXAtc3RvcnktYmFzZS1sYXllcic7XG5pbXBvcnQge21hdGNoZXMsIHNjb3BlZFF1ZXJ5U2VsZWN0b3JBbGx9IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuXG4vKipcbiAqIEEgbWFwcGluZyBvZiBhdHRyaWJ1dGUgbmFtZXMgd2Ugc3VwcG9ydCBmb3IgZ3JpZCBsYXllcnMgdG8gdGhlIENTUyBHcmlkXG4gKiBwcm9wZXJ0aWVzIHRoZXkgY29udHJvbC5cbiAqIEBwcml2YXRlIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmNvbnN0IFNVUFBPUlRFRF9DU1NfR1JJRF9BVFRSSUJVVEVTID0ge1xuICAnYWxpZ24tY29udGVudCc6ICdhbGlnbkNvbnRlbnQnLFxuICAnYWxpZ24taXRlbXMnOiAnYWxpZ25JdGVtcycsXG4gICdhbGlnbi1zZWxmJzogJ2FsaWduU2VsZicsXG4gICdncmlkLWFyZWEnOiAnZ3JpZEFyZWEnLFxuICAnanVzdGlmeS1jb250ZW50JzogJ2p1c3RpZnlDb250ZW50JyxcbiAgJ2p1c3RpZnktaXRlbXMnOiAnanVzdGlmeUl0ZW1zJyxcbiAgJ2p1c3RpZnktc2VsZic6ICdqdXN0aWZ5U2VsZicsXG59O1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBrZXlzIG9mIHRoZSBTVVBQT1JURURfQ1NTX0dSSURfQVRUUklCVVRFUyBvYmplY3QgYWJvdmUgaW50byBhXG4gKiBzZWxlY3RvciBmb3IgdGhlIHNwZWNpZmllZCBhdHRyaWJ1dGVzLlxuICogKGUuZy4gW2FsaWduLWNvbnRlbnRdLCBbYWxpZ24taXRlbXNdLCAuLi4pXG4gKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ31cbiAqL1xuY29uc3QgU1VQUE9SVEVEX0NTU19HUklEX0FUVFJJQlVURVNfU0VMRUNUT1IgPVxuICAgIE9iamVjdC5rZXlzKFNVUFBPUlRFRF9DU1NfR1JJRF9BVFRSSUJVVEVTKVxuICAgICAgICAubWFwKGtleSA9PiBgWyR7a2V5fV1gKVxuICAgICAgICAuam9pbignLCcpO1xuXG4vKipcbiAqIFRoZSBhdHRyaWJ1dGUgbmFtZSBmb3IgZ3JpZCBsYXllciB0ZW1wbGF0ZXMuXG4gKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ31cbiAqL1xuY29uc3QgVEVNUExBVEVfQVRUUklCVVRFX05BTUUgPSAndGVtcGxhdGUnO1xuXG4vKipcbiAqIEEgbWFwcGluZyBvZiB0ZW1wbGF0ZSBhdHRyaWJ1dGUgdmFsdWVzIHRvIENTUyBjbGFzcyBuYW1lcy5cbiAqIEBwcml2YXRlIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz59XG4gKi9cbmNvbnN0IFRFTVBMQVRFX0NMQVNTX05BTUVTID0ge1xuICAnZmlsbCc6ICdpLWFtcGh0bWwtc3RvcnktZ3JpZC10ZW1wbGF0ZS1maWxsJyxcbiAgJ3ZlcnRpY2FsJzogJ2ktYW1waHRtbC1zdG9yeS1ncmlkLXRlbXBsYXRlLXZlcnRpY2FsJyxcbiAgJ2hvcml6b250YWwnOiAnaS1hbXBodG1sLXN0b3J5LWdyaWQtdGVtcGxhdGUtaG9yaXpvbnRhbCcsXG4gICd0aGlyZHMnOiAnaS1hbXBodG1sLXN0b3J5LWdyaWQtdGVtcGxhdGUtdGhpcmRzJyxcbn07XG5cbmV4cG9ydCBjbGFzcyBBbXBTdG9yeUdyaWRMYXllciBleHRlbmRzIEFtcFN0b3J5QmFzZUxheWVyIHtcbiAgLyoqIEBwYXJhbSB7IUFtcEVsZW1lbnR9IGVsZW1lbnQgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgIHN1cGVyKGVsZW1lbnQpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7Ym9vbGVhbn0gT25seSBwcmVyZW5kZXIgaWYgY2hpbGQgb2YgdGhlIGZpcnN0IHBhZ2UuICovXG4gICAgdGhpcy5wcmVyZW5kZXJBbGxvd2VkXyA9IG1hdGNoZXModGhpcy5lbGVtZW50LFxuICAgICAgICAnYW1wLXN0b3J5LXBhZ2U6Zmlyc3Qtb2YtdHlwZSBhbXAtc3RvcnktZ3JpZC1sYXllcicpO1xuICB9XG5cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGJ1aWxkQ2FsbGJhY2soKSB7XG4gICAgc3VwZXIuYnVpbGRDYWxsYmFjaygpO1xuICAgIHRoaXMuYXBwbHlUZW1wbGF0ZUNsYXNzTmFtZV8oKTtcbiAgICB0aGlzLnNldE93bkNzc0dyaWRTdHlsZXNfKCk7XG4gICAgdGhpcy5zZXREZXNjZW5kZW50Q3NzR3JpZFN0eWxlc18oKTtcbiAgfVxuXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBwcmVyZW5kZXJBbGxvd2VkKCkge1xuICAgIHJldHVybiB0aGlzLnByZXJlbmRlckFsbG93ZWRfO1xuICB9XG5cblxuICAvKipcbiAgICogQXBwbGllcyBpbnRlcm5hbCBDU1MgY2xhc3MgbmFtZXMgZm9yIHRoZSB0ZW1wbGF0ZSBhdHRyaWJ1dGUsIHNvIHRoYXQgc3R5bGVzXG4gICAqIGNhbiB1c2UgdGhlIGNsYXNzIG5hbWUgaW5zdGVhZCBvZiBjb21wb3VuZFxuICAgKiBhbXAtc3RvcnktZ3JpZC1sYXllclt0ZW1wbGF0ZT1cIi4uLlwiXSBzZWxlY3RvcnMsIHNpbmNlIHRoZSBsYXR0ZXIgaW5jcmVhc2VzXG4gICAqIENTUyBzcGVjaWZpY2l0eSBhbmQgY2FuIHByZXZlbnQgdXNlcnMgZnJvbSBiZWluZyBhYmxlIHRvIG92ZXJyaWRlIHN0eWxlcy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFwcGx5VGVtcGxhdGVDbGFzc05hbWVfKCkge1xuICAgIGlmICh0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKFRFTVBMQVRFX0FUVFJJQlVURV9OQU1FKSkge1xuICAgICAgY29uc3QgdGVtcGxhdGVOYW1lID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZShURU1QTEFURV9BVFRSSUJVVEVfTkFNRSk7XG4gICAgICBjb25zdCB0ZW1wbGF0ZUNsYXNzTmFtZSA9IFRFTVBMQVRFX0NMQVNTX05BTUVTW3RlbXBsYXRlTmFtZV07XG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0ZW1wbGF0ZUNsYXNzTmFtZSk7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogQ29waWVzIHRoZSB3aGl0ZWxpc3RlZCBDU1MgZ3JpZCBzdHlsZXMgZm9yIGRlc2NlbmRhbnRzIG9mIHRoZVxuICAgKiA8YW1wLXN0b3J5LWdyaWQtbGF5ZXI+IGVsZW1lbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzZXREZXNjZW5kZW50Q3NzR3JpZFN0eWxlc18oKSB7XG4gICAgY29uc3QgZWxlbWVudHNUb1VwZ3JhZGVTdHlsZXMgPSBzY29wZWRRdWVyeVNlbGVjdG9yQWxsKHRoaXMuZWxlbWVudCxcbiAgICAgICAgU1VQUE9SVEVEX0NTU19HUklEX0FUVFJJQlVURVNfU0VMRUNUT1IpO1xuXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbGVtZW50c1RvVXBncmFkZVN0eWxlcywgZWxlbWVudCA9PiB7XG4gICAgICB0aGlzLnNldENzc0dyaWRTdHlsZXNfKGVsZW1lbnQpO1xuICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogQ29waWVzIHRoZSB3aGl0ZWxpc3RlZCBDU1MgZ3JpZCBzdHlsZXMgZm9yIHRoZSA8YW1wLXN0b3J5LWdyaWQtbGF5ZXI+XG4gICAqIGVsZW1lbnQgaXRzZWxmLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2V0T3duQ3NzR3JpZFN0eWxlc18oKSB7XG4gICAgdGhpcy5zZXRDc3NHcmlkU3R5bGVzXyh0aGlzLmVsZW1lbnQpO1xuICB9XG5cblxuICAvKipcbiAgICogQ29waWVzIHRoZSB2YWx1ZXMgb2YgYW4gZWxlbWVudCdzIGF0dHJpYnV0ZXMgdG8gaXRzIHN0eWxlcywgaWYgdGhlXG4gICAqIGF0dHJpYnV0ZXMvcHJvcGVydGllcyBhcmUgaW4gdGhlIHdoaXRlbGlzdC5cbiAgICpcbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCB3aG9zZSBzdHlsZXMgc2hvdWxkIGJlIGNvcGllZCBmcm9tXG4gICAqICAgICBpdHMgYXR0cmlidXRlcy5cbiAgICovXG4gIHNldENzc0dyaWRTdHlsZXNfKGVsZW1lbnQpIHtcbiAgICBmb3IgKGxldCBpID0gZWxlbWVudC5hdHRyaWJ1dGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBhdHRyaWJ1dGUgPSBlbGVtZW50LmF0dHJpYnV0ZXNbaV07XG4gICAgICBjb25zdCBhdHRyaWJ1dGVOYW1lID0gYXR0cmlidXRlLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IHByb3BlcnR5TmFtZSA9IFNVUFBPUlRFRF9DU1NfR1JJRF9BVFRSSUJVVEVTW2F0dHJpYnV0ZU5hbWVdO1xuICAgICAgaWYgKHByb3BlcnR5TmFtZSkge1xuICAgICAgICBlbGVtZW50LnN0eWxlW3Byb3BlcnR5TmFtZV0gPSBhdHRyaWJ1dGUudmFsdWU7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5BTVAucmVnaXN0ZXJFbGVtZW50KCdhbXAtc3RvcnktZ3JpZC1sYXllcicsIEFtcFN0b3J5R3JpZExheWVyKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMnO1xuaW1wb3J0IHtkaWN0fSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvb2JqZWN0JztcbmltcG9ydCB7cmVuZGVyQXNFbGVtZW50fSBmcm9tICcuL3NpbXBsZS10ZW1wbGF0ZSc7XG5cblxuLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vc2ltcGxlLXRlbXBsYXRlLkVsZW1lbnREZWZ9ICovXG5jb25zdCBURU1QTEFURSA9IHtcbiAgdGFnOiAnYXNpZGUnLFxuICBhdHRyczogZGljdCh7XG4gICAgJ2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1oaW50LWNvbnRhaW5lciAnICtcbiAgICAgICAgJ2ktYW1waHRtbC1zdG9yeS1zeXN0ZW0tcmVzZXQgaS1hbXBodG1sLWhpZGRlbid9KSxcbiAgY2hpbGRyZW46IFtcbiAgICB7XG4gICAgICB0YWc6ICdkaXYnLFxuICAgICAgYXR0cnM6IGRpY3QoeydjbGFzcyc6ICdpLWFtcGh0bWwtc3RvcnktbmF2aWdhdGlvbi1oZWxwLW92ZXJsYXknfSksXG4gICAgICBjaGlsZHJlbjogW1xuICAgICAgICB7XG4gICAgICAgICAgdGFnOiAnZGl2JyxcbiAgICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1uYXZpZ2F0aW9uLWhlbHAtc2VjdGlvbidcbiAgICAgICAgICAgICAgKyAnIHByZXYtcGFnZSd9KSxcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0YWc6ICdkaXYnLFxuICAgICAgICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1oaW50LXBsYWNlaG9sZGVyJ30pLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgICAgICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1oaW50LXRhcC1idXR0b24nfSksXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgdGFnOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ktYW1waHRtbC1zdG9yeS1oaW50LXRhcC1idXR0b24taWNvbid9KSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB0YWc6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgYXR0cnM6IGRpY3QoeydjbGFzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgJ2ktYW1waHRtbC1zdG9yeS1oaW50LXRhcC1idXR0b24tdGV4dCd9KSxcbiAgICAgICAgICAgICAgICAgIHRleHQ6ICdCYWNrJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGFnOiAnZGl2JyxcbiAgICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1uYXZpZ2F0aW9uLWhlbHAtc2VjdGlvbidcbiAgICAgICAgICAgICAgKyAnIG5leHQtcGFnZSd9KSxcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0YWc6ICdkaXYnLFxuICAgICAgICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1oaW50LXBsYWNlaG9sZGVyJ30pLFxuICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgICAgICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1oaW50LXRhcC1idXR0b24nfSksXG4gICAgICAgICAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgdGFnOiAnZGl2JyxcbiAgICAgICAgICAgICAgICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ktYW1waHRtbC1zdG9yeS1oaW50LXRhcC1idXR0b24taWNvbid9KSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICB0YWc6ICdkaXYnLFxuICAgICAgICAgICAgICAgICAgYXR0cnM6IGRpY3QoeydjbGFzcyc6XG4gICAgICAgICAgICAgICAgICAgICAgJ2ktYW1waHRtbC1zdG9yeS1oaW50LXRhcC1idXR0b24tdGV4dCd9KSxcbiAgICAgICAgICAgICAgICAgIHRleHQ6ICdOZXh0JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICB9LFxuICBdLFxufTtcblxuLyoqIEB0eXBlIHtzdHJpbmd9ICovXG5jb25zdCBOQVZJR0FUSU9OX09WRVJMQVlfQ0xBU1MgPSAnc2hvdy1uYXZpZ2F0aW9uLW92ZXJsYXknO1xuXG4vKiogQHR5cGUge3N0cmluZ30gKi9cbmNvbnN0IEZJUlNUX1BBR0VfT1ZFUkxBWV9DTEFTUyA9ICdzaG93LWZpcnN0LXBhZ2Utb3ZlcmxheSc7XG5cbi8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuY29uc3QgTkFWSUdBVElPTl9PVkVSTEFZX1RJTUVPVVQgPSAzMDAwO1xuXG4vKiogQHR5cGUge251bWJlcn0gKi9cbmNvbnN0IEZJUlNUX1BBR0VfTkFWSUdBVElPTl9PVkVSTEFZX1RJTUVPVVQgPSAyNzU7XG5cbi8qKlxuICogVXNlciBIaW50IExheWVyIGZvciA8YW1wLXN0b3J5Pi5cbiAqL1xuZXhwb3J0IGNsYXNzIEFtcFN0b3J5SGludCB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4pIHtcbiAgICAvKiogQHByaXZhdGUgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIHshRG9jdW1lbnR9ICovXG4gICAgdGhpcy5kb2N1bWVudF8gPSB0aGlzLndpbl8uZG9jdW1lbnQ7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvdnN5bmMtaW1wbC5Wc3luY30gKi9cbiAgICB0aGlzLnZzeW5jXyA9IFNlcnZpY2VzLnZzeW5jRm9yKHRoaXMud2luXyk7XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvdGltZXItaW1wbC5UaW1lcn0gKi9cbiAgICB0aGlzLnRpbWVyXyA9IFNlcnZpY2VzLnRpbWVyRm9yKHRoaXMud2luXyk7XG5cbiAgICAvKiogQHByaXZhdGUgez9FbGVtZW50fSAqL1xuICAgIHRoaXMuaGludENvbnRhaW5lcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/KG51bWJlcnxzdHJpbmcpfSAqL1xuICAgIHRoaXMuaGludFRpbWVvdXRfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZHMgdGhlIGhpbnQgbGF5ZXIgRE9NLlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGJ1aWxkSGludENvbnRhaW5lcigpIHtcbiAgICB0aGlzLmhpbnRDb250YWluZXJfID0gcmVuZGVyQXNFbGVtZW50KHRoaXMuZG9jdW1lbnRfLCBURU1QTEFURSk7XG4gICAgcmV0dXJuIHRoaXMuaGludENvbnRhaW5lcl87XG4gIH1cblxuICAvKipcbiAgICogU2hvd3MgdGhlIGdpdmVuIGhpbnRcbiAgICovXG4gIHNob3dIaW50XyhoaW50Q2xhc3MpIHtcbiAgICB0aGlzLnZzeW5jXy5tdXRhdGUoKCkgPT4ge1xuICAgICAgdGhpcy5oaW50Q29udGFpbmVyXy5jbGFzc0xpc3QudG9nZ2xlKE5BVklHQVRJT05fT1ZFUkxBWV9DTEFTUyxcbiAgICAgICAgICBoaW50Q2xhc3MgPT0gTkFWSUdBVElPTl9PVkVSTEFZX0NMQVNTKTtcbiAgICAgIHRoaXMuaGludENvbnRhaW5lcl8uY2xhc3NMaXN0LnRvZ2dsZShGSVJTVF9QQUdFX09WRVJMQVlfQ0xBU1MsXG4gICAgICAgICAgaGludENsYXNzID09IEZJUlNUX1BBR0VfT1ZFUkxBWV9DTEFTUyk7XG4gICAgICB0aGlzLmhpbnRDb250YWluZXJfLmNsYXNzTGlzdC5yZW1vdmUoJ2ktYW1waHRtbC1oaWRkZW4nKTtcblxuICAgICAgY29uc3QgaGlkZVRpbWVvdXQgPSBoaW50Q2xhc3MgPT0gTkFWSUdBVElPTl9PVkVSTEFZX0NMQVNTXG4gICAgICAgID8gTkFWSUdBVElPTl9PVkVSTEFZX1RJTUVPVVQgOiBGSVJTVF9QQUdFX05BVklHQVRJT05fT1ZFUkxBWV9USU1FT1VUO1xuICAgICAgdGhpcy5oaWRlQWZ0ZXJUaW1lb3V0KGhpZGVUaW1lb3V0KTtcbiAgICB9KTtcblxuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgbmF2aWdhdGlvbiBvdmVybGF5IERPTS5cbiAgICovXG4gIHNob3dOYXZpZ2F0aW9uT3ZlcmxheSgpIHtcbiAgICB0aGlzLnNob3dIaW50XyhOQVZJR0FUSU9OX09WRVJMQVlfQ0xBU1MpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgbmF2aWdhdGlvbiBvdmVybGF5IERPTS5cbiAgICovXG4gIHNob3dGaXJzdFBhZ2VIaW50T3ZlcmxheSgpIHtcbiAgICB0aGlzLnNob3dIaW50XyhGSVJTVF9QQUdFX09WRVJMQVlfQ0xBU1MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGVzIHRoZSBvdmVybGF5IGFmdGVyIGEgZ2l2ZW4gdGltZVxuICAgKiBAcGFyYW0ge251bWJlcn0gdGltZW91dFxuICAgKi9cbiAgaGlkZUFmdGVyVGltZW91dCh0aW1lb3V0KSB7XG4gICAgdGhpcy5oaW50VGltZW91dF8gPSB0aGlzLnRpbWVyXy5kZWxheShcbiAgICAgICAgKCkgPT4gdGhpcy5oaWRlSW50ZXJuYWxfKCksIHRpbWVvdXQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgYWxsIG5hdmlnYXRpb24gaGludHMuXG4gICAqL1xuICBoaWRlQWxsTmF2aWdhdGlvbkhpbnQoKSB7XG4gICAgdGhpcy5oaWRlSW50ZXJuYWxfKCk7XG5cbiAgICBpZiAodGhpcy5oaW50VGltZW91dF8gIT09IG51bGwpIHtcbiAgICAgIHRoaXMudGltZXJfLmNhbmNlbCh0aGlzLmhpbnRUaW1lb3V0Xyk7XG4gICAgICB0aGlzLmhpbnRUaW1lb3V0XyA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGhpZGVJbnRlcm5hbF8oKSB7XG4gICAgdGhpcy52c3luY18ubXV0YXRlKCgpID0+IHtcbiAgICAgIHRoaXMuaGludENvbnRhaW5lcl8uY2xhc3NMaXN0LmFkZCgnaS1hbXBodG1sLWhpZGRlbicpO1xuICAgIH0pO1xuICB9XG59XG5cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgRW1iZWRzIGEgc3RvcnlcbiAqXG4gKiBFeGFtcGxlOlxuICogPGNvZGU+XG4gKiA8YW1wLXN0b3J5LXBhZ2U+XG4gKiA8L2FtcC1zdG9yeT5cbiAqIDwvY29kZT5cbiAqL1xuaW1wb3J0IHtBZHZhbmNlbWVudENvbmZpZ30gZnJvbSAnLi9wYWdlLWFkdmFuY2VtZW50JztcbmltcG9ydCB7XG4gIEFuaW1hdGlvbk1hbmFnZXIsXG4gIGhhc0FuaW1hdGlvbnMsXG59IGZyb20gJy4vYW5pbWF0aW9uJztcbmltcG9ydCB7RXZlbnRUeXBlLCBkaXNwYXRjaCwgZGlzcGF0Y2hDdXN0b219IGZyb20gJy4vZXZlbnRzJztcbmltcG9ydCB7TGF5b3V0fSBmcm9tICcuLi8uLi8uLi9zcmMvbGF5b3V0JztcbmltcG9ydCB7TG9hZGluZ1NwaW5uZXJ9IGZyb20gJy4vbG9hZGluZy1zcGlubmVyJztcbmltcG9ydCB7TWVkaWFQb29sfSBmcm9tICcuL21lZGlhLXBvb2wnO1xuaW1wb3J0IHtQYWdlU2NhbGluZ1NlcnZpY2V9IGZyb20gJy4vcGFnZS1zY2FsaW5nJztcbmltcG9ydCB7XG4gIGNsb3Nlc3RCeVNlbGVjdG9yLFxuICBtYXRjaGVzLFxuICBzY29wZWRRdWVyeVNlbGVjdG9yQWxsLFxufSBmcm9tICcuLi8uLi8uLi9zcmMvZG9tJztcbmltcG9ydCB7ZGVib3VuY2V9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9yYXRlLWxpbWl0JztcbmltcG9ydCB7ZGV2fSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7Z2V0TG9nRW50cmllc30gZnJvbSAnLi9sb2dnaW5nJztcbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi4vLi4vLi4vc3JjL21vZGUnO1xuaW1wb3J0IHtsaXN0ZW59IGZyb20gJy4uLy4uLy4uL3NyYy9ldmVudC1oZWxwZXInO1xuaW1wb3J0IHt1cGdyYWRlQmFja2dyb3VuZEF1ZGlvfSBmcm9tICcuL2F1ZGlvJztcblxuLyoqXG4gKiBDU1MgY2xhc3MgZm9yIGFuIGFtcC1zdG9yeS1wYWdlIHRoYXQgaW5kaWNhdGVzIHRoZSBlbnRpcmUgcGFnZSBpcyBsb2FkZWQuXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuY29uc3QgUEFHRV9MT0FERURfQ0xBU1NfTkFNRSA9ICdpLWFtcGh0bWwtc3RvcnktcGFnZS1sb2FkZWQnO1xuXG5cbi8qKlxuICogU2VsZWN0b3IgZm9yIHdoaWNoIG1lZGlhIHRvIHdhaXQgZm9yIG9uIHBhZ2UgbGF5b3V0LlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbmNvbnN0IFBBR0VfTUVESUFfU0VMRUNUT1IgPSAnYW1wLWF1ZGlvLCBhbXAtdmlkZW8sIGFtcC1pbWcsIGFtcC1hbmltJztcblxuXG4vKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUcgPSAnYW1wLXN0b3J5LXBhZ2UnO1xuXG4vKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBBRFZFUlRJU0VNRU5UX0FUVFJfTkFNRSA9ICdhZCc7XG5cblxuLyoqXG4gKiBUaGUgPGFtcC1zdG9yeS1wYWdlPiBjdXN0b20gZWxlbWVudCwgd2hpY2ggcmVwcmVzZW50cyBhIHNpbmdsZSBwYWdlIG9mXG4gKiBhbiA8YW1wLXN0b3J5Pi5cbiAqL1xuZXhwb3J0IGNsYXNzIEFtcFN0b3J5UGFnZSBleHRlbmRzIEFNUC5CYXNlRWxlbWVudCB7XG4gIC8qKiBAcGFyYW0geyFBbXBFbGVtZW50fSBlbGVtZW50ICovXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQpIHtcbiAgICBzdXBlcihlbGVtZW50KTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0FuaW1hdGlvbk1hbmFnZXJ9ICovXG4gICAgdGhpcy5hbmltYXRpb25NYW5hZ2VyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQWR2YW5jZW1lbnRDb25maWd9ICovXG4gICAgdGhpcy5hZHZhbmNlbWVudF8gPSBBZHZhbmNlbWVudENvbmZpZy5mb3JQYWdlKHRoaXMpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RWxlbWVudH0gKi9cbiAgICB0aGlzLmxvYWRpbmdTcGlubmVyXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshUHJvbWlzZX0gKi9cbiAgICB0aGlzLm1lZGlhTGF5b3V0UHJvbWlzZV8gPSB0aGlzLndhaXRGb3JNZWRpYUxheW91dF8oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlfSAqL1xuICAgIHRoaXMucGFnZUxvYWRQcm9taXNlXyA9IHRoaXMubWVkaWFMYXlvdXRQcm9taXNlXy50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMubWFya1BhZ2VBc0xvYWRlZF8oKTtcbiAgICB9KTtcblxuICAgIGxldCBtZWRpYVBvb2xSZXNvbHZlRm4sIG1lZGlhUG9vbFJlamVjdEZuO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2U8IU1lZGlhUG9vbD59ICovXG4gICAgdGhpcy5tZWRpYVBvb2xQcm9taXNlXyA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIG1lZGlhUG9vbFJlc29sdmVGbiA9IHJlc29sdmU7XG4gICAgICBtZWRpYVBvb2xSZWplY3RGbiA9IHJlamVjdDtcbiAgICB9KTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFmdW5jdGlvbighTWVkaWFQb29sKX0gKi9cbiAgICB0aGlzLm1lZGlhUG9vbFJlc29sdmVGbl8gPSBtZWRpYVBvb2xSZXNvbHZlRm47XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshZnVuY3Rpb24oKil9ICovXG4gICAgdGhpcy5tZWRpYVBvb2xSZWplY3RGbl8gPSBtZWRpYVBvb2xSZWplY3RGbjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Jvb2xlYW59IE9ubHkgcHJlcmVuZGVyIHRoZSBmaXJzdCBzdG9yeSBwYWdlLiAqL1xuICAgIHRoaXMucHJlcmVuZGVyQWxsb3dlZF8gPSBtYXRjaGVzKHRoaXMuZWxlbWVudCxcbiAgICAgICAgJ2FtcC1zdG9yeS1wYWdlOmZpcnN0LW9mLXR5cGUnKTtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgeyFmdW5jdGlvbigpfSAqL1xuICAgIHRoaXMuZGVib3VuY2VUb2dnbGVMb2FkaW5nU3Bpbm5lcl8gPSBkZWJvdW5jZShcbiAgICAgICAgdGhpcy53aW4sIGlzQWN0aXZlID0+IHRoaXMudG9nZ2xlTG9hZGluZ1NwaW5uZXJfKCEhaXNBY3RpdmUpLCAxMDApO1xuXG4gICAgLyoqIEBwcml2YXRlIHshQXJyYXk8ZnVuY3Rpb24oKT59ICovXG4gICAgdGhpcy51bmxpc3RlbmVyc18gPSBbXTtcbiAgfVxuXG5cbiAgLypcbiAgICogQHJldHVybiB7Py4vYW5pbWF0aW9uLkFuaW1hdGlvbk1hbmFnZXJ9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBtYXliZUNyZWF0ZUFuaW1hdGlvbk1hbmFnZXJfKCkge1xuICAgIGlmICghdGhpcy5hbmltYXRpb25NYW5hZ2VyXykge1xuICAgICAgaWYgKCFoYXNBbmltYXRpb25zKHRoaXMuZWxlbWVudCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmFuaW1hdGlvbk1hbmFnZXJfID0gQW5pbWF0aW9uTWFuYWdlci5jcmVhdGUoXG4gICAgICAgICAgdGhpcy5lbGVtZW50LCB0aGlzLmdldEFtcERvYygpLCB0aGlzLmdldEFtcERvYygpLmdldFVybCgpKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYnVpbGRDYWxsYmFjaygpIHtcbiAgICB1cGdyYWRlQmFja2dyb3VuZEF1ZGlvKHRoaXMuZWxlbWVudCk7XG4gICAgdGhpcy5tYXJrTWVkaWFFbGVtZW50c1dpdGhQcmVsb2FkXygpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZU1lZGlhUG9vbF8oKTtcbiAgICB0aGlzLm1heWJlQ3JlYXRlQW5pbWF0aW9uTWFuYWdlcl8oKTtcbiAgICB0aGlzLmFkdmFuY2VtZW50Xy5hZGRQcmV2aW91c0xpc3RlbmVyKCgpID0+IHRoaXMucHJldmlvdXMoKSk7XG4gICAgdGhpcy5hZHZhbmNlbWVudF9cbiAgICAgICAgLmFkZEFkdmFuY2VMaXN0ZW5lcigoKSA9PiB0aGlzLm5leHQoLyogb3B0X2lzQXV0b21hdGljQWR2YW5jZSAqLyB0cnVlKSk7XG4gICAgdGhpcy5hZHZhbmNlbWVudF8uYWRkT25UYXBOYXZpZ2F0aW9uTGlzdGVuZXIoXG4gICAgICAgIG5hdmlnYXRpb25EaXJlY3Rpb24gPT4gdGhpcy5uYXZpZ2F0ZU9uVGFwKG5hdmlnYXRpb25EaXJlY3Rpb24pKTtcbiAgICB0aGlzLmFkdmFuY2VtZW50X1xuICAgICAgICAuYWRkUHJvZ3Jlc3NMaXN0ZW5lcihwcm9ncmVzcyA9PiB0aGlzLmVtaXRQcm9ncmVzc18ocHJvZ3Jlc3MpKTtcbiAgfVxuXG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGluaXRpYWxpemVNZWRpYVBvb2xfKCkge1xuICAgIGNvbnN0IHN0b3J5RWwgPSBkZXYoKS5hc3NlcnRFbGVtZW50KFxuICAgICAgICBjbG9zZXN0QnlTZWxlY3Rvcih0aGlzLmVsZW1lbnQsICdhbXAtc3RvcnknKSxcbiAgICAgICAgJ2FtcC1zdG9yeS1wYWdlIG11c3QgYmUgYSBkZXNjZW5kYW50IG9mIGFtcC1zdG9yeS4nKTtcblxuICAgIHN0b3J5RWwuZ2V0SW1wbCgpXG4gICAgICAgIC50aGVuKHN0b3J5SW1wbCA9PiB7XG4gICAgICAgICAgdGhpcy5tZWRpYVBvb2xSZXNvbHZlRm5fKE1lZGlhUG9vbC5mb3Ioc3RvcnlJbXBsKSk7XG4gICAgICAgIH0sIHJlYXNvbiA9PiB0aGlzLm1lZGlhUG9vbFJlamVjdEZuXyhyZWFzb24pKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIE1hcmtzIGFueSBBTVAgZWxlbWVudHMgdGhhdCByZXByZXNlbnQgbWVkaWEgZWxlbWVudHMgd2l0aCBwcmVsb2FkPVwiYXV0b1wiLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbWFya01lZGlhRWxlbWVudHNXaXRoUHJlbG9hZF8oKSB7XG4gICAgY29uc3QgbWVkaWFTZXQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYW1wLWF1ZGlvLCBhbXAtdmlkZW8nKTtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG1lZGlhU2V0LCBtZWRpYUl0ZW0gPT4ge1xuICAgICAgbWVkaWFJdGVtLnNldEF0dHJpYnV0ZSgncHJlbG9hZCcsICdhdXRvJyk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgaXNMYXlvdXRTdXBwb3J0ZWQobGF5b3V0KSB7XG4gICAgcmV0dXJuIGxheW91dCA9PSBMYXlvdXQuQ09OVEFJTkVSO1xuICB9XG5cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHBhdXNlQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5hZHZhbmNlbWVudF8uc3RvcCgpO1xuXG4gICAgdGhpcy5zdG9wTGlzdGVuaW5nVG9WaWRlb0V2ZW50c18oKTtcbiAgICB0aGlzLnBhdXNlQWxsTWVkaWFfKHRydWUgLyogcmV3aW5kVG9CZWdpbm5pbmcgKi8pO1xuXG4gICAgaWYgKHRoaXMuYW5pbWF0aW9uTWFuYWdlcl8pIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlcl8uY2FuY2VsQWxsKCk7XG4gICAgfVxuICB9XG5cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHJlc3VtZUNhbGxiYWNrKCkge1xuICAgIHRoaXMucmVnaXN0ZXJBbGxNZWRpYV8oKTtcblxuICAgIGlmICh0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgIHRoaXMuYWR2YW5jZW1lbnRfLnN0YXJ0KCk7XG4gICAgICB0aGlzLm1heWJlU3RhcnRBbmltYXRpb25zKCk7XG4gICAgICB0aGlzLnByZWxvYWRBbGxNZWRpYV8oKVxuICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuc3RhcnRMaXN0ZW5pbmdUb1ZpZGVvRXZlbnRzXygpKVxuICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMucGxheUFsbE1lZGlhXygpKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlcG9ydERldk1vZGVFcnJvcnNfKCk7XG4gIH1cblxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgbGF5b3V0Q2FsbGJhY2soKSB7XG4gICAgdGhpcy5tdXRlQWxsTWVkaWEoKTtcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLmJlZm9yZVZpc2libGUoKSxcbiAgICAgIHRoaXMubWVkaWFMYXlvdXRQcm9taXNlXyxcbiAgICAgIHRoaXMubWVkaWFQb29sUHJvbWlzZV8sXG4gICAgXSk7XG4gIH1cblxuXG4gIC8qKiBAcmV0dXJuIHshUHJvbWlzZX0gKi9cbiAgYmVmb3JlVmlzaWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zY2FsZV8oKS50aGVuKCgpID0+IHRoaXMubWF5YmVBcHBseUZpcnN0QW5pbWF0aW9uRnJhbWUoKSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHdhaXRGb3JNZWRpYUxheW91dF8oKSB7XG4gICAgY29uc3QgbWVkaWFTZXQgPSBzY29wZWRRdWVyeVNlbGVjdG9yQWxsKHRoaXMuZWxlbWVudCwgUEFHRV9NRURJQV9TRUxFQ1RPUik7XG4gICAgY29uc3QgbWVkaWFQcm9taXNlcyA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChtZWRpYVNldCwgbWVkaWFFbCA9PiB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIHN3aXRjaCAobWVkaWFFbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICBjYXNlICdhbXAtaW1nJzpcbiAgICAgICAgICBjYXNlICdhbXAtYW5pbSc6XG4gICAgICAgICAgICBtZWRpYUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCByZXNvbHZlLCB0cnVlIC8qIHVzZUNhcHR1cmUgKi8pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnYW1wLWF1ZGlvJzpcbiAgICAgICAgICBjYXNlICdhbXAtdmlkZW8nOlxuICAgICAgICAgICAgaWYgKG1lZGlhRWwucmVhZHlTdGF0ZSA+PSAyKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtZWRpYUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NhbnBsYXknLCByZXNvbHZlLCB0cnVlIC8qIHVzZUNhcHR1cmUgKi8pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vIEFueSBvdGhlciB0YWdzIHNob3VsZCBub3QgYmxvY2sgbG9hZGluZy5cbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlIHN1cHByZXNzIGVycm9ycyBzbyB0aGF0IFByb21pc2UuYWxsIHdpbGwgc3RpbGwgd2FpdCBmb3IgYWxsXG4gICAgICAgIC8vIHByb21pc2VzIHRvIGNvbXBsZXRlLCBldmVuIGlmIG9uZSBoYXMgZmFpbGVkLiAgV2UgZG8gbm90aGluZyB3aXRoIHRoZVxuICAgICAgICAvLyBlcnJvciwgYXMgdGhlIHJlc291cmNlIGl0c2VsZiBhbmQvb3IgY29kZSB0aGF0IGxvYWRzIGl0IHNob3VsZCBoYW5kbGVcbiAgICAgICAgLy8gdGhlIGVycm9yLlxuICAgICAgICBtZWRpYUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgcmVzb2x2ZSwgdHJ1ZSAvKiB1c2VDYXB0dXJlICovKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKG1lZGlhUHJvbWlzZXMpO1xuICB9XG5cblxuICAvKiogQHJldHVybiB7IVByb21pc2V9ICovXG4gIHdoZW5Mb2FkZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFnZUxvYWRQcm9taXNlXztcbiAgfVxuXG5cbiAgLyoqIEBwcml2YXRlICovXG4gIG1hcmtQYWdlQXNMb2FkZWRfKCkge1xuICAgIGRpc3BhdGNoKHRoaXMuZWxlbWVudCwgRXZlbnRUeXBlLlBBR0VfTE9BREVELCB0cnVlKTtcbiAgICB0aGlzLm11dGF0ZUVsZW1lbnQoKCkgPT4ge1xuICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoUEFHRV9MT0FERURfQ0xBU1NfTkFNRSk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgcHJlcmVuZGVyQWxsb3dlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcmVyZW5kZXJBbGxvd2VkXztcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEdldHMgYWxsIG1lZGlhIGVsZW1lbnRzIG9uIHRoaXMgcGFnZS5cbiAgICogQHJldHVybiB7IU5vZGVMaXN0PCFFbGVtZW50Pn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldEFsbE1lZGlhXygpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2F1ZGlvLCB2aWRlbycpO1xuICB9XG5cblxuICAvKipcbiAgICogR2V0cyBhbGwgdmlkZW8gZWxlbWVudHMgb24gdGhpcyBwYWdlLlxuICAgKiBAcmV0dXJuIHshTm9kZUxpc3Q8IUVsZW1lbnQ+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0QWxsVmlkZW9zXygpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3ZpZGVvJyk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBBcHBsaWVzIHRoZSBzcGVjaWZpZWQgY2FsbGJhY2sgdG8gZWFjaCBtZWRpYSBlbGVtZW50IG9uIHRoZSBwYWdlLCBhZnRlciB0aGVcbiAgICogbWVkaWEgZWxlbWVudCBpcyBsb2FkZWQuXG4gICAqIEBwYXJhbSB7IWZ1bmN0aW9uKCEuL21lZGlhLXBvb2wuTWVkaWFQb29sLCAhRWxlbWVudCl9IGNhbGxiYWNrRm4gVGhlXG4gICAqICAgICBjYWxsYmFjayB0byBiZSBhcHBsaWVkIHRvIGVhY2ggbWVkaWEgZWxlbWVudC5cbiAgICogQHJldHVybiB7IVByb21pc2V9IFByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciB0aGUgY2FsbGJhY2tzIGFyZSBjYWxsZWQuXG4gICAqL1xuICB3aGVuQWxsTWVkaWFFbGVtZW50c18oY2FsbGJhY2tGbikge1xuICAgIGNvbnN0IG1lZGlhU2V0ID0gdGhpcy5nZXRBbGxNZWRpYV8oKTtcbiAgICByZXR1cm4gdGhpcy5tZWRpYVBvb2xQcm9taXNlXy50aGVuKG1lZGlhUG9vbCA9PiB7XG4gICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChtZWRpYVNldCwgbWVkaWFFbCA9PiB7XG4gICAgICAgIHJldHVybiBjYWxsYmFja0ZuKG1lZGlhUG9vbCwgbWVkaWFFbCk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFBhdXNlcyBhbGwgbWVkaWEgb24gdGhpcyBwYWdlLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSByZXdpbmRUb0JlZ2lubmluZyBXaGV0aGVyIHRvIHJld2luZCB0aGUgY3VycmVudFRpbWVcbiAgICogICAgIG9mIG1lZGlhIGl0ZW1zIHRvIHRoZSBiZWdpbm5pbmcuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgdGhlIGNhbGxiYWNrcyBhcmUgY2FsbGVkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcGF1c2VBbGxNZWRpYV8ocmV3aW5kVG9CZWdpbm5pbmcgPSBmYWxzZSkge1xuICAgIHJldHVybiB0aGlzLndoZW5BbGxNZWRpYUVsZW1lbnRzXygobWVkaWFQb29sLCBtZWRpYUVsKSA9PiB7XG4gICAgICByZXR1cm4gbWVkaWFQb29sLnBhdXNlKFxuICAgICAgICAgIC8qKiBAdHlwZSB7IUhUTUxNZWRpYUVsZW1lbnR9ICovIChtZWRpYUVsKSwgcmV3aW5kVG9CZWdpbm5pbmcpO1xuICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogUGxheXMgYWxsIG1lZGlhIG9uIHRoaXMgcGFnZS5cbiAgICogQHJldHVybiB7IVByb21pc2V9IFByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciB0aGUgY2FsbGJhY2tzIGFyZSBjYWxsZWQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwbGF5QWxsTWVkaWFfKCkge1xuICAgIHJldHVybiB0aGlzLndoZW5BbGxNZWRpYUVsZW1lbnRzXygobWVkaWFQb29sLCBtZWRpYUVsKSA9PiB7XG4gICAgICByZXR1cm4gbWVkaWFQb29sLnBsYXkoLyoqIEB0eXBlIHshSFRNTE1lZGlhRWxlbWVudH0gKi8gKG1lZGlhRWwpKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFByZWxvYWRzIGFsbCBtZWRpYSBvbiB0aGlzIHBhZ2UuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgdGhlIGNhbGxiYWNrcyBhcmUgY2FsbGVkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcHJlbG9hZEFsbE1lZGlhXygpIHtcbiAgICByZXR1cm4gdGhpcy53aGVuQWxsTWVkaWFFbGVtZW50c18oKG1lZGlhUG9vbCwgbWVkaWFFbCkgPT4ge1xuICAgICAgcmV0dXJuIG1lZGlhUG9vbC5wcmVsb2FkKC8qKiBAdHlwZSB7IUhUTUxNZWRpYUVsZW1lbnR9ICovIChtZWRpYUVsKSk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBNdXRlcyBhbGwgbWVkaWEgb24gdGhpcyBwYWdlLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHRoZSBjYWxsYmFja3MgYXJlIGNhbGxlZC5cbiAgICovXG4gIG11dGVBbGxNZWRpYSgpIHtcbiAgICByZXR1cm4gdGhpcy53aGVuQWxsTWVkaWFFbGVtZW50c18oKG1lZGlhUG9vbCwgbWVkaWFFbCkgPT4ge1xuICAgICAgcmV0dXJuIG1lZGlhUG9vbC5tdXRlKC8qKiBAdHlwZSB7IUhUTUxNZWRpYUVsZW1lbnR9ICovIChtZWRpYUVsKSk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBVbm11dGVzIGFsbCBtZWRpYSBvbiB0aGlzIHBhZ2UuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgdGhlIGNhbGxiYWNrcyBhcmUgY2FsbGVkLlxuICAgKi9cbiAgdW5tdXRlQWxsTWVkaWEoKSB7XG4gICAgcmV0dXJuIHRoaXMud2hlbkFsbE1lZGlhRWxlbWVudHNfKChtZWRpYVBvb2wsIG1lZGlhRWwpID0+IHtcbiAgICAgIHJldHVybiBtZWRpYVBvb2wudW5tdXRlKC8qKiBAdHlwZSB7IUhUTUxNZWRpYUVsZW1lbnR9ICovIChtZWRpYUVsKSk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYWxsIG1lZGlhIG9uIHRoaXMgcGFnZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gUHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHRoZSBjYWxsYmFja3MgYXJlIGNhbGxlZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlZ2lzdGVyQWxsTWVkaWFfKCkge1xuICAgIHJldHVybiB0aGlzLndoZW5BbGxNZWRpYUVsZW1lbnRzXygobWVkaWFQb29sLCBtZWRpYUVsKSA9PiB7XG4gICAgICByZXR1cm4gbWVkaWFQb29sLnJlZ2lzdGVyKC8qKiBAdHlwZSB7IUhUTUxNZWRpYUVsZW1lbnR9ICovIChtZWRpYUVsKSk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBTdGFydHMgcGxheWluZyBhbmltYXRpb25zLCBpZiB0aGUgYW5pbWF0aW9uIG1hbmFnZXIgaXMgYXZhaWxhYmxlLlxuICAgKi9cbiAgbWF5YmVTdGFydEFuaW1hdGlvbnMoKSB7XG4gICAgaWYgKCF0aGlzLmFuaW1hdGlvbk1hbmFnZXJfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuYW5pbWF0aW9uTWFuYWdlcl8uYW5pbWF0ZUluKCk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIG1heWJlQXBwbHlGaXJzdEFuaW1hdGlvbkZyYW1lKCkge1xuICAgIGlmICghdGhpcy5hbmltYXRpb25NYW5hZ2VyXykge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5hbmltYXRpb25NYW5hZ2VyXy5hcHBseUZpcnN0RnJhbWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNjYWxlXygpIHtcbiAgICBjb25zdCBzdG9yeUVsID0gZGV2KCkuYXNzZXJ0RWxlbWVudCh0aGlzLmVsZW1lbnQucGFyZW50Tm9kZSk7XG4gICAgcmV0dXJuIFBhZ2VTY2FsaW5nU2VydmljZS5mb3Ioc3RvcnlFbCkuc2NhbGUodGhpcy5lbGVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzQWN0aXZlXG4gICAqL1xuICBzZXRBY3RpdmUoaXNBY3RpdmUpIHtcbiAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FjdGl2ZScsICcnKTtcbiAgICAgIHRoaXMuYmVmb3JlVmlzaWJsZSgpO1xuICAgICAgdGhpcy5yZXN1bWVDYWxsYmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdhY3RpdmUnKTtcbiAgICAgIHRoaXMucGF1c2VDYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn0gVGhlIGRpc3RhbmNlIGZyb20gdGhlIGN1cnJlbnQgcGFnZSB0byB0aGUgYWN0aXZlIHBhZ2UuXG4gICAqL1xuICBnZXREaXN0YW5jZSgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGlzdGFuY2UnKSwgMTApO1xuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRpc3RhbmNlIFRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjdXJyZW50IHBhZ2UgdG8gdGhlIGFjdGl2ZVxuICAgKiAgICAgcGFnZS5cbiAgICovXG4gIHNldERpc3RhbmNlKGRpc3RhbmNlKSB7XG4gICAgLy8gVE9ETyhjY29yZHJ5KSByZWZhY3RvciB0aGlzIHdoZW4gcGFnZXMgYXJlIG1hbmFnZWRcbiAgICBpZiAodGhpcy5pc0FkKCkpIHtcbiAgICAgIGRpc3RhbmNlID0gTWF0aC5taW4oZGlzdGFuY2UsIDEpO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc3RhbmNlJywgZGlzdGFuY2UpO1xuICAgIHRoaXMucmVnaXN0ZXJBbGxNZWRpYV8oKTtcbiAgICBpZiAoZGlzdGFuY2UgPiAwICYmIGRpc3RhbmNlIDw9IDIpIHtcbiAgICAgIHRoaXMucHJlbG9hZEFsbE1lZGlhXygpO1xuICAgICAgdGhpcy5zY2FsZV8oKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoaXMgcGFnZSBpcyBjdXJyZW50bHkgYWN0aXZlLlxuICAgKi9cbiAgaXNBY3RpdmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2FjdGl2ZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEVtaXRzIGFuIGV2ZW50IGluZGljYXRpbmcgdGhhdCB0aGUgcHJvZ3Jlc3Mgb2YgdGhlIGN1cnJlbnQgcGFnZSBoYXMgY2hhbmdlZFxuICAgKiB0byB0aGUgc3BlY2lmaWVkIHZhbHVlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gcHJvZ3Jlc3MgVGhlIHByb2dyZXNzIGZyb20gMC4wIHRvIDEuMC5cbiAgICovXG4gIGVtaXRQcm9ncmVzc18ocHJvZ3Jlc3MpIHtcbiAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgcGFnZUlkOiB0aGlzLmVsZW1lbnQuaWQsXG4gICAgICBwcm9ncmVzcyxcbiAgICB9O1xuICAgIGNvbnN0IGV2ZW50SW5pdCA9IHtidWJibGVzOiB0cnVlfTtcbiAgICBkaXNwYXRjaEN1c3RvbSh0aGlzLndpbiwgdGhpcy5lbGVtZW50LCBFdmVudFR5cGUuUEFHRV9QUk9HUkVTUywgcGF5bG9hZCxcbiAgICAgICAgZXZlbnRJbml0KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIG9mIHRoZSBwYWdlcyB0aGF0IGFyZSBvbmUgaG9wIGZyb20gdGhpcyBwYWdlLlxuICAgKiBAcmV0dXJuIHshQXJyYXk8c3RyaW5nPn1cbiAgICovXG4gIGdldEFkamFjZW50UGFnZUlkcygpIHtcbiAgICBjb25zdCBhZGphY2VudFBhZ2VJZHMgPSBbXTtcblxuICAgIGNvbnN0IGF1dG9BZHZhbmNlTmV4dCA9XG4gICAgICAgIHRoaXMuZ2V0TmV4dFBhZ2VJZCh0cnVlIC8qIG9wdF9pc0F1dG9tYXRpY0FkdmFuY2UgKi8pO1xuICAgIGNvbnN0IG1hbnVhbEFkdmFuY2VOZXh0ID1cbiAgICAgICAgdGhpcy5nZXROZXh0UGFnZUlkKGZhbHNlIC8qIG9wdF9pc0F1dG9tYXRpY0FkdmFuY2UgKi8pO1xuICAgIGNvbnN0IHByZXZpb3VzID0gdGhpcy5nZXRQcmV2aW91c1BhZ2VJZF8oKTtcblxuICAgIGlmIChhdXRvQWR2YW5jZU5leHQpIHtcbiAgICAgIGFkamFjZW50UGFnZUlkcy5wdXNoKGF1dG9BZHZhbmNlTmV4dCk7XG4gICAgfVxuXG4gICAgaWYgKG1hbnVhbEFkdmFuY2VOZXh0ICYmIG1hbnVhbEFkdmFuY2VOZXh0ICE9IGF1dG9BZHZhbmNlTmV4dCkge1xuICAgICAgYWRqYWNlbnRQYWdlSWRzLnB1c2gobWFudWFsQWR2YW5jZU5leHQpO1xuICAgIH1cblxuICAgIGlmIChwcmV2aW91cykge1xuICAgICAgYWRqYWNlbnRQYWdlSWRzLnB1c2gocHJldmlvdXMpO1xuICAgIH1cblxuICAgIHJldHVybiBhZGphY2VudFBhZ2VJZHM7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBJRCBvZiB0aGUgcHJldmlvdXMgcGFnZSBpbiB0aGUgc3RvcnkgKGJlZm9yZSB0aGUgY3VycmVudCBwYWdlKS5cbiAgICogQHJldHVybiB7P3N0cmluZ30gUmV0dXJucyB0aGUgSUQgb2YgdGhlIG5leHQgcGFnZSBpbiB0aGUgc3RvcnksIG9yIG51bGwgaWZcbiAgICogICAgIHRoZXJlIGlzbid0IG9uZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFByZXZpb3VzUGFnZUlkXygpIHtcbiAgICBpZiAodGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZSgnaS1hbXBodG1sLXJldHVybi10bycpKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnaS1hbXBodG1sLXJldHVybi10bycpO1xuICAgIH1cblxuICAgIGNvbnN0IHByZXZpb3VzRWxlbWVudCA9IHRoaXMuZWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIGlmIChwcmV2aW91c0VsZW1lbnQgJiYgcHJldmlvdXNFbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gVEFHKSB7XG4gICAgICByZXR1cm4gcHJldmlvdXNFbGVtZW50LmlkO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cblxuICAvKipcbiAgICogR2V0cyB0aGUgSUQgb2YgdGhlIG5leHQgcGFnZSBpbiB0aGUgc3RvcnkgKGFmdGVyIHRoZSBjdXJyZW50IHBhZ2UpLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaXNBdXRvbWF0aWNBZHZhbmNlIFdoZXRoZXIgdGhpcyBuYXZpZ2F0aW9uIHdhcyBjYXVzZWRcbiAgICogICAgIGJ5IGFuIGF1dG9tYXRpYyBhZHZhbmNlbWVudCBhZnRlciBhIHRpbWVvdXQuXG4gICAqIEByZXR1cm4gez9zdHJpbmd9IFJldHVybnMgdGhlIElEIG9mIHRoZSBuZXh0IHBhZ2UgaW4gdGhlIHN0b3J5LCBvciBudWxsIGlmXG4gICAqICAgICB0aGVyZSBpc24ndCBvbmUuXG4gICAqL1xuICBnZXROZXh0UGFnZUlkKG9wdF9pc0F1dG9tYXRpY0FkdmFuY2UpIHtcbiAgICBpZiAob3B0X2lzQXV0b21hdGljQWR2YW5jZSAmJlxuICAgICAgICB0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKCdhdXRvLWFkdmFuY2UtdG8nKSkge1xuICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2F1dG8tYWR2YW5jZS10bycpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKCdpLWFtcGh0bWwtYWR2YW5jZS10bycpKSB7XG4gICAgICByZXR1cm4gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnaS1hbXBodG1sLWFkdmFuY2UtdG8nKTtcbiAgICB9XG5cbiAgICBjb25zdCBuZXh0RWxlbWVudCA9IHRoaXMuZWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKG5leHRFbGVtZW50ICYmIG5leHRFbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gVEFHKSB7XG4gICAgICByZXR1cm4gbmV4dEVsZW1lbnQuaWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBOYXZpZ2F0ZXMgdG8gdGhlIHByZXZpb3VzIHBhZ2UgaW4gdGhlIHN0b3J5LlxuICAgKi9cbiAgcHJldmlvdXMoKSB7XG4gICAgY29uc3QgdGFyZ2V0UGFnZUlkID0gdGhpcy5nZXRQcmV2aW91c1BhZ2VJZF8oKTtcblxuICAgIGlmICh0YXJnZXRQYWdlSWQgPT09IG51bGwpIHtcbiAgICAgIGRpc3BhdGNoKHRoaXMuZWxlbWVudCwgRXZlbnRUeXBlLlNIT1dfTk9fUFJFVklPVVNfUEFHRV9IRUxQLCB0cnVlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnN3aXRjaFRvXyh0YXJnZXRQYWdlSWQpO1xuICB9XG5cblxuICAvKipcbiAgICogTmF2aWdhdGVzIHRvIHRoZSBuZXh0IHBhZ2UgaW4gdGhlIHN0b3J5LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfaXNBdXRvbWF0aWNBZHZhbmNlIFdoZXRoZXIgdGhpcyBuYXZpZ2F0aW9uIHdhcyBjYXVzZWRcbiAgICogICAgIGJ5IGFuIGF1dG9tYXRpYyBhZHZhbmNlbWVudCBhZnRlciBhIHRpbWVvdXQuXG4gICAqL1xuICBuZXh0KG9wdF9pc0F1dG9tYXRpY0FkdmFuY2UpIHtcbiAgICBjb25zdCBwYWdlSWQgPSB0aGlzLmdldE5leHRQYWdlSWQob3B0X2lzQXV0b21hdGljQWR2YW5jZSk7XG5cbiAgICBpZiAocGFnZUlkID09PSBudWxsKSB7XG4gICAgICBkaXNwYXRjaCh0aGlzLmVsZW1lbnQsIEV2ZW50VHlwZS5TSE9XX0JPT0tFTkQsIC8qIG9wdF9idWJibGVzICovIHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuc3dpdGNoVG9fKHBhZ2VJZCk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZWdhdGVkIHRoZSBuYXZpZ2F0aW9uIGRlY2lzaW9uIHRvIEFNUC1TVE9SWSB2aWEgZXZlbnQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkaXJlY3Rpb24gVGhlIGRpcmVjdGlvbiBpbiB3aGljaCBuYXZpZ2F0aW9uIG5lZWRzIHRvIHRha2VzIHBsYWNlLlxuICAgKi9cbiAgbmF2aWdhdGVPblRhcChkaXJlY3Rpb24pIHtcbiAgICBjb25zdCBwYXlsb2FkID0ge2RpcmVjdGlvbn07XG4gICAgY29uc3QgZXZlbnRJbml0ID0ge2J1YmJsZXM6IHRydWV9O1xuICAgIGRpc3BhdGNoQ3VzdG9tKHRoaXMud2luLCB0aGlzLmVsZW1lbnQsIEV2ZW50VHlwZS5UQVBfTkFWSUdBVElPTiwgcGF5bG9hZCxcbiAgICAgICAgZXZlbnRJbml0KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRQYWdlSWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN3aXRjaFRvXyh0YXJnZXRQYWdlSWQpIHtcbiAgICBjb25zdCBwYXlsb2FkID0ge3RhcmdldFBhZ2VJZH07XG4gICAgY29uc3QgZXZlbnRJbml0ID0ge2J1YmJsZXM6IHRydWV9O1xuICAgIGRpc3BhdGNoQ3VzdG9tKHRoaXMud2luLCB0aGlzLmVsZW1lbnQsIEV2ZW50VHlwZS5TV0lUQ0hfUEFHRSwgcGF5bG9hZCxcbiAgICAgICAgZXZlbnRJbml0KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICByZXBvcnREZXZNb2RlRXJyb3JzXygpIHtcbiAgICBpZiAoIWdldE1vZGUoKS5kZXZlbG9wbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGdldExvZ0VudHJpZXModGhpcy5lbGVtZW50KS50aGVuKGxvZ0VudHJpZXMgPT4ge1xuICAgICAgZGlzcGF0Y2hDdXN0b20odGhpcy53aW4sIHRoaXMuZWxlbWVudCxcbiAgICAgICAgICBFdmVudFR5cGUuREVWX0xPR19FTlRSSUVTX0FWQUlMQUJMRSwgbG9nRW50cmllcywge2J1YmJsZXM6IHRydWV9KTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIERpc3BsYXlzIGEgbG9hZGluZyBzcGlubmVyIHdoZW5ldmVyIHRoZSB2aWRlbyBpcyBidWZmZXJpbmcuXG4gICAqIEhhcyB0byBiZSBjYWxsZWQgYWZ0ZXIgdGhlIG1lZGlhUG9vbCBwcmVsb2FkIG1ldGhvZCwgdGhhdCBzd2FwcyB0aGUgdmlkZW9cbiAgICogZWxlbWVudHMgd2l0aCBuZXcgYW1wIGVsZW1lbnRzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhcnRMaXN0ZW5pbmdUb1ZpZGVvRXZlbnRzXygpIHtcbiAgICBjb25zdCB2aWRlb3MgPSB0aGlzLmdldEFsbFZpZGVvc18oKTtcblxuICAgIGlmICh2aWRlb3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5kZWJvdW5jZVRvZ2dsZUxvYWRpbmdTcGlubmVyXyh0cnVlKTtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHZpZGVvcywgdmlkZW9FbCA9PiB7XG4gICAgICB0aGlzLnVubGlzdGVuZXJzXy5wdXNoKGxpc3RlbihcbiAgICAgICAgICB2aWRlb0VsLCAncGxheWluZycsICgpID0+IHRoaXMuZGVib3VuY2VUb2dnbGVMb2FkaW5nU3Bpbm5lcl8oZmFsc2UpKSk7XG4gICAgICB0aGlzLnVubGlzdGVuZXJzXy5wdXNoKGxpc3RlbihcbiAgICAgICAgICB2aWRlb0VsLCAnd2FpdGluZycsICgpID0+IHRoaXMuZGVib3VuY2VUb2dnbGVMb2FkaW5nU3Bpbm5lcl8odHJ1ZSkpKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdG9wTGlzdGVuaW5nVG9WaWRlb0V2ZW50c18oKSB7XG4gICAgdGhpcy5kZWJvdW5jZVRvZ2dsZUxvYWRpbmdTcGlubmVyXyhmYWxzZSk7XG4gICAgdGhpcy51bmxpc3RlbmVyc18uZm9yRWFjaCh1bmxpc3RlbiA9PiB1bmxpc3RlbigpKTtcbiAgICB0aGlzLnVubGlzdGVuZXJzXyA9IFtdO1xuICB9XG5cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGJ1aWxkQW5kQXBwZW5kTG9hZGluZ1NwaW5uZXJfKCkge1xuICAgIHRoaXMubG9hZGluZ1NwaW5uZXJfID0gbmV3IExvYWRpbmdTcGlubmVyKHRoaXMud2luLmRvY3VtZW50KTtcbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5sb2FkaW5nU3Bpbm5lcl8uYnVpbGQoKSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBIYXMgdG8gYmUgY2FsbGVkIHRocm91Z2ggdGhlIGBkZWJvdW5jZVRvZ2dsZUxvYWRpbmdTcGlubmVyX2AgbWV0aG9kLCB0b1xuICAgKiBhdm9pZCB0aGUgc3Bpbm5lciBmbGFzaGluZyBvbiB0aGUgc2NyZWVuIHdoZW4gdGhlIHZpZGVvIGxvb3BzLCBvciBkdXJpbmdcbiAgICogbmF2aWdhdGlvbiB0cmFuc2l0aW9ucy5cbiAgICogQnVpbGRzIHRoZSBsb2FkaW5nIHNwaW5uZXIgYW5kIGF0dGFjaGVzIGl0IHRvIHRoZSBET00gb24gZmlyc3QgY2FsbC5cbiAgICogQHBhcmFtIHtib29sZWFufSBpc0FjdGl2ZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdG9nZ2xlTG9hZGluZ1NwaW5uZXJfKGlzQWN0aXZlKSB7XG4gICAgdGhpcy5nZXRWc3luYygpLm11dGF0ZSgoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMubG9hZGluZ1NwaW5uZXJfKSB7XG4gICAgICAgIHRoaXMuYnVpbGRBbmRBcHBlbmRMb2FkaW5nU3Bpbm5lcl8oKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5sb2FkaW5nU3Bpbm5lcl8udG9nZ2xlKGlzQWN0aXZlKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIGNoZWNrIHRvIHNlZSBpZiB0aGlzIHBhZ2UgaXMgYSB3cmFwcGVyIGZvciBhbiBhZFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNBZCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZShBRFZFUlRJU0VNRU5UX0FUVFJfTkFNRSk7XG4gIH1cbn1cblxuQU1QLnJlZ2lzdGVyRWxlbWVudCgnYW1wLXN0b3J5LXBhZ2UnLCBBbXBTdG9yeVBhZ2UpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge0VtYmVkTW9kZX0gZnJvbSAnLi9lbWJlZC1tb2RlJztcbmltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAnLi4vLi4vLi4vc3JjL29ic2VydmFibGUnO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuaW1wb3J0IHtpc0FycmF5fSBmcm9tICcuLi8uLi8uLi9zcmMvdHlwZXMnO1xuaW1wb3J0IHttYXB9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9vYmplY3QnO1xuXG5cbi8qKiBAdHlwZWRlZiB7e3R5cGU6ICFTdGF0ZVR5cGUsIHZhbHVlOiAqfX0gKi9cbmV4cG9ydCBsZXQgU3RhdGVDaGFuZ2VFdmVudERlZjtcblxuLyoqIEB0eXBlZGVmIHshT2JqZWN0PCFTdGF0ZVR5cGUsICFTdGF0ZT59ICovXG5leHBvcnQgbGV0IFN0YXRlc01hcDtcblxuLyoqIEBwcml2YXRlIEBjb25zdCBAZW51bSB7c3RyaW5nfSAqL1xuZXhwb3J0IGNvbnN0IFN0YXRlVHlwZSA9IHtcbiAgQk9PS0VORF9BQ1RJVkU6ICdib29rZW5kYWN0aXZlJyxcbiAgTkFWSUdBVElPTl9PVkVSTEFZX0hJTlRfU0hPV046ICduYXZpZ2F0aW9ub3ZlcmxheWhpbnRzaG93bicsXG4gIE5PX1BSRVZJT1VTX1BBR0VfSEVMUF9TSE9XTjogJ25vcHJldmlvdXNwYWdlaGVscHNob3duJyxcbiAgQUxMT1dfQVVUT01BVElDX0FEX0lOU0VSVElPTjogJ2FsbG93YXV0b21hdGljYWRpbnNlcnRpb24nLFxuICBTWVNURU1fTEFZRVJfQlVUVE9OU19TSE9XTjogJ3N5c3RlbWxheWVyYnV0dG9uc3Nob3duJyxcbiAgTVVURV9BVURJT19CWV9ERUZBVUxUOiAnbXV0ZWF1ZGlvYnlkZWZhdWx0Jyxcbn07XG5cbi8qKlxuICpcbiAqL1xuZXhwb3J0IGNsYXNzIEFtcFN0b3J5U3RhdGVTZXJ2aWNlIHtcbiAgLy8gVE9ETyhuZXdtdWlzKTogU2NvcGUgdGhpcyB0byBzdG9yeSB1c2luZyBhIHN0YXRpYyBmb3IoLi4uKSBmdW5jdGlvbiBzbyB0aGF0XG4gIC8vIGl0IGNhbiBiZSByZXRyaWV2ZWQgZnJvbSBvdGhlciBjbGFzc2VzIChlLmcuIEFtcFN0b3J5UGFnZSkgd2l0aG91dCBkaXJlY3RseVxuICAvLyBwYXNzaW5nIGl0LlxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvKiogQHByaXZhdGUgeyFTdGF0ZXNNYXB9ICovXG4gICAgdGhpcy5zdGF0ZXNfID0gbWFwKHt9KTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IVN0YXRlc01hcH0gKi9cbiAgICB0aGlzLmRlZmF1bHRTdGF0ZXNfID0gbWFwKHt9KTtcblxuICAgIC8vIEluaXRpYWxpemUgZGVmYXVsdCBzdGF0ZXMuXG4gICAgdGhpcy5pbml0aWFsaXplU3RhdGUodGhpcy5kZWZhdWx0U3RhdGVzXywgW1xuICAgICAgbmV3IFN0YXRlKFN0YXRlVHlwZS5CT09LRU5EX0FDVElWRSxcbiAgICAgICAgICBmYWxzZSAvKiBkZWZhdWx0VmFsdWUgKi8sIHRydWUgLyogaXNNb2RpZmlhYmxlICovKSxcbiAgICAgIG5ldyBTdGF0ZShTdGF0ZVR5cGUuTkFWSUdBVElPTl9PVkVSTEFZX0hJTlRfU0hPV04sXG4gICAgICAgICAgZmFsc2UgLyogZGVmYXVsdFZhbHVlICovLCB0cnVlIC8qIGlzTW9kaWZpYWJsZSAqLyksXG4gICAgICBuZXcgU3RhdGUoU3RhdGVUeXBlLk5PX1BSRVZJT1VTX1BBR0VfSEVMUF9TSE9XTixcbiAgICAgICAgICBmYWxzZSAvKiBkZWZhdWx0VmFsdWUgKi8sIHRydWUgLyogaXNNb2RpZmlhYmxlICovKSxcbiAgICAgIG5ldyBTdGF0ZShTdGF0ZVR5cGUuQUxMT1dfQVVUT01BVElDX0FEX0lOU0VSVElPTixcbiAgICAgICAgICB0cnVlIC8qIGRlZmF1bHRWYWx1ZSAqLywgdHJ1ZSAvKiBpc01vZGlmaWFibGUgKi8pLFxuICAgICAgbmV3IFN0YXRlKFN0YXRlVHlwZS5TWVNURU1fTEFZRVJfQlVUVE9OU19TSE9XTixcbiAgICAgICAgICB0cnVlIC8qIGRlZmF1bHRWYWx1ZSAqLywgdHJ1ZSAvKiBpc01vZGlmaWFibGUgKi8pLFxuICAgICAgbmV3IFN0YXRlKFN0YXRlVHlwZS5NVVRFX0FVRElPX0JZX0RFRkFVTFQsXG4gICAgICAgICAgdHJ1ZSAvKiBkZWZhdWx0VmFsdWUgKi8sIHRydWUgLyogaXNNb2RpZmlhYmxlICovKSxcbiAgICBdKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFTdGF0ZVR5cGV9IHN0YXRlVHlwZVxuICAgKiBAcmV0dXJuIHshU3RhdGV9XG4gICAqL1xuICBnZXRTdGF0ZShzdGF0ZVR5cGUpIHtcbiAgICByZXR1cm4gZGV2KCkuYXNzZXJ0KFxuICAgICAgICB0aGlzLnN0YXRlc19bc3RhdGVUeXBlXSB8fCB0aGlzLmRlZmF1bHRTdGF0ZXNfW3N0YXRlVHlwZV0sXG4gICAgICAgIGBVbmtub3duIHN0YXRlICR7c3RhdGVUeXBlfS5gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFTdGF0ZXNNYXB9IHN0YXRlc01hcCBUaGUgbWFwIHRvIGJlIHBvcHVsYXRlZCB3aXRoIHN0YXRlcy5cbiAgICogQHBhcmFtIHshU3RhdGV8IUFycmF5PCFTdGF0ZT59IHN0YXRlT3JBcnIgVGhlIHN0YXRlIG9yIGxpc3Qgb2Ygc3RhdGVzIHRvXG4gICAqICAgICBwb3B1bGF0ZS5cbiAgICovXG4gIGluaXRpYWxpemVTdGF0ZShzdGF0ZXNNYXAsIHN0YXRlT3JBcnIpIHtcbiAgICBpZiAoaXNBcnJheShzdGF0ZU9yQXJyKSkge1xuICAgICAgc3RhdGVPckFyci5mb3JFYWNoKHN0YXRlID0+IHtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplU2luZ2xlVmFsdWVfKHN0YXRlc01hcCwgc3RhdGUpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZVNpbmdsZVZhbHVlXyhzdGF0ZXNNYXAsXG4gICAgICAgICAgLyoqIEB0eXBlIHshU3RhdGV9ICovIChzdGF0ZU9yQXJyKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVN0YXRlc01hcH0gc3RhdGVzTWFwIFRoZSBtYXAgdG8gYmUgcG9wdWxhdGVkIHdpdGggc3RhdGVzLlxuICAgKiBAcGFyYW0geyFTdGF0ZX0gc3RhdGUgVGhlIHN0YXRlIHRvIHBvcHVsYXRlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaW5pdGlhbGl6ZVNpbmdsZVZhbHVlXyhzdGF0ZXNNYXAsIHN0YXRlKSB7XG4gICAgZGV2KCkuYXNzZXJ0KCFzdGF0ZXNNYXBbc3RhdGUudHlwZV0sXG4gICAgICAgIGBEdXBsaWNhdGUgZW50cmllcyBmb3Igc3RhdGUgJHtzdGF0ZS50eXBlfS5gKTtcbiAgICBzdGF0ZXNNYXBbc3RhdGUudHlwZV0gPSBzdGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbWJlZE1vZGV9IGVtYmVkTW9kZVxuICAgKi9cbiAgaW5pdGlhbGl6ZUVtYmVkTW9kZShlbWJlZE1vZGUpIHtcbiAgICBzd2l0Y2ggKGVtYmVkTW9kZSkge1xuICAgICAgY2FzZSBFbWJlZE1vZGUuTkFNRV9UQkQ6XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZVN0YXRlKHRoaXMuc3RhdGVzXywgW1xuICAgICAgICAgIG5ldyBTdGF0ZShTdGF0ZVR5cGUuQk9PS0VORF9BQ1RJVkUsXG4gICAgICAgICAgICAgIGZhbHNlIC8qIGRlZmF1bHRWYWx1ZSAqLywgZmFsc2UgLyogaXNNb2RpZmlhYmxlICovKSxcbiAgICAgICAgICBuZXcgU3RhdGUoU3RhdGVUeXBlLk5BVklHQVRJT05fT1ZFUkxBWV9ISU5UX1NIT1dOLFxuICAgICAgICAgICAgICBmYWxzZSAvKiBkZWZhdWx0VmFsdWUgKi8sIGZhbHNlIC8qIGlzTW9kaWZpYWJsZSAqLyksXG4gICAgICAgICAgbmV3IFN0YXRlKFN0YXRlVHlwZS5OT19QUkVWSU9VU19QQUdFX0hFTFBfU0hPV04sXG4gICAgICAgICAgICAgIGZhbHNlIC8qIGRlZmF1bHRWYWx1ZSAqLywgdHJ1ZSAvKiBpc01vZGlmaWFibGUgKi8pLFxuICAgICAgICAgIG5ldyBTdGF0ZShTdGF0ZVR5cGUuQUxMT1dfQVVUT01BVElDX0FEX0lOU0VSVElPTixcbiAgICAgICAgICAgICAgZmFsc2UgLyogZGVmYXVsdFZhbHVlICovLCBmYWxzZSAvKiBpc01vZGlmaWFibGUgKi8pLFxuICAgICAgICAgIG5ldyBTdGF0ZShTdGF0ZVR5cGUuU1lTVEVNX0xBWUVSX0JVVFRPTlNfU0hPV04sXG4gICAgICAgICAgICAgIGZhbHNlIC8qIGRlZmF1bHRWYWx1ZSAqLywgZmFsc2UgLyogaXNNb2RpZmlhYmxlICovKSxcbiAgICAgICAgICBuZXcgU3RhdGUoU3RhdGVUeXBlLk1VVEVfQVVESU9fQllfREVGQVVMVCxcbiAgICAgICAgICAgICAgZmFsc2UgLyogZGVmYXVsdFZhbHVlICovLCBmYWxzZSAvKiBpc01vZGlmaWFibGUgKi8pLFxuICAgICAgICBdKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG59XG5cblxuLyoqXG4gKiBUT0RPKG5ld211aXMpOiBQZXJoYXBzIHNvbWUgb2YgdGhpcyBjYW4gYmUgbWVyZ2VkIHdpdGhcbiAqIC4uLy4uLy4uL3NyYy9maW5pdGUtc3RhdGUtbWFjaGluZS5qc1xuICogQHRlbXBsYXRlIFRcbiAqL1xuY2xhc3MgU3RhdGUge1xuICAvKipcbiAgICogQHBhcmFtIHshU3RhdGVUeXBlfSB0eXBlXG4gICAqIEBwYXJhbSB7VH0gZGVmYXVsdFZhbHVlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNNb2RpZmlhYmxlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBkZWZhdWx0VmFsdWUsIGlzTW9kaWZpYWJsZSkge1xuICAgIC8qKiBAY29uc3QgeyFTdGF0ZVR5cGV9ICovXG4gICAgdGhpcy50eXBlID0gdHlwZTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7VH0gKi9cbiAgICB0aGlzLnZhbHVlXyA9IGRlZmF1bHRWYWx1ZTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFPYnNlcnZhYmxlPFN0YXRlQ2hhbmdlRXZlbnREZWY+fSAqL1xuICAgIHRoaXMub2JzZXJ2YWJsZV8gPSBuZXcgT2JzZXJ2YWJsZSgpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzTW9kaWZpYWJsZV8gPSBpc01vZGlmaWFibGU7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzTW9kaWZpYWJsZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pc01vZGlmaWFibGVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge1R9XG4gICAqL1xuICBnZXRWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbighU3RhdGVDaGFuZ2VFdmVudERlZik6dm9pZH0gc3RhdGVDaGFuZ2VGblxuICAgKi9cbiAgb2JzZXJ2ZShzdGF0ZUNoYW5nZUZuKSB7XG4gICAgdGhpcy5vYnNlcnZhYmxlXy5hZGQoc3RhdGVDaGFuZ2VGbik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtUfSB2YWx1ZSBUaGUgbmV3IHN0YXRlXG4gICAqL1xuICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmlzTW9kaWZpYWJsZSkge1xuICAgICAgZGV2KCkuZXJyb3IoJ0FNUC1TVE9SWScsXG4gICAgICAgICAgYENhbm5vdCBjaGFuZ2UgcmVhZG9ubHkgc3RhdGUgJHt0aGlzLmlzTW9kaWZpYWJsZX0uYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHZhbHVlID09PSB0aGlzLmdldFZhbHVlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnZhbHVlXyA9IHZhbHVlO1xuICAgIHRoaXMub25TdGF0ZVVwZGF0ZWRfKCk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgb25TdGF0ZVVwZGF0ZWRfKCkge1xuICAgIHRoaXMub2JzZXJ2YWJsZV8uZmlyZSh7dHlwZTogdGhpcy50eXBlLCB2YWx1ZTogdGhpcy52YWx1ZV99KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBFbWJlZHMgYSBzdG9yeVxuICpcbiAqIEV4YW1wbGU6XG4gKiA8Y29kZT5cbiAqIDxhbXAtc3Rvcnkgc3RhbmRhbG9uZSBib29rZW5kLWNvbmZpZy1zcmM9XCJib29rZW5kLmpzb25cIj5cbiAqICAgWy4uLl1cbiAqIDwvYW1wLXN0b3J5PlxuICogPC9jb2RlPlxuICovXG5pbXBvcnQgJy4vYW1wLXN0b3J5LWF1dG8tYWRzJztcbmltcG9ydCAnLi9hbXAtc3RvcnktZ3JpZC1sYXllcic7XG5pbXBvcnQgJy4vYW1wLXN0b3J5LXBhZ2UnO1xuaW1wb3J0IHtBY3Rpb25UcnVzdH0gZnJvbSAnLi4vLi4vLi4vc3JjL2FjdGlvbi10cnVzdCc7XG5pbXBvcnQge0FtcFN0b3J5QW5hbHl0aWNzfSBmcm9tICcuL2FuYWx5dGljcyc7XG5pbXBvcnQge0FtcFN0b3J5QmFja2dyb3VuZH0gZnJvbSAnLi9iYWNrZ3JvdW5kJztcbmltcG9ydCB7QW1wU3RvcnlIaW50fSBmcm9tICcuL2FtcC1zdG9yeS1oaW50JztcbmltcG9ydCB7XG4gIEFtcFN0b3J5U3RhdGVTZXJ2aWNlLFxuICBTdGF0ZVR5cGUsXG59IGZyb20gJy4vYW1wLXN0b3J5LXN0YXRlLXNlcnZpY2UnO1xuaW1wb3J0IHtBbXBTdG9yeVZhcmlhYmxlU2VydmljZX0gZnJvbSAnLi92YXJpYWJsZS1zZXJ2aWNlJztcbmltcG9ydCB7Qm9va2VuZH0gZnJvbSAnLi9ib29rZW5kJztcbmltcG9ydCB7Q1NTfSBmcm9tICcuLi8uLi8uLi9idWlsZC9hbXAtc3RvcnktMC4xLmNzcyc7XG5pbXBvcnQge0NvbW1vblNpZ25hbHN9IGZyb20gJy4uLy4uLy4uL3NyYy9jb21tb24tc2lnbmFscyc7XG5pbXBvcnQge1xuICBEb3VibGV0YXBSZWNvZ25pemVyLFxuICBTd2lwZVhZUmVjb2duaXplcixcbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2dlc3R1cmUtcmVjb2duaXplcnMnO1xuaW1wb3J0IHtFdmVudFR5cGUsIGRpc3BhdGNofSBmcm9tICcuL2V2ZW50cyc7XG5pbXBvcnQge0dlc3R1cmVzfSBmcm9tICcuLi8uLi8uLi9zcmMvZ2VzdHVyZSc7XG5pbXBvcnQge0tleUNvZGVzfSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMva2V5LWNvZGVzJztcbmltcG9ydCB7TGF5b3V0fSBmcm9tICcuLi8uLi8uLi9zcmMvbGF5b3V0JztcbmltcG9ydCB7TWVkaWFQb29sLCBNZWRpYVR5cGV9IGZyb20gJy4vbWVkaWEtcG9vbCc7XG5pbXBvcnQge05hdmlnYXRpb25TdGF0ZX0gZnJvbSAnLi9uYXZpZ2F0aW9uLXN0YXRlJztcbmltcG9ydCB7T1JJR0lOX1dISVRFTElTVH0gZnJvbSAnLi9vcmlnaW4td2hpdGVsaXN0JztcbmltcG9ydCB7UGFnaW5hdGlvbkJ1dHRvbnN9IGZyb20gJy4vcGFnaW5hdGlvbi1idXR0b25zJztcbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge1NoYXJlV2lkZ2V0fSBmcm9tICcuL3NoYXJlJztcbmltcG9ydCB7U3lzdGVtTGF5ZXJ9IGZyb20gJy4vc3lzdGVtLWxheWVyJztcbmltcG9ydCB7VGFwTmF2aWdhdGlvbkRpcmVjdGlvbn0gZnJvbSAnLi9wYWdlLWFkdmFuY2VtZW50JztcbmltcG9ydCB7XG4gIGNsb3Nlc3QsXG4gIGVzY2FwZUNzc1NlbGVjdG9ySWRlbnQsXG4gIG1hdGNoZXMsXG4gIHJlbW92ZUVsZW1lbnQsXG4gIHNjb3BlZFF1ZXJ5U2VsZWN0b3JBbGwsXG59IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuaW1wb3J0IHtcbiAgY29tcHV0ZWRTdHlsZSxcbiAgcmVzZXRTdHlsZXMsXG4gIHNldEltcG9ydGFudFN0eWxlcyxcbiAgc2V0U3R5bGUsXG59IGZyb20gJy4uLy4uLy4uL3NyYy9zdHlsZSc7XG5pbXBvcnQge2RlYm91bmNlfSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvcmF0ZS1saW1pdCc7XG5pbXBvcnQge2RldiwgdXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2RpY3R9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9vYmplY3QnO1xuaW1wb3J0IHtmaW5kSW5kZXh9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9hcnJheSc7XG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4uLy4uLy4uL3NyYy9tb2RlJztcbmltcG9ydCB7Z2V0U291cmNlT3JpZ2luLCBwYXJzZVVybH0gZnJvbSAnLi4vLi4vLi4vc3JjL3VybCc7XG5pbXBvcnQge2lzRXhwZXJpbWVudE9uLCB0b2dnbGVFeHBlcmltZW50fSBmcm9tICcuLi8uLi8uLi9zcmMvZXhwZXJpbWVudHMnO1xuaW1wb3J0IHtvbmNlfSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvZnVuY3Rpb24nO1xuaW1wb3J0IHtwYXJzZUVtYmVkTW9kZX0gZnJvbSAnLi9lbWJlZC1tb2RlJztcbmltcG9ydCB7cmVnaXN0ZXJTZXJ2aWNlQnVpbGRlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2UnO1xuaW1wb3J0IHtyZWxhdGVkQXJ0aWNsZXNGcm9tSnNvbn0gZnJvbSAnLi9yZWxhdGVkLWFydGljbGVzJztcbmltcG9ydCB7cmVuZGVyU2ltcGxlVGVtcGxhdGV9IGZyb20gJy4vc2ltcGxlLXRlbXBsYXRlJztcbmltcG9ydCB7c3RyaW5nSGFzaDMyfSBmcm9tICcuLi8uLi8uLi9zcmMvc3RyaW5nJztcbmltcG9ydCB7dXBncmFkZUJhY2tncm91bmRBdWRpb30gZnJvbSAnLi9hdWRpbyc7XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IFBSRV9BQ1RJVkVfUEFHRV9BVFRSSUJVVEVfTkFNRSA9ICdwcmUtYWN0aXZlJztcblxuLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgQk9PS0VORF9DT05GSUdfQVRUUklCVVRFX05BTUUgPSAnYm9va2VuZC1jb25maWctc3JjJztcblxuLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgQU1QX1NUT1JZX1NUQU5EQUxPTkVfQVRUUklCVVRFID0gJ3N0YW5kYWxvbmUnO1xuXG4vKiogQHByaXZhdGUgQGNvbnN0IHtudW1iZXJ9ICovXG5jb25zdCBERVNLVE9QX1dJRFRIX1RIUkVTSE9MRCA9IDEwMjQ7XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3Qge251bWJlcn0gKi9cbmNvbnN0IERFU0tUT1BfSEVJR0hUX1RIUkVTSE9MRCA9IDU1MDtcblxuLyoqIEBwcml2YXRlIEBjb25zdCB7bnVtYmVyfSAqL1xuY29uc3QgTUlOX1NXSVBFX0ZPUl9ISU5UX09WRVJMQVlfUFggPSA1MDtcblxuLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgQURWQU5DRV9UT19BVFRSID0gJ2ktYW1waHRtbC1hZHZhbmNlLXRvJztcblxuLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgUkVUVVJOX1RPX0FUVFIgPSAnaS1hbXBodG1sLXJldHVybi10byc7XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IEFVVE9fQURWQU5DRV9UT19BVFRSID0gJ2F1dG8tYWR2YW5jZS10byc7XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IEFEX1NIT1dJTkdfQVRUUiA9ICdhZC1zaG93aW5nJztcblxuXG4vKipcbiAqIFRoZSBkdXJhdGlvbiBvZiB0aW1lIChpbiBtaWxsaXNlY29uZHMpIHRvIHdhaXQgZm9yIGEgcGFnZSB0byBiZSBsb2FkZWQsXG4gKiBiZWZvcmUgdGhlIHN0b3J5IGJlY29tZXMgdmlzaWJsZS5cbiAqIEBjb25zdCB7bnVtYmVyfVxuICovXG5jb25zdCBQQUdFX0xPQURfVElNRU9VVF9NUyA9IDUwMDA7XG5cblxuLyoqXG4gKiBDU1MgY2xhc3MgZm9yIGFuIGFtcC1zdG9yeSB0aGF0IGluZGljYXRlcyB0aGUgaW5pdGlhbCBsb2FkIGZvciB0aGUgc3RvcnkgaGFzXG4gKiBjb21wbGV0ZWQuXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuY29uc3QgU1RPUllfTE9BREVEX0NMQVNTX05BTUUgPSAnaS1hbXBodG1sLXN0b3J5LWxvYWRlZCc7XG5cbi8qKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBudW1iZXI+fSAqL1xuY29uc3QgTUFYX01FRElBX0VMRU1FTlRfQ09VTlRTID0ge1xuICBbTWVkaWFUeXBlLkFVRElPXTogNCxcbiAgW01lZGlhVHlwZS5WSURFT106IDgsXG59O1xuXG5cbi8qKlxuICogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9XG4gKi9cbmNvbnN0IEFVRElPX01VVEVEX0FUVFJJQlVURSA9ICdtdXRlZCc7XG5cbi8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuY29uc3QgVEFHID0gJ2FtcC1zdG9yeSc7XG5cbmNvbnN0IExBTkRTQ0FQRV9PVkVSTEFZX0NMQVNTID0gJ2ktYW1waHRtbC1zdG9yeS1sYW5kc2NhcGUnO1xuXG5cblxuY29uc3QgTEFORFNDQVBFX09SSUVOVEFUSU9OX1dBUk5JTkcgPSBbXG4gIHtcbiAgICB0YWc6ICdkaXYnLFxuICAgIGF0dHJzOiBkaWN0KHtcbiAgICAgICdjbGFzcyc6ICdpLWFtcGh0bWwtc3Rvcnktbm8tcm90YXRpb24tb3ZlcmxheSAnICtcbiAgICAgICAgICAnaS1hbXBodG1sLXN0b3J5LXN5c3RlbS1yZXNldCd9KSxcbiAgICBjaGlsZHJlbjogW1xuICAgICAge1xuICAgICAgICB0YWc6ICdkaXYnLFxuICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1vdmVybGF5LWNvbnRhaW5lcid9KSxcbiAgICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0YWc6ICdkaXYnLFxuICAgICAgICAgICAgYXR0cnM6IGRpY3QoeydjbGFzcyc6ICdpLWFtcGh0bWwtcm90YXRlLWljb24nfSksXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0YWc6ICdkaXYnLFxuICAgICAgICAgICAgYXR0cnM6IGRpY3QoeydjbGFzcyc6ICdpLWFtcGh0bWwtc3Rvcnktb3ZlcmxheS10ZXh0J30pLFxuICAgICAgICAgICAgdGV4dDogJ1RoZSBwYWdlIGlzIGJlc3Qgdmlld2VkIGluIHBvcnRyYWl0IG1vZGUnLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9LFxuICAgIF0sXG4gIH0sXG5dO1xuXG5jb25zdCBERVNLVE9QX1NJWkVfV0FSTklORyA9IFtcbiAge1xuICAgIHRhZzogJ2RpdicsXG4gICAgYXR0cnM6IGRpY3Qoe1xuICAgICAgJ2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1uby1yb3RhdGlvbi1vdmVybGF5ICcgK1xuICAgICAgICAgICdpLWFtcGh0bWwtc3Rvcnktc3lzdGVtLXJlc2V0J30pLFxuICAgIGNoaWxkcmVuOiBbXG4gICAgICB7XG4gICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgIGF0dHJzOiBkaWN0KHsnY2xhc3MnOiAnaS1hbXBodG1sLW92ZXJsYXktY29udGFpbmVyJ30pLFxuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1kZXNrdG9wLXNpemUtaWNvbid9KSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1vdmVybGF5LXRleHQnfSksXG4gICAgICAgICAgICB0ZXh0OiAnRXhwYW5kIHlvdXIgd2luZG93IHRvIHZpZXcgdGhpcyBleHBlcmllbmNlJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSxcbiAgICBdLFxuICB9LFxuXTtcblxuY29uc3QgVU5TVVBQT1JURURfQlJPV1NFUl9XQVJOSU5HID0gW1xuICB7XG4gICAgdGFnOiAnZGl2JyxcbiAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS11bnN1cHBvcnRlZC1icm93c2VyLW92ZXJsYXknfSksXG4gICAgY2hpbGRyZW46IFtcbiAgICAgIHtcbiAgICAgICAgdGFnOiAnZGl2JyxcbiAgICAgICAgYXR0cnM6IGRpY3QoeydjbGFzcyc6ICdpLWFtcGh0bWwtb3ZlcmxheS1jb250YWluZXInfSksXG4gICAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGFnOiAnZGl2JyxcbiAgICAgICAgICAgIGF0dHJzOiBkaWN0KHsnY2xhc3MnOiAnaS1hbXBodG1sLWdlYXItaWNvbid9KSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1vdmVybGF5LXRleHQnfSksXG4gICAgICAgICAgICB0ZXh0OiAnV2VcXCdyZSBzb3JyeSwgaXQgbG9va3MgbGlrZSB5b3VyIGJyb3dzZXIgZG9lc25cXCd0IHN1cHBvcnQgJyArXG4gICAgICAgICAgICAgICAgJ3RoaXMgZXhwZXJpZW5jZScsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSxcbl07XG5cblxuLyoqXG4gKiBDb250YWluZXIgZm9yIFwicGlsbC1zdHlsZVwiIHNoYXJlIHdpZGdldCwgcmVuZGVyZWQgb24gZGVza3RvcC5cbiAqIEBwcml2YXRlIEBjb25zdCB7IS4vc2ltcGxlLXRlbXBsYXRlLkVsZW1lbnREZWZ9XG4gKi9cbmNvbnN0IFNIQVJFX1dJREdFVF9QSUxMX0NPTlRBSU5FUiA9IHtcbiAgdGFnOiAnZGl2JyxcbiAgYXR0cnM6IGRpY3QoeydjbGFzcyc6ICdpLWFtcGh0bWwtc3Rvcnktc2hhcmUtcGlsbCd9KSxcbn07XG5cblxuXG4vKipcbiAqIFNlbGVjdG9yIGZvciBlbGVtZW50cyB0aGF0IHNob3VsZCBiZSBoaWRkZW4gd2hlbiB0aGUgYm9va2VuZCBpcyBvcGVuIG9uXG4gKiBkZXNrdG9wIHZpZXcuXG4gKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ31cbiAqL1xuY29uc3QgSElERV9PTl9CT09LRU5EX1NFTEVDVE9SID1cbiAgICAnYW1wLXN0b3J5LXBhZ2UsIC5pLWFtcGh0bWwtc3Rvcnktc3lzdGVtLWxheWVyJztcblxuXG4vKipcbiAqIEBpbXBsZW1lbnRzIHsuL21lZGlhLXBvb2wuTWVkaWFQb29sUm9vdH1cbiAqL1xuZXhwb3J0IGNsYXNzIEFtcFN0b3J5IGV4dGVuZHMgQU1QLkJhc2VFbGVtZW50IHtcbiAgLyoqIEBwYXJhbSB7IUFtcEVsZW1lbnR9IGVsZW1lbnQgKi9cbiAgY29uc3RydWN0b3IoZWxlbWVudCkge1xuICAgIHN1cGVyKGVsZW1lbnQpO1xuXG4gICAgLyoqIEBwcml2YXRlIHshTmF2aWdhdGlvblN0YXRlfSAqL1xuICAgIHRoaXMubmF2aWdhdGlvblN0YXRlXyA9XG4gICAgICAgIG5ldyBOYXZpZ2F0aW9uU3RhdGUoZWxlbWVudCwgKCkgPT4gdGhpcy5oYXNCb29rZW5kXygpKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBbXBTdG9yeVN0YXRlU2VydmljZX0gKi9cbiAgICB0aGlzLnN0YXRlU2VydmljZV8gPSBuZXcgQW1wU3RvcnlTdGF0ZVNlcnZpY2UoKTtcblxuICAgIC8qKiBAY29uc3QgQHByaXZhdGUgeyEuLi8uLi8uLi9zcmMvc2VydmljZS92c3luYy1pbXBsLlZzeW5jfSAqL1xuICAgIHRoaXMudnN5bmNfID0gdGhpcy5nZXRWc3luYygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUJvb2tlbmR9ICovXG4gICAgdGhpcy5ib29rZW5kXyA9IG5ldyBCb29rZW5kKHRoaXMud2luKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFTeXN0ZW1MYXllcn0gKi9cbiAgICB0aGlzLnN5c3RlbUxheWVyXyA9IG5ldyBTeXN0ZW1MYXllcih0aGlzLndpbiwgdGhpcy5zdGF0ZVNlcnZpY2VfKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBcnJheTxzdHJpbmc+fSAqL1xuICAgIHRoaXMucGFnZUhpc3RvcnlTdGFja18gPSBbXTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBcnJheTwhLi9hbXAtc3RvcnktcGFnZS5BbXBTdG9yeVBhZ2U+fSAqL1xuICAgIHRoaXMucGFnZXNfID0gW107XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQXJyYXk8IS4vYW1wLXN0b3J5LXBhZ2UuQW1wU3RvcnlQYWdlPn0gKi9cbiAgICB0aGlzLmFkUGFnZXNfID0gW107XG5cbiAgICAvKiogQGNvbnN0IEBwcml2YXRlIHshQW1wU3RvcnlWYXJpYWJsZVNlcnZpY2V9ICovXG4gICAgdGhpcy52YXJpYWJsZVNlcnZpY2VfID0gbmV3IEFtcFN0b3J5VmFyaWFibGVTZXJ2aWNlKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshZnVuY3Rpb24oKTohUHJvbWlzZTw/Li9ib29rZW5kLkJvb2tlbmRDb25maWdEZWY+fSAqL1xuICAgIHRoaXMubG9hZEJvb2tlbmRDb25maWdfID0gb25jZSgoKSA9PiB0aGlzLmxvYWRCb29rZW5kQ29uZmlnSW1wbF8oKSk7XG5cbiAgICAvKiogQHByaXZhdGUgez8uL2FtcC1zdG9yeS1wYWdlLkFtcFN0b3J5UGFnZX0gKi9cbiAgICB0aGlzLmFjdGl2ZVBhZ2VfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgKi9cbiAgICB0aGlzLmRlc2t0b3BNZWRpYV8gPSB0aGlzLndpbi5tYXRjaE1lZGlhKFxuICAgICAgICBgKG1pbi13aWR0aDogJHtERVNLVE9QX1dJRFRIX1RIUkVTSE9MRH1weCkgYW5kIGAgK1xuICAgICAgICBgKG1pbi1oZWlnaHQ6ICR7REVTS1RPUF9IRUlHSFRfVEhSRVNIT0xEfXB4KWApO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCAqL1xuICAgIHRoaXMuY2FuUm90YXRlVG9EZXNrdG9wTWVkaWFfID0gdGhpcy53aW4ubWF0Y2hNZWRpYShcbiAgICAgICAgYChtaW4td2lkdGg6ICR7REVTS1RPUF9IRUlHSFRfVEhSRVNIT0xEfXB4KSBhbmQgYCArXG4gICAgICAgIGAobWluLWhlaWdodDogJHtERVNLVE9QX1dJRFRIX1RIUkVTSE9MRH1weClgKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0FtcFN0b3J5QmFja2dyb3VuZH0gKi9cbiAgICB0aGlzLmJhY2tncm91bmRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Py4vcGFnaW5hdGlvbi1idXR0b25zLlBhZ2luYXRpb25CdXR0b25zfSAqL1xuICAgIHRoaXMucGFnaW5hdGlvbkJ1dHRvbnNfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VsZW1lbnR9ICovXG4gICAgdGhpcy50b3BCYXJfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P1NoYXJlV2lkZ2V0fSAqL1xuICAgIHRoaXMuc2hhcmVXaWRnZXRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBcnJheTxzdHJpbmc+fSAqL1xuICAgIHRoaXMub3JpZ2luV2hpdGVsaXN0XyA9IE9SSUdJTl9XSElURUxJU1Q7XG5cbiAgICAvKiogQHByaXZhdGUgeyFBbXBTdG9yeUhpbnR9ICovXG4gICAgdGhpcy5hbXBTdG9yeUhpbnRfID0gbmV3IEFtcFN0b3J5SGludCh0aGlzLndpbik7XG5cbiAgICAvKiogQHByaXZhdGUgeyFNZWRpYVBvb2x9ICovXG4gICAgdGhpcy5tZWRpYVBvb2xfID0gTWVkaWFQb29sLmZvcih0aGlzKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi8uLi8uLi9zcmMvc2VydmljZS90aW1lci1pbXBsLlRpbWVyfSAqL1xuICAgIHRoaXMudGltZXJfID0gU2VydmljZXMudGltZXJGb3IodGhpcy53aW4pO1xuICB9XG5cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGJ1aWxkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5hc3NlcnRBbXBTdG9yeUV4cGVyaW1lbnRfKCk7XG5cbiAgICBpZiAodGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZShBTVBfU1RPUllfU1RBTkRBTE9ORV9BVFRSSUJVVEUpKSB7XG4gICAgICB0aGlzLmluaXRpYWxpemVTdGFuZGFsb25lU3RvcnlfKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNEZXNrdG9wXygpKSB7XG4gICAgICB0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCdkZXNrdG9wJywnJyk7XG4gICAgfVxuICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdhbXAtc3RvcnktcGFnZScpLnNldEF0dHJpYnV0ZSgnYWN0aXZlJywgJycpO1xuXG4gICAgdGhpcy5pbml0aWFsaXplTGlzdGVuZXJzXygpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZUxpc3RlbmVyc0ZvckRldl8oKTtcblxuICAgIHRoaXMubmF2aWdhdGlvblN0YXRlXy5vYnNlcnZlKHN0YXRlQ2hhbmdlRXZlbnQgPT5cbiAgICAgIChuZXcgQW1wU3RvcnlBbmFseXRpY3ModGhpcy5lbGVtZW50KSkub25TdGF0ZUNoYW5nZShzdGF0ZUNoYW5nZUV2ZW50KSk7XG5cbiAgICB0aGlzLm5hdmlnYXRpb25TdGF0ZV8ub2JzZXJ2ZShzdGF0ZUNoYW5nZUV2ZW50ID0+XG4gICAgICB0aGlzLnZhcmlhYmxlU2VydmljZV8ub25TdGF0ZUNoYW5nZShzdGF0ZUNoYW5nZUV2ZW50KSk7XG5cbiAgICAvLyBNdXRlIGBhbXAtc3RvcnlgIGluIGJlZ2lubmluZy5cbiAgICB0aGlzLm11dGVfKCk7XG5cbiAgICB1cGdyYWRlQmFja2dyb3VuZEF1ZGlvKHRoaXMuZWxlbWVudCk7XG5cbiAgICByZWdpc3RlclNlcnZpY2VCdWlsZGVyKHRoaXMud2luLCAnc3RvcnktdmFyaWFibGUnLFxuICAgICAgICAoKSA9PiB0aGlzLnZhcmlhYmxlU2VydmljZV8pO1xuICB9XG5cblxuICAvKiogQHByaXZhdGUgKi9cbiAgaW5pdGlhbGl6ZVN0YW5kYWxvbmVTdG9yeV8oKSB7XG4gICAgY29uc3QgaHRtbCA9IHRoaXMud2luLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICB0aGlzLm11dGF0ZUVsZW1lbnQoKCkgPT4ge1xuICAgICAgaHRtbC5jbGFzc0xpc3QuYWRkKCdpLWFtcGh0bWwtc3Rvcnktc3RhbmRhbG9uZScpO1xuICAgICAgLy8gTG9jayBib2R5IHRvIHByZXZlbnQgb3ZlcmZsb3cuXG4gICAgICB0aGlzLmxvY2tCb2R5XygpO1xuICAgICAgLy8gU3RhbmRhbG9uZSBDU1MgYWZmZWN0cyBzaXppbmcgb2YgdGhlIGVudGlyZSBwYWdlLlxuICAgICAgdGhpcy5vblJlc2l6ZSgpO1xuICAgIH0sIGh0bWwpO1xuXG4gICAgY29uc3QgZW1iZWRNb2RlID0gcGFyc2VFbWJlZE1vZGUodGhpcy53aW4ubG9jYXRpb24uaGFzaCk7XG4gICAgdGhpcy5zdGF0ZVNlcnZpY2VfLmluaXRpYWxpemVFbWJlZE1vZGUoZW1iZWRNb2RlKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEJ1aWxkcyB0aGUgc3lzdGVtIGxheWVyIERPTS4gIFRoaXMgaXMgZGVwZW5kZW50IG9uIHRoZSBwYWdlc18gYXJyYXkgaGF2aW5nXG4gICAqIGJlZW4gaW5pdGlhbGl6ZWQsIHNvIGl0IGNhbm5vdCBoYXBwZW4gYXQgYnVpbGQgdGltZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGJ1aWxkU3lzdGVtTGF5ZXJfKCkge1xuICAgIGNvbnN0IHBhZ2VJZHMgPSB0aGlzLnBhZ2VzXy5tYXAocGFnZSA9PiBwYWdlLmVsZW1lbnQuaWQpO1xuICAgIHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLnN5c3RlbUxheWVyXy5idWlsZChwYWdlSWRzKSk7XG4gICAgdGhpcy51cGRhdGVBdWRpb0ljb25fKCk7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGRzIHRoZSBoaW50IGxheWVyIERPTS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGJ1aWxkSGludExheWVyXygpIHtcbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5hbXBTdG9yeUhpbnRfLmJ1aWxkSGludENvbnRhaW5lcigpKTtcbiAgfVxuXG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGluaXRpYWxpemVMaXN0ZW5lcnNfKCkge1xuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5ORVhUX1BBR0UsICgpID0+IHtcbiAgICAgIHRoaXMubmV4dF8oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5QUkVWSU9VU19QQUdFLCAoKSA9PiB7XG4gICAgICB0aGlzLnByZXZpb3VzXygpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlNIT1dfQk9PS0VORCwgKCkgPT4ge1xuICAgICAgdGhpcy5oYXNCb29rZW5kXygpLnRoZW4oaGFzQm9va2VuZCA9PiB7XG4gICAgICAgIGlmIChoYXNCb29rZW5kKSB7XG4gICAgICAgICAgdGhpcy5zaG93Qm9va2VuZF8oKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuQ0xPU0VfQk9PS0VORCwgKCkgPT4ge1xuICAgICAgdGhpcy5oaWRlQm9va2VuZF8oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5NVVRFLCAoKSA9PiB7XG4gICAgICB0aGlzLm11dGVfKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuVU5NVVRFLCAoKSA9PiB7XG4gICAgICB0aGlzLnVubXV0ZV8oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5BVURJT19QTEFZSU5HLCAoKSA9PiB7XG4gICAgICB0aGlzLmF1ZGlvUGxheWluZ18oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5BVURJT19TVE9QUEVELCAoKSA9PiB7XG4gICAgICB0aGlzLmF1ZGlvU3RvcHBlZF8oKTtcbiAgICB9KTtcblxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5TV0lUQ0hfUEFHRSwgZSA9PiB7XG4gICAgICBpZiAodGhpcy5ib29rZW5kXy5pc0FjdGl2ZSgpKSB7XG4gICAgICAgIC8vIERpc2FsbG93IHN3aXRjaGluZyBwYWdlcyB3aGlsZSB0aGUgYm9va2VuZCBpcyBhY3RpdmUuXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zd2l0Y2hUb18oZS5kZXRhaWwudGFyZ2V0UGFnZUlkKTtcbiAgICAgIHRoaXMuYW1wU3RvcnlIaW50Xy5oaWRlQWxsTmF2aWdhdGlvbkhpbnQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5QQUdFX1BST0dSRVNTLCBlID0+IHtcbiAgICAgIGNvbnN0IHBhZ2VJZCA9IGUuZGV0YWlsLnBhZ2VJZDtcbiAgICAgIGNvbnN0IHByb2dyZXNzID0gZS5kZXRhaWwucHJvZ3Jlc3M7XG5cbiAgICAgIGlmIChwYWdlSWQgIT09IHRoaXMuYWN0aXZlUGFnZV8uZWxlbWVudC5pZCkge1xuICAgICAgICAvLyBJZ25vcmUgcHJvZ3Jlc3MgdXBkYXRlIGV2ZW50cyBmcm9tIGluYWN0aXZlIHBhZ2VzLlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5hY3RpdmVQYWdlXy5pc0FkKCkpIHtcbiAgICAgICAgdGhpcy5zeXN0ZW1MYXllcl8udXBkYXRlUHJvZ3Jlc3MocGFnZUlkLCBwcm9ncmVzcyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihFdmVudFR5cGUuUkVQTEFZLCAoKSA9PiB7XG4gICAgICB0aGlzLnJlcGxheV8oKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IG5vUHJldmlvdXNQYWdlSGVscFNob3duID0gdGhpcy5zdGF0ZVNlcnZpY2VfXG4gICAgICAgIC5nZXRTdGF0ZShTdGF0ZVR5cGUuTk9fUFJFVklPVVNfUEFHRV9IRUxQX1NIT1dOKTtcblxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5TSE9XX05PX1BSRVZJT1VTX1BBR0VfSEVMUCwgKCkgPT4ge1xuICAgICAgaWYgKG5vUHJldmlvdXNQYWdlSGVscFNob3duLmlzTW9kaWZpYWJsZSgpKSB7XG4gICAgICAgIHRoaXMuYW1wU3RvcnlIaW50Xy5zaG93Rmlyc3RQYWdlSGludE92ZXJsYXkoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5UQVBfTkFWSUdBVElPTiwgZSA9PiB7XG4gICAgICBjb25zdCB7ZGlyZWN0aW9ufSA9IGUuZGV0YWlsO1xuICAgICAgdGhpcy5wZXJmb3JtVGFwTmF2aWdhdGlvbl8oZGlyZWN0aW9uKTtcbiAgICB9KTtcblxuICAgIHRoaXMud2luLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBlID0+IHtcbiAgICAgIHRoaXMub25LZXlEb3duXyhlKTtcbiAgICB9LCB0cnVlKTtcblxuICAgIHRoaXMuZ2V0Vmlld3BvcnQoKS5vblJlc2l6ZShkZWJvdW5jZSh0aGlzLndpbiwgKCkgPT4gdGhpcy5vblJlc2l6ZSgpLCAzMDApKTtcbiAgICB0aGlzLmluc3RhbGxHZXN0dXJlUmVjb2duaXplcnNfKCk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgaW5zdGFsbEdlc3R1cmVSZWNvZ25pemVyc18oKSB7XG4gICAgY29uc3Qge2VsZW1lbnR9ID0gdGhpcztcbiAgICBjb25zdCBnZXN0dXJlcyA9IEdlc3R1cmVzLmdldChlbGVtZW50LCAvKiBzaG91bGROb3RQcmV2ZW50RGVmYXVsdCAqLyB0cnVlKTtcblxuICAgIC8vIERpc2FibGVzIHpvb20gb24gZG91YmxlLXRhcC5cbiAgICBnZXN0dXJlcy5vbkdlc3R1cmUoRG91YmxldGFwUmVjb2duaXplciwgZ2VzdHVyZSA9PiB7XG4gICAgICBjb25zdCB7ZXZlbnR9ID0gZ2VzdHVyZTtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICAvLyBTaG93cyBcInRhcCB0byBuYXZpZ2F0ZVwiIGhpbnQgd2hlbiBzd2lwaW5nLlxuICAgIGdlc3R1cmVzLm9uR2VzdHVyZShTd2lwZVhZUmVjb2duaXplciwgZ2VzdHVyZSA9PiB7XG4gICAgICBjb25zdCB7ZGVsdGFYfSA9IGdlc3R1cmUuZGF0YTtcbiAgICAgIGlmICh0aGlzLmJvb2tlbmRfLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmlzU3dpcGVMYXJnZUVub3VnaEZvckhpbnRfKGRlbHRhWCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgbmF2aWdhdGlvbk92ZXJsYXlIaW50U2hvd24gPSB0aGlzLnN0YXRlU2VydmljZV9cbiAgICAgICAgICAuZ2V0U3RhdGUoU3RhdGVUeXBlLk5BVklHQVRJT05fT1ZFUkxBWV9ISU5UX1NIT1dOKTtcbiAgICAgIGlmICghbmF2aWdhdGlvbk92ZXJsYXlIaW50U2hvd24uaXNNb2RpZmlhYmxlKCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLmFtcFN0b3J5SGludF8uc2hvd05hdmlnYXRpb25PdmVybGF5KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgaXNTd2lwZUxhcmdlRW5vdWdoRm9ySGludF8oZGVsdGFYKSB7XG4gICAgcmV0dXJuIChNYXRoLmFicyhkZWx0YVgpID49IE1JTl9TV0lQRV9GT1JfSElOVF9PVkVSTEFZX1BYKTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBpbml0aWFsaXplTGlzdGVuZXJzRm9yRGV2XygpIHtcbiAgICBpZiAoIWdldE1vZGUoKS5kZXZlbG9wbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKEV2ZW50VHlwZS5ERVZfTE9HX0VOVFJJRVNfQVZBSUxBQkxFLCBlID0+IHtcbiAgICAgIHRoaXMuc3lzdGVtTGF5ZXJfLmxvZ0FsbChlLmRldGFpbCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgbG9ja0JvZHlfKCkge1xuICAgIGNvbnN0IGRvY3VtZW50ID0gdGhpcy53aW4uZG9jdW1lbnQ7XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwge1xuICAgICAgJ292ZXJmbG93JzogJ2hpZGRlbicsXG4gICAgfSk7XG4gICAgc2V0SW1wb3J0YW50U3R5bGVzKGRvY3VtZW50LmJvZHksIHtcbiAgICAgICdvdmVyZmxvdyc6ICdoaWRkZW4nLFxuICAgIH0pO1xuXG4gICAgdGhpcy5nZXRWaWV3cG9ydCgpLnJlc2V0VG91Y2hab29tKCk7XG4gICAgdGhpcy5nZXRWaWV3cG9ydCgpLmRpc2FibGVUb3VjaFpvb20oKTtcbiAgICB0aGlzLm1heWJlTG9ja1NjcmVlbk9yaWVudGF0aW9uXygpO1xuICB9XG5cblxuICAvKiogQHByaXZhdGUgKi9cbiAgbWF5YmVMb2NrU2NyZWVuT3JpZW50YXRpb25fKCkge1xuICAgIGNvbnN0IHNjcmVlbiA9IHRoaXMud2luLnNjcmVlbjtcbiAgICBpZiAoIXNjcmVlbiB8fCAhdGhpcy5jYW5Sb3RhdGVUb0Rlc2t0b3BNZWRpYV8ubWF0Y2hlcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGxvY2tPcmllbnRhdGlvbiA9IHNjcmVlbi5sb2NrT3JpZW50YXRpb24gfHxcbiAgICAgICAgc2NyZWVuLm1vekxvY2tPcmllbnRhdGlvbiB8fCBzY3JlZW4ubXNMb2NrT3JpZW50YXRpb24gfHxcbiAgICAgICAgKHVudXNlZE9yaWVudGF0aW9uID0+IHt9KTtcblxuICAgIHRyeSB7XG4gICAgICBsb2NrT3JpZW50YXRpb24oJ3BvcnRyYWl0Jyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgZGV2KCkud2FybihUQUcsICdGYWlsZWQgdG8gbG9jayBzY3JlZW4gb3JpZW50YXRpb246JywgZS5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgYnVpbGRQYWdpbmF0aW9uQnV0dG9uc18oKSB7XG4gICAgdGhpcy5wYWdpbmF0aW9uQnV0dG9uc18gPSBQYWdpbmF0aW9uQnV0dG9ucy5jcmVhdGUodGhpcy53aW4uZG9jdW1lbnQpO1xuXG4gICAgdGhpcy5wYWdpbmF0aW9uQnV0dG9uc18uYXR0YWNoKHRoaXMuZWxlbWVudCk7XG5cbiAgICB0aGlzLm5hdmlnYXRpb25TdGF0ZV8ub2JzZXJ2ZShlID0+XG4gICAgICB0aGlzLnBhZ2luYXRpb25CdXR0b25zXy5vbk5hdmlnYXRpb25TdGF0ZUNoYW5nZShlKSk7XG4gIH1cblxuICAvKiogQHZpc2libGVGb3JUZXN0aW5nICovXG4gIGJ1aWxkUGFnaW5hdGlvbkJ1dHRvbnNGb3JUZXN0aW5nKCkge1xuICAgIHRoaXMuYnVpbGRQYWdpbmF0aW9uQnV0dG9uc18oKTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBidWlsZFRvcEJhcl8oKSB7XG4gICAgY29uc3QgZG9jID0gdGhpcy5lbGVtZW50Lm93bmVyRG9jdW1lbnQ7XG5cbiAgICB0aGlzLnRvcEJhcl8gPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy50b3BCYXJfLmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1zdG9yeS10b3AnKTtcbiAgICB0aGlzLnRvcEJhcl8uYXBwZW5kQ2hpbGQodGhpcy5idWlsZFRvcEJhclNoYXJlXygpKTtcblxuICAgIHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUodGhpcy50b3BCYXJfLCB0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IU5vZGV9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBidWlsZFRvcEJhclNoYXJlXygpIHtcbiAgICBjb25zdCBjb250YWluZXIgPVxuICAgICAgICByZW5kZXJTaW1wbGVUZW1wbGF0ZSh0aGlzLndpbi5kb2N1bWVudCwgU0hBUkVfV0lER0VUX1BJTExfQ09OVEFJTkVSKTtcblxuICAgIHRoaXMuc2hhcmVXaWRnZXRfID0gbmV3IFNoYXJlV2lkZ2V0KHRoaXMud2luKTtcblxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnNoYXJlV2lkZ2V0Xy5idWlsZCh0aGlzLmdldEFtcERvYygpKSk7XG5cbiAgICB0aGlzLmxvYWRCb29rZW5kQ29uZmlnXygpLnRoZW4oYm9va2VuZENvbmZpZyA9PiB7XG4gICAgICBpZiAoYm9va2VuZENvbmZpZyAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNoYXJlV2lkZ2V0Xy5zZXRQcm92aWRlcnMoYm9va2VuZENvbmZpZy5zaGFyZVByb3ZpZGVycyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY29udGFpbmVyO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBsYXlvdXRDYWxsYmFjaygpIHtcbiAgICBpZiAoIUFtcFN0b3J5LmlzQnJvd3NlclN1cHBvcnRlZCh0aGlzLndpbikpIHtcbiAgICAgIHRoaXMuYnVpbGRVbnN1cHBvcnRlZEJyb3dzZXJPdmVybGF5XygpO1xuICAgICAgZGV2KCkuZXhwZWN0ZWRFcnJvcihUQUcsICdVbnN1cHBvcnRlZCBicm93c2VyJyk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3RQYWdlRWwgPSB1c2VyKCkuYXNzZXJ0RWxlbWVudChcbiAgICAgICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2FtcC1zdG9yeS1wYWdlJyksXG4gICAgICAgICdTdG9yeSBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIHBhZ2UuJyk7XG5cbiAgICBpZiAoIXRoaXMucGFnaW5hdGlvbkJ1dHRvbnNfKSB7XG4gICAgICB0aGlzLmJ1aWxkUGFnaW5hdGlvbkJ1dHRvbnNfKCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcnlMYXlvdXRQcm9taXNlID0gdGhpcy5pbml0aWFsaXplUGFnZXNfKClcbiAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5idWlsZFN5c3RlbUxheWVyXygpKVxuICAgICAgICAudGhlbigoKSA9PiB0aGlzLmJ1aWxkSGludExheWVyXygpKVxuICAgICAgICAudGhlbigoKSA9PiB0aGlzLmJ1aWxkTGFuZHNjYXBlT3JpZW50YXRpb25PdmVybGF5XygpKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5wYWdlc18uZm9yRWFjaChwYWdlID0+IHtcbiAgICAgICAgICAgIHBhZ2Uuc2V0QWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5zd2l0Y2hUb18oZmlyc3RQYWdlRWwuaWQpKVxuICAgICAgICAudGhlbigoKSA9PiB0aGlzLnByZWxvYWRQYWdlc0J5RGlzdGFuY2VfKCkpO1xuXG4gICAgLy8gRG8gbm90IGJsb2NrIHRoZSBsYXlvdXQgY2FsbGJhY2sgb24gdGhlIGNvbXBsZXRpb24gb2YgdGhlc2UgcHJvbWlzZXMsIGFzXG4gICAgLy8gdGhhdCBwcmV2ZW50cyBkZXNjZW5kZW50cyBmcm9tIGJlaW5nIGxhaWQgb3V0IChhbmQgdGhlcmVmb3JlIGxvYWRlZCkuXG4gICAgc3RvcnlMYXlvdXRQcm9taXNlLnRoZW4oKCkgPT4gdGhpcy53aGVuUGFnZXNMb2FkZWRfKFBBR0VfTE9BRF9USU1FT1VUX01TKSlcbiAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5tYXJrU3RvcnlBc0xvYWRlZF8oKSk7XG5cbiAgICByZXR1cm4gc3RvcnlMYXlvdXRQcm9taXNlO1xuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHRpbWVvdXRNcyBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSB0byB3YWl0LCBpblxuICAgKiAgICAgbWlsbGlzZWNvbmRzLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgcGFnZSBpcyBsb2FkZWQgb3JcbiAgICogICAgIHRoZSB0aW1lb3V0IGhhcyBiZWVuIGV4Y2VlZGVkLCB3aGljaGV2ZXIgaGFwcGVucyBmaXJzdC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHdoZW5QYWdlc0xvYWRlZF8odGltZW91dE1zID0gMCkge1xuICAgIGNvbnN0IHBhZ2VzVG9XYWl0Rm9yID0gdGhpcy5pc0Rlc2t0b3BfKCkgP1xuICAgICAgW3RoaXMucGFnZXNfWzBdLCB0aGlzLnBhZ2VzX1sxXV0gOlxuICAgICAgW3RoaXMucGFnZXNfWzBdXTtcblxuICAgIGNvbnN0IHN0b3J5TG9hZFByb21pc2UgPSBQcm9taXNlLmFsbChcbiAgICAgICAgcGFnZXNUb1dhaXRGb3IubWFwKHBhZ2UgPT4gcGFnZS53aGVuTG9hZGVkKCkpKTtcblxuICAgIHJldHVybiB0aGlzLnRpbWVyXy50aW1lb3V0UHJvbWlzZSh0aW1lb3V0TXMsIHN0b3J5TG9hZFByb21pc2UpXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7fSk7XG4gIH1cblxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBtYXJrU3RvcnlBc0xvYWRlZF8oKSB7XG4gICAgZGlzcGF0Y2godGhpcy5lbGVtZW50LCBFdmVudFR5cGUuU1RPUllfTE9BREVELCB0cnVlKTtcbiAgICB0aGlzLnNpZ25hbHMoKS5zaWduYWwoQ29tbW9uU2lnbmFscy5JTklfTE9BRCk7XG4gICAgdGhpcy5tdXRhdGVFbGVtZW50KCgpID0+IHtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFNUT1JZX0xPQURFRF9DTEFTU19OQU1FKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBpc0xheW91dFN1cHBvcnRlZChsYXlvdXQpIHtcbiAgICByZXR1cm4gbGF5b3V0ID09IExheW91dC5DT05UQUlORVI7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHByZXJlbmRlckFsbG93ZWQoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBpc0FtcFN0b3J5RW5hYmxlZF8oKSB7XG4gICAgaWYgKGlzRXhwZXJpbWVudE9uKHRoaXMud2luLCBUQUcpIHx8IGdldE1vZGUoKS50ZXN0KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBvcmlnaW4gPSBnZXRTb3VyY2VPcmlnaW4odGhpcy53aW4ubG9jYXRpb24pO1xuICAgIHJldHVybiB0aGlzLmlzT3JpZ2luV2hpdGVsaXN0ZWRfKG9yaWdpbik7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZG9tYWluIFRoZSBkb21haW4gcGFydCBvZiB0aGUgb3JpZ2luLCB0byBiZSBoYXNoZWQuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGhhc2hlZCBvcmlnaW4uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYXNoT3JpZ2luXyhkb21haW4pIHtcbiAgICByZXR1cm4gc3RyaW5nSGFzaDMyKGRvbWFpbi50b0xvd2VyQ2FzZSgpKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW4gVGhlIG9yaWdpbiB0byBjaGVjay5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgc3BlY2lmaWVkIG9yaWdpbiBpcyB3aGl0ZWxpc3RlZCB0byB1c2UgdGhlXG4gICAqICAgICBhbXAtc3RvcnkgZXh0ZW5zaW9uLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNPcmlnaW5XaGl0ZWxpc3RlZF8ob3JpZ2luKSB7XG4gICAgY29uc3QgaG9zdE5hbWUgPSBwYXJzZVVybChvcmlnaW4pLmhvc3RuYW1lO1xuICAgIGNvbnN0IGRvbWFpbnMgPSBob3N0TmFtZS5zcGxpdCgnLicpO1xuXG4gICAgLy8gQ2hlY2sgYWxsIHBlcm11dGF0aW9ucyBvZiB0aGUgZG9tYWluIHRvIHNlZSBpZiBhbnkgbGV2ZWwgb2YgdGhlIGRvbWFpbiBpc1xuICAgIC8vIHdoaXRlbGlzdGVkLiAgVGFraW5nIHRoZSBleGFtcGxlIG9mIHRoZSB3aGl0ZWxpc3RlZCBkb21haW5cbiAgICAvLyBleGFtcGxlLmNvLnVrLCBpZiB0aGUgcGFnZSBpcyBzZXJ2ZWQgZnJvbSB3d3cuZXhhbXBsZS5jby51ay9wYWdlLmh0bWw6XG4gICAgLy9cbiAgICAvLyAgIHd3dy5leGFtcGxlLmNvLnVrID0+IGZhbHNlXG4gICAgLy8gICBleGFtcGxlLmNvLnVrID0+IHRydWVcbiAgICAvLyAgIGNvLnVrID0+IGZhbHNlXG4gICAgLy8gICB1ayA9PiBmYWxzZVxuICAgIC8vXG4gICAgLy8gVGhpcyBpcyBuZWNlc3NhcnksIHNpbmNlIHdlIGRvbid0IGhhdmUgYW55IGd1YXJhbnRlZXMgb2Ygd2hpY2ggbGV2ZWwgb2ZcbiAgICAvLyB0aGUgZG9tYWluIGlzIHdoaXRlbGlzdGVkLiAgRm9yIG1hbnkgZG9tYWlucyAoZS5nLiAuY29tKSwgdGhlIHNlY29uZFxuICAgIC8vIGxldmVsIG9mIHRoZSBkb21haW4gaXMgbGlrZWx5IHRvIGJlIHdoaXRlbGlzdGVkLCB3aGVyZWFzIGZvciBvdGhlcnNcbiAgICAvLyAoZS5nLiAuY28udWspIHRoZSB0aGlyZCBsZXZlbCBtYXkgYmUgd2hpdGVsaXN0ZWQuICBBZGRpdGlvbmFsbHksIHRoaXNcbiAgICAvLyBhbGxvd3Mgc3ViZG9tYWlucyB0byBiZSB3aGl0ZWxpc3RlZCBpbmRpdmlkdWFsbHkuXG4gICAgcmV0dXJuIGRvbWFpbnMuc29tZSgodW51c2VkRG9tYWluLCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgZG9tYWluID0gZG9tYWlucy5zbGljZShpbmRleCwgZG9tYWlucy5sZW5ndGgpLmpvaW4oJy4nKTtcbiAgICAgIGNvbnN0IGRvbWFpbkhhc2ggPSB0aGlzLmhhc2hPcmlnaW5fKGRvbWFpbik7XG4gICAgICByZXR1cm4gdGhpcy5vcmlnaW5XaGl0ZWxpc3RfLmluY2x1ZGVzKGRvbWFpbkhhc2gpO1xuICAgIH0pO1xuICB9XG5cblxuICAvKiogQHByaXZhdGUgKi9cbiAgYXNzZXJ0QW1wU3RvcnlFeHBlcmltZW50XygpIHtcbiAgICBpZiAodGhpcy5pc0FtcFN0b3J5RW5hYmxlZF8oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGVycm9ySWNvbkVsID0gdGhpcy53aW4uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZXJyb3JJY29uRWwuY2xhc3NMaXN0LmFkZCgnaS1hbXBodG1sLXN0b3J5LWV4cGVyaW1lbnQtaWNvbicpO1xuICAgIGVycm9ySWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1zdG9yeS1leHBlcmltZW50LWljb24tZXJyb3InKTtcblxuICAgIGNvbnN0IGVycm9yTXNnRWwgPSB0aGlzLndpbi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9ICdZb3UgbXVzdCBlbmFibGUgdGhlIGFtcC1zdG9yeSBleHBlcmltZW50IHRvICcgK1xuICAgICAgICAndmlldyB0aGlzIGNvbnRlbnQuJztcblxuICAgIGNvbnN0IGV4cGVyaW1lbnRzTGlua0VsID0gdGhpcy53aW4uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgZXhwZXJpbWVudHNMaW5rRWwudGV4dENvbnRlbnQgPSAnRW5hYmxlJztcbiAgICBleHBlcmltZW50c0xpbmtFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRvZ2dsZUV4cGVyaW1lbnQodGhpcy53aW4sICdhbXAtc3RvcnknLCB0cnVlKTtcbiAgICAgIGVycm9ySWNvbkVsLmNsYXNzTGlzdC5yZW1vdmUoJ2ktYW1waHRtbC1zdG9yeS1leHBlcmltZW50LWljb24tZXJyb3InKTtcbiAgICAgIGVycm9ySWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1zdG9yeS1leHBlcmltZW50LWljb24tZG9uZScpO1xuICAgICAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9ICdFeHBlcmltZW50IGVuYWJsZWQuICBQbGVhc2UgcmVsb2FkLic7XG4gICAgICByZW1vdmVFbGVtZW50KGV4cGVyaW1lbnRzTGlua0VsKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGVycm9yRWwgPSB0aGlzLndpbi5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlcnJvckVsLmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1zdG9yeS1leHBlcmltZW50LWVycm9yJyk7XG4gICAgZXJyb3JFbC5hcHBlbmRDaGlsZChlcnJvckljb25FbCk7XG4gICAgZXJyb3JFbC5hcHBlbmRDaGlsZChlcnJvck1zZ0VsKTtcbiAgICBlcnJvckVsLmFwcGVuZENoaWxkKGV4cGVyaW1lbnRzTGlua0VsKTtcbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZXJyb3JFbCk7XG5cbiAgICB1c2VyKCkuZXJyb3IoVEFHLCAnZW5hYmxlIGFtcC1zdG9yeSBleHBlcmltZW50Jyk7XG4gIH1cblxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBpbml0aWFsaXplUGFnZXNfKCkge1xuICAgIGNvbnN0IHBhZ2VJbXBsUHJvbWlzZXMgPSBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoXG4gICAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhbXAtc3RvcnktcGFnZScpLFxuICAgICAgICAocGFnZUVsLCBpbmRleCkgPT4ge1xuICAgICAgICAgIHJldHVybiBwYWdlRWwuZ2V0SW1wbCgpLnRoZW4ocGFnZUltcGwgPT4ge1xuICAgICAgICAgICAgdGhpcy5wYWdlc19baW5kZXhdID0gcGFnZUltcGw7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHBhZ2VJbXBsUHJvbWlzZXMpO1xuICB9XG5cblxuICAvKipcbiAgICogQWR2YW5jZSB0byB0aGUgbmV4dCBzY3JlZW4gaW4gdGhlIHN0b3J5LCBpZiB0aGVyZSBpcyBvbmUuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9pc0F1dG9tYXRpY0FkdmFuY2UgV2hldGhlciB0aGlzIG5hdmlnYXRpb24gd2FzIGNhdXNlZFxuICAgKiAgICAgYnkgYW4gYXV0b21hdGljIGFkdmFuY2VtZW50IGFmdGVyIGEgdGltZW91dC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIG5leHRfKG9wdF9pc0F1dG9tYXRpY0FkdmFuY2UpIHtcbiAgICBjb25zdCBhY3RpdmVQYWdlID0gZGV2KCkuYXNzZXJ0KHRoaXMuYWN0aXZlUGFnZV8sXG4gICAgICAgICdObyBhY3RpdmUgcGFnZSBzZXQgd2hlbiBuYXZpZ2F0aW5nIHRvIG5leHQgcGFnZS4nKTtcblxuICAgIGNvbnN0IGxhc3RQYWdlID0gdGhpcy5wYWdlc19bdGhpcy5nZXRQYWdlQ291bnQoKSAtIDFdO1xuICAgIGlmIChhY3RpdmVQYWdlLmVsZW1lbnQuaGFzQXR0cmlidXRlKEFEVkFOQ0VfVE9fQVRUUikgfHxcbiAgICAgICAgYWN0aXZlUGFnZSAhPT0gbGFzdFBhZ2UpIHtcbiAgICAgIGFjdGl2ZVBhZ2UubmV4dChvcHRfaXNBdXRvbWF0aWNBZHZhbmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGlzcGF0Y2godGhpcy5lbGVtZW50LCBFdmVudFR5cGUuU0hPV19CT09LRU5EKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBHbyBiYWNrIHRvIHRoZSBwcmV2aW91cyBzY3JlZW4gaW4gdGhlIHN0b3J5LCBpZiB0aGVyZSBpcyBvbmUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwcmV2aW91c18oKSB7XG4gICAgY29uc3QgYWN0aXZlUGFnZSA9IGRldigpLmFzc2VydCh0aGlzLmFjdGl2ZVBhZ2VfLFxuICAgICAgICAnTm8gYWN0aXZlIHBhZ2Ugc2V0IHdoZW4gbmF2aWdhdGluZyB0byBuZXh0IHBhZ2UuJyk7XG4gICAgYWN0aXZlUGFnZS5wcmV2aW91cygpO1xuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHshVGFwTmF2aWdhdGlvbkRpcmVjdGlvbn0gZGlyZWN0aW9uIFRoZSBkaXJlY3Rpb24gdG8gbmF2aWdhdGUuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwZXJmb3JtVGFwTmF2aWdhdGlvbl8oZGlyZWN0aW9uKSB7XG4gICAgaWYgKHRoaXMuaXNEZXNrdG9wXygpKSB7XG4gICAgICB0aGlzLm5leHRfKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGRpcmVjdGlvbiA9PT0gVGFwTmF2aWdhdGlvbkRpcmVjdGlvbi5ORVhUKSB7XG4gICAgICB0aGlzLm5leHRfKCk7XG4gICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09IFRhcE5hdmlnYXRpb25EaXJlY3Rpb24uUFJFVklPVVMpIHtcbiAgICAgIHRoaXMucHJldmlvdXNfKCk7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogU3dpdGNoZXMgdG8gYSBwYXJ0aWN1bGFyIHBhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YXJnZXRQYWdlSWRcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICAvLyBUT0RPKG5ld211aXMpOiBVcGRhdGUgaGlzdG9yeSBzdGF0ZVxuICBzd2l0Y2hUb18odGFyZ2V0UGFnZUlkKSB7XG4gICAgY29uc3QgdGFyZ2V0UGFnZSA9IHRoaXMuZ2V0UGFnZUJ5SWQodGFyZ2V0UGFnZUlkKTtcbiAgICBjb25zdCBwYWdlSW5kZXggPSB0aGlzLmdldFBhZ2VJbmRleCh0YXJnZXRQYWdlKTtcblxuICAgIHRoaXMudXBkYXRlQmFja2dyb3VuZF8odGFyZ2V0UGFnZS5lbGVtZW50LCAvKiBpbml0aWFsICovICF0aGlzLmFjdGl2ZVBhZ2VfKTtcblxuICAgIGlmICh0YXJnZXRQYWdlLmlzQWQoKSkge1xuICAgICAgdGhpcy52c3luY18ubXV0YXRlKCgpID0+IHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShBRF9TSE9XSU5HX0FUVFIsICcnKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnZzeW5jXy5tdXRhdGUoKCkgPT4ge1xuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKEFEX1NIT1dJTkdfQVRUUik7XG4gICAgICB9KTtcbiAgICAgIC8vIFRPRE8oYWxhbm9yb3pjbyk6IGRlY291cGxlIHRoaXMgdXNpbmcgTmF2aWdhdGlvblN0YXRlXG4gICAgICB0aGlzLnN5c3RlbUxheWVyXy5zZXRBY3RpdmVQYWdlSWQodGFyZ2V0UGFnZUlkKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPKGFsYW5vcm96Y28pOiBjaGVjayBpZiBhdXRvcGxheVxuICAgIHRoaXMubmF2aWdhdGlvblN0YXRlXy51cGRhdGVBY3RpdmVQYWdlKFxuICAgICAgICBwYWdlSW5kZXgsXG4gICAgICAgIHRoaXMuZ2V0UGFnZUNvdW50KCksXG4gICAgICAgIHRhcmdldFBhZ2UuZWxlbWVudC5pZCk7XG5cbiAgICBjb25zdCBvbGRQYWdlID0gdGhpcy5hY3RpdmVQYWdlXztcblxuICAgIC8vIFRPRE8oY3ZpYWxpeik6IE1vdmUgdGhpcyB0byB0aGUgcGFnZSBjbGFzcz9cbiAgICBjb25zdCBhY3RpdmVQcmlvclNpYmxpbmcgPSB0YXJnZXRQYWdlLmVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICBjb25zdCBwcmV2aW91c0FjdGl2ZVByaW9yU2libGluZyA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICBgWyR7ZXNjYXBlQ3NzU2VsZWN0b3JJZGVudChQUkVfQUNUSVZFX1BBR0VfQVRUUklCVVRFX05BTUUpfV1gKTtcblxuICAgIHRoaXMuYWN0aXZlUGFnZV8gPSB0YXJnZXRQYWdlO1xuXG4gICAgdGhpcy5zeXN0ZW1MYXllcl8ucmVzZXREZXZlbG9wZXJMb2dzKCk7XG4gICAgdGhpcy5zeXN0ZW1MYXllcl8uc2V0RGV2ZWxvcGVyTG9nQ29udGV4dFN0cmluZyhcbiAgICAgICAgdGhpcy5hY3RpdmVQYWdlXy5lbGVtZW50LmlkKTtcblxuICAgIHJldHVybiB0YXJnZXRQYWdlLmJlZm9yZVZpc2libGUoKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMudHJpZ2dlckFjdGl2ZUV2ZW50Rm9yUGFnZV8oKTtcblxuICAgICAgaWYgKG9sZFBhZ2UpIHtcbiAgICAgICAgb2xkUGFnZS5zZXRBY3RpdmUoZmFsc2UpO1xuICAgICAgfVxuXG4gICAgICB0YXJnZXRQYWdlLnNldEFjdGl2ZSh0cnVlKTtcblxuICAgICAgaWYgKGFjdGl2ZVByaW9yU2libGluZyAmJlxuICAgICAgICAgIG1hdGNoZXMoYWN0aXZlUHJpb3JTaWJsaW5nLCAnYW1wLXN0b3J5LXBhZ2UnKSkge1xuICAgICAgICBhY3RpdmVQcmlvclNpYmxpbmcuc2V0QXR0cmlidXRlKFBSRV9BQ1RJVkVfUEFHRV9BVFRSSUJVVEVfTkFNRSwgJycpO1xuICAgICAgfVxuICAgICAgaWYgKHByZXZpb3VzQWN0aXZlUHJpb3JTaWJsaW5nKSB7XG4gICAgICAgIHByZXZpb3VzQWN0aXZlUHJpb3JTaWJsaW5nLnJlbW92ZUF0dHJpYnV0ZShcbiAgICAgICAgICAgIFBSRV9BQ1RJVkVfUEFHRV9BVFRSSUJVVEVfTkFNRSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMucHJlbG9hZFBhZ2VzQnlEaXN0YW5jZV8oKTtcbiAgICAgIHRoaXMucmVhcHBseU11dGluZ18oKTtcbiAgICAgIHRoaXMuZm9yY2VSZXBhaW50Rm9yU2FmYXJpXygpO1xuICAgICAgdGhpcy5tYXliZVByZWxvYWRCb29rZW5kXygpO1xuICAgIH0pO1xuICB9XG5cblxuICAvKiogQHByaXZhdGUgKi9cbiAgdHJpZ2dlckFjdGl2ZUV2ZW50Rm9yUGFnZV8oKSB7XG4gICAgLy8gVE9ETyhhbGFub3JvemNvKTogcGFzcyBldmVudCBwcmlvcml0eSBvbmNlIGFtcGh0bWwtc3RvcnkgcmVwbyBpcyBtZXJnZWRcbiAgICAvLyB3aXRoIHVwc3RyZWFtLlxuICAgIFNlcnZpY2VzLmFjdGlvblNlcnZpY2VGb3JEb2ModGhpcy5lbGVtZW50KVxuICAgICAgICAudHJpZ2dlcih0aGlzLmFjdGl2ZVBhZ2VfLmVsZW1lbnQsICdhY3RpdmUnLCAvKiBldmVudCAqLyBudWxsLFxuICAgICAgICAgICAgQWN0aW9uVHJ1c3QuSElHSCk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBGb3Igc29tZSByZWFzb24sIFNhZmFyaSBoYXMgYW4gaXNzdWUgd2hlcmUgc29tZXRpbWVzIHdoZW4gcGFnZXMgYmVjb21lXG4gICAqIHZpc2libGUsIHNvbWUgZGVzY2VuZGFudHMgYXJlIG5vdCBwYWludGVkLiAgVGhpcyBpcyBhIGhhY2sgd2hlcmUgd2UgZGV0ZWN0XG4gICAqIHRoYXQgdGhlIGJyb3dzZXIgaXMgU2FmYXJpIGFuZCBmb3JjZSBpdCB0byByZXBhaW50LCB0byBhdm9pZCB0aGlzIGNhc2UuXG4gICAqIFNlZSBuZXdtdWlzL2FtcGh0bWwtc3RvcnkjMTA2IGZvciBkZXRhaWxzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZm9yY2VSZXBhaW50Rm9yU2FmYXJpXygpIHtcbiAgICBjb25zdCBwbGF0Zm9ybSA9IFNlcnZpY2VzLnBsYXRmb3JtRm9yKHRoaXMud2luKTtcbiAgICBpZiAoIXBsYXRmb3JtLmlzU2FmYXJpKCkgJiYgIXBsYXRmb3JtLmlzSW9zKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNEZXNrdG9wXygpKSB7XG4gICAgICAvLyBGb3JjZSByZXBhaW50IGlzIG9ubHkgbmVlZGVkIHdoZW4gdHJhbnNpdGlvbmluZyBmcm9tIGludmlzaWJsZSB0byB2aXNpYmxlXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5tdXRhdGVFbGVtZW50KCgpID0+IHtcbiAgICAgIHNldFN0eWxlKHRoaXMuZWxlbWVudCwgJ2Rpc3BsYXknLCAnbm9uZScpO1xuXG4gICAgICAvLyBSZWFkaW5nIHRoZSBoZWlnaHQgaXMgd2hhdCBmb3JjZXMgdGhlIHJlcGFpbnQuICBUaGUgY29uZGl0aW9uYWwgZXhpc3RzXG4gICAgICAvLyBvbmx5IHRvIHdvcmthcm91bmQgdGhlIGZhY3QgdGhhdCB0aGUgY2xvc3VyZSBjb21waWxlciB3b3VsZCBvdGhlcndpc2VcbiAgICAgIC8vIHRoaW5rIHRoYXQgb25seSByZWFkaW5nIHRoZSBoZWlnaHQgaGFzIG5vIGVmZmVjdC4gIFNpbmNlIHRoZSBoZWlnaHQgaXNcbiAgICAgIC8vIGFsd2F5cyA+PSAwLCB0aGlzIGNvbmRpdGlvbmFsIHdpbGwgYWx3YXlzIGJlIGV4ZWN1dGVkLlxuICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5lbGVtZW50Li8qT0sqL29mZnNldEhlaWdodDtcbiAgICAgIGlmIChoZWlnaHQgPj0gMCkge1xuICAgICAgICBzZXRTdHlsZSh0aGlzLmVsZW1lbnQsICdkaXNwbGF5JywgJycpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogSGFuZGxlcyBhbGwga2V5IHByZXNzZXMgd2l0aGluIHRoZSBzdG9yeS5cbiAgICogQHBhcmFtIHshRXZlbnR9IGUgVGhlIGtleWRvd24gZXZlbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvbktleURvd25fKGUpIHtcbiAgICBpZiAodGhpcy5ib29rZW5kXy5pc0FjdGl2ZSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3dpdGNoIChlLmtleUNvZGUpIHtcbiAgICAgIC8vIFRPRE8obmV3bXVpcyk6IFRoaXMgd2lsbCBuZWVkIHRvIGJlIGZsaXBwZWQgZm9yIFJUTC5cbiAgICAgIGNhc2UgS2V5Q29kZXMuTEVGVF9BUlJPVzpcbiAgICAgICAgdGhpcy5wcmV2aW91c18oKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEtleUNvZGVzLlJJR0hUX0FSUk9XOlxuICAgICAgICB0aGlzLm5leHRfKCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIEhhbmRsZSByZXNpemUgZXZlbnRzIGFuZCBzZXQgdGhlIHN0b3J5J3MgZGVza3RvcCBzdGF0ZS5cbiAgICogQHZpc2libGVGb3JUZXN0aW5nXG4gICAqL1xuICBvblJlc2l6ZSgpIHtcbiAgICBpZiAodGhpcy5pc0Rlc2t0b3BfKCkpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rlc2t0b3AnLCcnKTtcbiAgICAgIHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKExBTkRTQ0FQRV9PVkVSTEFZX0NMQVNTKTtcbiAgICAgIGlmICghdGhpcy50b3BCYXJfKSB7XG4gICAgICAgIHRoaXMuYnVpbGRUb3BCYXJfKCk7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuYmFja2dyb3VuZF8pIHtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kXyA9IG5ldyBBbXBTdG9yeUJhY2tncm91bmQodGhpcy53aW4sIHRoaXMuZWxlbWVudCk7XG4gICAgICAgIHRoaXMuYmFja2dyb3VuZF8uYXR0YWNoKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hY3RpdmVQYWdlXykge1xuICAgICAgICB0aGlzLnVwZGF0ZUJhY2tncm91bmRfKHRoaXMuYWN0aXZlUGFnZV8uZWxlbWVudCwgLyogaW5pdGlhbCAqLyB0cnVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy52c3luY18ucnVuKHtcbiAgICAgICAgbWVhc3VyZTogc3RhdGUgPT4ge1xuICAgICAgICAgIGNvbnN0IHtvZmZzZXRXaWR0aCwgb2Zmc2V0SGVpZ2h0fSA9IHRoaXMuZWxlbWVudDtcbiAgICAgICAgICBzdGF0ZS5pc0xhbmRzY2FwZSA9IG9mZnNldFdpZHRoID4gb2Zmc2V0SGVpZ2h0O1xuICAgICAgICB9LFxuICAgICAgICBtdXRhdGU6IHN0YXRlID0+IHtcbiAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShMQU5EU0NBUEVfT1ZFUkxBWV9DTEFTUyxcbiAgICAgICAgICAgICAgc3RhdGUuaXNMYW5kc2NhcGUpO1xuICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rlc2t0b3AnKTtcbiAgICAgICAgfSxcbiAgICAgIH0sIHt9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc2NyZWVuIHNpemUgbWF0Y2hlcyB0aGUgZGVza3RvcCBtZWRpYSBxdWVyeS5cbiAgICovXG4gIGlzRGVza3RvcF8oKSB7XG4gICAgcmV0dXJuICFpc0V4cGVyaW1lbnRPbih0aGlzLndpbiwgJ2Rpc2FibGUtYW1wLXN0b3J5LWRlc2t0b3AnKSAmJlxuICAgICAgICB0aGlzLmRlc2t0b3BNZWRpYV8ubWF0Y2hlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gcmlnaHQgb3ZlcmxheSBmb3IgbW9iaWxlIG9yIGRlc2t0b3BcbiAgICovXG4gIHZpZXdwb3J0V2FybmluZ092ZXJsYXlfKCkge1xuICAgIGNvbnN0IHBsYXRmb3JtID0gU2VydmljZXMucGxhdGZvcm1Gb3IodGhpcy53aW4pO1xuXG4gICAgcmV0dXJuIChwbGF0Zm9ybS5pc0lvcygpIHx8IHBsYXRmb3JtLmlzQW5kcm9pZCgpKVxuICAgICAgPyBMQU5EU0NBUEVfT1JJRU5UQVRJT05fV0FSTklOR1xuICAgICAgOiBERVNLVE9QX1NJWkVfV0FSTklORztcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBvdmVybGF5IGZvciBMYW5kc2NhcGUgbW9kZSBtb2JpbGVcbiAgICovXG4gIGJ1aWxkTGFuZHNjYXBlT3JpZW50YXRpb25PdmVybGF5XygpIHtcbiAgICB0aGlzLm11dGF0ZUVsZW1lbnQoKCkgPT4ge1xuICAgICAgdGhpcy5lbGVtZW50Lmluc2VydEJlZm9yZShcbiAgICAgICAgICByZW5kZXJTaW1wbGVUZW1wbGF0ZSh0aGlzLndpbi5kb2N1bWVudCxcbiAgICAgICAgICAgICAgdGhpcy52aWV3cG9ydFdhcm5pbmdPdmVybGF5XygpKSxcbiAgICAgICAgICB0aGlzLmVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgb3ZlcmxheSBmb3IgTGFuZHNjYXBlIG1vZGUgbW9iaWxlXG4gICAqL1xuICBidWlsZFVuc3VwcG9ydGVkQnJvd3Nlck92ZXJsYXlfKCkge1xuICAgIHRoaXMubXV0YXRlRWxlbWVudCgoKSA9PiB7XG4gICAgICB0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKFxuICAgICAgICAgIHJlbmRlclNpbXBsZVRlbXBsYXRlKHRoaXMud2luLmRvY3VtZW50LCBVTlNVUFBPUlRFRF9CUk9XU0VSX1dBUk5JTkcpLFxuICAgICAgICAgIHRoaXMuZWxlbWVudC5maXJzdENoaWxkKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEdldCB0aGUgVVJMIG9mIHRoZSBnaXZlbiBwYWdlJ3MgYmFja2dyb3VuZCByZXNvdXJjZS5cbiAgICogQHBhcmFtIHshRWxlbWVudH0gcGFnZUVsZW1lbnRcbiAgICogQHJldHVybiB7P3N0cmluZ30gVGhlIFVSTCBvZiB0aGUgYmFja2dyb3VuZCByZXNvdXJjZVxuICAgKi9cbiAgZ2V0QmFja2dyb3VuZFVybF8ocGFnZUVsZW1lbnQpIHtcbiAgICBsZXQgZmlsbEVsZW1lbnQgPSBwYWdlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAnW3RlbXBsYXRlPVwiZmlsbFwiXTpub3QoLmktYW1waHRtbC1oaWRkZW4tYnktbWVkaWEtcXVlcnkpJyk7XG5cbiAgICBpZiAoIWZpbGxFbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmaWxsRWxlbWVudCA9IGRldigpLmFzc2VydEVsZW1lbnQoZmlsbEVsZW1lbnQpO1xuXG4gICAgY29uc3QgZmlsbFBvc3RlckVsZW1lbnQgPSBmaWxsRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAnW3Bvc3Rlcl06bm90KC5pLWFtcGh0bWwtaGlkZGVuLWJ5LW1lZGlhLXF1ZXJ5KScpO1xuXG4gICAgY29uc3Qgc3JjRWxlbWVudCA9IGZpbGxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICdbc3JjXTpub3QoLmktYW1waHRtbC1oaWRkZW4tYnktbWVkaWEtcXVlcnkpJyk7XG5cbiAgICBjb25zdCBmaWxsUG9zdGVyID0gZmlsbFBvc3RlckVsZW1lbnQgP1xuICAgICAgZmlsbFBvc3RlckVsZW1lbnQuZ2V0QXR0cmlidXRlKCdwb3N0ZXInKSA6ICcnO1xuICAgIGNvbnN0IHNyYyA9IHNyY0VsZW1lbnQgPyBzcmNFbGVtZW50LmdldEF0dHJpYnV0ZSgnc3JjJykgOiAnJztcblxuICAgIHJldHVybiBmaWxsUG9zdGVyIHx8IHNyYztcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgYmFja2dyb3VuZCB0byB0aGUgc3BlY2lmaWVkIHBhZ2UncyBiYWNrZ3JvdW5kLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBwYWdlRWxlbWVudFxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBpbml0aWFsXG4gICAqL1xuICB1cGRhdGVCYWNrZ3JvdW5kXyhwYWdlRWxlbWVudCwgaW5pdGlhbCA9IGZhbHNlKSB7XG4gICAgaWYgKCF0aGlzLmJhY2tncm91bmRfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5nZXRWc3luYygpLnJ1bih7XG4gICAgICBtZWFzdXJlOiBzdGF0ZSA9PiB7XG4gICAgICAgIHN0YXRlLnVybCA9IHRoaXMuZ2V0QmFja2dyb3VuZFVybF8ocGFnZUVsZW1lbnQpO1xuICAgICAgICBzdGF0ZS5jb2xvciA9IGNvbXB1dGVkU3R5bGUodGhpcy53aW4sIHBhZ2VFbGVtZW50KVxuICAgICAgICAgICAgLmdldFByb3BlcnR5VmFsdWUoJ2JhY2tncm91bmQtY29sb3InKTtcbiAgICAgIH0sXG4gICAgICBtdXRhdGU6IHN0YXRlID0+IHtcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kXy5zZXRCYWNrZ3JvdW5kKHN0YXRlLmNvbG9yLCBzdGF0ZS51cmwsIGluaXRpYWwpO1xuICAgICAgfSxcbiAgICB9LCB7fSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBTaG93cyB0aGUgYm9va2VuZCBvdmVybGF5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2hvd0Jvb2tlbmRfKCkge1xuICAgIGlmICh0aGlzLmJvb2tlbmRfLmlzQWN0aXZlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmJ1aWxkQm9va2VuZF8oKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuc3lzdGVtTGF5ZXJfLmhpZGVEZXZlbG9wZXJMb2coKTtcblxuICAgICAgdGhpcy5hY3RpdmVQYWdlXy5wYXVzZUNhbGxiYWNrKCk7XG5cbiAgICAgIHRoaXMudG9nZ2xlRWxlbWVudHNPbkJvb2tlbmRfKC8qIGRpc3BsYXkgKi8gZmFsc2UpO1xuXG4gICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtYWN0aXZlJyk7XG5cbiAgICAgIHRoaXMuYm9va2VuZF8uc2hvdygpO1xuICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogSGlkZXMgdGhlIGJvb2tlbmQgb3ZlcmxheS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGhpZGVCb29rZW5kXygpIHtcbiAgICBpZiAoIXRoaXMuYm9va2VuZF8uaXNBY3RpdmUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuYWN0aXZlUGFnZV8ucmVzdW1lQ2FsbGJhY2soKTtcblxuICAgIHRoaXMudG9nZ2xlRWxlbWVudHNPbkJvb2tlbmRfKC8qIGRpc3BsYXkgKi8gdHJ1ZSk7XG5cbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtYWN0aXZlJyk7XG5cbiAgICB0aGlzLmJvb2tlbmRfLmhpZGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgY29udGVudCB3aGVuIGJvb2tlbmQgaXMgb3BlbmVkL2Nsb3NlZC5cbiAgICogQHBhcmFtIHtib29sZWFufSBkaXNwbGF5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0b2dnbGVFbGVtZW50c09uQm9va2VuZF8oZGlzcGxheSkge1xuICAgIGlmICghdGhpcy5pc0Rlc2t0b3BfKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBlbGVtZW50cyA9IHNjb3BlZFF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5lbGVtZW50LFxuICAgICAgICBISURFX09OX0JPT0tFTkRfU0VMRUNUT1IpO1xuXG4gICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlbGVtZW50cywgZWwgPT4ge1xuICAgICAgaWYgKGRpc3BsYXkpIHtcbiAgICAgICAgcmVzZXRTdHlsZXMoZWwsIFsnb3BhY2l0eScsICd0cmFuc2l0aW9uJ10pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0SW1wb3J0YW50U3R5bGVzKGVsLCB7XG4gICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICB0cmFuc2l0aW9uOiAnb3BhY2l0eSAwLjNzJyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUFycmF5PCFBcnJheTxzdHJpbmc+Pn0gQSAyRCBhcnJheSByZXByZXNlbnRpbmcgbGlzdHMgb2YgcGFnZXMgYnlcbiAgICogICAgIGRpc3RhbmNlLiAgVGhlIG91dGVyIGFycmF5IGluZGV4IHJlcHJlc2VudHMgdGhlIGRpc3RhbmNlIGZyb20gdGhlXG4gICAqICAgICBhY3RpdmUgcGFnZTsgdGhlIGlubmVyIGFycmF5IGlzIGEgbGlzdCBvZiBwYWdlIElEcyBhdCB0aGUgc3BlY2lmaWVkXG4gICAqICAgICBkaXN0YW5jZS5cbiAgICovXG4gIGdldFBhZ2VzQnlEaXN0YW5jZV8oKSB7XG4gICAgY29uc3QgZGlzdGFuY2VNYXAgPSB0aGlzLmdldFBhZ2VEaXN0YW5jZU1hcEhlbHBlcl8oXG4gICAgICAgIC8qIGRpc3RhbmNlICovIDAsIC8qIG1hcCAqLyB7fSwgdGhpcy5hY3RpdmVQYWdlXy5lbGVtZW50LmlkKTtcblxuICAgIC8vIFRyYW5zcG9zZSB0aGUgbWFwIGludG8gYSAyRCBhcnJheS5cbiAgICBjb25zdCBwYWdlc0J5RGlzdGFuY2UgPSBbXTtcbiAgICBPYmplY3Qua2V5cyhkaXN0YW5jZU1hcCkuZm9yRWFjaChwYWdlSWQgPT4ge1xuICAgICAgY29uc3QgZGlzdGFuY2UgPSBkaXN0YW5jZU1hcFtwYWdlSWRdO1xuICAgICAgaWYgKCFwYWdlc0J5RGlzdGFuY2VbZGlzdGFuY2VdKSB7XG4gICAgICAgIHBhZ2VzQnlEaXN0YW5jZVtkaXN0YW5jZV0gPSBbXTtcbiAgICAgIH1cbiAgICAgIHBhZ2VzQnlEaXN0YW5jZVtkaXN0YW5jZV0ucHVzaChwYWdlSWQpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHBhZ2VzQnlEaXN0YW5jZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbWFwIG9mIGEgcGFnZSBhbmQgYWxsIG9mIHRoZSBwYWdlcyByZWFjaGFibGUgZnJvbSB0aGF0IHBhZ2UsIGJ5XG4gICAqIGRpc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGlzdGFuY2UgVGhlIGRpc3RhbmNlIHRoYXQgdGhlIHBhZ2Ugd2l0aCB0aGUgc3BlY2lmaWVkXG4gICAqICAgICBwYWdlSWQgaXMgZnJvbSB0aGUgYWN0aXZlIHBhZ2UuXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIG51bWJlcj59IG1hcCBBIG1hcHBpbmcgZnJvbSBwYWdlSWQgdG8gaXRzIGRpc3RhbmNlXG4gICAqICAgICBmcm9tIHRoZSBhY3RpdmUgcGFnZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhZ2VJZCBUaGUgcGFnZSB0byBiZSBhZGRlZCB0byB0aGUgbWFwLlxuICAgKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgbnVtYmVyPn0gQSBtYXBwaW5nIGZyb20gcGFnZSBJRCB0byB0aGUgcHJpb3JpdHkgb2ZcbiAgICogICAgIHRoYXQgcGFnZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFBhZ2VEaXN0YW5jZU1hcEhlbHBlcl8oZGlzdGFuY2UsIG1hcCwgcGFnZUlkKSB7XG4gICAgaWYgKG1hcFtwYWdlSWRdICE9PSB1bmRlZmluZWQgJiYgbWFwW3BhZ2VJZF0gPD0gZGlzdGFuY2UpIHtcbiAgICAgIHJldHVybiBtYXA7XG4gICAgfVxuXG4gICAgbWFwW3BhZ2VJZF0gPSBkaXN0YW5jZTtcbiAgICBjb25zdCBwYWdlID0gdGhpcy5nZXRQYWdlQnlJZChwYWdlSWQpO1xuICAgIHBhZ2UuZ2V0QWRqYWNlbnRQYWdlSWRzKCkuZm9yRWFjaChhZGphY2VudFBhZ2VJZCA9PiB7XG4gICAgICBpZiAobWFwW2FkamFjZW50UGFnZUlkXSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgJiYgbWFwW2FkamFjZW50UGFnZUlkXSA8PSBkaXN0YW5jZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFRPRE8obmV3bXVpcyk6IFJlbW92ZSB0aGUgYXNzaWdubWVudCBhbmQgcmV0dXJuLCBhcyB0aGV5J3JlIHVubmVjZXNzYXJ5LlxuICAgICAgbWFwID0gdGhpcy5nZXRQYWdlRGlzdGFuY2VNYXBIZWxwZXJfKGRpc3RhbmNlICsgMSwgbWFwLCBhZGphY2VudFBhZ2VJZCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gbWFwO1xuICB9XG5cblxuICAvKiogQHByaXZhdGUgKi9cbiAgcHJlbG9hZFBhZ2VzQnlEaXN0YW5jZV8oKSB7XG4gICAgY29uc3QgcGFnZXNCeURpc3RhbmNlID0gdGhpcy5nZXRQYWdlc0J5RGlzdGFuY2VfKCk7XG5cbiAgICB0aGlzLm11dGF0ZUVsZW1lbnQoKCkgPT4ge1xuICAgICAgcGFnZXNCeURpc3RhbmNlLmZvckVhY2goKHBhZ2VJZHMsIGRpc3RhbmNlKSA9PiB7XG4gICAgICAgIHBhZ2VJZHMuZm9yRWFjaChwYWdlSWQgPT4ge1xuICAgICAgICAgIGNvbnN0IHBhZ2UgPSB0aGlzLmdldFBhZ2VCeUlkKHBhZ2VJZCk7XG4gICAgICAgICAgcGFnZS5zZXREaXN0YW5jZShkaXN0YW5jZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBQcmVsb2FkcyB0aGUgYm9va2VuZCBjb25maWcgaWYgb24gdGhlIGxhc3QgcGFnZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIG1heWJlUHJlbG9hZEJvb2tlbmRfKCkge1xuICAgIGlmICghdGhpcy5hY3RpdmVQYWdlXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHBhZ2VJbmRleCA9IHRoaXMuZ2V0UGFnZUluZGV4KHRoaXMuYWN0aXZlUGFnZV8pO1xuXG4gICAgaWYgKHBhZ2VJbmRleCArIDEgPj0gdGhpcy5nZXRQYWdlQ291bnQoKSkge1xuICAgICAgdGhpcy5idWlsZEJvb2tlbmRfKCk7XG4gICAgfVxuICB9XG5cblxuICAvKiogQHByaXZhdGUgKi9cbiAgYnVpbGRCb29rZW5kXygpIHtcbiAgICBpZiAodGhpcy5ib29rZW5kXy5pc0J1aWx0KCkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICB0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5ib29rZW5kXy5idWlsZCh0aGlzLmdldEFtcERvYygpKSk7XG4gICAgdGhpcy5zZXRBc093bmVyKHRoaXMuYm9va2VuZF8uZ2V0Um9vdCgpKTtcblxuICAgIHJldHVybiB0aGlzLmxvYWRCb29rZW5kQ29uZmlnXygpLnRoZW4oYm9va2VuZENvbmZpZyA9PiB7XG4gICAgICBpZiAoYm9va2VuZENvbmZpZyAhPT0gbnVsbCkge1xuICAgICAgICB0aGlzLmJvb2tlbmRfLnNldENvbmZpZyhkZXYoKS5hc3NlcnQoYm9va2VuZENvbmZpZykpO1xuICAgICAgfVxuICAgICAgdGhpcy5zY2hlZHVsZUxheW91dCh0aGlzLmJvb2tlbmRfLmdldFJvb3QoKSk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTw/Li9ib29rZW5kLkJvb2tlbmRDb25maWdEZWY+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbG9hZEJvb2tlbmRDb25maWdJbXBsXygpIHtcbiAgICByZXR1cm4gdGhpcy5sb2FkSnNvbkZyb21BdHRyaWJ1dGVfKEJPT0tFTkRfQ09ORklHX0FUVFJJQlVURV9OQU1FKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZSAmJiB7XG4gICAgICAgICAgc2hhcmVQcm92aWRlcnM6IHJlc3BvbnNlWydzaGFyZS1wcm92aWRlcnMnXSxcbiAgICAgICAgICByZWxhdGVkQXJ0aWNsZXM6XG4gICAgICAgICAgICAgIHJlbGF0ZWRBcnRpY2xlc0Zyb21Kc29uKHJlc3BvbnNlWydyZWxhdGVkLWFydGljbGVzJ10pLFxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZSA9PiB7XG4gICAgICAgICAgdXNlcigpLmVycm9yKFRBRywgJ0Vycm9yIGZldGNoaW5nIGJvb2tlbmQgY29uZmlndXJhdGlvbicsIGUubWVzc2FnZSk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8Ym9vbGVhbj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBoYXNCb29rZW5kXygpIHtcbiAgICBjb25zdCBib29rZW5kQWN0aXZlID0gdGhpcy5zdGF0ZVNlcnZpY2VfLmdldFN0YXRlKFN0YXRlVHlwZS5CT09LRU5EX0FDVElWRSk7XG4gICAgaWYgKCFib29rZW5kQWN0aXZlLmlzTW9kaWZpYWJsZSgpKSB7XG4gICAgICAvLyBXaGV0aGVyIHRoZSBib29rZW5kIGlzIGFjdGl2ZSBjYW5ub3QgYmUgbW9kaWZpZWQ7IGl0cyBjdXJyZW50IHZhbHVlIGNhblxuICAgICAgLy8gYmUgYXNzdW1lZC5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoYm9va2VuZEFjdGl2ZS5nZXRWYWx1ZSgpKTtcbiAgICB9XG5cbiAgICAvLyBUT0RPKG5ld211aXMpOiBDaGFuZ2UgdGhpcyBjb21tZW50LlxuICAgIC8vIE9uIG1vYmlsZSB0aGVyZSBpcyBhbHdheXMgYSBib29rZW5kLiBPbiBkZXNrdG9wLCB0aGUgYm9va2VuZCB3aWxsIG9ubHlcbiAgICAvLyBiZSBzaG93biBpZiByZWxhdGVkIGFydGljbGVzIGhhdmUgYmVlbiBjb25maWd1cmVkLlxuICAgIGlmICghdGhpcy5pc0Rlc2t0b3BfKCkpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmxvYWRCb29rZW5kQ29uZmlnXygpLnRoZW4oY29uZmlnID0+XG4gICAgICBjb25maWcgJiYgY29uZmlnLnJlbGF0ZWRBcnRpY2xlcyAmJiBjb25maWcucmVsYXRlZEFydGljbGVzLmxlbmd0aCk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlTmFtZVxuICAgKiBAcmV0dXJuIHsoIVByb21pc2U8IUpzb25PYmplY3Q+fCFQcm9taXNlPG51bGw+KX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGxvYWRKc29uRnJvbUF0dHJpYnV0ZV8oYXR0cmlidXRlTmFtZSkge1xuICAgIGlmICghdGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG5cbiAgICBjb25zdCByYXdVcmwgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUpO1xuICAgIGNvbnN0IG9wdHMgPSB7fTtcbiAgICBvcHRzLnJlcXVpcmVBbXBSZXNwb25zZVNvdXJjZU9yaWdpbiA9IGZhbHNlO1xuXG4gICAgcmV0dXJuIFNlcnZpY2VzLnVybFJlcGxhY2VtZW50c0ZvckRvYyh0aGlzLmdldEFtcERvYygpKVxuICAgICAgICAuZXhwYW5kVXJsQXN5bmModXNlcigpLmFzc2VydFN0cmluZyhyYXdVcmwpKVxuICAgICAgICAudGhlbih1cmwgPT4gU2VydmljZXMueGhyRm9yKHRoaXMud2luKS5mZXRjaEpzb24odXJsLCBvcHRzKSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHVzZXIoKS5hc3NlcnQocmVzcG9uc2Uub2ssICdJbnZhbGlkIEhUVFAgcmVzcG9uc2UgZm9yIGJvb2tlbmQgSlNPTicpO1xuICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzQm9va2VuZF8oZWwpIHtcbiAgICByZXR1cm4gdGhpcy5ib29rZW5kXy5pc0J1aWx0KCkgJiYgZWwgPT09IHRoaXMuYm9va2VuZF8uZ2V0Um9vdCgpO1xuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzVG9wQmFyXyhlbCkge1xuICAgIHJldHVybiAhIXRoaXMudG9wQmFyXyAmJiB0aGlzLnRvcEJhcl8uY29udGFpbnMoZWwpO1xuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIFRoZSBJRCBvZiB0aGUgcGFnZSB3aG9zZSBpbmRleCBzaG91bGQgYmUgcmV0cmlldmVkLlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBpbmRleCBvZiB0aGUgcGFnZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFBhZ2VJbmRleEJ5SWRfKGlkKSB7XG4gICAgY29uc3QgcGFnZUluZGV4ID0gZmluZEluZGV4KHRoaXMucGFnZXNfLCBwYWdlID0+IHBhZ2UuZWxlbWVudC5pZCA9PT0gaWQpO1xuXG4gICAgaWYgKHBhZ2VJbmRleCA8IDApIHtcbiAgICAgIHVzZXIoKS5lcnJvcihUQUcsXG4gICAgICAgICAgYFN0b3J5IHJlZmVycyB0byBwYWdlIFwiJHtpZH1cIiwgYnV0IG5vIHN1Y2ggcGFnZSBleGlzdHMuYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhZ2VJbmRleDtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgSUQgb2YgdGhlIHBhZ2UgdG8gYmUgcmV0cmlldmVkLlxuICAgKiBAcmV0dXJuIHshLi9hbXAtc3RvcnktcGFnZS5BbXBTdG9yeVBhZ2V9IFJldHJpZXZlcyB0aGUgcGFnZSB3aXRoIHRoZVxuICAgKiAgICAgc3BlY2lmaWVkIElELlxuICAgKi9cbiAgZ2V0UGFnZUJ5SWQoaWQpIHtcbiAgICBjb25zdCBwYWdlSW5kZXggPSB0aGlzLmdldFBhZ2VJbmRleEJ5SWRfKGlkKTtcbiAgICByZXR1cm4gZGV2KCkuYXNzZXJ0KHRoaXMucGFnZXNfW3BhZ2VJbmRleF0sXG4gICAgICAgIGBQYWdlIGF0IGluZGV4ICR7cGFnZUluZGV4fSBleGlzdHMsIGJ1dCBpcyBtaXNzaW5nIGZyb20gdGhlIGFycmF5LmApO1xuICB9XG5cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0UGFnZUNvdW50KCkge1xuICAgIHJldHVybiB0aGlzLnBhZ2VzXy5sZW5ndGggLSB0aGlzLmFkUGFnZXNfLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2FtcC1zdG9yeS1wYWdlLkFtcFN0b3J5UGFnZX0gZGVzaXJlZFBhZ2VcbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgaW5kZXggb2YgdGhlIHBhZ2UuXG4gICAqL1xuICBnZXRQYWdlSW5kZXgoZGVzaXJlZFBhZ2UpIHtcbiAgICByZXR1cm4gZmluZEluZGV4KHRoaXMucGFnZXNfLCBwYWdlID0+IHBhZ2UgPT09IGRlc2lyZWRQYWdlKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQgd2hvc2UgY29udGFpbmluZyBBbXBTdG9yeVBhZ2Ugc2hvdWxkXG4gICAqICAgICBiZSByZXRyaWV2ZWRcbiAgICogQHJldHVybiB7IS4vYW1wLXN0b3J5LXBhZ2UuQW1wU3RvcnlQYWdlfSBUaGUgQW1wU3RvcnlQYWdlIGNvbnRhaW5pbmcgdGhlXG4gICAqICAgICBzcGVjaWZpZWQgZWxlbWVudC5cbiAgICovXG4gIGdldFBhZ2VDb250YWluaW5nRWxlbWVudF8oZWxlbWVudCkge1xuICAgIGNvbnN0IHBhZ2VJbmRleCA9IGZpbmRJbmRleCh0aGlzLnBhZ2VzXywgcGFnZSA9PiB7XG4gICAgICBjb25zdCBwYWdlRWwgPSBjbG9zZXN0KGVsZW1lbnQsIGVsID0+IHtcbiAgICAgICAgcmV0dXJuIGVsID09PSBwYWdlLmVsZW1lbnQ7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuICEhcGFnZUVsO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGRldigpLmFzc2VydCh0aGlzLnBhZ2VzX1twYWdlSW5kZXhdLFxuICAgICAgICAnRWxlbWVudCBub3QgY29udGFpbmVkIG9uIGFueSBhbXAtc3RvcnktcGFnZScpO1xuICB9XG5cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldEVsZW1lbnREaXN0YW5jZShlbGVtZW50KSB7XG4gICAgY29uc3QgcGFnZSA9IHRoaXMuZ2V0UGFnZUNvbnRhaW5pbmdFbGVtZW50XyhlbGVtZW50KTtcbiAgICByZXR1cm4gcGFnZS5nZXREaXN0YW5jZSgpO1xuICB9XG5cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldE1heE1lZGlhRWxlbWVudENvdW50cygpIHtcbiAgICBjb25zdCBhdWRpb01lZGlhRWxlbWVudHMgPVxuICAgICAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYW1wLWF1ZGlvLCBbYmFja2dyb3VuZC1hdWRpb10nKTtcbiAgICBjb25zdCB2aWRlb01lZGlhRWxlbWVudHMgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYW1wLXZpZGVvJyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgW01lZGlhVHlwZS5BVURJT106IE1hdGgubWluKFxuICAgICAgICAgIGF1ZGlvTWVkaWFFbGVtZW50cy5sZW5ndGgsIE1BWF9NRURJQV9FTEVNRU5UX0NPVU5UU1tNZWRpYVR5cGUuQVVESU9dKSxcbiAgICAgIFtNZWRpYVR5cGUuVklERU9dOiBNYXRoLm1pbihcbiAgICAgICAgICB2aWRlb01lZGlhRWxlbWVudHMubGVuZ3RoLCBNQVhfTUVESUFfRUxFTUVOVF9DT1VOVFNbTWVkaWFUeXBlLlZJREVPXSksXG4gICAgfTtcbiAgfVxuXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogTXV0ZXMgdGhlIGF1ZGlvIGZvciB0aGUgc3RvcnkuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBtdXRlXygpIHtcbiAgICB0aGlzLnBhZ2VzXy5mb3JFYWNoKHBhZ2UgPT4ge1xuICAgICAgcGFnZS5tdXRlQWxsTWVkaWEoKTtcbiAgICB9KTtcbiAgICB0aGlzLnRvZ2dsZU11dGVkQXR0cmlidXRlXyh0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbm11dGVzIHRoZSBhdWRpbyBmb3IgdGhlIHN0b3J5LlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdW5tdXRlXygpIHtcbiAgICBjb25zdCB1bm11dGVBbGxNZWRpYSA9ICgpID0+IHRoaXMuYWN0aXZlUGFnZV8udW5tdXRlQWxsTWVkaWEoKTtcbiAgICB0aGlzLm1lZGlhUG9vbF8uYmxlc3NBbGwoKVxuICAgICAgICAudGhlbih1bm11dGVBbGxNZWRpYSwgdW5tdXRlQWxsTWVkaWEpO1xuICAgIHRoaXMudG9nZ2xlTXV0ZWRBdHRyaWJ1dGVfKGZhbHNlKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFJlYXBwbGllcyB0aGUgbXV0aW5nIHN0YXR1cyBmb3IgdGhlIGN1cnJlbnRseS1hY3RpdmUgbWVkaWEgaW4gdGhlIHN0b3J5LlxuICAgKi9cbiAgcmVhcHBseU11dGluZ18oKSB7XG4gICAgY29uc3QgaXNNdXRlZCA9IHRoaXMuaXNNdXRlZF8oKTtcbiAgICBpZiAoIWlzTXV0ZWQpIHtcbiAgICAgIHRoaXMubXV0ZV8oKTtcbiAgICAgIHRoaXMudW5tdXRlXygpO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIHN0b3J5IGlzIGN1cnJlbnRseSBtdXRlZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGlzTXV0ZWRfKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQuaGFzQXR0cmlidXRlKEFVRElPX01VVEVEX0FUVFJJQlVURSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBUb2dnbGVzIG11dGUgb3IgdW5tdXRlIGF0dHJpYnV0ZSBvbiBlbGVtZW50LlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGlzTXV0ZWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRvZ2dsZU11dGVkQXR0cmlidXRlXyhpc011dGVkKSB7XG4gICAgaWYgKGlzTXV0ZWQpIHtcbiAgICAgIHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoQVVESU9fTVVURURfQVRUUklCVVRFLCAnJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoQVVESU9fTVVURURfQVRUUklCVVRFKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2hvd3MgdGhlIGF1ZGlvIGljb24gaWYgdGhlIHN0b3J5IGhhcyBhbnkgbWVkaWEgZWxlbWVudHMgb3IgYmFja2dyb3VuZFxuICAgKiBhdWRpby5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHVwZGF0ZUF1ZGlvSWNvbl8oKSB7XG4gICAgLy8gVE9ETygjMTE4NTcpOiBEZWZlciB0byBhbnkgcGxheWluZyBtZWRpYSBlbGVtZW50IGZvciB3aGV0aGVyIGFueSBhdWRpbyBpc1xuICAgIC8vIGJlaW5nIHBsYXllZC5cbiAgICBjb25zdCBjb250YWluc01lZGlhRWxlbWVudCA9ICEhdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICdhbXAtYXVkaW8sIGFtcC12aWRlbywgW2JhY2tncm91bmQtYXVkaW9dJyk7XG4gICAgY29uc3QgaGFzU3RvcnlBdWRpbyA9IHRoaXMuZWxlbWVudC5oYXNBdHRyaWJ1dGUoJ2JhY2tncm91bmQtYXVkaW8nKTtcblxuICAgIGlmIChjb250YWluc01lZGlhRWxlbWVudCB8fCBoYXNTdG9yeUF1ZGlvKSB7XG4gICAgICB0aGlzLmF1ZGlvUGxheWluZ18oKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWFya3MgdGhlIHN0b3J5IGFzIGhhdmluZyBhdWRpbyBwbGF5aW5nIG9uIHRoZSBhY3RpdmUgcGFnZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGF1ZGlvUGxheWluZ18oKSB7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2F1ZGlvLXBsYXlpbmcnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXJrcyB0aGUgc3RvcnkgYXMgbm90IGhhdmluZyBhdWRpbyBwbGF5aW5nIG9uIHRoZSBhY3RpdmUgcGFnZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGF1ZGlvU3RvcHBlZF8oKSB7XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2F1ZGlvLXBsYXlpbmcnKTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICByZXBsYXlfKCkge1xuICAgIGlmICh0aGlzLmJvb2tlbmRfLmlzQWN0aXZlKCkpIHtcbiAgICAgIC8vIERpc3BhY2hpbmcgZXZlbnQgaW5zdGVhZCBvZiBjYWxsaW5nIG1ldGhvZCBkaXJlY3RseSBzbyB0aGF0IGFsbFxuICAgICAgLy8gbGlzdGVuZXJzIGNhbiByZXNwb25kLlxuICAgICAgZGlzcGF0Y2godGhpcy5lbGVtZW50LCBFdmVudFR5cGUuQ0xPU0VfQk9PS0VORCk7XG4gICAgfVxuICAgIHRoaXMuc3dpdGNoVG9fKGRldigpLmFzc2VydEVsZW1lbnQodGhpcy5wYWdlc19bMF0uZWxlbWVudCkuaWQpO1xuICB9XG5cbiAgLyoqIEByZXR1cm4geyFOYXZpZ2F0aW9uU3RhdGV9ICovXG4gIGdldE5hdmlnYXRpb25TdGF0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5uYXZpZ2F0aW9uU3RhdGVfO1xuICB9XG5cblxuICAvKipcbiAgICogQWRkIHBhZ2UgdG8gYmFjayBvZiBwYWdlc18gYXJyYXlcbiAgICogQHBhcmFtIHshLi9hbXAtc3RvcnktcGFnZS5BbXBTdG9yeVBhZ2V9IHBhZ2VcbiAgICovXG4gIGFkZFBhZ2UocGFnZSkge1xuICAgIHRoaXMucGFnZXNfLnB1c2gocGFnZSk7XG5cbiAgICBpZiAocGFnZS5pc0FkKCkpIHtcbiAgICAgIHRoaXMuYWRQYWdlc18ucHVzaChwYWdlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0IGEgbmV3IHBhZ2UgaW4gbmF2aWdhdGlvbiBmbG93IGJ5IGNoYW5naW5nIHRoZSBhdHRyIHBvaW50ZXJzXG4gICAqIG9uIGFtcC1zdG9yeS1wYWdlIGVsZW1lbnRzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwYWdlQmVmb3JlSWRcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhZ2VUb0JlSW5zZXJ0ZWRJZFxuICAgKiBAcmV0dXJuIHtib29sZWFufSB3YXMgcGFnZSBpbnNlcnRlZFxuICAgKi9cbiAgaW5zZXJ0UGFnZShwYWdlQmVmb3JlSWQsIHBhZ2VUb0JlSW5zZXJ0ZWRJZCkge1xuICAgIC8vIFRPRE8oY2NvcmRyeSk6IG1ha2Ugc3VyZSB0aGlzIG1ldGhvZCBtb3ZlcyB0byBQYWdlTWFuYWdlciB3aGVuIGltcGxlbWVudGVkXG4gICAgY29uc3QgcGFnZVRvQmVJbnNlcnRlZCA9IHRoaXMuZ2V0UGFnZUJ5SWQocGFnZVRvQmVJbnNlcnRlZElkKTtcbiAgICBjb25zdCBwYWdlVG9CZUluc2VydGVkRWwgPSBwYWdlVG9CZUluc2VydGVkLmVsZW1lbnQ7XG5cbiAgICBjb25zdCBhbGxvd0F1dG9tYXRpY0FkSW5zZXJ0aW9uID0gdGhpcy5zdGF0ZVNlcnZpY2VfXG4gICAgICAgIC5nZXRTdGF0ZShTdGF0ZVR5cGUuQUxMT1dfQVVUT01BVElDX0FEX0lOU0VSVElPTik7XG5cbiAgICBpZiAocGFnZVRvQmVJbnNlcnRlZC5pc0FkKCkgJiYgIWFsbG93QXV0b21hdGljQWRJbnNlcnRpb24uZ2V0VmFsdWUoKSkge1xuICAgICAgZGV2KCkuZXhwZWN0ZWRFcnJvcihUQUcsICdJbnNlcnRpbmcgYWRzIGF1dG9tYXRpY2FsbHkgaXMgZGlzYWxsb3dlZC4nKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBwYWdlQmVmb3JlID0gdGhpcy5nZXRQYWdlQnlJZChwYWdlQmVmb3JlSWQpO1xuICAgIGNvbnN0IHBhZ2VCZWZvcmVFbCA9IHBhZ2VCZWZvcmUuZWxlbWVudDtcblxuICAgIGNvbnN0IG5leHRQYWdlID0gdGhpcy5nZXROZXh0UGFnZShwYWdlQmVmb3JlKTtcblxuICAgIGlmICghbmV4dFBhZ2UpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwYWdlQmVmb3JlRWwuc2V0QXR0cmlidXRlKEFEVkFOQ0VfVE9fQVRUUiwgcGFnZVRvQmVJbnNlcnRlZElkKTtcbiAgICBwYWdlQmVmb3JlRWwuc2V0QXR0cmlidXRlKEFVVE9fQURWQU5DRV9UT19BVFRSLCBwYWdlVG9CZUluc2VydGVkSWQpO1xuICAgIHBhZ2VUb0JlSW5zZXJ0ZWRFbC5zZXRBdHRyaWJ1dGUoUkVUVVJOX1RPX0FUVFIsIHBhZ2VCZWZvcmVJZCk7XG5cbiAgICBjb25zdCBuZXh0UGFnZUVsID0gbmV4dFBhZ2UuZWxlbWVudDtcbiAgICBjb25zdCBuZXh0UGFnZUlkID0gbmV4dFBhZ2VFbC5pZDtcbiAgICBwYWdlVG9CZUluc2VydGVkRWwuc2V0QXR0cmlidXRlKEFEVkFOQ0VfVE9fQVRUUiwgbmV4dFBhZ2VJZCk7XG4gICAgcGFnZVRvQmVJbnNlcnRlZEVsLnNldEF0dHJpYnV0ZShBVVRPX0FEVkFOQ0VfVE9fQVRUUiwgbmV4dFBhZ2VJZCk7XG4gICAgbmV4dFBhZ2VFbC5zZXRBdHRyaWJ1dGUoUkVUVVJOX1RPX0FUVFIsIHBhZ2VUb0JlSW5zZXJ0ZWRJZCk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEdldCBuZXh0IHBhZ2Ugb2JqZWN0XG4gICAqIEBwYXJhbSB7IS4vYW1wLXN0b3J5LXBhZ2UuQW1wU3RvcnlQYWdlfSBwYWdlXG4gICAqIEByZXR1cm4gez8uL2FtcC1zdG9yeS1wYWdlLkFtcFN0b3J5UGFnZX1cbiAgICovXG4gIGdldE5leHRQYWdlKHBhZ2UpIHtcbiAgICBjb25zdCBuZXh0UGFnZUlkID0gcGFnZS5nZXROZXh0UGFnZUlkKHRydWUgLypvcHRfaXNBdXRvbWF0aWNBZHZhbmNlICovKTtcbiAgICBpZiAoIW5leHRQYWdlSWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRQYWdlQnlJZChuZXh0UGFnZUlkKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlIHVzZXIncyBicm93c2VyIHN1cHBvcnRzIHRoZSBmZWF0dXJlcyBuZWVkZWRcbiAgICogICAgIGZvciBhbXAtc3RvcnkuXG4gICAqL1xuICBzdGF0aWMgaXNCcm93c2VyU3VwcG9ydGVkKHdpbikge1xuICAgIHJldHVybiB3aW4uQ1NTLnN1cHBvcnRzKCdkaXNwbGF5JywgJ2dyaWQnKTtcbiAgfVxufVxuXG5cbkFNUC5leHRlbnNpb24oJ2FtcC1zdG9yeScsICcwLjEnLCBBTVAgPT4ge1xuICBBTVAucmVnaXN0ZXJFbGVtZW50KCdhbXAtc3RvcnknLCBBbXBTdG9yeSwgQ1NTKTtcbn0pO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge1N0YXRlQ2hhbmdlVHlwZX0gZnJvbSAnLi9uYXZpZ2F0aW9uLXN0YXRlJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7bWFwfSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvb2JqZWN0JztcbmltcG9ydCB7dHJpZ2dlckFuYWx5dGljc0V2ZW50fSBmcm9tICcuLi8uLi8uLi9zcmMvYW5hbHl0aWNzJztcblxuXG5jb25zdCBFdmVudHMgPSB7XG4gIFBBR0VfVklTSUJMRTogJ3N0b3J5LXBhZ2UtdmlzaWJsZScsXG59O1xuXG5cbi8qKlxuICogSW50ZXJtZWRpYXRlIGhhbmRsZXIgZm9yIGFtcC1zdG9yeSBzcGVjaWZpYyBhbmFseXRpY3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBBbXBTdG9yeUFuYWx5dGljcyB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gICAqL1xuICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgdGhpcy5lbGVtZW50XyA9IGVsZW1lbnQ7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PG51bWJlciwgYm9vbGVhbj59ICovXG4gICAgdGhpcy5zZWVuUGFnZXNJbmRpY2VzXyA9IG1hcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vbmF2aWdhdGlvbi1zdGF0ZS5TdGF0ZUNoYW5nZUV2ZW50RGVmfSBzdGF0ZUNoYW5nZUV2ZW50XG4gICAqL1xuICBvblN0YXRlQ2hhbmdlKHN0YXRlQ2hhbmdlRXZlbnQpIHtcbiAgICBzd2l0Y2ggKHN0YXRlQ2hhbmdlRXZlbnQudHlwZSkge1xuICAgICAgY2FzZSBTdGF0ZUNoYW5nZVR5cGUuQUNUSVZFX1BBR0U6XG4gICAgICAgIGNvbnN0IHtwYWdlSW5kZXgsIHBhZ2VJZH0gPSBzdGF0ZUNoYW5nZUV2ZW50LnZhbHVlO1xuICAgICAgICB0aGlzLm9uQWN0aXZlUGFnZUNoYW5nZV8oXG4gICAgICAgICAgICBkZXYoKS5hc3NlcnROdW1iZXIocGFnZUluZGV4KSxcbiAgICAgICAgICAgIGRldigpLmFzc2VydFN0cmluZyhwYWdlSWQpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwYWdlSW5kZXhcbiAgICogQHBhcmFtIHtzdHJpbmd9IHBhZ2VJZFxuICAgKi9cbiAgb25BY3RpdmVQYWdlQ2hhbmdlXyhwYWdlSW5kZXgsIHBhZ2VJZCkge1xuICAgIGlmICghdGhpcy5zZWVuUGFnZXNJbmRpY2VzX1twYWdlSW5kZXhdKSB7XG4gICAgICB0aGlzLnRyaWdnZXJFdmVudF8oRXZlbnRzLlBBR0VfVklTSUJMRSwge1xuICAgICAgICAnc3RvcnlQYWdlSW5kZXgnOiBwYWdlSW5kZXgudG9TdHJpbmcoKSxcbiAgICAgICAgJ3N0b3J5UGFnZUlkJzogcGFnZUlkLFxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2VlblBhZ2VzSW5kaWNlc19bcGFnZUluZGV4XSA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAgICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPj19IG9wdF92YXJzIEEgbWFwIG9mIHZhcnMgYW5kIHRoZWlyIHZhbHVlcy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRyaWdnZXJFdmVudF8oZXZlbnRUeXBlLCBvcHRfdmFycykge1xuICAgIHRyaWdnZXJBbmFseXRpY3NFdmVudCh0aGlzLmVsZW1lbnRfLCBldmVudFR5cGUsIG9wdF92YXJzKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7U3RvcnlBbmltYXRpb25QcmVzZXREZWZ9IGZyb20gJy4vYW5pbWF0aW9uLXR5cGVzJztcbmltcG9ydCB7cHh9IGZyb20gJy4uLy4uLy4uL3NyYy9zdHlsZSc7XG5cblxuLyoqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsICFTdG9yeUFuaW1hdGlvblByZXNldERlZj59ICovXG4vLyBGaXJzdCBrZXlmcmFtZSB3aWxsIGFsd2F5cyBiZSBjb25zaWRlcmVkIG9mZnNldDogMCBhbmQgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZVxuLy8gZWxlbWVudCBhcyB0aGUgZmlyc3QgZnJhbWUgYmVmb3JlIGFuaW1hdGlvbiBzdGFydHMuXG5leHBvcnQgY29uc3QgUFJFU0VUUyA9IHtcbiAgJ3B1bHNlJzoge1xuICAgIGR1cmF0aW9uOiA1MDAsXG4gICAgZWFzaW5nOiAnbGluZWFyJyxcbiAgICBrZXlmcmFtZXM6IFtcbiAgICAgIHtcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgxKScsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBvZmZzZXQ6IDAuMjUsXG4gICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKDAuOTUpJyxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG9mZnNldDogMC43NSxcbiAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoMS4wNSknLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgb2Zmc2V0OiAxLFxuICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgxKScsXG4gICAgICB9LFxuICAgIF0sXG4gIH0sXG4gICdmbHktaW4tbGVmdCc6IHtcbiAgICBkdXJhdGlvbjogNTAwLFxuICAgIGVhc2luZzogJ2Vhc2Utb3V0JyxcbiAgICBrZXlmcmFtZXMoZGltZW5zaW9ucykge1xuICAgICAgY29uc3Qgb2Zmc2V0WCA9IC0oZGltZW5zaW9ucy50YXJnZXRYICsgZGltZW5zaW9ucy50YXJnZXRXaWR0aCk7XG5cbiAgICAgIHJldHVybiBbXG4gICAgICAgIHt0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtweChvZmZzZXRYKX0sIDApYH0sXG4gICAgICAgIHt0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMCwgMCknfSxcbiAgICAgIF07XG4gICAgfSxcbiAgfSxcbiAgJ2ZseS1pbi1yaWdodCc6IHtcbiAgICBkdXJhdGlvbjogNTAwLFxuICAgIGVhc2luZzogJ2Vhc2Utb3V0JyxcbiAgICBrZXlmcmFtZXMoZGltZW5zaW9ucykge1xuICAgICAgY29uc3Qgb2Zmc2V0WCA9IGRpbWVuc2lvbnMucGFnZVdpZHRoIC0gZGltZW5zaW9ucy50YXJnZXRYO1xuXG4gICAgICByZXR1cm4gW1xuICAgICAgICB7dHJhbnNmb3JtOiBgdHJhbnNsYXRlKCR7cHgob2Zmc2V0WCl9LCAwKWB9LFxuICAgICAgICB7dHJhbnNmb3JtOiAndHJhbnNsYXRlKDAsIDApJ30sXG4gICAgICBdO1xuICAgIH0sXG4gIH0sXG4gICdmbHktaW4tdG9wJzoge1xuICAgIGR1cmF0aW9uOiA1MDAsXG4gICAgZWFzaW5nOiAnZWFzZS1vdXQnLFxuICAgIGtleWZyYW1lcyhkaW1lbnNpb25zKSB7XG4gICAgICBjb25zdCBvZmZzZXRZID0gLShkaW1lbnNpb25zLnRhcmdldFkgKyBkaW1lbnNpb25zLnRhcmdldEhlaWdodCk7XG5cbiAgICAgIHJldHVybiBbXG4gICAgICAgIHt0cmFuc2Zvcm06IGB0cmFuc2xhdGUoMCwgJHtweChvZmZzZXRZKX0pYH0sXG4gICAgICAgIHt0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMCwgMCknfSxcbiAgICAgIF07XG4gICAgfSxcbiAgfSxcbiAgJ2ZseS1pbi1ib3R0b20nOiB7XG4gICAgZHVyYXRpb246IDUwMCxcbiAgICBlYXNpbmc6ICdlYXNlLW91dCcsXG4gICAga2V5ZnJhbWVzKGRpbWVuc2lvbnMpIHtcbiAgICAgIGNvbnN0IG9mZnNldFkgPSBkaW1lbnNpb25zLnBhZ2VIZWlnaHQgLSBkaW1lbnNpb25zLnRhcmdldFk7XG5cbiAgICAgIHJldHVybiBbXG4gICAgICAgIHt0cmFuc2Zvcm06IGB0cmFuc2xhdGUoMCwgJHtweChvZmZzZXRZKX0pYH0sXG4gICAgICAgIHt0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMCwgMCknfSxcbiAgICAgIF07XG4gICAgfSxcbiAgfSxcbiAgJ3JvdGF0ZS1pbi1sZWZ0Jzoge1xuICAgIGR1cmF0aW9uOiA3MDAsXG4gICAgZWFzaW5nOiAnZWFzZS1vdXQnLFxuICAgIGtleWZyYW1lcyhkaW1lbnNpb25zKSB7XG4gICAgICBjb25zdCBvZmZzZXRYID0gLShkaW1lbnNpb25zLnRhcmdldFggKyBkaW1lbnNpb25zLnRhcmdldFdpZHRoKTtcblxuICAgICAgcmV0dXJuIFtcbiAgICAgICAge3RyYW5zZm9ybTogYHRyYW5zbGF0ZSgke3B4KG9mZnNldFgpfSwgMCkgcm90YXRlKC0zNjBkZWcpYH0sXG4gICAgICAgIHt0cmFuc2Zvcm06ICd0cmFuc2xhdGUoMCwgMCkgcm90YXRlKDApJ30sXG4gICAgICBdO1xuICAgIH0sXG4gIH0sXG4gICdyb3RhdGUtaW4tcmlnaHQnOiB7XG4gICAgZHVyYXRpb246IDcwMCxcbiAgICBlYXNpbmc6ICdlYXNlLW91dCcsXG4gICAga2V5ZnJhbWVzKGRpbWVuc2lvbnMpIHtcbiAgICAgIGNvbnN0IG9mZnNldFggPSBkaW1lbnNpb25zLnBhZ2VXaWR0aCAtIGRpbWVuc2lvbnMudGFyZ2V0WDtcblxuICAgICAgcmV0dXJuIFtcbiAgICAgICAge3RyYW5zZm9ybTogYHRyYW5zbGF0ZSgke3B4KG9mZnNldFgpfSwgMCkgcm90YXRlKDM2MGRlZylgfSxcbiAgICAgICAge3RyYW5zZm9ybTogJ3RyYW5zbGF0ZSgwLCAwKSByb3RhdGUoMCknfSxcbiAgICAgIF07XG4gICAgfSxcbiAgfSxcbiAgJ2ZhZGUtaW4nOiB7XG4gICAgZHVyYXRpb246IDUwMCxcbiAgICBlYXNpbmc6ICdlYXNlLW91dCcsXG4gICAga2V5ZnJhbWVzOiBbXG4gICAgICB7XG4gICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgfSxcbiAgICBdLFxuICB9LFxuICAnZHJvcCc6IHtcbiAgICBkdXJhdGlvbjogMTYwMCxcbiAgICBrZXlmcmFtZXMoZGltZW5zaW9ucykge1xuICAgICAgY29uc3QgbWF4Qm91bmNlSGVpZ2h0ID1cbiAgICAgICAgICBNYXRoLm1heCgxNjAsIGRpbWVuc2lvbnMudGFyZ2V0WSArIGRpbWVuc2lvbnMudGFyZ2V0SGVpZ2h0KTtcblxuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIG9mZnNldDogMCxcbiAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKCR7cHgoLW1heEJvdW5jZUhlaWdodCl9KWAsXG4gICAgICAgICAgZWFzaW5nOiAnY3ViaWMtYmV6aWVyKC43NSwuMDUsLjg2LC4wOCknLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgb2Zmc2V0OiAwLjMsXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgwKScsXG4gICAgICAgICAgZWFzaW5nOiAnY3ViaWMtYmV6aWVyKC4yMiwuNjEsLjM1LDEpJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG9mZnNldDogMC41MixcbiAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKCR7cHgoLTAuNiAqIG1heEJvdW5jZUhlaWdodCl9KWAsXG4gICAgICAgICAgZWFzaW5nOiAnY3ViaWMtYmV6aWVyKC43NSwuMDUsLjg2LC4wOCknLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgb2Zmc2V0OiAwLjc0LFxuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoMCknLFxuICAgICAgICAgIGVhc2luZzogJ2N1YmljLWJlemllciguMjIsLjYxLC4zNSwxKScsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBvZmZzZXQ6IDAuODMsXG4gICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgke3B4KC0wLjMgKiBtYXhCb3VuY2VIZWlnaHQpfSlgLFxuICAgICAgICAgIGVhc2luZzogJ2N1YmljLWJlemllciguNzUsLjA1LC44NiwuMDgpJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG9mZnNldDogMSxcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKDApJyxcbiAgICAgICAgICBlYXNpbmc6ICdjdWJpYy1iZXppZXIoLjIyLC42MSwuMzUsMSknLFxuICAgICAgICB9LFxuICAgICAgXTtcbiAgICB9LFxuICB9LFxuICAndHdpcmwtaW4nOiB7XG4gICAgZHVyYXRpb246IDEwMDAsXG4gICAgZWFzaW5nOiAnY3ViaWMtYmV6aWVyKC4yLC43NSwuNCwxKScsXG4gICAga2V5ZnJhbWVzOiBbXG4gICAgICB7XG4gICAgICAgIHRyYW5zZm9ybTogJ3JvdGF0ZSgtNTQwZGVnKSBzY2FsZSgwLjEpJyxcbiAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRyYW5zZm9ybTogJ25vbmUnLFxuICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgfSxcbiAgICBdLFxuICB9LFxuICAnd2hvb3NoLWluLWxlZnQnOiB7XG4gICAgZHVyYXRpb246IDUwMCxcbiAgICBlYXNpbmc6ICdlYXNlLW91dCcsXG4gICAga2V5ZnJhbWVzKGRpbWVuc2lvbnMpIHtcbiAgICAgIGNvbnN0IG9mZnNldFggPSAtKGRpbWVuc2lvbnMudGFyZ2V0WCArIGRpbWVuc2lvbnMudGFyZ2V0V2lkdGgpO1xuXG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtweChvZmZzZXRYKX0sIDApIHNjYWxlKDAuMTUpYCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDAsIDApIHNjYWxlKDEpJyxcbiAgICAgICAgfSxcbiAgICAgIF07XG4gICAgfSxcbiAgfSxcbiAgJ3dob29zaC1pbi1yaWdodCc6IHtcbiAgICBkdXJhdGlvbjogNTAwLFxuICAgIGVhc2luZzogJ2Vhc2Utb3V0JyxcbiAgICBrZXlmcmFtZXMoZGltZW5zaW9ucykge1xuICAgICAgY29uc3Qgb2Zmc2V0WCA9IGRpbWVuc2lvbnMucGFnZVdpZHRoIC0gZGltZW5zaW9ucy50YXJnZXRYO1xuXG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUoJHtweChvZmZzZXRYKX0sIDApIHNjYWxlKDAuMTUpYCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlKDAsIDApIHNjYWxlKDEpJyxcbiAgICAgICAgfSxcbiAgICAgIF07XG4gICAgfSxcbiAgfSxcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqIEB0eXBlZGVmIHshQXJyYXk8IU9iamVjdDxzdHJpbmcsICo+Pn0gKi9cbmV4cG9ydCBsZXQgS2V5ZnJhbWVzRGVmO1xuXG5cbi8qKiBAdHlwZWRlZiB7KGZ1bmN0aW9uKFN0b3J5QW5pbWF0aW9uRGltc0RlZik6IUtleWZyYW1lc0RlZil8IUtleWZyYW1lc0RlZn0gKi9cbmV4cG9ydCBsZXQgS2V5ZnJhbWVzT3JGaWx0ZXJGbkRlZjtcblxuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHBhZ2VXaWR0aDogbnVtYmVyLFxuICogICBwYWdlSGVpZ2h0OiBudW1iZXIsXG4gKiAgIHRhcmdldFdpZHRoOiBudW1iZXIsXG4gKiAgIHRhcmdldEhlaWdodDogbnVtYmVyLFxuICogICB0YXJnZXRYOiBudW1iZXIsXG4gKiAgIHRhcmdldFk6IG51bWJlcixcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgU3RvcnlBbmltYXRpb25EaW1zRGVmO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgZHVyYXRpb246IG51bWJlcixcbiAqICAgZWFzaW5nOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIGtleWZyYW1lczogIUtleWZyYW1lc09yRmlsdGVyRm5EZWYsXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IFN0b3J5QW5pbWF0aW9uUHJlc2V0RGVmO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICB0YXJnZXQ6ICFFbGVtZW50LFxuICogIHN0YXJ0QWZ0ZXJJZDogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogIHByZXNldDogIVN0b3J5QW5pbWF0aW9uUHJlc2V0RGVmLFxuICogIGR1cmF0aW9uOiAobnVtYmVyfHVuZGVmaW5lZCksXG4gKiAgZGVsYXk6IChudW1iZXJ8dW5kZWZpbmVkKSxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgU3RvcnlBbmltYXRpb25EZWY7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtcbiAgS2V5ZnJhbWVzRGVmLFxuICBLZXlmcmFtZXNPckZpbHRlckZuRGVmLFxuICBTdG9yeUFuaW1hdGlvbkRlZixcbiAgU3RvcnlBbmltYXRpb25EaW1zRGVmLFxuICBTdG9yeUFuaW1hdGlvblByZXNldERlZixcbn0gZnJvbSAnLi9hbmltYXRpb24tdHlwZXMnO1xuaW1wb3J0IHtQUkVTRVRTfSBmcm9tICcuL2FuaW1hdGlvbi1wcmVzZXRzJztcbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge1xuICBXZWJBbmltYXRpb25QbGF5U3RhdGUsXG59IGZyb20gJy4uLy4uL2FtcC1hbmltYXRpb24vMC4xL3dlYi1hbmltYXRpb24tdHlwZXMnO1xuaW1wb3J0IHtkZXYsIHVzZXJ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuaW1wb3J0IHtlc2NhcGVDc3NTZWxlY3RvcklkZW50LCBzY29wZWRRdWVyeVNlbGVjdG9yLCBzY29wZWRRdWVyeVNlbGVjdG9yQWxsfSBmcm9tICcuLi8uLi8uLi9zcmMvZG9tJztcbmltcG9ydCB7bWFwLCBvbWl0fSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvb2JqZWN0JztcbmltcG9ydCB7c2V0U3R5bGVzfSBmcm9tICcuLi8uLi8uLi9zcmMvc3R5bGUnO1xuaW1wb3J0IHt0aW1lU3RyVG9NaWxsaXMsIHVuc2NhbGVkQ2xpZW50UmVjdH0gZnJvbSAnLi91dGlscyc7XG5cbi8qKiBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgQU5JTUFURV9JTl9BVFRSSUJVVEVfTkFNRSA9ICdhbmltYXRlLWluJztcbi8qKiBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgQU5JTUFURV9JTl9EVVJBVElPTl9BVFRSSUJVVEVfTkFNRSA9ICdhbmltYXRlLWluLWR1cmF0aW9uJztcbi8qKiBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgQU5JTUFURV9JTl9ERUxBWV9BVFRSSUJVVEVfTkFNRSA9ICdhbmltYXRlLWluLWRlbGF5Jztcbi8qKiBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgQU5JTUFURV9JTl9BRlRFUl9BVFRSSUJVVEVfTkFNRSA9ICdhbmltYXRlLWluLWFmdGVyJztcbi8qKiBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgQU5JTUFUQUJMRV9FTEVNRU5UU19TRUxFQ1RPUiA9IGBbJHtBTklNQVRFX0lOX0FUVFJJQlVURV9OQU1FfV1gO1xuXG5cbi8qKlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuLy8gVE9ETyhhbGFub3JvemNvKTogbWF5YmUgbWVtb2l6ZT9cbmV4cG9ydCBmdW5jdGlvbiBoYXNBbmltYXRpb25zKGVsZW1lbnQpIHtcbiAgcmV0dXJuICEhc2NvcGVkUXVlcnlTZWxlY3RvcihlbGVtZW50LCBBTklNQVRBQkxFX0VMRU1FTlRTX1NFTEVDVE9SKTtcbn1cblxuXG4vKiogQGVudW0ge251bWJlcn0gKi9cbmNvbnN0IFBsYXliYWNrQWN0aXZpdHkgPSB7XG4gIFNUQVJUOiAwLFxuICBGSU5JU0g6IDEsXG59O1xuXG5cbi8qKiBXcmFwcyBXZWJBbmltYXRpb25SdW5uZXIgZm9yIHN0b3J5IHBhZ2UgZWxlbWVudHMuICovXG5jbGFzcyBBbmltYXRpb25SdW5uZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gcGFnZVxuICAgKiBAcGFyYW0geyFTdG9yeUFuaW1hdGlvbkRlZn0gYW5pbWF0aW9uRGVmXG4gICAqIEBwYXJhbSB7IVByb21pc2U8XG4gICAqICAgICEuLi8uLi9hbXAtYW5pbWF0aW9uLzAuMS93ZWItYW5pbWF0aW9ucy5CdWlsZGVyXG4gICAqID59IHdlYkFuaW1hdGlvbkJ1aWxkZXJQcm9taXNlXG4gICAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3ZzeW5jLWltcGwuVnN5bmN9IHZzeW5jXG4gICAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3RpbWVyLWltcGwuVGltZXJ9IHRpbWVyXG4gICAqIEBwYXJhbSB7IUFuaW1hdGlvblNlcXVlbmNlfSBzZXF1ZW5jZVxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcGFnZSwgYW5pbWF0aW9uRGVmLCB3ZWJBbmltYXRpb25CdWlsZGVyUHJvbWlzZSwgdnN5bmMsIHRpbWVyLCBzZXF1ZW5jZSkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgKi9cbiAgICB0aGlzLnBhZ2VfID0gcGFnZTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgKi9cbiAgICB0aGlzLnRpbWVyXyA9IHRpbWVyO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCAqL1xuICAgIHRoaXMudnN5bmNfID0gdnN5bmM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0ICovXG4gICAgdGhpcy50YXJnZXRfID0gZGV2KCkuYXNzZXJ0RWxlbWVudChhbmltYXRpb25EZWYudGFyZ2V0KTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgKi9cbiAgICB0aGlzLnNlcXVlbmNlXyA9IHNlcXVlbmNlO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCAqL1xuICAgIHRoaXMuYW5pbWF0aW9uRGVmXyA9IGFuaW1hdGlvbkRlZjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgKi9cbiAgICB0aGlzLnByZXNldERlZl8gPSBhbmltYXRpb25EZWYucHJlc2V0O1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCAqL1xuICAgIHRoaXMua2V5ZnJhbWVzXyA9IHRoaXMuZmlsdGVyS2V5ZnJhbWVzXyhhbmltYXRpb25EZWYucHJlc2V0LmtleWZyYW1lcyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0ICovXG4gICAgdGhpcy5kZWxheV8gPSBhbmltYXRpb25EZWYuZGVsYXkgfHwgdGhpcy5wcmVzZXREZWZfLmRlbGF5IHx8IDA7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0ICovXG4gICAgdGhpcy5kdXJhdGlvbl8gPSBhbmltYXRpb25EZWYuZHVyYXRpb24gfHwgdGhpcy5wcmVzZXREZWZfLmR1cmF0aW9uIHx8IDA7XG5cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlPFxuICAgICAqICAgICEuLi8uLi9hbXAtYW5pbWF0aW9uLzAuMS93ZWItYW5pbWF0aW9ucy5XZWJBbmltYXRpb25SdW5uZXI+fVxuICAgICAqL1xuICAgIHRoaXMucnVubmVyUHJvbWlzZV8gPSB0aGlzLmdldFdlYkFuaW1hdGlvbkRlZl8oKS50aGVuKHdlYkFuaW1EZWYgPT5cbiAgICAgIHdlYkFuaW1hdGlvbkJ1aWxkZXJQcm9taXNlLnRoZW4oYnVpbGRlciA9PlxuICAgICAgICBidWlsZGVyLmNyZWF0ZVJ1bm5lcih3ZWJBbmltRGVmKSkpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb21pc2U8IU9iamVjdDxzdHJpbmcsICo+Pn0gKi9cbiAgICB0aGlzLmZpcnN0RnJhbWVQcm9wc18gPVxuICAgICAgICB0aGlzLmtleWZyYW1lc18udGhlbihrZXlmcmFtZXMgPT4gb21pdChrZXlmcmFtZXNbMF0sIFsnb2Zmc2V0J10pKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Py4uLy4uL2FtcC1hbmltYXRpb24vMC4xL3dlYi1hbmltYXRpb25zLldlYkFuaW1hdGlvblJ1bm5lcn0gKi9cbiAgICB0aGlzLnJ1bm5lcl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/UGxheWJhY2tBY3Rpdml0eX0gKi9cbiAgICB0aGlzLnNjaGVkdWxlZEFjdGl2aXR5XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9Qcm9taXNlfSAqL1xuICAgIHRoaXMuc2NoZWR1bGVkV2FpdF8gPSBudWxsO1xuXG4gICAgdGhpcy5rZXlmcmFtZXNfLnRoZW4oa2V5ZnJhbWVzID0+IGRldigpLmFzc2VydChcbiAgICAgICAgIWtleWZyYW1lc1swXS5vZmZzZXQsXG4gICAgICAgICdGaXJzdCBrZXlmcmFtZSBvZmZzZXQgZm9yIGFuaW1hdGlvbiBwcmVzZXQgc2hvdWxkIGJlIDAgb3IgdW5kZWZpbmVkJykpO1xuXG4gICAgdXNlcigpLmFzc2VydChcbiAgICAgICAgdGhpcy5kZWxheV8gPj0gMCxcbiAgICAgICAgJ05lZ2F0aXZlIGRlbGF5cyBhcmUgbm90IGFsbG93ZWQgaW4gYW1wLXN0b3J5IGVudHJhbmNlIGFuaW1hdGlvbnMuJyk7XG5cbiAgICB0aGlzLnJ1bm5lclByb21pc2VfLnRoZW4ocnVubmVyID0+IHRoaXMub25SdW5uZXJSZWFkeV8ocnVubmVyKSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8IVN0b3J5QW5pbWF0aW9uRGltc0RlZj59XG4gICAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICAgKi9cbiAgZ2V0RGltcygpIHtcbiAgICByZXR1cm4gdGhpcy52c3luY18ubWVhc3VyZVByb21pc2UoKCkgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0UmVjdCA9IHVuc2NhbGVkQ2xpZW50UmVjdCh0aGlzLnRhcmdldF8pO1xuICAgICAgY29uc3QgcGFnZVJlY3QgPSB1bnNjYWxlZENsaWVudFJlY3QodGhpcy5wYWdlXyk7XG5cbiAgICAgIHJldHVybiAvKiogQHR5cGUgeyFTdG9yeUFuaW1hdGlvbkRpbXNEZWZ9ICovICh7XG4gICAgICAgIHBhZ2VXaWR0aDogcGFnZVJlY3Qud2lkdGgsXG4gICAgICAgIHBhZ2VIZWlnaHQ6IHBhZ2VSZWN0LmhlaWdodCxcbiAgICAgICAgdGFyZ2V0V2lkdGg6IHRhcmdldFJlY3Qud2lkdGgsXG4gICAgICAgIHRhcmdldEhlaWdodDogdGFyZ2V0UmVjdC5oZWlnaHQsXG4gICAgICAgIHRhcmdldFg6IHRhcmdldFJlY3QubGVmdCAtIHBhZ2VSZWN0LmxlZnQsXG4gICAgICAgIHRhcmdldFk6IHRhcmdldFJlY3QudG9wIC0gcGFnZVJlY3QudG9wLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshS2V5ZnJhbWVzT3JGaWx0ZXJGbkRlZn0ga2V5ZnJhbWVzQXJyYXlPckZuXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCFLZXlmcmFtZXNEZWY+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZmlsdGVyS2V5ZnJhbWVzXyhrZXlmcmFtZXNBcnJheU9yRm4pIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShrZXlmcmFtZXNBcnJheU9yRm4pKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGtleWZyYW1lc0FycmF5T3JGbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldERpbXMoKS50aGVuKGtleWZyYW1lc0FycmF5T3JGbik7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2U8XG4gICAqICAgIS4uLy4uL2FtcC1hbmltYXRpb24vMC4xL3dlYi1hbmltYXRpb24tdHlwZXMuV2ViS2V5ZnJhbWVBbmltYXRpb25EZWY+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0V2ViQW5pbWF0aW9uRGVmXygpIHtcbiAgICByZXR1cm4gdGhpcy5rZXlmcmFtZXNfLnRoZW4oa2V5ZnJhbWVzID0+ICh7XG4gICAgICBrZXlmcmFtZXMsXG4gICAgICB0YXJnZXQ6IHRoaXMudGFyZ2V0XyxcbiAgICAgIGR1cmF0aW9uOiBgJHt0aGlzLmR1cmF0aW9uX31tc2AsXG4gICAgICBlYXNpbmc6IHRoaXMucHJlc2V0RGVmXy5lYXNpbmcsXG4gICAgICBmaWxsOiAnZm9yd2FyZHMnLFxuICAgIH0pKTtcbiAgfVxuXG4gIC8qKiBAcmV0dXJuIHshUHJvbWlzZTx2b2lkPn0gKi9cbiAgYXBwbHlGaXJzdEZyYW1lKCkge1xuICAgIGlmICh0aGlzLmhhc1N0YXJ0ZWQoKSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJ1bm5lcl8pIHtcbiAgICAgIHRoaXMucnVubmVyXy5jYW5jZWwoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5maXJzdEZyYW1lUHJvcHNfLnRoZW4oZmlyc3RGcmFtZVByb3BzID0+XG4gICAgICB0aGlzLnZzeW5jXy5tdXRhdGVQcm9taXNlKCgpID0+IHtcbiAgICAgICAgc2V0U3R5bGVzKHRoaXMudGFyZ2V0XywgZmlyc3RGcmFtZVByb3BzKTtcbiAgICAgIH0pKTtcbiAgfVxuXG4gIC8qKiBTdGFydHMgb3IgcmVzdW1lcyB0aGUgYW5pbWF0aW9uLiAqL1xuICBzdGFydCgpIHtcbiAgICBpZiAodGhpcy5oYXNTdGFydGVkKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnBsYXliYWNrXyhQbGF5YmFja0FjdGl2aXR5LlNUQVJULCB0aGlzLmdldFN0YXJ0V2FpdFByb21pc2VfKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0U3RhcnRXYWl0UHJvbWlzZV8oKSB7XG4gICAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgIGlmICh0aGlzLmFuaW1hdGlvbkRlZl8uc3RhcnRBZnRlcklkKSB7XG4gICAgICBjb25zdCBzdGFydEFmdGVySWQgPSB0aGlzLmFuaW1hdGlvbkRlZl8uc3RhcnRBZnRlcklkO1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbigoKSA9PiB0aGlzLnNlcXVlbmNlXy53YWl0Rm9yKHN0YXJ0QWZ0ZXJJZCkpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmRlbGF5Xykge1xuICAgICAgcHJvbWlzZSA9IHByb21pc2UudGhlbigoKSA9PiB0aGlzLnRpbWVyXy5wcm9taXNlKHRoaXMuZGVsYXlfKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2U7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshLi4vLi4vYW1wLWFuaW1hdGlvbi8wLjEvd2ViLWFuaW1hdGlvbnMuV2ViQW5pbWF0aW9uUnVubmVyfSBydW5uZXJcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXJ0V2hlblJlYWR5XyhydW5uZXIpIHtcbiAgICBydW5uZXIuc3RhcnQoKTtcbiAgfVxuXG4gIC8qKiBAcmV0dXJuIHtib29sZWFufSAqL1xuICBoYXNTdGFydGVkKCkge1xuICAgIHJldHVybiB0aGlzLmlzQWN0aXZpdHlTY2hlZHVsZWRfKFBsYXliYWNrQWN0aXZpdHkuU1RBUlQpIHx8XG4gICAgICAgICEhdGhpcy5ydW5uZXJfICYmIGRldigpLmFzc2VydCh0aGlzLnJ1bm5lcl8pXG4gICAgICAgICAgICAuZ2V0UGxheVN0YXRlKCkgPT0gV2ViQW5pbWF0aW9uUGxheVN0YXRlLlJVTk5JTkc7XG4gIH1cblxuICAvKiogRm9yY2UtZmluaXNoZXMgYWxsIGFuaW1hdGlvbnMuICovXG4gIGZpbmlzaCgpIHtcbiAgICBpZiAoIXRoaXMucnVubmVyXykge1xuICAgICAgdGhpcy5ub3RpZnlGaW5pc2hfKCk7XG4gICAgfVxuICAgIHRoaXMucGxheWJhY2tfKFBsYXliYWNrQWN0aXZpdHkuRklOSVNIKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi8uLi9hbXAtYW5pbWF0aW9uLzAuMS93ZWItYW5pbWF0aW9ucy5XZWJBbmltYXRpb25SdW5uZXJ9IHJ1bm5lclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZmluaXNoV2hlblJlYWR5XyhydW5uZXIpIHtcbiAgICBpZiAocnVubmVyLmdldFBsYXlTdGF0ZSgpID09IFdlYkFuaW1hdGlvblBsYXlTdGF0ZS5SVU5OSU5HKSB7XG4gICAgICBydW5uZXIuZmluaXNoKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIENhbmNlbHMgYW5pbWF0aW9uLiAqL1xuICBjYW5jZWwoKSB7XG4gICAgdGhpcy5zY2hlZHVsZWRBY3Rpdml0eV8gPSBudWxsO1xuICAgIHRoaXMuc2NoZWR1bGVkV2FpdF8gPSBudWxsO1xuXG4gICAgaWYgKHRoaXMucnVubmVyXykge1xuICAgICAgZGV2KCkuYXNzZXJ0KHRoaXMucnVubmVyXykuY2FuY2VsKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVBsYXliYWNrQWN0aXZpdHl9IGFjdGl2aXR5XG4gICAqIEBwYXJhbSB7IVByb21pc2U9fSBvcHRfd2FpdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcGxheWJhY2tfKGFjdGl2aXR5LCBvcHRfd2FpdCkge1xuICAgIGNvbnN0IHdhaXQgPSBvcHRfd2FpdCB8fCBudWxsO1xuXG4gICAgdGhpcy5zY2hlZHVsZWRBY3Rpdml0eV8gPSBhY3Rpdml0eTtcbiAgICB0aGlzLnNjaGVkdWxlZFdhaXRfID0gd2FpdDtcblxuICAgIGlmICh0aGlzLnJ1bm5lcl8pIHtcbiAgICAgIHRoaXMucGxheWJhY2tXaGVuUmVhZHlfKGFjdGl2aXR5LCB3YWl0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZXMgcGxheWJhY2sgYWN0aXZpdHkgaWYgcnVubmVyIGlzIHJlYWR5LlxuICAgKiBAcGFyYW0geyFQbGF5YmFja0FjdGl2aXR5fSBhY3Rpdml0eVxuICAgKiBAcGFyYW0gez9Qcm9taXNlfSB3YWl0XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBwbGF5YmFja1doZW5SZWFkeV8oYWN0aXZpdHksIHdhaXQpIHtcbiAgICBjb25zdCBydW5uZXIgPVxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyEuLi8uLi9hbXAtYW5pbWF0aW9uLzAuMS93ZWItYW5pbWF0aW9ucy5XZWJBbmltYXRpb25SdW5uZXJ9XG4gICAgICAgICAqL1xuICAgICAgICAoZGV2KCkuYXNzZXJ0KFxuICAgICAgICAgICAgdGhpcy5ydW5uZXJfLFxuICAgICAgICAgICAgJ1RyaWVkIHRvIGV4ZWN1dGUgcGxheWJhY2tXaGVuUmVhZHlfIGJlZm9yZSBydW5uZXIgd2FzIHJlc29sdmVkLicpKTtcblxuICAgICh3YWl0IHx8IFByb21pc2UucmVzb2x2ZSgpKS50aGVuKCgpID0+IHtcbiAgICAgIGlmICghdGhpcy5pc0FjdGl2aXR5U2NoZWR1bGVkXyhhY3Rpdml0eSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNjaGVkdWxlZEFjdGl2aXR5XyA9IG51bGw7XG4gICAgICB0aGlzLnNjaGVkdWxlZFdhaXRfID0gbnVsbDtcblxuICAgICAgc3dpdGNoIChhY3Rpdml0eSkge1xuICAgICAgICBjYXNlIFBsYXliYWNrQWN0aXZpdHkuU1RBUlQ6IHJldHVybiB0aGlzLnN0YXJ0V2hlblJlYWR5XyhydW5uZXIpO1xuICAgICAgICBjYXNlIFBsYXliYWNrQWN0aXZpdHkuRklOSVNIOiByZXR1cm4gdGhpcy5maW5pc2hXaGVuUmVhZHlfKHJ1bm5lcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTWFya3MgcnVubmVyIGFzIHJlYWR5IGFuZCBleGVjdXRlcyBwbGF5YmFjayBhY3Rpdml0eSBpZiBuZWVkZWQuXG4gICAqIEBwYXJhbSB7IS4uLy4uL2FtcC1hbmltYXRpb24vMC4xL3dlYi1hbmltYXRpb25zLldlYkFuaW1hdGlvblJ1bm5lcn0gcnVubmVyXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvblJ1bm5lclJlYWR5XyhydW5uZXIpIHtcbiAgICB0aGlzLnJ1bm5lcl8gPSBydW5uZXI7XG5cbiAgICBydW5uZXIub25QbGF5U3RhdGVDaGFuZ2VkKHN0YXRlID0+IHtcbiAgICAgIGlmIChzdGF0ZSA9PSBXZWJBbmltYXRpb25QbGF5U3RhdGUuRklOSVNIRUQpIHtcbiAgICAgICAgdGhpcy5ub3RpZnlGaW5pc2hfKCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMuaXNBY3Rpdml0eVNjaGVkdWxlZF8oKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucGxheWJhY2tXaGVuUmVhZHlfKFxuICAgICAgICAvKiogQHR5cGUgeyFQbGF5YmFja0FjdGl2aXR5fSAqLyAodGhpcy5zY2hlZHVsZWRBY3Rpdml0eV8pLFxuICAgICAgICB0aGlzLnNjaGVkdWxlZFdhaXRfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFQbGF5YmFja0FjdGl2aXR5PX0gb3B0X2FjdGl2aXR5XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0FjdGl2aXR5U2NoZWR1bGVkXyhvcHRfYWN0aXZpdHkpIHtcbiAgICBpZiAoIW9wdF9hY3Rpdml0eSkge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVkQWN0aXZpdHlfICE9PSBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zY2hlZHVsZWRBY3Rpdml0eV8gPT09IG9wdF9hY3Rpdml0eTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBub3RpZnlGaW5pc2hfKCkge1xuICAgIGlmICh0aGlzLnRhcmdldF8uaWQpIHtcbiAgICAgIHRoaXMuc2VxdWVuY2VfLm5vdGlmeUZpbmlzaCh0aGlzLnRhcmdldF8uaWQpO1xuICAgIH1cbiAgfVxufVxuXG5cbi8vIFRPRE8oYWxhbm9yb3pjbyk6IExvb3BpbmcgYW5pbWF0aW9uc1xuLyoqIE1hbmFnZXIgZm9yIGFuaW1hdGlvbnMgaW4gc3RvcnkgcGFnZXMuICovXG5leHBvcnQgY2xhc3MgQW5pbWF0aW9uTWFuYWdlciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSByb290XG4gICAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihyb290LCBhbXBkb2MpIHtcbiAgICBkZXYoKS5hc3NlcnQoaGFzQW5pbWF0aW9ucyhyb290KSk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0ICovXG4gICAgdGhpcy5yb290XyA9IHJvb3Q7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0ICovXG4gICAgdGhpcy5hbXBkb2NfID0gYW1wZG9jO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCAqL1xuICAgIHRoaXMudnN5bmNfID0gU2VydmljZXMudnN5bmNGb3IodGhpcy5hbXBkb2NfLndpbik7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0ICovXG4gICAgdGhpcy5yZXNvdXJjZXNfID0gU2VydmljZXMucmVzb3VyY2VzRm9yRG9jKHRoaXMuYW1wZG9jXyk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0ICovXG4gICAgdGhpcy50aW1lcl8gPSBTZXJ2aWNlcy50aW1lckZvcih0aGlzLmFtcGRvY18ud2luKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgKi9cbiAgICB0aGlzLmJ1aWxkZXJQcm9taXNlXyA9IHRoaXMuY3JlYXRlQW5pbWF0aW9uQnVpbGRlclByb21pc2VfKCk7XG5cbiAgICAvKiogQHByaXZhdGUgez9BcnJheTwhUHJvbWlzZTwhQW5pbWF0aW9uUnVubmVyPj59ICovXG4gICAgdGhpcy5ydW5uZXJzXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICB0aGlzLnNlcXVlbmNlXyA9IEFuaW1hdGlvblNlcXVlbmNlLmNyZWF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlY291cGxlcyBjb25zdHJ1Y3RvciBzbyBpdCBjYW4gYmUgc3R1YmJlZCBpbiB0ZXN0cy5cbiAgICogQHBhcmFtIHshRWxlbWVudH0gcm9vdFxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICAgKiBAcGFyYW0ge3N0cmluZ30gdW51c2VkQmFzZVVybFxuICAgKiBAcmV0dXJuIHshQW5pbWF0aW9uTWFuYWdlcn1cbiAgICovXG4gIHN0YXRpYyBjcmVhdGUocm9vdCwgYW1wZG9jLCB1bnVzZWRCYXNlVXJsKSB7XG4gICAgcmV0dXJuIG5ldyBBbmltYXRpb25NYW5hZ2VyKHJvb3QsIGFtcGRvYyk7XG4gIH1cblxuICAvKipcbiAgICogQXBwbGllcyBmaXJzdCBmcmFtZSB0byB0YXJnZXQgZWxlbWVudCBiZWZvcmUgc3RhcnRpbmcgYW5pbWF0aW9uLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIGFwcGx5Rmlyc3RGcmFtZSgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoXG4gICAgICAgIHRoaXMuZ2V0T3JDcmVhdGVSdW5uZXJzXygpLm1hcChydW5uZXIgPT4gcnVubmVyLmFwcGx5Rmlyc3RGcmFtZSgpKSk7XG4gIH1cblxuICAvKiogU3RhcnRzIGFsbCBlbnRyYW5jZSBhbmltYXRpb25zIGZvciB0aGUgcGFnZS4gKi9cbiAgYW5pbWF0ZUluKCkge1xuICAgIHRoaXMuZ2V0UnVubmVyc18oKS5mb3JFYWNoKHJ1bm5lciA9PiBydW5uZXIuc3RhcnQoKSk7XG4gIH1cblxuICAvKiogU2tpcHMgYWxsIGVudHJhbmNlIGFuaW1hdGlvbnMgZm9yIHRoZSBwYWdlLiAqL1xuICBmaW5pc2hBbGwoKSB7XG4gICAgdGhpcy5nZXRSdW5uZXJzXygpLmZvckVhY2gocnVubmVyID0+IHJ1bm5lci5maW5pc2goKSk7XG4gIH1cblxuICAvKiogQ2FuY2VscyBhbGwgZW50cmFuY2UgYW5pbWF0aW9ucyBmb3IgdGhlIHBhZ2UuICovXG4gIGNhbmNlbEFsbCgpIHtcbiAgICBpZiAoIXRoaXMucnVubmVyc18pIHtcbiAgICAgIC8vIG5vdGhpbmcgdG8gY2FuY2VsIHdoZW4gdGhlIGZpcnN0IGZyYW1lIGhhcyBub3QgYmVlbiBhcHBsaWVkIHlldC5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5nZXRSdW5uZXJzXygpLmZvckVhY2gocnVubmVyID0+IHJ1bm5lci5jYW5jZWwoKSk7XG4gIH1cblxuICAvKiogRGV0ZXJtaW5lcyBpZiB0aGVyZSBpcyBhbiBlbnRyYW5jZSBhbmltYXRpb24gcnVubmluZy4gKi9cbiAgaGFzQW5pbWF0aW9uU3RhcnRlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRSdW5uZXJzXygpLnNvbWUocnVubmVyID0+IHJ1bm5lci5oYXNTdGFydGVkKCkpO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGdldFJ1bm5lcnNfKCkge1xuICAgIHJldHVybiBkZXYoKS5hc3NlcnQodGhpcy5ydW5uZXJzXywgJ0V4ZWN1dGVkIGJlZm9yZSBhcHBseUZpcnN0RnJhbWUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQXJyYXk8IUFuaW1hdGlvblJ1bm5lcj59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRPckNyZWF0ZVJ1bm5lcnNfKCkge1xuICAgIGlmICghdGhpcy5ydW5uZXJzXykge1xuICAgICAgdGhpcy5ydW5uZXJzXyA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChcbiAgICAgICAgICBzY29wZWRRdWVyeVNlbGVjdG9yQWxsKHRoaXMucm9vdF8sIEFOSU1BVEFCTEVfRUxFTUVOVFNfU0VMRUNUT1IpLFxuICAgICAgICAgIGVsID0+IHRoaXMuY3JlYXRlUnVubmVyXyhlbCkpO1xuICAgIH1cbiAgICByZXR1cm4gZGV2KCkuYXNzZXJ0KHRoaXMucnVubmVyc18pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsXG4gICAqIEByZXR1cm4geyFBbmltYXRpb25SdW5uZXJ9XG4gICAqL1xuICBjcmVhdGVSdW5uZXJfKGVsKSB7XG4gICAgY29uc3QgcHJlc2V0ID0gdGhpcy5nZXRQcmVzZXRfKGVsKTtcbiAgICBjb25zdCBhbmltYXRpb25EZWYgPSB0aGlzLmNyZWF0ZUFuaW1hdGlvbkRlZihlbCwgcHJlc2V0KTtcblxuICAgIHJldHVybiBuZXcgQW5pbWF0aW9uUnVubmVyKFxuICAgICAgICB0aGlzLnJvb3RfLFxuICAgICAgICBhbmltYXRpb25EZWYsXG4gICAgICAgIGRldigpLmFzc2VydCh0aGlzLmJ1aWxkZXJQcm9taXNlXyksXG4gICAgICAgIHRoaXMudnN5bmNfLFxuICAgICAgICB0aGlzLnRpbWVyXyxcbiAgICAgICAgdGhpcy5zZXF1ZW5jZV8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsXG4gICAqIEBwYXJhbSB7IVN0b3J5QW5pbWF0aW9uUHJlc2V0RGVmfSBwcmVzZXRcbiAgICogQHJldHVybiB7IVN0b3J5QW5pbWF0aW9uRGVmfVxuICAgKi9cbiAgY3JlYXRlQW5pbWF0aW9uRGVmKGVsLCBwcmVzZXQpIHtcbiAgICBjb25zdCBhbmltYXRpb25EZWYgPSB7dGFyZ2V0OiBlbCwgcHJlc2V0fTtcblxuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoQU5JTUFURV9JTl9EVVJBVElPTl9BVFRSSUJVVEVfTkFNRSkpIHtcbiAgICAgIGFuaW1hdGlvbkRlZi5kdXJhdGlvbiA9XG4gICAgICAgICAgdGltZVN0clRvTWlsbGlzKGVsLmdldEF0dHJpYnV0ZShBTklNQVRFX0lOX0RVUkFUSU9OX0FUVFJJQlVURV9OQU1FKSk7XG4gICAgfVxuXG4gICAgaWYgKGVsLmhhc0F0dHJpYnV0ZShBTklNQVRFX0lOX0RFTEFZX0FUVFJJQlVURV9OQU1FKSkge1xuICAgICAgYW5pbWF0aW9uRGVmLmRlbGF5ID1cbiAgICAgICAgICB0aW1lU3RyVG9NaWxsaXMoZWwuZ2V0QXR0cmlidXRlKEFOSU1BVEVfSU5fREVMQVlfQVRUUklCVVRFX05BTUUpKTtcbiAgICB9XG5cbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKEFOSU1BVEVfSU5fQUZURVJfQVRUUklCVVRFX05BTUUpKSB7XG4gICAgICBjb25zdCBkZXBlbmRlbmN5SWQgPSBlbC5nZXRBdHRyaWJ1dGUoQU5JTUFURV9JTl9BRlRFUl9BVFRSSUJVVEVfTkFNRSk7XG5cbiAgICAgIHVzZXIoKS5hc3NlcnRFbGVtZW50KFxuICAgICAgICAgIHRoaXMucm9vdF8ucXVlcnlTZWxlY3RvcihgIyR7ZXNjYXBlQ3NzU2VsZWN0b3JJZGVudChkZXBlbmRlbmN5SWQpfWApLFxuICAgICAgICAgIGBUaGUgYXR0cmlidXRlICcke0FOSU1BVEVfSU5fQUZURVJfQVRUUklCVVRFX05BTUV9JyBpbiB0YWcgYCArXG4gICAgICAgICAgICAgIGAnJHtlbC50YWdOYW1lfScgaXMgc2V0IHRvIHRoZSBpbnZhbGlkIHZhbHVlIGAgK1xuICAgICAgICAgICAgICBgJyR7ZGVwZW5kZW5jeUlkfScuIE5vIGNoaWxkcmVuIG9mIHBhcmVudGluZyAnYW1wLXN0b3J5LXBhZ2UnIGAgK1xuICAgICAgICAgICAgICBgZXhpc3Qgd2l0aCBpZCAke2RlcGVuZGVuY3lJZH0uYCk7XG5cbiAgICAgIGFuaW1hdGlvbkRlZi5zdGFydEFmdGVySWQgPVxuICAgICAgICAgIGVsLmdldEF0dHJpYnV0ZShBTklNQVRFX0lOX0FGVEVSX0FUVFJJQlVURV9OQU1FKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYW5pbWF0aW9uRGVmO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuLi8uLi9hbXAtYW5pbWF0aW9uLzAuMS93ZWItYW5pbWF0aW9ucy5CdWlsZGVyPn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNyZWF0ZUFuaW1hdGlvbkJ1aWxkZXJQcm9taXNlXygpIHtcbiAgICByZXR1cm4gU2VydmljZXMuZXh0ZW5zaW9uc0Zvcih0aGlzLmFtcGRvY18ud2luKVxuICAgICAgICAuaW5zdGFsbEV4dGVuc2lvbkZvckRvYyh0aGlzLmFtcGRvY18sICdhbXAtYW5pbWF0aW9uJylcbiAgICAgICAgLnRoZW4oKCkgPT4gU2VydmljZXMud2ViQW5pbWF0aW9uU2VydmljZUZvcih0aGlzLmFtcGRvY18pKVxuICAgICAgICAudGhlbih3ZWJBbmltYXRpb25TZXJ2aWNlID0+IHdlYkFuaW1hdGlvblNlcnZpY2UuY3JlYXRlQnVpbGRlcigpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBlbFxuICAgKiBAcmV0dXJuIHshU3RvcnlBbmltYXRpb25QcmVzZXREZWZ9XG4gICAqL1xuICBnZXRQcmVzZXRfKGVsKSB7XG4gICAgY29uc3QgbmFtZSA9IGVsLmdldEF0dHJpYnV0ZShBTklNQVRFX0lOX0FUVFJJQlVURV9OQU1FKTtcblxuICAgIHJldHVybiB1c2VyKCkuYXNzZXJ0KFxuICAgICAgICBQUkVTRVRTW25hbWVdLFxuICAgICAgICAnSW52YWxpZCAlcyBwcmVzZXQgXCIlc1wiIGZvciBlbGVtZW50ICVzJyxcbiAgICAgICAgQU5JTUFURV9JTl9BVFRSSUJVVEVfTkFNRSxcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZWwpO1xuICB9XG59XG5cblxuLyoqIEJ1cyBmb3IgYW5pbWF0aW9uIHNlcXVlbmNpbmcuICovXG5jbGFzcyBBbmltYXRpb25TZXF1ZW5jZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCAhUHJvbWlzZT59ICovXG4gICAgdGhpcy5zdWJzY3JpcHRpb25Qcm9taXNlc18gPSBtYXAoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCAhRnVuY3Rpb24+fSAqL1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uUmVzb2x2ZXJzXyA9IG1hcCgpO1xuICB9XG5cbiAgLyoqIERlY291cGxlcyBjb25zdHJ1Y3RvciBmb3IgdGVzdGluZy4gKi9cbiAgc3RhdGljIGNyZWF0ZSgpIHtcbiAgICByZXR1cm4gbmV3IEFuaW1hdGlvblNlcXVlbmNlKCk7XG4gIH1cblxuICAvKipcbiAgICogTm90aWZpZXMgZGVwZW5kZW50IGVsZW1lbnRzIHRoYXQgYW5pbWF0aW9uIGhhcyBmaW5pc2hlZC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gICAqL1xuICBub3RpZnlGaW5pc2goaWQpIHtcbiAgICBpZiAoaWQgaW4gdGhpcy5zdWJzY3JpcHRpb25Qcm9taXNlc18pIHtcbiAgICAgIGRldigpLmFzc2VydCh0aGlzLnN1YnNjcmlwdGlvblJlc29sdmVyc19baWRdKSgpO1xuXG4gICAgICBkZWxldGUgdGhpcy5zdWJzY3JpcHRpb25Qcm9taXNlc19baWRdO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBXYWl0cyBmb3IgYW5vdGhlciBlbGVtZW50IHRvIGZpbmlzaCBhbmltYXRpbmcuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIHdhaXRGb3IoaWQpIHtcbiAgICBpZiAoIShpZCBpbiB0aGlzLnN1YnNjcmlwdGlvblByb21pc2VzXykpIHtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uUHJvbWlzZXNfW2lkXSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvblJlc29sdmVyc19baWRdID0gcmVzb2x2ZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zdWJzY3JpcHRpb25Qcm9taXNlc19baWRdO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHthc3NlcnRIdHRwc1VybH0gZnJvbSAnLi4vLi4vLi4vc3JjL3VybCc7XG5cbi8qKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbmNvbnN0IEJBQ0tHUk9VTkRfQVVESU9fRUxFTUVOVF9DTEFTU19OQU1FID0gJ2ktYW1waHRtbC1zdG9yeS1iYWNrZ3JvdW5kLWF1ZGlvJztcblxuXG4vKipcbiAqIEFkZHMgc3VwcG9ydCBmb3IgdGhlIGJhY2tncm91bmQtYXVkaW8gcHJvcGVydHkgb24gdGhlIHNwZWNpZmllZCBlbGVtZW50LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCB0byB1cGdyYWRlIHdpdGggc3VwcG9ydCBmb3IgYmFja2dyb3VuZFxuICogICAgIGF1ZGlvLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXBncmFkZUJhY2tncm91bmRBdWRpbyhlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZSgnYmFja2dyb3VuZC1hdWRpbycpKSB7XG4gICAgY29uc3QgYXVkaW9FbCA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuICAgIGNvbnN0IGF1ZGlvU3JjID1cbiAgICAgICAgYXNzZXJ0SHR0cHNVcmwoZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2JhY2tncm91bmQtYXVkaW8nKSwgZWxlbWVudCk7XG4gICAgYXVkaW9FbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIGF1ZGlvU3JjKTtcbiAgICBhdWRpb0VsLnNldEF0dHJpYnV0ZSgncHJlbG9hZCcsICdhdXRvJyk7XG4gICAgYXVkaW9FbC5zZXRBdHRyaWJ1dGUoJ2xvb3AnLCAnJyk7XG4gICAgYXVkaW9FbC5zZXRBdHRyaWJ1dGUoJ2F1dG9wbGF5JywgJycpO1xuICAgIGF1ZGlvRWwuc2V0QXR0cmlidXRlKCdtdXRlZCcsICcnKTtcbiAgICBhdWRpb0VsLmNsYXNzTGlzdC5hZGQoQkFDS0dST1VORF9BVURJT19FTEVNRU5UX0NMQVNTX05BTUUpO1xuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQoYXVkaW9FbCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMnO1xuaW1wb3J0IHtsaXN0ZW5PbmNlUHJvbWlzZX0gZnJvbSAnLi4vLi4vLi4vc3JjL2V2ZW50LWhlbHBlcic7XG5pbXBvcnQge3NldFN0eWxlfSBmcm9tICcuLi8uLi8uLi9zcmMvc3R5bGUnO1xuXG5cbi8qKiBAY29uc3Qge251bWJlcn0gKi9cbmNvbnN0IFNXQVBfVElNRU9VVF9NUyA9IDUwMDtcblxuXG5jb25zdCBCQUNLR1JPVU5EX0NMQVNTID0gJ2ktYW1waHRtbC1zdG9yeS1iYWNrZ3JvdW5kJztcblxuY29uc3QgQkFDS0dST1VORF9DT05UQUlORVJfQ0xBU1MgPSAnaS1hbXBodG1sLXN0b3J5LWJhY2tncm91bmQtY29udGFpbmVyJztcblxuY29uc3QgQkFDS0dST1VORF9PVkVSTEFZX0NMQVNTID0gJ2ktYW1waHRtbC1zdG9yeS1iYWNrZ3JvdW5kLW92ZXJsYXknO1xuXG5cblxuLyoqXG4gKiBAcGFyYW0gez9zdHJpbmd9IHVybFxuICogQHJldHVybiB7IVByb21pc2V9XG4gKi9cbmZ1bmN0aW9uIG1heWJlTG9hZEltYWdlKHVybCkge1xuICBpZiAoIXVybCkge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuICBjb25zdCBpbWcgPSBuZXcgSW1hZ2U7XG4gIGltZy5zcmMgPSB1cmw7XG4gIHJldHVybiBsaXN0ZW5PbmNlUHJvbWlzZShpbWcsICdsb2FkJyk7XG59XG5cblxuLyoqXG4gKiBUT0RPKGN2aWFsaXopOiBJbnZlc3RpZ2F0ZSBwcmUtcmVuZGVyaW5nIGJsdXJyZWQgYmFja2dyb3VuZHMgdG8gY2FudmFzIHRvXG4gKiBwb3NzaWJseSBpbXByb3ZlIHBlcmZvcm1hbmNlP1xuICovXG5leHBvcnQgY2xhc3MgQW1wU3RvcnlCYWNrZ3JvdW5kIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgZWxlbWVudCkge1xuICAgIC8qIEBwcml2YXRlIEBjb25zdCB7IUVsZW1lbnR9ICovXG4gICAgdGhpcy5lbGVtZW50XyA9IGVsZW1lbnQ7XG5cbiAgICAvKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmNvdW50XyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0ICovXG4gICAgdGhpcy5jb250YWluZXJfID0gdGhpcy5lbGVtZW50Xy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCAqL1xuICAgIHRoaXMuY29udGFpbmVyT3ZlcmxheV8gPSB0aGlzLmVsZW1lbnRfLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cbiAgICAvKiogQHByaXZhdGUgeyFFbGVtZW50fSAqL1xuICAgIHRoaXMuaGlkZGVuXyA9IHRoaXMuY3JlYXRlQmFja2dyb3VuZF8oKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IUVsZW1lbnR9ICovXG4gICAgdGhpcy5hY3RpdmVfID0gdGhpcy5jcmVhdGVCYWNrZ3JvdW5kXygpO1xuXG4gICAgdGhpcy5jb250YWluZXJfLmNsYXNzTGlzdC5hZGQoQkFDS0dST1VORF9DT05UQUlORVJfQ0xBU1MpO1xuICAgIHRoaXMuY29udGFpbmVyT3ZlcmxheV8uY2xhc3NMaXN0LmFkZChCQUNLR1JPVU5EX09WRVJMQVlfQ0xBU1MpO1xuXG4gICAgdGhpcy5jb250YWluZXJfLmFwcGVuZENoaWxkKHRoaXMuaGlkZGVuXyk7XG4gICAgdGhpcy5jb250YWluZXJfLmFwcGVuZENoaWxkKHRoaXMuYWN0aXZlXyk7XG4gICAgdGhpcy5jb250YWluZXJfLmFwcGVuZENoaWxkKHRoaXMuY29udGFpbmVyT3ZlcmxheV8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFFbGVtZW50fVxuICAgKi9cbiAgY3JlYXRlQmFja2dyb3VuZF8oKSB7XG4gICAgY29uc3QgYmcgPSB0aGlzLmVsZW1lbnRfLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYmcuY2xhc3NMaXN0LmFkZChCQUNLR1JPVU5EX0NMQVNTKTtcbiAgICByZXR1cm4gYmc7XG4gIH1cblxuICAvKipcbiAgICogQXR0YWNoIHRoZSBiYWNrZ3JvdW5kcyB0byB0aGUgZG9jdW1lbnQuXG4gICAqL1xuICBhdHRhY2goKSB7XG4gICAgdGhpcy5lbGVtZW50Xy5pbnNlcnRCZWZvcmUodGhpcy5jb250YWluZXJfLCB0aGlzLmVsZW1lbnRfLmZpcnN0Q2hpbGQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgYmFja2dyb3VuZCB3aXRoIG5ldyBiYWNrZ3JvdW5kIGltYWdlIFVSTC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gdXJsXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IGluaXRpYWxcbiAgICovXG4gIHNldEJhY2tncm91bmQoY29sb3IsIHVybCwgaW5pdGlhbCA9IGZhbHNlKSB7XG4gICAgY29uc3QgY291bnRBdEFkZCA9ICsrdGhpcy5jb3VudF87XG5cbiAgICBjb25zdCB3aGVuRnJlc2ggPSAocHJvbWlzZSwgY2FsbGJhY2spID0+IHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICBpZiAodGhpcy5jb3VudF8gPT0gY291bnRBdEFkZCkge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgaW1nTG9hZCA9IG1heWJlTG9hZEltYWdlKHVybCk7XG4gICAgY29uc3QgdGltZW91dCA9XG4gICAgICAgIFNlcnZpY2VzLnRpbWVyRm9yKHRoaXMud2luXykucHJvbWlzZShpbml0aWFsID8gMCA6IFNXQVBfVElNRU9VVF9NUyk7XG5cbiAgICBjb25zdCBoaWRkZW4gPSB0aGlzLmhpZGRlbl87XG5cbiAgICBzZXRTdHlsZShoaWRkZW4sICdiYWNrZ3JvdW5kLWltYWdlJywgJ25vbmUnKTtcblxuICAgIC8vIEltYWdlIHdpbGwgYmUgc3dhcHBlZCBvbiBsb2FkLlxuICAgIHdoZW5GcmVzaChpbWdMb2FkLCAoKSA9PiB7XG4gICAgICBzZXRTdHlsZShoaWRkZW4sICdiYWNrZ3JvdW5kLWltYWdlJywgdXJsID8gYHVybCgke3VybH0pYCA6IG51bGwpO1xuICAgIH0pO1xuXG4gICAgLy8gQ29sb3Igd2lsbCBhbHdheXMgYmUgc3dhcHBlZCBvbiB0aW1lb3V0LlxuICAgIHdoZW5GcmVzaChQcm9taXNlLnJhY2UoW2ltZ0xvYWQsIHRpbWVvdXRdKSwgKCkgPT4ge1xuICAgICAgc2V0U3R5bGUoaGlkZGVuLCAnYmFja2dyb3VuZC1jb2xvcicsIGNvbG9yKTtcbiAgICAgIHRoaXMucm90YXRlQWN0aXZlQmFja2dyb3VuZF8oKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSb3RhdGVzIHRoZSBjbGFzc2VzIG9uIHBhZ2UgYmFja2dyb3VuZCB0byBicmluZyB0aGUgbmV3IGJhY2dyb3VuZCBpbiBmb3JlZ3JvdW5kLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgcm90YXRlQWN0aXZlQmFja2dyb3VuZF8oKSB7XG4gICAgY29uc3QgbmV3SGlkZGVuID0gdGhpcy5hY3RpdmVfO1xuICAgIHRoaXMuYWN0aXZlXyA9IHRoaXMuaGlkZGVuXztcbiAgICB0aGlzLmhpZGRlbl8gPSBuZXdIaWRkZW47XG4gICAgdGhpcy5hY3RpdmVfLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIHRoaXMuaGlkZGVuXy5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge0V2ZW50VHlwZSwgZGlzcGF0Y2h9IGZyb20gJy4vZXZlbnRzJztcbmltcG9ydCB7S2V5Q29kZXN9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9rZXktY29kZXMnO1xuaW1wb3J0IHtTY3JvbGxhYmxlU2hhcmVXaWRnZXR9IGZyb20gJy4vc2hhcmUnO1xuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzJztcbmltcG9ydCB7Y2xvc2VzdH0gZnJvbSAnLi4vLi4vLi4vc3JjL2RvbSc7XG5pbXBvcnQge2RldiwgdXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2RpY3R9IGZyb20gJy4vLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge2dldEpzb25MZH0gZnJvbSAnLi9qc29ubGQnO1xuaW1wb3J0IHtpc0FycmF5fSBmcm9tICcuLi8uLi8uLi9zcmMvdHlwZXMnO1xuaW1wb3J0IHtpc1Byb3RvY29sVmFsaWR9IGZyb20gJy4uLy4uLy4uL3NyYy91cmwnO1xuaW1wb3J0IHtwYXJzZVVybH0gZnJvbSAnLi4vLi4vLi4vc3JjL3VybCc7XG5pbXBvcnQge3JlbmRlckFzRWxlbWVudCwgcmVuZGVyU2ltcGxlVGVtcGxhdGV9IGZyb20gJy4vc2ltcGxlLXRlbXBsYXRlJztcbmltcG9ydCB7dGhyb3R0bGV9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9yYXRlLWxpbWl0JztcblxuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHNoYXJlUHJvdmlkZXJzOiAoIUpzb25PYmplY3R8dW5kZWZpbmVkKSxcbiAqICAgcmVsYXRlZEFydGljbGVzOiAhQXJyYXk8IS4vcmVsYXRlZC1hcnRpY2xlcy5SZWxhdGVkQXJ0aWNsZVNldERlZj5cbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgQm9va2VuZENvbmZpZ0RlZjtcblxuXG4vKipcbiAqIFNjcm9sbCBhbW91bnQgcmVxdWlyZWQgZm9yIGZ1bGwtYmxlZWQgaW4gcHguXG4gKiBAcHJpdmF0ZSBAY29uc3Qge251bWJlcn1cbiAqL1xuY29uc3QgRlVMTEJMRUVEX1RIUkVTSE9MRCA9IDg4O1xuXG5cbi8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IEZVTExCTEVFRF9DTEFTU05BTUUgPSAnaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtZnVsbGJsZWVkJztcblxuXG4vKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBISURERU5fQ0xBU1NOQU1FID0gJ2ktYW1waHRtbC1oaWRkZW4nO1xuXG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL3NpbXBsZS10ZW1wbGF0ZS5FbGVtZW50RGVmfSAqL1xuY29uc3QgUk9PVF9URU1QTEFURSA9IHtcbiAgdGFnOiAnc2VjdGlvbicsXG4gIGF0dHJzOiBkaWN0KHtcbiAgICAnY2xhc3MnOiAnaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQgaS1hbXBodG1sLXN0b3J5LXN5c3RlbS1yZXNldCAnICtcbiAgICAgICAgSElEREVOX0NMQVNTTkFNRX0pLFxuICBjaGlsZHJlbjogW1xuICAgIC8vIE92ZXJmbG93IGNvbnRhaW5lciB0aGF0IGdldHMgcHVzaGVkIHRvIHRoZSBib3R0b20gd2hlbiBjb250ZW50IGhlaWdodCBpc1xuICAgIC8vIHNtYWxsZXIgdGhhbiB2aWV3cG9ydC5cbiAgICB7XG4gICAgICB0YWc6ICdkaXYnLFxuICAgICAgYXR0cnM6IGRpY3QoeydjbGFzcyc6ICdpLWFtcGh0bWwtc3RvcnktYm9va2VuZC1vdmVyZmxvdyd9KSxcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIC8vIEhvbGRzIGJvb2tlbmQgY29udGVudC5cbiAgICAgICAge1xuICAgICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgICAgYXR0cnM6IGRpY3QoeydjbGFzcyc6ICdpLWFtcGh0bWwtc3RvcnktYm9va2VuZC1pbm5lcid9KSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgXSxcbn07XG5cblxuLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vc2ltcGxlLXRlbXBsYXRlLkVsZW1lbnREZWZ9ICovXG5jb25zdCBSRVBMQVlfSUNPTl9URU1QTEFURSA9IHtcbiAgdGFnOiAnZGl2JyxcbiAgYXR0cnM6IGRpY3QoeydjbGFzcyc6ICdpLWFtcGh0bWwtc3RvcnktYm9va2VuZC1yZXBsYXktaWNvbid9KSxcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0geyEuL3JlbGF0ZWQtYXJ0aWNsZXMuUmVsYXRlZEFydGljbGVEZWZ9IGFydGljbGVEYXRhXG4gKiBAcmV0dXJuIHshLi9zaW1wbGUtdGVtcGxhdGUuRWxlbWVudERlZn1cbiAqL1xuZnVuY3Rpb24gYnVpbGRBcnRpY2xlVGVtcGxhdGUoYXJ0aWNsZURhdGEpIHtcbiAgY29uc3QgdGVtcGxhdGUgPSAvKiogQHR5cGUgeyEuL3NpbXBsZS10ZW1wbGF0ZS5FbGVtZW50RGVmfSAqLyAoe1xuICAgIHRhZzogJ2EnLFxuICAgIGF0dHJzOiBkaWN0KHtcbiAgICAgICdjbGFzcyc6ICdpLWFtcGh0bWwtc3RvcnktYm9va2VuZC1hcnRpY2xlJyxcbiAgICAgICdocmVmJzogYXJ0aWNsZURhdGEudXJsLFxuICAgICAgJ3RhcmdldCc6ICdfdG9wJyxcbiAgICB9KSxcbiAgICBjaGlsZHJlbjogW1xuICAgICAge1xuICAgICAgICB0YWc6ICdoMicsXG4gICAgICAgIGF0dHJzOiBkaWN0KHsnY2xhc3MnOiAnaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtYXJ0aWNsZS1oZWFkaW5nJ30pLFxuICAgICAgICB0ZXh0OiBhcnRpY2xlRGF0YS50aXRsZSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgIGF0dHJzOiBkaWN0KHsnY2xhc3MnOiAnaS1hbXBodG1sLXN0b3J5LWJvb2tlbmQtYXJ0aWNsZS1tZXRhJ30pLFxuICAgICAgICB0ZXh0OiBhcnRpY2xlRGF0YS5kb21haW5OYW1lLFxuICAgICAgfSxcbiAgICBdLFxuICB9KTtcblxuICBpZiAoYXJ0aWNsZURhdGEuaW1hZ2UpIHtcbiAgICB0ZW1wbGF0ZS5jaGlsZHJlbi51bnNoaWZ0KC8qKiBAdHlwZSB7IS4vc2ltcGxlLXRlbXBsYXRlLkVsZW1lbnREZWZ9ICovICh7XG4gICAgICB0YWc6ICdhbXAtaW1nJyxcbiAgICAgIGF0dHJzOiBkaWN0KHtcbiAgICAgICAgJ2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1ib29rZW5kLWFydGljbGUtaW1hZ2UnLFxuICAgICAgICAnc3JjJzogYXJ0aWNsZURhdGEuaW1hZ2UsXG4gICAgICAgICd3aWR0aCc6IDEwMCxcbiAgICAgICAgJ2hlaWdodCc6IDEwMCxcbiAgICAgIH0pLFxuICAgIH0pKTtcbiAgfVxuXG4gIHJldHVybiB0ZW1wbGF0ZTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUFycmF5PCEuL3JlbGF0ZWQtYXJ0aWNsZXMuUmVsYXRlZEFydGljbGVTZXREZWY+fSBhcnRpY2xlU2V0c1xuICogQHJldHVybiB7IUFycmF5PCEuL3NpbXBsZS10ZW1wbGF0ZS5FbGVtZW50RGVmPn1cbiAqL1xuZnVuY3Rpb24gYnVpbGRBcnRpY2xlc0NvbnRhaW5lclRlbXBsYXRlKGFydGljbGVTZXRzKSB7XG4gIGNvbnN0IHRlbXBsYXRlID0gW107XG5cbiAgYXJ0aWNsZVNldHMuZm9yRWFjaChhcnRpY2xlU2V0ID0+IHtcbiAgICBpZiAoYXJ0aWNsZVNldC5oZWFkaW5nKSB7XG4gICAgICB0ZW1wbGF0ZS5wdXNoKHtcbiAgICAgICAgdGFnOiAnaDMnLFxuICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1ib29rZW5kLWhlYWRpbmcnfSksXG4gICAgICAgIHRleHQ6IGFydGljbGVTZXQuaGVhZGluZyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICB0ZW1wbGF0ZS5wdXNoKHtcbiAgICAgIHRhZzogJ2RpdicsXG4gICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1ib29rZW5kLWFydGljbGUtc2V0J30pLFxuICAgICAgY2hpbGRyZW46IGFydGljbGVTZXQuYXJ0aWNsZXMubWFwKGFydGljbGUgPT5cbiAgICAgICAgYnVpbGRBcnRpY2xlVGVtcGxhdGUoYXJ0aWNsZSkpLFxuICAgIH0pO1xuICB9KTtcblxuICByZXR1cm4gdGVtcGxhdGU7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gdGl0bGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBkb21haW5OYW1lXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9pbWFnZVVybFxuICogQHJldHVybiB7IS4vc2ltcGxlLXRlbXBsYXRlLkVsZW1lbnREZWZ9XG4gKi9cbmZ1bmN0aW9uIGJ1aWxkUmVwbGF5QnV0dG9uVGVtcGxhdGUoZG9jLCB0aXRsZSwgZG9tYWluTmFtZSwgb3B0X2ltYWdlVXJsKSB7XG4gIHJldHVybiAvKiogQHR5cGUgeyEuL3NpbXBsZS10ZW1wbGF0ZS5FbGVtZW50RGVmfSAqLyAoe1xuICAgIHRhZzogJ2RpdicsXG4gICAgYXR0cnM6IGRpY3QoeydjbGFzcyc6ICdpLWFtcGh0bWwtc3RvcnktYm9va2VuZC1yZXBsYXknfSksXG4gICAgY2hpbGRyZW46IFtcbiAgICAgICFvcHRfaW1hZ2VVcmwgPyBSRVBMQVlfSUNPTl9URU1QTEFURSA6IHtcbiAgICAgICAgdGFnOiAnZGl2JyxcbiAgICAgICAgYXR0cnM6IGRpY3Qoe1xuICAgICAgICAgICdjbGFzcyc6ICdpLWFtcGh0bWwtc3RvcnktYm9va2VuZC1yZXBsYXktaW1hZ2UnLFxuICAgICAgICAgICdzdHlsZSc6IGBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtvcHRfaW1hZ2VVcmx9KSAhaW1wb3J0YW50YCxcbiAgICAgICAgfSksXG4gICAgICAgIGNoaWxkcmVuOiBbUkVQTEFZX0lDT05fVEVNUExBVEVdLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGFnOiAnaDInLFxuICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1ib29rZW5kLWFydGljbGUtaGVhZGluZyd9KSxcbiAgICAgICAgdGV4dDogdGl0bGUsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0YWc6ICdkaXYnLFxuICAgICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1ib29rZW5kLWFydGljbGUtbWV0YSd9KSxcbiAgICAgICAgdGV4dDogZG9tYWluTmFtZSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBCb29rZW5kIGNvbXBvbmVudCBmb3IgPGFtcC1zdG9yeT4uXG4gKi9cbmV4cG9ydCBjbGFzcyBCb29rZW5kIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4pIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzQnVpbHRfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgez9FbGVtZW50fSAqL1xuICAgIHRoaXMucm9vdF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RWxlbWVudH0gKi9cbiAgICB0aGlzLnJlcGxheUJ0bl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RWxlbWVudH0gKi9cbiAgICB0aGlzLmNsb3NlQnRuXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgeyFTY3JvbGxhYmxlU2hhcmVXaWRnZXR9ICovXG4gICAgdGhpcy5zaGFyZVdpZGdldF8gPSBTY3JvbGxhYmxlU2hhcmVXaWRnZXQuY3JlYXRlKHdpbik7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2NcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBidWlsZChhbXBkb2MpIHtcbiAgICBpZiAodGhpcy5pc0J1aWx0Xykge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0Um9vdCgpO1xuICAgIH1cblxuICAgIHRoaXMuaXNCdWlsdF8gPSB0cnVlO1xuXG4gICAgdGhpcy5yb290XyA9IHJlbmRlckFzRWxlbWVudCh0aGlzLndpbl8uZG9jdW1lbnQsIFJPT1RfVEVNUExBVEUpO1xuXG4gICAgdGhpcy5yZXBsYXlCdG5fID0gdGhpcy5idWlsZFJlcGxheUJ1dHRvbl8oYW1wZG9jKTtcblxuICAgIHRoaXMuZ2V0SW5uZXJDb250YWluZXJfKCkuYXBwZW5kQ2hpbGQodGhpcy5yZXBsYXlCdG5fKTtcbiAgICB0aGlzLmdldElubmVyQ29udGFpbmVyXygpLmFwcGVuZENoaWxkKHRoaXMuc2hhcmVXaWRnZXRfLmJ1aWxkKGFtcGRvYykpO1xuXG4gICAgdGhpcy5hdHRhY2hFdmVudHNfKCk7XG5cbiAgICByZXR1cm4gdGhpcy5nZXRSb290KCk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgYXR0YWNoRXZlbnRzXygpIHtcbiAgICAvLyBUT0RPKGFsYW5vcm96Y28pOiBMaXN0ZW4gdG8gdGFwIGV2ZW50IHByb3Blcmx5IChpLmUuIGZhc3RjbGljaylcbiAgICB0aGlzLnJvb3RfLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB0aGlzLm1heWJlQ2xvc2VfKGUpKTtcbiAgICB0aGlzLnJlcGxheUJ0bl8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHRoaXMub25SZXBsYXlCdG5DbGlja18oZSkpO1xuXG4gICAgdGhpcy5nZXRPdmVyZmxvd0NvbnRhaW5lcl8oKS5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLFxuICAgICAgICAvLyBtaW5JbnRlcnZhbCBpcyBoaWdoIHNpbmNlIHRoaXMgaXMgYSBzdGVwIGZ1bmN0aW9uIHRoYXQgZG9lcyBub3RcbiAgICAgICAgLy8gcmVxdWlyZSBzbW9vdGhuZXNzXG4gICAgICAgIHRocm90dGxlKHRoaXMud2luXywgKCkgPT4gdGhpcy5vblNjcm9sbF8oKSwgMTAwKSk7XG5cbiAgICB0aGlzLndpbl8uYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBlID0+IHtcbiAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChlLmtleUNvZGUgPT0gS2V5Q29kZXMuRVNDQVBFKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaENsb3NlXygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqIEByZXR1cm4ge2Jvb2xlYW59ICovXG4gIGlzQWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLmlzQnVpbHQoKSAmJlxuICAgICAgICAhdGhpcy5nZXRSb290KCkuY2xhc3NMaXN0LmNvbnRhaW5zKEhJRERFTl9DTEFTU05BTUUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUV2ZW50fSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvblJlcGxheUJ0bkNsaWNrXyhlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBkaXNwYXRjaCh0aGlzLmdldFJvb3QoKSwgRXZlbnRUeXBlLlJFUExBWSwgLyogb3B0X2J1YmJsZXMgKi8gdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2VzIGJvb2tlbmQgaWYgdGFwcGluZyBvdXRzaWRlIHVzYWJsZSBhcmVhLlxuICAgKiBAcGFyYW0geyFFdmVudH0gZVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbWF5YmVDbG9zZV8oZSkge1xuICAgIGlmICh0aGlzLmVsZW1lbnRPdXRzaWRlVXNhYmxlQXJlYV8oZGV2KCkuYXNzZXJ0RWxlbWVudChlLnRhcmdldCkpKSB7XG4gICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgdGhpcy5kaXNwYXRjaENsb3NlXygpO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBkaXNwYXRjaENsb3NlXygpIHtcbiAgICBkaXNwYXRjaCh0aGlzLmdldFJvb3QoKSwgRXZlbnRUeXBlLkNMT1NFX0JPT0tFTkQsIC8qIG9wdF9idWJibGVzICovIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBlbGVtZW50T3V0c2lkZVVzYWJsZUFyZWFfKGVsKSB7XG4gICAgcmV0dXJuICFjbG9zZXN0KGVsLCBlbCA9PiBlbCA9PSB0aGlzLmdldElubmVyQ29udGFpbmVyXygpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGFuZ2VzIGJldHdlZW4gY2FyZCB2aWV3IGFuZCBmdWxsLWJsZWVkIGJhc2VkIG9uIHNjcm9sbCBwb3NpdGlvbi5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uU2Nyb2xsXygpIHtcbiAgICBpZiAoIXRoaXMuaXNBY3RpdmUoKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBTZXJ2aWNlcy52c3luY0Zvcih0aGlzLndpbl8pLnJ1bih7XG4gICAgICBtZWFzdXJlOiBzdGF0ZSA9PiB7XG4gICAgICAgIHN0YXRlLnNob3VsZEJlRnVsbEJsZWVkID1cbiAgICAgICAgICAgIHRoaXMuZ2V0T3ZlcmZsb3dDb250YWluZXJfKCkuLypPSyovc2Nyb2xsVG9wID49IEZVTExCTEVFRF9USFJFU0hPTEQ7XG4gICAgICB9LFxuICAgICAgbXV0YXRlOiBzdGF0ZSA9PiB7XG4gICAgICAgIHRoaXMuZ2V0Um9vdCgpLmNsYXNzTGlzdC50b2dnbGUoXG4gICAgICAgICAgICBGVUxMQkxFRURfQ0xBU1NOQU1FLCBzdGF0ZS5zaG91bGRCZUZ1bGxCbGVlZCk7XG4gICAgICB9LFxuICAgIH0sIHt9KTtcbiAgfVxuXG4gIC8qKiBIaWRlcyBib29rZW5kIHdpdGggYSB0cmFuc2l0aW9uLiAqL1xuICBoaWRlKCkge1xuICAgIHRoaXMudG9nZ2xlXyhmYWxzZSk7XG4gIH1cblxuICAvKiogU2hvd3MgYm9va2VuZCB3aXRoIGEgdHJhbnNpdGlvbi4gKi9cbiAgc2hvdygpIHtcbiAgICB0aGlzLnRvZ2dsZV8odHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBzaG93XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0b2dnbGVfKHNob3cpIHtcbiAgICBTZXJ2aWNlcy52c3luY0Zvcih0aGlzLndpbl8pLm11dGF0ZSgoKSA9PiB7XG4gICAgICB0aGlzLmdldFJvb3QoKS5jbGFzc0xpc3QudG9nZ2xlKEhJRERFTl9DTEFTU05BTUUsICFzaG93KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dW4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0J1aWx0KCkge1xuICAgIHJldHVybiB0aGlzLmlzQnVpbHRfO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGFzc2VydEJ1aWx0XygpIHtcbiAgICBkZXYoKS5hc3NlcnQodGhpcy5pc0J1aWx0KCksICdCb29rZW5kIGNvbXBvbmVudCBuZWVkcyB0byBiZSBidWlsdC4nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFCb29rZW5kQ29uZmlnRGVmfSBib29rZW5kQ29uZmlnXG4gICAqL1xuICBzZXRDb25maWcoYm9va2VuZENvbmZpZykge1xuICAgIHRoaXMuYXNzZXJ0QnVpbHRfKCk7XG5cbiAgICBpZiAoYm9va2VuZENvbmZpZy5zaGFyZVByb3ZpZGVycykge1xuICAgICAgdGhpcy5zaGFyZVdpZGdldF8uc2V0UHJvdmlkZXJzKFxuICAgICAgICAgIGRldigpLmFzc2VydChib29rZW5kQ29uZmlnLnNoYXJlUHJvdmlkZXJzKSk7XG4gICAgfVxuXG4gICAgdGhpcy5zZXRSZWxhdGVkQXJ0aWNsZXNfKGJvb2tlbmRDb25maWcucmVsYXRlZEFydGljbGVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwhLi9yZWxhdGVkLWFydGljbGVzLlJlbGF0ZWRBcnRpY2xlU2V0RGVmPn0gYXJ0aWNsZVNldHNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNldFJlbGF0ZWRBcnRpY2xlc18oYXJ0aWNsZVNldHMpIHtcbiAgICB0aGlzLmdldElubmVyQ29udGFpbmVyXygpLmFwcGVuZENoaWxkKFxuICAgICAgICByZW5kZXJTaW1wbGVUZW1wbGF0ZSh0aGlzLndpbl8uZG9jdW1lbnQsXG4gICAgICAgICAgICBidWlsZEFydGljbGVzQ29udGFpbmVyVGVtcGxhdGUoYXJ0aWNsZVNldHMpKSk7XG4gIH1cblxuICAvKiogQHJldHVybiB7IUVsZW1lbnR9ICovXG4gIGdldFJvb3QoKSB7XG4gICAgdGhpcy5hc3NlcnRCdWlsdF8oKTtcbiAgICByZXR1cm4gZGV2KCkuYXNzZXJ0RWxlbWVudCh0aGlzLnJvb3RfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGNvbnRhaW5lciBmb3IgYm9va2VuZCBjb250ZW50LlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldElubmVyQ29udGFpbmVyXygpIHtcbiAgICByZXR1cm4gZGV2KCkuYXNzZXJ0RWxlbWVudCh0aGlzLmdldE92ZXJmbG93Q29udGFpbmVyXygpLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG91dGVyIGNvbnRhaW5lciB0aGF0IGdldHMgc2Nyb2xsZWQuXG4gICAqIEByZXR1cm4geyFFbGVtZW50fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0T3ZlcmZsb3dDb250YWluZXJfKCkge1xuICAgIHJldHVybiBkZXYoKS5hc3NlcnRFbGVtZW50KHRoaXMuZ2V0Um9vdCgpLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICAgKiBAcmV0dXJuIHt7XG4gICAqICAgdGl0bGU6IHN0cmluZyxcbiAgICogICBkb21haW5OYW1lOiBzdHJpbmcsXG4gICAqICAgaW1hZ2VVcmw6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAgICogfX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldFN0b3J5TWV0YWRhdGFfKGFtcGRvYykge1xuICAgIGNvbnN0IGpzb25MZCA9IGdldEpzb25MZChhbXBkb2MuZ2V0Um9vdE5vZGUoKSk7XG5cbiAgICBjb25zdCBtZXRhZGF0YSA9IHtcbiAgICAgIHRpdGxlOiBqc29uTGQgJiYganNvbkxkWydoZWFkbGluZSddID9cbiAgICAgICAganNvbkxkWydoZWFkbGluZSddIDpcbiAgICAgICAgdXNlcigpLmFzc2VydEVsZW1lbnQoXG4gICAgICAgICAgICB0aGlzLndpbl8uZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yKCd0aXRsZScpLFxuICAgICAgICAgICAgJ1BsZWFzZSBzZXQgPHRpdGxlPiBvciBzdHJ1Y3R1cmVkIGRhdGEgKEpTT04tTEQpLicpLnRleHRDb250ZW50LFxuXG4gICAgICBkb21haW5OYW1lOlxuICAgICAgICAgIHBhcnNlVXJsKFNlcnZpY2VzLmRvY3VtZW50SW5mb0ZvckRvYyhhbXBkb2MpLmNhbm9uaWNhbFVybCkuaG9zdG5hbWUsXG4gICAgfTtcblxuICAgIGlmIChqc29uTGQgJiYgaXNBcnJheShqc29uTGRbJ2ltYWdlJ10pICYmIGpzb25MZFsnaW1hZ2UnXS5sZW5ndGgpIHtcbiAgICAgIHVzZXIoKS5hc3NlcnQoaXNQcm90b2NvbFZhbGlkKGpzb25MZFsnaW1hZ2UnXSksXG4gICAgICAgICAgYFVuc3VwcG9ydGVkIHByb3RvY29sIGZvciBzdG9yeSBpbWFnZSBVUkwgJHtqc29uTGRbJ2ltYWdlJ119YCk7XG4gICAgICBtZXRhZGF0YS5pbWFnZVVybCA9IGpzb25MZFsnaW1hZ2UnXVswXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWV0YWRhdGE7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBhbXBkb2NcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBidWlsZFJlcGxheUJ1dHRvbl8oYW1wZG9jKSB7XG4gICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLmdldFN0b3J5TWV0YWRhdGFfKGFtcGRvYyk7XG4gICAgcmV0dXJuIHJlbmRlckFzRWxlbWVudCh0aGlzLndpbl8uZG9jdW1lbnQsIGJ1aWxkUmVwbGF5QnV0dG9uVGVtcGxhdGUoXG4gICAgICAgIHRoaXMud2luXy5kb2N1bWVudCxcbiAgICAgICAgbWV0YWRhdGEudGl0bGUsXG4gICAgICAgIG1ldGFkYXRhLmRvbWFpbk5hbWUsXG4gICAgICAgIG1ldGFkYXRhLmltYWdlVXJsKSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5leHBvcnQgY29uc3QgQkxBTktfQVVESU9fU1JDID0gJ2RhdGE6YXVkaW8vd2F2O2Jhc2U2NCxVa2xHUmpJQUFBQlhRVlpGWm0xMElCQScgK1xuICAgICdBQUFBQkFBRUFJbFlBQUVTc0FBQUNBQkFBWkdGMFlSQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBPT0nO1xuXG5leHBvcnQgY29uc3QgQkxBTktfVklERU9fU1JDID0gJ2RhdGE6dmlkZW8vbXA0O2Jhc2U2NCxBQUFBSEdaMGVYQk5ORllnQUFBQ0FHJyArXG4gICAgJ2x6YjIxcGMyOHlZWFpqTVFBQUFBaG1jbVZsQUFBR0YyMWtZWFRlQkFBQWJHbGlabUZoWXlBeExqSTRBQUJDQUpNZ0JESUFSdycgK1xuICAgICdBQUFyRUdCZi8vcmR4RjZiM20yVWkzbGl6WUlOa2o3dTk0TWpZMElDMGdZMjl5WlNBeE5ESWdjaklnT1RVMll6aGtPQ0F0SUUnICtcbiAgICAnZ3VNalkwTDAxUVJVY3ROQ0JCVmtNZ1kyOWtaV01nTFNCRGIzQjViR1ZtZENBeU1EQXpMVEl3TVRRZ0xTQm9kSFJ3T2k4dmQzJyArXG4gICAgJ2QzTG5acFpHVnZiR0Z1TG05eVp5OTRNalkwTG1oMGJXd2dMU0J2Y0hScGIyNXpPaUJqWVdKaFl6MHdJSEpsWmoweklHUmxZbScgK1xuICAgICd4dlkyczlNVG93T2pBZ1lXNWhiSGx6WlQwd2VERTZNSGd4TVRFZ2JXVTlhR1Y0SUhOMVltMWxQVGNnY0hONVBURWdjSE41WDMnICtcbiAgICAnSmtQVEV1TURBNk1DNHdNQ0J0YVhobFpGOXlaV1k5TVNCdFpWOXlZVzVuWlQweE5pQmphSEp2YldGZmJXVTlNU0IwY21Wc2JHJyArXG4gICAgJ2x6UFRFZ09IZzRaR04wUFRBZ1kzRnRQVEFnWkdWaFpIcHZibVU5TWpFc01URWdabUZ6ZEY5d2MydHBjRDB4SUdOb2NtOXRZVicgK1xuICAgICc5eGNGOXZabVp6WlhROUxUSWdkR2h5WldGa2N6MDJJR3h2YjJ0aGFHVmhaRjkwYUhKbFlXUnpQVEVnYzJ4cFkyVmtYM1JvY20nICtcbiAgICAnVmhaSE05TUNCdWNqMHdJR1JsWTJsdFlYUmxQVEVnYVc1MFpYSnNZV05sWkQwd0lHSnNkWEpoZVY5amIyMXdZWFE5TUNCamIyJyArXG4gICAgJzV6ZEhKaGFXNWxaRjlwYm5SeVlUMHdJR0ptY21GdFpYTTlNQ0IzWldsbmFIUndQVEFnYTJWNWFXNTBQVEkxTUNCclpYbHBibicgK1xuICAgICdSZmJXbHVQVEkxSUhOalpXNWxZM1YwUFRRd0lHbHVkSEpoWDNKbFpuSmxjMmc5TUNCeVkxOXNiMjlyWVdobFlXUTlOREFnY20nICtcbiAgICAnTTlZM0ptSUcxaWRISmxaVDB4SUdOeVpqMHlNeTR3SUhGamIyMXdQVEF1TmpBZ2NYQnRhVzQ5TUNCeGNHMWhlRDAyT1NCeGNIJyArXG4gICAgJ04wWlhBOU5DQjJZblpmYldGNGNtRjBaVDAzTmpnZ2RtSjJYMkoxWm5OcGVtVTlNekF3TUNCamNtWmZiV0Y0UFRBdU1DQnVZVycgK1xuICAgICd4ZmFISmtQVzV2Ym1VZ1ptbHNiR1Z5UFRBZ2FYQmZjbUYwYVc4OU1TNDBNQ0JoY1QweE9qRXVNREFBZ0FBQUFGWmxpSVFMOG0nICtcbiAgICAnS0FBS3ZNbkp5Y25KeWNuSnljblhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYJyArXG4gICAgJ1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYaUVBU1pBQ0dRQWpnQ0VBU1pBQ0dRQWpnQUFBQUFkQm1qZ1g0RycgK1xuICAgICdTQUlRQkprQUlaQUNPQUFBQUFCMEdhVkFYNEdTQWhBRW1RQWhrQUk0QWhBRW1RQWhrQUk0QUFBQUFHUVpwZ0w4REpJUUJKa0EnICtcbiAgICAnSVpBQ09BSVFCSmtBSVpBQ09BQUFBQUJrR2FnQy9BeVNFQVNaQUNHUUFqZ0FBQUFBWkJtcUF2d01raEFFbVFBaGtBSTRBaEFFJyArXG4gICAgJ21RQWhrQUk0QUFBQUFHUVpyQUw4REpJUUJKa0FJWkFDT0FBQUFBQmtHYTRDL0F5U0VBU1pBQ0dRQWpnQ0VBU1pBQ0dRQWpnQScgK1xuICAgICdBQUFBWkJtd0F2d01raEFFbVFBaGtBSTRBQUFBQUdRWnNnTDhESklRQkprQUlaQUNPQUlRQkprQUlaQUNPQUFBQUFCa0diUUMnICtcbiAgICAnL0F5U0VBU1pBQ0dRQWpnQ0VBU1pBQ0dRQWpnQUFBQUFaQm0yQXZ3TWtoQUVtUUFoa0FJNEFBQUFBR1FadUFMOERKSVFCSmtBJyArXG4gICAgJ0laQUNPQUlRQkprQUlaQUNPQUFBQUFCa0dib0MvQXlTRUFTWkFDR1FBamdBQUFBQVpCbThBdndNa2hBRW1RQWhrQUk0QWhBRScgK1xuICAgICdtUUFoa0FJNEFBQUFBR1FadmdMOERKSVFCSmtBSVpBQ09BQUFBQUJrR2FBQy9BeVNFQVNaQUNHUUFqZ0NFQVNaQUNHUUFqZ0EnICtcbiAgICAnQUFBQVpCbWlBdndNa2hBRW1RQWhrQUk0QWhBRW1RQWhrQUk0QUFBQUFHUVpwQUw4REpJUUJKa0FJWkFDT0FBQUFBQmtHYVlDJyArXG4gICAgJy9BeVNFQVNaQUNHUUFqZ0NFQVNaQUNHUUFqZ0FBQUFBWkJtb0F2d01raEFFbVFBaGtBSTRBQUFBQUdRWnFnTDhESklRQkprQScgK1xuICAgICdJWkFDT0FJUUJKa0FJWkFDT0FBQUFBQmtHYXdDL0F5U0VBU1pBQ0dRQWpnQUFBQUFaQm11QXZ3TWtoQUVtUUFoa0FJNEFoQUUnICtcbiAgICAnbVFBaGtBSTRBQUFBQUdRWnNBTDhESklRQkprQUlaQUNPQUFBQUFCa0diSUMvQXlTRUFTWkFDR1FBamdDRUFTWkFDR1FBamdBJyArXG4gICAgJ0FBQUFaQm0wQXZ3TWtoQUVtUUFoa0FJNEFoQUVtUUFoa0FJNEFBQUFBR1FadGdMOERKSVFCSmtBSVpBQ09BQUFBQUJrR2JnQycgK1xuICAgICd2QXlTRUFTWkFDR1FBamdDRUFTWkFDR1FBamdBQUFBQVpCbTZBbndNa2hBRW1RQWhrQUk0QWhBRW1RQWhrQUk0QWhBRW1RQWgnICtcbiAgICAna0FJNEFoQUVtUUFoa0FJNEFBQUFodWJXOXZkZ0FBQUd4dGRtaGtBQUFBQUFBQUFBQUFBQUFBQUFBRDZBQUFCRGNBQVFBQUFRJyArXG4gICAgJ0FBQUFBQUFBQUFBQUFBQUFFQUFBQUFBQUFBQUFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQkFBQUFBQUFBQUFBQUFBQScgK1xuICAgICdBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUF3QUFBekIwY21GckFBQUFYSFJyYUdRQUFBQURBQUFBQUFBQUFBQUFBQUFCQUEnICtcbiAgICAnQUFBQUFBQStrQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFFQUFBQUFBQUFBQUFBQUFBQUFBQUFCQUFBQUFBQUFBQUFBQUFBQUFBJyArXG4gICAgJ0JBQUFBQUFMQUFBQUNRQUFBQUFBQWtaV1IwY3dBQUFCeGxiSE4wQUFBQUFBQUFBQUVBQUFQcEFBQUFBQUFCQUFBQUFBS29iVycgK1xuICAgICdScFlRQUFBQ0J0Wkdoa0FBQUFBQUFBQUFBQUFBQUFBQUIxTUFBQWRVNVZ4QUFBQUFBQUxXaGtiSElBQUFBQUFBQUFBSFpwWkcnICtcbiAgICAnVUFBQUFBQUFBQUFBQUFBQUJXYVdSbGIwaGhibVJzWlhJQUFBQUNVMjFwYm1ZQUFBQVVkbTFvWkFBQUFBRUFBQUFBQUFBQUFBJyArXG4gICAgJ0FBQUNSa2FXNW1BQUFBSEdSeVpXWUFBQUFBQUFBQUFRQUFBQXgxY213Z0FBQUFBUUFBQWhOemRHSnNBQUFBcjNOMGMyUUFBQScgK1xuICAgICdBQUFBQUFBUUFBQUo5aGRtTXhBQUFBQUFBQUFBRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFMQUFrQUJJQUFBQVNBQUFBQUFBQUEnICtcbiAgICAnQUJBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUdQLy9BQUFBTFdGMlkwTUJRc0FOLytFQUZXJyArXG4gICAgJ2RDd0EzWkFzVHNCRUFBQVBwQUFEcVlBOFVLa2dFQUJXakxnOHNnQUFBQUhIVjFhV1JyYUVEeVh5UlB4Ym81cFJ2UEF5UHpBQScgK1xuICAgICdBQUFBQUFBQmh6ZEhSekFBQUFBQUFBQUFFQUFBQWVBQUFENlFBQUFCUnpkSE56QUFBQUFBQUFBQUVBQUFBQkFBQUFISE4wYzInICtcbiAgICAnTUFBQUFBQUFBQUFRQUFBQUVBQUFBQkFBQUFBUUFBQUl4emRITjZBQUFBQUFBQUFBQUFBQUFlQUFBRER3QUFBQXNBQUFBTEFBJyArXG4gICAgJ0FBQ2dBQUFBb0FBQUFLQUFBQUNnQUFBQW9BQUFBS0FBQUFDZ0FBQUFvQUFBQUtBQUFBQ2dBQUFBb0FBQUFLQUFBQUNnQUFBQScgK1xuICAgICdvQUFBQUtBQUFBQ2dBQUFBb0FBQUFLQUFBQUNnQUFBQW9BQUFBS0FBQUFDZ0FBQUFvQUFBQUtBQUFBQ2dBQUFBb0FBQUFLQUEnICtcbiAgICAnQUFpSE4wWTI4QUFBQUFBQUFBSGdBQUFFWUFBQU5uQUFBRGV3QUFBNWdBQUFPMEFBQUR4d0FBQStNQUFBUDJBQUFFRWdBQUJDJyArXG4gICAgJ1VBQUFSQkFBQUVYUUFBQkhBQUFBU01BQUFFbndBQUJMc0FBQVRPQUFBRTZnQUFCUVlBQUFVWkFBQUZOUUFBQlVnQUFBVmtBQScgK1xuICAgICdBRmR3QUFCWk1BQUFXbUFBQUZ3Z0FBQmQ0QUFBWHhBQUFHRFFBQUJHaDBjbUZyQUFBQVhIUnJhR1FBQUFBREFBQUFBQUFBQUEnICtcbiAgICAnQUFBQUFDQUFBQUFBQUFCRGNBQUFBQUFBQUFBQUFBQUFFQkFBQUFBQUVBQUFBQUFBQUFBQUFBQUFBQUFBQUJBQUFBQUFBQUFBJyArXG4gICAgJ0FBQUFBQUFBQkFBQUFBQUFBQUFBQUFBQUFBQUFBa1pXUjBjd0FBQUJ4bGJITjBBQUFBQUFBQUFBRUFBQVFrQUFBRGNBQUJBQScgK1xuICAgICdBQUFBUGdiV1JwWVFBQUFDQnRaR2hrQUFBQUFBQUFBQUFBQUFBQUFBQzdnQUFBeWtCVnhBQUFBQUFBTFdoa2JISUFBQUFBQUEnICtcbiAgICAnQUFBSE52ZFc0QUFBQUFBQUFBQUFBQUFBQlRiM1Z1WkVoaGJtUnNaWElBQUFBRGkyMXBibVlBQUFBUWMyMW9aQUFBQUFBQUFBJyArXG4gICAgJ0FBQUFBQUpHUnBibVlBQUFBY1pISmxaZ0FBQUFBQUFBQUJBQUFBREhWeWJDQUFBQUFCQUFBRFQzTjBZbXdBQUFCbmMzUnpaQScgK1xuICAgICdBQUFBQUFBQUFCQUFBQVYyMXdOR0VBQUFBQUFBQUFBUUFBQUFBQUFBQUFBQUlBRUFBQUFBQzdnQUFBQUFBQU0yVnpaSE1BQUEnICtcbiAgICAnQUFBNENBZ0NJQUFnQUVnSUNBRkVBVkJiallBQXU0QUFBQURjb0ZnSUNBQWhHUUJvQ0FnQUVDQUFBQUlITjBkSE1BQUFBQUFBJyArXG4gICAgJ0FBQWdBQUFESUFBQVFBQUFBQUFRQUFBa0FBQUFGVWMzUnpZd0FBQUFBQUFBQWJBQUFBQVFBQUFBRUFBQUFCQUFBQUFnQUFBQScgK1xuICAgICdJQUFBQUJBQUFBQXdBQUFBRUFBQUFCQUFBQUJBQUFBQUlBQUFBQkFBQUFCZ0FBQUFFQUFBQUJBQUFBQndBQUFBSUFBQUFCQUEnICtcbiAgICAnQUFDQUFBQUFFQUFBQUJBQUFBQ1FBQUFBSUFBQUFCQUFBQUNnQUFBQUVBQUFBQkFBQUFDd0FBQUFJQUFBQUJBQUFBRFFBQUFBJyArXG4gICAgJ0VBQUFBQkFBQUFEZ0FBQUFJQUFBQUJBQUFBRHdBQUFBRUFBQUFCQUFBQUVBQUFBQUlBQUFBQkFBQUFFUUFBQUFFQUFBQUJBQScgK1xuICAgICdBQUVnQUFBQUlBQUFBQkFBQUFGQUFBQUFFQUFBQUJBQUFBRlFBQUFBSUFBQUFCQUFBQUZnQUFBQUVBQUFBQkFBQUFGd0FBQUEnICtcbiAgICAnSUFBQUFCQUFBQUdBQUFBQUVBQUFBQkFBQUFHUUFBQUFJQUFBQUJBQUFBR2dBQUFBRUFBQUFCQUFBQUd3QUFBQUlBQUFBQkFBJyArXG4gICAgJ0FBSFFBQUFBRUFBQUFCQUFBQUhnQUFBQUlBQUFBQkFBQUFId0FBQUFRQUFBQUJBQUFBNEhOMGMzb0FBQUFBQUFBQUFBQUFBRCcgK1xuICAgICdNQUFBQWFBQUFBQ1FBQUFBa0FBQUFKQUFBQUNRQUFBQWtBQUFBSkFBQUFDUUFBQUFrQUFBQUpBQUFBQ1FBQUFBa0FBQUFKQUEnICtcbiAgICAnQUFDUUFBQUFrQUFBQUpBQUFBQ1FBQUFBa0FBQUFKQUFBQUNRQUFBQWtBQUFBSkFBQUFDUUFBQUFrQUFBQUpBQUFBQ1FBQUFBJyArXG4gICAgJ2tBQUFBSkFBQUFDUUFBQUFrQUFBQUpBQUFBQ1FBQUFBa0FBQUFKQUFBQUNRQUFBQWtBQUFBSkFBQUFDUUFBQUFrQUFBQUpBQScgK1xuICAgICdBQUNRQUFBQWtBQUFBSkFBQUFDUUFBQUFrQUFBQUpBQUFBQ1FBQUFBa0FBQUFKQUFBQUNRQUFBQWtBQUFDTWMzUmpid0FBQUEnICtcbiAgICAnQUFBQUFmQUFBQUxBQUFBMVVBQUFOeUFBQURoZ0FBQTZJQUFBTytBQUFEMFFBQUErMEFBQVFBQUFBRUhBQUFCQzhBQUFSTEFBJyArXG4gICAgJ0FFWndBQUJIb0FBQVNXQUFBRXFRQUFCTVVBQUFUWUFBQUU5QUFBQlJBQUFBVWpBQUFGUHdBQUJWSUFBQVZ1QUFBRmdRQUFCWicgK1xuICAgICcwQUFBV3dBQUFGekFBQUJlZ0FBQVg3QUFBR0Z3QUFBR0oxWkhSaEFBQUFXbTFsZEdFQUFBQUFBQUFBSVdoa2JISUFBQUFBQUEnICtcbiAgICAnQUFBRzFrYVhKaGNIQnNBQUFBQUFBQUFBQUFBQUFBTFdsc2MzUUFBQUFscVhSdmJ3QUFBQjFrWVhSaEFBQUFBUUFBQUFCTVlYJyArXG4gICAgJ1ptTlRVdU16TXVNVEF3JztcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHtMb2dMZXZlbCwgZGV2fSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge2lzQXJyYXl9IGZyb20gJy4uLy4uLy4uL3NyYy90eXBlcyc7XG5pbXBvcnQge3JlbW92ZUNoaWxkcmVufSBmcm9tICcuLi8uLi8uLi9zcmMvZG9tJztcblxuXG4vKipcbiAqIEBwYXJhbSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3ZzeW5jLWltcGwuVnN5bmN9IHZzeW5jXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbFxuICogQHBhcmFtIHtib29sZWFufSBpc0hpZGRlblxuICovXG5mdW5jdGlvbiB0b2dnbGVIaWRkZW5BdHRyaWJ1dGUodnN5bmMsIGVsLCBpc0hpZGRlbikge1xuICB2c3luYy5tdXRhdGUoKCkgPT4ge1xuICAgIGlmIChpc0hpZGRlbikge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnaGlkZGVuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnaGlkZGVuJyk7XG4gICAgfVxuICB9KTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ3whQXJyYXk8c3RyaW5nPn0gY2xhc3NOYW1lT3JMaXN0XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKEV2ZW50KX0gaGFuZGxlclxuICogQHJldHVybiB7IUVsZW1lbnR9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbih3aW4sIGNsYXNzTmFtZU9yTGlzdCwgaGFuZGxlcikge1xuICBjb25zdCBidXR0b24gPSB3aW4uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3JvbGUnLCAnYnV0dG9uJyk7XG5cbiAgaWYgKGlzQXJyYXkoY2xhc3NOYW1lT3JMaXN0KSkge1xuICAgIGNsYXNzTmFtZU9yTGlzdC5mb3JFYWNoKGNsYXNzTmFtZSA9PiBidXR0b24uY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpKTtcbiAgfSBlbHNlIHtcbiAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgvKiogQHR5cGUge3N0cmluZ30gKi8gKGNsYXNzTmFtZU9yTGlzdCkpO1xuICB9XG4gIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdpLWFtcGh0bWwtc3RvcnktYnV0dG9uJyk7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZXIpO1xuICByZXR1cm4gYnV0dG9uO1xufVxuXG5cbmV4cG9ydCBjbGFzcyBEZXZlbG9wbWVudE1vZGVMb2dCdXR0b25TZXQge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbikge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RWxlbWVudH0gKi9cbiAgICB0aGlzLnJvb3RfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VsZW1lbnR9ICovXG4gICAgdGhpcy5lcnJvckJ1dHRvbl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RWxlbWVudH0gKi9cbiAgICB0aGlzLndhcm5pbmdCdXR0b25fID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VsZW1lbnR9ICovXG4gICAgdGhpcy5zdWNjZXNzQnV0dG9uXyA9IG51bGw7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZSh3aW4pIHtcbiAgICByZXR1cm4gbmV3IERldmVsb3BtZW50TW9kZUxvZ0J1dHRvblNldCh3aW4pO1xuICB9XG5cblxuICAvKipcbiAgICogQnVpbGRzIHRoZSBkZXZlbG9wZXIgbG9nIGJ1dHRvbiBzZXQgZWxlbWVudC5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBsb2dCdXR0b25BY3Rpb25GbiBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgd2hlblxuICAgKiAgICAgdGhlIGxvZyBidXR0b25zIGFyZSBjbGlja2VkLlxuICAgKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAgICovXG4gIGJ1aWxkKGxvZ0J1dHRvbkFjdGlvbkZuKSB7XG4gICAgdGhpcy5lcnJvckJ1dHRvbl8gPSBjcmVhdGVCdXR0b24odGhpcy53aW5fLFxuICAgICAgICBbJ2ktYW1waHRtbC1zdG9yeS1lcnJvci1idXR0b24nLCAnaS1hbXBodG1sLXN0b3J5LWRldi1sb2dzLWJ1dHRvbiddLFxuICAgICAgICAoKSA9PiBsb2dCdXR0b25BY3Rpb25GbigpKTtcblxuICAgIHRoaXMud2FybmluZ0J1dHRvbl8gPSBjcmVhdGVCdXR0b24odGhpcy53aW5fLFxuICAgICAgICBbJ2ktYW1waHRtbC1zdG9yeS13YXJuaW5nLWJ1dHRvbicsICdpLWFtcGh0bWwtc3RvcnktZGV2LWxvZ3MtYnV0dG9uJ10sXG4gICAgICAgICgpID0+IGxvZ0J1dHRvbkFjdGlvbkZuKCkpO1xuXG4gICAgdGhpcy5zdWNjZXNzQnV0dG9uXyA9IGNyZWF0ZUJ1dHRvbih0aGlzLndpbl8sXG4gICAgICAgIFsnaS1hbXBodG1sLXN0b3J5LXN1Y2Nlc3MtYnV0dG9uJywgJ2ktYW1waHRtbC1zdG9yeS1kZXYtbG9ncy1idXR0b24nXSxcbiAgICAgICAgKCkgPT4gbG9nQnV0dG9uQWN0aW9uRm4oKSk7XG5cblxuICAgIHRoaXMucm9vdF8gPSB0aGlzLndpbl8uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5yb290Xy5hcHBlbmRDaGlsZCh0aGlzLmVycm9yQnV0dG9uXyk7XG4gICAgdGhpcy5yb290Xy5hcHBlbmRDaGlsZCh0aGlzLndhcm5pbmdCdXR0b25fKTtcbiAgICB0aGlzLnJvb3RfLmFwcGVuZENoaWxkKHRoaXMuc3VjY2Vzc0J1dHRvbl8pO1xuXG4gICAgcmV0dXJuIHRoaXMucm9vdF87XG4gIH1cblxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBidXR0b24gYXNzb2NpYXRlZCB0byBhIGdpdmVuIGxvZyBlbnRyeS5cbiAgICogQHBhcmFtIHshLi9sb2dnaW5nLkFtcFN0b3J5TG9nRW50cnlEZWZ9IGxvZ0VudHJ5IFRoZSBsb2cgZW50cnkgZm9yIHdoaWNoXG4gICAqICAgICB0aGUgYXNzb2NpYXRlZCBidXR0b24gc2hvdWxkYmUgcmV0cmlldmVkLlxuICAgKiBAcmV0dXJuIHs/RWxlbWVudH0gVGhlIGJ1dHRvbiBhc3NvY2lhdGVkIHRvIHRoZSBzcGVjaWZpZWQgbG9nIGVudHJ5LCBpZiBvbmVcbiAgICogICAgIGV4aXN0cy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldEJ1dHRvbkZvckxvZ0VudHJ5Xyhsb2dFbnRyeSkge1xuICAgIGlmIChsb2dFbnRyeS5jb25mb3Jtcykge1xuICAgICAgcmV0dXJuIHRoaXMuc3VjY2Vzc0J1dHRvbl87XG4gICAgfVxuXG4gICAgc3dpdGNoIChsb2dFbnRyeS5sZXZlbCkge1xuICAgICAgY2FzZSBMb2dMZXZlbC5FUlJPUjpcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JCdXR0b25fO1xuICAgICAgY2FzZSBMb2dMZXZlbC5XQVJOOlxuICAgICAgICByZXR1cm4gdGhpcy53YXJuaW5nQnV0dG9uXztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIExvZ3MgYW4gaW5kaXZpZHVhbCBlbnRyeSBpbnRvIHRoZSBkZXZlbG9wZXIgbG9nLlxuICAgKiBAcGFyYW0geyEuL2xvZ2dpbmcuQW1wU3RvcnlMb2dFbnRyeURlZn0gbG9nRW50cnkgVGhlIGVudHJ5IHRvIGxvZy5cbiAgICovXG4gIGxvZyhsb2dFbnRyeSkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuZ2V0QnV0dG9uRm9yTG9nRW50cnlfKGxvZ0VudHJ5KTtcbiAgICBpZiAoIWJ1dHRvbikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG9sZENvdW50ID0gcGFyc2VJbnQoYnV0dG9uLmdldEF0dHJpYnV0ZSgnZGF0YS1jb3VudCcpIHx8IDAsIDEwKTtcbiAgICBidXR0b24uc2V0QXR0cmlidXRlKCdkYXRhLWNvdW50Jywgb2xkQ291bnQgKyAxKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIENsZWFycyBhbnkgZXJyb3Igc3RhdGUgaGVsZCBieSB0aGUgYnV0dG9ucy5cbiAgICovXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuZXJyb3JCdXR0b25fLnNldEF0dHJpYnV0ZSgnZGF0YS1jb3VudCcsIDApO1xuICAgIHRoaXMud2FybmluZ0J1dHRvbl8uc2V0QXR0cmlidXRlKCdkYXRhLWNvdW50JywgMCk7XG4gICAgdGhpcy5zdWNjZXNzQnV0dG9uXy5zZXRBdHRyaWJ1dGUoJ2RhdGEtY291bnQnLCAwKTtcbiAgfVxufVxuXG5cbi8qKlxuICogRGV2ZWxvcG1lbnQgbW9kZSBsb2cgZm9yIDxhbXAtc3Rvcnk+LlxuICovXG5leHBvcnQgY2xhc3MgRGV2ZWxvcG1lbnRNb2RlTG9nIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4pIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzQnVpbHRfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgez9FbGVtZW50fSAqL1xuICAgIHRoaXMucm9vdF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RWxlbWVudH0gKi9cbiAgICB0aGlzLmVycm9yQnV0dG9uXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9FbGVtZW50fSAqL1xuICAgIHRoaXMud2FybmluZ0J1dHRvbl8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RWxlbWVudH0gKi9cbiAgICB0aGlzLnN1Y2Nlc3NCdXR0b25fID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VsZW1lbnR9ICovXG4gICAgdGhpcy5lbnRyaWVzRWxfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VsZW1lbnR9ICovXG4gICAgdGhpcy5jb250ZXh0U3RyaW5nRWxfID0gbnVsbDtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlKHdpbikge1xuICAgIHJldHVybiBuZXcgRGV2ZWxvcG1lbnRNb2RlTG9nKHdpbik7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBCdWlsZHMgdGhlIGRldmVsb3BlciBsb2cgZWxlbWVudC5cbiAgICogQHJldHVybiB7P0VsZW1lbnR9XG4gICAqL1xuICBidWlsZCgpIHtcbiAgICB0aGlzLmNvbnRleHRTdHJpbmdFbF8gPSB0aGlzLndpbl8uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIHRoaXMuY29udGV4dFN0cmluZ0VsXy5jbGFzc0xpc3RcbiAgICAgICAgLmFkZCgnaS1hbXBodG1sLXN0b3J5LWRldmVsb3Blci1sb2ctY29udGV4dCcpO1xuICAgIGNvbnN0IHRpdGxlRWwgPSB0aGlzLndpbl8uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGl0bGVFbC50ZXh0Q29udGVudCA9ICdEZXZlbG9wZXIgbG9ncyBmb3IgcGFnZSAnO1xuICAgIHRpdGxlRWwuYXBwZW5kQ2hpbGQodGhpcy5jb250ZXh0U3RyaW5nRWxfKTtcblxuICAgIGNvbnN0IGNsb3NlRGV2ZWxvcGVyTG9nRWwgPSBjcmVhdGVCdXR0b24odGhpcy53aW5fLFxuICAgICAgICAnaS1hbXBodG1sLXN0b3J5LWRldmVsb3Blci1sb2ctY2xvc2UnLFxuICAgICAgICAoKSA9PiB0aGlzLmhpZGUoKSk7XG5cbiAgICBjb25zdCBoZWFkZXJFbCA9IHRoaXMud2luXy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBoZWFkZXJFbC5jbGFzc0xpc3QuYWRkKCdpLWFtcGh0bWwtc3RvcnktZGV2ZWxvcGVyLWxvZy1oZWFkZXInKTtcbiAgICBoZWFkZXJFbC5hcHBlbmRDaGlsZCh0aXRsZUVsKTtcbiAgICBoZWFkZXJFbC5hcHBlbmRDaGlsZChjbG9zZURldmVsb3BlckxvZ0VsKTtcblxuICAgIHRoaXMuZW50cmllc0VsXyA9IHRoaXMud2luXy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgIHRoaXMuZW50cmllc0VsXy5jbGFzc0xpc3RcbiAgICAgICAgLmFkZCgnaS1hbXBodG1sLXN0b3J5LWRldmVsb3Blci1sb2ctZW50cmllcycpO1xuXG4gICAgdGhpcy5yb290XyA9IHRoaXMud2luXy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLnJvb3RfLmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1zdG9yeS1kZXZlbG9wZXItbG9nJyk7XG4gICAgdGhpcy5yb290Xy5zZXRBdHRyaWJ1dGUoJ2hpZGRlbicsICcnKTtcbiAgICB0aGlzLnJvb3RfLmFwcGVuZENoaWxkKGhlYWRlckVsKTtcbiAgICB0aGlzLnJvb3RfLmFwcGVuZENoaWxkKHRoaXMuZW50cmllc0VsXyk7XG5cbiAgICB0aGlzLmNsZWFyKCk7XG4gICAgcmV0dXJuIHRoaXMucm9vdF87XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFMb2dMZXZlbH0gbG9nTGV2ZWxcbiAgICogQHJldHVybiB7P3N0cmluZ30gVGhlIENTUyBjbGFzcyB0byBiZSBhcHBsaWVkIHRvIHRoZSBsb2cgZW50cnksIGdpdmVuIHRoZVxuICAgKiAgICAgc3BlY2lmaWVkIGxvZyBsZXZlbCwgb3IgbnVsbCBpZiBubyBjbGFzcyBzaG91bGQgYmUgYWRkZWQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRDc3NMb2dMZXZlbENsYXNzXyhsb2dMZXZlbCkge1xuICAgIHN3aXRjaCAobG9nTGV2ZWwpIHtcbiAgICAgIGNhc2UgTG9nTGV2ZWwuV0FSTjpcbiAgICAgICAgcmV0dXJuICdpLWFtcGh0bWwtc3RvcnktZGV2ZWxvcGVyLWxvZy1lbnRyeS13YXJuaW5nJztcbiAgICAgIGNhc2UgTG9nTGV2ZWwuRVJST1I6XG4gICAgICAgIHJldHVybiAnaS1hbXBodG1sLXN0b3J5LWRldmVsb3Blci1sb2ctZW50cnktZXJyb3InO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBjb25mb3JtcyBXaGV0aGVyIHRoZSBsb2cgZW50cnkgaXMgZm9yIGFuIGVsZW1lbnQgdGhhdFxuICAgKiAgICAgY29uZm9ybXMgdG8gYSBiZXN0IHByYWN0aWNlLlxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBUaGUgQ1NTIGNsYXNzIHRvIGJlIGFwcGxpZWQgdG8gdGhlIGxvZyBlbnRyeSwgZ2l2ZW4gdGhlXG4gICAqICAgICBlbGVtZW50J3MgY29uZm9ybWFuY2UgdG8gYSBiZXN0IHByYWN0aWNlLCBvciBudWxsIGlmIG5vIGNsYXNzIHNob3VsZCBiZVxuICAgKiAgICAgYWRkZWQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBnZXRDc3NDb25mb3JtYW5jZUNsYXNzXyhjb25mb3Jtcykge1xuICAgIGlmIChjb25mb3Jtcykge1xuICAgICAgcmV0dXJuICdpLWFtcGh0bWwtc3RvcnktZGV2ZWxvcGVyLWxvZy1lbnRyeS1zdWNjZXNzJztcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vbG9nZ2luZy5BbXBTdG9yeUxvZ0VudHJ5RGVmfSBsb2dFbnRyeSBUaGUgZW50cnkgdG8gYmUgbG9nZ2VkLlxuICAgKi9cbiAgbG9nKGxvZ0VudHJ5KSB7XG4gICAgY29uc3QgbG9nTGV2ZWxDbGFzcyA9IHRoaXMuZ2V0Q3NzTG9nTGV2ZWxDbGFzc18obG9nRW50cnkubGV2ZWwpO1xuICAgIGNvbnN0IGNvbmZvcm1hbmNlQ2xhc3MgPSB0aGlzLmdldENzc0NvbmZvcm1hbmNlQ2xhc3NfKGxvZ0VudHJ5LmNvbmZvcm1zKTtcblxuICAgIGNvbnN0IGxvZ0VudHJ5VWkgPSB0aGlzLndpbl8uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBsb2dFbnRyeVVpLmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1zdG9yeS1kZXZlbG9wZXItbG9nLWVudHJ5Jyk7XG5cbiAgICBpZiAobG9nTGV2ZWxDbGFzcykge1xuICAgICAgbG9nRW50cnlVaS5jbGFzc0xpc3QuYWRkKGxvZ0xldmVsQ2xhc3MpO1xuICAgIH1cblxuICAgIGlmIChjb25mb3JtYW5jZUNsYXNzKSB7XG4gICAgICBsb2dFbnRyeVVpLmNsYXNzTGlzdC5hZGQoY29uZm9ybWFuY2VDbGFzcyk7XG4gICAgfVxuXG4gICAgbG9nRW50cnlVaS50ZXh0Q29udGVudCA9IGxvZ0VudHJ5Lm1lc3NhZ2U7XG4gICAgdGhpcy5lbnRyaWVzRWxfLmFwcGVuZENoaWxkKGxvZ0VudHJ5VWkpO1xuICB9XG5cblxuICAvKipcbiAgICogQ2xlYXJzIGFsbCBlbnRyaWVzIGZyb20gdGhlIGRldmVsb3BlciBsb2dzLlxuICAgKi9cbiAgY2xlYXIoKSB7XG4gICAgU2VydmljZXMudnN5bmNGb3IodGhpcy53aW5fKS5tdXRhdGUoKCkgPT4ge1xuICAgICAgcmVtb3ZlQ2hpbGRyZW4oZGV2KCkuYXNzZXJ0RWxlbWVudCh0aGlzLmVudHJpZXNFbF8pKTtcbiAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHN0cmluZyBwcm92aWRpbmcgY29udGV4dCBmb3IgdGhlIGRldmVsb3BlciBsb2dzIHdpbmRvdy4gIFRoaXMgaXNcbiAgICogb2Z0ZW4gdGhlIG5hbWUgb3IgSUQgb2YgdGhlIGVsZW1lbnQgdGhhdCBhbGwgbG9ncyBhcmUgZm9yIChlLmcuIHRoZSBwYWdlKS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRleHRTdHJpbmdcbiAgICovXG4gIHNldENvbnRleHRTdHJpbmcoY29udGV4dFN0cmluZykge1xuICAgIHRoaXMuY29udGV4dFN0cmluZ0VsXy50ZXh0Q29udGVudCA9IGNvbnRleHRTdHJpbmc7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBUb2dnbGVzIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBkZXZlbG9wZXIgbG9nLlxuICAgKi9cbiAgdG9nZ2xlKCkge1xuICAgIGNvbnN0IG5ld0hpZGRlblN0YXRlID0gIXRoaXMucm9vdF8uaGFzQXR0cmlidXRlKCdoaWRkZW4nKTtcbiAgICB0b2dnbGVIaWRkZW5BdHRyaWJ1dGUoXG4gICAgICAgIFNlcnZpY2VzLnZzeW5jRm9yKHRoaXMud2luXyksIGRldigpLmFzc2VydEVsZW1lbnQodGhpcy5yb290XyksXG4gICAgICAgIG5ld0hpZGRlblN0YXRlKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEhpZGVzIHRoZSBkZXZlbG9wZXIgbG9nIGluIHRoZSBVSS5cbiAgICovXG4gIGhpZGUoKSB7XG4gICAgdG9nZ2xlSGlkZGVuQXR0cmlidXRlKFxuICAgICAgICBTZXJ2aWNlcy52c3luY0Zvcih0aGlzLndpbl8pLCBkZXYoKS5hc3NlcnRFbGVtZW50KHRoaXMucm9vdF8pLFxuICAgICAgICAvKiBpc0hpZGRlbiAqLyB0cnVlKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxOCBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge2lzRW51bVZhbHVlfSBmcm9tICcuLi8uLi8uLi9zcmMvdHlwZXMnO1xuaW1wb3J0IHtwYXJzZVF1ZXJ5U3RyaW5nfSBmcm9tICcuLi8uLi8uLi9zcmMvdXJsJztcblxuXG4vKipcbiAqIEVtYmVkIG1vZGUgZm9yIEFNUCBzdG9yeS4gIFNlZSAuLi9lbWJlZC1tb2Rlcy5tZCBmb3IgZGV0YWlscy5cbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBFbWJlZE1vZGUgPSB7XG4gIC8qKlxuICAgKiBEZWZhdWx0IG1vZGUuXG4gICAqL1xuICBOT1RfRU1CRURERUQ6IDAsXG5cbiAgLyoqXG4gICAqIFRCRCBlbWJlZCBtb2RlLlxuICAgKlxuICAgKiBUaGlzIGRpZmZlcnMgZnJvbSB0aGUgTk9UX0VNQkVEREVEIGVtYmVkIG1vZGUgaW4gdGhlIGZvbGxvd2luZyB3YXlzOlxuICAgKiAtIEhpZGVzIGJvb2tlbmRcbiAgICogLSBIaWRlcyBhbGwgc3lzdGVtIGxheWVyIGJ1dHRvbnNcbiAgICogLSBEaXNhYmxlcyBzd2lwZS1iYXNlZCB1c2VyIGVkdWNhdGlvblxuICAgKiAtIERpc2FsbG93cyBhZHNcbiAgICogLSBVbm11dGVzIGF1ZGlvIGluIHRoZSBzdG9yeSBieSBkZWZhdWx0XG4gICAqL1xuICBOQU1FX1RCRDogMSxcbn07XG5cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHshRW1iZWRNb2RlfVxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRW1iZWRNb2RlKHN0cikge1xuICBjb25zdCBwYXJhbXMgPSBwYXJzZVF1ZXJ5U3RyaW5nKHN0cik7XG4gIGNvbnN0IHVuc2FuaXRpemVkRW1iZWRNb2RlID0gcGFyYW1zWydlbWJlZE1vZGUnXTtcbiAgY29uc3QgZW1iZWRNb2RlSW5kZXggPSBwYXJzZUludCh1bnNhbml0aXplZEVtYmVkTW9kZSwgMTApO1xuXG4gIHJldHVybiBpc0VudW1WYWx1ZShFbWJlZE1vZGUsIGVtYmVkTW9kZUluZGV4KVxuICAgID8gLyoqIEB0eXBlIHshRW1iZWRNb2RlfSAqLyAoZW1iZWRNb2RlSW5kZXgpXG4gICAgOiBFbWJlZE1vZGUuTk9UX0VNQkVEREVEO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Y3JlYXRlQ3VzdG9tRXZlbnR9IGZyb20gJy4uLy4uLy4uL3NyYy9ldmVudC1oZWxwZXInO1xuXG5cbi8qKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSAqL1xuZXhwb3J0IGNvbnN0IEV2ZW50VHlwZSA9IHtcbiAgLy8gVHJpZ2dlcmVkIHdoZW4gdGhlIGJvb2tlbmQgc2hvdWxkIGJlIG9wZW5lZFxuICBTSE9XX0JPT0tFTkQ6ICdhbXBzdG9yeTpzaG93Ym9va2VuZCcsXG5cbiAgLy8gVHJpZ2dlcmVkIHdoZW4gdGhlIHVzZXIgY2xpY2tzIHRoZSBjbG9zZSBib29rZW5kIGJ1dHRvblxuICBDTE9TRV9CT09LRU5EOiAnYW1wc3Rvcnk6Y2xvc2Vib29rZW5kJyxcblxuICAvLyBUcmlnZ2VyZWQgd2hlbiB0aGUgdXNlciBtdXRlcyB0aGUgc3RvcnlcbiAgTVVURTogJ2FtcHN0b3J5Om11dGUnLFxuXG4gIC8vIFRyaWdnZXJlZCB3aGVuIHRoZSB1c2VyIHVubXV0ZXMgdGhlIHN0b3J5XG4gIFVOTVVURTogJ2FtcHN0b3J5OnVubXV0ZScsXG5cbiAgLy8gVHJpZ2dlcmVkIHdoZW4gdGhlcmUgYXJlIGF1ZGlvIHNvdXJjZXMgcGxheWluZyBvbiB0aGUgYWN0aXZlIHBhZ2VcbiAgQVVESU9fUExBWUlORzogJ2FtcHN0b3J5OmF1ZGlvcGxheWluZycsXG5cbiAgLy8gVHJpZ2dlcmVkIHdoZW4gdGhlcmUgYXJlIG5vIGF1ZGlvIHNvdXJjZXMgcGxheWluZyBvbiB0aGUgYWN0aXZlIHBhZ2VcbiAgQVVESU9fU1RPUFBFRDogJ2FtcHN0b3J5OmF1ZGlvc3RvcHBlZCcsXG5cbiAgLy8gVHJpZ2dlcmVkIHdoZW4gdGhlIHN0b3J5IHNob3VsZCBzd2l0Y2ggdG8gYSBzcGVjaWZpZWQgcGFnZVxuICBTV0lUQ0hfUEFHRTogJ2FtcHN0b3J5OnN3aXRjaHBhZ2UnLFxuXG4gIC8vIFRyaWdnZXJlZCB3aGVuIHRoZSBzdG9yeSBzaG91bGQgc3dpdGNoIHRvIHRoZSBwcmV2aW91cyBwYWdlXG4gIFBSRVZJT1VTX1BBR0U6ICdhbXBzdG9yeTpwcmV2aW91c3BhZ2UnLFxuXG4gIC8vIFRyaWdnZXJlZCB3aGVuIHRoZSBzdG9yeSBzaG91bGQgc3dpdGNoIHRvIHRoZSBuZXh0IHBhZ2VcbiAgTkVYVF9QQUdFOiAnYW1wc3Rvcnk6bmV4dHBhZ2UnLFxuXG4gIC8vIFRyaWdnZXJlZCB3aGVuIHRoZSBzdG9yeSBzaG91bGQgbmF2aWdhdGUgYWZ0ZXIgYSB0YXAgb24gYWN0aXZlIHBhZ2UuXG4gIFRBUF9OQVZJR0FUSU9OOiAnYW1wc3Rvcnk6dGFwbmF2aWdhdGlvbicsXG5cbiAgLy8gVHJpZ2dlcmVkIHdoZW4gYSBwYWdlIHVwZGF0ZXMgaXRzIHByb2dyZXNzXG4gIFBBR0VfUFJPR1JFU1M6ICdhbXBzdG9yeTpwYWdlcHJvZ3Jlc3MnLFxuXG4gIC8vIFRyaWdnZXJlZCB3aGVuIHRoZSBzdG9yeSBzaG91bGQgYmUgcmVwbGF5ZWRcbiAgUkVQTEFZOiAnYW1wc3Rvcnk6cmVwbGF5JyxcblxuICAvLyBERVZFTE9QTUVOVCBNT0RFIE9OTFk6IFRyaWdnZXJlZCB3aGVuIGEgc3RvcnkgcGFnZSBoYXMgbG9nIGVudHJpZXMgKGUuZy5cbiAgLy8gd2FybmluZ3Mgb3IgZXJyb3JzKS5cbiAgREVWX0xPR19FTlRSSUVTX0FWQUlMQUJMRTogJ2FtcHN0b3J5OmRldmxvZ2VudHJpZXNhdmFpbGFibGUnLFxuXG4gIC8vIFRyaWdnZXJlZCB3aGVuIHVzZXIgY2xpY2tzIG9uIGxlZnQgMjUlIG9mIHRoZSBmaXJzdCBwYWdlXG4gIFNIT1dfTk9fUFJFVklPVVNfUEFHRV9IRUxQOiAnYW1wc3Rvcnk6c2hvd25vcHJldmlvdXNwYWdlaGVscCcsXG5cbiAgLy8gVHJpZ2dlcmVkIHdoZW4gYSBzdG9yeSBoYXMgbG9hZGVkIGF0IGxlYXN0IGl0cyBpbml0aWFsIHNldCBvZiBwYWdlcy5cbiAgU1RPUllfTE9BREVEOiAnYW1wc3Rvcnk6bG9hZCcsXG5cbiAgLy8gVHJpZ2dlcmVkIHdoZW4gYSBwYWdlIGhhcyBsb2FkZWQgYXQgbGVhc3Qgb25lIGZyYW1lIG9mIGFsbCBvZiBpdHMgbWVkaWEuXG4gIFBBR0VfTE9BREVEOiAnYW1wc3Rvcnk6cGFnZWxvYWQnLFxufTtcblxuXG4vKipcbiAqIEBwYXJhbSB7IUV2ZW50VGFyZ2V0fSBzb3VyY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9idWJibGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaChzb3VyY2UsIGV2ZW50TmFtZSwgb3B0X2J1YmJsZXMpIHtcbiAgY29uc3QgZXZlbnQgPSBuZXcgRXZlbnQoZXZlbnROYW1lLCB7YnViYmxlczogISFvcHRfYnViYmxlc30pO1xuICBpZiAoZXZlbnQuaW5pdEV2ZW50KSB7XG4gICAgZXZlbnQuaW5pdEV2ZW50KGV2ZW50TmFtZSwgLyogYnViYmxlcyAqLyAhIW9wdF9idWJibGVzLFxuICAgICAgICAvKiBjYW5jZWxhYmxlICovIGZhbHNlKTtcbiAgfVxuICBzb3VyY2UuZGlzcGF0Y2hFdmVudChldmVudCk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshRXZlbnRUYXJnZXR9IHNvdXJjZVxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVxuICogQHBhcmFtIHshT2JqZWN0fSBwYXlsb2FkXG4gKiBAcGFyYW0geyFDdXN0b21FdmVudEluaXQ9fSBvcHRfZXZlbnRJbml0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwYXRjaEN1c3RvbSh3aW4sIHNvdXJjZSwgZXZlbnROYW1lLCBwYXlsb2FkLCBvcHRfZXZlbnRJbml0KSB7XG4gIGNvbnN0IGV2ZW50ID0gY3JlYXRlQ3VzdG9tRXZlbnQod2luLCBldmVudE5hbWUsIHBheWxvYWQsIG9wdF9ldmVudEluaXQpO1xuICBzb3VyY2UuZGlzcGF0Y2hFdmVudChldmVudCk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtpc0pzb25MZFNjcmlwdFRhZ30gZnJvbSAnLi4vLi4vLi4vc3JjL2RvbSc7XG5pbXBvcnQge3RyeVBhcnNlSnNvbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2pzb24nO1xuaW1wb3J0IHt1c2VyfSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcblxuY29uc3QgVEFHID0gJ2dldEpzb25MZCc7XG5cbi8qKlxuICogQHBhcmFtIHshTm9kZX0gcm9vdFxuICogQHJldHVybiB7P0pzb25PYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRKc29uTGQocm9vdCkge1xuICBjb25zdCBzY3JpcHRUYWcgPSByb290LnF1ZXJ5U2VsZWN0b3IoJ3NjcmlwdFt0eXBlPVwiYXBwbGljYXRpb24vbGQranNvblwiXScpO1xuXG4gIGlmICghc2NyaXB0VGFnIHx8ICFpc0pzb25MZFNjcmlwdFRhZyhzY3JpcHRUYWcpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gdHJ5UGFyc2VKc29uKHNjcmlwdFRhZy50ZXh0Q29udGVudCwgZSA9PiB7XG4gICAgdXNlcigpLmVycm9yKFRBRywgJ0ZhaWxlZCB0byBwYXJzZSBsZCtqc29uLiBJcyBpdCB2YWxpZCBKU09OPycsIGUpO1xuICB9KSB8fCBudWxsO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge2Rldn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2RpY3R9IGZyb20gJy4vLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge3JlbmRlckFzRWxlbWVudH0gZnJvbSAnLi9zaW1wbGUtdGVtcGxhdGUnO1xuXG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IFNQSU5ORVJfQUNUSVZFX0FUVFJJQlVURSA9ICdhY3RpdmUnO1xuXG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL3NpbXBsZS10ZW1wbGF0ZS5FbGVtZW50RGVmfSAqL1xuY29uc3QgU1BJTk5FUiA9IHtcbiAgdGFnOiAnZGl2JyxcbiAgYXR0cnM6IGRpY3Qoe1xuICAgICdjbGFzcyc6ICdpLWFtcGh0bWwtc3Rvcnktc3Bpbm5lcicsXG4gICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnLFxuICAgICdhcmlhLWxhYmVsJzogJ0xvYWRpbmcgdmlkZW8nLFxuICB9KSxcbiAgY2hpbGRyZW46IFtcbiAgICB7XG4gICAgICB0YWc6ICdkaXYnLFxuICAgICAgYXR0cnM6IGRpY3Qoe1xuICAgICAgICAnY2xhc3MnOiAnaS1hbXBodG1sLXN0b3J5LXNwaW5uZXItY29udGFpbmVyJyxcbiAgICAgIH0pLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgICAgYXR0cnM6IGRpY3Qoe1xuICAgICAgICAgICAgJ2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1zcGlubmVyLWxheWVyJyxcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB0YWc6ICdkaXYnLFxuICAgICAgICAgICAgICBhdHRyczogZGljdCh7XG4gICAgICAgICAgICAgICAgJ2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1zcGlubmVyLWNpcmNsZS1jbGlwcGVyIGxlZnQnLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgICAgICAgIGF0dHJzOiBkaWN0KHtcbiAgICAgICAgICAgICAgICAnY2xhc3MnOiAnaS1hbXBodG1sLXN0b3J5LXNwaW5uZXItY2lyY2xlLWNsaXBwZXIgcmlnaHQnLFxuICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgXSxcbn07XG5cbmV4cG9ydCBjbGFzcyBMb2FkaW5nU3Bpbm5lciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRG9jdW1lbnR9ICovXG4gICAgdGhpcy5kb2NfID0gZG9jO1xuXG4gICAgLyoqIEBwdWJsaWMgez9FbGVtZW50fSAqL1xuICAgIHRoaXMucm9vdF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuaXNBY3RpdmVfID0gZmFsc2U7XG4gIH1cblxuICBidWlsZCgpIHtcbiAgICBpZiAodGhpcy5yb290Xykge1xuICAgICAgcmV0dXJuIHRoaXMucm9vdF87XG4gICAgfVxuXG4gICAgdGhpcy5yb290XyA9IHJlbmRlckFzRWxlbWVudCh0aGlzLmRvY18sIFNQSU5ORVIpO1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0Um9vdCgpO1xuICB9XG5cbiAgLyoqIEByZXR1cm4geyFFbGVtZW50fSAqL1xuICBnZXRSb290KCkge1xuICAgIHJldHVybiBkZXYoKS5hc3NlcnRFbGVtZW50KHRoaXMucm9vdF8pO1xuICB9XG5cbiAgLyoqIEBwYXJhbSB7Ym9vbGVhbn0gaXNBY3RpdmUgKi9cbiAgdG9nZ2xlKGlzQWN0aXZlKSB7XG4gICAgaWYgKGlzQWN0aXZlID09PSB0aGlzLmlzQWN0aXZlXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgIHRoaXMucm9vdF8uc2V0QXR0cmlidXRlKFNQSU5ORVJfQUNUSVZFX0FUVFJJQlVURSwgJycpO1xuICAgICAgdGhpcy5yb290Xy5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9vdF8ucmVtb3ZlQXR0cmlidXRlKFNQSU5ORVJfQUNUSVZFX0FUVFJJQlVURSk7XG4gICAgICB0aGlzLnJvb3RfLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xuICAgIH1cbiAgICB0aGlzLmlzQWN0aXZlXyA9IGlzQWN0aXZlO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7TG9nTGV2ZWwsIGRldn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge3Njb3BlZFF1ZXJ5U2VsZWN0b3JBbGx9IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuXG5cbi8qKiBAdHlwZWRlZiB7ZnVuY3Rpb24oIUVsZW1lbnQpOiAoYm9vbGVhbnwhUHJvbWlzZTxib29sZWFuPil9ICovXG5sZXQgRWxlbWVudFByZWRpY2F0ZURlZjtcblxuLyoqXG4gKiBBIGxvZyB0eXBlIGlzIGFuIGFic3RyYWN0IHJ1bGUgb3IgYmVzdCBwcmFjdGljZSB0aGF0IHNob3VsZCBiZSBmb2xsb3dlZCB3aGVuXG4gKiBjb25zdHJ1Y3RpbmcgYSBzdG9yeS4gIFRoaXMgaXMgaW50ZXJuYWwgdG8gdGhpcyBmaWxlLCB3aGljaCBoYW5kbGVzIGZpbmRpbmdcbiAqIHNwZWNpZmljIGluc3RhbmNlcyBvZiB0aGVzZSBsb2cgdHlwZXMsIGFuZCByZXR1cm5pbmcgdGhlbSBhcyBsb2cgZW50cmllcy5cbiAqXG4gKiBtZXNzYWdlOiAocmVxdWlyZWQpIFRoZSBtZXNzYWdlIHNob3duIHRvIGRldmVsb3BlcnMgaW4gZGV2ZWxvcG1lbnQgbW9kZSBpZlxuICogICAgIHRoZSBiZXN0IHByYWN0aWNlIGlzIG5vdCBmb2xsb3dlZC5cbiAqIGxldmVsOiAocmVxdWlyZWQpIFRoZSBsb2cgbGV2ZWwgYXQgd2hpY2ggdGhpcyBlbnRyeSBzaG91bGQgYmUgbG9nZ2VkLlxuICogbW9yZUluZm86IChvcHRpb25hbCkgQSBVUkwgdG8gYSBwYWdlIGNvbnRhaW5pbmcgYWRkaXRpb25hbCBkb2N1bWVudGF0aW9uIG9uXG4gKiAgICAgdGhlIGJlc3QgcHJhY3RpY2UuXG4gKiBzZWxlY3RvcjogKG9wdGlvbmFsKSBBIHNlbGVjdG9yIHRvIGJlIHF1ZXJpZWQgb24gdGhlIGN1cnJlbnRseS1hY3RpdmUgcGFnZSxcbiAqICAgICBhbmQgd2hvc2UgcmVzdWx0cyB3aWxsIGJlIHN1YmplY3QgdG8gdGhlIGJlc3QgcHJhY3RpY2UgKGdpdmVuIHRoYXQgdGhleVxuICogICAgIGFsc28gbWF0Y2ggdGhlIHByZWNvbmRpdGlvbikuICBJZiB1bnNwZWNpZmllZCwgdGhlIGFtcC1zdG9yeS1wYWdlIGl0c2VsZlxuICogICAgIGlzIGFzc3VtZWQgdG8gYmUgc3ViamVjdCB0byB0aGUgYmVzdCBwcmFjdGljZS5cbiAqIHByZWNvbmRpdGlvbjogKG9wdGlvbmFsKSBBIHByZWRpY2F0ZSB0aGF0IHRha2VzIGFuIGVsZW1lbnQgYW5kIHJldHVybnMgdHJ1ZVxuICogICAgIGlmIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBzaG91bGQgYmUgc3ViamVjdCB0byB0aGUgYmVzdCBwcmFjdGljZS4gIElmXG4gKiAgICAgdW5zcGVjaWZpZWQsIGFsbCBlbGVtZW50cyB0aGF0IG1hdGNoIHRoZSBzZWxlY3RvciBhcmUgc3ViamVjdCB0byB0aGUgYmVzdFxuICogICAgIHByYWN0aWNlLlxuICogcHJlZGljYXRlOiAob3B0aW9uYWwpIEEgcHJlZGljYXRlIHRoYXQgdGFrZXMgYW4gZWxlbWVudCBhbmQgcmV0dXJucyB0cnVlIGlmXG4gKiAgICAgdGhlIGVsZW1lbnQgZm9sbG93cyB0aGUgYmVzdCBwcmFjdGljZSwgb3IgZmFsc2Ugb3RoZXJ3aXNlLiAgSWZcbiAqICAgICB1bnNwZWNpZmllZCwgYWxsIGVsZW1lbnRzIGFyZSBhc3N1bWVkIG5vdCB0byBmb2xsb3cgdGhlIGJlc3QgcHJhY3RpY2UuXG4gKlxuICogQHR5cGVkZWYge3tcbiAqICAgbWVzc2FnZTogc3RyaW5nLFxuICogICBsZXZlbDogIUxvZ0xldmVsLFxuICogICBtb3JlSW5mbzogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBzZWxlY3RvcjogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBwcmVjb25kaXRpb246ICghRWxlbWVudFByZWRpY2F0ZURlZnx1bmRlZmluZWQpLFxuICogICBwcmVkaWNhdGU6ICghRWxlbWVudFByZWRpY2F0ZURlZnx1bmRlZmluZWQpLFxuICogfX1cbiAqL1xubGV0IEFtcFN0b3J5TG9nVHlwZURlZjtcblxuXG4vKipcbiAqIEEgbG9nIGVudHJ5IGlzIGEgbW9yZSBjb25jcmV0ZSB2ZXJzaW9uIG9mIGEgcnVsZSBvciBiZXN0IHByYWN0aWNlOyBpdCByZWZlcnNcbiAqIHRvIHdoZXRoZXIgYSBzcGVjaWZpYyBlbGVtZW50IG9uIGEgc3BlY2lmaWMgcGFnZSBvZiBhIHNwZWNpZmljIHN0b3J5IGNvbmZvcm1zXG4gKiB0byBhIGdpdmVuIGJlc3QgcHJhY3RpY2UuXG4gKlxuICogQHR5cGVkZWYge3tcbiAqICAgZWxlbWVudDogIUVsZW1lbnQsXG4gKiAgIHJvb3RFbGVtZW50OiAhRWxlbWVudCxcbiAqICAgbWVzc2FnZTogc3RyaW5nLFxuICogICBsZXZlbDogIUxvZ0xldmVsLFxuICogICBjb25mb3JtczogYm9vbGVhbixcbiAqICAgbW9yZUluZm86IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgQW1wU3RvcnlMb2dFbnRyeURlZjtcblxuXG4vKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBBTVBQUk9KRUNUX0RPQ1MgPSAnaHR0cHM6Ly93d3cuYW1wcHJvamVjdC5vcmcvZG9jcyc7XG5cblxuZnVuY3Rpb24gZ2V0UG9zdGVyRnJvbVZpZGVvKGVsKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgcG9zdGVyID0gbmV3IEltYWdlKCk7XG4gICAgcG9zdGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUocG9zdGVyKTtcbiAgICBwb3N0ZXIub25lcnJvciA9IHJlamVjdDtcbiAgICBwb3N0ZXIuc3JjID0gZWwuZ2V0QXR0cmlidXRlKCdwb3N0ZXInKTtcbiAgfSk7XG59XG5cbi8qKiBAZW51bSB7IUFtcFN0b3J5TG9nVHlwZURlZn0gKi9cbmNvbnN0IExvZ1R5cGUgPSB7XG4gIC8qKiBFcnJvcnMgKi9cbiAgVklERU9TX1BPU1RFUl9TUEVDSUZJRUQ6IHtcbiAgICBtZXNzYWdlOiAnVmlkZW9zIHNob3VsZCBzcGVjaWZ5IGEgcG9zdGVyIGltYWdlLicsXG4gICAgbW9yZUluZm86IEFNUFBST0pFQ1RfRE9DUyArICcvcmVmZXJlbmNlL2NvbXBvbmVudHMvYW1wLXZpZGVvI3Bvc3RlcicsXG4gICAgc2VsZWN0b3I6ICd2aWRlbzpub3QoW3Bvc3Rlcl0pJyxcbiAgICBsZXZlbDogTG9nTGV2ZWwuRVJST1IsXG4gIH0sXG5cbiAgLyoqIFdhcm5pbmdzICovXG4gIElNQUdFU19NQVhfNzIwUF9PUl9TUkNTRVQ6IHtcbiAgICBtZXNzYWdlOiAnSW1hZ2VzIHNob3VsZCBub3QgYmUgbGFyZ2VyIHRoYW4gNzIwcC4gIElmIHlvdSB3aXNoIHRvIHVzZScgK1xuICAgICAgICAnIGltYWdlcyB0aGF0IGFyZSBsYXJnZXIgdGhhbiA3MjBwLCB5b3Ugc2hvdWxkIHNwZWNpZnkgYSBzcmNzZXQuJyxcbiAgICBtb3JlSW5mbzogQU1QUFJPSkVDVF9ET0NTICsgJy9ndWlkZXMvcmVzcG9uc2l2ZS9hcnRfZGlyZWN0aW9uI3NyY3NldCcsXG4gICAgc2VsZWN0b3I6ICdpbWc6bm90KFtzcmNzZXRdKScsXG4gICAgcHJlZGljYXRlOiBlbCA9PiBlbC5uYXR1cmFsV2lkdGggPD0gNzIwICYmIGVsLm5hdHVyYWxIZWlnaHQgPD0gMTI4MCxcbiAgICBsZXZlbDogTG9nTGV2ZWwuV0FSTixcbiAgfSxcblxuICBJTUFHRVNfUE9SVFJBSVQ6IHtcbiAgICBtZXNzYWdlOiAnRnVsbC1ibGVlZCBpbWFnZXMgc2hvdWxkIGJlIGluIHBvcnRyYWl0IG9yaWVudGF0aW9uLicsXG4gICAgc2VsZWN0b3I6ICdhbXAtc3RvcnktZ3JpZC1sYXllclt0ZW1wbGF0ZT1cImZpbGxcIl0gPiBhbXAtaW1nID4gaW1nJyxcbiAgICBwcmVkaWNhdGU6IGVsID0+IGVsLm5hdHVyYWxXaWR0aCA8IGVsLm5hdHVyYWxIZWlnaHQsXG4gICAgbGV2ZWw6IExvZ0xldmVsLldBUk4sXG4gIH0sXG5cbiAgVklERU9TX01BWF83MjBQOiB7XG4gICAgbWVzc2FnZTogJ1ZpZGVvcyBzaG91bGQgbm90IGJlIGxhcmdlciB0aGFuIDcyMHAuJyxcbiAgICBzZWxlY3RvcjogJ3ZpZGVvJyxcbiAgICBwcmVkaWNhdGU6IGVsID0+IGVsLnZpZGVvV2lkdGggPD0gNzIwICYmIGVsLnZpZGVvSGVpZ2h0IDw9IDEyODAsXG4gICAgbGV2ZWw6IExvZ0xldmVsLldBUk4sXG4gIH0sXG5cbiAgVklERU9TX1BPUlRSQUlUOiB7XG4gICAgbWVzc2FnZTogJ0Z1bGwtYmxlZWQgdmlkZW9zIHNob3VsZCBiZSBpbiBwb3J0cmFpdCBvcmllbnRhdGlvbi4nLFxuICAgIHNlbGVjdG9yOiAnYW1wLXN0b3J5LWdyaWQtbGF5ZXJbdGVtcGxhdGU9XCJmaWxsXCJdID4gYW1wLXZpZGVvID4gdmlkZW8nLFxuICAgIHByZWRpY2F0ZTogZWwgPT4gZWwudmlkZW9XaWR0aCA8IGVsLnZpZGVvSGVpZ2h0LFxuICAgIGxldmVsOiBMb2dMZXZlbC5XQVJOLFxuICB9LFxuXG4gIFZJREVPX1BPU1RFUl9NQVhfNzIwUDoge1xuICAgIG1lc3NhZ2U6ICdWaWRlbyBwb3N0ZXIgaW1hZ2VzIHNob3VsZCBub3QgYmUgbGFyZ2VyIHRoYW4gNzIwcC4nLFxuICAgIHNlbGVjdG9yOiAndmlkZW9bcG9zdGVyXScsXG4gICAgcHJlZGljYXRlOiBlbCA9PiBnZXRQb3N0ZXJGcm9tVmlkZW8oZWwpXG4gICAgICAgIC50aGVuKHBvc3RlciA9PiB7XG4gICAgICAgICAgcmV0dXJuIHBvc3Rlci5uYXR1cmFsV2lkdGggPD0gNzIwICYmIHBvc3Rlci5uYXR1cmFsSGVpZ2h0IDw9IDEyODA7XG4gICAgICAgIH0pLFxuICAgIGxldmVsOiBMb2dMZXZlbC5XQVJOLFxuICB9LFxuXG4gIFZJREVPX1BPU1RFUl9QT1RSQUlUOiB7XG4gICAgbWVzc2FnZTogJ1Bvc3RlciBpbWFnZXMgZm9yIGZ1bGwtYmxlZWQgdmlkZW9zIHNob3VsZCBiZSBpbiBwb3J0cmFpdCAnICtcbiAgICAgICAgJ29yaWVudGF0aW9uLicsXG4gICAgc2VsZWN0b3I6ICdhbXAtc3RvcnktZ3JpZC1sYXllclt0ZW1wbGF0ZT1cImZpbGxcIl0gPiBhbXAtdmlkZW8gPiAnICtcbiAgICAgICAgJ3ZpZGVvW3Bvc3Rlcl0nLFxuICAgIHByZWRpY2F0ZTogZWwgPT4gZ2V0UG9zdGVyRnJvbVZpZGVvKGVsKVxuICAgICAgICAudGhlbihwb3N0ZXIgPT4gcG9zdGVyLm5hdHVyYWxXaWR0aCA8IHBvc3Rlci5uYXR1cmFsSGVpZ2h0KSxcbiAgICBsZXZlbDogTG9nTGV2ZWwuV0FSTixcbiAgfSxcbn07XG5cblxuLyoqXG4gKiBHZXRzIHRoZSBsb2cgdHlwZSBhc3NvY2lhdGVkIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gKiBAcGFyYW0ge3N0cmluZ30gbG9nVHlwZUtleVxuICogQHJldHVybiB7IUFtcFN0b3J5TG9nVHlwZURlZn1cbiAqL1xuZnVuY3Rpb24gZ2V0TG9nVHlwZShsb2dUeXBlS2V5KSB7XG4gIGNvbnN0IGxvZ1R5cGUgPSBMb2dUeXBlW2xvZ1R5cGVLZXldO1xuICBkZXYoKS5hc3NlcnQobG9nVHlwZSwgYFRoZXJlIGlzIG5vIGxvZyB0eXBlIFwiJHtsb2dUeXBlS2V5fVwiLmApO1xuICBkZXYoKS5hc3NlcnQobG9nVHlwZS5tZXNzYWdlLFxuICAgICAgYExvZyB0eXBlIFwiJHtsb2dUeXBlS2V5fVwiIGhhcyBubyBhc3NvY2lhdGVkIG1lc3NhZ2UuYCk7XG4gIGRldigpLmFzc2VydChsb2dUeXBlLmxldmVsLFxuICAgICAgYExvZyB0eXBlIFwiJHtsb2dUeXBlS2V5fVwiIGhhcyBubyBhc3NvY2lhdGVkIGxvZyBsZXZlbC5gKTtcblxuICByZXR1cm4gbG9nVHlwZTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHJvb3RFbGVtZW50XG4gKiBAcGFyYW0geyFBbXBTdG9yeUxvZ1R5cGVEZWZ9IGxvZ1R5cGVcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4geyFQcm9taXNlPCFBbXBTdG9yeUxvZ0VudHJ5RGVmPn1cbiAqL1xuZnVuY3Rpb24gZ2V0TG9nRW50cnkocm9vdEVsZW1lbnQsIGxvZ1R5cGUsIGVsZW1lbnQpIHtcbiAgY29uc3QgcHJlZGljYXRlID0gbG9nVHlwZS5wcmVkaWNhdGUgfHwgKHVudXNlZEVsID0+IGZhbHNlKTtcblxuICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByZWRpY2F0ZShlbGVtZW50KSlcbiAgICAgIC50aGVuKGNvbmZvcm1zID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgcm9vdEVsZW1lbnQsXG4gICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgY29uZm9ybXMsXG4gICAgICAgICAgICBsZXZlbDogbG9nVHlwZS5sZXZlbCxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGxvZ1R5cGUubWVzc2FnZSxcbiAgICAgICAgICAgIG1vcmVJbmZvOiBsb2dUeXBlLm1vcmVJbmZvLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshRWxlbWVudH0gcm9vdEVsZW1lbnRcbiAqIEBwYXJhbSB7IUFtcFN0b3J5TG9nVHlwZURlZn0gbG9nVHlwZVxuICogQHJldHVybiB7IUFycmF5PCFQcm9taXNlPCFBbXBTdG9yeUxvZ0VudHJ5RGVmPj59XG4gKi9cbmZ1bmN0aW9uIGdldExvZ0VudHJpZXNGb3JUeXBlKHJvb3RFbGVtZW50LCBsb2dUeXBlKSB7XG4gIGNvbnN0IHByZWNvbmRpdGlvbiA9IGxvZ1R5cGUucHJlY29uZGl0aW9uIHx8ICh1bnVzZWRFbCA9PiB0cnVlKTtcblxuICBjb25zdCBlbGVtZW50cyA9IGxvZ1R5cGUuc2VsZWN0b3IgP1xuICAgIFtdLnNsaWNlLmNhbGwoc2NvcGVkUXVlcnlTZWxlY3RvckFsbChyb290RWxlbWVudCwgbG9nVHlwZS5zZWxlY3RvcikpIDpcbiAgICBbcm9vdEVsZW1lbnRdO1xuXG4gIHJldHVybiBlbGVtZW50c1xuICAgICAgLmZpbHRlcihwcmVjb25kaXRpb24pXG4gICAgICAubWFwKGdldExvZ0VudHJ5LmJpbmQoLyoqIHRoaXNBcmcgKi8gbnVsbCwgcm9vdEVsZW1lbnQsIGxvZ1R5cGUpKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFBbXBTdG9yeUxvZ0VudHJ5RGVmfSBsb2dFbnRyeUFcbiAqIEBwYXJhbSB7IUFtcFN0b3J5TG9nRW50cnlEZWZ9IGxvZ0VudHJ5QlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBsb2dFbnRyeUNvbXBhcmVGbihsb2dFbnRyeUEsIGxvZ0VudHJ5Qikge1xuICBpZiAobG9nRW50cnlBLmNvbmZvcm1zID09IGxvZ0VudHJ5Qi5jb25mb3Jtcykge1xuICAgIC8vIEZvciBlbnRyaWVzIHdpdGhpbiB0aGF0IGFyZSBhbGwgY29uZm9ybWFudCBvciBhbGwgbm9uLWNvbmZvcm1hbnQsIHNvcnQgYnlcbiAgICAvLyBsb2cgbGV2ZWwsIHdpdGggbW9zdCBzZXZlcmUgZW50cmllcyBmaXJzdCBhbmQgbGVhc3Qgc2V2ZXJlIGVudHJpZXMgbGFzdC5cbiAgICByZXR1cm4gbG9nRW50cnlBLmxldmVsIDw9IGxvZ0VudHJ5Qi5sZXZlbCA/IC0xIDogMTtcbiAgfSBlbHNlIHtcbiAgICAvLyBmYWxzZSA8IHRydWUsIHNvIG5vbi1jb25mb3JtYW50IGlzc3VlcyBnbyBiZWZvcmUgY29uZm9ybWFudCBvbmVzLlxuICAgIHJldHVybiBsb2dFbnRyeUEuY29uZm9ybXMgPCBsb2dFbnRyeUIuY29uZm9ybXMgPyAtMSA6IDE7XG4gIH1cbn1cblxuXG4vKipcbiAqIEdldHMgYSBwcm9taXNlIHdoaWNoIHlpZWxkcyBhIGxpc3Qgb2YgbG9nIGVudHJpZXMgZm9yIHRoZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHJvb3RFbGVtZW50XG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhQXJyYXk8IUFtcFN0b3J5TG9nRW50cnlEZWY+Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExvZ0VudHJpZXMocm9vdEVsZW1lbnQpIHtcbiAgY29uc3QgbG9nRW50cnlQcm9taXNlcyA9IE9iamVjdC5rZXlzKExvZ1R5cGUpLnJlZHVjZSgoZW50cmllcywga2V5KSA9PiB7XG4gICAgY29uc3QgbG9nVHlwZSA9IGdldExvZ1R5cGUoa2V5KTtcbiAgICBjb25zdCBuZXdFbnRyaWVzID0gZ2V0TG9nRW50cmllc0ZvclR5cGUocm9vdEVsZW1lbnQsIGxvZ1R5cGUpO1xuICAgIHJldHVybiBlbnRyaWVzLmNvbmNhdChuZXdFbnRyaWVzKTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiBQcm9taXNlLmFsbChsb2dFbnRyeVByb21pc2VzKVxuICAgICAgLnRoZW4obG9nRW50cmllcyA9PiB7XG4gICAgICAgIHJldHVybiBsb2dFbnRyaWVzLnNvcnQobG9nRW50cnlDb21wYXJlRm4pO1xuICAgICAgfSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtCTEFOS19BVURJT19TUkMsIEJMQU5LX1ZJREVPX1NSQ30gZnJvbSAnLi9kZWZhdWx0LW1lZGlhJztcbmltcG9ydCB7XG4gIEJsZXNzVGFzayxcbiAgRUxFTUVOVF9CTEVTU0VEX1BST1BFUlRZX05BTUUsXG4gIExvYWRUYXNrLFxuICBNdXRlVGFzayxcbiAgUGF1c2VUYXNrLFxuICBQbGF5VGFzayxcbiAgUmV3aW5kVGFzayxcbiAgU3dhcEludG9Eb21UYXNrLFxuICBTd2FwT3V0T2ZEb21UYXNrLFxuICBVbm11dGVUYXNrLFxuICBVcGRhdGVTb3VyY2VzVGFzayxcbn0gZnJvbSAnLi9tZWRpYS10YXNrcyc7XG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMnO1xuaW1wb3J0IHtTb3VyY2VzfSBmcm9tICcuL3NvdXJjZXMnO1xuaW1wb3J0IHthbXBNZWRpYUVsZW1lbnRGb3J9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuaW1wb3J0IHtmaW5kSW5kZXh9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9hcnJheSc7XG5pbXBvcnQge2lzQ29ubmVjdGVkTm9kZX0gZnJvbSAnLi4vLi4vLi4vc3JjL2RvbSc7XG5pbXBvcnQge3RvV2lufSBmcm9tICcuLi8uLi8uLi9zcmMvdHlwZXMnO1xuXG5cbi8qKiBAY29uc3QgQGVudW0ge3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBNZWRpYVR5cGUgPSB7XG4gIFVOU1VQUE9SVEVEOiAndW5zdXBwb3J0ZWQnLFxuICBBVURJTzogJ2F1ZGlvJyxcbiAgVklERU86ICd2aWRlbycsXG59O1xuXG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgZGlzdGFuY2Ugb2YgYW4gZWxlbWVudCBmcm9tIHRoZSBjdXJyZW50IHBsYWNlIGluIHRoZSBkb2N1bWVudC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbighSFRNTE1lZGlhRWxlbWVudCk6IG51bWJlcn1cbiAqL1xuZXhwb3J0IGxldCBFbGVtZW50RGlzdGFuY2VGbkRlZjtcblxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSB0YXNrIHRvIGJlIGV4ZWN1dGVkIG9uIGEgbWVkaWEgZWxlbWVudC5cbiAqIEB0eXBlZGVmIHtmdW5jdGlvbighSFRNTE1lZGlhRWxlbWVudCwgKik6ICFQcm9taXNlfVxuICovXG5sZXQgRWxlbWVudFRhc2tEZWY7XG5cblxuLyoqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuY29uc3QgRE9NX01FRElBX0VMRU1FTlRfSURfUFJFRklYID0gJ2ktYW1waHRtbC1tZWRpYS0nO1xuXG5cbi8qKlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbmNvbnN0IFBPT0xfTUVESUFfRUxFTUVOVF9QUk9QRVJUWV9OQU1FID0gJ19fQU1QX01FRElBX1BPT0xfSURfXyc7XG5cblxuLyoqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuY29uc3QgRUxFTUVOVF9UQVNLX1FVRVVFX1BST1BFUlRZX05BTUUgPSAnX19BTVBfTUVESUFfRUxFTUVOVF9UQVNLU19fJztcblxuXG4vKipcbiAqIFRoZSBuYW1lIGZvciBhIHN0cmluZyBhdHRyaWJ1dGUgdGhhdCByZXByZXNlbnRzIHRoZSBJRCBvZiBhIG1lZGlhIGVsZW1lbnRcbiAqIHRoYXQgdGhlIGVsZW1lbnQgY29udGFpbmluZyB0aGlzIGF0dHJpYnV0ZSByZXBsYWNlZC5cbiAqIEBjb25zdCB7c3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgUkVQTEFDRURfTUVESUFfUFJPUEVSVFlfTkFNRSA9ICdyZXBsYWNlZC1tZWRpYSc7XG5cblxuLyoqXG4gKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsICFNZWRpYVBvb2w+fVxuICovXG5jb25zdCBpbnN0YW5jZXMgPSB7fTtcblxuXG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cbmxldCBuZXh0SW5zdGFuY2VJZCA9IDA7XG5cblxubGV0IGVsSWQgPSAwO1xuXG5cbmV4cG9ydCBjbGFzcyBNZWRpYVBvb2wge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW4gVGhlIHdpbmRvdyBvYmplY3QuXG4gICAqIEBwYXJhbSB7IU9iamVjdDwhTWVkaWFUeXBlLCBudW1iZXI+fSBtYXhDb3VudHMgVGhlIG1heGltdW0gYW1vdW50IG9mIGVhY2hcbiAgICogICAgIG1lZGlhIGVsZW1lbnQgdGhhdCBjYW4gYmUgYWxsb2NhdGVkIGJ5IHRoZSBwb29sLlxuICAgKiBAcGFyYW0geyFFbGVtZW50RGlzdGFuY2VGbkRlZn0gZGlzdGFuY2VGbiBBIGZ1bmN0aW9uIHRoYXQsIGdpdmVuIGFuXG4gICAqICAgICBlbGVtZW50LCByZXR1cm5zIHRoZSBkaXN0YW5jZSBvZiB0aGF0IGVsZW1lbnQgZnJvbSB0aGUgY3VycmVudCBwb3NpdGlvblxuICAgKiAgICAgaW4gdGhlIGRvY3VtZW50LiAgVGhlIGRlZmluaXRpb24gb2YgXCJkaXN0YW5jZVwiIGNhbiBiZSBpbXBsZW1lbnRhdGlvbi1cbiAgICogICAgIGRlcGVuZGFudCwgYXMgbG9uZyBhcyBpdCBpcyBjb25zaXN0ZW50IGJldHdlZW4gaW52b2NhdGlvbnMuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4sIG1heENvdW50cywgZGlzdGFuY2VGbikge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3RpbWVyLWltcGwuVGltZXJ9ICovXG4gICAgdGhpcy50aW1lcl8gPSBTZXJ2aWNlcy50aW1lckZvcih3aW4pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3ZzeW5jLWltcGwuVnN5bmN9ICovXG4gICAgdGhpcy52c3luY18gPSBTZXJ2aWNlcy52c3luY0Zvcih3aW4pO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGZ1bmN0aW9uIHVzZWQgdG8gcmV0cmlldmUgdGhlIGRpc3RhbmNlIGJldHdlZW4gYW4gZWxlbWVudCBhbmQgdGhlXG4gICAgICogY3VycmVudCBwb3NpdGlvbiBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICogQHByaXZhdGUgQGNvbnN0IHshRWxlbWVudERpc3RhbmNlRm5EZWZ9XG4gICAgICovXG4gICAgdGhpcy5kaXN0YW5jZUZuXyA9IGRpc3RhbmNlRm47XG5cbiAgICAvKipcbiAgICAgKiBIb2xkcyBhbGwgb2YgdGhlIG1lZGlhIGVsZW1lbnRzIHRoYXQgaGF2ZSBiZWVuIGFsbG9jYXRlZC5cbiAgICAgKiBAY29uc3QgeyFPYmplY3Q8IU1lZGlhVHlwZSwgIUFycmF5PCFIVE1MTWVkaWFFbGVtZW50Pj59XG4gICAgICogQHZpc2libGVGb3JUZXN0aW5nXG4gICAgICovXG4gICAgdGhpcy5hbGxvY2F0ZWQgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIEhvbGRzIGFsbCBvZiB0aGUgbWVkaWEgZWxlbWVudHMgdGhhdCBoYXZlIG5vdCBiZWVuIGFsbG9jYXRlZC5cbiAgICAgKiBAY29uc3QgeyFPYmplY3Q8IU1lZGlhVHlwZSwgIUFycmF5PCFIVE1MTWVkaWFFbGVtZW50Pj59XG4gICAgICogQHZpc2libGVGb3JUZXN0aW5nXG4gICAgICovXG4gICAgdGhpcy51bmFsbG9jYXRlZCA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogTWFwcyBhIG1lZGlhIGVsZW1lbnQncyBJRCB0byB0aGUgb2JqZWN0IGNvbnRhaW5pbmcgaXRzIHNvdXJjZXMuXG4gICAgICogQHByaXZhdGUgQGNvbnN0IHshT2JqZWN0PHN0cmluZywgIVNvdXJjZXM+fVxuICAgICAqL1xuICAgIHRoaXMuc291cmNlc18gPSB7fTtcblxuICAgIC8qKlxuICAgICAqIE1hcHMgYSBtZWRpYSBlbGVtZW50J3MgSUQgdG8gdGhlIGVsZW1lbnQuICBUaGlzIGlzIG5lY2Vzc2FyeSwgYXMgZWxlbWVudHNcbiAgICAgKiBhcmUga2VwdCBpbiBtZW1vcnkgd2hlbiB0aGV5IGFyZSBzd2FwcGVkIG91dCBvZiB0aGUgRE9NLlxuICAgICAqIEBwcml2YXRlIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsICFIVE1MTWVkaWFFbGVtZW50Pn1cbiAgICAgKi9cbiAgICB0aGlzLmRvbU1lZGlhRWxzXyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogQ291bnRlciB1c2VkIHRvIHByb2R1Y2UgdW5pcXVlIElEcyBmb3IgbWVkaWEgZWxlbWVudHMuXG4gICAgICogQHByaXZhdGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmlkQ291bnRlcl8gPSAwO1xuXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGUgbWVkaWEgZWxlbWVudHMgaW4gdGhpcyBNZWRpYVBvb2wgaW5zdGFuY2UgaGF2ZSBiZWVuIFwiYmxlc3NlZFwiXG4gICAgICogZm9yIHVubXV0ZWQgcGxheWJhY2sgd2l0aG91dCB1c2VyIGdlc3R1cmUuXG4gICAgICogQHByaXZhdGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGhpcy5ibGVzc2VkXyA9IGZhbHNlO1xuXG4gICAgLyoqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsIChmdW5jdGlvbigpOiAhSFRNTE1lZGlhRWxlbWVudCk+fSAqL1xuICAgIHRoaXMubWVkaWFGYWN0b3J5XyA9IHtcbiAgICAgIFtNZWRpYVR5cGUuQVVESU9dOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGF1ZGlvRWwgPSB0aGlzLndpbl8uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbiAgICAgICAgYXVkaW9FbC5zZXRBdHRyaWJ1dGUoJ211dGVkJywgJycpO1xuICAgICAgICBhdWRpb0VsLm11dGVkID0gdHJ1ZTtcbiAgICAgICAgYXVkaW9FbC5jbGFzc0xpc3QuYWRkKCdpLWFtcGh0bWwtcG9vbC1tZWRpYScpO1xuICAgICAgICBhdWRpb0VsLmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1wb29sLWF1ZGlvJyk7XG4gICAgICAgIHJldHVybiBhdWRpb0VsO1xuICAgICAgfSxcbiAgICAgIFtNZWRpYVR5cGUuVklERU9dOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHZpZGVvRWwgPSB0aGlzLndpbl8uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbiAgICAgICAgdmlkZW9FbC5zZXRBdHRyaWJ1dGUoJ211dGVkJywgJycpO1xuICAgICAgICB2aWRlb0VsLm11dGVkID0gdHJ1ZTtcbiAgICAgICAgdmlkZW9FbC5zZXRBdHRyaWJ1dGUoJ3BsYXlzaW5saW5lJywgJycpO1xuICAgICAgICB2aWRlb0VsLmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1wb29sLW1lZGlhJyk7XG4gICAgICAgIHZpZGVvRWwuY2xhc3NMaXN0LmFkZCgnaS1hbXBodG1sLXBvb2wtdmlkZW8nKTtcbiAgICAgICAgcmV0dXJuIHZpZGVvRWw7XG4gICAgICB9LFxuICAgIH07XG5cbiAgICB0aGlzLmluaXRpYWxpemVNZWRpYVBvb2xfKG1heENvdW50cyk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBGaWxscyB0aGUgbWVkaWEgcG9vbCBieSBjcmVhdGluZyB0aGUgbWF4aW11bSBudW1iZXIgb2YgbWVkaWEgZWxlbWVudHMgZm9yXG4gICAqIGVhY2ggb2YgdGhlIHR5cGVzIG9mIG1lZGlhIGVsZW1lbnRzLiAgV2UgbmVlZCB0byBjcmVhdGUgdGhlc2UgZWFnZXJseSBzb1xuICAgKiB0aGF0IGFsbCBtZWRpYSBlbGVtZW50cyBleGlzdCBieSB0aGUgdGltZSB0aGF0IGJsZXNzQWxsKCkgaXMgaW52b2tlZCxcbiAgICogdGhlcmVieSBcImJsZXNzaW5nXCIgYWxsIG1lZGlhIGVsZW1lbnRzIGZvciBwbGF5YmFjayB3aXRob3V0IHVzZXIgZ2VzdHVyZS5cbiAgICogQHBhcmFtIHshT2JqZWN0PCFNZWRpYVR5cGUsIG51bWJlcj59IG1heENvdW50cyBUaGUgbWF4aW11bSBhbW91bnQgb2YgZWFjaFxuICAgKiAgICAgbWVkaWEgZWxlbWVudCB0aGF0IGNhbiBiZSBhbGxvY2F0ZWQgYnkgdGhlIHBvb2wuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpbml0aWFsaXplTWVkaWFQb29sXyhtYXhDb3VudHMpIHtcbiAgICB0aGlzLmZvckVhY2hNZWRpYVR5cGVfKGtleSA9PiB7XG4gICAgICBjb25zdCB0eXBlID0gTWVkaWFUeXBlW2tleV07XG4gICAgICBjb25zdCBjb3VudCA9IG1heENvdW50c1t0eXBlXSB8fCAwO1xuICAgICAgdGhpcy5hbGxvY2F0ZWRbdHlwZV0gPSBbXTtcbiAgICAgIHRoaXMudW5hbGxvY2F0ZWRbdHlwZV0gPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgICB0aGlzLnZzeW5jXy5tdXRhdGUoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IG1lZGlhRWwgPSB0aGlzLm1lZGlhRmFjdG9yeV9bdHlwZV0uY2FsbCh0aGlzKTtcbiAgICAgICAgICBtZWRpYUVsLnNldEF0dHJpYnV0ZSgncG9vbC1lbGVtZW50JywgZWxJZCsrKTtcbiAgICAgICAgICBjb25zdCBzb3VyY2VzID0gdGhpcy5nZXREZWZhdWx0U291cmNlXyh0eXBlKTtcbiAgICAgICAgICB0aGlzLmVucXVldWVNZWRpYUVsZW1lbnRUYXNrXyhtZWRpYUVsLFxuICAgICAgICAgICAgICBuZXcgVXBkYXRlU291cmNlc1Rhc2soc291cmNlcywgdGhpcy52c3luY18pKTtcbiAgICAgICAgICAvLyBUT0RPKG5ld211aXMpOiBDaGVjayB0aGUgJ2Vycm9yJyBmaWVsZCB0byBzZWUgaWYgTUVESUFfRVJSX0RFQ09ERVxuICAgICAgICAgIC8vIGlzIHJldHVybmVkLiAgSWYgc28sIHdlIHNob3VsZCBhZGp1c3QgdGhlIHBvb2wgc2l6ZS9kaXN0cmlidXRpb25cbiAgICAgICAgICAvLyBiZXR3ZWVuIG1lZGlhIHR5cGVzLlxuICAgICAgICAgIHRoaXMudW5hbGxvY2F0ZWRbdHlwZV0ucHVzaChtZWRpYUVsKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFNZWRpYVR5cGV9IG1lZGlhVHlwZSBUaGUgbWVkaWEgdHlwZSB3aG9zZSBzb3VyY2Ugc2hvdWxkIGJlXG4gICAqICAgICByZXRyaWV2ZWQuXG4gICAqIEByZXR1cm4geyFTb3VyY2VzfSBUaGUgZGVmYXVsdCBzb3VyY2UgZm9yIHRoZSBzcGVjaWZpZWQgdHlwZSBvZiBtZWRpYS5cbiAgICovXG4gIGdldERlZmF1bHRTb3VyY2VfKG1lZGlhVHlwZSkge1xuICAgIHN3aXRjaCAobWVkaWFUeXBlKSB7XG4gICAgICBjYXNlIE1lZGlhVHlwZS5BVURJTzpcbiAgICAgICAgcmV0dXJuIG5ldyBTb3VyY2VzKEJMQU5LX0FVRElPX1NSQyk7XG4gICAgICBjYXNlIE1lZGlhVHlwZS5WSURFTzpcbiAgICAgICAgcmV0dXJuIG5ldyBTb3VyY2VzKEJMQU5LX1ZJREVPX1NSQyk7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBkZXYoKS5lcnJvcignQU1QLVNUT1JZJywgYE5vIGRlZmF1bHQgbWVkaWEgZm9yIHR5cGUgJHttZWRpYVR5cGV9LmApO1xuICAgICAgICByZXR1cm4gbmV3IFNvdXJjZXMoKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDb21wYXJpc29uIGZ1bmN0aW9uIHRoYXQgY29tcGFyZXMgdGhlIGRpc3RhbmNlIG9mIGVhY2ggZWxlbWVudCBmcm9tIHRoZVxuICAgKiBjdXJyZW50IHBvc2l0aW9uIGluIHRoZSBkb2N1bWVudC5cbiAgICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gbWVkaWFBIFRoZSBmaXJzdCBlbGVtZW50IHRvIGNvbXBhcmUuXG4gICAqIEBwYXJhbSB7IUhUTUxNZWRpYUVsZW1lbnR9IG1lZGlhQiBUaGUgc2Vjb25kIGVsZW1lbnQgdG8gY29tcGFyZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbXBhcmVNZWRpYURpc3RhbmNlc18obWVkaWFBLCBtZWRpYUIpIHtcbiAgICBjb25zdCBkaXN0YW5jZUEgPSB0aGlzLmRpc3RhbmNlRm5fKG1lZGlhQSk7XG4gICAgY29uc3QgZGlzdGFuY2VCID0gdGhpcy5kaXN0YW5jZUZuXyhtZWRpYUIpO1xuICAgIHJldHVybiBkaXN0YW5jZUEgPCBkaXN0YW5jZUIgPyAtMSA6IDE7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IEEgdW5pcXVlIElELlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY3JlYXRlRG9tTWVkaWFFbGVtZW50SWRfKCkge1xuICAgIHJldHVybiBET01fTUVESUFfRUxFTUVOVF9JRF9QUkVGSVggKyB0aGlzLmlkQ291bnRlcl8rKztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBtZWRpYSB0eXBlIGZyb20gYSBnaXZlbiBlbGVtZW50LlxuICAgKiBAcGFyYW0geyFIVE1MTWVkaWFFbGVtZW50fSBtZWRpYUVsZW1lbnQgVGhlIGVsZW1lbnQgd2hvc2UgbWVkaWEgdHlwZSBzaG91bGRcbiAgICogICAgIGJlIHJldHJpZXZlZC5cbiAgICogQHJldHVybiB7IU1lZGlhVHlwZX1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldE1lZGlhVHlwZV8obWVkaWFFbGVtZW50KSB7XG4gICAgY29uc3QgdGFnTmFtZSA9IG1lZGlhRWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgc3dpdGNoICh0YWdOYW1lKSB7XG4gICAgICBjYXNlICdhdWRpbyc6XG4gICAgICAgIHJldHVybiBNZWRpYVR5cGUuQVVESU87XG4gICAgICBjYXNlICd2aWRlbyc6XG4gICAgICAgIHJldHVybiBNZWRpYVR5cGUuVklERU87XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTWVkaWFUeXBlLlVOU1VQUE9SVEVEO1xuICAgIH1cbiAgfVxuXG5cbiAgLyoqXG4gICAqIFJlc2VydmVzIGFuIGVsZW1lbnQgb2YgdGhlIHNwZWNpZmllZCB0eXBlIGJ5IHJlbW92aW5nIGl0IGZyb20gdGhlIHNldCBvZlxuICAgKiB1bmFsbG9jYXRlZCBlbGVtZW50cyBhbmQgcmV0dXJuaW5nIGl0LlxuICAgKiBAcGFyYW0geyFNZWRpYVR5cGV9IG1lZGlhVHlwZSBUaGUgdHlwZSBvZiBtZWRpYSBlbGVtZW50IHRvIHJlc2VydmUuXG4gICAqIEByZXR1cm4gez9IVE1MTWVkaWFFbGVtZW50fSBUaGUgcmVzZXJ2ZWQgZWxlbWVudCwgaWYgb25lIGV4aXN0cy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHJlc2VydmVVbmFsbG9jYXRlZE1lZGlhRWxlbWVudF8obWVkaWFUeXBlKSB7XG4gICAgcmV0dXJuIHRoaXMudW5hbGxvY2F0ZWRbbWVkaWFUeXBlXS5wb3AoKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgbWVkaWEgZWxlbWVudCBmcm9tIHRoZSBwb29sIHRoYXQgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkXG4gICAqIGVsZW1lbnQsIGlmIG9uZSBleGlzdHMuXG4gICAqIEBwYXJhbSB7IU1lZGlhVHlwZX0gbWVkaWFUeXBlIFRoZSB0eXBlIG9mIG1lZGlhIGVsZW1lbnQgdG8gZ2V0LlxuICAgKiBAcGFyYW0geyFIVE1MTWVkaWFFbGVtZW50fSBkb21NZWRpYUVsIFRoZSBlbGVtZW50IHdob3NlIG1hdGNoaW5nIG1lZGlhXG4gICAqICAgICBlbGVtZW50IHNob3VsZCBiZSByZXRyaWV2ZWQuXG4gICAqIEByZXR1cm4gez9IVE1MTWVkaWFFbGVtZW50fSBUaGUgbWVkaWEgZWxlbWVudCBpbiB0aGUgcG9vbCB0aGF0IHJlcHJlc2VudHNcbiAgICogICAgIHRoZSBzcGVjaWZpZWQgbWVkaWEgZWxlbWVudFxuICAgKi9cbiAgZ2V0TWF0Y2hpbmdNZWRpYUVsZW1lbnRGcm9tUG9vbF8obWVkaWFUeXBlLCBkb21NZWRpYUVsKSB7XG4gICAgaWYgKHRoaXMuaXNBbGxvY2F0ZWRNZWRpYUVsZW1lbnRfKG1lZGlhVHlwZSwgZG9tTWVkaWFFbCkpIHtcbiAgICAgIHJldHVybiBkb21NZWRpYUVsO1xuICAgIH1cblxuICAgIGNvbnN0IGFsbG9jYXRlZEVscyA9IHRoaXMuYWxsb2NhdGVkW21lZGlhVHlwZV07XG4gICAgY29uc3QgaW5kZXggPSBmaW5kSW5kZXgoYWxsb2NhdGVkRWxzLCBwb29sTWVkaWFFbCA9PiB7XG4gICAgICByZXR1cm4gcG9vbE1lZGlhRWxbUkVQTEFDRURfTUVESUFfUFJPUEVSVFlfTkFNRV0gPT09IGRvbU1lZGlhRWwuaWQ7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYWxsb2NhdGVkRWxzW2luZGV4XTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEFsbG9jYXRlcyB0aGUgc3BlY2lmaWVkIG1lZGlhIGVsZW1lbnQgb2YgdGhlIHNwZWNpZmllZCB0eXBlLlxuICAgKiBAcGFyYW0geyFNZWRpYVR5cGV9IG1lZGlhVHlwZSBUaGUgdHlwZSBvZiBtZWRpYSBlbGVtZW50IHRvIGFsbG9jYXRlLlxuICAgKiBAcGFyYW0geyFIVE1MTWVkaWFFbGVtZW50fSBwb29sTWVkaWFFbCBUaGUgZWxlbWVudCB0byBiZSBhbGxvY2F0ZWQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhbGxvY2F0ZU1lZGlhRWxlbWVudF8obWVkaWFUeXBlLCBwb29sTWVkaWFFbCkge1xuICAgIHRoaXMuYWxsb2NhdGVkW21lZGlhVHlwZV0ucHVzaChwb29sTWVkaWFFbCk7XG5cbiAgICBjb25zdCB1bmFsbG9jYXRlZEVscyA9IHRoaXMudW5hbGxvY2F0ZWRbbWVkaWFUeXBlXTtcbiAgICBjb25zdCBpbmRleFRvUmVtb3ZlID0gdW5hbGxvY2F0ZWRFbHMuaW5kZXhPZihwb29sTWVkaWFFbCk7XG5cbiAgICBpZiAoaW5kZXhUb1JlbW92ZSA+PSAwKSB7XG4gICAgICB1bmFsbG9jYXRlZEVscy5zcGxpY2UoaW5kZXhUb1JlbW92ZSwgMSk7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogRGVhbGxvY2F0ZXMgYW5kIHJldHVybnMgdGhlIG1lZGlhIGVsZW1lbnQgb2YgdGhlIHNwZWNpZmllZCB0eXBlIGZ1cnRoZXN0XG4gICAqIGZyb20gdGhlIGN1cnJlbnQgcG9zaXRpb24gaW4gdGhlIGRvY3VtZW50LlxuICAgKiBAcGFyYW0geyFNZWRpYVR5cGV9IG1lZGlhVHlwZSBUaGUgdHlwZSBvZiBtZWRpYSBlbGVtZW50IHRvIGRlYWxsb2NhdGUuXG4gICAqIEBwYXJhbSB7IUhUTUxNZWRpYUVsZW1lbnQ9fSBvcHRfZWxUb0FsbG9jYXRlIElmIHNwZWNpZmllZCwgdGhlIGVsZW1lbnQgdGhhdFxuICAgKiAgICAgaXMgdHJ5aW5nIHRvIGJlIGFsbG9jYXRlZCwgc3VjaCB0aGF0IGFub3RoZXIgZWxlbWVudCBtdXN0IGJlIGV2aWN0ZWQuXG4gICAqIEByZXR1cm4gez9IVE1MTWVkaWFFbGVtZW50fSBUaGUgZGVhbGxvY2F0ZWQgZWxlbWVudCwgaWYgb25lIGV4aXN0cy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRlYWxsb2NhdGVNZWRpYUVsZW1lbnRfKG1lZGlhVHlwZSwgb3B0X2VsVG9BbGxvY2F0ZSkge1xuICAgIGNvbnN0IGFsbG9jYXRlZEVscyA9IHRoaXMuYWxsb2NhdGVkW21lZGlhVHlwZV07XG5cbiAgICAvLyBTb3J0IHRoZSBhbGxvY2F0ZWQgbWVkaWEgZWxlbWVudHMgYnkgZGlzdGFuY2UgdG8gZW5zdXJlIHRoYXQgd2UgYXJlXG4gICAgLy8gZXZpY3RpbmcgdGhlIG1lZGlhIGVsZW1lbnQgdGhhdCBpcyBmdXJ0aGVzdCBmcm9tIHRoZSBjdXJyZW50IHBsYWNlIGluIHRoZVxuICAgIC8vIGRvY3VtZW50LlxuICAgIGFsbG9jYXRlZEVscy5zb3J0KChhLCBiKSA9PiB0aGlzLmNvbXBhcmVNZWRpYURpc3RhbmNlc18oYSwgYikpO1xuXG4gICAgLy8gRG8gbm90IGRlYWxsb2NhdGUgYW55IG1lZGlhIGVsZW1lbnRzIGlmIHRoZSBlbGVtZW50IGJlaW5nIGxvYWRlZCBvclxuICAgIC8vIHBsYXllZCBpcyBmdXJ0aGVyIHRoYW4gdGhlIGZhcnRoZXN0IGFsbG9jYXRlZCBlbGVtZW50LlxuICAgIGlmIChvcHRfZWxUb0FsbG9jYXRlKSB7XG4gICAgICBjb25zdCBmdXJ0aGVzdEVsID0gYWxsb2NhdGVkRWxzW2FsbG9jYXRlZEVscy5sZW5ndGggLSAxXTtcbiAgICAgIGlmICghZnVydGhlc3RFbCB8fFxuICAgICAgICAgIHRoaXMuZGlzdGFuY2VGbl8oZnVydGhlc3RFbCkgPCB0aGlzLmRpc3RhbmNlRm5fKG9wdF9lbFRvQWxsb2NhdGUpKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERlLWFsbG9jYXRlIGEgbWVkaWEgZWxlbWVudC5cbiAgICBjb25zdCBwb29sTWVkaWFFbCA9IGFsbG9jYXRlZEVscy5wb3AoKTtcbiAgICB0aGlzLnVuYWxsb2NhdGVkW21lZGlhVHlwZV0ucHVzaChwb29sTWVkaWFFbCk7XG4gICAgcmV0dXJuIHBvb2xNZWRpYUVsO1xuICB9XG5cblxuICAvKipcbiAgICogRm9yY2libHkgZGVhbGxvY2F0ZXMgYSBzcGVjaWZpYyBtZWRpYSBlbGVtZW50LCByZWdhcmRsZXNzIG9mIGl0cyBkaXN0YW5jZVxuICAgKiBmcm9tIHRoZSBjdXJyZW50IHBvc2l0aW9uIGluIHRoZSBkb2N1bWVudC5cbiAgICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gcG9vbE1lZGlhRWwgVGhlIGVsZW1lbnQgdG8gYmUgZGVhbGxvY2F0ZWQuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBzcGVjaWZpZWQgbWVkaWFcbiAgICogICAgIGVsZW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGRlYWxsb2NhdGVkLlxuICAgKi9cbiAgZm9yY2VEZWFsbG9jYXRlTWVkaWFFbGVtZW50Xyhwb29sTWVkaWFFbCkge1xuICAgIGNvbnN0IG1lZGlhVHlwZSA9IHRoaXMuZ2V0TWVkaWFUeXBlXyhwb29sTWVkaWFFbCk7XG4gICAgY29uc3QgYWxsb2NhdGVkRWxzID0gdGhpcy5hbGxvY2F0ZWRbbWVkaWFUeXBlXTtcbiAgICBjb25zdCByZW1vdmVGcm9tRG9tID0gaXNDb25uZWN0ZWROb2RlKHBvb2xNZWRpYUVsKSA/XG4gICAgICB0aGlzLnN3YXBQb29sTWVkaWFFbGVtZW50T3V0T2ZEb21fKHBvb2xNZWRpYUVsKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgcmV0dXJuIHJlbW92ZUZyb21Eb20udGhlbigoKSA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IGFsbG9jYXRlZEVscy5pbmRleE9mKHBvb2xNZWRpYUVsKTtcbiAgICAgIGRldigpLmFzc2VydChpbmRleCA+PSAwLCAnQ2Fubm90IGRlYWxsb2NhdGUgdW5hbGxvY2F0ZWQgbWVkaWEgZWxlbWVudC4nKTtcbiAgICAgIGFsbG9jYXRlZEVscy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgdGhpcy51bmFsbG9jYXRlZFttZWRpYVR5cGVdLnB1c2gocG9vbE1lZGlhRWwpO1xuICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogRXZpY3RzIGFuIGVsZW1lbnQgb2YgdGhlIHNwZWNpZmllZCB0eXBlLCByZXBsYWNlcyBpdCBpbiB0aGUgRE9NIHdpdGggdGhlXG4gICAqIG9yaWdpbmFsIG1lZGlhIGVsZW1lbnQsIGFuZCByZXR1cm5zIGl0LlxuICAgKiBAcGFyYW0geyFNZWRpYVR5cGV9IG1lZGlhVHlwZSBUaGUgdHlwZSBvZiBtZWRpYSBlbGVtZW50IHRvIGV2aWN0LlxuICAgKiBAcGFyYW0geyFIVE1MTWVkaWFFbGVtZW50PX0gb3B0X2VsVG9BbGxvY2F0ZSBJZiBzcGVjaWZpZWQsIHRoZSBlbGVtZW50IHRoYXRcbiAgICogICAgIGlzIHRyeWluZyB0byBiZSBhbGxvY2F0ZWQsIHN1Y2ggdGhhdCBhbm90aGVyIGVsZW1lbnQgbXVzdCBiZSBldmljdGVkLlxuICAgKiBAcmV0dXJuIHs/SFRNTE1lZGlhRWxlbWVudH0gQSBtZWRpYSBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgdHlwZS5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGV2aWN0TWVkaWFFbGVtZW50XyhtZWRpYVR5cGUsIG9wdF9lbFRvQWxsb2NhdGUpIHtcbiAgICBjb25zdCBwb29sTWVkaWFFbCA9XG4gICAgICAgIHRoaXMuZGVhbGxvY2F0ZU1lZGlhRWxlbWVudF8obWVkaWFUeXBlLCBvcHRfZWxUb0FsbG9jYXRlKTtcbiAgICBpZiAoIXBvb2xNZWRpYUVsKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB0aGlzLnN3YXBQb29sTWVkaWFFbGVtZW50T3V0T2ZEb21fKHBvb2xNZWRpYUVsKTtcbiAgICByZXR1cm4gcG9vbE1lZGlhRWw7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFNZWRpYVR5cGV9IG1lZGlhVHlwZSBUaGUgbWVkaWEgdHlwZSB0byBjaGVjay5cbiAgICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gZWwgVGhlIGVsZW1lbnQgdG8gY2hlY2suXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUsIGlmIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBoYXMgYWxyZWFkeSBiZWVuIGFsbG9jYXRlZFxuICAgKiAgICAgYXMgdGhlIHNwZWNpZmllZCB0eXBlIG9mIG1lZGlhIGVsZW1lbnQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc0FsbG9jYXRlZE1lZGlhRWxlbWVudF8obWVkaWFUeXBlLCBlbCkge1xuICAgIHJldHVybiB0aGlzLmFsbG9jYXRlZFttZWRpYVR5cGVdLmluZGV4T2YoZWwpID49IDA7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhIG1lZGlhIGVsZW1lbnQgdGhhdCB3YXMgb3JpZ2luYWxseSBpbiB0aGUgRE9NIHdpdGggYSBtZWRpYVxuICAgKiBlbGVtZW50IGZyb20gdGhlIHBvb2wuXG4gICAqIEBwYXJhbSB7IUhUTUxNZWRpYUVsZW1lbnR9IGRvbU1lZGlhRWwgVGhlIG1lZGlhIGVsZW1lbnQgb3JpZ2luYXRpbmcgZnJvbVxuICAgKiAgICAgdGhlIERPTS5cbiAgICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gcG9vbE1lZGlhRWwgVGhlIG1lZGlhIGVsZW1lbnQgb3JpZ2luYXRpbmcgZnJvbVxuICAgKiAgICAgdGhlIHBvb2wuXG4gICAqIEBwYXJhbSB7IVNvdXJjZXN9IHNvdXJjZXMgVGhlIHNvdXJjZXMgZm9yIHRoZSBtZWRpYSBlbGVtZW50LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgbWVkaWEgZWxlbWVudCBoYXNcbiAgICogICAgIGJlZW4gc3VjY2Vzc2Z1bGx5IHN3YXBwZWQgaW50byB0aGUgRE9NLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3dhcFBvb2xNZWRpYUVsZW1lbnRJbnRvRG9tXyhkb21NZWRpYUVsLCBwb29sTWVkaWFFbCwgc291cmNlcykge1xuICAgIGNvbnN0IGFtcE1lZGlhRm9yUG9vbEVsID0gYW1wTWVkaWFFbGVtZW50Rm9yKHBvb2xNZWRpYUVsKTtcbiAgICBjb25zdCBhbXBNZWRpYUZvckRvbUVsID0gYW1wTWVkaWFFbGVtZW50Rm9yKGRvbU1lZGlhRWwpO1xuICAgIHBvb2xNZWRpYUVsW1JFUExBQ0VEX01FRElBX1BST1BFUlRZX05BTUVdID0gZG9tTWVkaWFFbC5pZDtcblxuICAgIHJldHVybiB0aGlzLmVucXVldWVNZWRpYUVsZW1lbnRUYXNrXyhwb29sTWVkaWFFbCxcbiAgICAgICAgbmV3IFN3YXBJbnRvRG9tVGFzayhkb21NZWRpYUVsLCB0aGlzLnZzeW5jXykpXG4gICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLm1heWJlUmVzZXRBbXBNZWRpYV8oYW1wTWVkaWFGb3JQb29sRWwpO1xuICAgICAgICAgIHRoaXMubWF5YmVSZXNldEFtcE1lZGlhXyhhbXBNZWRpYUZvckRvbUVsKTtcbiAgICAgICAgICB0aGlzLmVucXVldWVNZWRpYUVsZW1lbnRUYXNrXyhwb29sTWVkaWFFbCxcbiAgICAgICAgICAgICAgbmV3IFVwZGF0ZVNvdXJjZXNUYXNrKHNvdXJjZXMsIHRoaXMudnN5bmNfKSk7XG4gICAgICAgICAgdGhpcy5lbnF1ZXVlTWVkaWFFbGVtZW50VGFza18ocG9vbE1lZGlhRWwsIG5ldyBMb2FkVGFzaygpKTtcbiAgICAgICAgfSwgKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZm9yY2VEZWFsbG9jYXRlTWVkaWFFbGVtZW50Xyhwb29sTWVkaWFFbCk7XG4gICAgICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHs/RWxlbWVudH0gY29tcG9uZW50RWxcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG1heWJlUmVzZXRBbXBNZWRpYV8oY29tcG9uZW50RWwpIHtcbiAgICBpZiAoIWNvbXBvbmVudEVsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGNvbXBvbmVudEVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PSAnYW1wLWF1ZGlvJykge1xuICAgICAgLy8gVE9ETyhhbGFub3JvemNvKTogSW1wbGVtZW50IHJlc2V0IGZvciBhbXAtYXVkaW9cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb21wb25lbnRFbC5nZXRJbXBsKCkudGhlbihpbXBsID0+IGltcGwucmVzZXRPbkRvbUNoYW5nZSgpKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUhUTUxNZWRpYUVsZW1lbnR9IHBvb2xNZWRpYUVsIFRoZSBlbGVtZW50IHdob3NlIHNvdXJjZSBzaG91bGQgYmVcbiAgICogICAgIHJlc2V0LlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgcG9vbCBtZWRpYSBlbGVtZW50XG4gICAqICAgICBoYXMgYmVlbiByZXNldC5cbiAgICovXG4gIHJlc2V0UG9vbE1lZGlhRWxlbWVudFNvdXJjZV8ocG9vbE1lZGlhRWwpIHtcbiAgICBjb25zdCBtZWRpYVR5cGUgPSB0aGlzLmdldE1lZGlhVHlwZV8ocG9vbE1lZGlhRWwpO1xuICAgIGNvbnN0IGRlZmF1bHRTb3VyY2VzID0gdGhpcy5nZXREZWZhdWx0U291cmNlXyhtZWRpYVR5cGUpO1xuXG4gICAgcmV0dXJuIHRoaXMuZW5xdWV1ZU1lZGlhRWxlbWVudFRhc2tfKHBvb2xNZWRpYUVsLFxuICAgICAgICBuZXcgVXBkYXRlU291cmNlc1Rhc2soZGVmYXVsdFNvdXJjZXMsIHRoaXMudnN5bmNfKSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGEgcG9vbCBtZWRpYSBlbGVtZW50IGZyb20gdGhlIERPTSBhbmQgcmVwbGFjZXMgaXQgd2l0aCB0aGUgdmlkZW9cbiAgICogdGhhdCBpdCBvcmlnaW5hbGx5IHJlcGxhY2VkLlxuICAgKiBAcGFyYW0geyFIVE1MTWVkaWFFbGVtZW50fSBwb29sTWVkaWFFbCBUaGUgcG9vbCBtZWRpYSBlbGVtZW50IHRvIHJlbW92ZVxuICAgKiAgICAgZnJvbSB0aGUgRE9NLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgbWVkaWEgZWxlbWVudCBoYXNcbiAgICogICAgIGJlZW4gc3VjY2Vzc2Z1bGx5IHN3YXBwZWQgb3V0IG9mIHRoZSBET00uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzd2FwUG9vbE1lZGlhRWxlbWVudE91dE9mRG9tXyhwb29sTWVkaWFFbCkge1xuICAgIGNvbnN0IG9sZERvbU1lZGlhRWxJZCA9IHBvb2xNZWRpYUVsW1JFUExBQ0VEX01FRElBX1BST1BFUlRZX05BTUVdO1xuICAgIGNvbnN0IG9sZERvbU1lZGlhRWwgPSAvKiogQHR5cGUgeyFIVE1MTWVkaWFFbGVtZW50fSAqLyAoZGV2KCkuYXNzZXJ0RWxlbWVudChcbiAgICAgICAgdGhpcy5kb21NZWRpYUVsc19bb2xkRG9tTWVkaWFFbElkXSxcbiAgICAgICAgJ05vIG1lZGlhIGVsZW1lbnQgdG8gcHV0IGJhY2sgaW50byBET00gYWZ0ZXIgZXZpY3Rpb24uJykpO1xuXG4gICAgY29uc3Qgc3dhcE91dE9mRG9tID0gdGhpcy5lbnF1ZXVlTWVkaWFFbGVtZW50VGFza18ocG9vbE1lZGlhRWwsXG4gICAgICAgIG5ldyBTd2FwT3V0T2ZEb21UYXNrKG9sZERvbU1lZGlhRWwsIHRoaXMudnN5bmNfKSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHBvb2xNZWRpYUVsW1JFUExBQ0VEX01FRElBX1BST1BFUlRZX05BTUVdID0gbnVsbDtcbiAgICAgICAgfSk7XG5cbiAgICB0aGlzLnJlc2V0UG9vbE1lZGlhRWxlbWVudFNvdXJjZV8ocG9vbE1lZGlhRWwpO1xuICAgIHJldHVybiBzd2FwT3V0T2ZEb207XG4gIH1cblxuXG4gIGZvckVhY2hNZWRpYVR5cGVfKGNhbGxiYWNrRm4pIHtcbiAgICBPYmplY3Qua2V5cyhNZWRpYVR5cGUpLmZvckVhY2goY2FsbGJhY2tGbi5iaW5kKHRoaXMpKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEludm9rZXMgYSBmdW5jdGlvbiBmb3IgYWxsIG1lZGlhIG1hbmFnZWQgYnkgdGhlIG1lZGlhIHBvb2wuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUhUTUxNZWRpYUVsZW1lbnQpfSBjYWxsYmFja0ZuIFRoZSBmdW5jdGlvbiB0byBiZVxuICAgKiAgICAgaW52b2tlZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZvckVhY2hNZWRpYUVsZW1lbnRfKGNhbGxiYWNrRm4pIHtcbiAgICB0aGlzLmZvckVhY2hNZWRpYVR5cGVfKGtleSA9PiB7XG4gICAgICBjb25zdCB0eXBlID0gTWVkaWFUeXBlW2tleV07XG4gICAgICBjb25zdCBhbGxvY2F0ZWRFbHMgPSB0aGlzLmFsbG9jYXRlZFt0eXBlXTtcbiAgICAgIGFsbG9jYXRlZEVscy5mb3JFYWNoKGNhbGxiYWNrRm4uYmluZCh0aGlzKSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmZvckVhY2hNZWRpYVR5cGVfKGtleSA9PiB7XG4gICAgICBjb25zdCB0eXBlID0gTWVkaWFUeXBlW2tleV07XG4gICAgICBjb25zdCB1bmFsbG9jYXRlZEVscyA9IHRoaXMudW5hbGxvY2F0ZWRbdHlwZV07XG4gICAgICB1bmFsbG9jYXRlZEVscy5mb3JFYWNoKGNhbGxiYWNrRm4uYmluZCh0aGlzKSk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBQcmVsb2FkcyB0aGUgY29udGVudCBvZiB0aGUgc3BlY2lmaWVkIG1lZGlhIGVsZW1lbnQgaW4gdGhlIERPTSBhbmQgcmV0dXJuc1xuICAgKiBhIG1lZGlhIGVsZW1lbnQgdGhhdCBjYW4gYmUgdXNlZCBpbiBpdHMgc3RlYWQgZm9yIHBsYXliYWNrLlxuICAgKiBAcGFyYW0geyFIVE1MTWVkaWFFbGVtZW50fSBkb21NZWRpYUVsIFRoZSBtZWRpYSBlbGVtZW50LCBmb3VuZCBpbiB0aGUgRE9NLFxuICAgKiAgICAgd2hvc2UgY29udGVudCBzaG91bGQgYmUgbG9hZGVkLlxuICAgKiBAcmV0dXJuIHtQcm9taXNlPCFIVE1MTWVkaWFFbGVtZW50Pn0gQSBtZWRpYSBlbGVtZW50IGZyb20gdGhlIHBvb2wgdGhhdCBjYW4gYmUgdXNlZFxuICAgKiAgICAgdG8gcmVwbGFjZSB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gICAqL1xuICBsb2FkSW50ZXJuYWxfKGRvbU1lZGlhRWwpIHtcbiAgICBpZiAoIWlzQ29ubmVjdGVkTm9kZShkb21NZWRpYUVsKSkge1xuICAgICAgLy8gRG9uJ3QgaGFuZGxlIG5vZGVzIHRoYXQgYXJlbid0IGV2ZW4gaW4gdGhlIGRvY3VtZW50LlxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IG1lZGlhVHlwZSA9IHRoaXMuZ2V0TWVkaWFUeXBlXyhkb21NZWRpYUVsKTtcbiAgICBjb25zdCBleGlzdGluZ1Bvb2xNZWRpYUVsID1cbiAgICAgICAgdGhpcy5nZXRNYXRjaGluZ01lZGlhRWxlbWVudEZyb21Qb29sXyhtZWRpYVR5cGUsIGRvbU1lZGlhRWwpO1xuICAgIGlmIChleGlzdGluZ1Bvb2xNZWRpYUVsKSB7XG4gICAgICAvLyBUaGUgZWxlbWVudCBiZWluZyBsb2FkZWQgYWxyZWFkeSBoYXMgYW4gYWxsb2NhdGVkIG1lZGlhIGVsZW1lbnQuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGV4aXN0aW5nUG9vbE1lZGlhRWwpO1xuICAgIH1cblxuICAgIGNvbnN0IHNvdXJjZXMgPSB0aGlzLnNvdXJjZXNfW2RvbU1lZGlhRWwuaWRdO1xuICAgIGRldigpLmFzc2VydChzb3VyY2VzIGluc3RhbmNlb2YgU291cmNlcyxcbiAgICAgICAgJ0Nhbm5vdCBwbGF5IHVucmVnaXN0ZXJlZCBlbGVtZW50LicpO1xuXG4gICAgY29uc3QgcG9vbE1lZGlhRWwgPSB0aGlzLnJlc2VydmVVbmFsbG9jYXRlZE1lZGlhRWxlbWVudF8obWVkaWFUeXBlKSB8fFxuICAgICAgICB0aGlzLmV2aWN0TWVkaWFFbGVtZW50XyhtZWRpYVR5cGUsIGRvbU1lZGlhRWwpO1xuXG4gICAgaWYgKCFwb29sTWVkaWFFbCkge1xuICAgICAgLy8gSWYgdGhlcmUgaXMgbm8gc3BhY2UgaW4gdGhlIHBvb2wgdG8gYWxsb2NhdGUgYSBuZXcgZWxlbWVudCwgYW5kIG5vXG4gICAgICAvLyBlbGVtZW50IGNhbiBiZSBldmljdGVkLCBkbyBub3QgcmV0dXJuIGFueSBlbGVtZW50LlxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuYWxsb2NhdGVNZWRpYUVsZW1lbnRfKG1lZGlhVHlwZSwgcG9vbE1lZGlhRWwpO1xuXG4gICAgcmV0dXJuIHRoaXMuc3dhcFBvb2xNZWRpYUVsZW1lbnRJbnRvRG9tXyhkb21NZWRpYUVsLCBwb29sTWVkaWFFbCwgc291cmNlcylcbiAgICAgICAgLnRoZW4oKCkgPT4gcG9vbE1lZGlhRWwpO1xuICB9XG5cblxuICAvKipcbiAgICogXCJCbGVzc2VzXCIgdGhlIHNwZWNpZmllZCBtZWRpYSBlbGVtZW50IGZvciBmdXR1cmUgcGxheWJhY2sgd2l0aG91dCBhIHVzZXJcbiAgICogZ2VzdHVyZS4gIEluIG9yZGVyIGZvciB0aGlzIHRvIGJsZXNzIHRoZSBtZWRpYSBlbGVtZW50LCB0aGlzIGZ1bmN0aW9uIG11c3RcbiAgICogYmUgaW52b2tlZCBpbiByZXNwb25zZSB0byBhIHVzZXIgZ2VzdHVyZS5cbiAgICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gcG9vbE1lZGlhRWwgVGhlIG1lZGlhIGVsZW1lbnQgdG8gYmxlc3MuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIGJsZXNzaW5nIHRoZSBtZWRpYVxuICAgKiAgICAgZWxlbWVudCBpcyBjb21wbGV0ZS5cbiAgICovXG4gIGJsZXNzXyhwb29sTWVkaWFFbCkge1xuICAgIGlmIChwb29sTWVkaWFFbFtFTEVNRU5UX0JMRVNTRURfUFJPUEVSVFlfTkFNRV0pIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lbnF1ZXVlTWVkaWFFbGVtZW50VGFza18ocG9vbE1lZGlhRWwsIG5ldyBCbGVzc1Rhc2soKSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgdGhlIHNwZWNpZmllZCBlbGVtZW50IHRvIGJlIHVzYWJsZSBieSB0aGUgbWVkaWEgcG9vbC4gIEVsZW1lbnRzXG4gICAqIHNob3VsZCBiZSByZWdpc3RlcmVkIGFzIGVhcmx5IGFzIHBvc3NpYmxlLCBpbiBvcmRlciB0byBwcmV2ZW50IHRoZW0gZnJvbVxuICAgKiBiZWluZyBwbGF5ZWQgd2hpbGUgbm90IG1hbmFnZWQgYnkgdGhlIG1lZGlhIHBvb2wuICBJZiB0aGUgbWVkaWEgZWxlbWVudCBpc1xuICAgKiBhbHJlYWR5IHJlZ2lzdGVyZWQsIHRoaXMgaXMgYSBuby1vcC4gIFJlZ2lzdGVyaW5nIGVsZW1lbnRzIGZyb20gd2l0aGluIHRoZVxuICAgKiBwb29sIGlzIG5vdCBhbGxvd2VkLCBhbmQgd2lsbCBhbHNvIGJlIGEgbm8tb3AuXG4gICAqIEBwYXJhbSB7IUhUTUxNZWRpYUVsZW1lbnR9IGRvbU1lZGlhRWwgVGhlIG1lZGlhIGVsZW1lbnQgdG8gYmUgcmVnaXN0ZXJlZC5cbiAgICogQHJldHVybiB7IVByb21pc2V9IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIGVsZW1lbnQgaGFzIGJlZW5cbiAgICogICAgIHN1Y2Nlc3NmdWxseSByZWdpc3RlcmVkLCBvciByZWplY3RlZCBvdGhlcndpc2UuXG4gICAqL1xuICByZWdpc3Rlcihkb21NZWRpYUVsKSB7XG4gICAgY29uc3QgbWVkaWFUeXBlID0gdGhpcy5nZXRNZWRpYVR5cGVfKGRvbU1lZGlhRWwpO1xuICAgIGlmICh0aGlzLmlzQWxsb2NhdGVkTWVkaWFFbGVtZW50XyhtZWRpYVR5cGUsIGRvbU1lZGlhRWwpKSB7XG4gICAgICAvLyBUaGlzIG1lZGlhIGVsZW1lbnQgb3JpZ2luYXRlZCBmcm9tIHRoZSBtZWRpYSBwb29sLlxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGlkID0gZG9tTWVkaWFFbC5pZCB8fCB0aGlzLmNyZWF0ZURvbU1lZGlhRWxlbWVudElkXygpO1xuICAgIGlmICh0aGlzLnNvdXJjZXNfW2lkXSAmJiB0aGlzLmRvbU1lZGlhRWxzX1tpZF0pIHtcbiAgICAgIC8vIFRoaXMgbWVkaWEgZWxlbWVudCBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQuXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgLy8gVGhpcyBtZWRpYSBlbGVtZW50IGhhcyBub3QgeWV0IGJlZW4gcmVnaXN0ZXJlZC5cbiAgICBkb21NZWRpYUVsLmlkID0gaWQ7XG4gICAgY29uc3Qgc291cmNlcyA9IFNvdXJjZXMucmVtb3ZlRnJvbShkb21NZWRpYUVsKTtcbiAgICB0aGlzLnNvdXJjZXNfW2lkXSA9IHNvdXJjZXM7XG4gICAgdGhpcy5kb21NZWRpYUVsc19baWRdID0gZG9tTWVkaWFFbDtcblxuICAgIGRvbU1lZGlhRWwubXV0ZWQgPSB0cnVlO1xuICAgIGRvbU1lZGlhRWwuc2V0QXR0cmlidXRlKCdtdXRlZCcsICcnKTtcbiAgICBkb21NZWRpYUVsLnBhdXNlKCk7XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBQcmVsb2FkcyB0aGUgY29udGVudCBvZiB0aGUgc3BlY2lmaWVkIG1lZGlhIGVsZW1lbnQgaW4gdGhlIERPTS5cbiAgICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gZG9tTWVkaWFFbCBUaGUgbWVkaWEgZWxlbWVudCwgZm91bmQgaW4gdGhlIERPTSxcbiAgICogICAgIHdob3NlIGNvbnRlbnQgc2hvdWxkIGJlIGxvYWRlZC5cbiAgICogQHJldHVybiB7IVByb21pc2V9IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHNwZWNpZmllZCBtZWRpYVxuICAgKiAgICAgZWxlbWVudCBoYXMgc3VjY2Vzc2Z1bGx5IHN0YXJ0ZWQgcHJlbG9hZGluZy5cbiAgICovXG4gIHByZWxvYWQoZG9tTWVkaWFFbCkge1xuICAgIC8vIEVtcHR5IHRoZW4oKSBpbnZvY2F0aW9uIGhpZGVzIHRoZSB2YWx1ZSB5aWVsZGVkIGJ5IHRoZSBsb2FkSW50ZXJuYWxfXG4gICAgLy8gcHJvbWlzZSwgc28gdGhhdCB3ZSBkbyBub3QgbGVhayB0aGUgcG9vbCBtZWRpYSBlbGVtZW50IG91dHNpZGUgb2YgdGhlXG4gICAgLy8gc2NvcGUgb2YgdGhlIG1lZGlhIHBvb2wuXG4gICAgcmV0dXJuIHRoaXMubG9hZEludGVybmFsXyhkb21NZWRpYUVsKS50aGVuKCk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBQbGF5cyB0aGUgc3BlY2lmaWVkIG1lZGlhIGVsZW1lbnQgaW4gdGhlIERPTSBieSByZXBsYWNpbmcgaXQgd2l0aCBhIG1lZGlhXG4gICAqIGVsZW1lbnQgZnJvbSB0aGUgcG9vbCBhbmQgcGxheWluZyB0aGF0LlxuICAgKiBAcGFyYW0geyFIVE1MTWVkaWFFbGVtZW50fSBkb21NZWRpYUVsIFRoZSBtZWRpYSBlbGVtZW50IHRvIGJlIHBsYXllZC5cbiAgICogQHJldHVybiB7IVByb21pc2V9IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHNwZWNpZmllZCBtZWRpYVxuICAgKiAgICAgZWxlbWVudCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgcGxheWVkLlxuICAgKi9cbiAgcGxheShkb21NZWRpYUVsKSB7XG4gICAgcmV0dXJuIHRoaXMubG9hZEludGVybmFsXyhkb21NZWRpYUVsKVxuICAgICAgICAudGhlbihwb29sTWVkaWFFbCA9PiB7XG4gICAgICAgICAgaWYgKCFwb29sTWVkaWFFbCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiB0aGlzLmVucXVldWVNZWRpYUVsZW1lbnRUYXNrXyhwb29sTWVkaWFFbCwgbmV3IFBsYXlUYXNrKCkpO1xuICAgICAgICB9KTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFBhdXNlcyB0aGUgc3BlY2lmaWVkIG1lZGlhIGVsZW1lbnQgaW4gdGhlIERPTS5cbiAgICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gZG9tTWVkaWFFbCBUaGUgbWVkaWEgZWxlbWVudCB0byBiZSBwYXVzZWQuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHJld2luZFRvQmVnaW5uaW5nIFdoZXRoZXIgdG8gcmV3aW5kIHRoZSBjdXJyZW50VGltZVxuICAgKiAgICAgb2YgbWVkaWEgaXRlbXMgdG8gdGhlIGJlZ2lubmluZy5cbiAgICogQHJldHVybiB7IVByb21pc2V9IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHNwZWNpZmllZCBtZWRpYVxuICAgKiAgICAgZWxlbWVudCBoYXMgYmVlbiBzdWNjZXNzZnVsbHkgcGF1c2VkLlxuICAgKi9cbiAgcGF1c2UoZG9tTWVkaWFFbCwgcmV3aW5kVG9CZWdpbm5pbmcgPSBmYWxzZSkge1xuICAgIGNvbnN0IG1lZGlhVHlwZSA9IHRoaXMuZ2V0TWVkaWFUeXBlXyhkb21NZWRpYUVsKTtcbiAgICBjb25zdCBwb29sTWVkaWFFbCA9XG4gICAgICAgIHRoaXMuZ2V0TWF0Y2hpbmdNZWRpYUVsZW1lbnRGcm9tUG9vbF8obWVkaWFUeXBlLCBkb21NZWRpYUVsKTtcblxuICAgIGlmICghcG9vbE1lZGlhRWwpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lbnF1ZXVlTWVkaWFFbGVtZW50VGFza18ocG9vbE1lZGlhRWwsIG5ldyBQYXVzZVRhc2soKSlcbiAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGlmIChyZXdpbmRUb0JlZ2lubmluZykge1xuICAgICAgICAgICAgdGhpcy5lbnF1ZXVlTWVkaWFFbGVtZW50VGFza18oXG4gICAgICAgICAgICAgICAgLyoqIEB0eXBlIHshSFRNTE1lZGlhRWxlbWVudH0gKi8gKHBvb2xNZWRpYUVsKSxcbiAgICAgICAgICAgICAgICBuZXcgUmV3aW5kVGFzaygpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogUmV3aW5kcyBhIHNwZWNpZmllZCBtZWRpYSBlbGVtZW50IGluIHRoZSBET00gdG8gMC5cbiAgICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gZG9tTWVkaWFFbCBUaGUgbWVkaWEgZWxlbWVudCB0byBiZSByZXdvdW5kLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGVcbiAgICogICAgIHNwZWNpZmllZCBtZWRpYSBlbGVtZW50IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSByZXdvdW5kLlxuICAgKi9cbiAgcmV3aW5kVG9CZWdpbm5pbmcoZG9tTWVkaWFFbCkge1xuICAgIGNvbnN0IG1lZGlhVHlwZSA9IHRoaXMuZ2V0TWVkaWFUeXBlXyhkb21NZWRpYUVsKTtcbiAgICBjb25zdCBwb29sTWVkaWFFbCA9XG4gICAgICAgIHRoaXMuZ2V0TWF0Y2hpbmdNZWRpYUVsZW1lbnRGcm9tUG9vbF8obWVkaWFUeXBlLCBkb21NZWRpYUVsKTtcblxuICAgIGlmICghcG9vbE1lZGlhRWwpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lbnF1ZXVlTWVkaWFFbGVtZW50VGFza18ocG9vbE1lZGlhRWwsIG5ldyBSZXdpbmRUYXNrKCkpO1xuICB9XG5cblxuICAvKipcbiAgICogTXV0ZXMgdGhlIHNwZWNpZmllZCBtZWRpYSBlbGVtZW50IGluIHRoZSBET00uXG4gICAqIEBwYXJhbSB7IUhUTUxNZWRpYUVsZW1lbnR9IGRvbU1lZGlhRWwgVGhlIG1lZGlhIGVsZW1lbnQgdG8gYmUgbXV0ZWQuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBzcGVjaWZpZWQgbWVkaWFcbiAgICogICAgIGVsZW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IG11dGVkLlxuICAgKi9cbiAgbXV0ZShkb21NZWRpYUVsKSB7XG4gICAgY29uc3QgbWVkaWFUeXBlID0gdGhpcy5nZXRNZWRpYVR5cGVfKGRvbU1lZGlhRWwpO1xuICAgIGNvbnN0IHBvb2xNZWRpYUVsID1cbiAgICAgICAgdGhpcy5nZXRNYXRjaGluZ01lZGlhRWxlbWVudEZyb21Qb29sXyhtZWRpYVR5cGUsIGRvbU1lZGlhRWwpO1xuXG4gICAgaWYgKCFwb29sTWVkaWFFbCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmVucXVldWVNZWRpYUVsZW1lbnRUYXNrXyhwb29sTWVkaWFFbCwgbmV3IE11dGVUYXNrKCkpO1xuICB9XG5cblxuICAvKipcbiAgICogVW5tdXRlcyB0aGUgc3BlY2lmaWVkIG1lZGlhIGVsZW1lbnQgaW4gdGhlIERPTS5cbiAgICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gZG9tTWVkaWFFbCBUaGUgbWVkaWEgZWxlbWVudCB0byBiZSB1bm11dGVkLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgc3BlY2lmaWVkIG1lZGlhXG4gICAqICAgICBlbGVtZW50IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBwYXVzZWQuXG4gICAqL1xuICB1bm11dGUoZG9tTWVkaWFFbCkge1xuICAgIGNvbnN0IG1lZGlhVHlwZSA9IHRoaXMuZ2V0TWVkaWFUeXBlXyhkb21NZWRpYUVsKTtcbiAgICBjb25zdCBwb29sTWVkaWFFbCA9XG4gICAgICAgIHRoaXMuZ2V0TWF0Y2hpbmdNZWRpYUVsZW1lbnRGcm9tUG9vbF8obWVkaWFUeXBlLCBkb21NZWRpYUVsKTtcblxuICAgIGlmICghcG9vbE1lZGlhRWwpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lbnF1ZXVlTWVkaWFFbGVtZW50VGFza18ocG9vbE1lZGlhRWwsIG5ldyBVbm11dGVUYXNrKCkpO1xuICB9XG5cblxuICAvKipcbiAgICogXCJCbGVzc2VzXCIgYWxsIG1lZGlhIGVsZW1lbnRzIGluIHRoZSBtZWRpYSBwb29sIGZvciBmdXR1cmUgcGxheWJhY2sgd2l0aG91dFxuICAgKiBhIHVzZXIgZ2VzdHVyZS4gIEluIG9yZGVyIGZvciB0aGlzIHRvIGJsZXNzIHRoZSBtZWRpYSBlbGVtZW50cywgdGhpc1xuICAgKiBmdW5jdGlvbiBtdXN0IGJlIGludm9rZWQgaW4gcmVzcG9uc2UgdG8gYSB1c2VyIGdlc3R1cmUuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIGFsbCBtZWRpYSBlbGVtZW50cyBpblxuICAgKiAgICAgdGhlIHBvb2wgYXJlIGJsZXNzZWQuXG4gICAqL1xuICBibGVzc0FsbCgpIHtcbiAgICBpZiAodGhpcy5ibGVzc2VkXykge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGJsZXNzUHJvbWlzZXMgPSBbXTtcbiAgICB0aGlzLmZvckVhY2hNZWRpYUVsZW1lbnRfKG1lZGlhRWwgPT4ge1xuICAgICAgYmxlc3NQcm9taXNlcy5wdXNoKHRoaXMuYmxlc3NfKG1lZGlhRWwpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChibGVzc1Byb21pc2VzKVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5ibGVzc2VkXyA9IHRydWU7XG4gICAgICAgIH0pLmNhdGNoKHJlYXNvbiA9PiB7XG4gICAgICAgICAgZGV2KCkuZXhwZWN0ZWRFcnJvcignQU1QLVNUT1JZJywgJ0JsZXNzaW5nIGFsbCBtZWRpYSBmYWlsZWQ6ICcsXG4gICAgICAgICAgICAgIHJlYXNvbik7XG4gICAgICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gbWVkaWFFbCBUaGUgZWxlbWVudCB3aG9zZSB0YXNrIHF1ZXVlIHNob3VsZCBiZVxuICAgKiAgICAgZXhlY3V0ZWQuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBleGVjdXRlTmV4dE1lZGlhRWxlbWVudFRhc2tfKG1lZGlhRWwpIHtcbiAgICBjb25zdCBxdWV1ZSA9IG1lZGlhRWxbRUxFTUVOVF9UQVNLX1FVRVVFX1BST1BFUlRZX05BTUVdO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB0YXNrID0gcXVldWVbMF07XG5cbiAgICBjb25zdCBleGVjdXRpb25GbiA9ICgpID0+IHtcbiAgICAgIHRhc2suZXhlY3V0ZShtZWRpYUVsKVxuICAgICAgICAgIC5jYXRjaChyZWFzb24gPT4gZGV2KCkuZXJyb3IoJ0FNUC1TVE9SWScsIHJlYXNvbikpXG4gICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgLy8gUnVuIHJlZ2FyZGxlc3Mgb2Ygc3VjY2VzcyBvciBmYWlsdXJlIG9mIHRhc2sgZXhlY3V0aW9uLlxuICAgICAgICAgICAgcXVldWUuc2hpZnQoKTtcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZU5leHRNZWRpYUVsZW1lbnRUYXNrXyhtZWRpYUVsKTtcbiAgICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgaWYgKHRhc2sucmVxdWlyZXNTeW5jaHJvbm91c0V4ZWN1dGlvbigpKSB7XG4gICAgICBleGVjdXRpb25Gbi5jYWxsKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRpbWVyXy5kZWxheShleGVjdXRpb25Gbi5iaW5kKHRoaXMpLCAwKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFIVE1MTWVkaWFFbGVtZW50fSBtZWRpYUVsIFRoZSBlbGVtZW50IGZvciB3aGljaCB0aGUgc3BlY2lmaWVkIHRhc2tcbiAgICogICAgIHNob3VsZCBiZSBleGVjdXRlZC5cbiAgICogQHBhcmFtIHshLi9tZWRpYS10YXNrcy5NZWRpYVRhc2t9IHRhc2sgVGhlIHRhc2sgdG8gYmUgZXhlY3V0ZWQuXG4gICAqIEByZXR1cm4geyFQcm9taXNlfSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBzcGVjaWZpZWQgdGFzayBpc1xuICAgKiAgICAgY29tcGxldGVkLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZW5xdWV1ZU1lZGlhRWxlbWVudFRhc2tfKG1lZGlhRWwsIHRhc2spIHtcbiAgICBpZiAoIW1lZGlhRWxbRUxFTUVOVF9UQVNLX1FVRVVFX1BST1BFUlRZX05BTUVdKSB7XG4gICAgICBtZWRpYUVsW0VMRU1FTlRfVEFTS19RVUVVRV9QUk9QRVJUWV9OQU1FXSA9IFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHF1ZXVlID0gbWVkaWFFbFtFTEVNRU5UX1RBU0tfUVVFVUVfUFJPUEVSVFlfTkFNRV07XG4gICAgY29uc3QgaXNRdWV1ZVJ1bm5pbmcgPSBxdWV1ZS5sZW5ndGggIT09IDA7XG5cbiAgICBxdWV1ZS5wdXNoKHRhc2spO1xuXG4gICAgaWYgKCFpc1F1ZXVlUnVubmluZykge1xuICAgICAgdGhpcy5leGVjdXRlTmV4dE1lZGlhRWxlbWVudFRhc2tfKG1lZGlhRWwpO1xuICAgIH1cblxuICAgIHJldHVybiB0YXNrLndoZW5Db21wbGV0ZSgpO1xuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHshTWVkaWFQb29sUm9vdH0gcm9vdFxuICAgKiBAcmV0dXJuIHshTWVkaWFQb29sfVxuICAgKi9cbiAgc3RhdGljIGZvcihyb290KSB7XG4gICAgY29uc3QgZWxlbWVudCA9IHJvb3QuZ2V0RWxlbWVudCgpO1xuICAgIGNvbnN0IGV4aXN0aW5nSWQgPSBlbGVtZW50W1BPT0xfTUVESUFfRUxFTUVOVF9QUk9QRVJUWV9OQU1FXTtcbiAgICBjb25zdCBoYXNJbnN0YW5jZUFsbG9jYXRlZCA9IGV4aXN0aW5nSWQgJiYgaW5zdGFuY2VzW2V4aXN0aW5nSWRdO1xuXG4gICAgaWYgKGhhc0luc3RhbmNlQWxsb2NhdGVkKSB7XG4gICAgICByZXR1cm4gaW5zdGFuY2VzW2V4aXN0aW5nSWRdO1xuICAgIH1cblxuICAgIGNvbnN0IG5ld0lkID0gU3RyaW5nKG5leHRJbnN0YW5jZUlkKyspO1xuICAgIGVsZW1lbnRbUE9PTF9NRURJQV9FTEVNRU5UX1BST1BFUlRZX05BTUVdID0gbmV3SWQ7XG4gICAgaW5zdGFuY2VzW25ld0lkXSA9IG5ldyBNZWRpYVBvb2woXG4gICAgICAgIHRvV2luKHJvb3QuZ2V0RWxlbWVudCgpLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpLFxuICAgICAgICByb290LmdldE1heE1lZGlhRWxlbWVudENvdW50cygpLFxuICAgICAgICBlbGVtZW50ID0+IHJvb3QuZ2V0RWxlbWVudERpc3RhbmNlKGVsZW1lbnQpKTtcblxuICAgIHJldHVybiBpbnN0YW5jZXNbbmV3SWRdO1xuICB9XG59XG5cblxuLyoqXG4gKiBEZWZpbmVzIGEgY29tbW9uIGludGVyZmFjZSBmb3IgZWxlbWVudHMgdGhhdCBjb250YWluIGEgTWVkaWFQb29sLlxuICpcbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIE1lZGlhUG9vbFJvb3Qge1xuICAvKipcbiAgICogQHJldHVybiB7IUVsZW1lbnR9IFRoZSByb290IGVsZW1lbnQgb2YgdGhpcyBtZWRpYSBwb29sLlxuICAgKi9cbiAgZ2V0RWxlbWVudCgpIHt9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IHVudXNlZEVsZW1lbnQgVGhlIGVsZW1lbnQgd2hvc2UgZGlzdGFuY2Ugc2hvdWxkIGJlXG4gICAqICAgIHJldHJpZXZlZC5cbiAgICogQHJldHVybiB7bnVtYmVyfSBBIG51bWVyaWNhbCBkaXN0YW5jZSByZXByZXNlbnRpbmcgaG93IGZhciB0aGUgc3BlY2lmaWVkXG4gICAqICAgICBlbGVtZW50IGlzIGZyb20gdGhlIHVzZXIncyBjdXJyZW50IHBvc2l0aW9uIGluIHRoZSBkb2N1bWVudC4gIFRoZVxuICAgKiAgICAgYWJzb2x1dGUgbWFnbml0dWRlIG9mIHRoaXMgbnVtYmVyIGlzIGlycmVsZXZhbnQ7IHRoZSByZWxhdGl2ZSBtYWduaXR1ZGVcbiAgICogICAgIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIG1lZGlhIGVsZW1lbnRzIHNob3VsZCBiZSBldmljdGVkIChlbGVtZW50c1xuICAgKiAgICAgZnVydGhlc3QgZnJvbSB0aGUgdXNlcidzIGN1cnJlbnQgcG9zaXRpb24gaW4gdGhlIGRvY3VtZW50IGFyZSBldmljdGVkXG4gICAqICAgICBmcm9tIHRoZSBNZWRpYVBvb2wgZmlyc3QpLlxuICAgKi9cbiAgZ2V0RWxlbWVudERpc3RhbmNlKHVudXNlZEVsZW1lbnQpIHt9XG5cblxuICAvKipcbiAgICogQHJldHVybiB7IU9iamVjdDwhTWVkaWFUeXBlLCBudW1iZXI+fSBUaGUgbWF4aW11bSBhbW91bnQgb2YgZWFjaCBtZWRpYVxuICAgKiAgICAgdHlwZSB0byBhbGxvdyB3aXRoaW4gdGhpcyBlbGVtZW50LlxuICAgKi9cbiAgZ2V0TWF4TWVkaWFFbGVtZW50Q291bnRzKCkge31cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NvdXJjZXN9IGZyb20gJy4vc291cmNlcyc7XG5pbXBvcnQge2lzQ29ubmVjdGVkTm9kZX0gZnJvbSAnLi4vLi4vLi4vc3JjL2RvbSc7XG5cblxuXG4vKipcbiAqIFRoZSBuYW1lIGZvciBhIGJvb2xlYW4gcHJvcGVydHkgb24gYW4gZWxlbWVudCBpbmRpY2F0aW5nIHdoZXRoZXIgdGhhdCBlbGVtZW50XG4gKiBoYXMgYWxyZWFkeSBiZWVuIFwiYmxlc3NlZFwiLlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBFTEVNRU5UX0JMRVNTRURfUFJPUEVSVFlfTkFNRSA9ICdfX0FNUF9NRURJQV9JU19CTEVTU0VEX18nO1xuXG5cbi8qKlxuICogQ1NTIGNsYXNzIG5hbWVzIHRoYXQgc2hvdWxkIG5vdCBiZSByZW1vdmVkIGZyb20gYW4gZWxlbWVudCB3aGVuIHN3YXBwaW5nIGl0XG4gKiBpbnRvL291dCBvZiB0aGUgRE9NLlxuICogQGNvbnN0IHshQXJyYXk8c3RyaW5nPn1cbiAqL1xuY29uc3QgUFJPVEVDVEVEX0NTU19DTEFTU19OQU1FUyA9IFtcbiAgJ2ktYW1waHRtbC1wb29sLW1lZGlhJyxcbiAgJ2ktYW1waHRtbC1wb29sLWF1ZGlvJyxcbiAgJ2ktYW1waHRtbC1wb29sLXZpZGVvJyxcbl07XG5cblxuLyoqXG4gKiBBdHRyaWJ1dGUgbmFtZXMgdGhhdCBzaG91bGQgbm90IGJlIHJlbW92ZWQgZnJvbSBhbiBlbGVtZW50IHdoZW4gc3dhcHBpbmcgaXRcbiAqIGludG8vb3V0IG9mIHRoZSBET00uXG4gKiBAY29uc3QgeyFBcnJheTxzdHJpbmc+fVxuICovXG5jb25zdCBQUk9URUNURURfQVRUUklCVVRFUyA9IFtcbiAgJ2lkJyxcbiAgJ3NyYycsXG4gICdjbGFzcycsXG4gICdhdXRvcGxheScsXG5dO1xuXG5cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYSBDU1MgY2xhc3MgbmFtZSBpcyBhbGxvd2VkIHRvIGJlIHJlbW92ZWQgb3IgY29waWVkIGZyb21cbiAqIG1lZGlhIGVsZW1lbnRzLlxuICogQHBhcmFtIHtzdHJpbmd9IGNzc0NsYXNzTmFtZSBUaGUgQ1NTIGNsYXNzIG5hbWUgbmFtZSB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUsIGlmIHRoZSBzcGVjaWZpZWQgQ1NTIGNsYXNzIG5hbWUgaXMgYWxsb3dlZCB0byBiZVxuICogICAgIHJlbW92ZWQgb3IgY29waWVkIGZyb20gbWVkaWEgZWxlbWVudHM7IGZhbHNlIG90aGVyd2lzZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGlzUHJvdGVjdGVkQ3NzQ2xhc3NOYW1lKGNzc0NsYXNzTmFtZSkge1xuICByZXR1cm4gUFJPVEVDVEVEX0NTU19DTEFTU19OQU1FUy5pbmRleE9mKGNzc0NsYXNzTmFtZSkgPj0gMDtcbn1cblxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBhdHRyaWJ1dGUgaXMgYWxsb3dlZCB0byBiZSByZW1vdmVkIG9yIGNvcGllZCBmcm9tXG4gKiBtZWRpYSBlbGVtZW50cy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyaWJ1dGVOYW1lIFRoZSBhdHRyaWJ1dGUgbmFtZSB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUsIGlmIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlIGlzIGFsbG93ZWQgdG8gYmUgcmVtb3ZlZFxuICogICAgIG9yIGNvcGllZCBmcm9tIG1lZGlhIGVsZW1lbnRzOyBmYWxzZSBvdGhlcndpc2UuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBpc1Byb3RlY3RlZEF0dHJpYnV0ZU5hbWUoYXR0cmlidXRlTmFtZSkge1xuICByZXR1cm4gUFJPVEVDVEVEX0FUVFJJQlVURVMuaW5kZXhPZihhdHRyaWJ1dGVOYW1lKSA+PSAwO1xufVxuXG5cbi8qKlxuICogQ29waWVzIGFsbCB1bnByb3RlY3RlZCBDU1MgY2xhc3NlcyBmcm9tIGZyb21FbCB0byB0b0VsLlxuICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gZnJvbUVsIFRoZSBlbGVtZW50IGZyb20gd2hpY2ggQ1NTIGNsYXNzZXMgc2hvdWxkXG4gKiAgICAgYmUgY29waWVkLlxuICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gdG9FbCBUaGUgZWxlbWVudCB0byB3aGljaCBDU1MgY2xhc3NlcyBzaG91bGQgYmVcbiAqICAgICBjb3BpZWQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjb3B5Q3NzQ2xhc3Nlcyhmcm9tRWwsIHRvRWwpIHtcbiAgLy8gUmVtb3ZlIGFsbCBvZiB0aGUgdW5wcm90ZWN0ZWQgQ1NTIGNsYXNzZXMgZnJvbSB0aGUgdG9FbC5cbiAgZm9yIChsZXQgaSA9IHRvRWwuY2xhc3NMaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgY29uc3QgY3NzQ2xhc3MgPSB0b0VsLmNsYXNzTGlzdC5pdGVtKGkpO1xuICAgIGlmICghaXNQcm90ZWN0ZWRDc3NDbGFzc05hbWUoY3NzQ2xhc3MpKSB7XG4gICAgICB0b0VsLmNsYXNzTGlzdC5yZW1vdmUoY3NzQ2xhc3MpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENvcHkgYWxsIG9mIHRoZSB1bnByb3RlY3RlZCBDU1MgY2xhc3NlcyBmcm9tIHRoZSBmcm9tRWwgdG8gdGhlIHRvRWwuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZnJvbUVsLmNsYXNzTGlzdC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGNzc0NsYXNzID0gZnJvbUVsLmNsYXNzTGlzdC5pdGVtKGkpO1xuICAgIGlmICghaXNQcm90ZWN0ZWRDc3NDbGFzc05hbWUoY3NzQ2xhc3MpKSB7XG4gICAgICB0b0VsLmNsYXNzTGlzdC5hZGQoY3NzQ2xhc3MpO1xuICAgIH1cbiAgfVxufVxuXG5cbi8qKlxuICogQ29waWVzIGFsbCB1bnByb3RlY3RlZCBhdHRyaWJ1dGVzIGZyb20gZnJvbUVsIHRvIHRvRWwuXG4gKiBAcGFyYW0geyFIVE1MTWVkaWFFbGVtZW50fSBmcm9tRWwgVGhlIGVsZW1lbnQgZnJvbSB3aGljaCBhdHRyaWJ1dGVzIHNob3VsZFxuICogICAgIGJlIGNvcGllZC5cbiAqIEBwYXJhbSB7IUhUTUxNZWRpYUVsZW1lbnR9IHRvRWwgVGhlIGVsZW1lbnQgdG8gd2hpY2ggYXR0cmlidXRlcyBzaG91bGQgYmVcbiAqICAgICBjb3BpZWQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjb3B5QXR0cmlidXRlcyhmcm9tRWwsIHRvRWwpIHtcbiAgY29uc3QgZnJvbUF0dHJpYnV0ZXMgPSBmcm9tRWwuYXR0cmlidXRlcztcbiAgY29uc3QgdG9BdHRyaWJ1dGVzID0gdG9FbC5hdHRyaWJ1dGVzO1xuXG4gIC8vIFJlbW92ZSBhbGwgb2YgdGhlIHVucHJvdGVjdGVkIGF0dHJpYnV0ZXMgZnJvbSB0aGUgdG9FbC5cbiAgZm9yIChsZXQgaSA9IHRvQXR0cmlidXRlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGNvbnN0IGF0dHJpYnV0ZU5hbWUgPSB0b0F0dHJpYnV0ZXNbaV0ubmFtZTtcbiAgICBpZiAoIWlzUHJvdGVjdGVkQXR0cmlidXRlTmFtZShhdHRyaWJ1dGVOYW1lKSkge1xuICAgICAgdG9FbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ29weSBhbGwgb2YgdGhlIHVucHJvdGVjdGVkIGF0dHJpYnV0ZXMgZnJvbSB0aGUgZnJvbUVsIHRvIHRoZSB0b0VsLlxuICBmb3IgKGxldCBpID0gMDsgaSA8IGZyb21BdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgYXR0cmlidXRlTmFtZSA9IGZyb21BdHRyaWJ1dGVzW2ldLm5hbWU7XG4gICAgY29uc3QgYXR0cmlidXRlVmFsdWUgPSBmcm9tQXR0cmlidXRlc1tpXS52YWx1ZTtcbiAgICBpZiAoIWlzUHJvdGVjdGVkQXR0cmlidXRlTmFtZShhdHRyaWJ1dGVOYW1lKSkge1xuICAgICAgdG9FbC5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlTmFtZSwgYXR0cmlidXRlVmFsdWUpO1xuICAgIH1cbiAgfVxufVxuXG5cblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciB0YXNrcyBleGVjdXRlZCBpbiBvcmRlciBvbiBIVE1MTWVkaWFFbGVtZW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIE1lZGlhVGFzayB7XG4gIGNvbnN0cnVjdG9yKG5hbWUpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy5uYW1lXyA9IG5hbWU7XG5cbiAgICAvKiogQHByaXZhdGUgez9mdW5jdGlvbigpfSAqL1xuICAgIHRoaXMucmVzb2x2ZV8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/ZnVuY3Rpb24oKil9ICovXG4gICAgdGhpcy5yZWplY3RfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQcm9taXNlfSAqL1xuICAgIHRoaXMuY29tcGxldGlvblByb21pc2VfID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5yZXNvbHZlXyA9IHJlc29sdmU7XG4gICAgICB0aGlzLnJlamVjdF8gPSByZWplY3Q7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfSBUaGUgbmFtZSBvZiB0aGlzIHRhc2suXG4gICAqL1xuICBnZXROYW1lKCkge1xuICAgIHJldHVybiB0aGlzLm5hbWVfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCo+fSBBIHByb21pc2UgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSB0YXNrIGhhc1xuICAgKiAgICAgY29tcGxldGVkIGV4ZWN1dGlvbi5cbiAgICovXG4gIHdoZW5Db21wbGV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb21wbGV0aW9uUHJvbWlzZV87XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gbWVkaWFFbCBUaGUgbWVkaWEgZWxlbWVudCBvbiB3aGljaCB0aGlzIHRhc2tcbiAgICogICAgIHNob3VsZCBiZSBleGVjdXRlZC5cbiAgICogQHJldHVybiB7IVByb21pc2V9IEEgcHJvbWlzZSB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHRhc2sgaGFzIGNvbXBsZXRlZFxuICAgKiAgICAgZXhlY3V0aW9uLlxuICAgKi9cbiAgZXhlY3V0ZShtZWRpYUVsKSB7XG4gICAgcmV0dXJuIHRoaXMuZXhlY3V0ZUludGVybmFsKG1lZGlhRWwpXG4gICAgICAgIC50aGVuKHRoaXMucmVzb2x2ZV8sIHRoaXMucmVqZWN0Xyk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshSFRNTE1lZGlhRWxlbWVudH0gdW51c2VkTWVkaWFFbCBUaGUgbWVkaWEgZWxlbWVudCBvbiB3aGljaCB0aGlzXG4gICAqICAgICB0YXNrIHNob3VsZCBiZSBleGVjdXRlZC5cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZXhlY3V0ZUludGVybmFsKHVudXNlZE1lZGlhRWwpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSwgaWYgdGhpcyB0YXNrIG11c3QgYmUgZXhlY3V0ZWQgc3luY2hyb25vdXNseSwgZS5nLlxuICAgKiAgICBpZiBpdCByZXF1aXJlcyBhIHVzZXIgZ2VzdHVyZS5cbiAgICovXG4gIHJlcXVpcmVzU3luY2hyb25vdXNFeGVjdXRpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Kn0gcmVhc29uIFRoZSByZWFzb24gZm9yIGZhaWxpbmcgdGhlIHRhc2suXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGZhaWxUYXNrKHJlYXNvbikge1xuICAgIHRoaXMucmVqZWN0XyhyZWFzb24pO1xuICB9XG59XG5cblxuLyoqXG4gKiBQbGF5cyB0aGUgc3BlY2lmaWVkIG1lZGlhIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBQbGF5VGFzayBleHRlbmRzIE1lZGlhVGFzayB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdwbGF5Jyk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGV4ZWN1dGVJbnRlcm5hbChtZWRpYUVsKSB7XG4gICAgaWYgKCFtZWRpYUVsLnBhdXNlZCkge1xuICAgICAgLy8gV2UgZG8gbm90IHdhbnQgdG8gaW52b2tlIHBsYXkoKSBpZiB0aGUgbWVkaWEgZWxlbWVudCBpcyBhbHJlYWR5XG4gICAgICAvLyBwbGF5aW5nLCBhcyB0aGlzIGNhbiBpbnRlcnJ1cHQgcGxheWJhY2sgaW4gc29tZSBicm93c2Vycy5cbiAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICAvLyBUaGUgcGxheSgpIGludm9jYXRpb24gaXMgd3JhcHBlZCBpbiBhIFByb21pc2UucmVzb2x2ZSguLi4pIGR1ZSB0byB0aGVcbiAgICAvLyBmYWN0IHRoYXQgc29tZSBicm93c2VycyByZXR1cm4gYSBwcm9taXNlIGZyb20gbWVkaWEgZWxlbWVudHMnIHBsYXkoKVxuICAgIC8vIGZ1bmN0aW9uLCB3aGlsZSBvdGhlcnMgcmV0dXJuIGEgYm9vbGVhbi5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG1lZGlhRWwucGxheSgpKTtcbiAgfVxufVxuXG5cbi8qKlxuICogUGF1c2VzIHRoZSBzcGVjaWZpZWQgbWVkaWEgZWxlbWVudC5cbiAqL1xuZXhwb3J0IGNsYXNzIFBhdXNlVGFzayBleHRlbmRzIE1lZGlhVGFzayB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdwYXVzZScpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBleGVjdXRlSW50ZXJuYWwobWVkaWFFbCkge1xuICAgIG1lZGlhRWwucGF1c2UoKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFVubXV0ZXMgdGhlIHNwZWNpZmllZCBtZWRpYSBlbGVtZW50LlxuICovXG5leHBvcnQgY2xhc3MgVW5tdXRlVGFzayBleHRlbmRzIE1lZGlhVGFzayB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCd1bm11dGUnKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZXhlY3V0ZUludGVybmFsKG1lZGlhRWwpIHtcbiAgICBtZWRpYUVsLm11dGVkID0gZmFsc2U7XG4gICAgbWVkaWFFbC5yZW1vdmVBdHRyaWJ1dGUoJ211dGVkJyk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG59XG5cblxuLyoqXG4gKiBNdXRlcyB0aGUgc3BlY2lmaWVkIG1lZGlhIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBNdXRlVGFzayBleHRlbmRzIE1lZGlhVGFzayB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCdtdXRlJyk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGV4ZWN1dGVJbnRlcm5hbChtZWRpYUVsKSB7XG4gICAgbWVkaWFFbC5tdXRlZCA9IHRydWU7XG4gICAgbWVkaWFFbC5zZXRBdHRyaWJ1dGUoJ211dGVkJywgJycpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxufVxuXG5cbi8qKlxuICogU2Vla3MgdGhlIHNwZWNpZmllZCBtZWRpYSBlbGVtZW50IHRvIHRoZSBiZWdpbm5pbmcuXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXdpbmRUYXNrIGV4dGVuZHMgTWVkaWFUYXNrIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ3Jld2luZCcpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBleGVjdXRlSW50ZXJuYWwobWVkaWFFbCkge1xuICAgIG1lZGlhRWwuY3VycmVudFRpbWUgPSAwO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxufVxuXG5cbi8qKlxuICogTG9hZHMgdGhlIHNwZWNpZmllZCBtZWRpYSBlbGVtZW50LlxuICovXG5leHBvcnQgY2xhc3MgTG9hZFRhc2sgZXh0ZW5kcyBNZWRpYVRhc2sge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcignbG9hZCcpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBleGVjdXRlSW50ZXJuYWwobWVkaWFFbCkge1xuICAgIG1lZGlhRWwubG9hZCgpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxufVxuXG5cbi8qKlxuICogXCJCbGVzc2VzXCIgdGhlIHNwZWNpZmllZCBtZWRpYSBlbGVtZW50IGZvciBmdXR1cmUgcGxheWJhY2sgd2l0aG91dCBhIHVzZXJcbiAqIGdlc3R1cmUuICBJbiBvcmRlciBmb3IgdGhpcyB0byBibGVzcyB0aGUgbWVkaWEgZWxlbWVudCwgdGhpcyBmdW5jdGlvbiBtdXN0XG4gKiBiZSBpbnZva2VkIGluIHJlc3BvbnNlIHRvIGEgdXNlciBnZXN0dXJlLlxuICovXG5leHBvcnQgY2xhc3MgQmxlc3NUYXNrIGV4dGVuZHMgTWVkaWFUYXNrIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoJ2JsZXNzJyk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHJlcXVpcmVzU3luY2hyb25vdXNFeGVjdXRpb24oKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGV4ZWN1dGVJbnRlcm5hbChtZWRpYUVsKSB7XG4gICAgY29uc3QgaXNNdXRlZCA9IG1lZGlhRWwubXV0ZWQ7XG4gICAgbWVkaWFFbC5tdXRlZCA9IGZhbHNlO1xuICAgIGlmIChpc011dGVkKSB7XG4gICAgICBtZWRpYUVsLm11dGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG59XG5cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBzb3VyY2VzIG9mIHRoZSBzcGVjaWZpZWQgbWVkaWEgZWxlbWVudC5cbiAqL1xuZXhwb3J0IGNsYXNzIFVwZGF0ZVNvdXJjZXNUYXNrIGV4dGVuZHMgTWVkaWFUYXNrIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVNvdXJjZXN9IG5ld1NvdXJjZXMgVGhlIHNvdXJjZXMgdG8gd2hpY2ggdGhlIG1lZGlhIGVsZW1lbnQgc2hvdWxkXG4gICAqICAgICBiZSB1cGRhdGVkLlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS92c3luYy1pbXBsLlZzeW5jfSB2c3luY1xuICAgKi9cbiAgY29uc3RydWN0b3IobmV3U291cmNlcywgdnN5bmMpIHtcbiAgICBzdXBlcigndXBkYXRlLXNyYycpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVNvdXJjZXN9ICovXG4gICAgdGhpcy5uZXdTb3VyY2VzXyA9IG5ld1NvdXJjZXM7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvdnN5bmMtaW1wbC5Wc3luY30gKi9cbiAgICB0aGlzLnZzeW5jXyA9IHZzeW5jO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBleGVjdXRlSW50ZXJuYWwobWVkaWFFbCkge1xuICAgIFNvdXJjZXMucmVtb3ZlRnJvbShtZWRpYUVsKTtcbiAgICB0aGlzLm5ld1NvdXJjZXNfLmFwcGx5VG9FbGVtZW50KG1lZGlhRWwpO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxufVxuXG5cbi8qKlxuICogU3dhcHMgYSBtZWRpYSBlbGVtZW50IGludG8gdGhlIERPTSwgaW4gdGhlIHBsYWNlIG9mIGFub3RoZXIgbWVkaWEgZWxlbWVudC5cbiAqL1xuZXhwb3J0IGNsYXNzIFN3YXBJbnRvRG9tVGFzayBleHRlbmRzIE1lZGlhVGFzayB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFIVE1MTWVkaWFFbGVtZW50fSByZXBsYWNlZE1lZGlhRWwgVGhlIGVsZW1lbnQgdG8gYmUgcmVwbGFjZWQgYnlcbiAgICogICAgIHRoZSBtZWRpYSBlbGVtZW50IG9uIHdoaWNoIHRoaXMgdGFzayBpcyBleGVjdXRlZC5cbiAgICogQHBhcmFtIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvdnN5bmMtaW1wbC5Wc3luY30gdnN5bmNcbiAgICovXG4gIGNvbnN0cnVjdG9yKHJlcGxhY2VkTWVkaWFFbCwgdnN5bmMpIHtcbiAgICBzdXBlcignc3dhcC1pbnRvLWRvbScpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUhUTUxNZWRpYUVsZW1lbnR9ICovXG4gICAgdGhpcy5yZXBsYWNlZE1lZGlhRWxfID0gcmVwbGFjZWRNZWRpYUVsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3ZzeW5jLWltcGwuVnN5bmN9ICovXG4gICAgdGhpcy52c3luY18gPSB2c3luYztcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZXhlY3V0ZUludGVybmFsKG1lZGlhRWwpIHtcbiAgICBpZiAoIWlzQ29ubmVjdGVkTm9kZSh0aGlzLnJlcGxhY2VkTWVkaWFFbF8pKSB7XG4gICAgICB0aGlzLmZhaWxUYXNrKCdDYW5ub3Qgc3dhcCBtZWRpYSBmb3IgZWxlbWVudCB0aGF0IGlzIG5vdCBpbiBET00uJyk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgY29weUNzc0NsYXNzZXModGhpcy5yZXBsYWNlZE1lZGlhRWxfLCBtZWRpYUVsKTtcbiAgICBjb3B5QXR0cmlidXRlcyh0aGlzLnJlcGxhY2VkTWVkaWFFbF8sIG1lZGlhRWwpO1xuICAgIHRoaXMucmVwbGFjZWRNZWRpYUVsXy5wYXJlbnRFbGVtZW50XG4gICAgICAgIC5yZXBsYWNlQ2hpbGQobWVkaWFFbCwgdGhpcy5yZXBsYWNlZE1lZGlhRWxfKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFN3YXBzIGEgbWVkaWEgZWxlbWVudCBvdXQgdGhlIERPTSwgaW4gdGhlIHBsYWNlIG9mIGEgcGxhY2Vob2xkZXIgbWVkaWFcbiAqIGVsZW1lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBTd2FwT3V0T2ZEb21UYXNrIGV4dGVuZHMgTWVkaWFUYXNrIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUhUTUxNZWRpYUVsZW1lbnR9IHBsYWNlaG9sZGVyTWVkaWFFbCBUaGUgZWxlbWVudCB0byBiZSByZXBsYWNlZCBieVxuICAgKiAgICAgdGhlIG1lZGlhIGVsZW1lbnQgb24gd2hpY2ggdGhpcyB0YXNrIGlzIGV4ZWN1dGVkLlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS92c3luYy1pbXBsLlZzeW5jfSB2c3luY1xuICAgKi9cbiAgY29uc3RydWN0b3IocGxhY2Vob2xkZXJNZWRpYUVsLCB2c3luYykge1xuICAgIHN1cGVyKCdzd2FwLW91dC1vZi1kb20nKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFIVE1MTWVkaWFFbGVtZW50fSAqL1xuICAgIHRoaXMucGxhY2Vob2xkZXJNZWRpYUVsXyA9IHBsYWNlaG9sZGVyTWVkaWFFbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuLi8uLi8uLi9zcmMvc2VydmljZS92c3luYy1pbXBsLlZzeW5jfSAqL1xuICAgIHRoaXMudnN5bmNfID0gdnN5bmM7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGV4ZWN1dGVJbnRlcm5hbChtZWRpYUVsKSB7XG4gICAgY29weUNzc0NsYXNzZXMobWVkaWFFbCwgdGhpcy5wbGFjZWhvbGRlck1lZGlhRWxfKTtcbiAgICBjb3B5QXR0cmlidXRlcyhtZWRpYUVsLCB0aGlzLnBsYWNlaG9sZGVyTWVkaWFFbF8pO1xuICAgIG1lZGlhRWwucGFyZW50RWxlbWVudC5yZXBsYWNlQ2hpbGQodGhpcy5wbGFjZWhvbGRlck1lZGlhRWxfLCBtZWRpYUVsKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHtFdmVudFR5cGV9IGZyb20gJy4vZXZlbnRzJztcbmltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAnLi4vLi4vLi4vc3JjL29ic2VydmFibGUnO1xuXG5cbi8qKlxuICogVHlwZXMgb2Ygc3RhdGUgY2hhbmdlcyB0aGF0IGNhbiBiZSBjb25zdW1lZC5cbiAqIEBlbnVtIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBTdGF0ZUNoYW5nZVR5cGUgPSB7XG4gIEFDVElWRV9QQUdFOiAwLFxuICBCT09LRU5EX0VOVEVSOiAxLFxuICBCT09LRU5EX0VYSVQ6IDIsXG4gIEVORDogMyxcbn07XG5cblxuLyoqIEB0eXBlZGVmIHt7dHlwZTogIVN0YXRlQ2hhbmdlVHlwZSwgdmFsdWU6ICp9fSAqL1xuZXhwb3J0IGxldCBTdGF0ZUNoYW5nZUV2ZW50RGVmO1xuXG5cbi8qKlxuICogU3RhdGUgc3RvcmUgdG8gZGVjb3VwbGUgbmF2aWdhdGlvbiBjaGFuZ2VzIGZyb20gY29uc3VtZXJzLlxuICovXG5leHBvcnQgY2xhc3MgTmF2aWdhdGlvblN0YXRlIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IHN0b3J5RWxlbWVudFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6UHJvbWlzZTxib29sZWFuPn0gaGFzQm9va2VuZFxuICAgKi9cbiAgY29uc3RydWN0b3Ioc3RvcnlFbGVtZW50LCBoYXNCb29rZW5kKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IWZ1bmN0aW9uKCk6UHJvbWlzZTxib29sZWFuPn0gKi9cbiAgICB0aGlzLmhhc0Jvb2tlbmRfID0gaGFzQm9va2VuZDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IU9ic2VydmFibGU8U3RhdGVDaGFuZ2VFdmVudERlZj59ICovXG4gICAgdGhpcy5vYnNlcnZhYmxlXyA9IG5ldyBPYnNlcnZhYmxlKCk7XG5cbiAgICB0aGlzLmF0dGFjaEV2ZW50c18oc3RvcnlFbGVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBzdG9yeUVsZW1lbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGF0dGFjaEV2ZW50c18oc3RvcnlFbGVtZW50KSB7XG4gICAgc3RvcnlFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLlNIT1dfQk9PS0VORCwgKCkgPT4ge1xuICAgICAgdGhpcy5maXJlXyhTdGF0ZUNoYW5nZVR5cGUuQk9PS0VORF9FTlRFUik7XG4gICAgICB0aGlzLmZpcmVfKFN0YXRlQ2hhbmdlVHlwZS5FTkQpO1xuICAgIH0pO1xuXG4gICAgc3RvcnlFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoRXZlbnRUeXBlLkNMT1NFX0JPT0tFTkQsICgpID0+IHtcbiAgICAgIHRoaXMuZmlyZV8oU3RhdGVDaGFuZ2VUeXBlLkJPT0tFTkRfRVhJVCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQHBhcmFtIHtmdW5jdGlvbighU3RhdGVDaGFuZ2VFdmVudERlZik6dm9pZH0gc3RhdGVDaGFuZ2VGbiAqL1xuICBvYnNlcnZlKHN0YXRlQ2hhbmdlRm4pIHtcbiAgICB0aGlzLm9ic2VydmFibGVfLmFkZChzdGF0ZUNoYW5nZUZuKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcGFnZUluZGV4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0b3RhbFBhZ2VzXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0X3BhZ2VJZFxuICAgKi9cbiAgLy8gVE9ETyhhbGFub3JvemNvKTogcGFzcyB3aGV0aGVyIGNoYW5nZSB3YXMgYXV0b21hdGljIG9yIG9uIHVzZXIgYWN0aW9uXG4gIHVwZGF0ZUFjdGl2ZVBhZ2UocGFnZUluZGV4LCB0b3RhbFBhZ2VzLCBvcHRfcGFnZUlkKSB7XG4gICAgY29uc3QgY2hhbmdlVmFsdWUgPSB7cGFnZUluZGV4LCB0b3RhbFBhZ2VzfTtcblxuICAgIGlmIChvcHRfcGFnZUlkKSB7XG4gICAgICBjaGFuZ2VWYWx1ZS5wYWdlSWQgPSBvcHRfcGFnZUlkO1xuICAgIH1cblxuICAgIHRoaXMuZmlyZV8oU3RhdGVDaGFuZ2VUeXBlLkFDVElWRV9QQUdFLCBjaGFuZ2VWYWx1ZSk7XG5cbiAgICBpZiAocGFnZUluZGV4ID49IHRvdGFsUGFnZXMgLSAxKSB7XG4gICAgICB0aGlzLmhhc0Jvb2tlbmRfKCkudGhlbihoYXNCb29rZW5kID0+IHtcbiAgICAgICAgaWYgKCFoYXNCb29rZW5kKSB7XG4gICAgICAgICAgdGhpcy5maXJlXyhTdGF0ZUNoYW5nZVR5cGUuRU5EKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVN0YXRlQ2hhbmdlVHlwZX0gdHlwZVxuICAgKiBAcGFyYW0geyo9fSBvcHRfY2hhbmdlVmFsdWVcbiAgICovXG4gIGZpcmVfKHR5cGUsIG9wdF9jaGFuZ2VWYWx1ZSkge1xuICAgIHRoaXMub2JzZXJ2YWJsZV8uZmlyZSh7dHlwZSwgdmFsdWU6IG9wdF9jaGFuZ2VWYWx1ZX0pO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBBIHdoaXRlbGlzdCBvZiBkamIyYSBoYXNoZXMgb2YgcHVibGlzaGVyIG9yaWdpbnMuXG4gKiBAY29uc3QgeyFBcnJheTxzdHJpbmc+fVxuICovXG5leHBvcnQgY29uc3QgT1JJR0lOX1dISVRFTElTVCA9IFtcbiAgJzEwMDYxNjM0MjknLFxuICAnMTAwODE2Mjk1MScsXG4gICcxMDA4OTEwOCcsXG4gICcxMDE2MDg4MDgnLFxuICAnMTAxOTM0ODQ5NCcsXG4gICcxMDI0NzQ1NDYwJyxcbiAgJzEwMjU2ODMxMjcnLFxuICAnMTA0MDM4NzUzNycsXG4gICcxMDQyMDY3MTk0JyxcbiAgJzEwNDg2Mzk2MzknLFxuICAnMTA0ODc2ODEyNCcsXG4gICcxMDU1MzA5MjQ2JyxcbiAgJzEwNjE3NzQzNTQnLFxuICAnMTA2NjY1NjkwMicsXG4gICcxMDgwNTUzMTcxJyxcbiAgJzEwODEzODI3MjMnLFxuICAnMTA4NTI3ODA1MCcsXG4gICcxMDg3NzM4NzIyJyxcbiAgJzEwOTc4NzY2NDInLFxuICAnMTA5ODExNTU4NicsXG4gICcxMTIwNTQ5MTc1JyxcbiAgJzExMjI2Mzc3MDcnLFxuICAnMTEyMzc5NjM3OScsXG4gICcxMTM3Mjg0OTQ0JyxcbiAgJzExNDgwNTg1NzUnLFxuICAnMTE1ODEwNjE5MScsXG4gICcxMTYyNTE3Nzc2JyxcbiAgJzExNjc5MjgxMDEnLFxuICAnMTE3MjM5OTI5MicsXG4gICcxMTgwNTU1ODYzJyxcbiAgJzExODI5OTY4OTknLFxuICAnMTE5MTUzMDM4NScsXG4gICcxMTkzMDg2MzAyJyxcbiAgJzEyMDM2Mjk1MjcnLFxuICAnMTIwNjIwMjM2OCcsXG4gICcxMjA5Mzk2MzA3JyxcbiAgJzEyMTA1MDg1ODAnLFxuICAnMTIxMjkwNTk2MCcsXG4gICcxMjE5NjYzOTcwJyxcbiAgJzEyMjE5NDY4MjcnLFxuICAnMTIyNDU2MzEyMycsXG4gICcxMjI0NTc1MjQwJyxcbiAgJzEyMjc3NjE0MycsXG4gICcxMjM1ODcwNDIyJyxcbiAgJzEyMzk2MTI5MjQnLFxuICAnMTI2NjY4Njg4MCcsXG4gICcxMjY3MDU4NDk5JyxcbiAgJzEyNzUxMTI0ODMnLFxuICAnMTI3OTQyMDQ5NScsXG4gICcxMjkxMjg1Mjg1JyxcbiAgJzEyOTE5NjQ1OCcsXG4gICcxMjk2MzczNjA1JyxcbiAgJzEzMDQ5MDg1OTcnLFxuICAnMTMxNDEyMjI0NycsXG4gICcxMzIzNzE2NDA3JyxcbiAgJzEzMzEwMjEyNzInLFxuICAnMTMzNzA4NTEzNicsXG4gICcxMzQzMDMyNDY3JyxcbiAgJzEzNDgxMTE1MDYnLFxuICAnMTM1ODAzNjY4OCcsXG4gICcxMzU4Mjc1MTYwJyxcbiAgJzEzNjI3MDAxMDcnLFxuICAnMTM2NjI5ODc3MScsXG4gICcxMzY5NDg4NDYnLFxuICAnMTM3MDg2MzY1NCcsXG4gICcxMzg0MTYxNTIzJyxcbiAgJzEzODQ4ODU1NDUnLFxuICAnMTM5MDE5NTMxOScsXG4gICcxMzkwNDIyMDQxJyxcbiAgJzEzOTI5NzM4MDgnLFxuICAnMTQwMzAxNTg1OScsXG4gICcxNDA4MjEzNDk1JyxcbiAgJzE0MDk4MTUwNDcnLFxuICAnMTQxNjIwMzE3MicsXG4gICcxNDE2MzM2NTc2JyxcbiAgJzE0MjA5NjQzNzAnLFxuICAnMTQyNDAzODY3NCcsXG4gICcxNDI2MjA1MTMwJyxcbiAgJzE0Mjc5MzEyNycsXG4gICcxNDI5NzY4MzIzJyxcbiAgJzE0MzM1MzUwNzknLFxuICAnMTQzNjU4OTQ2NicsXG4gICcxNDUxODY1NDExJyxcbiAgJzE0NTI1NTU5NDgnLFxuICAnMTQ1MjYzMTM1NScsXG4gICcxNDU0NDcxNzA0JyxcbiAgJzE0NTY0NTIzNTMnLFxuICAnMTQ2MjA4NjExNicsXG4gICcxNDYzODczMzc5JyxcbiAgJzE0NzI1Mzc3NjknLFxuICAnMTQ3NDEwNzQ4NScsXG4gICcxNDc2NzQwMTcyJyxcbiAgJzE0OTEyMDQ5NTknLFxuICAnMTUwMjE4MzMwMCcsXG4gICcxNTAyMTgzMzAzJyxcbiAgJzE1MDYzNTYwNzMnLFxuICAnMTUxMDY5MzQ5NCcsXG4gICcxNTEyMjAwOTc2JyxcbiAgJzE1MTUxOTIxMzYnLFxuICAnMTUxNjA0NDg5NCcsXG4gICcxNTI3OTU1OTg3JyxcbiAgJzE1MzE2MjI4MjcnLFxuICAnMTU0MjExMzI0NicsXG4gICcxNTQyODkwMTA4JyxcbiAgJzE1NDQwNzEwMzYnLFxuICAnMTU0NDkwNDkxOCcsXG4gICcxNTQ2ODAwOTInLFxuICAnMTU0ODA0MzYyOCcsXG4gICcxNTUxMjE2MjI1JyxcbiAgJzE1NTQzMDIxMzknLFxuICAnMTU2MDU1NjU2OCcsXG4gICcxNTYxMDUzMjknLFxuICAnMTU2NTc2MTY2MycsXG4gICcxNTY4NjQ1ODgyJyxcbiAgJzE1NzQ2MzIyMzYnLFxuICAnMTU4NzUzMTU2OCcsXG4gICcxNTk3ODA1NDgxJyxcbiAgJzE2MDQ3MTQ4NDAnLFxuICAnMTYwNTk2NDM3NScsXG4gICcxNjA2NzcxOTM5JyxcbiAgJzE2MDY4NDUyNzInLFxuICAnMTYyODQzMjA2NicsXG4gICcxNjI5MDA5OTM0JyxcbiAgJzE2MzM2OTk3NjcnLFxuICAnMTYzODczMzEyOScsXG4gICcxNjM5Mjk1ODUxJyxcbiAgJzE2Mzk4NDM2MDEnLFxuICAnMTY0MTM2MTMwMycsXG4gICcxNjQxNzU1MjA4JyxcbiAgJzE2NDUzNjc1NzEnLFxuICAnMTY1MTgzNDM4MScsXG4gICcxNjUyMTg3NDgnLFxuICAnMTY1NzY1NTM4NCcsXG4gICcxNjYwODA0NDEnLFxuICAnMTY2NTUwMDc0JyxcbiAgJzE2NzA2NTE0MicsXG4gICcxNjc0NTczNjUnLFxuICAnMTY5MjIwNTgyMScsXG4gICcxNzIwNjI4MjInLFxuICAnMTcyNzAwMDIxMycsXG4gICcxNzI5NDA2NDM4JyxcbiAgJzE3MzQzNDM3MjYnLFxuICAnMTc1MDI3NDU2NycsXG4gICcxNzUyMTk5MTcyJyxcbiAgJzE3NTg1MDY4ODQnLFxuICAnMTc2MDk5NTQ2JyxcbiAgJzE3NjIwNzU3MjInLFxuICAnMTc2Mjc3OTYxOScsXG4gICcxNzY1NzYxNjYxJyxcbiAgJzE3NjY0MDg0ODInLFxuICAnMTc3ODgxNDczMScsXG4gICcxNzg2ODIxNzA3JyxcbiAgJzE3OTA0MjE0NDcnLFxuICAnMTc5MzM2NDEyMicsXG4gICcxNzk2NjMxNDg3JyxcbiAgJzE3OTk1NDgxNCcsXG4gICcxODE0MzMzMzI2JyxcbiAgJzE4MjA3MTkxMjknLFxuICAnMTgyODMwMjQzNycsXG4gICcxODMxNDQ5NjMyJyxcbiAgJzE4NDQwOTcxNzknLFxuICAnMTg1NzcwMzU2OScsXG4gICcxODYyNDI5MTM0JyxcbiAgJzE4NjYyODg1ODAnLFxuICAnMTg2ODgyNTYyMycsXG4gICcxODczMTc1Njk4JyxcbiAgJzE4Nzg4NDA1NDgnLFxuICAnMTg4MTUzODg2JyxcbiAgJzE4ODU5NDk4MDYnLFxuICAnMTg5MDY4NDQ5MycsXG4gICcxODkxMTM2MDMzJyxcbiAgJzE4OTc4NzcwMjcnLFxuICAnMTkwMDU4MjEyJyxcbiAgJzE5MTEyNzMxMzgnLFxuICAnMTkyMzMzNjknLFxuICAnMTkyNDM5NDU1MCcsXG4gICcxOTI2NDQ0NzA5JyxcbiAgJzE5Mjk0Njg5NCcsXG4gICcxOTMyMzMyMTk1JyxcbiAgJzE5MzQ1NDM0MjEnLFxuICAnMTk0NDcwNzM4MCcsXG4gICcxOTQ4OTg3MDQ5JyxcbiAgJzE5NTg0NzYxNzUnLFxuICAnMTk2MDMwOTgyNycsXG4gICcxOTYwMzg0NTQwJyxcbiAgJzE5NzQ3ODYwMScsXG4gICcxOTgwNjA5NDM0JyxcbiAgJzE5ODUxNDc4NScsXG4gICcyMDAzMTE0MjY4JyxcbiAgJzIwMjUxNDg1MjcnLFxuICAnMjAyNTY1MzI1NCcsXG4gICcyMDM0Njc0NTQyJyxcbiAgJzIwMzg2MjYwMzcnLFxuICAnMjAzODczMzcyNScsXG4gICcyMDUwMjE4NjU4JyxcbiAgJzIwNTEyMDQ3NTYnLFxuICAnMjA1Mjk5Nzk5OScsXG4gICcyMDYyOTkxMzcwJyxcbiAgJzIwNjQ5NDU1NTInLFxuICAnMjA3MjE1NzY5MScsXG4gICcyMDc2OTc0NDgwJyxcbiAgJzIwODM0ODIwNCcsXG4gICcyMTA5NzQwMTMzJyxcbiAgJzIxMTQ5NzQyMTknLFxuICAnMjExNjgyNTM0MicsXG4gICcyMTE4MjM5NjY1JyxcbiAgJzIxMjQzNzU0NTQnLFxuICAnMjEyNjg2MDUwNycsXG4gICcyMTI2OTAwODYnLFxuICAnMjEyODY2Mjk0NycsXG4gICcyMTMxNDE4MzU5JyxcbiAgJzIxMzQ4OTEwODMnLFxuICAnMjEzODE5NDIzMycsXG4gICcyMTM5OTI1ODc3JyxcbiAgJzIxNTAyOTYwOTUnLFxuICAnMjE1MTIwMDQxMycsXG4gICcyMTYwOTk3OTc5JyxcbiAgJzIxNjMzMzMxMDAnLFxuICAnMjE2NDg5MTQyMScsXG4gICcyMTgzOTE2MTY1JyxcbiAgJzIxODU1NDQxNzInLFxuICAnMjE5OTgzODE4NCcsXG4gICcyMjAxMDMyMzMnLFxuICAnMjIwNjMyODYxJyxcbiAgJzIyMDc4MzI4MDcnLFxuICAnMjIxNDQzMjg4OCcsXG4gICcyMjIxNTQ4ODQyJyxcbiAgJzIyMzEyMTU4MzAnLFxuICAnMjIzMjU2MjU5NCcsXG4gICcyMjM2ODQ5MTIxJyxcbiAgJzIyNDY5NzgwMzcnLFxuICAnMjI0NzQxOTMxNicsXG4gICcyMjUwMzkwMDU1JyxcbiAgJzIyNTA3NjI4MjUnLFxuICAnMjI1MjU1OTE5NCcsXG4gICcyMjU0NjE5Nzg1JyxcbiAgJzIyNzEyMTM2NzEnLFxuICAnMjI3NzQ1ODkyOScsXG4gICcyMjc4NTE2MjYwJyxcbiAgJzIyODQzMzIwNzgnLFxuICAnMjI5OTc1ODgxOScsXG4gICcyMzExMjkwMDQ0JyxcbiAgJzIzMjUzMzMwMTAnLFxuICAnMjMyNjMyODU4NScsXG4gICcyMzQyOTI0Mzc5JyxcbiAgJzIzNjA4NTQ4MzknLFxuICAnMjM2MjE5MTQ1OScsXG4gICcyMzczNDM3NTM0JyxcbiAgJzIzNzQzMzgwODgnLFxuICAnMjM3NTM4OTI1NCcsXG4gICcyMzg4MjIyOTY2JyxcbiAgJzIzOTM3NTQyMjcnLFxuICAnMjQwNjExMjU2NScsXG4gICcyNDEzMDM4NjU2JyxcbiAgJzI0MTQ1MzM0NTAnLFxuICAnMjQxNTA1NTY0JyxcbiAgJzI0MjIxOTg5NTInLFxuICAnMjQyNjM2MDY5NCcsXG4gICcyNDI3MzcxODcxJyxcbiAgJzI0Mjg4NTc0MDMnLFxuICAnMjQzNDYzMzk4NicsXG4gICcyNDM4NTQ5NTQzJyxcbiAgJzI0NTA4ODE0MzMnLFxuICAnMjQ1MTQ4NTExNicsXG4gICcyNDY1MjQ0MzAzJyxcbiAgJzI0NzE0MTIyNzQnLFxuICAnMjQ3MjU5MTMzMycsXG4gICcyNDc5ODg1ODgyJyxcbiAgJzI0ODM4MDAwOTMnLFxuICAnMjQ4NjI1ODU0MycsXG4gICcyNDg3ODI4MDk4JyxcbiAgJzI0OTEyNzk2NTMnLFxuICAnMjQ5NzkyNTI4MicsXG4gICcyNDk4NDE1MzAwJyxcbiAgJzI1MDA3NDMyOTEnLFxuICAnMjUwMjQ1MDAnLFxuICAnMjUwNDY0Mjk0JyxcbiAgJzI1MTI3Njg4MTknLFxuICAnMjUxNDAwOTk1MCcsXG4gICcyNTE0OTg3NTcxJyxcbiAgJzI1MTc0OTM3NTYnLFxuICAnMjUxODM5MzU0JyxcbiAgJzI1MjMxODcwJyxcbiAgJzI1MjkxMzgwMzgnLFxuICAnMjUyOTMxOTAxMCcsXG4gICcyNTU3NTI3OTQnLFxuICAnMjU2MzEyODEyOCcsXG4gICcyNTY5NDI0MzMyJyxcbiAgJzI1ODAxNTI4NzMnLFxuICAnMjU4Nzg1MDI2NScsXG4gICcyNTg4Mjc3ODg1JyxcbiAgJzI2MDAzNjgzNTUnLFxuICAnMjYwMjU5NTIwMicsXG4gICcyNjA2NzE1OTk1JyxcbiAgJzI2MTI5Njc0NTMnLFxuICAnMjYxMzA3MjM3OScsXG4gICcyNjE2ODQ2MDU2JyxcbiAgJzI2MTk1Mzc3OTcnLFxuICAnMjYyNzc2MTc0NScsXG4gICcyNjI5ODEwNTI1JyxcbiAgJzI2MzIxOTQ4MDQnLFxuICAnMjYzNTU4ODc5MicsXG4gICcyNjM2MzkxNTQxJyxcbiAgJzI2MzcwODUzMzknLFxuICAnMjY1MjYzNDkyMScsXG4gICcyNjYyMjA3NjkxJyxcbiAgJzI2NzEyOTA1NTcnLFxuICAnMjY3MjU5OTkyOScsXG4gICcyNjg4NjczNzg0JyxcbiAgJzI2OTAyMzUxNjgnLFxuICAnMjcwNTczNjQzMicsXG4gICcyNzA1ODAwNDInLFxuICAnMjcxMzExMjkyMicsXG4gICcyNzE4MjczNTk0JyxcbiAgJzI3MTg0NDYzNTAnLFxuICAnMjcyMDQ5Njg4NScsXG4gICcyNzIzNDM0Mjc2JyxcbiAgJzI3MjUxNDUxMzUnLFxuICAnMjczMjM5ODg3OScsXG4gICcyNzM1ODA1NDMnLFxuICAnMjczODE1NTY5MCcsXG4gICcyNzQxNjczODA5JyxcbiAgJzI3NDk4MzUxODcnLFxuICAnMjc1NDk5NzEwOScsXG4gICcyNzU5OTc2OTUyJyxcbiAgJzI3NjE1MDgyOTInLFxuICAnMjc2MjMwMjY0OCcsXG4gICcyNzY2NzU0Njg5JyxcbiAgJzI3NzE4Mzk3MjknLFxuICAnMjc3NDE3NTMwMicsXG4gICcyNzg0NDc5ODYwJyxcbiAgJzI3ODc4NTMzNjgnLFxuICAnMjc5NTE4MjA3OCcsXG4gICcyNzk3ODM5MTIxJyxcbiAgJzI3OTc4NDQzNjcnLFxuICAnMjc5ODEwNDA5MycsXG4gICcyODEyNjcyNzQzJyxcbiAgJzI4MjA4NjQ5NTQnLFxuICAnMjgyNTU2NDIxNScsXG4gICcyODMwNjYwNzA1JyxcbiAgJzI4MzUzMzEyODcnLFxuICAnMjgzNjYxMTQ3JyxcbiAgJzI4NDU4MDM0MTEnLFxuICAnMjg1MjYyNzMyNicsXG4gICcyODYxMTM0NDc1JyxcbiAgJzI4NjY0NDgyMDcnLFxuICAnMjg2NjQ3MDMzMScsXG4gICcyODcyOTgwNjU5JyxcbiAgJzI4ODI0NjM0MScsXG4gICcyODg3OTYwMTU2JyxcbiAgJzI4OTM0NjcxNDQnLFxuICAnMjg5MzU5MDU0MicsXG4gICcyOTExMzc4NTg2JyxcbiAgJzI5MTQyNDMxNTMnLFxuICAnMjkxNzkwOTg1OCcsXG4gICcyOTE5NDQ3OTg3JyxcbiAgJzI5Mjc3NjMwMzYnLFxuICAnMjkzMDUzMTExMCcsXG4gICcyOTMwODE4NDk4JyxcbiAgJzI5MzMyODc2NjYnLFxuICAnMjkzMzY3ODY5MScsXG4gICcyOTM0NDEyMzQ4JyxcbiAgJzI5MzkzMzg5NTcnLFxuICAnMjk0MTIwNzg5MycsXG4gICcyOTQyODEzNjUnLFxuICAnMjk0MjgxNjYyJyxcbiAgJzI5NjA4NDc2NicsXG4gICcyOTcyODQ5NTM3JyxcbiAgJzMwMDM2MjE0NTQnLFxuICAnMzAxODQ5NjM3MicsXG4gICczMDE4NjQ0Nzc0JyxcbiAgJzMwMjIwOTIzNzcnLFxuICAnMzAyMjUxNDc4JyxcbiAgJzMwMjQyODQ3OTEnLFxuICAnMzAyODU1ODc2NycsXG4gICczMDM0ODA3NzAzJyxcbiAgJzMwMzY4MDkyOTAnLFxuICAnMzAzNzMyOTIxJyxcbiAgJzMwNDA5NzI4MTcnLFxuICAnMzA2MDk4NTk0NycsXG4gICczMDYzNjUxODM5JyxcbiAgJzMwNzUzMTM4NjAnLFxuICAnMzA5MDM5OTkyMicsXG4gICczMDkyMTcyMTQwJyxcbiAgJzMxMDgzMzM3NzknLFxuICAnMzEwOTY3NDkyMCcsXG4gICczMTIxMTY3MzA3JyxcbiAgJzMxMjk3Mjk5ODUnLFxuICAnMzEzMjUwNzg0MCcsXG4gICczMTMzMzY5OTM4JyxcbiAgJzMxNDQwODY2NDUnLFxuICAnMzE0NDc0MTA4MCcsXG4gICczMTUzMTcyMDk1JyxcbiAgJzMxNTYwMDExODAnLFxuICAnMzE2MjI2NTQxOScsXG4gICczMTcyODc2MTI2JyxcbiAgJzMxODEwOTAyMTQnLFxuICAnMzE4NTUzNTkwMicsXG4gICczMTg4MjQ5MTM5JyxcbiAgJzMxODk0MDYzMTEnLFxuICAnMzIwMTczOTAxMycsXG4gICczMjA4MDM5NjQxJyxcbiAgJzMyMTM2MjM4NjQnLFxuICAnMzIxNjk0Nzk4MicsXG4gICczMjI2NTE3ODUxJyxcbiAgJzMyNDA1Mjg3MTMnLFxuICAnMzI0NDI1MTA4NycsXG4gICczMjUwNzIzODY5JyxcbiAgJzMyNTIwODA2NjMnLFxuICAnMzI1Njc1NDUwOCcsXG4gICczMjU5OTc5MDI1JyxcbiAgJzMyNjE2ODcwMzAnLFxuICAnMzI2MzM0OTgwMicsXG4gICczMjY4NjU5MzIyJyxcbiAgJzMyNzEzMzAxNzcnLFxuICAnMzI4Mzc0NzE0MycsXG4gICczMjg0Mzc0NTU2JyxcbiAgJzMyODUzMTAzNzEnLFxuICAnMzI5MjQyMjcnLFxuICAnMzI5NTc3NjY0NicsXG4gICczMzAxMDE4Njg5JyxcbiAgJzMzMDE2ODgxOTQnLFxuICAnMzMwNzY3MTkyOCcsXG4gICczMzA4ODg4MzY3JyxcbiAgJzMzMDk5NTIzNDcnLFxuICAnMzMxOTc2ODY0NycsXG4gICczMzIwODI5MzE4JyxcbiAgJzMzMjIxNTYwNDEnLFxuICAnMzMyNjg0NjA4NicsXG4gICczMzQxMDU0NDU3JyxcbiAgJzMzNDk0MDk4ODYnLFxuICAnMzM1MzMxMjU2MCcsXG4gICczMzU1MzY4MjI5JyxcbiAgJzMzNTU4NjU0MTYnLFxuICAnMzM1ODU1Nzc3JyxcbiAgJzMzNTk5MzgwNCcsXG4gICczMzYxNDY2NzE2JyxcbiAgJzMzNjIzOTc1NTQnLFxuICAnMzM2NzE3MTI5MycsXG4gICczMzc2NzkwMDU1JyxcbiAgJzMzNzc2ODg0ODAnLFxuICAnMzM4MTM5MDkwMCcsXG4gICczMzg1MjY4NDAyJyxcbiAgJzMzODU4NDY3MjcnLFxuICAnMzM4ODQ0MjQ0JyxcbiAgJzMzOTA3NTE3NDMnLFxuICAnMzM5NDMxNTQ5NCcsXG4gICczNDAyOTc4NzUwJyxcbiAgJzM0MDgyNDkxOTEnLFxuICAnMzQxNjgzMTUzNycsXG4gICczNDIyMDg3NTg5JyxcbiAgJzM0MjQzMTE4OTYnLFxuICAnMzQyOTY0OTM1MScsXG4gICczNDM2NzQyMjc3JyxcbiAgJzM0NDYyMTU2NzMnLFxuICAnMzQ0ODYyMDc5OScsXG4gICczNDUwMjIxMzkwJyxcbiAgJzM0NTE4MjQ4NzMnLFxuICAnMzQ1NTcxMTA0NCcsXG4gICczNDU4MzEwOTc1JyxcbiAgJzM0NjQwMDIxNDknLFxuICAnMzQ3MzkwMTM4MicsXG4gICczNDk0ODg3MTAwJyxcbiAgJzM0OTgwNTY4MTgnLFxuICAnMzUwMDEyMzk1NycsXG4gICczNTAxODkzNzU3JyxcbiAgJzM1MTczMzA4NScsXG4gICczNTI2MzM2NScsXG4gICczNTMzODAzMDYnLFxuICAnMzUzNTY4MTEyNycsXG4gICczNTQwODI0NDEnLFxuICAnMzU1MDU5NjAyOScsXG4gICczNTUxNDMzMDc1JyxcbiAgJzM1NTI2NTc3MDgnLFxuICAnMzU2MTM0OTQ2MScsXG4gICczNTY4MDY0MTE4JyxcbiAgJzM1NzI1MDQ4OTQnLFxuICAnMzU3NDM1NDk0OCcsXG4gICczNTg0OTkyMTEwJyxcbiAgJzM1ODUzNTY4NTUnLFxuICAnMzU4OTgzODYzOCcsXG4gICczNTkxMDg0OTQ3JyxcbiAgJzM1OTEzMTEzOTAnLFxuICAnMzU5NDM1NjI1MScsXG4gICczNjA3MDUwNjMzJyxcbiAgJzM2MjMwNzQ2MzQnLFxuICAnMzYzNTU2MjcxNycsXG4gICczNjM4OTQ3MDInLFxuICAnMzY1MTI1MDU5JyxcbiAgJzM2NTI3Mjg4NzcnLFxuICAnMzY1NTEyMDU2OCcsXG4gICczNjU2MDU1MTgnLFxuICAnMzY1NjczNjY0MycsXG4gICczNjU3NjI1MDMwJyxcbiAgJzM2NjI0MjkyMTYnLFxuICAnMzY3MDUyMjM3NCcsXG4gICczNjczODY2OTUzJyxcbiAgJzM2ODU4NDQ5NDcnLFxuICAnMzY5MjM2NzIxNScsXG4gICczNjk1MjAyMzc1JyxcbiAgJzM2OTY0NDM0MycsXG4gICczNzAwNDI1MDQ3JyxcbiAgJzM3MDA5ODI2OTgnLFxuICAnMzcxMTc0NDk5MScsXG4gICczNzEyMDkwNzYzJyxcbiAgJzM3MTgyODg0MjYnLFxuICAnMzczOTIyMjMyOScsXG4gICczNzM5NzIzNTg4JyxcbiAgJzM3NDE4MDM4MjMnLFxuICAnMzc0MjA3NjM3MycsXG4gICczNzQzMzk4ODcwJyxcbiAgJzM3NDcwNjMwODUnLFxuICAnMzc2ODY1MTI4MicsXG4gICczNzc0ODM0OTMwJyxcbiAgJzM3ODIxODc1MDUnLFxuICAnMzc4NTAzMTgxNScsXG4gICczODAyMjcyMzQ5JyxcbiAgJzM4MDM0MjcyODknLFxuICAnMzgwODUxNTAyMycsXG4gICczODE3NzU5MjQyJyxcbiAgJzM4MjE3OTU5MDknLFxuICAnMzgyODkyMTM2MycsXG4gICczODI5MTUwMDQnLFxuICAnMzgzNTMzMDk0OCcsXG4gICczODM1OTMxODI0JyxcbiAgJzM4Mzg5ODM3ODknLFxuICAnMzg0MTg0NDQwNScsXG4gICczODQyMjEzMjc5JyxcbiAgJzM4NjY5NTY0MDAnLFxuICAnMzg2NzY4MzI1OScsXG4gICczODgyNzc1NTc1JyxcbiAgJzM4ODc5Mzc5NDQnLFxuICAnMzkwMjU5NjExMScsXG4gICczOTA3OTY1Njg5JyxcbiAgJzM5MTY3MzU4MjgnLFxuICAnMzkxOTYyMTc1NycsXG4gICczOTI2OTgzNzA3JyxcbiAgJzM5MzEzNzE2MDYnLFxuICAnMzkzNTY3MjA3MicsXG4gICczOTQyMTY5Mzk2JyxcbiAgJzM5NDM1NTM3JyxcbiAgJzM5NTIyNTMwMTMnLFxuICAnMzk1Mjk4NTg3NScsXG4gICczOTYwMzc2MDM0JyxcbiAgJzM5NjQwMjIyNjUnLFxuICAnMzk2OTMzMzE2NCcsXG4gICczOTgwNzM0MDAwJyxcbiAgJzM5ODQ2NDg0MjInLFxuICAnMzk5MTYzNjE2JyxcbiAgJzQwMTExNjY1OTknLFxuICAnNDAxMjU2OTIzMicsXG4gICc0MDE1OTYwNzgxJyxcbiAgJzQwMjA3NzgzNycsXG4gICc0MDIyNjM1MDcxJyxcbiAgJzQwMzE0Mjc5NTgnLFxuICAnNDAzODQxOTE1NCcsXG4gICc0MDM4NzE5NDA0JyxcbiAgJzQwNDA5NjM1MjYnLFxuICAnNDA0NTAwMTIzMicsXG4gICc0MDQ1MzQ4NjI2JyxcbiAgJzQwNDcwNzYxNjMnLFxuICAnNDA1MDE5NDQ0NicsXG4gICc0MDUxMTEwNDc4JyxcbiAgJzQwNTM1NjY0NjEnLFxuICAnNDA2MjIwMjYzMScsXG4gICc0MDY0NDAzMDMzJyxcbiAgJzQwNjcyOTI4MDknLFxuICAnNDA3MTE2OTQ5NCcsXG4gICc0MDcyMzk0NjQxJyxcbiAgJzQwODMwNDQzNTMnLFxuICAnNDA4NDE5NDkzNScsXG4gICc0MDkyMzY5NTE5JyxcbiAgJzQwOTI2NjQ5MzcnLFxuICAnNDA5NjA5ODg5NCcsXG4gICc0MDk3MDM5OTk5JyxcbiAgJzQwOTgxMzgzNDInLFxuICAnNDEwMjIzMjE4NScsXG4gICc0MTA3Mzc0NjcnLFxuICAnNDExODY4MzA1MScsXG4gICc0MTI3MjEyMTkzJyxcbiAgJzQxMjczNTE0OTYnLFxuICAnNDEyOTY5ODMyNScsXG4gICc0MTMwMzcwOTc3JyxcbiAgJzQxMzYzMTQxNzYnLFxuICAnNDEzNzc0NjgwMCcsXG4gICc0MTM4MzEwNDg1JyxcbiAgJzQxMzg3NDg3MDknLFxuICAnNDEzOTQxNTc2NScsXG4gICc0MTQwNzYyNDkxJyxcbiAgJzQxNDE5MTI0MicsXG4gICc0MTQzNjI1ODM4JyxcbiAgJzQxNTg3MjcwNzUnLFxuICAnNDE2MjkyMzczMicsXG4gICc0MTY1ODUwMzY4JyxcbiAgJzQxNjY2ODgyMDcnLFxuICAnNDE3MTkyMDM3NicsXG4gICc0MTc3ODAzODcwJyxcbiAgJzQxODk2ODE3NjknLFxuICAnNDE5MDY5Nzk2MicsXG4gICc0MTk1OTQ2MTQ5JyxcbiAgJzQxOTkxMjE4NzQnLFxuICAnNDIwMDA2OTc2NCcsXG4gICc0MjA1MDI3ODIyJyxcbiAgJzQyMDUzNzkzOTMnLFxuICAnNDIwNjQ3OTI2NCcsXG4gICc0MjE0Njg3MzI3JyxcbiAgJzQyMjA1MjYyNjcnLFxuICAnNDIzNjcxMDExMycsXG4gICc0MjM3MDUzNzMxJyxcbiAgJzQyMzcxODIxMTQnLFxuICAnNDIzNzY5MTM5MycsXG4gICc0MjQ4MjAzMjkyJyxcbiAgJzQyNDkyMjM5NTInLFxuICAnNDI2NTA5MjIwMCcsXG4gICc0MjY5NjkyNjEyJyxcbiAgJzQyNzMzNzU4MzEnLFxuICAnNDI3ODA0NjA2MycsXG4gICc0Mjc5OTE4OTAzJyxcbiAgJzQyODYwMDkxNzAnLFxuICAnNDMxNDQ5ODI0JyxcbiAgJzQzNjAzNTY3MicsXG4gICc0MzY4OTU0NzgnLFxuICAnNDQ2NzgzNDA3JyxcbiAgJzQ1NTU1MzE2OCcsXG4gICc0Njg5NzI0MjgnLFxuICAnNDczNDA4MjEwJyxcbiAgJzQ3NTMyNTEyNScsXG4gICc0ODE2MDg5MTAnLFxuICAnNDk3NTYwMDI1JyxcbiAgJzUwODMzMTUyOCcsXG4gICc1MDk4MDEwNzUnLFxuICAnNTI0NTgxODgxJyxcbiAgJzUyNTY1Nzg4OScsXG4gICc1MzU4NDgyNjInLFxuICAnNTUyODMxMDMzJyxcbiAgJzU2MTE5MzY3JyxcbiAgJzU4OTM0ODU2NScsXG4gICc1OTAxODAwODgnLFxuICAnNTkwNDQ5MDgxJyxcbiAgJzYwNTY0NTQyOCcsXG4gICc2MDc2NDk5NDknLFxuICAnNjEzMjUyMTYyJyxcbiAgJzYxNjM5ODY4MScsXG4gICc2MTY2NTIxMzYnLFxuICAnNjIwNDM0MDM2JyxcbiAgJzYyODI1NjU0MScsXG4gICc2MzAxMjQzMDInLFxuICAnNjM3NTkwNjg3JyxcbiAgJzY0NjkyNTI0MScsXG4gICc2NDkwNjgxNDcnLFxuICAnNjY0ODQ5ODQzJyxcbiAgJzY2NjU1MjMxNScsXG4gICc2Njc4MDIyMjMnLFxuICAnNjczNDkwMjYwJyxcbiAgJzY3NTYxNzgzOScsXG4gICc2NzYyODYzODcnLFxuICAnNjc5MjI2MjYxJyxcbiAgJzY4MTMxNzUwNicsXG4gICc2ODQ0OTYwNjMnLFxuICAnNjg3OTI0NzM1JyxcbiAgJzY5MDIwNDg0MCcsXG4gICc2OTkxNjkwMzMnLFxuICAnNjk5NTU0Nzk1JyxcbiAgJzY5OTgzNTQwMScsXG4gICc3MDg0Nzg5NTQnLFxuICAnNzA5ODc1MjIzJyxcbiAgJzcyMTAwNjU0NicsXG4gICc3MjI2NTkwMjQnLFxuICAnNzQwNDYwMzk2JyxcbiAgJzc1MDczMTc4OScsXG4gICc3NTk4MzUyNjInLFxuICAnNzYwNjQ1OTE4JyxcbiAgJzc2MjQzNzkzJyxcbiAgJzc2MzU4MDYwNicsXG4gICc3NjQ1NDY0MTAnLFxuICAnNzcwNDAwMjIzJyxcbiAgJzc3MzY5NzE4OCcsXG4gICc3Nzc4NDYzMjcnLFxuICAnNzc5MTg1ODQ3JyxcbiAgJzc4MTk1MDE5MScsXG4gICc3ODUyNzg2NDUnLFxuICAnNzkxODg4MjcxJyxcbiAgJzc5MzM2MDU5NycsXG4gICc3OTUxMTE2ODUnLFxuICAnNzk5MDM4NjMwJyxcbiAgJzgwMjk0MDg2MCcsXG4gICc4MDM2MjYzMjYnLFxuICAnODA1NDYxMjk3JyxcbiAgJzgwOTUyNTE0MycsXG4gICc4MTI5MTQ5NjYnLFxuICAnODE3NTk2ODEzJyxcbiAgJzgyNjcwMjgxOCcsXG4gICc4Mjk3NDcxMjEnLFxuICAnODMwMDU5NDQwJyxcbiAgJzgzNDkxNzM2NicsXG4gICc4MzY2MzQ2NzUnLFxuICAnODQwNzQ4OTQ1JyxcbiAgJzg0NTY5MDE3MycsXG4gICc4NTE5MTg0MTknLFxuICAnODUzNTM1NDI2JyxcbiAgJzg1NTg4MjAyNycsXG4gICc4NjUzODc2MTQnLFxuICAnODcwMDc1MTE0JyxcbiAgJzg3ODA0MTczOScsXG4gICc4ODQwMzc4NDgnLFxuICAnODg0OTQyMjczJyxcbiAgJzg4NTAwMDI2MycsXG4gICc4ODYwMzA4NjcnLFxuICAnODg3OTkyNzk0JyxcbiAgJzkwMjE3NjEnLFxuICAnOTA0OTIwNTAyJyxcbiAgJzkwNjc3MzI4JyxcbiAgJzkwNzY5NTE0OCcsXG4gICc5MTE5NjM1MDAnLFxuICAnOTE5MTY2ODUwJyxcbiAgJzkyNjkwMjkyMScsXG4gICc5MjczMjc0NScsXG4gICc5MjgyOTU3OScsXG4gICc5MzAzODk5NCcsXG4gICc5MzI2NDI0MjEnLFxuICAnOTMyOTQwODcxJyxcbiAgJzkzODc1NTQ0NScsXG4gICc5NDczMDMyMDknLFxuICAnOTU2NzcxNTk5JyxcbiAgJzk1ODc0OTAzNCcsXG4gICc5NTk4ODk2NzYnLFxuICAnOTYwNDY2NTA1JyxcbiAgJzk2MjM4MDY3MycsXG4gICc5NjU3MjgwNzUnLFxuICAnOTczNjEyOTE2JyxcbiAgJzk3NjYwMzc4OScsXG4gICc5NzgzNjQ1OTcnLFxuICAnOTg1MTg2OCcsXG4gICc5ODY1Mzk4NjMnLFxuICAnOTg5NDQ0ODc4JyxcbiAgJzk5MDMxMjkyMicsXG5dO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMnO1xuaW1wb3J0IHtWaWRlb0V2ZW50c30gZnJvbSAnLi4vLi4vLi4vc3JjL3ZpZGVvLWludGVyZmFjZSc7XG5pbXBvcnQge2Nsb3Nlc3QsIGVzY2FwZUNzc1NlbGVjdG9ySWRlbnR9IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuaW1wb3J0IHtkZXYsIHVzZXJ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuaW1wb3J0IHtoYXNUYXBBY3Rpb24sIHRpbWVTdHJUb01pbGxpc30gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQge2xpc3Rlbk9uY2V9IGZyb20gJy4uLy4uLy4uL3NyYy9ldmVudC1oZWxwZXInO1xuaW1wb3J0IHttYXB9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9vYmplY3QnO1xuXG5cbi8qKiBAcHJpdmF0ZSBAY29uc3Qge251bWJlcn0gKi9cbmNvbnN0IE5FWFRfU0NSRUVOX0FSRUFfUkFUSU8gPSAwLjc1O1xuXG4vKiogQGNvbnN0IHtudW1iZXJ9ICovXG5leHBvcnQgY29uc3QgUE9MTF9JTlRFUlZBTF9NUyA9IDMwMDtcblxuLyoqIEBjb25zdCBAZW51bSAqL1xuZXhwb3J0IGNvbnN0IFRhcE5hdmlnYXRpb25EaXJlY3Rpb24gPSB7XG4gICdORVhUJzogMSxcbiAgJ1BSRVZJT1VTJzogMixcbn07XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgdGhlIEFkdmFuY2VtZW50Q29uZmlnLiAgQnkgZGVmYXVsdCwgZG9lcyBub3RoaW5nIG90aGVyIHRoYW5cbiAqIHRyYWNraW5nIGl0cyBpbnRlcm5hbCBzdGF0ZSB3aGVuIHN0YXJ0ZWQvc3RvcHBlZCwgYW5kIGxpc3RlbmVycyB3aWxsIG5ldmVyIGJlXG4gKiBpbnZva2VkLlxuICovXG5leHBvcnQgY2xhc3MgQWR2YW5jZW1lbnRDb25maWcge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQXJyYXk8ZnVuY3Rpb24obnVtYmVyKT59ICovXG4gICAgdGhpcy5wcm9ncmVzc0xpc3RlbmVyc18gPSBbXTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBcnJheTxmdW5jdGlvbigpPn0gKi9cbiAgICB0aGlzLmFkdmFuY2VMaXN0ZW5lcnNfID0gW107XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshQXJyYXk8ZnVuY3Rpb24oKT59ICovXG4gICAgdGhpcy5wcmV2aW91c0xpc3RlbmVyc18gPSBbXTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBcnJheTxmdW5jdGlvbihudW1iZXIpPn0gKi9cbiAgICB0aGlzLnRhcE5hdmlnYXRpb25MaXN0ZW5lcnNfID0gW107XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5pc1J1bm5pbmdfID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIpfSBwcm9ncmVzc0xpc3RlbmVyIEEgZnVuY3Rpb24gdGhhdCBoYW5kbGVzIHdoZW4gdGhlXG4gICAqICAgICBwcm9ncmVzcyBvZiB0aGUgY3VycmVudCBwYWdlIGhhcyBiZWVuIHVwZGF0ZWQuICBJdCBhY2NlcHRzIGEgbnVtYmVyXG4gICAqICAgICBiZXR3ZWVuIDAuMCBhbmQgMS4wIGFzIGl0cyBvbmx5IGFyZ3VtZW50LCB0aGF0IHJlcHJlc2VudHMgdGhlIGN1cnJlbnRcbiAgICogICAgIHByb2dyZXNzLlxuICAgKi9cbiAgYWRkUHJvZ3Jlc3NMaXN0ZW5lcihwcm9ncmVzc0xpc3RlbmVyKSB7XG4gICAgdGhpcy5wcm9ncmVzc0xpc3RlbmVyc18ucHVzaChwcm9ncmVzc0xpc3RlbmVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGFkdmFuY2VMaXN0ZW5lciBBIGZ1bmN0aW9uIHRoYXQgaGFuZGxlcyB3aGVuIGFcbiAgICogICAgIHBhZ2Ugc2hvdWxkIGJlIGFkdmFuY2VkLlxuICAgKi9cbiAgYWRkQWR2YW5jZUxpc3RlbmVyKGFkdmFuY2VMaXN0ZW5lcikge1xuICAgIHRoaXMuYWR2YW5jZUxpc3RlbmVyc18ucHVzaChhZHZhbmNlTGlzdGVuZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKX0gcHJldmlvdXNMaXN0ZW5lciBBIGZ1bmN0aW9uIHRoYXQgaGFuZGxlcyB3aGVuIGFcbiAgICogICAgIHBhZ2Ugc2hvdWxkIGdvIGJhY2sgdG8gdGhlIHByZXZpb3VzIHBhZ2UuXG4gICAqL1xuICBhZGRQcmV2aW91c0xpc3RlbmVyKHByZXZpb3VzTGlzdGVuZXIpIHtcbiAgICB0aGlzLnByZXZpb3VzTGlzdGVuZXJzXy5wdXNoKHByZXZpb3VzTGlzdGVuZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24obnVtYmVyKX0gb25UYXBOYXZpZ2F0aW9uTGlzdGVuZXIgQSBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgd2hlbiBhXG4gICAqIG5hdmlnYXRpb24gbGlzdGVuZXIgdG8gYmUgZmlyZWQuXG4gICAqL1xuICBhZGRPblRhcE5hdmlnYXRpb25MaXN0ZW5lcihvblRhcE5hdmlnYXRpb25MaXN0ZW5lcikge1xuICAgIHRoaXMudGFwTmF2aWdhdGlvbkxpc3RlbmVyc18ucHVzaChvblRhcE5hdmlnYXRpb25MaXN0ZW5lcik7XG4gIH1cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBhZHZhbmNlbWVudCBjb25maWd1cmF0aW9uIHNob3VsZCBiZWdpbiB0YWtpbmcgZWZmZWN0LlxuICAgKi9cbiAgc3RhcnQoKSB7XG4gICAgdGhpcy5pc1J1bm5pbmdfID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGFkdmFuY2VtZW50IGNvbmZpZ3VyYXRpb24gc2hvdWxkIGNlYXNlIHRha2luZyBlZmZlY3QuXG4gICAqL1xuICBzdG9wKCkge1xuICAgIHRoaXMuaXNSdW5uaW5nXyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGlzUnVubmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5pc1J1bm5pbmdfO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZ2V0UHJvZ3Jlc3MoKSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICAvKiogQHByb3RlY3RlZCAqL1xuICBvblByb2dyZXNzVXBkYXRlKCkge1xuICAgIGNvbnN0IHByb2dyZXNzID0gdGhpcy5nZXRQcm9ncmVzcygpO1xuICAgIHRoaXMucHJvZ3Jlc3NMaXN0ZW5lcnNfLmZvckVhY2gocHJvZ3Jlc3NMaXN0ZW5lciA9PiB7XG4gICAgICBwcm9ncmVzc0xpc3RlbmVyKHByb2dyZXNzKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAcHJvdGVjdGVkICovXG4gIG9uQWR2YW5jZSgpIHtcbiAgICB0aGlzLmFkdmFuY2VMaXN0ZW5lcnNfLmZvckVhY2goYWR2YW5jZUxpc3RlbmVyID0+IHtcbiAgICAgIGFkdmFuY2VMaXN0ZW5lcigpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBwcm90ZWN0ZWQgKi9cbiAgb25QcmV2aW91cygpIHtcbiAgICB0aGlzLnByZXZpb3VzTGlzdGVuZXJzXy5mb3JFYWNoKHByZXZpb3VzTGlzdGVuZXIgPT4ge1xuICAgICAgcHJldmlvdXNMaXN0ZW5lcigpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBuYXZpZ2F0aW9uRGlyZWN0aW9uIERpcmVjdGlvbiBvZiBuYXZpZ2F0aW9uXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIG9uVGFwTmF2aWdhdGlvbihuYXZpZ2F0aW9uRGlyZWN0aW9uKSB7XG4gICAgdGhpcy50YXBOYXZpZ2F0aW9uTGlzdGVuZXJzXy5mb3JFYWNoKG5hdmlnYXRpb25MaXN0ZW5lciA9PiB7XG4gICAgICBuYXZpZ2F0aW9uTGlzdGVuZXIobmF2aWdhdGlvbkRpcmVjdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZXMgYW4gQWR2YW5jZW1lbnRDb25maWcgb2JqZWN0IGZvciB0aGUgc3BlY2lmaWVkIGFtcC1zdG9yeS1wYWdlLlxuICAgKiBAcGFyYW0geyEuL2FtcC1zdG9yeS1wYWdlLkFtcFN0b3J5UGFnZX0gcGFnZVxuICAgKiBAcmV0dXJuIHshQWR2YW5jZW1lbnRDb25maWd9XG4gICAqL1xuICBzdGF0aWMgZm9yUGFnZShwYWdlKSB7XG4gICAgY29uc3Qgcm9vdEVsID0gcGFnZS5lbGVtZW50O1xuICAgIGNvbnN0IHdpbiA9IHJvb3RFbC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICAgIGNvbnN0IGF1dG9BZHZhbmNlU3RyID0gcm9vdEVsLmdldEF0dHJpYnV0ZSgnYXV0by1hZHZhbmNlLWFmdGVyJyk7XG5cbiAgICBjb25zdCBzdXBwb3J0ZWRBZHZhbmNlbWVudE1vZGVzID0gW1xuICAgICAgbmV3IE1hbnVhbEFkdmFuY2VtZW50KHJvb3RFbCksXG4gICAgICBUaW1lQmFzZWRBZHZhbmNlbWVudC5mcm9tQXV0b0FkdmFuY2VTdHJpbmcoYXV0b0FkdmFuY2VTdHIsIHdpbiksXG4gICAgICBNZWRpYUJhc2VkQWR2YW5jZW1lbnQuZnJvbUF1dG9BZHZhbmNlU3RyaW5nKGF1dG9BZHZhbmNlU3RyLCB3aW4sIHJvb3RFbCksXG4gICAgXS5maWx0ZXIoeCA9PiB4ICE9PSBudWxsKTtcblxuICAgIGlmIChzdXBwb3J0ZWRBZHZhbmNlbWVudE1vZGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG5ldyBBZHZhbmNlbWVudENvbmZpZygpO1xuICAgIH1cblxuICAgIGlmIChzdXBwb3J0ZWRBZHZhbmNlbWVudE1vZGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgcmV0dXJuIHN1cHBvcnRlZEFkdmFuY2VtZW50TW9kZXNbMF07XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBNdWx0aXBsZUFkdmFuY2VtZW50Q29uZmlnKHN1cHBvcnRlZEFkdmFuY2VtZW50TW9kZXMpO1xuICB9XG59XG5cblxuLyoqXG4gKiBBbiBBZHZhbmNlbWVudENvbmZpZyBpbXBsZW1lbnRhdGlvbiB0aGF0IGNvbXBvc2VzIG11bHRpcGxlIG90aGVyXG4gKiBBZHZhbmNlbWVudENvbmZpZyBpbXBsZW1lbnRhdGlvbnMgYnkgc2ltcGx5IGRlbGVnYXRpbmcgYWxsIG9mIGl0cyBjYWxscyB0b1xuICogYW4gYXJyYXkgb2YgdW5kZXJseWluZyBhZHZhbmNlbWVudCBtb2Rlcy5cbiAqL1xuY2xhc3MgTXVsdGlwbGVBZHZhbmNlbWVudENvbmZpZyBleHRlbmRzIEFkdmFuY2VtZW50Q29uZmlnIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFycmF5PCFBZHZhbmNlbWVudENvbmZpZz59IGFkdmFuY2VtZW50TW9kZXMgQSBsaXN0IG9mXG4gICAqICAgICBBZHZhbmNlbWVudENvbmZpZ3MgdG8gd2hpY2ggYWxsIGNhbGxzIHNob3VsZCBiZSBkZWxlZ2F0ZWQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihhZHZhbmNlbWVudE1vZGVzKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFBcnJheTwhQWR2YW5jZW1lbnRDb25maWc+fSAqL1xuICAgIHRoaXMuYWR2YW5jZW1lbnRNb2Rlc18gPSBhZHZhbmNlbWVudE1vZGVzO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhZGRQcm9ncmVzc0xpc3RlbmVyKHByb2dyZXNzTGlzdGVuZXIpIHtcbiAgICB0aGlzLmFkdmFuY2VtZW50TW9kZXNfLmZvckVhY2goYWR2YW5jZW1lbnRNb2RlID0+IHtcbiAgICAgIGFkdmFuY2VtZW50TW9kZS5hZGRQcm9ncmVzc0xpc3RlbmVyKHByb2dyZXNzTGlzdGVuZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhZGRPblRhcE5hdmlnYXRpb25MaXN0ZW5lcihvblRhcE5hdmlnYXRpb25MaXN0ZW5lcikge1xuICAgIHRoaXMuYWR2YW5jZW1lbnRNb2Rlc18uZm9yRWFjaChhZHZhbmNlbWVudE1vZGUgPT4ge1xuICAgICAgYWR2YW5jZW1lbnRNb2RlLmFkZE9uVGFwTmF2aWdhdGlvbkxpc3RlbmVyKG9uVGFwTmF2aWdhdGlvbkxpc3RlbmVyKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWRkQWR2YW5jZUxpc3RlbmVyKGFkdmFuY2VMaXN0ZW5lcikge1xuICAgIHRoaXMuYWR2YW5jZW1lbnRNb2Rlc18uZm9yRWFjaChhZHZhbmNlbWVudE1vZGUgPT4ge1xuICAgICAgYWR2YW5jZW1lbnRNb2RlLmFkZEFkdmFuY2VMaXN0ZW5lcihhZHZhbmNlTGlzdGVuZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhZGRQcmV2aW91c0xpc3RlbmVyKHByZXZpb3VzTGlzdGVuZXIpIHtcbiAgICB0aGlzLmFkdmFuY2VtZW50TW9kZXNfLmZvckVhY2goYWR2YW5jZW1lbnRNb2RlID0+IHtcbiAgICAgIGFkdmFuY2VtZW50TW9kZS5hZGRQcmV2aW91c0xpc3RlbmVyKHByZXZpb3VzTGlzdGVuZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGFydCgpIHtcbiAgICBzdXBlci5zdGFydCgpO1xuICAgIHRoaXMuYWR2YW5jZW1lbnRNb2Rlc18uZm9yRWFjaChhZHZhbmNlbWVudE1vZGUgPT4ge1xuICAgICAgYWR2YW5jZW1lbnRNb2RlLnN0YXJ0KCk7XG4gICAgfSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0b3AoKSB7XG4gICAgc3VwZXIuc3RvcCgpO1xuICAgIHRoaXMuYWR2YW5jZW1lbnRNb2Rlc18uZm9yRWFjaChhZHZhbmNlbWVudE1vZGUgPT4ge1xuICAgICAgYWR2YW5jZW1lbnRNb2RlLnN0b3AoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5cbi8qKlxuICogQWx3YXlzIHByb3ZpZGVzIGEgcHJvZ3Jlc3Mgb2YgMS4wLiAgQWR2YW5jZXMgd2hlbiB0aGUgdXNlciB0YXBzIHRoZSByaWdodG1vc3RcbiAqIDc1JSBvZiB0aGUgc2NyZWVuOyB0cmlnZ2VycyB0aGUgcHJldmlvdXMgbGlzdGVuZXIgd2hlbiB0aGUgdXNlciB0YXBzIHRoZVxuICogbGVmdG1vc3QgMjUlIG9mIHRoZSBzY3JlZW4uXG4gKi9cbmNsYXNzIE1hbnVhbEFkdmFuY2VtZW50IGV4dGVuZHMgQWR2YW5jZW1lbnRDb25maWcge1xuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudCBUaGUgZWxlbWVudCB0aGF0LCB3aGVuIGNsaWNrZWQsIGNhbiBjYXVzZVxuICAgKiAgICAgYWR2YW5jaW5nIHRvIHRoZSBuZXh0IHBhZ2Ugb3IgZ29pbmcgYmFjayB0byB0aGUgcHJldmlvdXMuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmVsZW1lbnRfID0gZWxlbWVudDtcbiAgICB0aGlzLmNsaWNrTGlzdGVuZXJfID0gdGhpcy5tYXliZVBlcmZvcm1OYXZpZ2F0aW9uXy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuaGFzQXV0b0FkdmFuY2VTdHJfID0gdGhpcy5lbGVtZW50Xy5nZXRBdHRyaWJ1dGUoJ2F1dG8tYWR2YW5jZS1hZnRlcicpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdGFydCgpIHtcbiAgICBzdXBlci5zdGFydCgpO1xuICAgIHRoaXMuZWxlbWVudF8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrTGlzdGVuZXJfLCB0cnVlKTtcbiAgICBpZiAoIXRoaXMuaGFzQXV0b0FkdmFuY2VTdHJfKSB7XG4gICAgICBzdXBlci5vblByb2dyZXNzVXBkYXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdG9wKCkge1xuICAgIHN1cGVyLnN0b3AoKTtcbiAgICB0aGlzLmVsZW1lbnRfLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0xpc3RlbmVyXywgdHJ1ZSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFByb2dyZXNzKCkge1xuICAgIHJldHVybiAxLjA7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIGEgY2xpY2sgc2hvdWxkIGJlIHVzZWQgZm9yIG5hdmlnYXRpb24uICBOYXZpZ2F0ZSBzaG91bGRcbiAgICogb2NjdXIgdW5sZXNzIHRoZSBjbGljayBpcyBvbiB0aGUgc3lzdGVtIGxheWVyLCBvciBvbiBhbiBlbGVtZW50IHRoYXRcbiAgICogZGVmaW5lcyBvbj1cInRhcDouLi5cIlxuICAgKiBAcGFyYW0geyFFdmVudH0gZSAnY2xpY2snIGV2ZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlLCBpZiB0aGUgY2xpY2sgc2hvdWxkIGJlIHVzZWQgZm9yIG5hdmlnYXRpb24uXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpc05hdmlnYXRpb25hbENsaWNrXyhlKSB7XG4gICAgcmV0dXJuICFjbG9zZXN0KGRldigpLmFzc2VydEVsZW1lbnQoZS50YXJnZXQpLCBlbCA9PiB7XG4gICAgICByZXR1cm4gaGFzVGFwQWN0aW9uKGVsKTtcbiAgICB9LCAvKiBvcHRfc3RvcEF0ICovIHRoaXMuZWxlbWVudF8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdlIHdhbnQgY2xpY2tzIG9uIGNlcnRhaW4gZWxlbWVudHMgdG8gYmUgZXhlbXB0ZWQgZnJvbSBub3JtYWwgcGFnZSBuYXZpZ2F0aW9uXG4gICAqIEBwYXJhbSB7IUV2ZW50fSBldmVudFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNQcm90ZWN0ZWRUYXJnZXRfKGV2ZW50KSB7XG4gICAgY29uc3QgcHJvdGVjdGVkRWxlbWVudHMgPSBtYXAoe1xuICAgICAgQTogdHJ1ZSxcbiAgICAgIEJVVFRPTjogdHJ1ZSxcbiAgICB9KTtcblxuICAgIHJldHVybiBwcm90ZWN0ZWRFbGVtZW50c1tldmVudC50YXJnZXQudGFnTmFtZV0gfHwgZmFsc2U7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIHN5c3RlbSBuYXZpZ2F0aW9uIGlmIGl0IGlzIGRldGVybWluZWQgdGhhdCB0aGUgc3BlY2lmaWVkIGV2ZW50XG4gICAqIHdhcyBhIGNsaWNrIGludGVuZGVkIGZvciBuYXZpZ2F0aW9uLlxuICAgKiBAcGFyYW0geyFFdmVudH0gZXZlbnQgJ2NsaWNrJyBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbWF5YmVQZXJmb3JtTmF2aWdhdGlvbl8oZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuaXNOYXZpZ2F0aW9uYWxDbGlja18oZXZlbnQpIHx8IHRoaXMuaXNQcm90ZWN0ZWRUYXJnZXRfKGV2ZW50KSkge1xuICAgICAgLy8gSWYgdGhlIHN5c3RlbSBkb2Vzbid0IG5lZWQgdG8gaGFuZGxlIHRoaXMgY2xpY2ssIHRoZW4gd2UgY2FuIHNpbXBseVxuICAgICAgLy8gcmV0dXJuIGFuZCBsZXQgdGhlIGV2ZW50IHByb3BhZ2F0ZSBhcyBpdCB3b3VsZCBoYXZlIG90aGVyd2lzZS5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIC8vIFRPRE8obmV3bXVpcyk6IFRoaXMgd2lsbCBuZWVkIHRvIGJlIGZsaXBwZWQgZm9yIFJUTC5cbiAgICBjb25zdCBlbFJlY3QgPSB0aGlzLmVsZW1lbnRfLi8qT0sqL2dldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgLy8gVXNpbmcgYGxlZnRgIGFzIGEgZmFsbGJhY2sgc2luY2UgU2FmYXJpIHJldHVybnMgYSBDbGllbnRSZWN0IGluIHNvbWVcbiAgICAvLyBjYXNlcy5cbiAgICBjb25zdCBvZmZzZXRMZWZ0ID0gKCd4JyBpbiBlbFJlY3QpID8gZWxSZWN0LnggOiBlbFJlY3QubGVmdDtcbiAgICBjb25zdCBvZmZzZXRXaWR0aCA9IGVsUmVjdC53aWR0aDtcblxuICAgIGNvbnN0IG5leHRTY3JlZW5BcmVhTWluID0gb2Zmc2V0TGVmdCArXG4gICAgICAgICgoMSAtIE5FWFRfU0NSRUVOX0FSRUFfUkFUSU8pICogb2Zmc2V0V2lkdGgpO1xuICAgIGNvbnN0IG5leHRTY3JlZW5BcmVhTWF4ID0gb2Zmc2V0TGVmdCArIG9mZnNldFdpZHRoO1xuXG4gICAgaWYgKGV2ZW50LnBhZ2VYID49IG5leHRTY3JlZW5BcmVhTWluICYmIGV2ZW50LnBhZ2VYIDwgbmV4dFNjcmVlbkFyZWFNYXgpIHtcbiAgICAgIHRoaXMub25UYXBOYXZpZ2F0aW9uKFRhcE5hdmlnYXRpb25EaXJlY3Rpb24uTkVYVCk7XG4gICAgfSBlbHNlIGlmIChldmVudC5wYWdlWCA+PSBvZmZzZXRMZWZ0ICYmIGV2ZW50LnBhZ2VYIDwgbmV4dFNjcmVlbkFyZWFNaW4pIHtcbiAgICAgIHRoaXMub25UYXBOYXZpZ2F0aW9uKFRhcE5hdmlnYXRpb25EaXJlY3Rpb24uUFJFVklPVVMpO1xuICAgIH1cbiAgfVxufVxuXG5cbi8qKlxuICogUHJvdmlkZXMgcHJvZ3Jlc3MgYW5kIGFkdmFuY2VtZW50IGJhc2VkIG9uIGEgZml4ZWQgZHVyYXRpb24gb2YgdGltZSxcbiAqIHNwZWNpZmllZCBpbiBlaXRoZXIgc2Vjb25kcyBvciBtaWxsaXNlY29uZHMuXG4gKi9cbmNsYXNzIFRpbWVCYXNlZEFkdmFuY2VtZW50IGV4dGVuZHMgQWR2YW5jZW1lbnRDb25maWcge1xuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW4gVGhlIFdpbmRvdyBvYmplY3QuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheU1zIFRoZSBkdXJhdGlvbiB0byB3YWl0IGJlZm9yZSBhZHZhbmNpbmcuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4sIGRlbGF5TXMpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3RpbWVyLWltcGwuVGltZXJ9ICovXG4gICAgdGhpcy50aW1lcl8gPSBTZXJ2aWNlcy50aW1lckZvcih3aW4pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7bnVtYmVyfSAqL1xuICAgIHRoaXMuZGVsYXlNc18gPSBkZWxheU1zO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/bnVtYmVyfSAqL1xuICAgIHRoaXMuc3RhcnRUaW1lTXNfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfHN0cmluZ3xudWxsfSAqL1xuICAgIHRoaXMudGltZW91dElkXyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfSBUaGUgY3VycmVudCB0aW1lc3RhbXAsIGluIG1pbGxpc2Vjb25kcy5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGdldEN1cnJlbnRUaW1lc3RhbXBNc18oKSB7XG4gICAgcmV0dXJuIERhdGUubm93KCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXJ0KCkge1xuICAgIHN1cGVyLnN0YXJ0KCk7XG4gICAgdGhpcy5zdGFydFRpbWVNc18gPSB0aGlzLmdldEN1cnJlbnRUaW1lc3RhbXBNc18oKTtcblxuICAgIHRoaXMudGltZW91dElkXyA9IHRoaXMudGltZXJfLmRlbGF5KCgpID0+IHRoaXMub25BZHZhbmNlKCksIHRoaXMuZGVsYXlNc18pO1xuXG4gICAgdGhpcy50aW1lcl8ucG9sbChQT0xMX0lOVEVSVkFMX01TLCAoKSA9PiB7XG4gICAgICB0aGlzLm9uUHJvZ3Jlc3NVcGRhdGUoKTtcbiAgICAgIHJldHVybiAhdGhpcy5pc1J1bm5pbmcoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgc3RvcCgpIHtcbiAgICBzdXBlci5zdG9wKCk7XG5cbiAgICBpZiAodGhpcy50aW1lb3V0SWRfICE9PSBudWxsKSB7XG4gICAgICB0aGlzLnRpbWVyXy5jYW5jZWwodGhpcy50aW1lb3V0SWRfKTtcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFByb2dyZXNzKCkge1xuICAgIGlmICh0aGlzLnN0YXJ0VGltZU1zXyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgY29uc3QgcHJvZ3Jlc3MgPVxuICAgICAgICAodGhpcy5nZXRDdXJyZW50VGltZXN0YW1wTXNfKCkgLSB0aGlzLnN0YXJ0VGltZU1zXykgLyB0aGlzLmRlbGF5TXNfO1xuXG4gICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHByb2dyZXNzLCAwKSwgMSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhbiBpbnN0YW5jZSBvZiBUaW1lQmFzZWRBZHZhbmNlbWVudCBiYXNlZCBvbiB0aGUgdmFsdWUgb2YgdGhlXG4gICAqIGF1dG8tYWR2YW5jZSBzdHJpbmcgKGZyb20gdGhlICdhdXRvLWFkdmFuY2UtYWZ0ZXInIGF0dHJpYnV0ZSBvbiB0aGUgcGFnZSkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBhdXRvQWR2YW5jZVN0ciBUaGUgdmFsdWUgb2YgdGhlIGF1dG8tYWR2YW5jZS1hZnRlclxuICAgKiAgICAgYXR0cmlidXRlLlxuICAgKiBAcmV0dXJuIHs/QWR2YW5jZW1lbnRDb25maWd9IEFuIEFkdmFuY2VtZW50Q29uZmlnLCBpZiB0aW1lLWJhc2VkXG4gICAqICAgICBhdXRvLWFkdmFuY2UgaXMgc3VwcG9ydGVkIGZvciB0aGUgc3BlY2lmaWVkIGF1dG8tYWR2YW5jZSBzdHJpbmc7IG51bGxcbiAgICogICAgIG90aGVyd2lzZS5cbiAgICovXG4gIHN0YXRpYyBmcm9tQXV0b0FkdmFuY2VTdHJpbmcoYXV0b0FkdmFuY2VTdHIsIHdpbikge1xuICAgIGlmICghYXV0b0FkdmFuY2VTdHIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGRlbGF5TXMgPSB0aW1lU3RyVG9NaWxsaXMoYXV0b0FkdmFuY2VTdHIpO1xuICAgIGlmIChkZWxheU1zID09PSB1bmRlZmluZWQgfHwgaXNOYU4oZGVsYXlNcykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgVGltZUJhc2VkQWR2YW5jZW1lbnQod2luLCBOdW1iZXIoZGVsYXlNcykpO1xuICB9XG59XG5cblxuLyoqXG4gKiBQcm92aWRlcyBwcm9ncmVzcyBhbmQgYWR2YW5jZXMgcGFnZXMgYmFzZWQgb24gdGhlIGNvbXBsZXRpb24gcGVyY2VudGFnZSBvZlxuICogcGxheWJhY2sgb2YgYW4gSFRNTE1lZGlhRWxlbWVudCBvciBhIHZpZGVvIHRoYXQgaW1wbGVtZW50cyB0aGUgQU1QXG4gKiB2aWRlby1pbnRlcmZhY2UuXG4gKlxuICogVGhlc2UgYXJlIGNvbWJpbmVkIGludG8gYSBzaW5nbGUgQWR2YW5jZW1lbnRDb25maWcgaW1wbGVtZW50YXRpb24gYmVjYXVzZSB3ZVxuICogbWF5IG5vdCBrbm93IGF0IGJ1aWxkIHRpbWUgd2hldGhlciBhIHZpZGVvIGltcGxlbWVudHMgdGhlIEFNUFxuICogdmlkZW8taW50ZXJmYWNlLCBzaW5jZSB0aGF0IGlzIGRlcGVuZGVudCBvbiB0aGUgYW1wLXZpZGVvIGJ1aWxkQ2FsbGJhY2tcbiAqIGhhdmluZyBiZWVuIGV4ZWN1dGVkIGJlZm9yZSB0aGUgYW1wLXN0b3J5LXBhZ2UgYnVpbGRDYWxsYmFjaywgd2hpY2ggaXMgbm90XG4gKiBndWFyYW50ZWVkLlxuICovXG5jbGFzcyBNZWRpYUJhc2VkQWR2YW5jZW1lbnQgZXh0ZW5kcyBBZHZhbmNlbWVudENvbmZpZyB7XG4gIGNvbnN0cnVjdG9yKHdpbiwgZWxlbWVudCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvdGltZXItaW1wbC5UaW1lcn0gKi9cbiAgICB0aGlzLnRpbWVyXyA9IFNlcnZpY2VzLnRpbWVyRm9yKHdpbik7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRWxlbWVudH0gKi9cbiAgICB0aGlzLmVsZW1lbnRfID0gZWxlbWVudDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VsZW1lbnR9ICovXG4gICAgdGhpcy5tZWRpYUVsZW1lbnRfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Py4uLy4uLy4uL3NyYy92aWRlby1pbnRlcmZhY2UuVmlkZW9JbnRlcmZhY2V9ICovXG4gICAgdGhpcy52aWRlb18gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciB0aGUgZWxlbWVudCBmb3IgYXV0byBhZHZhbmNlbWVudCBpbXBsZW1lbnRzIHRoZSB2aWRlb1xuICAgKiBpbnRlcmZhY2UuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUsIGlmIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBpbXBsZW1lbnRzIHRoZSB2aWRlb1xuICAgKiAgICAgaW50ZXJmYWNlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaXNWaWRlb0ludGVyZmFjZVZpZGVvXygpIHtcbiAgICByZXR1cm4gdGhpcy5lbGVtZW50Xy5jbGFzc0xpc3QuY29udGFpbnMoJ2ktYW1waHRtbC12aWRlby1pbnRlcmZhY2UnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGFuIEhUTUxNZWRpYUVsZW1lbnQgZnJvbSBhbiBlbGVtZW50IHRoYXQgd3JhcHMgaXQuXG4gICAqIEByZXR1cm4gez9FbGVtZW50fSBUaGUgdW5kZXJseWluZyBIVE1MTWVkaWFFbGVtZW50LCBpZiBvbmUgZXhpc3RzLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0TWVkaWFFbGVtZW50XygpIHtcbiAgICBjb25zdCB0YWdOYW1lID0gdGhpcy5lbGVtZW50Xy50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAodGhpcy5lbGVtZW50XyBpbnN0YW5jZW9mIEhUTUxNZWRpYUVsZW1lbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRfO1xuICAgIH0gZWxzZSBpZiAodGhpcy5lbGVtZW50Xy5oYXNBdHRyaWJ1dGUoJ2JhY2tncm91bmQtYXVkaW8nKSAmJlxuICAgICAgICAodGFnTmFtZSA9PT0gJ2FtcC1zdG9yeScgfHwgdGFnTmFtZSA9PT0gJ2FtcC1zdG9yeS1wYWdlJykpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRfLnF1ZXJ5U2VsZWN0b3IoJy5pLWFtcGh0bWwtc3RvcnktYmFja2dyb3VuZC1hdWRpbycpO1xuICAgIH0gZWxzZSBpZiAodGFnTmFtZSA9PT0gJ2FtcC1hdWRpbycpIHtcbiAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRfLnF1ZXJ5U2VsZWN0b3IoJ2F1ZGlvJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXJ0KCkge1xuICAgIHN1cGVyLnN0YXJ0KCk7XG5cbiAgICAvLyBQcmV2ZW50cyByYWNlIGNvbmRpdGlvbiB3aGVuIGNoZWNraW5nIGZvciB2aWRlbyBpbnRlcmZhY2UgY2xhc3NuYW1lLlxuICAgICh0aGlzLmVsZW1lbnRfLndoZW5CdWlsdCA/IHRoaXMuZWxlbWVudF8ud2hlbkJ1aWx0KCkgOiBQcm9taXNlLnJlc29sdmUoKSlcbiAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5zdGFydFdoZW5CdWlsdF8oKSk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgc3RhcnRXaGVuQnVpbHRfKCkge1xuICAgIGlmICh0aGlzLmlzVmlkZW9JbnRlcmZhY2VWaWRlb18oKSkge1xuICAgICAgdGhpcy5zdGFydFZpZGVvSW50ZXJmYWNlRWxlbWVudF8oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubWVkaWFFbGVtZW50Xykge1xuICAgICAgdGhpcy5tZWRpYUVsZW1lbnRfID0gdGhpcy5nZXRNZWRpYUVsZW1lbnRfKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubWVkaWFFbGVtZW50Xykge1xuICAgICAgdGhpcy5zdGFydEh0bWxNZWRpYUVsZW1lbnRfKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdXNlcigpLmVycm9yKCdBTVAtU1RPUlktUEFHRScsXG4gICAgICAgIGBFbGVtZW50IHdpdGggSUQgJHt0aGlzLmVsZW1lbnRfLmlkfSBpcyBub3QgYSBtZWRpYSBlbGVtZW50IGAgK1xuICAgICAgICAnc3VwcG9ydGVkIGZvciBhdXRvbWF0aWMgYWR2YW5jZW1lbnQuJyk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgc3RhcnRIdG1sTWVkaWFFbGVtZW50XygpIHtcbiAgICBjb25zdCBtZWRpYUVsZW1lbnQgPSBkZXYoKS5hc3NlcnRFbGVtZW50KHRoaXMubWVkaWFFbGVtZW50XyxcbiAgICAgICAgJ01lZGlhIGVsZW1lbnQgd2FzIHVuc3BlY2lmaWVkLicpO1xuICAgIGxpc3Rlbk9uY2UobWVkaWFFbGVtZW50LCAnZW5kZWQnLCAoKSA9PiB0aGlzLm9uQWR2YW5jZSgpKTtcbiAgICBsaXN0ZW5PbmNlKG1lZGlhRWxlbWVudCwgJ3RpbWV1cGRhdGUnLCAoKSA9PiB0aGlzLm9uUHJvZ3Jlc3NVcGRhdGUoKSk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgc3RhcnRWaWRlb0ludGVyZmFjZUVsZW1lbnRfKCkge1xuICAgIHRoaXMuZWxlbWVudF8uZ2V0SW1wbCgpLnRoZW4odmlkZW8gPT4ge1xuICAgICAgdGhpcy52aWRlb18gPSB2aWRlbztcbiAgICB9KTtcblxuICAgIGxpc3Rlbk9uY2UodGhpcy5lbGVtZW50XywgVmlkZW9FdmVudHMuRU5ERUQsICgpID0+IHRoaXMub25BZHZhbmNlKCksXG4gICAgICAgIHtjYXB0dXJlOiB0cnVlfSk7XG5cbiAgICB0aGlzLnRpbWVyXy5wb2xsKFBPTExfSU5URVJWQUxfTVMsICgpID0+IHtcbiAgICAgIHRoaXMub25Qcm9ncmVzc1VwZGF0ZSgpO1xuICAgICAgcmV0dXJuICF0aGlzLmlzUnVubmluZygpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzdG9wKCkge1xuICAgIC8vIFdlIGRvbid0IG5lZWQgdG8gZXhwbGljaXRseSBzdG9wIHRoZSBwb2xsaW5nIG9yIG1lZGlhIGV2ZW50cyBsaXN0ZWRcbiAgICAvLyBhYm92ZSwgc2luY2UgdGhleSBhcmUgYWxyZWFkeSBib3VuZCB0byBlaXRoZXIgdGhlIHBsYXliYWNrIG9mIHRoZSBtZWRpYVxuICAgIC8vIG9uIHRoZSBwYWdlLCBvciB0aGUgaXNSdW5uaW5nIHN0YXRlIG9mIHRoaXMgQWR2YW5jZW1lbnRDb25maWcuXG4gICAgc3VwZXIuc3RvcCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRQcm9ncmVzcygpIHtcbiAgICBpZiAodGhpcy5pc1ZpZGVvSW50ZXJmYWNlVmlkZW9fKCkpIHtcbiAgICAgIGlmICh0aGlzLnZpZGVvXyAmJiB0aGlzLnZpZGVvXy5nZXREdXJhdGlvbigpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZGVvXy5nZXRDdXJyZW50VGltZSgpIC8gdGhpcy52aWRlb18uZ2V0RHVyYXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubWVkaWFFbGVtZW50XyAmJiB0aGlzLm1lZGlhRWxlbWVudF8uZHVyYXRpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLm1lZGlhRWxlbWVudF8uY3VycmVudFRpbWUgLyB0aGlzLm1lZGlhRWxlbWVudF8uZHVyYXRpb247XG4gICAgfVxuXG4gICAgcmV0dXJuIHN1cGVyLmdldFByb2dyZXNzKCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhbiBpbnN0YW5jZSBvZiBNZWRpYUJhc2VkQWR2YW5jZW1lbnQgYmFzZWQgb24gdGhlIHZhbHVlIG9mIHRoZVxuICAgKiBhdXRvLWFkdmFuY2Ugc3RyaW5nIChmcm9tIHRoZSAnYXV0by1hZHZhbmNlLWFmdGVyJyBhdHRyaWJ1dGUgb24gdGhlIHBhZ2UpLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gYXV0b0FkdmFuY2VTdHIgVGhlIHZhbHVlIG9mIHRoZSBhdXRvLWFkdmFuY2UtYWZ0ZXJcbiAgICogICAgIGF0dHJpYnV0ZS5cbiAgICogQHJldHVybiB7P0FkdmFuY2VtZW50Q29uZmlnfSBBbiBBZHZhbmNlbWVudENvbmZpZywgaWYgbWVkaWEtZWxlbWVudC1iYXNlZFxuICAgKiAgICAgYXV0by1hZHZhbmNlIGlzIHN1cHBvcnRlZCBmb3IgdGhlIHNwZWNpZmllZCBhdXRvLWFkdmFuY2Ugc3RyaW5nOyBudWxsXG4gICAqICAgICBvdGhlcndpc2UuXG4gICAqL1xuICBzdGF0aWMgZnJvbUF1dG9BZHZhbmNlU3RyaW5nKGF1dG9BZHZhbmNlU3RyLCB3aW4sIHJvb3RFbCkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBlbGVtZW50ID0gcm9vdEVsLnF1ZXJ5U2VsZWN0b3IoYCMke1xuICAgICAgICBlc2NhcGVDc3NTZWxlY3RvcklkZW50KGF1dG9BZHZhbmNlU3RyKVxuICAgICAgfWApO1xuXG4gICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgTWVkaWFCYXNlZEFkdmFuY2VtZW50KHdpbiwgZWxlbWVudCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE4IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge2NoaWxkRWxlbWVudHNCeVRhZywgbWF0Y2hlc30gZnJvbSAnLi4vLi4vLi4vc3JjL2RvbSc7XG5pbXBvcnQge2RldiwgdXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2lzRXhwZXJpbWVudE9ufSBmcm9tICcuLi8uLi8uLi9zcmMvZXhwZXJpbWVudHMnO1xuaW1wb3J0IHtweCwgc2V0SW1wb3J0YW50U3R5bGVzfSBmcm9tICcuLi8uLi8uLi9zcmMvc3R5bGUnO1xuaW1wb3J0IHt0aHJvdHRsZX0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL3JhdGUtbGltaXQnO1xuaW1wb3J0IHt0b0FycmF5LCB0b1dpbn0gZnJvbSAnLi4vLi4vLi4vc3JjL3R5cGVzJztcbmltcG9ydCB7dW5zY2FsZWRDbGllbnRSZWN0fSBmcm9tICcuL3V0aWxzJztcblxuXG4vKiogQHByaXZhdGUgQGNvbnN0IHtudW1iZXJ9ICovXG5jb25zdCBNSU5fTEFZRVJfV0lEVEhfUFggPSAzODA7XG5cblxuLyoqIEBwcml2YXRlIEBjb25zdCB7bnVtYmVyfSAqL1xuY29uc3QgTUFYX0xBWUVSX1dJRFRIX1BYID0gNTIwO1xuXG5cbi8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IFNDQUxJTkdfQVBQTElFRF9DTEFTU05BTUUgPSAnaS1hbXBodG1sLXN0b3J5LXNjYWxlZCc7XG5cblxuLyoqIEBzdHJ1Y3QgQHR5cGVkZWYge3tmYWN0b3I6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXJ9fSAqL1xubGV0IFRhcmdldERpbWVuc2lvbnNEZWY7XG5cblxuLyoqXG4gKiBAc3RydWN0XG4gKiBAdHlwZWRlZiB7e1xuICogICByZWxhdGl2ZVdpZHRoOiBudW1iZXIsXG4gKiAgIHJlbGF0aXZlSGVpZ2h0OiBudW1iZXIsXG4gKiAgIG1hdHJpeDogP0FycmF5PG51bWJlcj4sXG4gKiB9fVxuICovXG5sZXQgU2NhbGFibGVEaW1lbnNpb25zRGVmO1xuXG5cbi8qKlxuICogQHBhcmFtIHshRWxlbWVudH0gc2l6ZXJcbiAqIEByZXR1cm4geyFUYXJnZXREaW1lbnNpb25zRGVmfVxuICovXG5mdW5jdGlvbiB0YXJnZXREaW1lbnNpb25zRm9yKHNpemVyKSB7XG4gIGNvbnN0IHt3aWR0aCwgaGVpZ2h0fSA9IHVuc2NhbGVkQ2xpZW50UmVjdChzaXplcik7XG5cbiAgY29uc3QgcmF0aW8gPSB3aWR0aCAvIGhlaWdodDtcblxuICBjb25zdCB0YXJnZXRXaWR0aCA9IE1hdGgubWluKE1BWF9MQVlFUl9XSURUSF9QWCxcbiAgICAgIE1hdGgubWF4KHdpZHRoLCBNYXRoLm1heCgxLCByYXRpbykgKiBNSU5fTEFZRVJfV0lEVEhfUFgpKTtcblxuICBjb25zdCB0YXJnZXRIZWlnaHQgPSAodGFyZ2V0V2lkdGggLyByYXRpbyk7XG5cbiAgY29uc3QgZmFjdG9yID0gd2lkdGggLyB0YXJnZXRXaWR0aDtcblxuICByZXR1cm4ge2ZhY3Rvciwgd2lkdGg6IHRhcmdldFdpZHRoLCBoZWlnaHQ6IHRhcmdldEhlaWdodH07XG59XG5cblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gZmFjdG9yXG4gKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAqIEBwYXJhbSB7IUFycmF5PG51bWJlcj59IG1hdHJpeFxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsICo+fVxuICovXG5mdW5jdGlvbiBzY2FsZVRyYW5zZm9ybShmYWN0b3IsIHdpZHRoLCBoZWlnaHQsIG1hdHJpeCkge1xuICAvLyBUT0RPKGFsYW5vcm96Y28sICMxMjkzNCk6IFRyYW5zbGF0ZSB2YWx1ZXMgYXJlIG5vdCBjb3JyZWN0bHkgY2FsY3VsYXRlZCBpZlxuICAvLyBgc2NhbGVgLCBgc2tld2Agb3IgYHJvdGF0ZWAgaGF2ZSBiZWVuIHVzZXItZGVmaW5lZC5cbiAgY29uc3QgdHJhbnNsYXRlWCA9IHdpZHRoICogZmFjdG9yIC8gMiAtIHdpZHRoIC8gMjtcbiAgY29uc3QgdHJhbnNsYXRlWSA9IGhlaWdodCAqIGZhY3RvciAvIDIgLSBoZWlnaHQgLyAyO1xuICByZXR1cm4gW1xuICAgIG1hdHJpeFswXSAqIGZhY3RvcixcbiAgICBtYXRyaXhbMV0sXG4gICAgbWF0cml4WzJdLFxuICAgIG1hdHJpeFszXSAqIGZhY3RvcixcbiAgICBtYXRyaXhbNF0gKyB0cmFuc2xhdGVYLFxuICAgIG1hdHJpeFs1XSArIHRyYW5zbGF0ZVksXG4gIF07XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYWdlXG4gKiBAcmV0dXJuIHshQXJyYXk8IUVsZW1lbnQ+fVxuICovXG5mdW5jdGlvbiBzY2FsYWJsZUVsZW1lbnRzKHBhZ2UpIHtcbiAgcmV0dXJuIHRvQXJyYXkoY2hpbGRFbGVtZW50c0J5VGFnKHBhZ2UsICdhbXAtc3RvcnktZ3JpZC1sYXllcicpKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhZ2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzU2NhbGluZ0VuYWJsZWQocGFnZSkge1xuICAvLyBUT0RPKGFsYW5vcm96Y28sICMxMjkwMik6IENsZWFuIHVwIGV4cGVyaW1lbnQgZmxhZy5cbiAgLy8gTk9URShhbGFub3JvemNvKTogRXhwZXJpbWVudCBmbGFnIGlzIHRlbXBvcmFyeS4gTm8gbmVlZCB0byBjbHV0dGVyIHRoZVxuICAvLyBzaWduYXR1cmVzIGluIHRoaXMgZnVuY3Rpb24gcGF0aCBieSBhZGRpbmcgYHdpbmAgYXMgYSBwYXJhbWV0ZXIuXG4gIGNvbnN0IHdpbiA9IHRvV2luKHBhZ2Uub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyk7XG4gIGlmIChpc0V4cGVyaW1lbnRPbih3aW4sICdhbXAtc3Rvcnktc2NhbGluZycpKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIHBhZ2UuZ2V0QXR0cmlidXRlKCdzY2FsaW5nJykgPT0gJ3JlbGF0aXZlJztcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhZ2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzU2NhbGluZ0FwcGxpZWQocGFnZSkge1xuICByZXR1cm4gcGFnZS5jbGFzc0xpc3QuY29udGFpbnMoU0NBTElOR19BUFBMSUVEX0NMQVNTTkFNRSk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYWdlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzQXBwbGllZFxuICovXG5mdW5jdGlvbiBtYXJrU2NhbGluZ0FwcGxpZWQocGFnZSwgaXNBcHBsaWVkID0gdHJ1ZSkge1xuICBwYWdlLmNsYXNzTGlzdC50b2dnbGUoU0NBTElOR19BUFBMSUVEX0NMQVNTTkFNRSwgaXNBcHBsaWVkKTtcbn1cblxuXG4vKipcbiAqIFJlcXVpcmVkIGZvciBsYXp5IGV2YWx1YXRpb24gYWZ0ZXIgcmVzaXplLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFnZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gd2l0aGluUmFuZ2UocGFnZSkge1xuICByZXR1cm4gbWF0Y2hlcyhwYWdlLCAnW2FjdGl2ZV0sIFtkaXN0YW5jZT1cIjFcIl0sIFtkZXNrdG9wXSA+IFtkaXN0YW5jZT1cIjJcIl0nKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0Nzc1pvb21TdXBwb3J0ZWQod2luKSB7XG4gIC8vIElFIHN1cHBvcnRzIGB6b29tYCwgYnV0IG5vdCBgQ1NTLnN1cHBvcnRzYC5cbiAgcmV0dXJuIFNlcnZpY2VzLnBsYXRmb3JtRm9yKHdpbikuaXNJZSgpIHx8IHdpbi5DU1Muc3VwcG9ydHMoJ3pvb20nLCAnMScpO1xufVxuXG5cbi8qKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzQ3NzQ3VzdG9tUHJvcHNTdXBwb3J0ZWQod2luKSB7XG4gIHJldHVybiAhU2VydmljZXMucGxhdGZvcm1Gb3Iod2luKS5pc0llKCkgJiYgd2luLkNTUy5zdXBwb3J0cygnKC0tZm9vOiByZWQpJyk7XG59XG5cblxuLyoqIEBwcml2YXRlIHs/UGFnZVNjYWxpbmdTZXJ2aWNlfSAqL1xubGV0IHBhZ2VTY2FsaW5nU2VydmljZSA9IG51bGw7XG5cblxuLyoqXG4gKiBTZXJ2aWNlIGZvciBzY2FsaW5nIHBhZ2VzIGR5bmFtaWNhbGx5IHNvIHRoZWlyIGxheWVycyB3aWxsIGJlIHNpemVkIHdpdGhpbiBhXG4gKiBjZXJ0YWluIHBpeGVsIHJhbmdlIGluZGVwZW5kZW50IG9mIHZpc3VhbCBkaW1lbnNpb25zLlxuICovXG4vLyBUT0RPKGFsYW5vcm96Y28pOiBNYWtlIHRoaXMgcGFydCBvZiB0aGUgcnVudGltZSBsYXlvdXQgc3lzdGVtIHRvIHByZXZlbnRcbi8vIEZPVUMtbGlrZSBqdW1wIGFuZCBhbGxvdyBmb3IgU1NSLlxuZXhwb3J0IGNsYXNzIFBhZ2VTY2FsaW5nU2VydmljZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0geyFFbGVtZW50fSByb290RWxcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgcm9vdEVsKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVdpbmRvd30gKi9cbiAgICB0aGlzLndpbl8gPSB3aW47XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRWxlbWVudH0gKi9cbiAgICB0aGlzLnJvb3RFbF8gPSByb290RWw7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0ICovXG4gICAgdGhpcy52c3luY18gPSBTZXJ2aWNlcy52c3luY0Zvcih3aW4pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7P0VsZW1lbnR9ICovXG4gICAgLy8gQXNzdW1lcyBhY3RpdmUgcGFnZSB0byBiZSBkZXRlcm1pbmFudCBvZiB0aGUgdGFyZ2V0IHNpemUuXG4gICAgdGhpcy5zaXplcl8gPSByb290RWwucXVlcnlTZWxlY3RvcignYW1wLXN0b3J5LXBhZ2VbYWN0aXZlXScpO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/VGFyZ2V0RGltZW5zaW9uc0RlZn0gKi9cbiAgICB0aGlzLnRhcmdldERpbWVuc2lvbnNfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IU9iamVjdDxzdHJpbmcsICFBcnJheTwhU2NhbGFibGVEaW1lbnNpb25zRGVmPj59ICovXG4gICAgdGhpcy5zY2FsYWJsZUVsc0RpbWVuc2lvbnNfID0ge307XG5cbiAgICBTZXJ2aWNlcy52aWV3cG9ydEZvckRvYyhyb290RWwpLm9uUmVzaXplKFxuICAgICAgICB0aHJvdHRsZSh3aW4sICgpID0+IHRoaXMub25WaWV3cG9ydFJlc2l6ZV8oKSwgMTAwKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gc3RvcnlcbiAgICogQHJldHVybiB7IVBhZ2VTY2FsaW5nU2VydmljZX1cbiAgICovXG4gIHN0YXRpYyBmb3Ioc3RvcnkpIHtcbiAgICAvLyBJbXBsZW1lbnRlZCBhcyBzaW5nbGV0b24gZm9yIG5vdywgc2hvdWxkIGJlIG1hcHBlZCB0byBzdG9yeSBlbGVtZW50LlxuICAgIC8vIFRPRE8oYWxhbm9yb3pjbyk6IEltcGxlbWVudCBtYXBwaW5nIHRvIHN1cHBvcnQgbXVsdGlwbGUgPGFtcC1zdG9yeT5cbiAgICAvLyBpbnN0YW5jZXMgaW4gb25lIGRvYy5cbiAgICBjb25zdCB3aW4gPSB0b1dpbihzdG9yeS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3KTtcbiAgICBpZiAoIXBhZ2VTY2FsaW5nU2VydmljZSkge1xuICAgICAgLy8gVE9ETyhhbGFub3JvemNvLCAjMTMwNjQpOiBGYWxsaW5nIGJhY2sgdG8gdHJhbnNmb3JtIG9uIGlPU1xuICAgICAgaWYgKCFpc0Nzc1pvb21TdXBwb3J0ZWQod2luKSB8fCBTZXJ2aWNlcy5wbGF0Zm9ybUZvcih3aW4pLmlzSW9zKCkpIHtcbiAgICAgICAgLy8gVE9ETyhhbGFub3JvemNvLCAjMTI5MzQpOiBDb21iaW5lIHRyYW5zZm9ybSBtYXRyaXguXG4gICAgICAgIHVzZXIoKS53YXJuKCdBTVAtU1RPUlknLFxuICAgICAgICAgICAgJ2BhbXAtc3Rvcnktc2NhbGluZ2AgdXNpbmcgQ1NTIHRyYW5zZm9ybXMgYXMgZmFsbGJhY2suJyxcbiAgICAgICAgICAgICdBbnkgYGFtcC1zdG9yeS1ncmlkLWxheWVyYCB3aXRoIHVzZXItZGVmaW5lZCBDU1MgdHJhbnNmb3JtcyB3aWxsJyxcbiAgICAgICAgICAgICdicmVhay4nLFxuICAgICAgICAgICAgJ1NlZSBodHRwczovL2dpdGh1Yi5jb20vYW1wcHJvamVjdC9hbXBodG1sL2lzc3Vlcy8xMjkzNCcpO1xuICAgICAgICBwYWdlU2NhbGluZ1NlcnZpY2UgPSBuZXcgVHJhbnNmb3JtU2NhbGluZ1NlcnZpY2Uod2luLCBzdG9yeSk7XG4gICAgICB9IGVsc2UgaWYgKGlzQ3NzQ3VzdG9tUHJvcHNTdXBwb3J0ZWQod2luKSkge1xuICAgICAgICBwYWdlU2NhbGluZ1NlcnZpY2UgPSBuZXcgQ3NzUHJvcHNab29tU2NhbGluZ1NlcnZpY2Uod2luLCBzdG9yeSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYWdlU2NhbGluZ1NlcnZpY2UgPSBuZXcgWm9vbVNjYWxpbmdTZXJ2aWNlKHdpbiwgc3RvcnkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGFnZVNjYWxpbmdTZXJ2aWNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhZ2VcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqL1xuICBzY2FsZShwYWdlKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnNjYWxlXyhwYWdlKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRWxlbWVudH0gcGFnZVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZXx1bmRlZmluZWR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzY2FsZV8ocGFnZSkge1xuICAgIGlmIChpc1NjYWxpbmdBcHBsaWVkKHBhZ2UpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghaXNTY2FsaW5nRW5hYmxlZChwYWdlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXdpdGhpblJhbmdlKHBhZ2UpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnZzeW5jXy5ydW5Qcm9taXNlKHtcbiAgICAgIG1lYXN1cmU6IHN0YXRlID0+IHtcbiAgICAgICAgc3RhdGUudGFyZ2V0RGltZW5zaW9ucyA9IHRoaXMubWVhc3VyZVRhcmdldERpbWVuc2lvbnNfKCk7XG4gICAgICAgIHN0YXRlLnNjYWxhYmxlRWxzRGltZW5zaW9ucyA9IHRoaXMuZ2V0T3JNZWFzdXJlU2NhbGFibGVFbHNGb3IocGFnZSk7XG4gICAgICB9LFxuICAgICAgbXV0YXRlOiBzdGF0ZSA9PiB7XG4gICAgICAgIGNvbnN0IHt0YXJnZXREaW1lbnNpb25zLCBzY2FsYWJsZUVsc0RpbWVuc2lvbnN9ID0gc3RhdGU7XG4gICAgICAgIHNjYWxhYmxlRWxlbWVudHMocGFnZSkuZm9yRWFjaCgoZWwsIGkpID0+IHtcbiAgICAgICAgICAvLyBgYm9yZGVyLWJveGAgcmVxdWlyZWQgc2luY2UgbGF5ZXIgbm93IGhhcyBhIHdpZHRoL2hlaWdodCBzZXQuXG4gICAgICAgICAgc2V0SW1wb3J0YW50U3R5bGVzKGVsLCB7J2JveC1zaXppbmcnOiAnYm9yZGVyLWJveCd9KTtcbiAgICAgICAgICBzZXRJbXBvcnRhbnRTdHlsZXMoZWwsXG4gICAgICAgICAgICAgIHRoaXMuc2NhbGluZ1N0eWxlcyh0YXJnZXREaW1lbnNpb25zLCBzY2FsYWJsZUVsc0RpbWVuc2lvbnNbaV0pKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG1hcmtTY2FsaW5nQXBwbGllZChwYWdlKTtcbiAgICAgIH0sXG4gICAgfSwgLyogc3RhdGUgKi8ge30pO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4geyFUYXJnZXREaW1lbnNpb25zRGVmfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbWVhc3VyZVRhcmdldERpbWVuc2lvbnNfKCkge1xuICAgIGlmICghdGhpcy50YXJnZXREaW1lbnNpb25zXykge1xuICAgICAgY29uc3Qgc2l6ZXIgPSBkZXYoKS5hc3NlcnRFbGVtZW50KHRoaXMuc2l6ZXJfLCAnTm8gc2l6ZXIuJyk7XG4gICAgICBjb25zdCBkaW1lbnNpb25zID0gdGFyZ2V0RGltZW5zaW9uc0ZvcihzaXplcik7XG4gICAgICB0aGlzLnRhcmdldERpbWVuc2lvbnNfID0gZGltZW5zaW9ucztcbiAgICAgIHRoaXMudXBkYXRlUm9vdFByb3BzKGRpbWVuc2lvbnMpO1xuICAgIH1cbiAgICByZXR1cm4gLyoqIEB0eXBlIHshVGFyZ2V0RGltZW5zaW9uc0RlZn0gKi8gKFxuICAgICAgZGV2KCkuYXNzZXJ0KHRoaXMudGFyZ2V0RGltZW5zaW9uc18pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBwYWdlXG4gICAqIEByZXR1cm4geyFBcnJheTwhU2NhbGFibGVEaW1lbnNpb25zRGVmPn1cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZ2V0T3JNZWFzdXJlU2NhbGFibGVFbHNGb3IocGFnZSkge1xuICAgIGNvbnN0IHBhZ2VJZCA9IHVzZXIoKS5hc3NlcnQocGFnZS5pZCwgJ05vIHBhZ2UgaWQuJyk7XG5cbiAgICBpZiAoIXRoaXMuc2NhbGFibGVFbHNEaW1lbnNpb25zX1twYWdlSWRdKSB7XG4gICAgICB0aGlzLnNjYWxhYmxlRWxzRGltZW5zaW9uc19bcGFnZUlkXSA9IHRoaXMubWVhc3VyZVNjYWxhYmxlRWxzRm9yKHBhZ2UpO1xuICAgIH1cblxuICAgIHJldHVybiAvKiogQHR5cGUgeyFBcnJheTwhU2NhbGFibGVEaW1lbnNpb25zRGVmPn0gKi8gKFxuICAgICAgZGV2KCkuYXNzZXJ0KHRoaXMuc2NhbGFibGVFbHNEaW1lbnNpb25zX1twYWdlSWRdKSk7XG4gIH1cblxuICAvKipcbiAgICogTWVhc3VyZXMgc2NhbGFibGUgZWxlbWVudHMgaW4gYSBwYWdlLlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBwYWdlXG4gICAqIEByZXR1cm4geyFBcnJheTwhU2NhbGFibGVEaW1lbnNpb25zRGVmPn1cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgbWVhc3VyZVNjYWxhYmxlRWxzRm9yKHBhZ2UpIHtcbiAgICBjb25zdCB7d2lkdGgsIGhlaWdodH0gPSB1bnNjYWxlZENsaWVudFJlY3QocGFnZSk7XG4gICAgY29uc3QgcGFnZVdpZHRoID0gd2lkdGg7XG4gICAgY29uc3QgcGFnZUhlaWdodCA9IGhlaWdodDtcbiAgICByZXR1cm4gc2NhbGFibGVFbGVtZW50cyhwYWdlKS5tYXAoZWwgPT4ge1xuICAgICAgY29uc3Qge3dpZHRoLCBoZWlnaHR9ID0gdW5zY2FsZWRDbGllbnRSZWN0KGVsKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1hdHJpeDogdGhpcy5nZXRUcmFuc2Zvcm1NYXRyaXgoZWwpLFxuICAgICAgICByZWxhdGl2ZVdpZHRoOiB3aWR0aCAvIHBhZ2VXaWR0aCxcbiAgICAgICAgcmVsYXRpdmVIZWlnaHQ6IGhlaWdodCAvIHBhZ2VIZWlnaHQsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIG9uVmlld3BvcnRSZXNpemVfKCkge1xuICAgIHRoaXMudGFyZ2V0RGltZW5zaW9uc18gPSBudWxsO1xuICAgIHRoaXMudnN5bmNfLm1lYXN1cmUoKCkgPT4ge1xuICAgICAgdGhpcy5tZWFzdXJlVGFyZ2V0RGltZW5zaW9uc18oKTtcbiAgICB9KTtcbiAgICB0aGlzLnVwZGF0ZVBhZ2VzT25SZXNpemUoKTtcbiAgfVxuXG4gIC8qKiBAcHJvdGVjdGVkICovXG4gIHNjYWxlQWxsKCkge1xuICAgIGNvbnN0IHBhZ2VzID0gdG9BcnJheShjaGlsZEVsZW1lbnRzQnlUYWcodGhpcy5yb290RWxfLCAnYW1wLXN0b3J5LXBhZ2UnKSk7XG4gICAgcGFnZXMuZm9yRWFjaChwYWdlID0+IHtcbiAgICAgIG1hcmtTY2FsaW5nQXBwbGllZChwYWdlLCBmYWxzZSk7XG4gICAgICB0aGlzLnNjYWxlXyhwYWdlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIHByb3BlcnRpZXMgb24gcm9vdCBlbGVtZW50IHdoZW4gdGFyZ2V0IGRpbWVuc2lvbnMgaGF2ZSBiZWVuXG4gICAqIHJlLW1lYXN1cmVkLlxuICAgKiBAcGFyYW0geyFUYXJnZXREaW1lbnNpb25zRGVmfSB1bnVzZWRUYXJnZXREaW1lbnNpb25zXG4gICAqL1xuICB1cGRhdGVSb290UHJvcHModW51c2VkVGFyZ2V0RGltZW5zaW9ucykge1xuICAgIC8vIEludGVudGlvbmFsbHkgbGVmdCBibGFuay5cbiAgfVxuXG4gIC8qKiBAcHJvdGVjdGVkICovXG4gIHVwZGF0ZVBhZ2VzT25SZXNpemUoKSB7XG4gICAgLy8gSW50ZW50aW9uYWxseSBsZWZ0IGJsYW5rLlxuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgYW4gZWxlbWVudCdzIHRyYW5zZm9ybSBtYXRyaXguXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IHVudXNlZEVsXG4gICAqIEByZXR1cm4gez9BcnJheTxudW1iZXI+fVxuICAgKi9cbiAgZ2V0VHJhbnNmb3JtTWF0cml4KHVudXNlZEVsKSB7XG4gICAgLy8gQ2FsY3VsYXRpbmcgYSB0cmFuc2Zvcm0gbWF0cml4IGlzIG9wdGlvbmFsIGRlcGVuZGluZyBvbiBzY2FsaW5nXG4gICAgLy8gaW1wbGVtZW50YXRpb24uXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshVGFyZ2V0RGltZW5zaW9uc0RlZn0gdW51c2VkVGFyZ2V0RGltZW5zaW9uc1xuICAgKiBAcGFyYW0geyFTY2FsYWJsZURpbWVuc2lvbnNEZWZ9IHVudXNlZFNjYWxhYmxlRWxEaW1lbnNpb25zXG4gICAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCAqPn1cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgc2NhbGluZ1N0eWxlcyh1bnVzZWRUYXJnZXREaW1lbnNpb25zLCB1bnVzZWRTY2FsYWJsZUVsRGltZW5zaW9ucykge1xuICAgIGRldigpLmFzc2VydChmYWxzZSwgJ0VtcHR5IFBhZ2VTY2FsaW5nU2VydmljZSBpbXBsZW1lbnRhdGlvbi4nKTtcbiAgICByZXR1cm4ge307XG4gIH1cbn1cblxuXG4vKiogVXNlcyBDU1Mgem9vbSBhcyBzY2FsaW5nIG1ldGhvZC4gKi9cbmNsYXNzIFpvb21TY2FsaW5nU2VydmljZSBleHRlbmRzIFBhZ2VTY2FsaW5nU2VydmljZSB7XG4gIC8qKiBAcHJvdGVjdGVkICovXG4gIHVwZGF0ZVBhZ2VzT25SZXNpemUoKSB7XG4gICAgdGhpcy5zY2FsZUFsbCgpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzY2FsaW5nU3R5bGVzKHRhcmdldERpbWVuc2lvbnMsIGVsZW1lbnREaW1lbnNpb25zKSB7XG4gICAgY29uc3Qge3dpZHRoLCBoZWlnaHQsIGZhY3Rvcn0gPSB0YXJnZXREaW1lbnNpb25zO1xuICAgIGNvbnN0IHtyZWxhdGl2ZVdpZHRoLCByZWxhdGl2ZUhlaWdodH0gPSBlbGVtZW50RGltZW5zaW9ucztcbiAgICByZXR1cm4ge1xuICAgICAgJ3dpZHRoJzogcHgod2lkdGggKiByZWxhdGl2ZVdpZHRoKSxcbiAgICAgICdoZWlnaHQnOiBweChoZWlnaHQgKiByZWxhdGl2ZUhlaWdodCksXG4gICAgICAnem9vbSc6IGZhY3RvcixcbiAgICB9O1xuICB9XG59XG5cblxuLyoqIFVzZXMgY29tYmluZWQgQ1NTIHRyYW5zZm9ybSBhcyBzY2FsaW5nIG1ldGhvZC4gKi9cbmNsYXNzIFRyYW5zZm9ybVNjYWxpbmdTZXJ2aWNlIGV4dGVuZHMgUGFnZVNjYWxpbmdTZXJ2aWNlIHtcbiAgLyoqIEBwcm90ZWN0ZWQgKi9cbiAgdXBkYXRlUGFnZXNPblJlc2l6ZSgpIHtcbiAgICB0aGlzLnNjYWxlQWxsKCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGdldFRyYW5zZm9ybU1hdHJpeCh1bnVzZWRFbCkge1xuICAgIC8vIFRPRE8oYWxhbm9yb3pjbywgIzEyOTM0KTogSW1wbGVtZW50LlxuICAgIHJldHVybiBbMSwgMCwgMCwgMSwgMCwgMF07XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHNjYWxpbmdTdHlsZXModGFyZ2V0RGltZW5zaW9ucywgZWxlbWVudERpbWVuc2lvbnMpIHtcbiAgICBjb25zdCB7d2lkdGgsIGhlaWdodCwgZmFjdG9yfSA9IHRhcmdldERpbWVuc2lvbnM7XG4gICAgY29uc3Qge3JlbGF0aXZlV2lkdGgsIHJlbGF0aXZlSGVpZ2h0LCBtYXRyaXh9ID0gZWxlbWVudERpbWVuc2lvbnM7XG4gICAgY29uc3QgaW5pdGlhbE1hdHJpeCA9IC8qKiBAdHlwZSB7IUFycmF5PG51bWJlcj59ICovIChkZXYoKS5hc3NlcnQobWF0cml4KSk7XG4gICAgY29uc3QgdHJhbnNmb3JtZWRNYXRyaXggPVxuICAgICAgc2NhbGVUcmFuc2Zvcm0oZmFjdG9yLCB3aWR0aCwgaGVpZ2h0LCBpbml0aWFsTWF0cml4KTtcbiAgICByZXR1cm4ge1xuICAgICAgJ3dpZHRoJzogcHgod2lkdGggKiByZWxhdGl2ZVdpZHRoKSxcbiAgICAgICdoZWlnaHQnOiBweChoZWlnaHQgKiByZWxhdGl2ZUhlaWdodCksXG4gICAgICAndHJhbnNmb3JtJzogYG1hdHJpeCgke3RyYW5zZm9ybWVkTWF0cml4LmpvaW4oKX0pYCxcbiAgICB9O1xuICB9XG59XG5cblxuLyoqIFVzZXMgQ1NTIHpvb20gYW5kIGN1c3RvbSBDU1MgcHJvcGVydGllcyBhcyBzY2FsaW5nIG1ldGhvZC4gKi9cbmNsYXNzIENzc1Byb3BzWm9vbVNjYWxpbmdTZXJ2aWNlIGV4dGVuZHMgUGFnZVNjYWxpbmdTZXJ2aWNlIHtcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBnZXRPck1lYXN1cmVTY2FsYWJsZUVsc0ZvcihwYWdlKSB7XG4gICAgLy8gQ2lyY3VtdmVudHMgZWxlbWVudCBkaW1lbnNpb25zIGNhY2hlIGFzIGxheWVycyBhcmUgb25seSBtdXRhdGVkIG9uY2UuXG4gICAgcmV0dXJuIHRoaXMubWVhc3VyZVNjYWxhYmxlRWxzRm9yKHBhZ2UpO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICB1cGRhdGVSb290UHJvcHMoKSB7XG4gICAgY29uc3Qge3dpZHRoLCBoZWlnaHQsIGZhY3Rvcn0gPSB0aGlzLnRhcmdldERpbWVuc2lvbnNfO1xuICAgIHRoaXMudnN5bmNfLm11dGF0ZSgoKSA9PiB7XG4gICAgICB0aGlzLnJvb3RFbF8uc3R5bGUuc2V0UHJvcGVydHkoJy0taS1hbXBodG1sLXN0b3J5LXdpZHRoJywgcHgod2lkdGgpKTtcbiAgICAgIHRoaXMucm9vdEVsXy5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1pLWFtcGh0bWwtc3RvcnktaGVpZ2h0JywgcHgoaGVpZ2h0KSk7XG4gICAgICB0aGlzLnJvb3RFbF8uc3R5bGUuc2V0UHJvcGVydHkoJy0taS1hbXBodG1sLXN0b3J5LWZhY3RvcicsXG4gICAgICAgICAgZmFjdG9yLnRvU3RyaW5nKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBzY2FsaW5nU3R5bGVzKHVudXNlZFRhcmdldERpbWVuc2lvbnMsIGVsZW1lbnREaW1lbnNpb25zKSB7XG4gICAgY29uc3Qge3JlbGF0aXZlV2lkdGgsIHJlbGF0aXZlSGVpZ2h0fSA9IGVsZW1lbnREaW1lbnNpb25zO1xuICAgIHJldHVybiB7XG4gICAgICAnd2lkdGgnOiBgY2FsYyh2YXIoLS1pLWFtcGh0bWwtc3Rvcnktd2lkdGgpICogJHtyZWxhdGl2ZVdpZHRofSlgLFxuICAgICAgJ2hlaWdodCc6IGBjYWxjKHZhcigtLWktYW1waHRtbC1zdG9yeS1oZWlnaHQpICogJHtyZWxhdGl2ZUhlaWdodH0pYCxcbiAgICAgICd6b29tJzogJ3ZhcigtLWktYW1waHRtbC1zdG9yeS1mYWN0b3IpJyxcbiAgICB9O1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7RXZlbnRUeXBlLCBkaXNwYXRjaH0gZnJvbSAnLi9ldmVudHMnO1xuaW1wb3J0IHtTdGF0ZUNoYW5nZVR5cGV9IGZyb20gJy4vbmF2aWdhdGlvbi1zdGF0ZSc7XG5pbXBvcnQge2Rldn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2RpY3R9IGZyb20gJy4vLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge3JlbmRlckFzRWxlbWVudH0gZnJvbSAnLi9zaW1wbGUtdGVtcGxhdGUnO1xuXG5cbi8qKiBAc3RydWN0IEB0eXBlZGVmIHt7Y2xhc3NOYW1lOiBzdHJpbmcsIHRyaWdnZXJzOiAoc3RyaW5nfHVuZGVmaW5lZCl9fSAqL1xubGV0IEJ1dHRvblN0YXRlRGVmO1xuXG5cbi8qKiBAY29uc3QgeyFPYmplY3Q8c3RyaW5nLCAhQnV0dG9uU3RhdGVEZWY+fSAqL1xuY29uc3QgQmFja0J1dHRvblN0YXRlcyA9IHtcbiAgSElEREVOOiB7Y2xhc3NOYW1lOiAnaS1hbXBodG1sLXN0b3J5LWJ1dHRvbi1oaWRkZW4nfSxcbiAgUFJFVklPVVNfUEFHRToge1xuICAgIGNsYXNzTmFtZTogJ2ktYW1waHRtbC1zdG9yeS1iYWNrLXByZXYnLFxuICAgIHRyaWdnZXJzOiBFdmVudFR5cGUuUFJFVklPVVNfUEFHRSxcbiAgfSxcbiAgQ0xPU0VfQk9PS0VORDoge1xuICAgIGNsYXNzTmFtZTogJ2ktYW1waHRtbC1zdG9yeS1iYWNrLWNsb3NlLWJvb2tlbmQnLFxuICAgIHRyaWdnZXJzOiBFdmVudFR5cGUuQ0xPU0VfQk9PS0VORCxcbiAgfSxcbn07XG5cblxuLyoqIEBjb25zdCB7IU9iamVjdDxzdHJpbmcsICFCdXR0b25TdGF0ZURlZj59ICovXG5jb25zdCBGb3J3YXJkQnV0dG9uU3RhdGVzID0ge1xuICBORVhUX1BBR0U6IHtcbiAgICBjbGFzc05hbWU6ICdpLWFtcGh0bWwtc3RvcnktZndkLW5leHQnLFxuICAgIHRyaWdnZXJzOiBFdmVudFR5cGUuTkVYVF9QQUdFLFxuICB9LFxuICBTSE9XX0JPT0tFTkQ6IHtcbiAgICBjbGFzc05hbWU6ICdpLWFtcGh0bWwtc3RvcnktZndkLW1vcmUnLFxuICAgIHRyaWdnZXJzOiBFdmVudFR5cGUuU0hPV19CT09LRU5ELFxuICB9LFxuICBSRVBMQVk6IHtcbiAgICBjbGFzc05hbWU6ICdpLWFtcGh0bWwtc3RvcnktZndkLXJlcGxheScsXG4gICAgdHJpZ2dlcnM6IEV2ZW50VHlwZS5SRVBMQVksXG4gIH0sXG59O1xuXG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL3NpbXBsZS10ZW1wbGF0ZS5FbGVtZW50RGVmfSAqL1xuY29uc3QgQlVUVE9OID0ge1xuICB0YWc6ICdkaXYnLFxuICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1idXR0b24tY29udGFpbmVyJ30pLFxuICBjaGlsZHJlbjogW1xuICAgIHtcbiAgICAgIHRhZzogJ2J1dHRvbicsXG4gICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1idXR0b24tbW92ZSd9KSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRhZzogJ2RpdicsXG4gICAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1wYWdlLXNlbnRpbmVsJ30pLFxuICAgIH0sXG4gIF0sXG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHshRWxlbWVudH0gaG92ZXJFbFxuICogQHBhcmFtIHshRWxlbWVudH0gdGFyZ2V0RWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAqL1xuZnVuY3Rpb24gc2V0Q2xhc3NPbkhvdmVyKGhvdmVyRWwsIHRhcmdldEVsLCBjbGFzc05hbWUpIHtcbiAgaG92ZXJFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgIHRhcmdldEVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgfSk7XG4gIGhvdmVyRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICB0YXJnZXRFbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gIH0pO1xufVxuXG5cbmNsYXNzIFBhZ2luYXRpb25CdXR0b24ge1xuICAvKipcbiAgICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICAgKiBAcGFyYW0geyFCdXR0b25TdGF0ZURlZn0gaW5pdGlhbFN0YXRlXG4gICAqL1xuICBjb25zdHJ1Y3Rvcihkb2MsIGluaXRpYWxTdGF0ZSkge1xuICAgIC8qKiBAcHJpdmF0ZSB7IUJ1dHRvblN0YXRlRGVmfSAqL1xuICAgIHRoaXMuc3RhdGVfID0gaW5pdGlhbFN0YXRlO1xuXG4gICAgLyoqIEBwdWJsaWMgQGNvbnN0IHshRWxlbWVudH0gKi9cbiAgICB0aGlzLmVsZW1lbnQgPSByZW5kZXJBc0VsZW1lbnQoZG9jLCBCVVRUT04pO1xuXG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoaW5pdGlhbFN0YXRlLmNsYXNzTmFtZSk7XG5cbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHRoaXMub25DbGlja18oZSkpO1xuICB9XG5cbiAgLyoqIEBwYXJhbSB7IUJ1dHRvblN0YXRlRGVmfSBzdGF0ZSAqL1xuICB1cGRhdGVTdGF0ZShzdGF0ZSkge1xuICAgIGlmIChzdGF0ZSA9PT0gdGhpcy5zdGF0ZV8pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5zdGF0ZV8uY2xhc3NOYW1lKTtcbiAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChzdGF0ZS5jbGFzc05hbWUpO1xuICAgIHRoaXMuc3RhdGVfID0gc3RhdGU7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshRXZlbnR9IGVcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uQ2xpY2tfKGUpIHtcbiAgICBpZiAoIXRoaXMuc3RhdGVfLnRyaWdnZXJzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBkaXNwYXRjaCh0aGlzLmVsZW1lbnQsIGRldigpLmFzc2VydCh0aGlzLnN0YXRlXy50cmlnZ2VycyksXG4gICAgICAgIC8qIG9wdF9idWJibGVzICovIHRydWUpO1xuICB9XG59XG5cblxuLyoqIFBhZ2luYXRpb24gYnV0dG9ucyBsYXllci4gKi9cbmV4cG9ydCBjbGFzcyBQYWdpbmF0aW9uQnV0dG9ucyB7XG4gIC8qKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jICovXG4gIGNvbnN0cnVjdG9yKGRvYykge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQYWdpbmF0aW9uQnV0dG9ufSAqL1xuICAgIHRoaXMuZm9yd2FyZEJ1dHRvbl8gPVxuICAgICAgICBuZXcgUGFnaW5hdGlvbkJ1dHRvbihkb2MsIEZvcndhcmRCdXR0b25TdGF0ZXMuTkVYVF9QQUdFKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFQYWdpbmF0aW9uQnV0dG9ufSAqL1xuICAgIHRoaXMuYmFja0J1dHRvbl8gPSBuZXcgUGFnaW5hdGlvbkJ1dHRvbihkb2MsIEJhY2tCdXR0b25TdGF0ZXMuSElEREVOKTtcblxuICAgIHRoaXMuZm9yd2FyZEJ1dHRvbl8uZWxlbWVudC5jbGFzc0xpc3QuYWRkKCduZXh0LWNvbnRhaW5lcicpO1xuICAgIHRoaXMuYmFja0J1dHRvbl8uZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwcmV2LWNvbnRhaW5lcicpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAgICogQHJldHVybiB7IVBhZ2luYXRpb25CdXR0b25zfVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZShkb2MpIHtcbiAgICByZXR1cm4gbmV3IFBhZ2luYXRpb25CdXR0b25zKGRvYyk7XG4gIH1cblxuICAvKiogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudCAqL1xuICBhdHRhY2goZWxlbWVudCkge1xuICAgIHNldENsYXNzT25Ib3ZlcihcbiAgICAgICAgdGhpcy5mb3J3YXJkQnV0dG9uXy5lbGVtZW50LCBlbGVtZW50LCAnaS1hbXBodG1sLXN0b3J5LW5leHQtaG92ZXInKTtcblxuICAgIHNldENsYXNzT25Ib3ZlcihcbiAgICAgICAgdGhpcy5iYWNrQnV0dG9uXy5lbGVtZW50LCBlbGVtZW50LCAnaS1hbXBodG1sLXN0b3J5LXByZXYtaG92ZXInKTtcblxuICAgIGVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5mb3J3YXJkQnV0dG9uXy5lbGVtZW50KTtcbiAgICBlbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuYmFja0J1dHRvbl8uZWxlbWVudCk7XG4gIH1cblxuICAvKiogQHBhcmFtIHshLi9uYXZpZ2F0aW9uLXN0YXRlLlN0YXRlQ2hhbmdlRXZlbnREZWZ9IGV2ZW50ICovXG4gIG9uTmF2aWdhdGlvblN0YXRlQ2hhbmdlKGV2ZW50KSB7XG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlIFN0YXRlQ2hhbmdlVHlwZS5BQ1RJVkVfUEFHRTpcbiAgICAgICAgY29uc3Qge3BhZ2VJbmRleCwgdG90YWxQYWdlc30gPSBldmVudC52YWx1ZTtcblxuICAgICAgICB0aGlzLmJhY2tCdXR0b25fLnVwZGF0ZVN0YXRlKFxuICAgICAgICAgICAgcGFnZUluZGV4ID09PSAwID9cbiAgICAgICAgICAgICAgQmFja0J1dHRvblN0YXRlcy5ISURERU4gOlxuICAgICAgICAgICAgICBCYWNrQnV0dG9uU3RhdGVzLlBSRVZJT1VTX1BBR0UpO1xuXG4gICAgICAgIHRoaXMuZm9yd2FyZEJ1dHRvbl8udXBkYXRlU3RhdGUoXG4gICAgICAgICAgICBwYWdlSW5kZXggPT09IHRvdGFsUGFnZXMgLSAxID9cbiAgICAgICAgICAgICAgRm9yd2FyZEJ1dHRvblN0YXRlcy5TSE9XX0JPT0tFTkQgOlxuICAgICAgICAgICAgICBGb3J3YXJkQnV0dG9uU3RhdGVzLk5FWFRfUEFHRSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFN0YXRlQ2hhbmdlVHlwZS5CT09LRU5EX0VOVEVSOlxuICAgICAgICB0aGlzLmJhY2tCdXR0b25fLnVwZGF0ZVN0YXRlKEJhY2tCdXR0b25TdGF0ZXMuQ0xPU0VfQk9PS0VORCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFN0YXRlQ2hhbmdlVHlwZS5CT09LRU5EX0VYSVQ6XG4gICAgICAgIHRoaXMuYmFja0J1dHRvbl8udXBkYXRlU3RhdGUoQmFja0J1dHRvblN0YXRlcy5QUkVWSU9VU19QQUdFKTtcbiAgICAgICAgdGhpcy5mb3J3YXJkQnV0dG9uXy51cGRhdGVTdGF0ZShGb3J3YXJkQnV0dG9uU3RhdGVzLlNIT1dfQk9PS0VORCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIFN0YXRlQ2hhbmdlVHlwZS5FTkQ6XG4gICAgICAgIHRoaXMuZm9yd2FyZEJ1dHRvbl8udXBkYXRlU3RhdGUoRm9yd2FyZEJ1dHRvblN0YXRlcy5SRVBMQVkpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHtQT0xMX0lOVEVSVkFMX01TfSBmcm9tICcuL3BhZ2UtYWR2YW5jZW1lbnQnO1xuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7ZXNjYXBlQ3NzU2VsZWN0b3JOdGgsIHNjb3BlZFF1ZXJ5U2VsZWN0b3J9IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuaW1wb3J0IHtoYXNPd24sIG1hcH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge3NjYWxlLCBzZXRJbXBvcnRhbnRTdHlsZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zdHlsZSc7XG5cblxuLyoqXG4gKiBUcmFuc2l0aW9uIHVzZWQgdG8gc2hvdyB0aGUgcHJvZ3Jlc3Mgb2YgYSBtZWRpYS4gSGFzIHRvIGJlIGxpbmVhciBzbyB0aGVcbiAqIGFuaW1hdGlvbiBpcyBzbW9vdGggYW5kIGNvbnN0YW50LlxuICogQGNvbnN0IHtzdHJpbmd9XG4gKi9cbmNvbnN0IFRSQU5TSVRJT05fTElORUFSID0gYHRyYW5zZm9ybSAke1BPTExfSU5URVJWQUxfTVN9bXMgbGluZWFyYDtcblxuLyoqXG4gKiBUcmFuc2l0aW9uIHVzZWQgdG8gZnVsbHkgZmlsbCBvciB1bmZpbGwgYSBwcm9ncmVzcyBiYXIgaXRlbS5cbiAqIEBjb25zdCB7c3RyaW5nfVxuICovXG5jb25zdCBUUkFOU0lUSU9OX0VBU0UgPSAndHJhbnNmb3JtIDIwMG1zIGVhc2UnO1xuXG5cbi8qKlxuICogUHJvZ3Jlc3MgYmFyIGZvciA8YW1wLXN0b3J5Pi5cbiAqL1xuZXhwb3J0IGNsYXNzIFByb2dyZXNzQmFyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4pIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshV2luZG93fSAqL1xuICAgIHRoaXMud2luXyA9IHdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmlzQnVpbHRfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgez9FbGVtZW50fSAqL1xuICAgIHRoaXMucm9vdF8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5zZWdtZW50Q291bnRfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuYWN0aXZlU2VnbWVudEluZGV4XyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvdnN5bmMtaW1wbC5Wc3luY30gKi9cbiAgICB0aGlzLnZzeW5jXyA9IFNlcnZpY2VzLnZzeW5jRm9yKHRoaXMud2luXyk7XG5cbiAgICAvKiogQHByaXZhdGUgeyFPYmplY3Q8c3RyaW5nLCBudW1iZXI+fSAqL1xuICAgIHRoaXMuc2VnbWVudElkTWFwXyA9IG1hcCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqL1xuICBzdGF0aWMgY3JlYXRlKHdpbikge1xuICAgIHJldHVybiBuZXcgUHJvZ3Jlc3NCYXIod2luKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTxzdHJpbmc+fSBzZWdtZW50SWRzIFRoZSBpZCBvZiBlYWNoIHNlZ21lbnQgaW4gdGhlIHN0b3J5LlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGJ1aWxkKHNlZ21lbnRJZHMpIHtcbiAgICBpZiAodGhpcy5pc0J1aWx0Xykge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0Um9vdCgpO1xuICAgIH1cblxuICAgIGNvbnN0IHNlZ21lbnRDb3VudCA9IHNlZ21lbnRJZHMubGVuZ3RoO1xuICAgIGRldigpLmFzc2VydChzZWdtZW50Q291bnQgPiAwKTtcblxuICAgIHRoaXMuaXNCdWlsdF8gPSB0cnVlO1xuICAgIHRoaXMuc2VnbWVudENvdW50XyA9IHNlZ21lbnRDb3VudDtcblxuICAgIHNlZ21lbnRJZHMuZm9yRWFjaCgoaWQsIGkpID0+IHRoaXMuc2VnbWVudElkTWFwX1tpZF0gPSBpKTtcblxuICAgIHRoaXMucm9vdF8gPSB0aGlzLndpbl8uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb2wnKTtcbiAgICB0aGlzLnJvb3RfLmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1zdG9yeS1wcm9ncmVzcy1iYXInKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWdtZW50Q291bnRfOyBpKyspIHtcbiAgICAgIGNvbnN0IHNlZ21lbnRQcm9ncmVzc0JhciA9IHRoaXMud2luXy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgc2VnbWVudFByb2dyZXNzQmFyLmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1zdG9yeS1wYWdlLXByb2dyZXNzLWJhcicpO1xuICAgICAgY29uc3Qgc2VnbWVudFByb2dyZXNzVmFsdWUgPSB0aGlzLndpbl8uZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBzZWdtZW50UHJvZ3Jlc3NWYWx1ZS5jbGFzc0xpc3QuYWRkKCdpLWFtcGh0bWwtc3RvcnktcGFnZS1wcm9ncmVzcy12YWx1ZScpO1xuICAgICAgc2VnbWVudFByb2dyZXNzQmFyLmFwcGVuZENoaWxkKHNlZ21lbnRQcm9ncmVzc1ZhbHVlKTtcbiAgICAgIHRoaXMucm9vdF8uYXBwZW5kQ2hpbGQoc2VnbWVudFByb2dyZXNzQmFyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5nZXRSb290KCk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGdldFJvb3QoKSB7XG4gICAgcmV0dXJuIGRldigpLmFzc2VydEVsZW1lbnQodGhpcy5yb290Xyk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VnbWVudElkIFRoZSBpbmRleCBvZiB0aGUgbmV3IGFjdGl2ZSBzZWdtZW50LlxuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRBY3RpdmVTZWdtZW50SWQoc2VnbWVudElkKSB7XG4gICAgdGhpcy5hc3NlcnRWYWlsZFNlZ21lbnRJZF8oc2VnbWVudElkKTtcbiAgICBjb25zdCBzZWdtZW50SW5kZXggPSB0aGlzLnNlZ21lbnRJZE1hcF9bc2VnbWVudElkXTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWdtZW50Q291bnRfOyBpKyspIHtcbiAgICAgIGlmIChpIDwgc2VnbWVudEluZGV4KSB7XG4gICAgICAgIHRoaXMudXBkYXRlUHJvZ3Jlc3NCeUluZGV4XyhpLCAxLjAsXG4gICAgICAgICAgICAvKiB3aXRoVHJhbnNpdGlvbiAqLyBpID09IHNlZ21lbnRJbmRleCAtIDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhlIGFjdGl2ZSBzZWdtZW50IG1hbmFnZXMgaXRzIG93biBwcm9ncmVzcyBieSBmaXJpbmcgUEFHRV9QUk9HUkVTU1xuICAgICAgICAvLyBldmVudHMgdG8gYW1wLXN0b3J5LlxuICAgICAgICB0aGlzLnVwZGF0ZVByb2dyZXNzQnlJbmRleF8oaSwgMC4wLCAvKiB3aXRoVHJhbnNpdGlvbiAqLyAoXG4gICAgICAgICAgc2VnbWVudEluZGV4ICE9IDAgJiYgdGhpcy5hY3RpdmVTZWdtZW50SW5kZXhfICE9IDEpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHNlZ21lbnRJZCBUaGUgaW5kZXggdG8gYXNzZXJ0IHZhbGlkaXR5XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3NlcnRWYWlsZFNlZ21lbnRJZF8oc2VnbWVudElkKSB7XG4gICAgZGV2KCkuYXNzZXJ0KGhhc093bih0aGlzLnNlZ21lbnRJZE1hcF8sIHNlZ21lbnRJZCksXG4gICAgICAgICdJbnZhbGlkIHNlZ21lbnQtaWQgcGFzc2VkIHRvIHByb2dyZXNzLWJhcicpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gc2VnbWVudElkIHRoZSBpZCBvZiB0aGUgc2VnbWVudCB3aG9zIHByb2dyZXNzIHRvIGNoYW5nZVxuICAgKiBAcGFyYW0ge251bWJlcn0gcHJvZ3Jlc3MgQSBudW1iZXIgZnJvbSAwLjAgdG8gMS4wLCByZXByZXNlbnRpbmcgdGhlXG4gICAqICAgICBwcm9ncmVzcyBvZiB0aGUgY3VycmVudCBzZWdtZW50LlxuICAgKi9cbiAgdXBkYXRlUHJvZ3Jlc3Moc2VnbWVudElkLCBwcm9ncmVzcykge1xuICAgIHRoaXMuYXNzZXJ0VmFpbGRTZWdtZW50SWRfKHNlZ21lbnRJZCk7XG4gICAgY29uc3Qgc2VnbWVudEluZGV4ID0gdGhpcy5zZWdtZW50SWRNYXBfW3NlZ21lbnRJZF07XG4gICAgdGhpcy51cGRhdGVQcm9ncmVzc0J5SW5kZXhfKHNlZ21lbnRJbmRleCwgcHJvZ3Jlc3MpO1xuICB9XG5cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNlZ21lbnRJbmRleCBUaGUgaW5kZXggb2YgdGhlIHByb2dyZXNzIGJhciBzZWdtZW50IHdob3NlIHByb2dyZXNzIHNob3VsZCBiZVxuICAgKiAgICAgY2hhbmdlZC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHByb2dyZXNzIEEgbnVtYmVyIGZyb20gMC4wIHRvIDEuMCwgcmVwcmVzZW50aW5nIHRoZVxuICAgKiAgICAgcHJvZ3Jlc3Mgb2YgdGhlIGN1cnJlbnQgc2VnbWVudC5cbiAgICogQHBhcmFtIHtib29sZWFuPX0gd2l0aFRyYW5zaXRpb25cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgdXBkYXRlUHJvZ3Jlc3NCeUluZGV4XyhzZWdtZW50SW5kZXgsIHByb2dyZXNzLCB3aXRoVHJhbnNpdGlvbiA9IHRydWUpIHtcbiAgICB0aGlzLmFjdGl2ZVNlZ21lbnRJbmRleF8gPSBzZWdtZW50SW5kZXg7XG5cbiAgICAvLyBPZmZzZXQgdGhlIGluZGV4IGJ5IDEsIHNpbmNlIG50aC1jaGlsZCBpbmRpY2VzIHN0YXJ0IGF0IDEgd2hpbGVcbiAgICAvLyBKYXZhU2NyaXB0IGluZGljZXMgc3RhcnQgYXQgMC5cbiAgICBjb25zdCBudGhDaGlsZEluZGV4ID0gc2VnbWVudEluZGV4ICsgMTtcbiAgICBjb25zdCBwcm9ncmVzc0VsID0gc2NvcGVkUXVlcnlTZWxlY3Rvcih0aGlzLmdldFJvb3QoKSxcbiAgICAgICAgYC5pLWFtcGh0bWwtc3RvcnktcGFnZS1wcm9ncmVzcy1iYXI6bnRoLWNoaWxkKCR7XG4gICAgICAgICAgZXNjYXBlQ3NzU2VsZWN0b3JOdGgobnRoQ2hpbGRJbmRleClcbiAgICAgICAgfSkgLmktYW1waHRtbC1zdG9yeS1wYWdlLXByb2dyZXNzLXZhbHVlYCk7XG4gICAgdGhpcy52c3luY18ubXV0YXRlKCgpID0+IHtcbiAgICAgIGxldCB0cmFuc2l0aW9uID0gJ25vbmUnO1xuICAgICAgaWYgKHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgICAgIC8vIFVzaW5nIGFuIGVhc2VkIHRyYW5zaXRpb24gb25seSBpZiBmaWxsaW5nIHRoZSBiYXIgdG8gMCBvciAxLlxuICAgICAgICB0cmFuc2l0aW9uID1cbiAgICAgICAgICAgIChwcm9ncmVzcyA9PT0gMSB8fCBwcm9ncmVzcyA9PT0gMCkgP1xuICAgICAgICAgICAgICBUUkFOU0lUSU9OX0VBU0UgOiBUUkFOU0lUSU9OX0xJTkVBUjtcbiAgICAgIH1cbiAgICAgIHNldEltcG9ydGFudFN0eWxlcyhkZXYoKS5hc3NlcnRFbGVtZW50KHByb2dyZXNzRWwpLCB7XG4gICAgICAgICd0cmFuc2Zvcm0nOiBzY2FsZShgJHtwcm9ncmVzc30sMWApLFxuICAgICAgICAndHJhbnNpdGlvbic6IHRyYW5zaXRpb24sXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge2RldiwgdXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5pbXBvcnQge2lzUHJvdG9jb2xWYWxpZCwgcGFyc2VVcmx9IGZyb20gJy4uLy4uLy4uL3NyYy91cmwnO1xuXG5cbmNvbnN0IFRBRyA9ICdhbXAtc3RvcnknO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgdGl0bGU6IHN0cmluZyxcbiAqICAgdXJsOiBzdHJpbmcsXG4gKiAgIGRvbWFpbk5hbWU6IHN0cmluZyxcbiAqICAgaW1hZ2U6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgUmVsYXRlZEFydGljbGVEZWY7XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBoZWFkaW5nOiAoc3RyaW5nfHVuZGVmaW5lZCksXG4gKiAgIGFydGljbGVzOiAhQXJyYXk8IVJlbGF0ZWRBcnRpY2xlRGVmPixcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgUmVsYXRlZEFydGljbGVTZXREZWY7XG5cblxuLyoqXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0fSBhcnRpY2xlSnNvblxuICogQHJldHVybiB7P1JlbGF0ZWRBcnRpY2xlRGVmfVxuICovXG5mdW5jdGlvbiBidWlsZEFydGljbGVGcm9tSnNvbl8oYXJ0aWNsZUpzb24pIHtcbiAgaWYgKCFhcnRpY2xlSnNvblsndGl0bGUnXSB8fCAhYXJ0aWNsZUpzb25bJ3VybCddKSB7XG4gICAgdXNlcigpLmVycm9yKFRBRyxcbiAgICAgICAgJ0FydGljbGVzIG11c3QgY29udGFpbiBgdGl0bGVgIGFuZCBgdXJsYCBmaWVsZHMsIHNraXBwaW5nIGludmFsaWQuJyk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB1c2VyKCkuYXNzZXJ0KGlzUHJvdG9jb2xWYWxpZChhcnRpY2xlSnNvblsndXJsJ10pLFxuICAgICAgYFVuc3VwcG9ydGVkIHByb3RvY29sIGZvciBhcnRpY2xlIFVSTCAke2FydGljbGVKc29uWyd1cmwnXX1gKTtcblxuICBjb25zdCBhcnRpY2xlID0ge1xuICAgIHRpdGxlOiBkZXYoKS5hc3NlcnQoYXJ0aWNsZUpzb25bJ3RpdGxlJ10pLFxuICAgIHVybDogZGV2KCkuYXNzZXJ0KGFydGljbGVKc29uWyd1cmwnXSksXG4gICAgZG9tYWluTmFtZTogcGFyc2VVcmwoZGV2KCkuYXNzZXJ0KGFydGljbGVKc29uWyd1cmwnXSkpLmhvc3RuYW1lLFxuICB9O1xuXG4gIGlmIChhcnRpY2xlSnNvblsnaW1hZ2UnXSkge1xuICAgIHVzZXIoKS5hc3NlcnQoaXNQcm90b2NvbFZhbGlkKGFydGljbGVKc29uWydpbWFnZSddKSxcbiAgICAgICAgYFVuc3VwcG9ydGVkIHByb3RvY29sIGZvciBhcnRpY2xlIGltYWdlIFVSTCAke2FydGljbGVKc29uWydpbWFnZSddfWApO1xuICAgIGFydGljbGUuaW1hZ2UgPSBkZXYoKS5hc3NlcnQoYXJ0aWNsZUpzb25bJ2ltYWdlJ10pO1xuICB9XG5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVJlbGF0ZWRBcnRpY2xlRGVmfSAqLyAoYXJ0aWNsZSk7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0PX0gb3B0X2FydGljbGVTZXRzUmVzcG9uc2VcbiAqIEByZXR1cm4geyFBcnJheTwhUmVsYXRlZEFydGljbGVTZXREZWY+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVsYXRlZEFydGljbGVzRnJvbUpzb24ob3B0X2FydGljbGVTZXRzUmVzcG9uc2UpIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IUFycmF5PCFSZWxhdGVkQXJ0aWNsZVNldERlZj59ICovIChcbiAgICBPYmplY3Qua2V5cyhvcHRfYXJ0aWNsZVNldHNSZXNwb25zZSB8fCB7fSkubWFwKGhlYWRpbmdLZXkgPT4ge1xuICAgICAgY29uc3QgYXJ0aWNsZVNldCA9IHtcbiAgICAgICAgYXJ0aWNsZXM6XG4gICAgICAgICAgICAgIG9wdF9hcnRpY2xlU2V0c1Jlc3BvbnNlW2hlYWRpbmdLZXldXG4gICAgICAgICAgICAgICAgICAubWFwKGJ1aWxkQXJ0aWNsZUZyb21Kc29uXylcbiAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYSA9PiAhIWEpLFxuICAgICAgfTtcblxuICAgICAgaWYgKGhlYWRpbmdLZXkudHJpbSgpLmxlbmd0aCkge1xuICAgICAgICBhcnRpY2xlU2V0LmhlYWRpbmcgPSBoZWFkaW5nS2V5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gLyoqIEB0eXBlIHshUmVsYXRlZEFydGljbGVTZXREZWZ9ICovIChhcnRpY2xlU2V0KTtcbiAgICB9KSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7U2VydmljZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcyc7XG5pbXBvcnQge1RvYXN0fSBmcm9tICcuL3RvYXN0JztcbmltcG9ydCB7XG4gIGNvcHlUZXh0VG9DbGlwYm9hcmQsXG4gIGlzQ29weWluZ1RvQ2xpcGJvYXJkU3VwcG9ydGVkLFxufSBmcm9tICcuLi8uLi8uLi9zcmMvY2xpcGJvYXJkJztcbmltcG9ydCB7ZGV2LCB1c2VyfSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcbmltcG9ydCB7ZGljdH0gZnJvbSAnLi8uLi8uLi8uLi9zcmMvdXRpbHMvb2JqZWN0JztcbmltcG9ydCB7aXNPYmplY3R9IGZyb20gJy4uLy4uLy4uL3NyYy90eXBlcyc7XG5pbXBvcnQge2xpc3Rlbn0gZnJvbSAnLi4vLi4vLi4vc3JjL2V2ZW50LWhlbHBlcic7XG5pbXBvcnQge3B4LCBzZXRJbXBvcnRhbnRTdHlsZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9zdHlsZSc7XG5pbXBvcnQge3JlbmRlckFzRWxlbWVudCwgcmVuZGVyU2ltcGxlVGVtcGxhdGV9IGZyb20gJy4vc2ltcGxlLXRlbXBsYXRlJztcbmltcG9ydCB7dGhyb3R0bGV9IGZyb20gJy4uLy4uLy4uL3NyYy91dGlscy9yYXRlLWxpbWl0JztcblxuXG4vKipcbiAqIE1hcHMgc2hhcmUgcHJvdmlkZXIgdHlwZSB0byB2aXNpYmxlIG5hbWUuXG4gKiBJZiB0aGUgbmFtZSBvbmx5IG5lZWRzIHRvIGJlIGNhcGl0YWxpemVkIChlLmcuIGBmYWNlYm9va2AgdG8gYEZhY2Vib29rYCkgaXRcbiAqIGRvZXMgbm90IG5lZWQgdG8gYmUgaW5jbHVkZWQgaGVyZS5cbiAqIEBjb25zdCB7IUpzb25PYmplY3R9XG4gKi9cbmNvbnN0IFNIQVJFX1BST1ZJREVSX05BTUUgPSBkaWN0KHtcbiAgJ2dwbHVzJzogJ0dvb2dsZSsnLFxuICAnbGlua2VkaW4nOiAnTGlua2VkSW4nLFxuICAnc3lzdGVtJzogJ01vcmUnLFxuICAnd2hhdHNhcHAnOiAnV2hhdHNBcHAnLFxufSk7XG5cblxuLyoqXG4gKiBEZWZhdWx0IGxlZnQvcmlnaHQgcGFkZGluZyBmb3Igc2hhcmUgYnV0dG9ucy5cbiAqIEBwcml2YXRlIEBjb25zdCB7bnVtYmVyfVxuICovXG5jb25zdCBERUZBVUxUX0JVVFRPTl9QQURESU5HID0gMTY7XG5cbi8qKlxuICogTWluaW11bSBsZWZ0L3JpZ2h0IHBhZGRpbmcgZm9yIHNoYXJlIGJ1dHRvbnMuXG4gKiBAcHJpdmF0ZSBAY29uc3Qge251bWJlcn1cbiAqL1xuY29uc3QgTUlOX0JVVFRPTl9QQURESU5HID0gMTA7XG5cblxuLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vc2ltcGxlLXRlbXBsYXRlLkVsZW1lbnREZWZ9ICovXG5jb25zdCBURU1QTEFURSA9IHtcbiAgdGFnOiAnZGl2JyxcbiAgYXR0cnM6IGRpY3QoeydjbGFzcyc6ICdpLWFtcGh0bWwtc3Rvcnktc2hhcmUtd2lkZ2V0J30pLFxuICBjaGlsZHJlbjogW3tcbiAgICB0YWc6ICd1bCcsXG4gICAgYXR0cnM6IGRpY3QoeydjbGFzcyc6ICdpLWFtcGh0bWwtc3Rvcnktc2hhcmUtbGlzdCd9KSxcbiAgICBjaGlsZHJlbjogW1xuICAgICAge1xuICAgICAgICB0YWc6ICdsaScsXG4gICAgICAgIGF0dHJzOiBkaWN0KHsnY2xhc3MnOiAnaS1hbXBodG1sLXN0b3J5LXNoYXJlLXN5c3RlbSd9KSxcbiAgICAgIH0sXG4gICAgXSxcbiAgfV0sXG59O1xuXG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL3NpbXBsZS10ZW1wbGF0ZS5FbGVtZW50RGVmfSAqL1xuY29uc3QgU0hBUkVfSVRFTV9URU1QTEFURSA9IHtcbiAgdGFnOiAnbGknLFxuICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1zaGFyZS1pdGVtJ30pLFxufTtcblxuXG4vKiogQHByaXZhdGUgQGNvbnN0IHshLi9zaW1wbGUtdGVtcGxhdGUuRWxlbWVudERlZn0gKi9cbmNvbnN0IExJTktfU0hBUkVfSVRFTV9URU1QTEFURSA9IHtcbiAgdGFnOiAnZGl2JyxcbiAgYXR0cnM6IGRpY3Qoe1xuICAgICdjbGFzcyc6XG4gICAgICAgICdpLWFtcGh0bWwtc3Rvcnktc2hhcmUtaWNvbiBpLWFtcGh0bWwtc3Rvcnktc2hhcmUtaWNvbi1saW5rJyxcbiAgfSksXG4gIHRleHQ6ICdHZXQgTGluaycsIC8vIFRPRE8oYWxhbm9yb3pjbyk6IGkxOG5cbn07XG5cblxuLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgU0NST0xMQUJMRV9DTEFTU05BTUUgPSAnaS1hbXBodG1sLXN0b3J5LXNoYXJlLXdpZGdldC1zY3JvbGxhYmxlJztcblxuXG4vKipcbiAqIEBwYXJhbSB7IUpzb25PYmplY3Q9fSBvcHRfcGFyYW1zXG4gKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAqL1xuZnVuY3Rpb24gYnVpbGRQcm92aWRlclBhcmFtcyhvcHRfcGFyYW1zKSB7XG4gIGNvbnN0IGF0dHJzID0gZGljdCgpO1xuXG4gIGlmIChvcHRfcGFyYW1zKSB7XG4gICAgT2JqZWN0LmtleXMob3B0X3BhcmFtcykuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICBhdHRyc1tgZGF0YS1wYXJhbS0ke2ZpZWxkfWBdID0gb3B0X3BhcmFtc1tmaWVsZF07XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gYXR0cnM7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gc2hhcmVUeXBlXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0PX0gb3B0X3BhcmFtc1xuICogQHJldHVybiB7IU5vZGV9XG4gKi9cbmZ1bmN0aW9uIGJ1aWxkUHJvdmlkZXIoZG9jLCBzaGFyZVR5cGUsIG9wdF9wYXJhbXMpIHtcbiAgcmV0dXJuIHJlbmRlclNpbXBsZVRlbXBsYXRlKGRvYyxcbiAgICAgIC8qKiBAdHlwZSB7IUFycmF5PCEuL3NpbXBsZS10ZW1wbGF0ZS5FbGVtZW50RGVmPn0gKi8gKFtcbiAgICAgICAge1xuICAgICAgICAgIHRhZzogJ2FtcC1zb2NpYWwtc2hhcmUnLFxuICAgICAgICAgIGF0dHJzOiAvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAoT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgICAgZGljdCh7XG4gICAgICAgICAgICAgICAgJ3dpZHRoJzogNDgsXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6IDY2LFxuICAgICAgICAgICAgICAgICdjbGFzcyc6ICdpLWFtcGh0bWwtc3Rvcnktc2hhcmUtaWNvbicsXG4gICAgICAgICAgICAgICAgJ3R5cGUnOiBzaGFyZVR5cGUsXG4gICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICBidWlsZFByb3ZpZGVyUGFyYW1zKG9wdF9wYXJhbXMpKSksXG4gICAgICAgICAgdGV4dDogU0hBUkVfUFJPVklERVJfTkFNRVtzaGFyZVR5cGVdIHx8IHNoYXJlVHlwZSxcbiAgICAgICAgfSxcbiAgICAgIF0pKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqIEByZXR1cm4geyFFbGVtZW50fVxuICovXG5mdW5jdGlvbiBidWlsZENvcHlTdWNjZXNzZnVsVG9hc3QoZG9jLCB1cmwpIHtcbiAgcmV0dXJuIHJlbmRlckFzRWxlbWVudChkb2MsIC8qKiBAdHlwZSB7IS4vc2ltcGxlLXRlbXBsYXRlLkVsZW1lbnREZWZ9ICovICh7XG4gICAgdGFnOiAnZGl2JyxcbiAgICBhdHRyczogZGljdCh7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1jb3B5LXN1Y2Nlc3NmdWwnfSksXG4gICAgY2hpbGRyZW46IFtcbiAgICAgIHtcbiAgICAgICAgdGFnOiAnZGl2JyxcbiAgICAgICAgdGV4dDogJ0xpbmsgY29waWVkIScsIC8vIFRPRE8oYWxhbm9yb3pjbyk6IGkxOG5cbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgIGF0dHJzOiBkaWN0KHsnY2xhc3MnOiAnaS1hbXBodG1sLXN0b3J5LWNvcHktdXJsJ30pLFxuICAgICAgICB0ZXh0OiB1cmwsXG4gICAgICB9LFxuICAgIF0sXG4gIH0pKTtcbn1cblxuXG4vKipcbiAqIFNvY2lhbCBzaGFyZSB3aWRnZXQgZm9yIHN0b3J5IGJvb2tlbmQuXG4gKi9cbmV4cG9ydCBjbGFzcyBTaGFyZVdpZGdldCB7XG4gIC8qKiBAcGFyYW0geyFXaW5kb3d9IHdpbiAqL1xuICBjb25zdHJ1Y3Rvcih3aW4pIHtcbiAgICAvKiogQHByaXZhdGUgez8uLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9ICovXG4gICAgdGhpcy5hbXBkb2NfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIHs/RWxlbWVudH0gKi9cbiAgICB0aGlzLnJvb3RfID0gbnVsbDtcbiAgfVxuXG4gIC8qKiBAcGFyYW0geyFXaW5kb3d9IHdpbiAqL1xuICBzdGF0aWMgY3JlYXRlKHdpbikge1xuICAgIHJldHVybiBuZXcgU2hhcmVXaWRnZXQod2luKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGJ1aWxkKGFtcGRvYykge1xuICAgIGRldigpLmFzc2VydCghdGhpcy5yb290XywgJ0FscmVhZHkgYnVpbHQuJyk7XG5cbiAgICB0aGlzLmFtcGRvY18gPSBhbXBkb2M7XG5cbiAgICB0aGlzLnJvb3RfID0gcmVuZGVyQXNFbGVtZW50KHRoaXMud2luXy5kb2N1bWVudCwgVEVNUExBVEUpO1xuXG4gICAgdGhpcy5tYXliZUFkZExpbmtTaGFyZUJ1dHRvbl8oKTtcbiAgICB0aGlzLm1heWJlQWRkU3lzdGVtU2hhcmVCdXR0b25fKCk7XG5cbiAgICByZXR1cm4gdGhpcy5yb290XztcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBtYXliZUFkZExpbmtTaGFyZUJ1dHRvbl8oKSB7XG4gICAgaWYgKCFpc0NvcHlpbmdUb0NsaXBib2FyZFN1cHBvcnRlZCh0aGlzLndpbl8uZG9jdW1lbnQpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbGlua1NoYXJlQnV0dG9uID1cbiAgICAgICAgcmVuZGVyQXNFbGVtZW50KHRoaXMud2luXy5kb2N1bWVudCwgTElOS19TSEFSRV9JVEVNX1RFTVBMQVRFKTtcblxuICAgIHRoaXMuYWRkXyhsaW5rU2hhcmVCdXR0b24pO1xuXG4gICAgLy8gVE9ETyhhbGFub3JvemNvKTogTGlzdGVuIGZvciBwcm9wZXIgdGFwIGV2ZW50IChpLmUuIGZhc3RjbGljaylcbiAgICBsaXN0ZW4obGlua1NoYXJlQnV0dG9uLCAnY2xpY2snLCBlID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuY29weVVybFRvQ2xpcGJvYXJkXygpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIC8vIFRPRE8oYWxhbm9yb3pjbyk6IGkxOG4gZm9yIHRvYXN0LlxuICBjb3B5VXJsVG9DbGlwYm9hcmRfKCkge1xuICAgIGNvbnN0IHVybCA9IFNlcnZpY2VzLmRvY3VtZW50SW5mb0ZvckRvYyhcbiAgICAgICAgLyoqIEB0eXBlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSAqLyAoXG4gICAgICAgICAgZGV2KCkuYXNzZXJ0KHRoaXMuYW1wZG9jXykpKS5jYW5vbmljYWxVcmw7XG5cbiAgICBpZiAoIWNvcHlUZXh0VG9DbGlwYm9hcmQodGhpcy53aW5fLCB1cmwpKSB7XG4gICAgICBUb2FzdC5zaG93KHRoaXMud2luXywgJ0NvdWxkIG5vdCBjb3B5IGxpbmsgdG8gY2xpcGJvYXJkIDooJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgVG9hc3Quc2hvdyh0aGlzLndpbl8sIGJ1aWxkQ29weVN1Y2Nlc3NmdWxUb2FzdCh0aGlzLndpbl8uZG9jdW1lbnQsIHVybCkpO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIG1heWJlQWRkU3lzdGVtU2hhcmVCdXR0b25fKCkge1xuICAgIGlmICghdGhpcy5pc1N5c3RlbVNoYXJlU3VwcG9ydGVkXygpKSB7XG4gICAgICAvLyBgYW1wLXNvY2lhbC1zaGFyZWAgd2lsbCBoaWRlIGBzeXN0ZW1gIGJ1dHRvbnMgd2hlbiBub3Qgc3VwcG9ydGVkLCBidXRcbiAgICAgIC8vIHdlIGFsc28gbmVlZCB0byBhdm9pZCBhZGRpbmcgaXQgZm9yIHJlbmRlcmluZyByZWFzb25zLlxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGRldigpLmFzc2VydEVsZW1lbnQodGhpcy5yb290XykucXVlcnlTZWxlY3RvcihcbiAgICAgICAgJy5pLWFtcGh0bWwtc3Rvcnktc2hhcmUtc3lzdGVtJyk7XG5cbiAgICB0aGlzLmxvYWRSZXF1aXJlZEV4dGVuc2lvbnNfKCk7XG5cbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYnVpbGRQcm92aWRlcih0aGlzLndpbl8uZG9jdW1lbnQsICdzeXN0ZW0nKSk7XG4gIH1cblxuICAvKiogQHByaXZhdGUgKi9cbiAgLy8gTk9URShhbGFub3JvemNvKTogVGhpcyBpcyBhIGR1cGxpY2F0ZSBvZiB0aGUgbG9naWMgaW4gdGhlXG4gIC8vIGBhbXAtc29jaWFsLXNoYXJlYCBjb21wb25lbnQuXG4gIGlzU3lzdGVtU2hhcmVTdXBwb3J0ZWRfKCkge1xuICAgIGNvbnN0IHZpZXdlciA9IFNlcnZpY2VzLnZpZXdlckZvckRvYyhcbiAgICAgICAgLyoqIEB0eXBlIHshLi4vLi4vLi4vc3JjL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSAqLyAoXG4gICAgICAgICAgZGV2KCkuYXNzZXJ0KHRoaXMuYW1wZG9jXykpKTtcblxuICAgIGNvbnN0IHBsYXRmb3JtID0gU2VydmljZXMucGxhdGZvcm1Gb3IodGhpcy53aW5fKTtcblxuICAgIC8vIENocm9tZSBleHBvcnRzIG5hdmlnYXRvci5zaGFyZSBpbiBXZWJWaWV3IGJ1dCBkb2VzIG5vdCBpbXBsZW1lbnQgaXQuXG4gICAgLy8gU2VlIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTc2NTkyM1xuICAgIGNvbnN0IGlzQ2hyb21lV2VidmlldyA9IHZpZXdlci5pc1dlYnZpZXdFbWJlZGRlZCgpICYmIHBsYXRmb3JtLmlzQ2hyb21lKCk7XG5cbiAgICByZXR1cm4gKCdzaGFyZScgaW4gbmF2aWdhdG9yKSAmJiAhaXNDaHJvbWVXZWJ2aWV3O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICghSnNvbk9iamVjdHxib29sZWFuKT59IHByb3ZpZGVyc1xuICAgKiBAcHVibGljXG4gICAqL1xuICAvLyBUT0RPKGFsYW5vcm96Y28pOiBTZXQgc3RvcnkgbWV0YWRhdGEgaW4gc2hhcmUgY29uZmlnXG4gIHNldFByb3ZpZGVycyhwcm92aWRlcnMpIHtcbiAgICB0aGlzLmxvYWRSZXF1aXJlZEV4dGVuc2lvbnNfKCk7XG5cbiAgICBPYmplY3Qua2V5cyhwcm92aWRlcnMpLmZvckVhY2godHlwZSA9PiB7XG4gICAgICBpZiAodHlwZSA9PSAnc3lzdGVtJykge1xuICAgICAgICB1c2VyKCkud2FybignQU1QLVNUT1JZJyxcbiAgICAgICAgICAgICdgc3lzdGVtYCBpcyBub3QgYSB2YWxpZCBzaGFyZSBwcm92aWRlciB0eXBlLiBOYXRpdmUgc2hhcmluZyBpcyAnICtcbiAgICAgICAgICAgICdlbmFibGVkIGJ5IGRlZmF1bHQgYW5kIGNhbm5vdCBiZSB0dXJuZWQgb2ZmLicsXG4gICAgICAgICAgICB0eXBlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNPYmplY3QocHJvdmlkZXJzW3R5cGVdKSkge1xuICAgICAgICB0aGlzLmFkZF8oYnVpbGRQcm92aWRlcih0aGlzLndpbl8uZG9jdW1lbnQsIHR5cGUsXG4gICAgICAgICAgICAvKiogQHR5cGUgeyFKc29uT2JqZWN0fSAqLyAocHJvdmlkZXJzW3R5cGVdKSkpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIEJvb2tlbmQgY29uZmlnIEFQSSByZXF1aXJlcyByZWFsIGJvb2xlYW4sIG5vdCBqdXN0IHRydXRoeVxuICAgICAgaWYgKHByb3ZpZGVyc1t0eXBlXSA9PT0gdHJ1ZSkge1xuICAgICAgICB0aGlzLmFkZF8oYnVpbGRQcm92aWRlcih0aGlzLndpbl8uZG9jdW1lbnQsIHR5cGUpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1c2VyKCkud2FybignQU1QLVNUT1JZJyxcbiAgICAgICAgICAnSW52YWxpZCBhbXAtc3RvcnkgYm9va2VuZCBzaGFyZSBjb25maWd1cmF0aW9uIGZvciAlcy4gJyArXG4gICAgICAgICAgJ1ZhbHVlIG11c3QgYmUgYHRydWVgIG9yIGEgcGFyYW1zIG9iamVjdC4nLFxuICAgICAgICAgIHR5cGUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGxvYWRSZXF1aXJlZEV4dGVuc2lvbnNfKCkge1xuICAgIGNvbnN0IGFtcGRvYyA9IC8qKiBAdHlwZSB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gKi8gKFxuICAgICAgZGV2KCkuYXNzZXJ0KHRoaXMuYW1wZG9jXykpO1xuXG4gICAgU2VydmljZXMuZXh0ZW5zaW9uc0Zvcih0aGlzLndpbl8pXG4gICAgICAgIC5pbnN0YWxsRXh0ZW5zaW9uRm9yRG9jKGFtcGRvYywgJ2FtcC1zb2NpYWwtc2hhcmUnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhZGRfKG5vZGUpIHtcbiAgICBjb25zdCBsaXN0ID0gZGV2KCkuYXNzZXJ0KHRoaXMucm9vdF8pLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIGNvbnN0IGl0ZW0gPSByZW5kZXJBc0VsZW1lbnQodGhpcy53aW5fLmRvY3VtZW50LCBTSEFSRV9JVEVNX1RFTVBMQVRFKTtcblxuICAgIGl0ZW0uYXBwZW5kQ2hpbGQobm9kZSk7XG5cbiAgICAvLyBgbGFzdEVsZW1lbnRDaGlsZGAgaXMgdGhlIHN5c3RlbSBzaGFyZSBidXR0b24gY29udGFpbmVyLCB3aGljaCBzaG91bGRcbiAgICAvLyBhbHdheXMgYmUgbGFzdCBpbiBsaXN0XG4gICAgbGlzdC5pbnNlcnRCZWZvcmUoaXRlbSwgbGlzdC5sYXN0RWxlbWVudENoaWxkKTtcbiAgfVxufVxuXG5cbi8qKlxuICogU29jaWFsIHNoYXJlIHdpZGdldCBmb3Igc3RvcnkgYm9va2VuZCB3aXRoIGEgc2Nyb2xsYWJsZSBsYXlvdXQuXG4gKiBUaGlzIGNsYXNzIGlzIGNvdXBsZWQgdG8gdGhlIERPTSBzdHJ1Y3R1cmUgZm9yIFNoYXJlV2lkZ2V0LCBidXQgdGhhdCdzIG9rLlxuICovXG5leHBvcnQgY2xhc3MgU2Nyb2xsYWJsZVNoYXJlV2lkZ2V0IHtcbiAgLyoqIEBwYXJhbSB7IVdpbmRvd30gd2luICovXG4gIGNvbnN0cnVjdG9yKHdpbikge1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4uLy4uLy4uL3NyYy9zZXJ2aWNlL3ZzeW5jLWltcGwuVnN5bmN9ICovXG4gICAgdGhpcy52c3luY18gPSBTZXJ2aWNlcy52c3luY0Zvcih3aW4pO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVNoYXJlV2lkZ2V0fSAqL1xuICAgIHRoaXMubWl4aW5fID0gU2hhcmVXaWRnZXQuY3JlYXRlKHdpbik7XG5cbiAgICAvKipcbiAgICAgKiBDb250YWluZXIgd2lkdGggaXMgYmVpbmcgdHJhY2tlZCB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IGxheW91dFxuICAgICAqIGNhbGN1bGF0aW9ucy5cbiAgICAgKiBAcHJpdmF0ZSB7P251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmNvbnRhaW5lcldpZHRoXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9FbGVtZW50fSAqL1xuICAgIHRoaXMucm9vdF8gPSBudWxsO1xuICB9XG5cbiAgLyoqIEBwYXJhbSB7IVdpbmRvd30gd2luICovXG4gIHN0YXRpYyBjcmVhdGUod2luKSB7XG4gICAgcmV0dXJuIG5ldyBTY3JvbGxhYmxlU2hhcmVXaWRnZXQod2luKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuLi8uLi8uLi9zcmMvc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IGFtcGRvY1xuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGJ1aWxkKGFtcGRvYykge1xuICAgIHRoaXMucm9vdF8gPSB0aGlzLm1peGluXy5idWlsZChhbXBkb2MpO1xuXG4gICAgdGhpcy5yb290Xy5jbGFzc0xpc3QuYWRkKFNDUk9MTEFCTEVfQ0xBU1NOQU1FKTtcblxuICAgIFNlcnZpY2VzLnZpZXdwb3J0Rm9yRG9jKGFtcGRvYykub25SZXNpemUoXG4gICAgICAgIC8vIHdlIGRvbid0IHJlcXVpcmUgYSBsb3Qgb2Ygc21vb3RobmVzcyBoZXJlLCBzbyB3ZSB0aHJvdHRsZVxuICAgICAgICB0aHJvdHRsZSh0aGlzLndpbl8sICgpID0+IHRoaXMuYXBwbHlCdXR0b25QYWRkaW5nXygpLCAxMDApKTtcblxuICAgIHJldHVybiB0aGlzLnJvb3RfO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZXMgcGFkZGluZyBiZXR3ZWVuIGJ1dHRvbnMgc28gdGhhdCB0aGUgcmVzdWx0IGlzIHRoYXQgdGhlcmUnc1xuICAgKiBhbHdheXMgb25lIGl0ZW0gdmlzdWFsbHkgXCJjdXQgb2ZmXCIgZm9yIHNjcm9sbCBhZmZvcmRhbmNlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXBwbHlCdXR0b25QYWRkaW5nXygpIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuZ2V0VmlzaWJsZUl0ZW1zXygpO1xuXG4gICAgaWYgKCFpdGVtcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnZzeW5jXy5ydW4oe1xuICAgICAgbWVhc3VyZTogc3RhdGUgPT4ge1xuICAgICAgICBjb25zdCBjb250YWluZXJXaWR0aCA9IHRoaXMucm9vdF8uLypPSyovY2xpZW50V2lkdGg7XG5cbiAgICAgICAgaWYgKGNvbnRhaW5lcldpZHRoID09IHRoaXMuY29udGFpbmVyV2lkdGhfKSB7XG4gICAgICAgICAgLy8gRG9uJ3QgcmVjYWxjdWxhdGUgaWYgd2lkdGggaGFzIG5vdCBjaGFuZ2VkIChpLmUuIG9uc2NyZWVuIGtleWJvYXJkKVxuICAgICAgICAgIHN0YXRlLm5vb3AgPSB0cnVlO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGljb24gPSBkZXYoKS5hc3NlcnQoaXRlbXNbMF0uZmlyc3RFbGVtZW50Q2hpbGQpO1xuXG4gICAgICAgIGNvbnN0IGxlZnRNYXJnaW4gPSBpY29uLi8qT0sqL29mZnNldExlZnQgLSB0aGlzLnJvb3RfLi8qT0sqL29mZnNldExlZnQ7XG4gICAgICAgIGNvbnN0IGljb25XaWR0aCA9IGljb24uLypPSyovb2Zmc2V0V2lkdGg7XG5cbiAgICAgICAgLy8gVG90YWwgd2lkdGggdGhhdCB0aGUgYnV0dG9ucyB3aWxsIG9jY3VweSB3aXRoIG1pbmltdW0gcGFkZGluZy5cbiAgICAgICAgY29uc3QgdG90YWxJdGVtV2lkdGggPVxuICAgICAgICAgICAgKGljb25XaWR0aCAqIGl0ZW1zLmxlbmd0aCArIDIgKiBNSU5fQlVUVE9OX1BBRERJTkcgKlxuICAgICAgICAgICAgICAgIChpdGVtcy5sZW5ndGggLSAxKSk7XG5cbiAgICAgICAgLy8gSWYgYnV0dG9ucyBkb24ndCBmaXQgd2l0aGluIHRoZSBhdmFpbGFibGUgYXJlYSwgY2FsY3VsYXRlIHBhZGRpbmcgc29cbiAgICAgICAgLy8gdGhhdCB0aGVyZSB3aWxsIGJlIGFuIGVsZW1lbnQgY3V0LW9mZi5cbiAgICAgICAgaWYgKHRvdGFsSXRlbVdpZHRoID4gKGNvbnRhaW5lcldpZHRoIC0gbGVmdE1hcmdpbiAqIDIpKSB7XG4gICAgICAgICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSBjb250YWluZXJXaWR0aCAtIGxlZnRNYXJnaW4gLSBpY29uV2lkdGggLyAyO1xuICAgICAgICAgIGNvbnN0IGFtb3VudFZpc2libGUgPVxuICAgICAgICAgICAgICBNYXRoLmZsb29yKGF2YWlsYWJsZVdpZHRoIC8gKGljb25XaWR0aCArIE1JTl9CVVRUT05fUEFERElORyAqIDIpKTtcblxuICAgICAgICAgIHN0YXRlLnBhZGRpbmcgPSAwLjUgKiAoYXZhaWxhYmxlV2lkdGggLyBhbW91bnRWaXNpYmxlIC0gaWNvbldpZHRoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UsIGNhbGN1bGF0ZSBwYWRkaW5nIGluIGZyb20gTUlOX1BBRERJTkcgdG8gREVGQVVMVF9QQURESU5HXG4gICAgICAgICAgLy8gc28gdGhhdCBhbGwgZWxlbWVudHMgZml0IGFuZCB0YWtlIGFzIG11Y2ggYXJlYSBhcyBwb3NzaWJsZS5cbiAgICAgICAgICBjb25zdCB0b3RhbFBhZGRpbmcgPVxuICAgICAgICAgICAgICAoKGNvbnRhaW5lcldpZHRoIC0gbGVmdE1hcmdpbiAqIDIpIC0gaWNvbldpZHRoICogaXRlbXMubGVuZ3RoKSAvXG4gICAgICAgICAgICAgIChpdGVtcy5sZW5ndGggLSAxKTtcblxuICAgICAgICAgIHN0YXRlLnBhZGRpbmcgPSBNYXRoLm1pbihERUZBVUxUX0JVVFRPTl9QQURESU5HLCAwLjUgKiB0b3RhbFBhZGRpbmcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jb250YWluZXJXaWR0aF8gPSBjb250YWluZXJXaWR0aDtcbiAgICAgIH0sXG4gICAgICBtdXRhdGU6IHN0YXRlID0+IHtcbiAgICAgICAgaWYgKHN0YXRlLm5vb3ApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaXRlbXMuZm9yRWFjaCgoZWwsIGkpID0+IHtcbiAgICAgICAgICBpZiAoaSAhPSAwKSB7XG4gICAgICAgICAgICBzZXRJbXBvcnRhbnRTdHlsZXMoZWwsIHsncGFkZGluZy1sZWZ0JzogcHgoc3RhdGUucGFkZGluZyl9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGkgIT0gaXRlbXMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgc2V0SW1wb3J0YW50U3R5bGVzKGVsLCB7J3BhZGRpbmctcmlnaHQnOiBweChzdGF0ZS5wYWRkaW5nKX0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH0sIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQXJyYXk8IUVsZW1lbnQ+fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZ2V0VmlzaWJsZUl0ZW1zXygpIHtcbiAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKFxuICAgICAgICBkZXYoKS5hc3NlcnRFbGVtZW50KHRoaXMucm9vdF8pLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpJyksXG4gICAgICAgIGVsID0+ICEhZWwuZmlyc3RFbGVtZW50Q2hpbGQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICghSnNvbk9iamVjdHxib29sZWFuKT59IHByb3ZpZGVyc1xuICAgKiBAcHVibGljXG4gICAqL1xuICBzZXRQcm92aWRlcnMocHJvdmlkZXJzKSB7XG4gICAgdGhpcy5taXhpbl8uc2V0UHJvdmlkZXJzKHByb3ZpZGVycyk7XG4gICAgdGhpcy5hcHBseUJ1dHRvblBhZGRpbmdfKCk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHtjcmVhdGVFbGVtZW50V2l0aEF0dHJpYnV0ZXN9IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuaW1wb3J0IHtpc0FycmF5fSBmcm9tICcuLi8uLi8uLi9zcmMvdHlwZXMnO1xuXG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgdGFnOiBzdHJpbmcsXG4gKiAgIGF0dHJzOiAoIUpzb25PYmplY3R8dW5kZWZpbmVkKSxcbiAqICAgdGV4dDogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICBjaGlsZHJlbjogKCFBcnJheTwhRWxlbWVudERlZj58dW5kZWZpbmVkKSxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgRWxlbWVudERlZjtcblxuXG4vKipcbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEBwYXJhbSB7IUVsZW1lbnREZWZ8IUFycmF5PCFFbGVtZW50RGVmPn0gZWxlbWVudHNEZWZcbiAqIEByZXR1cm4geyFOb2RlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU2ltcGxlVGVtcGxhdGUoZG9jLCBlbGVtZW50c0RlZikge1xuICBpZiAoaXNBcnJheShlbGVtZW50c0RlZikpIHtcbiAgICByZXR1cm4gcmVuZGVyTXVsdGkoZG9jLCAvKiogQHR5cGUgeyFBcnJheTwhRWxlbWVudERlZj59ICovIChlbGVtZW50c0RlZikpO1xuICB9XG4gIHJldHVybiByZW5kZXJTaW5nbGUoZG9jLCAvKiogQHR5cGUgeyFFbGVtZW50RGVmfSAqLyAoZWxlbWVudHNEZWYpKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEBwYXJhbSB7IUVsZW1lbnREZWZ9IGVsZW1lbnREZWZcbiAqIEByZXR1cm4geyFFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyQXNFbGVtZW50KGRvYywgZWxlbWVudERlZikge1xuICByZXR1cm4gcmVuZGVyU2luZ2xlKGRvYywgZWxlbWVudERlZik7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcGFyYW0geyFBcnJheTwhRWxlbWVudERlZj59IGVsZW1lbnRzRGVmXG4gKiBAcmV0dXJuIHshTm9kZX1cbiAqL1xuZnVuY3Rpb24gcmVuZGVyTXVsdGkoZG9jLCBlbGVtZW50c0RlZikge1xuICBjb25zdCBmcmFnbWVudCA9IGRvYy5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIGVsZW1lbnRzRGVmLmZvckVhY2goZWxlbWVudERlZiA9PlxuICAgIGZyYWdtZW50LmFwcGVuZENoaWxkKHJlbmRlclNpbmdsZShkb2MsIGVsZW1lbnREZWYpKSk7XG4gIHJldHVybiBmcmFnbWVudDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEBwYXJhbSB7IUVsZW1lbnREZWZ9IGVsZW1lbnREZWZcbiAqIEByZXR1cm4geyFFbGVtZW50fVxuICovXG5mdW5jdGlvbiByZW5kZXJTaW5nbGUoZG9jLCBlbGVtZW50RGVmKSB7XG4gIGNvbnN0IGVsID0gZWxlbWVudERlZi5hdHRycyA/XG4gICAgY3JlYXRlRWxlbWVudFdpdGhBdHRyaWJ1dGVzKGRvYywgZWxlbWVudERlZi50YWcsIGVsZW1lbnREZWYuYXR0cnMpIDpcbiAgICBkb2MuY3JlYXRlRWxlbWVudChlbGVtZW50RGVmLnRhZyk7XG5cbiAgaWYgKGVsZW1lbnREZWYudGV4dCkge1xuICAgIGVsLnRleHRDb250ZW50ID0gZWxlbWVudERlZi50ZXh0O1xuICB9XG5cbiAgaWYgKGVsZW1lbnREZWYuY2hpbGRyZW4pIHtcbiAgICBlbC5hcHBlbmRDaGlsZChyZW5kZXJNdWx0aShkb2MsIGVsZW1lbnREZWYuY2hpbGRyZW4pKTtcbiAgfVxuXG4gIHJldHVybiBlbDtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTggVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2FtcE1lZGlhRWxlbWVudEZvcn0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQge3JlbW92ZUVsZW1lbnR9IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuXG5cblxuZXhwb3J0IGNsYXNzIFNvdXJjZXMge1xuICAvKipcbiAgICogQHBhcmFtIHs/c3RyaW5nPX0gb3B0X3NyY0F0dHIgVGhlICdzcmMnIGF0dHJpYnV0ZSBvZiB0aGUgbWVkaWEgZWxlbWVudC5cbiAgICogQHBhcmFtIHs/SUFycmF5TGlrZTwhRWxlbWVudD49fSBvcHRfc3JjRWxzIEFueSBjaGlsZCA8c291cmNlPiB0YWdzIG9mIHRoZVxuICAgKiAgICAgbWVkaWEgZWxlbWVudC5cbiAgICogQHBhcmFtIHs/SUFycmF5TGlrZTwhRWxlbWVudD49fSBvcHRfdHJhY2tFbHMgQW55IGNoaWxkIDx0cmFjaz4gdGFncyBvZiB0aGVcbiAgICogICAgIG1lZGlhIGVsZW1lbnQuXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRfc3JjQXR0ciwgb3B0X3NyY0Vscywgb3B0X3RyYWNrRWxzKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7P3N0cmluZ30gKi9cbiAgICB0aGlzLnNyY0F0dHJfID0gb3B0X3NyY0F0dHIgJiYgb3B0X3NyY0F0dHIubGVuZ3RoID8gb3B0X3NyY0F0dHIgOiBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IUlBcnJheUxpa2U8IUVsZW1lbnQ+fSAqL1xuICAgIHRoaXMuc3JjRWxzXyA9IG9wdF9zcmNFbHMgfHwgW107XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshSUFycmF5TGlrZTwhRWxlbWVudD59ICovXG4gICAgdGhpcy50cmFja0Vsc18gPSBvcHRfdHJhY2tFbHMgfHwgW107XG4gIH1cblxuXG4gIC8qKlxuICAgKiBBcHBsaWVzIHRyYWNrIHRhZ3MgdG8gYSBzcGVjaWZpZWQgZWxlbWVudC4gVGhpcyBpcyBkb25lIGluIGEgc2VwYXJhdGVcbiAgICogbWV0aG9kIGZyb20gdGhlIHNvdXJjZSB0YWdzLCBiZWNhdXNlIHdlIG11c3Qgd2FpdCBmb3IgXCJsb2FkZWRtZXRhZGF0YVwiXG4gICAqIHZpZGVvIGV2ZW50IGJlZm9yZSBkb2luZyB0aGlzLlxuICAgKiBAcGFyYW0geyFIVE1MTWVkaWFFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGFkb3B0IHRoZSB0ZXh0IHRyYWNrc1xuICAgKiAgICAgcmVwcmVzZW50ZWQgYnkgdGhpcyBvYmplY3QuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhcHBseVRyYWNrc1RvRWxlbWVudF8oZWxlbWVudCkge1xuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy50cmFja0Vsc18sIHRyYWNrRWwgPT4ge1xuICAgICAgY29uc3QgdHJhY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cmFjaycpO1xuICAgICAgdHJhY2suaWQgPSB0cmFja0VsLmlkO1xuICAgICAgdHJhY2sua2luZCA9IHRyYWNrRWwua2luZDtcbiAgICAgIHRyYWNrLmxhYmVsID0gdHJhY2tFbC5sYWJlbDtcbiAgICAgIHRyYWNrLnNyY2xhbmcgPSB0cmFja0VsLnNyY2xhbmc7XG4gICAgICB0cmFjay5kZWZhdWx0ID0gdHJhY2tFbC5kZWZhdWx0O1xuICAgICAgdHJhY2suc3JjID0gdHJhY2tFbC5zcmM7XG4gICAgICB0cmFjay5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCkgPT4ge1xuICAgICAgICB0cmFjay5tb2RlID0gJ3Nob3dpbmcnO1xuICAgICAgICBlbGVtZW50LnRleHRUcmFja3NbMF0ubW9kZSA9ICdzaG93aW5nJztcbiAgICAgIH0pO1xuICAgICAgZWxlbWVudC5hcHBlbmRDaGlsZCh0cmFjayk7XG4gICAgfSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBBcHBsaWVzIHRoZSBzcmMgYXR0cmlidXRlIGFuZCBzb3VyY2UgdGFncyB0byBhIHNwZWNpZmllZCBlbGVtZW50LlxuICAgKiBAcGFyYW0geyFIVE1MTWVkaWFFbGVtZW50fSBlbGVtZW50IFRoZSBlbGVtZW50IHRvIGFkb3B0IHRoZSBzb3VyY2VzXG4gICAqICAgICByZXByZXNlbnRlZCBieSB0aGlzIG9iamVjdC5cbiAgICovXG4gIGFwcGx5VG9FbGVtZW50KGVsZW1lbnQpIHtcbiAgICBTb3VyY2VzLnJlbW92ZUZyb20oZWxlbWVudCk7XG5cbiAgICBpZiAoIXRoaXMuc3JjQXR0cl8pIHtcbiAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWxlbWVudC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHRoaXMuc3JjQXR0cl8pO1xuICAgIH1cblxuICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGhpcy5zcmNFbHNfLFxuICAgICAgICBzcmNFbCA9PiBlbGVtZW50LmFwcGVuZENoaWxkKHNyY0VsKSk7XG5cbiAgICBpZiAodGhpcy50cmFja0Vsc18ubGVuZ3RoID4gMCkge1xuICAgICAgLy8gV2FpdCBmb3IgXCJsb2FkZWRtZXRhZGF0YVwiIGJlZm9yZSBhZGRpbmcgdHJhY2tzLlxuICAgICAgLy8gRmlyZWZveCBhZGRzIHRyYWNrcywgYnV0IGRvZXMgbm90IHRvZ2dsZSB0aGVtIG9uIHVubGVzcyB2aWRlbyBtZXRhZGF0YVxuICAgICAgLy8gaXMgbG9hZGVkIGZpcnN0LlxuICAgICAgaWYgKGVsZW1lbnQucmVhZHlTdGF0ZSA+PSAxIC8qIEhBVkVfTUVUQURBVEEgKi8pIHtcbiAgICAgICAgdGhpcy5hcHBseVRyYWNrc1RvRWxlbWVudF8oZWxlbWVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBhZGRUcmFja3NIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCBhZGRUcmFja3NIYW5kbGVyKTtcbiAgICAgICAgICB0aGlzLmFwcGx5VHJhY2tzVG9FbGVtZW50XyhlbGVtZW50KTtcbiAgICAgICAgfTtcblxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWRlZG1ldGFkYXRhJywgYWRkVHJhY2tzSGFuZGxlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbmQgcmV0dXJucyB0aGUgc291cmNlcyBmcm9tIGEgc3BlY2lmaWVkIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQgd2hvc2Ugc291cmNlcyBzaG91bGQgYmUgcmVtb3ZlZCBhbmRcbiAgICogICAgIHJldHVybmVkLlxuICAgKiBAcmV0dXJuIHshU291cmNlc30gQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc291cmNlcyBvZiB0aGUgc3BlY2lmaWVkXG4gICAqICAgICBlbGVtZW50LlxuICAgKi9cbiAgc3RhdGljIHJlbW92ZUZyb20oZWxlbWVudCkge1xuICAgIGNvbnN0IGVsZW1lbnRUb1VzZSA9IGFtcE1lZGlhRWxlbWVudEZvcihlbGVtZW50KSB8fCBlbGVtZW50O1xuICAgIGNvbnN0IHNyY0F0dHIgPSBlbGVtZW50VG9Vc2UuZ2V0QXR0cmlidXRlKCdzcmMnKTtcbiAgICBlbGVtZW50VG9Vc2UucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcblxuICAgIGNvbnN0IHNyY0VscyA9IGVsZW1lbnRUb1VzZS5xdWVyeVNlbGVjdG9yQWxsKCdzb3VyY2UnKTtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHNyY0Vscywgc3JjRWwgPT4gcmVtb3ZlRWxlbWVudChzcmNFbCkpO1xuXG4gICAgY29uc3QgdHJhY2tFbHMgPSBlbGVtZW50VG9Vc2UucXVlcnlTZWxlY3RvckFsbCgndHJhY2snKTtcbiAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRyYWNrRWxzLCB0cmFja0VsID0+IHJlbW92ZUVsZW1lbnQodHJhY2tFbCkpO1xuXG4gICAgcmV0dXJuIG5ldyBTb3VyY2VzKHNyY0F0dHIsIHNyY0VscywgdHJhY2tFbHMpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7RGV2ZWxvcG1lbnRNb2RlTG9nLCBEZXZlbG9wbWVudE1vZGVMb2dCdXR0b25TZXR9IGZyb20gJy4vZGV2ZWxvcG1lbnQtdWknO1xuaW1wb3J0IHtFdmVudFR5cGUsIGRpc3BhdGNofSBmcm9tICcuL2V2ZW50cyc7XG5pbXBvcnQge1Byb2dyZXNzQmFyfSBmcm9tICcuL3Byb2dyZXNzLWJhcic7XG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMnO1xuaW1wb3J0IHtTdGF0ZVR5cGV9IGZyb20gJy4vYW1wLXN0b3J5LXN0YXRlLXNlcnZpY2UnO1xuaW1wb3J0IHtkZXZ9IGZyb20gJy4uLy4uLy4uL3NyYy9sb2cnO1xuaW1wb3J0IHtkaWN0fSBmcm9tICcuLi8uLi8uLi9zcmMvdXRpbHMvb2JqZWN0JztcbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi4vLi4vLi4vc3JjL21vZGUnO1xuaW1wb3J0IHttYXRjaGVzfSBmcm9tICcuLi8uLi8uLi9zcmMvZG9tJztcbmltcG9ydCB7cmVuZGVyQXNFbGVtZW50fSBmcm9tICcuL3NpbXBsZS10ZW1wbGF0ZSc7XG5cblxuY29uc3QgTVVURV9DTEFTUyA9ICdpLWFtcGh0bWwtc3RvcnktbXV0ZS1hdWRpby1jb250cm9sJztcblxuY29uc3QgVU5NVVRFX0NMQVNTID0gJ2ktYW1waHRtbC1zdG9yeS11bm11dGUtYXVkaW8tY29udHJvbCc7XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgeyEuL3NpbXBsZS10ZW1wbGF0ZS5FbGVtZW50RGVmfSAqL1xuY29uc3QgVEVNUExBVEUgPSB7XG4gIHRhZzogJ2FzaWRlJyxcbiAgYXR0cnM6IGRpY3QoXG4gICAgICB7J2NsYXNzJzogJ2ktYW1waHRtbC1zdG9yeS1zeXN0ZW0tbGF5ZXIgaS1hbXBodG1sLXN0b3J5LXN5c3RlbS1yZXNldCd9KSxcbiAgY2hpbGRyZW46IFtcbiAgICB7XG4gICAgICB0YWc6ICdkaXYnLFxuICAgICAgYXR0cnM6IGRpY3QoeydjbGFzcyc6ICdpLWFtcGh0bWwtc3RvcnktdWktbGVmdCd9KSxcbiAgICAgIGNoaWxkcmVuOiBbXG4gICAgICAgIHtcbiAgICAgICAgICB0YWc6ICdkaXYnLFxuICAgICAgICAgIGF0dHJzOiBkaWN0KHtcbiAgICAgICAgICAgICdyb2xlJzogJ2J1dHRvbicsXG4gICAgICAgICAgICAnY2xhc3MnOiBVTk1VVEVfQ0xBU1MgKyAnIGktYW1waHRtbC1zdG9yeS1idXR0b24nLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGFnOiAnZGl2JyxcbiAgICAgICAgICBhdHRyczogZGljdCh7XG4gICAgICAgICAgICAncm9sZSc6ICdidXR0b24nLFxuICAgICAgICAgICAgJ2NsYXNzJzogTVVURV9DTEFTUyArICcgaS1hbXBodG1sLXN0b3J5LWJ1dHRvbicsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0sXG4gICAge1xuICAgICAgdGFnOiAnZGl2JyxcbiAgICAgIGF0dHJzOiBkaWN0KHsnY2xhc3MnOiAnaS1hbXBodG1sLXN0b3J5LXVpLXJpZ2h0J30pLFxuICAgICAgY2hpbGRyZW46IFtcbiAgICAgICAge1xuICAgICAgICAgIHRhZzogJ2RpdicsXG4gICAgICAgICAgYXR0cnM6IGRpY3Qoe1xuICAgICAgICAgICAgJ3JvbGUnOiAnYnV0dG9uJyxcbiAgICAgICAgICAgICdjbGFzcyc6IFVOTVVURV9DTEFTUyArICcgaS1hbXBodG1sLXN0b3J5LWJ1dHRvbicsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0YWc6ICdkaXYnLFxuICAgICAgICAgIGF0dHJzOiBkaWN0KHtcbiAgICAgICAgICAgICdyb2xlJzogJ2J1dHRvbicsXG4gICAgICAgICAgICAnY2xhc3MnOiBNVVRFX0NMQVNTICsgJyBpLWFtcGh0bWwtc3RvcnktYnV0dG9uJyxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgfSxcbiAgXSxcbn07XG5cblxuLyoqXG4gKiBTeXN0ZW0gTGF5ZXIgKGkuZS4gVUkgQ2hyb21lKSBmb3IgPGFtcC1zdG9yeT4uXG4gKiBDaHJvbWUgY29udGFpbnM6XG4gKiAgIC0gbXV0ZS91bm11dGUgYnV0dG9uXG4gKiAgIC0gc3RvcnkgcHJvZ3Jlc3MgYmFyXG4gKiAgIC0gYm9va2VuZCBjbG9zZSBidXRvdG5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbUxheWVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IS4vYW1wLXN0b3J5LXN0YXRlLXNlcnZpY2UuQW1wU3RvcnlTdGF0ZVNlcnZpY2V9IHN0YXRlU2VydmljZVxuICAgKi9cbiAgY29uc3RydWN0b3Iod2luLCBzdGF0ZVNlcnZpY2UpIHtcbiAgICAvKiogQHByaXZhdGUgeyFXaW5kb3d9ICovXG4gICAgdGhpcy53aW5fID0gd2luO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuaXNCdWlsdF8gPSBmYWxzZTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VsZW1lbnR9ICovXG4gICAgdGhpcy5yb290XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9FbGVtZW50fSAqL1xuICAgIHRoaXMubXV0ZUF1ZGlvQnRuXyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9FbGVtZW50fSAqL1xuICAgIHRoaXMudW5tdXRlQXVkaW9CdG5fID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0VsZW1lbnR9ICovXG4gICAgdGhpcy5sZWZ0QnV0dG9uVHJheV8gPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IVByb2dyZXNzQmFyfSAqL1xuICAgIHRoaXMucHJvZ3Jlc3NCYXJfID0gUHJvZ3Jlc3NCYXIuY3JlYXRlKHdpbik7XG5cbiAgICAvKiogQHByaXZhdGUgeyFEZXZlbG9wbWVudE1vZGVMb2d9ICovXG4gICAgdGhpcy5kZXZlbG9wZXJMb2dfID0gRGV2ZWxvcG1lbnRNb2RlTG9nLmNyZWF0ZSh3aW4pO1xuXG4gICAgLyoqIEBwcml2YXRlIHshRGV2ZWxvcG1lbnRNb2RlTG9nQnV0dG9uU2V0fSAqL1xuICAgIHRoaXMuZGV2ZWxvcGVyQnV0dG9uc18gPSBEZXZlbG9wbWVudE1vZGVMb2dCdXR0b25TZXQuY3JlYXRlKHdpbik7XG5cbiAgICAvKiogQHByaXZhdGUgeyEuL2FtcC1zdG9yeS1zdGF0ZS1zZXJ2aWNlLkFtcFN0b3J5U3RhdGVTZXJ2aWNlfSAqL1xuICAgIHRoaXMuc3RhdGVTZXJ2aWNlXyA9IHN0YXRlU2VydmljZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTxzdHJpbmc+fSBwYWdlSWRzIHRoZSBpZHMgb2YgZWFjaCBwYWdlIGluIHRoZSBzdG9yeVxuICAgKiBAcmV0dXJuIHshRWxlbWVudH1cbiAgICovXG4gIGJ1aWxkKHBhZ2VJZHMpIHtcbiAgICBpZiAodGhpcy5pc0J1aWx0Xykge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0Um9vdCgpO1xuICAgIH1cblxuICAgIHRoaXMuaXNCdWlsdF8gPSB0cnVlO1xuXG4gICAgdGhpcy5yb290XyA9IHJlbmRlckFzRWxlbWVudCh0aGlzLndpbl8uZG9jdW1lbnQsIFRFTVBMQVRFKTtcblxuICAgIHRoaXMucm9vdF8uaW5zZXJ0QmVmb3JlKFxuICAgICAgICB0aGlzLnByb2dyZXNzQmFyXy5idWlsZChwYWdlSWRzKSwgdGhpcy5yb290Xy5sYXN0Q2hpbGQpO1xuXG4gICAgdGhpcy5sZWZ0QnV0dG9uVHJheV8gPVxuICAgICAgICB0aGlzLnJvb3RfLnF1ZXJ5U2VsZWN0b3IoJy5pLWFtcGh0bWwtc3RvcnktdWktbGVmdCcpO1xuXG4gICAgdGhpcy5idWlsZEZvckRldmVsb3BtZW50TW9kZV8oKTtcblxuICAgIHRoaXMuYWRkRXZlbnRIYW5kbGVyc18oKTtcblxuICAgIGNvbnN0IHN5c3RlbUxheWVyQnV0dG9uc1Nob3duID0gdGhpcy5zdGF0ZVNlcnZpY2VfXG4gICAgICAgIC5nZXRTdGF0ZShTdGF0ZVR5cGUuU1lTVEVNX0xBWUVSX0JVVFRPTlNfU0hPV04pO1xuXG4gICAgLy8gVE9ETyhuZXdtdWlzKTogT2JzZXJ2ZSB0aGlzIHZhbHVlLlxuICAgIGlmICghc3lzdGVtTGF5ZXJCdXR0b25zU2hvd24uZ2V0VmFsdWUoKSAmJlxuICAgICAgICAhc3lzdGVtTGF5ZXJCdXR0b25zU2hvd24uaXNNb2RpZmlhYmxlKCkpIHtcbiAgICAgIHRoaXMucm9vdF8uY2xhc3NMaXN0LmFkZCgnaS1hbXBodG1sLXN0b3J5LXVpLW5vLWJ1dHRvbnMnKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5nZXRSb290KCk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGJ1aWxkRm9yRGV2ZWxvcG1lbnRNb2RlXygpIHtcbiAgICBpZiAoIWdldE1vZGUoKS5kZXZlbG9wbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubGVmdEJ1dHRvblRyYXlfLmFwcGVuZENoaWxkKHRoaXMuZGV2ZWxvcGVyQnV0dG9uc18uYnVpbGQoXG4gICAgICAgIHRoaXMuZGV2ZWxvcGVyTG9nXy50b2dnbGUuYmluZCh0aGlzLmRldmVsb3BlckxvZ18pKSk7XG4gICAgdGhpcy5yb290Xy5hcHBlbmRDaGlsZCh0aGlzLmRldmVsb3BlckxvZ18uYnVpbGQoKSk7XG4gIH1cblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFkZEV2ZW50SGFuZGxlcnNfKCkge1xuICAgIC8vIFRPRE8oYWxhbm9yb3pjbyk6IExpc3RlbiB0byB0YXAgZXZlbnQgcHJvcGVybHkgKGkuZS4gZmFzdGNsaWNrKVxuICAgIHRoaXMucm9vdF8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGRldigpLmFzc2VydEVsZW1lbnQoZS50YXJnZXQpO1xuXG4gICAgICBpZiAobWF0Y2hlcyh0YXJnZXQsIGAuJHtNVVRFX0NMQVNTfSwgLiR7TVVURV9DTEFTU30gKmApKSB7XG4gICAgICAgIHRoaXMub25NdXRlQXVkaW9DbGlja18oZSk7XG4gICAgICB9IGVsc2UgaWYgKG1hdGNoZXModGFyZ2V0LCBgLiR7VU5NVVRFX0NMQVNTfSwgLiR7VU5NVVRFX0NMQVNTfSAqYCkpIHtcbiAgICAgICAgdGhpcy5vblVubXV0ZUF1ZGlvQ2xpY2tfKGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cblxuICAvKipcbiAgICogQHJldHVybiB7IUVsZW1lbnR9XG4gICAqL1xuICBnZXRSb290KCkge1xuICAgIHJldHVybiBkZXYoKS5hc3NlcnRFbGVtZW50KHRoaXMucm9vdF8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUV2ZW50fSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvbk11dGVBdWRpb0NsaWNrXyhlKSB7XG4gICAgdGhpcy5kaXNwYXRjaF8oRXZlbnRUeXBlLk1VVEUsIGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUV2ZW50fSBlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBvblVubXV0ZUF1ZGlvQ2xpY2tfKGUpIHtcbiAgICB0aGlzLmRpc3BhdGNoXyhFdmVudFR5cGUuVU5NVVRFLCBlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlXG4gICAqIEBwYXJhbSB7IUV2ZW50PX0gb3B0X2V2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkaXNwYXRjaF8oZXZlbnRUeXBlLCBvcHRfZXZlbnQpIHtcbiAgICBpZiAob3B0X2V2ZW50KSB7XG4gICAgICBkZXYoKS5hc3NlcnQob3B0X2V2ZW50KS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG5cbiAgICBkaXNwYXRjaCh0aGlzLmdldFJvb3QoKSwgZXZlbnRUeXBlLCAvKiBvcHRfYnViYmxlcyAqLyB0cnVlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGFnZUlkIFRoZSBwYWdlIGlkIG9mIHRoZSBuZXcgYWN0aXZlIHBhZ2UuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHNldEFjdGl2ZVBhZ2VJZChwYWdlSWQpIHtcbiAgICAvLyBUT0RPKG5ld211aXMpIGF2b2lkIHBhc3NpbmcgcHJvZ3Jlc3MgbG9naWMgdGhyb3VnaCBzeXN0ZW0tbGF5ZXJcbiAgICB0aGlzLnByb2dyZXNzQmFyXy5zZXRBY3RpdmVTZWdtZW50SWQocGFnZUlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcGFnZUlkIFRoZSBpZCBvZiB0aGUgcGFnZSB3aG9zZSBwcm9ncmVzcyBzaG91bGQgYmVcbiAgICogICAgIGNoYW5nZWQuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwcm9ncmVzcyBBIG51bWJlciBmcm9tIDAuMCB0byAxLjAsIHJlcHJlc2VudGluZyB0aGVcbiAgICogICAgIHByb2dyZXNzIG9mIHRoZSBjdXJyZW50IHBhZ2UuXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHVwZGF0ZVByb2dyZXNzKHBhZ2VJZCwgcHJvZ3Jlc3MpIHtcbiAgICAvLyBUT0RPKG5ld211aXMpIGF2b2lkIHBhc3NpbmcgcHJvZ3Jlc3MgbG9naWMgdGhyb3VnaCBzeXN0ZW0tbGF5ZXJcbiAgICB0aGlzLnByb2dyZXNzQmFyXy51cGRhdGVQcm9ncmVzcyhwYWdlSWQsIHByb2dyZXNzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2xvZ2dpbmcuQW1wU3RvcnlMb2dFbnRyeURlZn0gbG9nRW50cnlcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGxvZ0ludGVybmFsXyhsb2dFbnRyeSkge1xuICAgIHRoaXMuZGV2ZWxvcGVyQnV0dG9uc18ubG9nKGxvZ0VudHJ5KTtcbiAgICB0aGlzLmRldmVsb3BlckxvZ18ubG9nKGxvZ0VudHJ5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2dzIGFuIGFycmF5IG9mIGVudHJpZXMgdG8gdGhlIGRldmVsb3BlciBsb2dzLlxuICAgKiBAcGFyYW0geyFBcnJheTwhLi9sb2dnaW5nLkFtcFN0b3J5TG9nRW50cnlEZWY+fSBsb2dFbnRyaWVzXG4gICAqL1xuICBsb2dBbGwobG9nRW50cmllcykge1xuICAgIGlmICghZ2V0TW9kZSgpLmRldmVsb3BtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgU2VydmljZXMudnN5bmNGb3IodGhpcy53aW5fKS5tdXRhdGUoKCkgPT4ge1xuICAgICAgbG9nRW50cmllcy5mb3JFYWNoKGxvZ0VudHJ5ID0+IHRoaXMubG9nSW50ZXJuYWxfKGxvZ0VudHJ5KSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTG9ncyBhIHNpbmdsZSBlbnRyeSB0byB0aGUgZGV2ZWxvcGVyIGxvZ3MuXG4gICAqIEBwYXJhbSB7IS4vbG9nZ2luZy5BbXBTdG9yeUxvZ0VudHJ5RGVmfSBsb2dFbnRyeVxuICAgKi9cbiAgbG9nKGxvZ0VudHJ5KSB7XG4gICAgaWYgKCFnZXRNb2RlKCkuZGV2ZWxvcG1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmxvZ0ludGVybmFsXyhsb2dFbnRyeSk7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXJzIGFueSBzdGF0ZSBoZWxkIGJ5IHRoZSBkZXZlbG9wZXIgbG9nIG9yIGJ1dHRvbnMuXG4gICAqL1xuICByZXNldERldmVsb3BlckxvZ3MoKSB7XG4gICAgaWYgKCFnZXRNb2RlKCkuZGV2ZWxvcG1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmRldmVsb3BlckJ1dHRvbnNfLmNsZWFyKCk7XG4gICAgdGhpcy5kZXZlbG9wZXJMb2dfLmNsZWFyKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgc3RyaW5nIHByb3ZpZGluZyBjb250ZXh0IGZvciB0aGUgZGV2ZWxvcGVyIGxvZ3Mgd2luZG93LiAgVGhpcyBpc1xuICAgKiBvZnRlbiB0aGUgbmFtZSBvciBJRCBvZiB0aGUgZWxlbWVudCB0aGF0IGFsbCBsb2dzIGFyZSBmb3IgKGUuZy4gdGhlIHBhZ2UpLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gY29udGV4dFN0cmluZ1xuICAgKi9cbiAgc2V0RGV2ZWxvcGVyTG9nQ29udGV4dFN0cmluZyhjb250ZXh0U3RyaW5nKSB7XG4gICAgaWYgKCFnZXRNb2RlKCkuZGV2ZWxvcG1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmRldmVsb3BlckxvZ18uc2V0Q29udGV4dFN0cmluZyhjb250ZXh0U3RyaW5nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGVzIHRoZSB2aXNpYmlsaXR5IG9mIHRoZSBkZXZlbG9wZXIgbG9nLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdG9nZ2xlRGV2ZWxvcGVyTG9nXygpIHtcbiAgICBpZiAoIWdldE1vZGUoKS5kZXZlbG9wbWVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuZGV2ZWxvcGVyTG9nXy50b2dnbGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlcyB0aGUgZGV2ZWxvcGVyIGxvZyBpbiB0aGUgVUkuXG4gICAqL1xuICBoaWRlRGV2ZWxvcGVyTG9nKCkge1xuICAgIGlmICghZ2V0TW9kZSgpLmRldmVsb3BtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5kZXZlbG9wZXJMb2dfLmhpZGUoKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMnO1xuaW1wb3J0IHtjcmVhdGVFbGVtZW50V2l0aEF0dHJpYnV0ZXMsIHJlbW92ZUVsZW1lbnR9IGZyb20gJy4uLy4uLy4uL3NyYy9kb20nO1xuXG5cbi8qKiBAcHJpdmF0ZSBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IFRPQVNUX0NMQVNTTkFNRSA9ICdpLWFtcGh0bWwtc3RvcnktdG9hc3QnO1xuXG5cbi8qKlxuICogU2hvdWxkIGJlIGhpZ2hlciB0aGFuIHRvdGFsIGFuaW1hdGlvbiB0aW1lLlxuICogQHByaXZhdGUgQGNvbnN0IHtudW1iZXJ9XG4gKi9cbmNvbnN0IFRPQVNUX1ZJU0lCTEVfVElNRV9NUyA9IDI2MDA7XG5cblxuZXhwb3J0IGNsYXNzIFRvYXN0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7IU5vZGV8c3RyaW5nfSBjaGlsZE5vZGVPclRleHRcbiAgICovXG4gIHN0YXRpYyBzaG93KHdpbiwgY2hpbGROb2RlT3JUZXh0KSB7XG4gICAgY29uc3QgdG9hc3QgPSBjcmVhdGVFbGVtZW50V2l0aEF0dHJpYnV0ZXMod2luLmRvY3VtZW50LCAnZGl2JyxcbiAgICAgICAgLyoqIEB0eXBlIHshSnNvbk9iamVjdH0gKi8gKHsnY2xhc3MnOiBUT0FTVF9DTEFTU05BTUV9KSk7XG5cbiAgICBpZiAodHlwZW9mIGNoaWxkTm9kZU9yVGV4dCA9PSAnc3RyaW5nJykge1xuICAgICAgdG9hc3QudGV4dENvbnRlbnQgPSBjaGlsZE5vZGVPclRleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvYXN0LmFwcGVuZENoaWxkKGNoaWxkTm9kZU9yVGV4dCk7XG4gICAgfVxuXG4gICAgd2luLmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodG9hc3QpO1xuXG4gICAgU2VydmljZXMudGltZXJGb3Iod2luKVxuICAgICAgICAuZGVsYXkoKCkgPT4gcmVtb3ZlRWxlbWVudCh0b2FzdCksIFRPQVNUX1ZJU0lCTEVfVElNRV9NUyk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2Nsb3Nlc3RCeVNlbGVjdG9yfSBmcm9tICcuLi8uLi8uLi9zcmMvZG9tJztcbmltcG9ydCB7dXNlcn0gZnJvbSAnLi4vLi4vLi4vc3JjL2xvZyc7XG5cbi8qKlxuICogUmV0dXJucyBtaWxsaXMgYXMgbnVtYmVyIGlmIGdpdmVuIGEgc3RyaW5nKGUuZy4gMXMsIDIwMG1zIGV0YylcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aW1lXG4gKiBAcmV0dXJuIHtudW1iZXJ8dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdGltZVN0clRvTWlsbGlzKHRpbWUpIHtcbiAgY29uc3QgbWF0Y2ggPSB0aW1lLnRvTG93ZXJDYXNlKCkubWF0Y2goL14oWzAtOVxcLl0rKVxccyooc3xtcykkLyk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgY29uc3QgbnVtID0gbWF0Y2hbMV07XG4gIGNvbnN0IHVuaXRzID0gbWF0Y2hbMl07XG5cbiAgdXNlcigpLmFzc2VydChcbiAgICAgIG1hdGNoICYmXG4gICAgICAgICAgbWF0Y2gubGVuZ3RoID09IDMgJiZcbiAgICAgICAgICAodW5pdHMgPT0gJ3MnIHx8IHVuaXRzID09ICdtcycpLFxuICAgICAgJ0ludmFsaWQgdGltZSBzdHJpbmcgJXMnLCB0aW1lKTtcblxuICByZXR1cm4gdW5pdHMgPT0gJ3MnID8gcGFyc2VGbG9hdChudW0pICogMTAwMCA6IHBhcnNlSW50KG51bSwgMTApO1xufVxuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBoYXMgYW4gYWN0aW9uIGZvciBpdHMgb249XCJ0YXA6Li4uXCJcbiAqIGhhbmRsZXIuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1RhcEFjdGlvbihlbCkge1xuICAvLyBUaGVyZSBhcmUgYmV0dGVyIHdheXMgdG8gZGV0ZXJtaW5lIHRoaXMsIGJ1dCB0aGV5J3JlIGFsbCBib3VuZCB0byBhY3Rpb25cbiAgLy8gc2VydmljZSByYWNlIGNvbmRpdGlvbnMuIFRoaXMgaXMgZ29vZCBlbm91Z2ggZm9yIG91ciB1c2UgY2FzZS5cbiAgcmV0dXJuIGVsLmhhc0F0dHJpYnV0ZSgnb24nKSAmJlxuICAgICAgISFlbC5nZXRBdHRyaWJ1dGUoJ29uJykubWF0Y2goLyhefDspXFxzKnRhcFxccyo6Lyk7XG59XG5cblxuLyoqXG4gKiBDYWxjdWxhdGVzIGEgY2xpZW50IHJlY3Qgd2l0aG91dCBhcHBseWluZyBzY2FsaW5nIHRyYW5zZm9ybWF0aW9ucy5cbiAqIEBub3RlIE11c3QgYmUgcnVuIGluIGEgdnN5bmMgbWVhc3VyZSBjb250ZXh0LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxcbiAqIEByZXR1cm4geyFDbGllbnRSZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5zY2FsZWRDbGllbnRSZWN0KGVsKSB7XG4gIGNvbnN0IHt3aWR0aCwgaGVpZ2h0LCBsZWZ0LCB0b3B9ID0gZWwuLypPSyovZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgY29uc3Qgc2NhbGVGYWN0b3JYID0gd2lkdGggPT0gMCA/IDEgOiB3aWR0aCAvIGVsLi8qT0sqL29mZnNldFdpZHRoO1xuICBjb25zdCBzY2FsZUZhY3RvclkgPSBoZWlnaHQgPT0gMCA/IDEgOiBoZWlnaHQgLyBlbC4vKk9LKi9vZmZzZXRIZWlnaHQ7XG5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IUNsaWVudFJlY3R9ICovICh7XG4gICAgbGVmdDogbGVmdCAvIHNjYWxlRmFjdG9yWCxcbiAgICB0b3A6IHRvcCAvIHNjYWxlRmFjdG9yWSxcbiAgICB3aWR0aDogd2lkdGggLyBzY2FsZUZhY3RvclgsXG4gICAgaGVpZ2h0OiBoZWlnaHQgLyBzY2FsZUZhY3RvclksXG4gIH0pO1xufVxuXG5cbi8qKlxuICogRmluZHMgYW4gYW1wLXZpZGVvL2FtcC1hdWRpbyBhbmNlc3Rvci5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHs/QW1wRWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFtcE1lZGlhRWxlbWVudEZvcihlbCkge1xuICByZXR1cm4gY2xvc2VzdEJ5U2VsZWN0b3IoZWwsICdhbXAtdmlkZW8sIGFtcC1hdWRpbycpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge1N0YXRlQ2hhbmdlVHlwZX0gZnJvbSAnLi9uYXZpZ2F0aW9uLXN0YXRlJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuLi8uLi8uLi9zcmMvbG9nJztcblxuXG4vKipcbiAqIFZhcmlhYmxlIHNlcnZpY2UgZm9yIGFtcC1zdG9yeS5cbiAqIFVzZWQgZm9yIFVSTCByZXBsYWNlbWVudCBzZXJ2aWNlLiBTZWUgdXNhZ2UgaW4gc3JjL3VybC1yZXBsYWNlbWVudHMtaW1wbC5cbiAqL1xuZXhwb3J0IGNsYXNzIEFtcFN0b3J5VmFyaWFibGVTZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqIEBwcml2YXRlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMucGFnZUluZGV4XyA9IG51bGw7XG5cbiAgICAvKiogQHByaXZhdGUgez9udW1iZXJ9ICovXG4gICAgdGhpcy5wYWdlSWRfID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL25hdmlnYXRpb24tc3RhdGUuU3RhdGVDaGFuZ2VFdmVudERlZn0gc3RhdGVDaGFuZ2VFdmVudFxuICAgKi9cbiAgb25TdGF0ZUNoYW5nZShzdGF0ZUNoYW5nZUV2ZW50KSB7XG4gICAgc3dpdGNoIChzdGF0ZUNoYW5nZUV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgU3RhdGVDaGFuZ2VUeXBlLkFDVElWRV9QQUdFOlxuICAgICAgICBjb25zdCB7cGFnZUluZGV4LCBwYWdlSWR9ID0gc3RhdGVDaGFuZ2VFdmVudC52YWx1ZTtcbiAgICAgICAgdGhpcy5wYWdlSW5kZXhfID0gcGFnZUluZGV4O1xuICAgICAgICB0aGlzLnBhZ2VJZF8gPSBwYWdlSWQ7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXQgcGFnZUluZGV4KCkge1xuICAgIHJldHVybiBkZXYoKS5hc3NlcnROdW1iZXIodGhpcy5wYWdlSW5kZXhfKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXQgcGFnZUlkKCkge1xuICAgIHJldHVybiBkZXYoKS5hc3NlcnRTdHJpbmcodGhpcy5wYWdlSWRfKTtcbiAgfVxufVxuIiwiLyohXG5cbkNvcHlyaWdodCAoQykgMjAxNC0yMDE2IGJ5IEFuZHJlYSBHaWFtbWFyY2hpIC0gQFdlYlJlZmxlY3Rpb25cblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuVEhFIFNPRlRXQVJFLlxuXG4qL1xuLy8gZ2xvYmFsIHdpbmRvdyBPYmplY3Rcbi8vIG9wdGlvbmFsIHBvbHlmaWxsIGluZm9cbi8vICAgICdhdXRvJyB1c2VkIGJ5IGRlZmF1bHQsIGV2ZXJ5dGhpbmcgaXMgZmVhdHVyZSBkZXRlY3RlZFxuLy8gICAgJ2ZvcmNlJyB1c2UgdGhlIHBvbHlmaWxsIGV2ZW4gaWYgbm90IGZ1bGx5IG5lZWRlZFxuZnVuY3Rpb24gaW5zdGFsbEN1c3RvbUVsZW1lbnRzKHdpbmRvdywgcG9seWZpbGwpIHsndXNlIHN0cmljdCc7XG5cbiAgLy8gRE8gTk9UIFVTRSBUSElTIEZJTEUgRElSRUNUTFksIElUIFdPTidUIFdPUktcbiAgLy8gVEhJUyBJUyBBIFBST0pFQ1QgQkFTRUQgT04gQSBCVUlMRCBTWVNURU1cbiAgLy8gVEhJUyBGSUxFIElTIEpVU1QgV1JBUFBFRCBVUCBSRVNVTFRJTkcgSU5cbiAgLy8gYnVpbGQvZG9jdW1lbnQtcmVnaXN0ZXItZWxlbWVudC5ub2RlLmpzXG5cbiAgdmFyXG4gICAgZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQsXG4gICAgT2JqZWN0ID0gd2luZG93Lk9iamVjdFxuICA7XG5cbiAgdmFyIGh0bWxDbGFzcyA9IChmdW5jdGlvbiAoaW5mbykge1xuICAgIC8vIChDKSBBbmRyZWEgR2lhbW1hcmNoaSAtIEBXZWJSZWZsZWN0aW9uIC0gTUlUIFN0eWxlXG4gICAgdmFyXG4gICAgICBjYXRjaENsYXNzID0gL15bQS1aXStbYS16XS8sXG4gICAgICBmaWx0ZXJCeSA9IGZ1bmN0aW9uIChyZSkge1xuICAgICAgICB2YXIgYXJyID0gW10sIHRhZztcbiAgICAgICAgZm9yICh0YWcgaW4gcmVnaXN0ZXIpIHtcbiAgICAgICAgICBpZiAocmUudGVzdCh0YWcpKSBhcnIucHVzaCh0YWcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgICB9LFxuICAgICAgYWRkID0gZnVuY3Rpb24gKENsYXNzLCB0YWcpIHtcbiAgICAgICAgdGFnID0gdGFnLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmICghKHRhZyBpbiByZWdpc3RlcikpIHtcbiAgICAgICAgICByZWdpc3RlcltDbGFzc10gPSAocmVnaXN0ZXJbQ2xhc3NdIHx8IFtdKS5jb25jYXQodGFnKTtcbiAgICAgICAgICByZWdpc3Rlclt0YWddID0gKHJlZ2lzdGVyW3RhZy50b1VwcGVyQ2FzZSgpXSA9IENsYXNzKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHJlZ2lzdGVyID0gKE9iamVjdC5jcmVhdGUgfHwgT2JqZWN0KShudWxsKSxcbiAgICAgIGh0bWxDbGFzcyA9IHt9LFxuICAgICAgaSwgc2VjdGlvbiwgdGFncywgQ2xhc3NcbiAgICA7XG4gICAgZm9yIChzZWN0aW9uIGluIGluZm8pIHtcbiAgICAgIGZvciAoQ2xhc3MgaW4gaW5mb1tzZWN0aW9uXSkge1xuICAgICAgICB0YWdzID0gaW5mb1tzZWN0aW9uXVtDbGFzc107XG4gICAgICAgIHJlZ2lzdGVyW0NsYXNzXSA9IHRhZ3M7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgcmVnaXN0ZXJbdGFnc1tpXS50b0xvd2VyQ2FzZSgpXSA9XG4gICAgICAgICAgcmVnaXN0ZXJbdGFnc1tpXS50b1VwcGVyQ2FzZSgpXSA9IENsYXNzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGh0bWxDbGFzcy5nZXQgPSBmdW5jdGlvbiBnZXQodGFnT3JDbGFzcykge1xuICAgICAgcmV0dXJuIHR5cGVvZiB0YWdPckNsYXNzID09PSAnc3RyaW5nJyA/XG4gICAgICAgIChyZWdpc3Rlclt0YWdPckNsYXNzXSB8fCAoY2F0Y2hDbGFzcy50ZXN0KHRhZ09yQ2xhc3MpID8gW10gOiAnJykpIDpcbiAgICAgICAgZmlsdGVyQnkodGFnT3JDbGFzcyk7XG4gICAgfTtcbiAgICBodG1sQ2xhc3Muc2V0ID0gZnVuY3Rpb24gc2V0KHRhZywgQ2xhc3MpIHtcbiAgICAgIHJldHVybiAoY2F0Y2hDbGFzcy50ZXN0KHRhZykgP1xuICAgICAgICBhZGQodGFnLCBDbGFzcykgOlxuICAgICAgICBhZGQoQ2xhc3MsIHRhZylcbiAgICAgICksIGh0bWxDbGFzcztcbiAgICB9O1xuICAgIHJldHVybiBodG1sQ2xhc3M7XG4gIH0oe1xuICAgIFwiY29sbGVjdGlvbnNcIjoge1xuICAgICAgXCJIVE1MQWxsQ29sbGVjdGlvblwiOiBbXG4gICAgICAgIFwiYWxsXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxDb2xsZWN0aW9uXCI6IFtcbiAgICAgICAgXCJmb3Jtc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRm9ybUNvbnRyb2xzQ29sbGVjdGlvblwiOiBbXG4gICAgICAgIFwiZWxlbWVudHNcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE9wdGlvbnNDb2xsZWN0aW9uXCI6IFtcbiAgICAgICAgXCJvcHRpb25zXCJcbiAgICAgIF1cbiAgICB9LFxuICAgIFwiZWxlbWVudHNcIjoge1xuICAgICAgXCJFbGVtZW50XCI6IFtcbiAgICAgICAgXCJlbGVtZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxBbmNob3JFbGVtZW50XCI6IFtcbiAgICAgICAgXCJhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxBcHBsZXRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJhcHBsZXRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEFyZWFFbGVtZW50XCI6IFtcbiAgICAgICAgXCJhcmVhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxBdHRhY2htZW50RWxlbWVudFwiOiBbXG4gICAgICAgIFwiYXR0YWNobWVudFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQXVkaW9FbGVtZW50XCI6IFtcbiAgICAgICAgXCJhdWRpb1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQlJFbGVtZW50XCI6IFtcbiAgICAgICAgXCJiclwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQmFzZUVsZW1lbnRcIjogW1xuICAgICAgICBcImJhc2VcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEJvZHlFbGVtZW50XCI6IFtcbiAgICAgICAgXCJib2R5XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxCdXR0b25FbGVtZW50XCI6IFtcbiAgICAgICAgXCJidXR0b25cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTENhbnZhc0VsZW1lbnRcIjogW1xuICAgICAgICBcImNhbnZhc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MQ29udGVudEVsZW1lbnRcIjogW1xuICAgICAgICBcImNvbnRlbnRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERMaXN0RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGxcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERhdGFFbGVtZW50XCI6IFtcbiAgICAgICAgXCJkYXRhXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEYXRhTGlzdEVsZW1lbnRcIjogW1xuICAgICAgICBcImRhdGFsaXN0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEZXRhaWxzRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGV0YWlsc1wiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRGlhbG9nRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGlhbG9nXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEaXJlY3RvcnlFbGVtZW50XCI6IFtcbiAgICAgICAgXCJkaXJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTERpdkVsZW1lbnRcIjogW1xuICAgICAgICBcImRpdlwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRG9jdW1lbnRcIjogW1xuICAgICAgICBcImRvY3VtZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxFbGVtZW50XCI6IFtcbiAgICAgICAgXCJlbGVtZW50XCIsXG4gICAgICAgIFwiYWJiclwiLFxuICAgICAgICBcImFkZHJlc3NcIixcbiAgICAgICAgXCJhcnRpY2xlXCIsXG4gICAgICAgIFwiYXNpZGVcIixcbiAgICAgICAgXCJiXCIsXG4gICAgICAgIFwiYmRpXCIsXG4gICAgICAgIFwiYmRvXCIsXG4gICAgICAgIFwiY2l0ZVwiLFxuICAgICAgICBcImNvZGVcIixcbiAgICAgICAgXCJjb21tYW5kXCIsXG4gICAgICAgIFwiZGRcIixcbiAgICAgICAgXCJkZm5cIixcbiAgICAgICAgXCJkdFwiLFxuICAgICAgICBcImVtXCIsXG4gICAgICAgIFwiZmlnY2FwdGlvblwiLFxuICAgICAgICBcImZpZ3VyZVwiLFxuICAgICAgICBcImZvb3RlclwiLFxuICAgICAgICBcImhlYWRlclwiLFxuICAgICAgICBcImlcIixcbiAgICAgICAgXCJrYmRcIixcbiAgICAgICAgXCJtYXJrXCIsXG4gICAgICAgIFwibmF2XCIsXG4gICAgICAgIFwibm9zY3JpcHRcIixcbiAgICAgICAgXCJycFwiLFxuICAgICAgICBcInJ0XCIsXG4gICAgICAgIFwicnVieVwiLFxuICAgICAgICBcInNcIixcbiAgICAgICAgXCJzYW1wXCIsXG4gICAgICAgIFwic2VjdGlvblwiLFxuICAgICAgICBcInNtYWxsXCIsXG4gICAgICAgIFwic3Ryb25nXCIsXG4gICAgICAgIFwic3ViXCIsXG4gICAgICAgIFwic3VtbWFyeVwiLFxuICAgICAgICBcInN1cFwiLFxuICAgICAgICBcInVcIixcbiAgICAgICAgXCJ2YXJcIixcbiAgICAgICAgXCJ3YnJcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEVtYmVkRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZW1iZWRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZpZWxkU2V0RWxlbWVudFwiOiBbXG4gICAgICAgIFwiZmllbGRzZXRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEZvbnRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJmb250XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxGb3JtRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZm9ybVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRnJhbWVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJmcmFtZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MRnJhbWVTZXRFbGVtZW50XCI6IFtcbiAgICAgICAgXCJmcmFtZXNldFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MSFJFbGVtZW50XCI6IFtcbiAgICAgICAgXCJoclwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MSGVhZEVsZW1lbnRcIjogW1xuICAgICAgICBcImhlYWRcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEhlYWRpbmdFbGVtZW50XCI6IFtcbiAgICAgICAgXCJoMVwiLFxuICAgICAgICBcImgyXCIsXG4gICAgICAgIFwiaDNcIixcbiAgICAgICAgXCJoNFwiLFxuICAgICAgICBcImg1XCIsXG4gICAgICAgIFwiaDZcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEh0bWxFbGVtZW50XCI6IFtcbiAgICAgICAgXCJodG1sXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxJRnJhbWVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJpZnJhbWVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTEltYWdlRWxlbWVudFwiOiBbXG4gICAgICAgIFwiaW1nXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxJbnB1dEVsZW1lbnRcIjogW1xuICAgICAgICBcImlucHV0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxLZXlnZW5FbGVtZW50XCI6IFtcbiAgICAgICAgXCJrZXlnZW5cIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTExJRWxlbWVudFwiOiBbXG4gICAgICAgIFwibGlcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTExhYmVsRWxlbWVudFwiOiBbXG4gICAgICAgIFwibGFiZWxcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTExlZ2VuZEVsZW1lbnRcIjogW1xuICAgICAgICBcImxlZ2VuZFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTGlua0VsZW1lbnRcIjogW1xuICAgICAgICBcImxpbmtcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1hcEVsZW1lbnRcIjogW1xuICAgICAgICBcIm1hcFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTWFycXVlZUVsZW1lbnRcIjogW1xuICAgICAgICBcIm1hcnF1ZWVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1lZGlhRWxlbWVudFwiOiBbXG4gICAgICAgIFwibWVkaWFcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE1lbnVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJtZW51XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNZW51SXRlbUVsZW1lbnRcIjogW1xuICAgICAgICBcIm1lbnVpdGVtXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxNZXRhRWxlbWVudFwiOiBbXG4gICAgICAgIFwibWV0YVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTWV0ZXJFbGVtZW50XCI6IFtcbiAgICAgICAgXCJtZXRlclwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MTW9kRWxlbWVudFwiOiBbXG4gICAgICAgIFwiZGVsXCIsXG4gICAgICAgIFwiaW5zXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPTGlzdEVsZW1lbnRcIjogW1xuICAgICAgICBcIm9sXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxPYmplY3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJvYmplY3RcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE9wdEdyb3VwRWxlbWVudFwiOiBbXG4gICAgICAgIFwib3B0Z3JvdXBcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTE9wdGlvbkVsZW1lbnRcIjogW1xuICAgICAgICBcIm9wdGlvblwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MT3V0cHV0RWxlbWVudFwiOiBbXG4gICAgICAgIFwib3V0cHV0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxQYXJhZ3JhcGhFbGVtZW50XCI6IFtcbiAgICAgICAgXCJwXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxQYXJhbUVsZW1lbnRcIjogW1xuICAgICAgICBcInBhcmFtXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxQaWN0dXJlRWxlbWVudFwiOiBbXG4gICAgICAgIFwicGljdHVyZVwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MUHJlRWxlbWVudFwiOiBbXG4gICAgICAgIFwicHJlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxQcm9ncmVzc0VsZW1lbnRcIjogW1xuICAgICAgICBcInByb2dyZXNzXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxRdW90ZUVsZW1lbnRcIjogW1xuICAgICAgICBcImJsb2NrcXVvdGVcIixcbiAgICAgICAgXCJxXCIsXG4gICAgICAgIFwicXVvdGVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFNjcmlwdEVsZW1lbnRcIjogW1xuICAgICAgICBcInNjcmlwdFwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MU2VsZWN0RWxlbWVudFwiOiBbXG4gICAgICAgIFwic2VsZWN0XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTaGFkb3dFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzaGFkb3dcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFNsb3RFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzbG90XCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTb3VyY2VFbGVtZW50XCI6IFtcbiAgICAgICAgXCJzb3VyY2VcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFNwYW5FbGVtZW50XCI6IFtcbiAgICAgICAgXCJzcGFuXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxTdHlsZUVsZW1lbnRcIjogW1xuICAgICAgICBcInN0eWxlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZUNhcHRpb25FbGVtZW50XCI6IFtcbiAgICAgICAgXCJjYXB0aW9uXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZUNlbGxFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0ZFwiLFxuICAgICAgICBcInRoXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZUNvbEVsZW1lbnRcIjogW1xuICAgICAgICBcImNvbFwiLFxuICAgICAgICBcImNvbGdyb3VwXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZUVsZW1lbnRcIjogW1xuICAgICAgICBcInRhYmxlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZVJvd0VsZW1lbnRcIjogW1xuICAgICAgICBcInRyXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0aGVhZFwiLFxuICAgICAgICBcInRib2R5XCIsXG4gICAgICAgIFwidGZvb3RcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFRlbXBsYXRlRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGVtcGxhdGVcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFRleHRBcmVhRWxlbWVudFwiOiBbXG4gICAgICAgIFwidGV4dGFyZWFcIlxuICAgICAgXSxcbiAgICAgIFwiSFRNTFRpbWVFbGVtZW50XCI6IFtcbiAgICAgICAgXCJ0aW1lXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUaXRsZUVsZW1lbnRcIjogW1xuICAgICAgICBcInRpdGxlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxUcmFja0VsZW1lbnRcIjogW1xuICAgICAgICBcInRyYWNrXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxVTGlzdEVsZW1lbnRcIjogW1xuICAgICAgICBcInVsXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxVbmtub3duRWxlbWVudFwiOiBbXG4gICAgICAgIFwidW5rbm93blwiLFxuICAgICAgICBcInZoZ3JvdXB2XCIsXG4gICAgICAgIFwidmtleWdlblwiXG4gICAgICBdLFxuICAgICAgXCJIVE1MVmlkZW9FbGVtZW50XCI6IFtcbiAgICAgICAgXCJ2aWRlb1wiXG4gICAgICBdXG4gICAgfSxcbiAgICBcIm5vZGVzXCI6IHtcbiAgICAgIFwiQXR0clwiOiBbXG4gICAgICAgIFwibm9kZVwiXG4gICAgICBdLFxuICAgICAgXCJBdWRpb1wiOiBbXG4gICAgICAgIFwiYXVkaW9cIlxuICAgICAgXSxcbiAgICAgIFwiQ0RBVEFTZWN0aW9uXCI6IFtcbiAgICAgICAgXCJub2RlXCJcbiAgICAgIF0sXG4gICAgICBcIkNoYXJhY3RlckRhdGFcIjogW1xuICAgICAgICBcIm5vZGVcIlxuICAgICAgXSxcbiAgICAgIFwiQ29tbWVudFwiOiBbXG4gICAgICAgIFwiI2NvbW1lbnRcIlxuICAgICAgXSxcbiAgICAgIFwiRG9jdW1lbnRcIjogW1xuICAgICAgICBcIiNkb2N1bWVudFwiXG4gICAgICBdLFxuICAgICAgXCJEb2N1bWVudEZyYWdtZW50XCI6IFtcbiAgICAgICAgXCIjZG9jdW1lbnQtZnJhZ21lbnRcIlxuICAgICAgXSxcbiAgICAgIFwiRG9jdW1lbnRUeXBlXCI6IFtcbiAgICAgICAgXCJub2RlXCJcbiAgICAgIF0sXG4gICAgICBcIkhUTUxEb2N1bWVudFwiOiBbXG4gICAgICAgIFwiI2RvY3VtZW50XCJcbiAgICAgIF0sXG4gICAgICBcIkltYWdlXCI6IFtcbiAgICAgICAgXCJpbWdcIlxuICAgICAgXSxcbiAgICAgIFwiT3B0aW9uXCI6IFtcbiAgICAgICAgXCJvcHRpb25cIlxuICAgICAgXSxcbiAgICAgIFwiUHJvY2Vzc2luZ0luc3RydWN0aW9uXCI6IFtcbiAgICAgICAgXCJub2RlXCJcbiAgICAgIF0sXG4gICAgICBcIlNoYWRvd1Jvb3RcIjogW1xuICAgICAgICBcIiNzaGFkb3ctcm9vdFwiXG4gICAgICBdLFxuICAgICAgXCJUZXh0XCI6IFtcbiAgICAgICAgXCIjdGV4dFwiXG4gICAgICBdLFxuICAgICAgXCJYTUxEb2N1bWVudFwiOiBbXG4gICAgICAgIFwieG1sXCJcbiAgICAgIF1cbiAgICB9XG4gIH0pKTtcbiAgXG4gIFxuICAgIFxuICAvLyBwYXNzZWQgYXQgcnVudGltZSwgY29uZmlndXJhYmxlXG4gIC8vIHZpYSBub2RlanMgbW9kdWxlXG4gIGlmICghcG9seWZpbGwpIHBvbHlmaWxsID0gJ2F1dG8nO1xuICBcbiAgdmFyXG4gICAgLy8gVjAgcG9seWZpbGwgZW50cnlcbiAgICBSRUdJU1RFUl9FTEVNRU5UID0gJ3JlZ2lzdGVyRWxlbWVudCcsXG4gIFxuICAgIC8vIElFIDwgMTEgb25seSArIG9sZCBXZWJLaXQgZm9yIGF0dHJpYnV0ZXMgKyBmZWF0dXJlIGRldGVjdGlvblxuICAgIEVYUEFORE9fVUlEID0gJ19fJyArIFJFR0lTVEVSX0VMRU1FTlQgKyAod2luZG93Lk1hdGgucmFuZG9tKCkgKiAxMGU0ID4+IDApLFxuICBcbiAgICAvLyBzaG9ydGN1dHMgYW5kIGNvc3RhbnRzXG4gICAgQUREX0VWRU5UX0xJU1RFTkVSID0gJ2FkZEV2ZW50TGlzdGVuZXInLFxuICAgIEFUVEFDSEVEID0gJ2F0dGFjaGVkJyxcbiAgICBDQUxMQkFDSyA9ICdDYWxsYmFjaycsXG4gICAgREVUQUNIRUQgPSAnZGV0YWNoZWQnLFxuICAgIEVYVEVORFMgPSAnZXh0ZW5kcycsXG4gIFxuICAgIEFUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLID0gJ2F0dHJpYnV0ZUNoYW5nZWQnICsgQ0FMTEJBQ0ssXG4gICAgQVRUQUNIRURfQ0FMTEJBQ0sgPSBBVFRBQ0hFRCArIENBTExCQUNLLFxuICAgIENPTk5FQ1RFRF9DQUxMQkFDSyA9ICdjb25uZWN0ZWQnICsgQ0FMTEJBQ0ssXG4gICAgRElTQ09OTkVDVEVEX0NBTExCQUNLID0gJ2Rpc2Nvbm5lY3RlZCcgKyBDQUxMQkFDSyxcbiAgICBDUkVBVEVEX0NBTExCQUNLID0gJ2NyZWF0ZWQnICsgQ0FMTEJBQ0ssXG4gICAgREVUQUNIRURfQ0FMTEJBQ0sgPSBERVRBQ0hFRCArIENBTExCQUNLLFxuICBcbiAgICBBRERJVElPTiA9ICdBRERJVElPTicsXG4gICAgTU9ESUZJQ0FUSU9OID0gJ01PRElGSUNBVElPTicsXG4gICAgUkVNT1ZBTCA9ICdSRU1PVkFMJyxcbiAgXG4gICAgRE9NX0FUVFJfTU9ESUZJRUQgPSAnRE9NQXR0ck1vZGlmaWVkJyxcbiAgICBET01fQ09OVEVOVF9MT0FERUQgPSAnRE9NQ29udGVudExvYWRlZCcsXG4gICAgRE9NX1NVQlRSRUVfTU9ESUZJRUQgPSAnRE9NU3VidHJlZU1vZGlmaWVkJyxcbiAgXG4gICAgUFJFRklYX1RBRyA9ICc8JyxcbiAgICBQUkVGSVhfSVMgPSAnPScsXG4gIFxuICAgIC8vIHZhbGlkIGFuZCBpbnZhbGlkIG5vZGUgbmFtZXNcbiAgICB2YWxpZE5hbWUgPSAvXltBLVpdW0EtWjAtOV0qKD86LVtBLVowLTldKykrJC8sXG4gICAgaW52YWxpZE5hbWVzID0gW1xuICAgICAgJ0FOTk9UQVRJT04tWE1MJyxcbiAgICAgICdDT0xPUi1QUk9GSUxFJyxcbiAgICAgICdGT05ULUZBQ0UnLFxuICAgICAgJ0ZPTlQtRkFDRS1TUkMnLFxuICAgICAgJ0ZPTlQtRkFDRS1VUkknLFxuICAgICAgJ0ZPTlQtRkFDRS1GT1JNQVQnLFxuICAgICAgJ0ZPTlQtRkFDRS1OQU1FJyxcbiAgICAgICdNSVNTSU5HLUdMWVBIJ1xuICAgIF0sXG4gIFxuICAgIC8vIHJlZ2lzdGVyZWQgdHlwZXMgYW5kIHRoZWlyIHByb3RvdHlwZXNcbiAgICB0eXBlcyA9IFtdLFxuICAgIHByb3RvcyA9IFtdLFxuICBcbiAgICAvLyB0byBxdWVyeSBzdWJub2Rlc1xuICAgIHF1ZXJ5ID0gJycsXG4gIFxuICAgIC8vIGh0bWwgc2hvcnRjdXQgdXNlZCB0byBmZWF0dXJlIGRldGVjdFxuICAgIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcbiAgXG4gICAgLy8gRVM1IGlubGluZSBoZWxwZXJzIHx8IGJhc2ljIHBhdGNoZXNcbiAgICBpbmRleE9mID0gdHlwZXMuaW5kZXhPZiB8fCBmdW5jdGlvbiAodikge1xuICAgICAgZm9yKHZhciBpID0gdGhpcy5sZW5ndGg7IGktLSAmJiB0aGlzW2ldICE9PSB2Oyl7fVxuICAgICAgcmV0dXJuIGk7XG4gICAgfSxcbiAgXG4gICAgLy8gb3RoZXIgaGVscGVycyAvIHNob3J0Y3V0c1xuICAgIE9QID0gT2JqZWN0LnByb3RvdHlwZSxcbiAgICBoT1AgPSBPUC5oYXNPd25Qcm9wZXJ0eSxcbiAgICBpUE8gPSBPUC5pc1Byb3RvdHlwZU9mLFxuICBcbiAgICBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSxcbiAgICBlbXB0eSA9IFtdLFxuICAgIGdPUEQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFxuICAgIGdPUE4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyxcbiAgICBnUE8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YsXG4gICAgc1BPID0gT2JqZWN0LnNldFByb3RvdHlwZU9mLFxuICBcbiAgICAvLyBqc2hpbnQgcHJvdG86IHRydWVcbiAgICBoYXNQcm90byA9ICEhT2JqZWN0Ll9fcHJvdG9fXyxcbiAgXG4gICAgLy8gVjEgaGVscGVyc1xuICAgIGZpeEdldENsYXNzID0gZmFsc2UsXG4gICAgRFJFQ0VWMSA9ICdfX2RyZUNFdjEnLFxuICAgIGN1c3RvbUVsZW1lbnRzID0gd2luZG93LmN1c3RvbUVsZW1lbnRzLFxuICAgIHVzYWJsZUN1c3RvbUVsZW1lbnRzID0gcG9seWZpbGwgIT09ICdmb3JjZScgJiYgISEoXG4gICAgICBjdXN0b21FbGVtZW50cyAmJlxuICAgICAgY3VzdG9tRWxlbWVudHMuZGVmaW5lICYmXG4gICAgICBjdXN0b21FbGVtZW50cy5nZXQgJiZcbiAgICAgIGN1c3RvbUVsZW1lbnRzLndoZW5EZWZpbmVkXG4gICAgKSxcbiAgICBEaWN0ID0gT2JqZWN0LmNyZWF0ZSB8fCBPYmplY3QsXG4gICAgTWFwID0gd2luZG93Lk1hcCB8fCBmdW5jdGlvbiBNYXAoKSB7XG4gICAgICB2YXIgSyA9IFtdLCBWID0gW10sIGk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgICAgcmV0dXJuIFZbaW5kZXhPZi5jYWxsKEssIGspXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoaywgdikge1xuICAgICAgICAgIGkgPSBpbmRleE9mLmNhbGwoSywgayk7XG4gICAgICAgICAgaWYgKGkgPCAwKSBWW0sucHVzaChrKSAtIDFdID0gdjtcbiAgICAgICAgICBlbHNlIFZbaV0gPSB2O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgUHJvbWlzZSA9IHdpbmRvdy5Qcm9taXNlIHx8IGZ1bmN0aW9uIChmbikge1xuICAgICAgdmFyXG4gICAgICAgIG5vdGlmeSA9IFtdLFxuICAgICAgICBkb25lID0gZmFsc2UsXG4gICAgICAgIHAgPSB7XG4gICAgICAgICAgJ2NhdGNoJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgfSxcbiAgICAgICAgICAndGhlbic6IGZ1bmN0aW9uIChjYikge1xuICAgICAgICAgICAgbm90aWZ5LnB1c2goY2IpO1xuICAgICAgICAgICAgaWYgKGRvbmUpIHNldFRpbWVvdXQocmVzb2x2ZSwgMSk7XG4gICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIDtcbiAgICAgIGZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICAgIHdoaWxlIChub3RpZnkubGVuZ3RoKSBub3RpZnkuc2hpZnQoKSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICBmbihyZXNvbHZlKTtcbiAgICAgIHJldHVybiBwO1xuICAgIH0sXG4gICAganVzdENyZWF0ZWQgPSBmYWxzZSxcbiAgICBjb25zdHJ1Y3RvcnMgPSBEaWN0KG51bGwpLFxuICAgIHdhaXRpbmdMaXN0ID0gRGljdChudWxsKSxcbiAgICBub2RlTmFtZXMgPSBuZXcgTWFwKCksXG4gICAgc2Vjb25kQXJndW1lbnQgPSBmdW5jdGlvbiAoaXMpIHtcbiAgICAgIHJldHVybiBpcy50b0xvd2VyQ2FzZSgpO1xuICAgIH0sXG4gIFxuICAgIC8vIHVzZWQgdG8gY3JlYXRlIHVuaXF1ZSBpbnN0YW5jZXNcbiAgICBjcmVhdGUgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIEJyaWRnZShwcm90bykge1xuICAgICAgLy8gc2lsbHkgYnJva2VuIHBvbHlmaWxsIHByb2JhYmx5IGV2ZXIgdXNlZCBidXQgc2hvcnQgZW5vdWdoIHRvIHdvcmtcbiAgICAgIHJldHVybiBwcm90byA/ICgoQnJpZGdlLnByb3RvdHlwZSA9IHByb3RvKSwgbmV3IEJyaWRnZSgpKSA6IHRoaXM7XG4gICAgfSxcbiAgXG4gICAgLy8gd2lsbCBzZXQgdGhlIHByb3RvdHlwZSBpZiBwb3NzaWJsZVxuICAgIC8vIG9yIGNvcHkgb3ZlciBhbGwgcHJvcGVydGllc1xuICAgIHNldFByb3RvdHlwZSA9IHNQTyB8fCAoXG4gICAgICBoYXNQcm90byA/XG4gICAgICAgIGZ1bmN0aW9uIChvLCBwKSB7XG4gICAgICAgICAgby5fX3Byb3RvX18gPSBwO1xuICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICB9IDogKFxuICAgICAgKGdPUE4gJiYgZ09QRCkgP1xuICAgICAgICAoZnVuY3Rpb24oKXtcbiAgICAgICAgICBmdW5jdGlvbiBzZXRQcm9wZXJ0aWVzKG8sIHApIHtcbiAgICAgICAgICAgIGZvciAodmFyXG4gICAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgICAgbmFtZXMgPSBnT1BOKHApLFxuICAgICAgICAgICAgICBpID0gMCwgbGVuZ3RoID0gbmFtZXMubGVuZ3RoO1xuICAgICAgICAgICAgICBpIDwgbGVuZ3RoOyBpKytcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBrZXkgPSBuYW1lc1tpXTtcbiAgICAgICAgICAgICAgaWYgKCFoT1AuY2FsbChvLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgZGVmaW5lUHJvcGVydHkobywga2V5LCBnT1BEKHAsIGtleSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAobywgcCkge1xuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICBzZXRQcm9wZXJ0aWVzKG8sIHApO1xuICAgICAgICAgICAgfSB3aGlsZSAoKHAgPSBnUE8ocCkpICYmICFpUE8uY2FsbChwLCBvKSk7XG4gICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICB9O1xuICAgICAgICB9KCkpIDpcbiAgICAgICAgZnVuY3Rpb24gKG8sIHApIHtcbiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcCkge1xuICAgICAgICAgICAgb1trZXldID0gcFtrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfVxuICAgICkpLFxuICBcbiAgICAvLyBET00gc2hvcnRjdXRzIGFuZCBoZWxwZXJzLCBpZiBhbnlcbiAgXG4gICAgTXV0YXRpb25PYnNlcnZlciA9IHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyIHx8XG4gICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5XZWJLaXRNdXRhdGlvbk9ic2VydmVyLFxuICBcbiAgICBIVE1MRWxlbWVudFByb3RvdHlwZSA9IChcbiAgICAgIHdpbmRvdy5IVE1MRWxlbWVudCB8fFxuICAgICAgd2luZG93LkVsZW1lbnQgfHxcbiAgICAgIHdpbmRvdy5Ob2RlXG4gICAgKS5wcm90b3R5cGUsXG4gIFxuICAgIElFOCA9ICFpUE8uY2FsbChIVE1MRWxlbWVudFByb3RvdHlwZSwgZG9jdW1lbnRFbGVtZW50KSxcbiAgXG4gICAgc2FmZVByb3BlcnR5ID0gSUU4ID8gZnVuY3Rpb24gKG8sIGssIGQpIHtcbiAgICAgIG9ba10gPSBkLnZhbHVlO1xuICAgICAgcmV0dXJuIG87XG4gICAgfSA6IGRlZmluZVByb3BlcnR5LFxuICBcbiAgICBpc1ZhbGlkTm9kZSA9IElFOCA/XG4gICAgICBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5ub2RlVHlwZSA9PT0gMTtcbiAgICAgIH0gOlxuICAgICAgZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIGlQTy5jYWxsKEhUTUxFbGVtZW50UHJvdG90eXBlLCBub2RlKTtcbiAgICAgIH0sXG4gIFxuICAgIHRhcmdldHMgPSBJRTggJiYgW10sXG4gIFxuICAgIGF0dGFjaFNoYWRvdyA9IEhUTUxFbGVtZW50UHJvdG90eXBlLmF0dGFjaFNoYWRvdyxcbiAgICBjbG9uZU5vZGUgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5jbG9uZU5vZGUsXG4gICAgZGlzcGF0Y2hFdmVudCA9IEhUTUxFbGVtZW50UHJvdG90eXBlLmRpc3BhdGNoRXZlbnQsXG4gICAgZ2V0QXR0cmlidXRlID0gSFRNTEVsZW1lbnRQcm90b3R5cGUuZ2V0QXR0cmlidXRlLFxuICAgIGhhc0F0dHJpYnV0ZSA9IEhUTUxFbGVtZW50UHJvdG90eXBlLmhhc0F0dHJpYnV0ZSxcbiAgICByZW1vdmVBdHRyaWJ1dGUgPSBIVE1MRWxlbWVudFByb3RvdHlwZS5yZW1vdmVBdHRyaWJ1dGUsXG4gICAgc2V0QXR0cmlidXRlID0gSFRNTEVsZW1lbnRQcm90b3R5cGUuc2V0QXR0cmlidXRlLFxuICBcbiAgICAvLyByZXBsYWNlZCBsYXRlciBvblxuICAgIGNyZWF0ZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50LFxuICAgIHBhdGNoZWRDcmVhdGVFbGVtZW50ID0gY3JlYXRlRWxlbWVudCxcbiAgXG4gICAgLy8gc2hhcmVkIG9ic2VydmVyIGZvciBhbGwgYXR0cmlidXRlc1xuICAgIGF0dHJpYnV0ZXNPYnNlcnZlciA9IE11dGF0aW9uT2JzZXJ2ZXIgJiYge1xuICAgICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXG4gICAgICBhdHRyaWJ1dGVPbGRWYWx1ZTogdHJ1ZVxuICAgIH0sXG4gIFxuICAgIC8vIHVzZWZ1bCB0byBkZXRlY3Qgb25seSBpZiB0aGVyZSdzIG5vIE11dGF0aW9uT2JzZXJ2ZXJcbiAgICBET01BdHRyTW9kaWZpZWQgPSBNdXRhdGlvbk9ic2VydmVyIHx8IGZ1bmN0aW9uKGUpIHtcbiAgICAgIGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkID0gZmFsc2U7XG4gICAgICBkb2N1bWVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgRE9NX0FUVFJfTU9ESUZJRUQsXG4gICAgICAgIERPTUF0dHJNb2RpZmllZFxuICAgICAgKTtcbiAgICB9LFxuICBcbiAgICAvLyB3aWxsIGJvdGggYmUgdXNlZCB0byBtYWtlIERPTU5vZGVJbnNlcnRlZCBhc3luY2hyb25vdXNcbiAgICBhc2FwUXVldWUsXG4gICAgYXNhcFRpbWVyID0gMCxcbiAgXG4gICAgLy8gaW50ZXJuYWwgZmxhZ3NcbiAgICBWMCA9IFJFR0lTVEVSX0VMRU1FTlQgaW4gZG9jdW1lbnQsXG4gICAgc2V0TGlzdGVuZXIgPSB0cnVlLFxuICAgIGp1c3RTZXR1cCA9IGZhbHNlLFxuICAgIGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkID0gdHJ1ZSxcbiAgICBkcm9wRG9tQ29udGVudExvYWRlZCA9IHRydWUsXG4gIFxuICAgIC8vIG5lZWRlZCBmb3IgdGhlIGlubmVySFRNTCBoZWxwZXJcbiAgICBub3RGcm9tSW5uZXJIVE1MSGVscGVyID0gdHJ1ZSxcbiAgXG4gICAgLy8gb3B0aW9uYWxseSBkZWZpbmVkIGxhdGVyIG9uXG4gICAgb25TdWJ0cmVlTW9kaWZpZWQsXG4gICAgY2FsbERPTUF0dHJNb2RpZmllZCxcbiAgICBnZXRBdHRyaWJ1dGVzTWlycm9yLFxuICAgIG9ic2VydmVyLFxuICAgIG9ic2VydmUsXG4gIFxuICAgIC8vIGJhc2VkIG9uIHNldHRpbmcgcHJvdG90eXBlIGNhcGFiaWxpdHlcbiAgICAvLyB3aWxsIGNoZWNrIHByb3RvIG9yIHRoZSBleHBhbmRvIGF0dHJpYnV0ZVxuICAgIC8vIGluIG9yZGVyIHRvIHNldHVwIHRoZSBub2RlIG9uY2VcbiAgICBwYXRjaElmTm90QWxyZWFkeSxcbiAgICBwYXRjaFxuICA7XG4gIFxuICAvLyBvbmx5IGlmIG5lZWRlZFxuICBpZiAoIVYwKSB7XG4gIFxuICAgIGlmIChzUE8gfHwgaGFzUHJvdG8pIHtcbiAgICAgICAgcGF0Y2hJZk5vdEFscmVhZHkgPSBmdW5jdGlvbiAobm9kZSwgcHJvdG8pIHtcbiAgICAgICAgICBpZiAoIWlQTy5jYWxsKHByb3RvLCBub2RlKSkge1xuICAgICAgICAgICAgc2V0dXBOb2RlKG5vZGUsIHByb3RvKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHBhdGNoID0gc2V0dXBOb2RlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHBhdGNoSWZOb3RBbHJlYWR5ID0gZnVuY3Rpb24gKG5vZGUsIHByb3RvKSB7XG4gICAgICAgICAgaWYgKCFub2RlW0VYUEFORE9fVUlEXSkge1xuICAgICAgICAgICAgbm9kZVtFWFBBTkRPX1VJRF0gPSBPYmplY3QodHJ1ZSk7XG4gICAgICAgICAgICBzZXR1cE5vZGUobm9kZSwgcHJvdG8pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcGF0Y2ggPSBwYXRjaElmTm90QWxyZWFkeTtcbiAgICB9XG4gIFxuICAgIGlmIChJRTgpIHtcbiAgICAgIGRvZXNOb3RTdXBwb3J0RE9NQXR0ck1vZGlmaWVkID0gZmFsc2U7XG4gICAgICAoZnVuY3Rpb24gKCl7XG4gICAgICAgIHZhclxuICAgICAgICAgIGRlc2NyaXB0b3IgPSBnT1BEKEhUTUxFbGVtZW50UHJvdG90eXBlLCBBRERfRVZFTlRfTElTVEVORVIpLFxuICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIgPSBkZXNjcmlwdG9yLnZhbHVlLFxuICAgICAgICAgIHBhdGNoZWRSZW1vdmVBdHRyaWJ1dGUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgdmFyIGUgPSBuZXcgQ3VzdG9tRXZlbnQoRE9NX0FUVFJfTU9ESUZJRUQsIHtidWJibGVzOiB0cnVlfSk7XG4gICAgICAgICAgICBlLmF0dHJOYW1lID0gbmFtZTtcbiAgICAgICAgICAgIGUucHJldlZhbHVlID0gZ2V0QXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSk7XG4gICAgICAgICAgICBlLm5ld1ZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIGVbUkVNT1ZBTF0gPSBlLmF0dHJDaGFuZ2UgPSAyO1xuICAgICAgICAgICAgcmVtb3ZlQXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSk7XG4gICAgICAgICAgICBkaXNwYXRjaEV2ZW50LmNhbGwodGhpcywgZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYXRjaGVkU2V0QXR0cmlidXRlID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXJcbiAgICAgICAgICAgICAgaGFkID0gaGFzQXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSksXG4gICAgICAgICAgICAgIG9sZCA9IGhhZCAmJiBnZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLCBuYW1lKSxcbiAgICAgICAgICAgICAgZSA9IG5ldyBDdXN0b21FdmVudChET01fQVRUUl9NT0RJRklFRCwge2J1YmJsZXM6IHRydWV9KVxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgc2V0QXR0cmlidXRlLmNhbGwodGhpcywgbmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgZS5hdHRyTmFtZSA9IG5hbWU7XG4gICAgICAgICAgICBlLnByZXZWYWx1ZSA9IGhhZCA/IG9sZCA6IG51bGw7XG4gICAgICAgICAgICBlLm5ld1ZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICBpZiAoaGFkKSB7XG4gICAgICAgICAgICAgIGVbTU9ESUZJQ0FUSU9OXSA9IGUuYXR0ckNoYW5nZSA9IDE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBlW0FERElUSU9OXSA9IGUuYXR0ckNoYW5nZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXNwYXRjaEV2ZW50LmNhbGwodGhpcywgZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBvblByb3BlcnR5Q2hhbmdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIGpzaGludCBlcW51bGw6dHJ1ZVxuICAgICAgICAgICAgdmFyXG4gICAgICAgICAgICAgIG5vZGUgPSBlLmN1cnJlbnRUYXJnZXQsXG4gICAgICAgICAgICAgIHN1cGVyU2VjcmV0ID0gbm9kZVtFWFBBTkRPX1VJRF0sXG4gICAgICAgICAgICAgIHByb3BlcnR5TmFtZSA9IGUucHJvcGVydHlOYW1lLFxuICAgICAgICAgICAgICBldmVudFxuICAgICAgICAgICAgO1xuICAgICAgICAgICAgaWYgKHN1cGVyU2VjcmV0Lmhhc093blByb3BlcnR5KHByb3BlcnR5TmFtZSkpIHtcbiAgICAgICAgICAgICAgc3VwZXJTZWNyZXQgPSBzdXBlclNlY3JldFtwcm9wZXJ0eU5hbWVdO1xuICAgICAgICAgICAgICBldmVudCA9IG5ldyBDdXN0b21FdmVudChET01fQVRUUl9NT0RJRklFRCwge2J1YmJsZXM6IHRydWV9KTtcbiAgICAgICAgICAgICAgZXZlbnQuYXR0ck5hbWUgPSBzdXBlclNlY3JldC5uYW1lO1xuICAgICAgICAgICAgICBldmVudC5wcmV2VmFsdWUgPSBzdXBlclNlY3JldC52YWx1ZSB8fCBudWxsO1xuICAgICAgICAgICAgICBldmVudC5uZXdWYWx1ZSA9IChzdXBlclNlY3JldC52YWx1ZSA9IG5vZGVbcHJvcGVydHlOYW1lXSB8fCBudWxsKTtcbiAgICAgICAgICAgICAgaWYgKGV2ZW50LnByZXZWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRbQURESVRJT05dID0gZXZlbnQuYXR0ckNoYW5nZSA9IDA7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXZlbnRbTU9ESUZJQ0FUSU9OXSA9IGV2ZW50LmF0dHJDaGFuZ2UgPSAxO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRpc3BhdGNoRXZlbnQuY2FsbChub2RlLCBldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICA7XG4gICAgICAgIGRlc2NyaXB0b3IudmFsdWUgPSBmdW5jdGlvbiAodHlwZSwgaGFuZGxlciwgY2FwdHVyZSkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHR5cGUgPT09IERPTV9BVFRSX01PRElGSUVEICYmXG4gICAgICAgICAgICB0aGlzW0FUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLXSAmJlxuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUgIT09IHBhdGNoZWRTZXRBdHRyaWJ1dGVcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXNbRVhQQU5ET19VSURdID0ge1xuICAgICAgICAgICAgICBjbGFzc05hbWU6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnY2xhc3MnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmNsYXNzTmFtZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUgPSBwYXRjaGVkU2V0QXR0cmlidXRlO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUgPSBwYXRjaGVkUmVtb3ZlQXR0cmlidXRlO1xuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lci5jYWxsKHRoaXMsICdwcm9wZXJ0eWNoYW5nZScsIG9uUHJvcGVydHlDaGFuZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBhZGRFdmVudExpc3RlbmVyLmNhbGwodGhpcywgdHlwZSwgaGFuZGxlciwgY2FwdHVyZSk7XG4gICAgICAgIH07XG4gICAgICAgIGRlZmluZVByb3BlcnR5KEhUTUxFbGVtZW50UHJvdG90eXBlLCBBRERfRVZFTlRfTElTVEVORVIsIGRlc2NyaXB0b3IpO1xuICAgICAgfSgpKTtcbiAgICB9IGVsc2UgaWYgKCFNdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICBkb2N1bWVudEVsZW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXShET01fQVRUUl9NT0RJRklFRCwgRE9NQXR0ck1vZGlmaWVkKTtcbiAgICAgIGRvY3VtZW50RWxlbWVudC5zZXRBdHRyaWJ1dGUoRVhQQU5ET19VSUQsIDEpO1xuICAgICAgZG9jdW1lbnRFbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShFWFBBTkRPX1VJRCk7XG4gICAgICBpZiAoZG9lc05vdFN1cHBvcnRET01BdHRyTW9kaWZpZWQpIHtcbiAgICAgICAgb25TdWJ0cmVlTW9kaWZpZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgbm9kZSA9IHRoaXMsXG4gICAgICAgICAgICBvbGRBdHRyaWJ1dGVzLFxuICAgICAgICAgICAgbmV3QXR0cmlidXRlcyxcbiAgICAgICAgICAgIGtleVxuICAgICAgICAgIDtcbiAgICAgICAgICBpZiAobm9kZSA9PT0gZS50YXJnZXQpIHtcbiAgICAgICAgICAgIG9sZEF0dHJpYnV0ZXMgPSBub2RlW0VYUEFORE9fVUlEXTtcbiAgICAgICAgICAgIG5vZGVbRVhQQU5ET19VSURdID0gKG5ld0F0dHJpYnV0ZXMgPSBnZXRBdHRyaWJ1dGVzTWlycm9yKG5vZGUpKTtcbiAgICAgICAgICAgIGZvciAoa2V5IGluIG5ld0F0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG9sZEF0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgICAgICAgLy8gYXR0cmlidXRlIHdhcyBhZGRlZFxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsRE9NQXR0ck1vZGlmaWVkKFxuICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICBvbGRBdHRyaWJ1dGVzW2tleV0sXG4gICAgICAgICAgICAgICAgICBuZXdBdHRyaWJ1dGVzW2tleV0sXG4gICAgICAgICAgICAgICAgICBBRERJVElPTlxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3QXR0cmlidXRlc1trZXldICE9PSBvbGRBdHRyaWJ1dGVzW2tleV0pIHtcbiAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGUgd2FzIGNoYW5nZWRcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FsbERPTUF0dHJNb2RpZmllZChcbiAgICAgICAgICAgICAgICAgIDEsXG4gICAgICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICAgICAgb2xkQXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgbmV3QXR0cmlidXRlc1trZXldLFxuICAgICAgICAgICAgICAgICAgTU9ESUZJQ0FUSU9OXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gY2hlY2tpbmcgaWYgaXQgaGFzIGJlZW4gcmVtb3ZlZFxuICAgICAgICAgICAgZm9yIChrZXkgaW4gb2xkQXR0cmlidXRlcykge1xuICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gbmV3QXR0cmlidXRlcykpIHtcbiAgICAgICAgICAgICAgICAvLyBhdHRyaWJ1dGUgcmVtb3ZlZFxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsRE9NQXR0ck1vZGlmaWVkKFxuICAgICAgICAgICAgICAgICAgMixcbiAgICAgICAgICAgICAgICAgIG5vZGUsXG4gICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICBvbGRBdHRyaWJ1dGVzW2tleV0sXG4gICAgICAgICAgICAgICAgICBuZXdBdHRyaWJ1dGVzW2tleV0sXG4gICAgICAgICAgICAgICAgICBSRU1PVkFMXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgY2FsbERPTUF0dHJNb2RpZmllZCA9IGZ1bmN0aW9uIChcbiAgICAgICAgICBhdHRyQ2hhbmdlLFxuICAgICAgICAgIGN1cnJlbnRUYXJnZXQsXG4gICAgICAgICAgYXR0ck5hbWUsXG4gICAgICAgICAgcHJldlZhbHVlLFxuICAgICAgICAgIG5ld1ZhbHVlLFxuICAgICAgICAgIGFjdGlvblxuICAgICAgICApIHtcbiAgICAgICAgICB2YXIgZSA9IHtcbiAgICAgICAgICAgIGF0dHJDaGFuZ2U6IGF0dHJDaGFuZ2UsXG4gICAgICAgICAgICBjdXJyZW50VGFyZ2V0OiBjdXJyZW50VGFyZ2V0LFxuICAgICAgICAgICAgYXR0ck5hbWU6IGF0dHJOYW1lLFxuICAgICAgICAgICAgcHJldlZhbHVlOiBwcmV2VmFsdWUsXG4gICAgICAgICAgICBuZXdWYWx1ZTogbmV3VmFsdWVcbiAgICAgICAgICB9O1xuICAgICAgICAgIGVbYWN0aW9uXSA9IGF0dHJDaGFuZ2U7XG4gICAgICAgICAgb25ET01BdHRyTW9kaWZpZWQoZSk7XG4gICAgICAgIH07XG4gICAgICAgIGdldEF0dHJpYnV0ZXNNaXJyb3IgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgIGZvciAodmFyXG4gICAgICAgICAgICBhdHRyLCBuYW1lLFxuICAgICAgICAgICAgcmVzdWx0ID0ge30sXG4gICAgICAgICAgICBhdHRyaWJ1dGVzID0gbm9kZS5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgaSA9IDAsIGxlbmd0aCA9IGF0dHJpYnV0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgaSA8IGxlbmd0aDsgaSsrXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBhdHRyID0gYXR0cmlidXRlc1tpXTtcbiAgICAgICAgICAgIG5hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgICAgICBpZiAobmFtZSAhPT0gJ3NldEF0dHJpYnV0ZScpIHtcbiAgICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gYXR0ci52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG4gIFxuICAgIC8vIHNldCBhcyBlbnVtZXJhYmxlLCB3cml0YWJsZSBhbmQgY29uZmlndXJhYmxlXG4gICAgZG9jdW1lbnRbUkVHSVNURVJfRUxFTUVOVF0gPSBmdW5jdGlvbiByZWdpc3RlckVsZW1lbnQodHlwZSwgb3B0aW9ucykge1xuICAgICAgdXBwZXJUeXBlID0gdHlwZS50b1VwcGVyQ2FzZSgpO1xuICAgICAgaWYgKHNldExpc3RlbmVyKSB7XG4gICAgICAgIC8vIG9ubHkgZmlyc3QgdGltZSBkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQgaXMgdXNlZFxuICAgICAgICAvLyB3ZSBuZWVkIHRvIHNldCB0aGlzIGxpc3RlbmVyXG4gICAgICAgIC8vIHNldHRpbmcgaXQgYnkgZGVmYXVsdCBtaWdodCBzbG93IGRvd24gZm9yIG5vIHJlYXNvblxuICAgICAgICBzZXRMaXN0ZW5lciA9IGZhbHNlO1xuICAgICAgICBpZiAoTXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgICAgIG9ic2VydmVyID0gKGZ1bmN0aW9uKGF0dGFjaGVkLCBkZXRhY2hlZCl7XG4gICAgICAgICAgICBmdW5jdGlvbiBjaGVja0VtQWxsKGxpc3QsIGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBsaXN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgY2FsbGJhY2sobGlzdFtpKytdKSl7fVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChyZWNvcmRzKSB7XG4gICAgICAgICAgICAgIGZvciAodmFyXG4gICAgICAgICAgICAgICAgY3VycmVudCwgbm9kZSwgbmV3VmFsdWUsXG4gICAgICAgICAgICAgICAgaSA9IDAsIGxlbmd0aCA9IHJlY29yZHMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKytcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IHJlY29yZHNbaV07XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQudHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHtcbiAgICAgICAgICAgICAgICAgIGNoZWNrRW1BbGwoY3VycmVudC5hZGRlZE5vZGVzLCBhdHRhY2hlZCk7XG4gICAgICAgICAgICAgICAgICBjaGVja0VtQWxsKGN1cnJlbnQucmVtb3ZlZE5vZGVzLCBkZXRhY2hlZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG5vZGUgPSBjdXJyZW50LnRhcmdldDtcbiAgICAgICAgICAgICAgICAgIGlmIChub3RGcm9tSW5uZXJIVE1MSGVscGVyICYmXG4gICAgICAgICAgICAgICAgICAgICAgbm9kZVtBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10gJiZcbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50LmF0dHJpYnV0ZU5hbWUgIT09ICdzdHlsZScpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWUgPSBnZXRBdHRyaWJ1dGUuY2FsbChub2RlLCBjdXJyZW50LmF0dHJpYnV0ZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IGN1cnJlbnQub2xkVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBub2RlW0FUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLXShcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuYXR0cmlidXRlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQub2xkVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0oZXhlY3V0ZUFjdGlvbihBVFRBQ0hFRCksIGV4ZWN1dGVBY3Rpb24oREVUQUNIRUQpKSk7XG4gICAgICAgICAgb2JzZXJ2ZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKFxuICAgICAgICAgICAgICBub2RlLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgICAgICAgIHN1YnRyZWU6IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgIH07XG4gICAgICAgICAgb2JzZXJ2ZShkb2N1bWVudCk7XG4gICAgICAgICAgaWYgKGF0dGFjaFNoYWRvdykge1xuICAgICAgICAgICAgSFRNTEVsZW1lbnRQcm90b3R5cGUuYXR0YWNoU2hhZG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZShhdHRhY2hTaGFkb3cuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhc2FwUXVldWUgPSBbXTtcbiAgICAgICAgICBkb2N1bWVudFtBRERfRVZFTlRfTElTVEVORVJdKCdET01Ob2RlSW5zZXJ0ZWQnLCBvbkRPTU5vZGUoQVRUQUNIRUQpKTtcbiAgICAgICAgICBkb2N1bWVudFtBRERfRVZFTlRfTElTVEVORVJdKCdET01Ob2RlUmVtb3ZlZCcsIG9uRE9NTm9kZShERVRBQ0hFRCkpO1xuICAgICAgICB9XG4gIFxuICAgICAgICBkb2N1bWVudFtBRERfRVZFTlRfTElTVEVORVJdKERPTV9DT05URU5UX0xPQURFRCwgb25SZWFkeVN0YXRlQ2hhbmdlKTtcbiAgICAgICAgZG9jdW1lbnRbQUREX0VWRU5UX0xJU1RFTkVSXSgncmVhZHlzdGF0ZWNoYW5nZScsIG9uUmVhZHlTdGF0ZUNoYW5nZSk7XG4gIFxuICAgICAgICBIVE1MRWxlbWVudFByb3RvdHlwZS5jbG9uZU5vZGUgPSBmdW5jdGlvbiAoZGVlcCkge1xuICAgICAgICAgIHZhclxuICAgICAgICAgICAgbm9kZSA9IGNsb25lTm9kZS5jYWxsKHRoaXMsICEhZGVlcCksXG4gICAgICAgICAgICBpID0gZ2V0VHlwZUluZGV4KG5vZGUpXG4gICAgICAgICAgO1xuICAgICAgICAgIGlmICgtMSA8IGkpIHBhdGNoKG5vZGUsIHByb3Rvc1tpXSk7XG4gICAgICAgICAgaWYgKGRlZXAgJiYgcXVlcnkubGVuZ3RoKSBsb29wQW5kU2V0dXAobm9kZS5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSk7XG4gICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICB9XG4gIFxuICAgICAgaWYgKGp1c3RTZXR1cCkgcmV0dXJuIChqdXN0U2V0dXAgPSBmYWxzZSk7XG4gIFxuICAgICAgaWYgKC0yIDwgKFxuICAgICAgICBpbmRleE9mLmNhbGwodHlwZXMsIFBSRUZJWF9JUyArIHVwcGVyVHlwZSkgK1xuICAgICAgICBpbmRleE9mLmNhbGwodHlwZXMsIFBSRUZJWF9UQUcgKyB1cHBlclR5cGUpXG4gICAgICApKSB7XG4gICAgICAgIHRocm93VHlwZUVycm9yKHR5cGUpO1xuICAgICAgfVxuICBcbiAgICAgIGlmICghdmFsaWROYW1lLnRlc3QodXBwZXJUeXBlKSB8fCAtMSA8IGluZGV4T2YuY2FsbChpbnZhbGlkTmFtZXMsIHVwcGVyVHlwZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgdHlwZSAnICsgdHlwZSArICcgaXMgaW52YWxpZCcpO1xuICAgICAgfVxuICBcbiAgICAgIHZhclxuICAgICAgICBjb25zdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gZXh0ZW5kaW5nID9cbiAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUsIHVwcGVyVHlwZSkgOlxuICAgICAgICAgICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChub2RlTmFtZSk7XG4gICAgICAgIH0sXG4gICAgICAgIG9wdCA9IG9wdGlvbnMgfHwgT1AsXG4gICAgICAgIGV4dGVuZGluZyA9IGhPUC5jYWxsKG9wdCwgRVhURU5EUyksXG4gICAgICAgIG5vZGVOYW1lID0gZXh0ZW5kaW5nID8gb3B0aW9uc1tFWFRFTkRTXS50b1VwcGVyQ2FzZSgpIDogdXBwZXJUeXBlLFxuICAgICAgICB1cHBlclR5cGUsXG4gICAgICAgIGlcbiAgICAgIDtcbiAgXG4gICAgICBpZiAoZXh0ZW5kaW5nICYmIC0xIDwgKFxuICAgICAgICBpbmRleE9mLmNhbGwodHlwZXMsIFBSRUZJWF9UQUcgKyBub2RlTmFtZSlcbiAgICAgICkpIHtcbiAgICAgICAgdGhyb3dUeXBlRXJyb3Iobm9kZU5hbWUpO1xuICAgICAgfVxuICBcbiAgICAgIGkgPSB0eXBlcy5wdXNoKChleHRlbmRpbmcgPyBQUkVGSVhfSVMgOiBQUkVGSVhfVEFHKSArIHVwcGVyVHlwZSkgLSAxO1xuICBcbiAgICAgIHF1ZXJ5ID0gcXVlcnkuY29uY2F0KFxuICAgICAgICBxdWVyeS5sZW5ndGggPyAnLCcgOiAnJyxcbiAgICAgICAgZXh0ZW5kaW5nID8gbm9kZU5hbWUgKyAnW2lzPVwiJyArIHR5cGUudG9Mb3dlckNhc2UoKSArICdcIl0nIDogbm9kZU5hbWVcbiAgICAgICk7XG4gIFxuICAgICAgY29uc3RydWN0b3IucHJvdG90eXBlID0gKFxuICAgICAgICBwcm90b3NbaV0gPSBoT1AuY2FsbChvcHQsICdwcm90b3R5cGUnKSA/XG4gICAgICAgICAgb3B0LnByb3RvdHlwZSA6XG4gICAgICAgICAgY3JlYXRlKEhUTUxFbGVtZW50UHJvdG90eXBlKVxuICAgICAgKTtcbiAgXG4gICAgICBpZiAocXVlcnkubGVuZ3RoKSBsb29wQW5kVmVyaWZ5KFxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSxcbiAgICAgICAgQVRUQUNIRURcbiAgICAgICk7XG4gIFxuICAgICAgcmV0dXJuIGNvbnN0cnVjdG9yO1xuICAgIH07XG4gIFxuICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgPSAocGF0Y2hlZENyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAobG9jYWxOYW1lLCB0eXBlRXh0ZW5zaW9uKSB7XG4gICAgICB2YXJcbiAgICAgICAgaXMgPSBnZXRJcyh0eXBlRXh0ZW5zaW9uKSxcbiAgICAgICAgbm9kZSA9IGlzID9cbiAgICAgICAgICBjcmVhdGVFbGVtZW50LmNhbGwoZG9jdW1lbnQsIGxvY2FsTmFtZSwgc2Vjb25kQXJndW1lbnQoaXMpKSA6XG4gICAgICAgICAgY3JlYXRlRWxlbWVudC5jYWxsKGRvY3VtZW50LCBsb2NhbE5hbWUpLFxuICAgICAgICBuYW1lID0gJycgKyBsb2NhbE5hbWUsXG4gICAgICAgIGkgPSBpbmRleE9mLmNhbGwoXG4gICAgICAgICAgdHlwZXMsXG4gICAgICAgICAgKGlzID8gUFJFRklYX0lTIDogUFJFRklYX1RBRykgK1xuICAgICAgICAgIChpcyB8fCBuYW1lKS50b1VwcGVyQ2FzZSgpXG4gICAgICAgICksXG4gICAgICAgIHNldHVwID0gLTEgPCBpXG4gICAgICA7XG4gICAgICBpZiAoaXMpIHtcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoJ2lzJywgaXMgPSBpcy50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgaWYgKHNldHVwKSB7XG4gICAgICAgICAgc2V0dXAgPSBpc0luUVNBKG5hbWUudG9VcHBlckNhc2UoKSwgaXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBub3RGcm9tSW5uZXJIVE1MSGVscGVyID0gIWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuaW5uZXJIVE1MSGVscGVyO1xuICAgICAgaWYgKHNldHVwKSBwYXRjaChub2RlLCBwcm90b3NbaV0pO1xuICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfSk7XG4gIFxuICB9XG4gIFxuICBmdW5jdGlvbiBBU0FQKCkge1xuICAgIHZhciBxdWV1ZSA9IGFzYXBRdWV1ZS5zcGxpY2UoMCwgYXNhcFF1ZXVlLmxlbmd0aCk7XG4gICAgYXNhcFRpbWVyID0gMDtcbiAgICB3aGlsZSAocXVldWUubGVuZ3RoKSB7XG4gICAgICBxdWV1ZS5zaGlmdCgpLmNhbGwoXG4gICAgICAgIG51bGwsIHF1ZXVlLnNoaWZ0KClcbiAgICAgICk7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiBsb29wQW5kVmVyaWZ5KGxpc3QsIGFjdGlvbikge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBsaXN0Lmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2ZXJpZnlBbmRTZXR1cEFuZEFjdGlvbihsaXN0W2ldLCBhY3Rpb24pO1xuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gbG9vcEFuZFNldHVwKGxpc3QpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gbGlzdC5sZW5ndGgsIG5vZGU7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgbm9kZSA9IGxpc3RbaV07XG4gICAgICBwYXRjaChub2RlLCBwcm90b3NbZ2V0VHlwZUluZGV4KG5vZGUpXSk7XG4gICAgfVxuICB9XG4gIFxuICBmdW5jdGlvbiBleGVjdXRlQWN0aW9uKGFjdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgaWYgKGlzVmFsaWROb2RlKG5vZGUpKSB7XG4gICAgICAgIHZlcmlmeUFuZFNldHVwQW5kQWN0aW9uKG5vZGUsIGFjdGlvbik7XG4gICAgICAgIGlmIChxdWVyeS5sZW5ndGgpIGxvb3BBbmRWZXJpZnkoXG4gICAgICAgICAgbm9kZS5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSxcbiAgICAgICAgICBhY3Rpb25cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIFxuICBmdW5jdGlvbiBnZXRUeXBlSW5kZXgodGFyZ2V0KSB7XG4gICAgdmFyXG4gICAgICBpcyA9IGdldEF0dHJpYnV0ZS5jYWxsKHRhcmdldCwgJ2lzJyksXG4gICAgICBub2RlTmFtZSA9IHRhcmdldC5ub2RlTmFtZS50b1VwcGVyQ2FzZSgpLFxuICAgICAgaSA9IGluZGV4T2YuY2FsbChcbiAgICAgICAgdHlwZXMsXG4gICAgICAgIGlzID9cbiAgICAgICAgICAgIFBSRUZJWF9JUyArIGlzLnRvVXBwZXJDYXNlKCkgOlxuICAgICAgICAgICAgUFJFRklYX1RBRyArIG5vZGVOYW1lXG4gICAgICApXG4gICAgO1xuICAgIHJldHVybiBpcyAmJiAtMSA8IGkgJiYgIWlzSW5RU0Eobm9kZU5hbWUsIGlzKSA/IC0xIDogaTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gaXNJblFTQShuYW1lLCB0eXBlKSB7XG4gICAgcmV0dXJuIC0xIDwgcXVlcnkuaW5kZXhPZihuYW1lICsgJ1tpcz1cIicgKyB0eXBlICsgJ1wiXScpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBvbkRPTUF0dHJNb2RpZmllZChlKSB7XG4gICAgdmFyXG4gICAgICBub2RlID0gZS5jdXJyZW50VGFyZ2V0LFxuICAgICAgYXR0ckNoYW5nZSA9IGUuYXR0ckNoYW5nZSxcbiAgICAgIGF0dHJOYW1lID0gZS5hdHRyTmFtZSxcbiAgICAgIHRhcmdldCA9IGUudGFyZ2V0LFxuICAgICAgYWRkaXRpb24gPSBlW0FERElUSU9OXSB8fCAyLFxuICAgICAgcmVtb3ZhbCA9IGVbUkVNT1ZBTF0gfHwgM1xuICAgIDtcbiAgICBpZiAobm90RnJvbUlubmVySFRNTEhlbHBlciAmJlxuICAgICAgICAoIXRhcmdldCB8fCB0YXJnZXQgPT09IG5vZGUpICYmXG4gICAgICAgIG5vZGVbQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdICYmXG4gICAgICAgIGF0dHJOYW1lICE9PSAnc3R5bGUnICYmIChcbiAgICAgICAgICBlLnByZXZWYWx1ZSAhPT0gZS5uZXdWYWx1ZSB8fFxuICAgICAgICAgIC8vIElFOSwgSUUxMCwgYW5kIE9wZXJhIDEyIGdvdGNoYVxuICAgICAgICAgIGUubmV3VmFsdWUgPT09ICcnICYmIChcbiAgICAgICAgICAgIGF0dHJDaGFuZ2UgPT09IGFkZGl0aW9uIHx8XG4gICAgICAgICAgICBhdHRyQ2hhbmdlID09PSByZW1vdmFsXG4gICAgICAgICAgKVxuICAgICkpIHtcbiAgICAgIG5vZGVbQVRUUklCVVRFX0NIQU5HRURfQ0FMTEJBQ0tdKFxuICAgICAgICBhdHRyTmFtZSxcbiAgICAgICAgYXR0ckNoYW5nZSA9PT0gYWRkaXRpb24gPyBudWxsIDogZS5wcmV2VmFsdWUsXG4gICAgICAgIGF0dHJDaGFuZ2UgPT09IHJlbW92YWwgPyBudWxsIDogZS5uZXdWYWx1ZVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIG9uRE9NTm9kZShhY3Rpb24pIHtcbiAgICB2YXIgZXhlY3V0b3IgPSBleGVjdXRlQWN0aW9uKGFjdGlvbik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7XG4gICAgICBhc2FwUXVldWUucHVzaChleGVjdXRvciwgZS50YXJnZXQpO1xuICAgICAgaWYgKGFzYXBUaW1lcikgY2xlYXJUaW1lb3V0KGFzYXBUaW1lcik7XG4gICAgICBhc2FwVGltZXIgPSBzZXRUaW1lb3V0KEFTQVAsIDEpO1xuICAgIH07XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIG9uUmVhZHlTdGF0ZUNoYW5nZShlKSB7XG4gICAgaWYgKGRyb3BEb21Db250ZW50TG9hZGVkKSB7XG4gICAgICBkcm9wRG9tQ29udGVudExvYWRlZCA9IGZhbHNlO1xuICAgICAgZS5jdXJyZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoRE9NX0NPTlRFTlRfTE9BREVELCBvblJlYWR5U3RhdGVDaGFuZ2UpO1xuICAgIH1cbiAgICBpZiAocXVlcnkubGVuZ3RoKSBsb29wQW5kVmVyaWZ5KFxuICAgICAgKGUudGFyZ2V0IHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKHF1ZXJ5KSxcbiAgICAgIGUuZGV0YWlsID09PSBERVRBQ0hFRCA/IERFVEFDSEVEIDogQVRUQUNIRURcbiAgICApO1xuICAgIGlmIChJRTgpIHB1cmdlKCk7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHBhdGNoZWRTZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpIHtcbiAgICAvLyBqc2hpbnQgdmFsaWR0aGlzOnRydWVcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgc2V0QXR0cmlidXRlLmNhbGwoc2VsZiwgbmFtZSwgdmFsdWUpO1xuICAgIG9uU3VidHJlZU1vZGlmaWVkLmNhbGwoc2VsZiwge3RhcmdldDogc2VsZn0pO1xuICB9XG4gIFxuICBmdW5jdGlvbiBzZXR1cE5vZGUobm9kZSwgcHJvdG8pIHtcbiAgICBzZXRQcm90b3R5cGUobm9kZSwgcHJvdG8pO1xuICAgIGlmIChvYnNlcnZlcikge1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCBhdHRyaWJ1dGVzT2JzZXJ2ZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZG9lc05vdFN1cHBvcnRET01BdHRyTW9kaWZpZWQpIHtcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUgPSBwYXRjaGVkU2V0QXR0cmlidXRlO1xuICAgICAgICBub2RlW0VYUEFORE9fVUlEXSA9IGdldEF0dHJpYnV0ZXNNaXJyb3Iobm9kZSk7XG4gICAgICAgIG5vZGVbQUREX0VWRU5UX0xJU1RFTkVSXShET01fU1VCVFJFRV9NT0RJRklFRCwgb25TdWJ0cmVlTW9kaWZpZWQpO1xuICAgICAgfVxuICAgICAgbm9kZVtBRERfRVZFTlRfTElTVEVORVJdKERPTV9BVFRSX01PRElGSUVELCBvbkRPTUF0dHJNb2RpZmllZCk7XG4gICAgfVxuICAgIGlmIChub2RlW0NSRUFURURfQ0FMTEJBQ0tdICYmIG5vdEZyb21Jbm5lckhUTUxIZWxwZXIpIHtcbiAgICAgIG5vZGUuY3JlYXRlZCA9IHRydWU7XG4gICAgICBub2RlW0NSRUFURURfQ0FMTEJBQ0tdKCk7XG4gICAgICBub2RlLmNyZWF0ZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHB1cmdlKCkge1xuICAgIGZvciAodmFyXG4gICAgICBub2RlLFxuICAgICAgaSA9IDAsXG4gICAgICBsZW5ndGggPSB0YXJnZXRzLmxlbmd0aDtcbiAgICAgIGkgPCBsZW5ndGg7IGkrK1xuICAgICkge1xuICAgICAgbm9kZSA9IHRhcmdldHNbaV07XG4gICAgICBpZiAoIWRvY3VtZW50RWxlbWVudC5jb250YWlucyhub2RlKSkge1xuICAgICAgICBsZW5ndGgtLTtcbiAgICAgICAgdGFyZ2V0cy5zcGxpY2UoaS0tLCAxKTtcbiAgICAgICAgdmVyaWZ5QW5kU2V0dXBBbmRBY3Rpb24obm9kZSwgREVUQUNIRUQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgZnVuY3Rpb24gdGhyb3dUeXBlRXJyb3IodHlwZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQSAnICsgdHlwZSArICcgdHlwZSBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQnKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gdmVyaWZ5QW5kU2V0dXBBbmRBY3Rpb24obm9kZSwgYWN0aW9uKSB7XG4gICAgdmFyXG4gICAgICBmbixcbiAgICAgIGkgPSBnZXRUeXBlSW5kZXgobm9kZSlcbiAgICA7XG4gICAgaWYgKC0xIDwgaSkge1xuICAgICAgcGF0Y2hJZk5vdEFscmVhZHkobm9kZSwgcHJvdG9zW2ldKTtcbiAgICAgIGkgPSAwO1xuICAgICAgaWYgKGFjdGlvbiA9PT0gQVRUQUNIRUQgJiYgIW5vZGVbQVRUQUNIRURdKSB7XG4gICAgICAgIG5vZGVbREVUQUNIRURdID0gZmFsc2U7XG4gICAgICAgIG5vZGVbQVRUQUNIRURdID0gdHJ1ZTtcbiAgICAgICAgaSA9IDE7XG4gICAgICAgIGlmIChJRTggJiYgaW5kZXhPZi5jYWxsKHRhcmdldHMsIG5vZGUpIDwgMCkge1xuICAgICAgICAgIHRhcmdldHMucHVzaChub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09IERFVEFDSEVEICYmICFub2RlW0RFVEFDSEVEXSkge1xuICAgICAgICBub2RlW0FUVEFDSEVEXSA9IGZhbHNlO1xuICAgICAgICBub2RlW0RFVEFDSEVEXSA9IHRydWU7XG4gICAgICAgIGkgPSAxO1xuICAgICAgfVxuICAgICAgaWYgKGkgJiYgKGZuID0gbm9kZVthY3Rpb24gKyBDQUxMQkFDS10pKSBmbi5jYWxsKG5vZGUpO1xuICAgIH1cbiAgfVxuICBcbiAgXG4gIFxuICAvLyBWMSBpbiBkYSBIb3VzZSFcbiAgZnVuY3Rpb24gQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5KCkge31cbiAgXG4gIEN1c3RvbUVsZW1lbnRSZWdpc3RyeS5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IEN1c3RvbUVsZW1lbnRSZWdpc3RyeSxcbiAgICAvLyBhIHdvcmthcm91bmQgZm9yIHRoZSBzdHViYm9ybiBXZWJLaXRcbiAgICBkZWZpbmU6IHVzYWJsZUN1c3RvbUVsZW1lbnRzID9cbiAgICAgIGZ1bmN0aW9uIChuYW1lLCBDbGFzcywgb3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucykge1xuICAgICAgICAgIENFUkRlZmluZShuYW1lLCBDbGFzcywgb3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIE5BTUUgPSBuYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgY29uc3RydWN0b3JzW05BTUVdID0ge1xuICAgICAgICAgICAgY29uc3RydWN0b3I6IENsYXNzLFxuICAgICAgICAgICAgY3JlYXRlOiBbTkFNRV1cbiAgICAgICAgICB9O1xuICAgICAgICAgIG5vZGVOYW1lcy5zZXQoQ2xhc3MsIE5BTUUpO1xuICAgICAgICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZShuYW1lLCBDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgIH0gOlxuICAgICAgQ0VSRGVmaW5lLFxuICAgIGdldDogdXNhYmxlQ3VzdG9tRWxlbWVudHMgP1xuICAgICAgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGN1c3RvbUVsZW1lbnRzLmdldChuYW1lKSB8fCBnZXQobmFtZSk7XG4gICAgICB9IDpcbiAgICAgIGdldCxcbiAgICB3aGVuRGVmaW5lZDogdXNhYmxlQ3VzdG9tRWxlbWVudHMgP1xuICAgICAgZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbXG4gICAgICAgICAgY3VzdG9tRWxlbWVudHMud2hlbkRlZmluZWQobmFtZSksXG4gICAgICAgICAgd2hlbkRlZmluZWQobmFtZSlcbiAgICAgICAgXSk7XG4gICAgICB9IDpcbiAgICAgIHdoZW5EZWZpbmVkXG4gIH07XG4gIFxuICBmdW5jdGlvbiBDRVJEZWZpbmUobmFtZSwgQ2xhc3MsIG9wdGlvbnMpIHtcbiAgICB2YXJcbiAgICAgIGlzID0gb3B0aW9ucyAmJiBvcHRpb25zW0VYVEVORFNdIHx8ICcnLFxuICAgICAgQ1Byb3RvID0gQ2xhc3MucHJvdG90eXBlLFxuICAgICAgcHJvdG8gPSBjcmVhdGUoQ1Byb3RvKSxcbiAgICAgIGF0dHJpYnV0ZXMgPSBDbGFzcy5vYnNlcnZlZEF0dHJpYnV0ZXMgfHwgZW1wdHksXG4gICAgICBkZWZpbml0aW9uID0ge3Byb3RvdHlwZTogcHJvdG99XG4gICAgO1xuICAgIC8vIFRPRE86IGlzIHRoaXMgbmVlZGVkIGF0IGFsbCBzaW5jZSBpdCdzIGluaGVyaXRlZD9cbiAgICAvLyBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ2NvbnN0cnVjdG9yJywge3ZhbHVlOiBDbGFzc30pO1xuICAgIHNhZmVQcm9wZXJ0eShwcm90bywgQ1JFQVRFRF9DQUxMQkFDSywge1xuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChqdXN0Q3JlYXRlZCkganVzdENyZWF0ZWQgPSBmYWxzZTtcbiAgICAgICAgICBlbHNlIGlmICghdGhpc1tEUkVDRVYxXSkge1xuICAgICAgICAgICAgdGhpc1tEUkVDRVYxXSA9IHRydWU7XG4gICAgICAgICAgICBuZXcgQ2xhc3ModGhpcyk7XG4gICAgICAgICAgICBpZiAoQ1Byb3RvW0NSRUFURURfQ0FMTEJBQ0tdKVxuICAgICAgICAgICAgICBDUHJvdG9bQ1JFQVRFRF9DQUxMQkFDS10uY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIHZhciBpbmZvID0gY29uc3RydWN0b3JzW25vZGVOYW1lcy5nZXQoQ2xhc3MpXTtcbiAgICAgICAgICAgIGlmICghdXNhYmxlQ3VzdG9tRWxlbWVudHMgfHwgaW5mby5jcmVhdGUubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICBub3RpZnlBdHRyaWJ1dGVzKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBzYWZlUHJvcGVydHkocHJvdG8sIEFUVFJJQlVURV9DSEFOR0VEX0NBTExCQUNLLCB7XG4gICAgICB2YWx1ZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgaWYgKC0xIDwgaW5kZXhPZi5jYWxsKGF0dHJpYnV0ZXMsIG5hbWUpKVxuICAgICAgICAgIENQcm90b1tBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoQ1Byb3RvW0NPTk5FQ1RFRF9DQUxMQkFDS10pIHtcbiAgICAgIHNhZmVQcm9wZXJ0eShwcm90bywgQVRUQUNIRURfQ0FMTEJBQ0ssIHtcbiAgICAgICAgdmFsdWU6IENQcm90b1tDT05ORUNURURfQ0FMTEJBQ0tdXG4gICAgICB9KTtcbiAgICB9XG4gICAgaWYgKENQcm90b1tESVNDT05ORUNURURfQ0FMTEJBQ0tdKSB7XG4gICAgICBzYWZlUHJvcGVydHkocHJvdG8sIERFVEFDSEVEX0NBTExCQUNLLCB7XG4gICAgICAgIHZhbHVlOiBDUHJvdG9bRElTQ09OTkVDVEVEX0NBTExCQUNLXVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChpcykgZGVmaW5pdGlvbltFWFRFTkRTXSA9IGlzO1xuICAgIG5hbWUgPSBuYW1lLnRvVXBwZXJDYXNlKCk7XG4gICAgY29uc3RydWN0b3JzW25hbWVdID0ge1xuICAgICAgY29uc3RydWN0b3I6IENsYXNzLFxuICAgICAgY3JlYXRlOiBpcyA/IFtpcywgc2Vjb25kQXJndW1lbnQobmFtZSldIDogW25hbWVdXG4gICAgfTtcbiAgICBub2RlTmFtZXMuc2V0KENsYXNzLCBuYW1lKTtcbiAgICBkb2N1bWVudFtSRUdJU1RFUl9FTEVNRU5UXShuYW1lLnRvTG93ZXJDYXNlKCksIGRlZmluaXRpb24pO1xuICAgIHdoZW5EZWZpbmVkKG5hbWUpO1xuICAgIHdhaXRpbmdMaXN0W25hbWVdLnIoKTtcbiAgfVxuICBcbiAgZnVuY3Rpb24gZ2V0KG5hbWUpIHtcbiAgICB2YXIgaW5mbyA9IGNvbnN0cnVjdG9yc1tuYW1lLnRvVXBwZXJDYXNlKCldO1xuICAgIHJldHVybiBpbmZvICYmIGluZm8uY29uc3RydWN0b3I7XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIGdldElzKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnID9cbiAgICAgICAgb3B0aW9ucyA6IChvcHRpb25zICYmIG9wdGlvbnMuaXMgfHwgJycpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBub3RpZnlBdHRyaWJ1dGVzKHNlbGYpIHtcbiAgICB2YXJcbiAgICAgIGNhbGxiYWNrID0gc2VsZltBVFRSSUJVVEVfQ0hBTkdFRF9DQUxMQkFDS10sXG4gICAgICBhdHRyaWJ1dGVzID0gY2FsbGJhY2sgPyBzZWxmLmF0dHJpYnV0ZXMgOiBlbXB0eSxcbiAgICAgIGkgPSBhdHRyaWJ1dGVzLmxlbmd0aCxcbiAgICAgIGF0dHJpYnV0ZVxuICAgIDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBhdHRyaWJ1dGUgPSAgYXR0cmlidXRlc1tpXTsgLy8gfHwgYXR0cmlidXRlcy5pdGVtKGkpO1xuICAgICAgY2FsbGJhY2suY2FsbChcbiAgICAgICAgc2VsZixcbiAgICAgICAgYXR0cmlidXRlLm5hbWUgfHwgYXR0cmlidXRlLm5vZGVOYW1lLFxuICAgICAgICBudWxsLFxuICAgICAgICBhdHRyaWJ1dGUudmFsdWUgfHwgYXR0cmlidXRlLm5vZGVWYWx1ZVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgXG4gIGZ1bmN0aW9uIHdoZW5EZWZpbmVkKG5hbWUpIHtcbiAgICBuYW1lID0gbmFtZS50b1VwcGVyQ2FzZSgpO1xuICAgIGlmICghKG5hbWUgaW4gd2FpdGluZ0xpc3QpKSB7XG4gICAgICB3YWl0aW5nTGlzdFtuYW1lXSA9IHt9O1xuICAgICAgd2FpdGluZ0xpc3RbbmFtZV0ucCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIHdhaXRpbmdMaXN0W25hbWVdLnIgPSByZXNvbHZlO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB3YWl0aW5nTGlzdFtuYW1lXS5wO1xuICB9XG4gIFxuICBmdW5jdGlvbiBwb2x5ZmlsbFYxKCkge1xuICAgIGlmIChjdXN0b21FbGVtZW50cykgZGVsZXRlIHdpbmRvdy5jdXN0b21FbGVtZW50cztcbiAgICBkZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdjdXN0b21FbGVtZW50cycsIHtcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBuZXcgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5KClcbiAgICB9KTtcbiAgICBkZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdDdXN0b21FbGVtZW50UmVnaXN0cnknLCB7XG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB2YWx1ZTogQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5XG4gICAgfSk7XG4gICAgZm9yICh2YXJcbiAgICAgIHBhdGNoQ2xhc3MgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgQ2xhc3MgPSB3aW5kb3dbbmFtZV07XG4gICAgICAgIGlmIChDbGFzcykge1xuICAgICAgICAgIHdpbmRvd1tuYW1lXSA9IGZ1bmN0aW9uIEN1c3RvbUVsZW1lbnRzVjEoc2VsZikge1xuICAgICAgICAgICAgdmFyIGluZm8sIGlzTmF0aXZlO1xuICAgICAgICAgICAgaWYgKCFzZWxmKSBzZWxmID0gdGhpcztcbiAgICAgICAgICAgIGlmICghc2VsZltEUkVDRVYxXSkge1xuICAgICAgICAgICAgICBqdXN0Q3JlYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgIGluZm8gPSBjb25zdHJ1Y3RvcnNbbm9kZU5hbWVzLmdldChzZWxmLmNvbnN0cnVjdG9yKV07XG4gICAgICAgICAgICAgIGlzTmF0aXZlID0gdXNhYmxlQ3VzdG9tRWxlbWVudHMgJiYgaW5mby5jcmVhdGUubGVuZ3RoID09PSAxO1xuICAgICAgICAgICAgICBzZWxmID0gaXNOYXRpdmUgP1xuICAgICAgICAgICAgICAgIFJlZmxlY3QuY29uc3RydWN0KENsYXNzLCBlbXB0eSwgaW5mby5jb25zdHJ1Y3RvcikgOlxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQuYXBwbHkoZG9jdW1lbnQsIGluZm8uY3JlYXRlKTtcbiAgICAgICAgICAgICAgc2VsZltEUkVDRVYxXSA9IHRydWU7XG4gICAgICAgICAgICAgIGp1c3RDcmVhdGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgIGlmICghaXNOYXRpdmUpIG5vdGlmeUF0dHJpYnV0ZXMoc2VsZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHdpbmRvd1tuYW1lXS5wcm90b3R5cGUgPSBDbGFzcy5wcm90b3R5cGU7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIENsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHdpbmRvd1tuYW1lXTtcbiAgICAgICAgICB9IGNhdGNoKFdlYktpdCkge1xuICAgICAgICAgICAgZml4R2V0Q2xhc3MgPSB0cnVlO1xuICAgICAgICAgICAgZGVmaW5lUHJvcGVydHkoQ2xhc3MsIERSRUNFVjEsIHt2YWx1ZTogd2luZG93W25hbWVdfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgQ2xhc3NlcyA9IGh0bWxDbGFzcy5nZXQoL15IVE1MW0EtWl0qW2Etel0vKSxcbiAgICAgIGkgPSBDbGFzc2VzLmxlbmd0aDtcbiAgICAgIGktLTtcbiAgICAgIHBhdGNoQ2xhc3MoQ2xhc3Nlc1tpXSlcbiAgICApIHt9XG4gICAgKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQgPSBmdW5jdGlvbiAobmFtZSwgb3B0aW9ucykge1xuICAgICAgdmFyIGlzID0gZ2V0SXMob3B0aW9ucyk7XG4gICAgICByZXR1cm4gaXMgP1xuICAgICAgICBwYXRjaGVkQ3JlYXRlRWxlbWVudC5jYWxsKHRoaXMsIG5hbWUsIHNlY29uZEFyZ3VtZW50KGlzKSkgOlxuICAgICAgICBwYXRjaGVkQ3JlYXRlRWxlbWVudC5jYWxsKHRoaXMsIG5hbWUpO1xuICAgIH0pO1xuICAgIGlmICghVjApIHtcbiAgICAgIGp1c3RTZXR1cCA9IHRydWU7XG4gICAgICBkb2N1bWVudFtSRUdJU1RFUl9FTEVNRU5UXSgnJyk7XG4gICAgfVxuICB9XG4gIFxuICAvLyBpZiBjdXN0b21FbGVtZW50cyBpcyBub3QgdGhlcmUgYXQgYWxsXG4gIGlmICghY3VzdG9tRWxlbWVudHMgfHwgcG9seWZpbGwgPT09ICdmb3JjZScpIHBvbHlmaWxsVjEoKTtcbiAgZWxzZSB7XG4gICAgLy8gaWYgYXZhaWxhYmxlIHRlc3QgZXh0ZW5kcyB3b3JrIGFzIGV4cGVjdGVkXG4gICAgdHJ5IHtcbiAgICAgIChmdW5jdGlvbiAoRFJFLCBvcHRpb25zLCBuYW1lKSB7XG4gICAgICAgIG9wdGlvbnNbRVhURU5EU10gPSAnYSc7XG4gICAgICAgIERSRS5wcm90b3R5cGUgPSBjcmVhdGUoSFRNTEFuY2hvckVsZW1lbnQucHJvdG90eXBlKTtcbiAgICAgICAgRFJFLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IERSRTtcbiAgICAgICAgd2luZG93LmN1c3RvbUVsZW1lbnRzLmRlZmluZShuYW1lLCBEUkUsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2V0QXR0cmlidXRlLmNhbGwoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScsIHtpczogbmFtZX0pLCAnaXMnKSAhPT0gbmFtZSB8fFxuICAgICAgICAgICh1c2FibGVDdXN0b21FbGVtZW50cyAmJiBnZXRBdHRyaWJ1dGUuY2FsbChuZXcgRFJFKCksICdpcycpICE9PSBuYW1lKVxuICAgICAgICApIHtcbiAgICAgICAgICB0aHJvdyBvcHRpb25zO1xuICAgICAgICB9XG4gICAgICB9KFxuICAgICAgICBmdW5jdGlvbiBEUkUoKSB7XG4gICAgICAgICAgcmV0dXJuIFJlZmxlY3QuY29uc3RydWN0KEhUTUxBbmNob3JFbGVtZW50LCBbXSwgRFJFKTtcbiAgICAgICAgfSxcbiAgICAgICAge30sXG4gICAgICAgICdkb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50LWEnXG4gICAgICApKTtcbiAgICB9IGNhdGNoKG9fTykge1xuICAgICAgLy8gb3IgZm9yY2UgdGhlIHBvbHlmaWxsIGlmIG5vdFxuICAgICAgLy8gYW5kIGtlZXAgaW50ZXJuYWwgb3JpZ2luYWwgcmVmZXJlbmNlXG4gICAgICBwb2x5ZmlsbFYxKCk7XG4gICAgfVxuICB9XG4gIFxuICB0cnkge1xuICAgIGNyZWF0ZUVsZW1lbnQuY2FsbChkb2N1bWVudCwgJ2EnLCAnYScpO1xuICB9IGNhdGNoKEZpcmVGb3gpIHtcbiAgICBzZWNvbmRBcmd1bWVudCA9IGZ1bmN0aW9uIChpcykge1xuICAgICAgcmV0dXJuIHtpczogaXMudG9Mb3dlckNhc2UoKX07XG4gICAgfTtcbiAgfVxuICBcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbnN0YWxsQ3VzdG9tRWxlbWVudHM7XG5pbnN0YWxsQ3VzdG9tRWxlbWVudHMoZ2xvYmFsKTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgRVM2L1Byb21pc2VzIEErIFByb21pc2UgaW5zdGFuY2UuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKGZ1bmN0aW9uKCo9KSwgZnVuY3Rpb24gKCo9KSl9IHJlc29sdmVyXG4gKi9cbmZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ29uc3RydWN0b3IgUHJvbWlzZSByZXF1aXJlcyBgbmV3YCcpO1xuICB9XG4gIGlmICghaXNGdW5jdGlvbihyZXNvbHZlcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdNdXN0IHBhc3MgcmVzb2x2ZXIgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAdHlwZSB7ZnVuY3Rpb24odGhpczpQcm9taXNlLCo9LGZ1bmN0aW9uKCo9KSxmdW5jdGlvbigqPSksRGVmZXJyZWQpOiFQcm9taXNlfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdGhpcy5fc3RhdGUgPSBQZW5kaW5nUHJvbWlzZTtcblxuICAvKipcbiAgICogQHR5cGUgeyp9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB0aGlzLl92YWx1ZSA9IFtdO1xuXG4gIC8qKlxuICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHRoaXMuX2lzQ2hhaW5FbmQgPSB0cnVlO1xuXG4gIGRvUmVzb2x2ZShcbiAgICB0aGlzLFxuICAgIGFkb3B0ZXIodGhpcywgRnVsZmlsbGVkUHJvbWlzZSksXG4gICAgYWRvcHRlcih0aGlzLCBSZWplY3RlZFByb21pc2UpLFxuICAgIHsgdGhlbjogcmVzb2x2ZXIgfVxuICApO1xufVxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICBQdWJsaWMgSW5zdGFuY2UgTWV0aG9kc1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBwcm9taXNlIGluc3RhbmNlIHRoYXQgd2lsbCByZWNlaXZlIHRoZSByZXN1bHQgb2YgdGhpcyBwcm9taXNlXG4gKiBhcyBpbnB1dHMgdG8gdGhlIG9uRnVsZmlsbGVkIG9yIG9uUmVqZWN0ZWQgY2FsbGJhY2tzLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKil9IG9uRnVsZmlsbGVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCopfSBvblJlamVjdGVkXG4gKi9cblByb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbihvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICBvbkZ1bGZpbGxlZCA9IGlzRnVuY3Rpb24ob25GdWxmaWxsZWQpID8gb25GdWxmaWxsZWQgOiB2b2lkIDA7XG4gIG9uUmVqZWN0ZWQgPSBpc0Z1bmN0aW9uKG9uUmVqZWN0ZWQpID8gb25SZWplY3RlZCA6IHZvaWQgMDtcblxuICBpZiAob25GdWxmaWxsZWQgfHwgb25SZWplY3RlZCkge1xuICAgIHRoaXMuX2lzQ2hhaW5FbmQgPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0aGlzLl9zdGF0ZShcbiAgICB0aGlzLl92YWx1ZSxcbiAgICBvbkZ1bGZpbGxlZCxcbiAgICBvblJlamVjdGVkXG4gICk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgcHJvbWlzZSB0aGF0IHdpbGwgaGFuZGxlIHRoZSByZWplY3RlZCBzdGF0ZSBvZiB0aGlzIHByb21pc2UuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbigqKX0gb25SZWplY3RlZFxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5Qcm9taXNlLnByb3RvdHlwZS5jYXRjaCA9IGZ1bmN0aW9uKG9uUmVqZWN0ZWQpIHtcbiAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIG9uUmVqZWN0ZWQpO1xufTtcblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgUHVibGljIFN0YXRpYyBNZXRob2RzXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVsZmlsbGVkIFByb21pc2Ugb2YgdmFsdWUuIElmIHZhbHVlIGlzIGl0c2VsZiBhIHRoZW4tYWJsZSxcbiAqIHJlc29sdmVzIHdpdGggdGhlIHRoZW4tYWJsZSdzIHZhbHVlLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX1cbiAqIEBwYXJhbSB7Kj19IHZhbHVlXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UucmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlO1xuXG4gIGlmIChpc09iamVjdCh2YWx1ZSkgJiYgdmFsdWUgaW5zdGFuY2VvZiB0aGlzKSB7XG4gICAgcHJvbWlzZSA9IHZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSkge1xuICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZX0gKi8ocHJvbWlzZSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSByZWplY3RlZCBQcm9taXNlIG9mIHJlYXNvbi5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9XG4gKiBAcGFyYW0geyo9fSByZWFzb25cbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuUHJvbWlzZS5yZWplY3QgPSBmdW5jdGlvbihyZWFzb24pIHtcbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24oXywgcmVqZWN0KSB7XG4gICAgcmVqZWN0KHJlYXNvbik7XG4gIH0pO1xuXG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlfSAqLyhwcm9taXNlKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIFByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgd2l0aCBhbiBhcnJheSBvZiB0aGUgdmFsdWVzIG9mIHRoZVxuICogcGFzc2VkIGluIHByb21pc2VzLiBJZiBhbnkgcHJvbWlzZSByZWplY3RzLCB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aWxsXG4gKiByZWplY3QuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfVxuICogQHBhcmFtIHshQXJyYXk8UHJvbWlzZXwqPn0gcHJvbWlzZXNcbiAqIEByZXR1cm5zIHshUHJvbWlzZX1cbiAqL1xuUHJvbWlzZS5hbGwgPSBmdW5jdGlvbihwcm9taXNlcykge1xuICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICB2YXIgbGVuZ3RoID0gcHJvbWlzZXMubGVuZ3RoO1xuICAgIHZhciB2YWx1ZXMgPSBuZXcgQXJyYXkobGVuZ3RoKTtcblxuICAgIGlmIChsZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiByZXNvbHZlKHZhbHVlcyk7XG4gICAgfVxuXG4gICAgZWFjaChwcm9taXNlcywgZnVuY3Rpb24ocHJvbWlzZSwgaW5kZXgpIHtcbiAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUocHJvbWlzZSkudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB2YWx1ZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgIGlmICgtLWxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJlc29sdmUodmFsdWVzKTtcbiAgICAgICAgfVxuICAgICAgfSwgcmVqZWN0KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2V9ICovKHByb21pc2UpO1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgUHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSBvciByZWplY3QgYmFzZWQgb24gdGhlIGZpcnN0XG4gKiByZXNvbHZlZCBvciByZWplY3RlZCBwcm9taXNlLlxuICpcbiAqIEB0aGlzIHshUHJvbWlzZX1cbiAqIEBwYXJhbSB7IUFycmF5PFByb21pc2V8Kj59IHByb21pc2VzXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cblByb21pc2UucmFjZSA9IGZ1bmN0aW9uKHByb21pc2VzKSB7XG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvbWlzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUocHJvbWlzZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlfSAqLyhwcm9taXNlKTtcbn07XG5cbnZhciBvblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uID0gZnVuY3Rpb24ocmVhc29uLCBwcm9taXNlKSB7XG4gIHRocm93IHJlYXNvbjtcbn07XG5cbi8qKlxuICogQW4gaW50ZXJuYWwgdXNlIHN0YXRpYyBmdW5jdGlvbi5cbiAqL1xuUHJvbWlzZS5fb3ZlcnJpZGVVbmhhbmRsZWRFeGNlcHRpb25IYW5kbGVyID0gZnVuY3Rpb24oaGFuZGxlcikge1xuICBvblBvc3NpYmx5VW5oYW5kbGVkUmVqZWN0aW9uID0gaGFuZGxlcjtcbn07XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gIFByaXZhdGUgZnVuY3Rpb25zXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuLyoqXG4gKiBUaGUgRnVsZmlsbGVkIFByb21pc2Ugc3RhdGUuIENhbGxzIG9uRnVsZmlsbGVkIHdpdGggdGhlIHJlc29sdmVkIHZhbHVlIG9mXG4gKiB0aGlzIHByb21pc2UsIGNyZWF0aW5nIGEgbmV3IHByb21pc2UuXG4gKlxuICogSWYgdGhlcmUgaXMgbm8gb25GdWxmaWxsZWQsIHJldHVybnMgdGhlIGN1cnJlbnQgcHJvbWlzZSB0byBhdm9pZCBhbiBwcm9taXNlXG4gKiBpbnN0YW5jZS5cbiAqXG4gKiBAdGhpcyB7IVByb21pc2V9IFRoZSBjdXJyZW50IHByb21pc2VcbiAqIEBwYXJhbSB7Kj19IHZhbHVlIFRoZSBjdXJyZW50IHByb21pc2UncyByZXNvbHZlZCB2YWx1ZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pPX0gb25GdWxmaWxsZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pPX0gdW51c2VkXG4gKiBAcGFyYW0ge0RlZmVycmVkfSBkZWZlcnJlZCBBIGRlZmVycmVkIG9iamVjdCB0aGF0IGhvbGRzIGEgcHJvbWlzZSBhbmQgaXRzXG4gKiAgICAgcmVzb2x2ZSBhbmQgcmVqZWN0IGZ1bmN0aW9ucy4gSXQgSVMgTk9UIHBhc3NlZCB3aGVuIGNhbGxlZCBmcm9tXG4gKiAgICAgUHJvbWlzZSN0aGVuIHRvIHNhdmUgYW4gb2JqZWN0IGluc3RhbmNlIChzaW5jZSB3ZSBtYXkgcmV0dXJuIHRoZSBjdXJyZW50XG4gKiAgICAgcHJvbWlzZSkuIEl0IElTIHBhc3NlZCBpbiB3aGVuIGFkb3B0aW5nIHRoZSBGdWxmaWxsZWQgc3RhdGUgZnJvbSB0aGVcbiAqICAgICBQZW5kaW5nIHN0YXRlLlxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5mdW5jdGlvbiBGdWxmaWxsZWRQcm9taXNlKHZhbHVlLCBvbkZ1bGZpbGxlZCwgdW51c2VkLCBkZWZlcnJlZCkge1xuICBpZiAoIW9uRnVsZmlsbGVkKSB7XG4gICAgZGVmZXJyZWRBZG9wdChkZWZlcnJlZCwgRnVsZmlsbGVkUHJvbWlzZSwgdmFsdWUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGlmICghZGVmZXJyZWQpIHtcbiAgICBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCh0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfVxuICBkZWZlcih0cnlDYXRjaERlZmVycmVkKGRlZmVycmVkLCBvbkZ1bGZpbGxlZCwgdmFsdWUpKTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbi8qKlxuICogVGhlIFJlamVjdGVkIFByb21pc2Ugc3RhdGUuIENhbGxzIG9uUmVqZWN0ZWQgd2l0aCB0aGUgcmVzb2x2ZWQgdmFsdWUgb2ZcbiAqIHRoaXMgcHJvbWlzZSwgY3JlYXRpbmcgYSBuZXcgcHJvbWlzZS5cbiAqXG4gKiBJZiB0aGVyZSBpcyBubyBvblJlamVjdGVkLCByZXR1cm5zIHRoZSBjdXJyZW50IHByb21pc2UgdG8gYXZvaWQgYW4gcHJvbWlzZVxuICogaW5zdGFuY2UuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfSBUaGUgY3VycmVudCBwcm9taXNlXG4gKiBAcGFyYW0geyo9fSByZWFzb24gVGhlIGN1cnJlbnQgcHJvbWlzZSdzIHJlamVjdGlvbiByZWFzb24uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9KT19IHVudXNlZFxuICogQHBhcmFtIHtmdW5jdGlvbigqPSk9fSBvblJlamVjdGVkXG4gKiBAcGFyYW0ge0RlZmVycmVkfSBkZWZlcnJlZCBBIGRlZmVycmVkIG9iamVjdCB0aGF0IGhvbGRzIGEgcHJvbWlzZSBhbmQgaXRzXG4gKiAgICAgcmVzb2x2ZSBhbmQgcmVqZWN0IGZ1bmN0aW9ucy4gSXQgSVMgTk9UIHBhc3NlZCB3aGVuIGNhbGxlZCBmcm9tXG4gKiAgICAgUHJvbWlzZSN0aGVuIHRvIHNhdmUgYW4gb2JqZWN0IGluc3RhbmNlIChzaW5jZSB3ZSBtYXkgcmV0dXJuIHRoZSBjdXJyZW50XG4gKiAgICAgcHJvbWlzZSkuIEl0IElTIHBhc3NlZCBpbiB3aGVuIGFkb3B0aW5nIHRoZSBSZWplY3RlZCBzdGF0ZSBmcm9tIHRoZVxuICogICAgIFBlbmRpbmcgc3RhdGUuXG4gKiBAcmV0dXJucyB7IVByb21pc2V9XG4gKi9cbmZ1bmN0aW9uIFJlamVjdGVkUHJvbWlzZShyZWFzb24sIHVudXNlZCwgb25SZWplY3RlZCwgZGVmZXJyZWQpIHtcbiAgaWYgKCFvblJlamVjdGVkKSB7XG4gICAgZGVmZXJyZWRBZG9wdChkZWZlcnJlZCwgUmVqZWN0ZWRQcm9taXNlLCByZWFzb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIGlmICghZGVmZXJyZWQpIHtcbiAgICBkZWZlcnJlZCA9IG5ldyBEZWZlcnJlZCh0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfVxuICBkZWZlcih0cnlDYXRjaERlZmVycmVkKGRlZmVycmVkLCBvblJlamVjdGVkLCByZWFzb24pKTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbi8qKlxuICogVGhlIFBlbmRpbmcgUHJvbWlzZSBzdGF0ZS4gRXZlbnR1YWxseSBjYWxscyBvbkZ1bGZpbGxlZCBvbmNlIHRoZSBwcm9taXNlIGhhc1xuICogcmVzb2x2ZWQsIG9yIG9uUmVqZWN0ZWQgb25jZSB0aGUgcHJvbWlzZSByZWplY3RzLlxuICpcbiAqIElmIHRoZXJlIGlzIG5vIG9uRnVsZmlsbGVkIGFuZCBubyBvblJlamVjdGVkLCByZXR1cm5zIHRoZSBjdXJyZW50IHByb21pc2UgdG9cbiAqIGF2b2lkIGFuIHByb21pc2UgaW5zdGFuY2UuXG4gKlxuICogQHRoaXMgeyFQcm9taXNlfSBUaGUgY3VycmVudCBwcm9taXNlXG4gKiBAcGFyYW0geyo9fSBxdWV1ZSBUaGUgY3VycmVudCBwcm9taXNlJ3MgcGVuZGluZyBwcm9taXNlcyBxdWV1ZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pPX0gb25GdWxmaWxsZWRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pPX0gb25SZWplY3RlZFxuICogQHBhcmFtIHtEZWZlcnJlZH0gZGVmZXJyZWQgQSBkZWZlcnJlZCBvYmplY3QgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0c1xuICogICAgIHJlc29sdmUgYW5kIHJlamVjdCBmdW5jdGlvbnMuIEl0IElTIE5PVCBwYXNzZWQgd2hlbiBjYWxsZWQgZnJvbVxuICogICAgIFByb21pc2UjdGhlbiB0byBzYXZlIGFuIG9iamVjdCBpbnN0YW5jZSAoc2luY2Ugd2UgbWF5IHJldHVybiB0aGUgY3VycmVudFxuICogICAgIHByb21pc2UpLiBJdCBJUyBwYXNzZWQgaW4gd2hlbiBhZG9wdGluZyB0aGUgUGVuZGluZyBzdGF0ZSBmcm9tIHRoZVxuICogICAgIFBlbmRpbmcgc3RhdGUgb2YgYW5vdGhlciBwcm9taXNlLlxuICogQHJldHVybnMgeyFQcm9taXNlfVxuICovXG5mdW5jdGlvbiBQZW5kaW5nUHJvbWlzZShxdWV1ZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIGRlZmVycmVkKSB7XG4gIGlmICghZGVmZXJyZWQpIHtcbiAgICBpZiAoIW9uRnVsZmlsbGVkICYmICFvblJlamVjdGVkKSB7IHJldHVybiB0aGlzOyB9XG4gICAgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQodGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH1cbiAgcXVldWUucHVzaCh7XG4gICAgZGVmZXJyZWQ6IGRlZmVycmVkLFxuICAgIG9uRnVsZmlsbGVkOiBvbkZ1bGZpbGxlZCB8fCBkZWZlcnJlZC5yZXNvbHZlLFxuICAgIG9uUmVqZWN0ZWQ6IG9uUmVqZWN0ZWQgfHwgZGVmZXJyZWQucmVqZWN0XG4gIH0pO1xuICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgZGVmZXJyZWQgaW5zdGFuY2UgdGhhdCBob2xkcyBhIHByb21pc2UgYW5kIGl0cyByZXNvbHZlIGFuZFxuICogcmVqZWN0IGZ1bmN0aW9ucy5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRGVmZXJyZWQoUHJvbWlzZSkge1xuICB2YXIgZGVmZXJyZWQgPSB0aGlzO1xuICAvKiogQHR5cGUgeyFQcm9taXNlfSAqL1xuICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAvKiogQHR5cGUge2Z1bmN0aW9uKCo9KX0gKi9cbiAgICBkZWZlcnJlZC5yZXNvbHZlID0gcmVzb2x2ZTtcblxuICAgIC8qKiBAdHlwZSB7ZnVuY3Rpb24oKj0pfSAqL1xuICAgIGRlZmVycmVkLnJlamVjdCA9IHJlamVjdDtcbiAgfSk7XG4gIHJldHVybiBkZWZlcnJlZDtcbn1cblxuLyoqXG4gKiBUcmFuc2l0aW9ucyB0aGUgc3RhdGUgb2YgcHJvbWlzZSB0byBhbm90aGVyIHN0YXRlLiBUaGlzIGlzIG9ubHkgZXZlciBjYWxsZWRcbiAqIG9uIHdpdGggYSBwcm9taXNlIHRoYXQgaXMgY3VycmVudGx5IGluIHRoZSBQZW5kaW5nIHN0YXRlLlxuICpcbiAqIEBwYXJhbSB7IVByb21pc2V9IHByb21pc2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczpQcm9taXNlLCo9LGZ1bmN0aW9uKCo9KSxmdW5jdGlvbigqPSksRGVmZXJyZWQpOiFQcm9taXNlfSBzdGF0ZVxuICogQHBhcmFtIHsqPX0gdmFsdWVcbiAqL1xuZnVuY3Rpb24gYWRvcHQocHJvbWlzZSwgc3RhdGUsIHZhbHVlLCBhZG9wdGVlKSB7XG4gIHZhciBxdWV1ZSA9IHByb21pc2UuX3ZhbHVlO1xuICBwcm9taXNlLl9zdGF0ZSA9IHN0YXRlO1xuICBwcm9taXNlLl92YWx1ZSA9IHZhbHVlO1xuXG4gIGlmIChhZG9wdGVlICYmIHN0YXRlID09PSBQZW5kaW5nUHJvbWlzZSkge1xuICAgIGFkb3B0ZWUuX3N0YXRlKHZhbHVlLCB2b2lkIDAsIHZvaWQgMCwge1xuICAgICAgcHJvbWlzZTogcHJvbWlzZSxcbiAgICAgIHJlc29sdmU6IHZvaWQgMCxcbiAgICAgIHJlamVjdDogdm9pZCAwXG4gICAgfSk7XG4gIH1cblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIG5leHQgPSBxdWV1ZVtpXTtcbiAgICBwcm9taXNlLl9zdGF0ZShcbiAgICAgIHZhbHVlLFxuICAgICAgbmV4dC5vbkZ1bGZpbGxlZCxcbiAgICAgIG5leHQub25SZWplY3RlZCxcbiAgICAgIG5leHQuZGVmZXJyZWRcbiAgICApO1xuICB9XG4gIHF1ZXVlLmxlbmd0aCA9IDA7XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIHRoaXMgcmVqZWN0ZWQgcHJvbWlzZSB3aWxsIGJlIFwiaGFuZGxlZFwiLlxuICBpZiAoc3RhdGUgPT09IFJlamVjdGVkUHJvbWlzZSAmJiBwcm9taXNlLl9pc0NoYWluRW5kKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIGlmIChwcm9taXNlLl9pc0NoYWluRW5kKSB7XG4gICAgICAgIG9uUG9zc2libHlVbmhhbmRsZWRSZWplY3Rpb24odmFsdWUsIHByb21pc2UpO1xuICAgICAgfVxuICAgIH0sIDApO1xuICB9XG59XG5cbi8qKlxuICogQSBwYXJ0aWFsIGFwcGxpY2F0aW9uIG9mIGFkb3B0LlxuICpcbiAqIEBwYXJhbSB7IVByb21pc2V9IHByb21pc2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24odGhpczpQcm9taXNlLCo9LGZ1bmN0aW9uKCo9KSxmdW5jdGlvbigqPSksRGVmZXJyZWQpOiFQcm9taXNlfSBzdGF0ZVxuICogQHJldHVybnMge2Z1bmN0aW9uKCo9KX1cbiAqL1xuZnVuY3Rpb24gYWRvcHRlcihwcm9taXNlLCBzdGF0ZSkge1xuICByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBhZG9wdChwcm9taXNlLCBzdGF0ZSwgdmFsdWUpO1xuICB9O1xufVxuXG4vKipcbiAqIFVwZGF0ZXMgYSBkZWZlcnJlZCBwcm9taXNlcyBzdGF0ZS4gTmVjZXNzYXJ5IGZvciB1cGRhdGluZyBhbiBhZG9wdGluZ1xuICogcHJvbWlzZSdzIHN0YXRlIHdoZW4gdGhlIGFkb3B0ZWUgcmVzb2x2ZXMuXG4gKlxuICogQHBhcmFtIHs/RGVmZXJyZWR9IGRlZmVycmVkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6UHJvbWlzZSwqPSxmdW5jdGlvbigqPSksZnVuY3Rpb24oKj0pLERlZmVycmVkKTohUHJvbWlzZX0gc3RhdGVcbiAqIEBwYXJhbSB7Kj19IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIGRlZmVycmVkQWRvcHQoZGVmZXJyZWQsIHN0YXRlLCB2YWx1ZSkge1xuICBpZiAoZGVmZXJyZWQpIHtcbiAgICB2YXIgcHJvbWlzZSA9IGRlZmVycmVkLnByb21pc2U7XG4gICAgcHJvbWlzZS5fc3RhdGUgPSBzdGF0ZTtcbiAgICBwcm9taXNlLl92YWx1ZSA9IHZhbHVlO1xuICB9XG59XG5cbi8qKlxuICogQSBuby1vcCBmdW5jdGlvbiB0byBwcmV2ZW50IGRvdWJsZSByZXNvbHZpbmcuXG4gKi9cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vKipcbiAqIFRlc3RzIGlmIGZuIGlzIGEgRnVuY3Rpb25cbiAqXG4gKiBAcGFyYW0geyp9IGZuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbihmbikge1xuICByZXR1cm4gdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nO1xufVxuXG4vKipcbiAqIFRlc3RzIGlmIGZuIGlzIGFuIE9iamVjdFxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gIHJldHVybiBvYmogPT09IE9iamVjdChvYmopO1xufVxuXG4vKipcbiAqIEl0ZXJhdGVzIG92ZXIgZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5LCBjYWxsaW5nIHRoZSBpdGVyYXRvciB3aXRoIHRoZVxuICogZWxlbWVudCBhbmQgaXRzIGluZGV4LlxuICpcbiAqIEBwYXJhbSB7IUFycmF5fSBjb2xsZWN0aW9uXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCo9LG51bWJlcil9IGl0ZXJhdG9yXG4gKi9cbmZ1bmN0aW9uIGVhY2goY29sbGVjdGlvbiwgaXRlcmF0b3IpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2xsZWN0aW9uLmxlbmd0aDsgaSsrKSB7XG4gICAgaXRlcmF0b3IoY29sbGVjdGlvbltpXSwgaSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGF0dGVtcHQgdG8gcmVzb2x2ZSB0aGUgZGVmZXJyZWQgd2l0aCB0aGUgcmV0dXJuXG4gKiBvZiBmbi4gSWYgYW55IGVycm9yIGlzIHJhaXNlZCwgcmVqZWN0cyBpbnN0ZWFkLlxuICpcbiAqIEBwYXJhbSB7IURlZmVycmVkfSBkZWZlcnJlZFxuICogQHBhcmFtIHtmdW5jdGlvbigqPSl9IGZuXG4gKiBAcGFyYW0geyp9IGFyZ1xuICogQHJldHVybnMge2Z1bmN0aW9uKCl9XG4gKi9cbmZ1bmN0aW9uIHRyeUNhdGNoRGVmZXJyZWQoZGVmZXJyZWQsIGZuLCBhcmcpIHtcbiAgdmFyIHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlO1xuICB2YXIgcmVzb2x2ZSA9IGRlZmVycmVkLnJlc29sdmU7XG4gIHZhciByZWplY3QgPSBkZWZlcnJlZC5yZWplY3Q7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB0cnkge1xuICAgICAgdmFyIHJlc3VsdCA9IGZuKGFyZyk7XG4gICAgICBkb1Jlc29sdmUocHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0LCByZXN1bHQsIHJlc3VsdCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmVqZWN0KGUpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBRdWV1ZXMgYW5kIGV4ZWN1dGVzIG11bHRpcGxlIGRlZmVycmVkIGZ1bmN0aW9ucyBvbiBhbm90aGVyIHJ1biBsb29wLlxuICovXG52YXIgZGVmZXIgPSAoZnVuY3Rpb24oKSB7XG4gIC8qKlxuICAgKiBEZWZlcnMgZm4gdG8gYW5vdGhlciBydW4gbG9vcC5cbiAgICovXG4gIHZhciBzY2hlZHVsZUZsdXNoO1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LnBvc3RNZXNzYWdlKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmbHVzaCk7XG4gICAgc2NoZWR1bGVGbHVzaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgd2luZG93LnBvc3RNZXNzYWdlKCdtYWNyby10YXNrJywgJyonKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHNjaGVkdWxlRmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgICAgIHNldFRpbWVvdXQoZmx1c2gsIDApO1xuICAgIH07XG4gIH1cblxuICB2YXIgcXVldWUgPSBuZXcgQXJyYXkoMTYpO1xuICB2YXIgbGVuZ3RoID0gMDtcblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZm4gPSBxdWV1ZVtpXTtcbiAgICAgIHF1ZXVlW2ldID0gbnVsbDtcbiAgICAgIGZuKCk7XG4gICAgfVxuICAgIGxlbmd0aCA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBmblxuICAgKi9cbiAgZnVuY3Rpb24gZGVmZXIoZm4pIHtcbiAgICBpZiAobGVuZ3RoID09PSAwKSB7IHNjaGVkdWxlRmx1c2goKTsgfVxuICAgIHF1ZXVlW2xlbmd0aCsrXSA9IGZuO1xuICB9XG5cbiAgcmV0dXJuIGRlZmVyO1xufSkoKTtcblxuLyoqXG4gKiBUaGUgUHJvbWlzZSByZXNvbHV0aW9uIHByb2NlZHVyZS5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9wcm9taXNlcy1hcGx1cy9wcm9taXNlcy1zcGVjI3RoZS1wcm9taXNlLXJlc29sdXRpb24tcHJvY2VkdXJlXG4gKlxuICogQHBhcmFtIHshUHJvbWlzZX0gcHJvbWlzZVxuICogQHBhcmFtIHtmdW5jdGlvbigqPSl9IHJlc29sdmVcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKj0pfSByZWplY3RcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7Kj19IGNvbnRleHRcbiAqL1xuZnVuY3Rpb24gZG9SZXNvbHZlKHByb21pc2UsIHJlc29sdmUsIHJlamVjdCwgdmFsdWUsIGNvbnRleHQpIHtcbiAgdmFyIF9yZWplY3QgPSByZWplY3Q7XG4gIHZhciB0aGVuO1xuICB2YXIgX3Jlc29sdmU7XG4gIHRyeSB7XG4gICAgaWYgKHZhbHVlID09PSBwcm9taXNlKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgZnVsZmlsbCBwcm9taXNlIHdpdGggaXRzZWxmJyk7XG4gICAgfVxuICAgIHZhciBpc09iaiA9IGlzT2JqZWN0KHZhbHVlKTtcbiAgICBpZiAoaXNPYmogJiYgdmFsdWUgaW5zdGFuY2VvZiBwcm9taXNlLmNvbnN0cnVjdG9yKSB7XG4gICAgICBhZG9wdChwcm9taXNlLCB2YWx1ZS5fc3RhdGUsIHZhbHVlLl92YWx1ZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmogJiYgKHRoZW4gPSB2YWx1ZS50aGVuKSAmJiBpc0Z1bmN0aW9uKHRoZW4pKSB7XG4gICAgICBfcmVzb2x2ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIF9yZXNvbHZlID0gX3JlamVjdCA9IG5vb3A7XG4gICAgICAgIGRvUmVzb2x2ZShwcm9taXNlLCByZXNvbHZlLCByZWplY3QsIHZhbHVlLCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgX3JlamVjdCA9IGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICBfcmVzb2x2ZSA9IF9yZWplY3QgPSBub29wO1xuICAgICAgICByZWplY3QocmVhc29uKTtcbiAgICAgIH07XG4gICAgICB0aGVuLmNhbGwoXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIGZ1bmN0aW9uKHZhbHVlKSB7IF9yZXNvbHZlKHZhbHVlKTsgfSxcbiAgICAgICAgZnVuY3Rpb24ocmVhc29uKSB7IF9yZWplY3QocmVhc29uKTsgfVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgX3JlamVjdChlKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBUcnVzdCBsZXZlbCBvZiBhbiBhY3Rpb24uXG4gKlxuICogQ29ycmVzcG9uZHMgdG8gZGVncmVlIG9mIHVzZXIgaW50ZW50LCBpLmUuIGV2ZW50cyB0cmlnZ2VyZWQgd2l0aCBzdHJvbmdcbiAqIHVzZXIgaW50ZW50IGhhdmUgaGlnaCB0cnVzdC5cbiAqXG4gKiBAZW51bSB7bnVtYmVyfVxuICovXG5leHBvcnQgY29uc3QgQWN0aW9uVHJ1c3QgPSB7XG4gIExPVzogMSxcbiAgSElHSDogMTAwLFxufTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuL3NlcnZpY2VzJztcblxuLyoqXG4gKiBIZWxwZXIgbWV0aG9kIHRvIHRyaWdnZXIgYW5hbHl0aWNzIGV2ZW50IGlmIGFtcC1hbmFseXRpY3MgaXMgYXZhaWxhYmxlLlxuICogVE9ETzogRG8gbm90IGV4cG9zZSB0aGlzIGZ1bmN0aW9uXG4gKiBAcGFyYW0geyFFbGVtZW50fSB0YXJnZXRcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZz49fSBvcHRfdmFycyBBIG1hcCBvZiB2YXJzIGFuZCB0aGVpciB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmlnZ2VyQW5hbHl0aWNzRXZlbnQodGFyZ2V0LCBldmVudFR5cGUsIG9wdF92YXJzKSB7XG4gIFNlcnZpY2VzLmFuYWx5dGljc0ZvckRvY09yTnVsbCh0YXJnZXQpLnRoZW4oYW5hbHl0aWNzID0+IHtcbiAgICBpZiAoIWFuYWx5dGljcykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhbmFseXRpY3MudHJpZ2dlckV2ZW50Rm9yVGFyZ2V0KHRhcmdldCwgZXZlbnRUeXBlLCBvcHRfdmFycyk7XG4gIH0pO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5pbXBvcnQge3JlbW92ZUVsZW1lbnR9IGZyb20gJy4vZG9tJztcbmltcG9ydCB7c2V0U3R5bGVzfSBmcm9tICcuL3N0eWxlJztcblxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHlUZXh0VG9DbGlwYm9hcmQod2luLCB0ZXh0KSB7XG4gIGxldCBjb3B5U3VjY2Vzc2Z1bCA9IGZhbHNlO1xuICBjb25zdCBkb2MgPSB3aW4uZG9jdW1lbnQ7XG5cbiAgY29uc3QgdGV4dGFyZWEgPSBkb2MuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcblxuICBzZXRTdHlsZXModGV4dGFyZWEsIHtcbiAgICAncG9zaXRpb24nOiAnZml4ZWQnLFxuICAgICd0b3AnOiAwLFxuICAgICdsZWZ0JzogMCxcbiAgICAnd2lkdGgnOiAnNTBweCcsXG4gICAgJ2hlaWdodCc6ICc1MHB4JyxcbiAgICAncGFkZGluZyc6IDAsXG4gICAgJ2JvcmRlcic6ICdub25lJyxcbiAgICAnb3V0bGluZSc6ICdub25lJyxcbiAgICAnYmFja2dyb3VuZCc6ICd0cmFuc3BhcmVudCcsXG4gIH0pO1xuXG4gIHRleHRhcmVhLnZhbHVlID0gdGV4dDtcbiAgdGV4dGFyZWEucmVhZE9ubHkgPSB0cnVlO1xuICB0ZXh0YXJlYS5jb250ZW50RWRpdGFibGUgPSB0cnVlO1xuXG4gIGRvYy5ib2R5LmFwcGVuZENoaWxkKHRleHRhcmVhKTtcbiAgY29uc3QgcmFuZ2UgPSBkb2MuY3JlYXRlUmFuZ2UoKTtcbiAgcmFuZ2Uuc2VsZWN0Tm9kZSh0ZXh0YXJlYSk7XG4gIHdpbi5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgd2luLmdldFNlbGVjdGlvbigpLmFkZFJhbmdlKHJhbmdlKTtcbiAgdGV4dGFyZWEuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgdGV4dC5sZW5ndGgpO1xuXG4gIHRyeSB7XG4gICAgY29weVN1Y2Nlc3NmdWwgPSBkb2MuZXhlY0NvbW1hbmQoJ2NvcHknKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIPCfpLdcbiAgfVxuXG4gIHJlbW92ZUVsZW1lbnQodGV4dGFyZWEpO1xuXG4gIHJldHVybiBjb3B5U3VjY2Vzc2Z1bDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NvcHlpbmdUb0NsaXBib2FyZFN1cHBvcnRlZChkb2MpIHtcbiAgcmV0dXJuIGRvYy5xdWVyeUNvbW1hbmRTdXBwb3J0ZWQoJ2NvcHknKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogQ29tbW9ubHkgdXNlZCBzaWduYWxzIGFjcm9zcyBkaWZmZXJlbnQgZWxlbWVudHMgYW5kIGRvY3VtZW50cy5cbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBDb21tb25TaWduYWxzID0ge1xuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBoYXMgYmVlbiBidWlsdC5cbiAgICovXG4gIEJVSUxUOiAnYnVpbHQnLFxuXG4gIC8qKlxuICAgKiBUaGUgaW5pdGlhbCBjb250ZW50cyBvZiBhbiBlbGVtZW50L2RvY3VtZW50L2VtYmVkIGhhdmUgYmVlbiBsb2FkZWQuXG4gICAqL1xuICBJTklfTE9BRDogJ2luaS1sb2FkJyxcblxuICAvKipcbiAgICogVGhlIGVsZW1lbnQgaGFzIGJlZW4gbG9hZGVkLlxuICAgKi9cbiAgTE9BRF9FTkQ6ICdsb2FkLWVuZCcsXG5cbiAgLyoqXG4gICAqIFRoZSBlbGVtZW50IGhhcyBzdGFydGVkIGxvYWRpbmcuXG4gICAqL1xuICBMT0FEX1NUQVJUOiAnbG9hZC1zdGFydCcsXG5cbiAgLyoqXG4gICAqIFJlbmRlcmluZyBoYXMgYmVlbiBjb25maXJtZWQgdG8gaGF2ZSBiZWVuIHN0YXJ0ZWQuXG4gICAqL1xuICBSRU5ERVJfU1RBUlQ6ICdyZW5kZXItc3RhcnQnLFxuXG4gIC8qKlxuICAgKiBUaGUgZWxlbWVudCBoYXMgYmVlbiB1bmxhaWQgb3V0LlxuICAgKi9cbiAgVU5MT0FEOiAndW5sb2FkJyxcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBBbGxvd3MgZm9yIHJ1bnRpbWUgY29uZmlndXJhdGlvbi4gSW50ZXJuYWxseSwgdGhlIHJ1bnRpbWUgc2hvdWxkXG4gKiB1c2UgdGhlIHNyYy9jb25maWcuanMgbW9kdWxlIGZvciB2YXJpb3VzIGNvbnN0YW50cy4gV2UgY2FuIHVzZSB0aGVcbiAqIEFNUF9DT05GSUcgZ2xvYmFsIHRvIHRyYW5zbGF0ZSB1c2VyLWRlZmluZWQgY29uZmlndXJhdGlvbnMgdG8gdGhpc1xuICogbW9kdWxlLlxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICovXG5jb25zdCBlbnYgPSBzZWxmLkFNUF9DT05GSUcgfHwge307XG5cbmNvbnN0IHRoaXJkUGFydHlGcmFtZVJlZ2V4ID0gdHlwZW9mIGVudlsndGhpcmRQYXJ0eUZyYW1lUmVnZXgnXSA9PSAnc3RyaW5nJyA/XG4gIG5ldyBSZWdFeHAoZW52Wyd0aGlyZFBhcnR5RnJhbWVSZWdleCddKSA6IGVudlsndGhpcmRQYXJ0eUZyYW1lUmVnZXgnXTtcblxuY29uc3QgY2RuUHJveHlSZWdleCA9IHR5cGVvZiBlbnZbJ2NkblByb3h5UmVnZXgnXSA9PSAnc3RyaW5nJyA/XG4gIG5ldyBSZWdFeHAoZW52WydjZG5Qcm94eVJlZ2V4J10pIDogZW52WydjZG5Qcm94eVJlZ2V4J107XG5cbi8qKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsIHN0cmluZ3xib29sZWFufFJlZ0V4cD59ICovXG5leHBvcnQgY29uc3QgdXJscyA9IHtcbiAgdGhpcmRQYXJ0eTogZW52Wyd0aGlyZFBhcnR5VXJsJ10gfHwgJ2h0dHBzOi8vM3AuYW1wcHJvamVjdC5uZXQnLFxuICB0aGlyZFBhcnR5RnJhbWVIb3N0OiBlbnZbJ3RoaXJkUGFydHlGcmFtZUhvc3QnXSB8fCAnYW1wcHJvamVjdC5uZXQnLFxuICB0aGlyZFBhcnR5RnJhbWVSZWdleDogdGhpcmRQYXJ0eUZyYW1lUmVnZXggfHwgL15kLVxcZCtcXC5hbXBwcm9qZWN0XFwubmV0JC8sXG4gIGNkbjogZW52WydjZG5VcmwnXSB8fCAnaHR0cHM6Ly9jZG4uYW1wcHJvamVjdC5vcmcnLFxuICAvKiBOb3RlIHRoYXQgY2RuUHJveHlSZWdleCBpcyBvbmx5IGV2ZXIgY2hlY2tlZCBhZ2FpbnN0IG9yaWdpbnNcbiAgICogKHByb3RvOi8vaG9zdFs6cG9ydF0pIHNvIGRvZXMgbm90IG5lZWQgdG8gY29uc2lkZXIgcGF0aFxuICAgKi9cbiAgY2RuUHJveHlSZWdleDogY2RuUHJveHlSZWdleCB8fFxuICAgICAgL15odHRwczpcXC9cXC8oW2EtekEtWjAtOV8tXStcXC4pP2NkblxcLmFtcHByb2plY3RcXC5vcmckLyxcbiAgbG9jYWxob3N0UmVnZXg6IC9eaHR0cHM/OlxcL1xcL2xvY2FsaG9zdCg6XFxkKyk/JC8sXG4gIGVycm9yUmVwb3J0aW5nOiBlbnZbJ2Vycm9yUmVwb3J0aW5nVXJsJ10gfHxcbiAgICAgICdodHRwczovL2FtcC1lcnJvci1yZXBvcnRpbmcuYXBwc3BvdC5jb20vcicsXG4gIGxvY2FsRGV2OiBlbnZbJ2xvY2FsRGV2J10gfHwgZmFsc2UsXG59O1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7ZW5kc1dpdGh9IGZyb20gJy4vc3RyaW5nJztcbmltcG9ydCB7XG4gIGlzUHJveHlPcmlnaW4sXG4gIHBhcnNlVXJsLFxuICB0cnlEZWNvZGVVcmlDb21wb25lbnQsXG59IGZyb20gJy4vdXJsJztcbmltcG9ydCB7dXJsc30gZnJvbSAnLi9jb25maWcnO1xuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIGNvb2tpZS4gVGhlIGNvb2tpZSBhY2Nlc3MgaXMgcmVzdHJpY3RlZCBhbmQgbXVzdFxuICogZ28gdGhyb3VnaCB0aGUgcHJpdmFjeSByZXZpZXcuIEJlZm9yZSB1c2luZyB0aGlzIG1ldGhvZCBwbGVhc2UgZmlsZSBhXG4gKiBHaXRIdWIgaXNzdWUgd2l0aCBcIlByaXZhY3kgUmV2aWV3XCIgbGFiZWwuXG4gKlxuICogUmV0dXJucyB0aGUgY29va2llJ3MgdmFsdWUgb3IgYG51bGxgLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvb2tpZSh3aW4sIG5hbWUpIHtcbiAgY29uc3QgY29va2llU3RyaW5nID0gdHJ5R2V0RG9jdW1lbnRDb29raWVOb0lubGluZSh3aW4pO1xuICBpZiAoIWNvb2tpZVN0cmluZykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IGNvb2tpZXMgPSBjb29raWVTdHJpbmcuc3BsaXQoJzsnKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb29raWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY29va2llID0gY29va2llc1tpXS50cmltKCk7XG4gICAgY29uc3QgZXEgPSBjb29raWUuaW5kZXhPZignPScpO1xuICAgIGlmIChlcSA9PSAtMSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmICh0cnlEZWNvZGVVcmlDb21wb25lbnQoY29va2llLnN1YnN0cmluZygwLCBlcSkudHJpbSgpKSA9PSBuYW1lKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGNvb2tpZS5zdWJzdHJpbmcoZXEgKyAxKS50cmltKCk7XG4gICAgICByZXR1cm4gdHJ5RGVjb2RlVXJpQ29tcG9uZW50KHZhbHVlLCB2YWx1ZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIFRoaXMgbWV0aG9kIHNob3VsZCBub3QgYmUgaW5saW5lZCB0byBwcmV2ZW50IFRyeUNhdGNoIGRlb3B0aW1pemF0aW9uLlxuICogTm9JbmxpbmUga2V5d29yZCBhdCB0aGUgZW5kIG9mIGZ1bmN0aW9uIG5hbWUgYWxzbyBwcmV2ZW50cyBDbG9zdXJlIGNvbXBpbGVyXG4gKiBmcm9tIGlubGluaW5nIHRoZSBmdW5jdGlvbi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHRyeUdldERvY3VtZW50Q29va2llTm9JbmxpbmUod2luKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbi5kb2N1bWVudC5jb29raWU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBBY3QgYXMgaWYgbm8gY29va2llIGlzIGF2YWlsYWJsZS4gRXhjZXB0aW9ucyBjYW4gYmUgdGhyb3duIHdoZW5cbiAgICAvLyBBTVAgZG9jcyBhcmUgb3BlbmVkIG9uIG9yaWdpbnMgdGhhdCBkbyBub3QgYWxsb3cgc2V0dGluZ1xuICAgIC8vIGNvb2tpZXMgc3VjaCBhcyBudWxsIG9yaWdpbnMuXG4gICAgcmV0dXJuICcnO1xuICB9XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIGNvb2tpZS4gVGhlIGNvb2tpZSBhY2Nlc3MgaXMgcmVzdHJpY3RlZCBhbmQgbXVzdFxuICogZ28gdGhyb3VnaCB0aGUgcHJpdmFjeSByZXZpZXcuIEJlZm9yZSB1c2luZyB0aGlzIG1ldGhvZCBwbGVhc2UgZmlsZSBhXG4gKiBHaXRIdWIgaXNzdWUgd2l0aCBcIlByaXZhY3kgUmV2aWV3XCIgbGFiZWwuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7dGltZX0gZXhwaXJhdGlvblRpbWVcbiAqIEBwYXJhbSB7e1xuICogICBoaWdoZXN0QXZhaWxhYmxlRG9tYWluOihib29sZWFufHVuZGVmaW5lZCksXG4gKiAgIGRvbWFpbjooc3RyaW5nfHVuZGVmaW5lZClcbiAqIH09fSBvcHRfb3B0aW9uc1xuICogICAgIC0gaGlnaGVzdEF2YWlsYWJsZURvbWFpbjogSWYgdHJ1ZSwgc2V0IHRoZSBjb29raWUgYXQgdGhlIHdpZGVzdCBkb21haW5cbiAqICAgICAgIHNjb3BlIGFsbG93ZWQgYnkgdGhlIGJyb3dzZXIuIEUuZy4gb24gZXhhbXBsZS5jb20gaWYgd2UgYXJlIGN1cnJlbnRseVxuICogICAgICAgb24gd3d3LmV4YW1wbGUuY29tLlxuICogICAgIC0gZG9tYWluOiBFeHBsaWNpdCBkb21haW4gdG8gc2V0LlxuICogICAgIC0gYWxsb3dPblByb3h5T3JpZ2luOiBBbGxvdyBzZXR0aW5nIGEgY29va2llIG9uIHRoZSBBTVAgQ2FjaGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRDb29raWUod2luLCBuYW1lLCB2YWx1ZSwgZXhwaXJhdGlvblRpbWUsIG9wdF9vcHRpb25zKSB7XG4gIGNoZWNrT3JpZ2luRm9yU2V0dGluZ0Nvb2tpZSh3aW4sIG9wdF9vcHRpb25zLCBuYW1lKTtcbiAgaWYgKG9wdF9vcHRpb25zICYmIG9wdF9vcHRpb25zLmhpZ2hlc3RBdmFpbGFibGVEb21haW4pIHtcbiAgICBjb25zdCBwYXJ0cyA9IHdpbi5sb2NhdGlvbi5ob3N0bmFtZS5zcGxpdCgnLicpO1xuICAgIGxldCBkb21haW4gPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTtcbiAgICBmb3IgKGxldCBpID0gcGFydHMubGVuZ3RoIC0gMjsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGRvbWFpbiA9IHBhcnRzW2ldICsgJy4nICsgZG9tYWluO1xuICAgICAgdHJ5U2V0Q29va2llKHdpbiwgbmFtZSwgdmFsdWUsIGV4cGlyYXRpb25UaW1lLCBkb21haW4pO1xuICAgICAgaWYgKGdldENvb2tpZSh3aW4sIG5hbWUpID09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgbGV0IGRvbWFpbiA9IHVuZGVmaW5lZDtcbiAgaWYgKG9wdF9vcHRpb25zICYmIG9wdF9vcHRpb25zLmRvbWFpbikge1xuICAgIGRvbWFpbiA9IG9wdF9vcHRpb25zLmRvbWFpbjtcbiAgfVxuICB0cnlTZXRDb29raWUod2luLCBuYW1lLCB2YWx1ZSwgZXhwaXJhdGlvblRpbWUsIGRvbWFpbik7XG59XG5cbi8qKlxuICogQXR0ZW1wdCB0byBzZXQgYSBjb29raWUgd2l0aCB0aGUgZ2l2ZW4gcGFyYW1zLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge3RpbWV9IGV4cGlyYXRpb25UaW1lXG4gKiBAcGFyYW0ge3N0cmluZ3x1bmRlZmluZWR9IGRvbWFpblxuICovXG5mdW5jdGlvbiB0cnlTZXRDb29raWUod2luLCBuYW1lLCB2YWx1ZSwgZXhwaXJhdGlvblRpbWUsIGRvbWFpbikge1xuICAvLyBXZSBkbyBub3QgYWxsb3cgc2V0dGluZyBjb29raWVzIG9uIHRoZSBkb21haW4gdGhhdCBjb250YWlucyBib3RoXG4gIC8vIHRoZSBjZG4uIGFuZCB3d3cuIGhvc3RzLlxuICBpZiAoZG9tYWluID09ICdhbXBwcm9qZWN0Lm9yZycpIHtcbiAgICAvLyBBY3RpdmVseSBkZWxldGUgdGhlbS5cbiAgICB2YWx1ZSA9ICdkZWxldGUnO1xuICAgIGV4cGlyYXRpb25UaW1lID0gMDtcbiAgfVxuICBjb25zdCBjb29raWUgPSBlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnPScgK1xuICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSArXG4gICAgICAnOyBwYXRoPS8nICtcbiAgICAgIChkb21haW4gPyAnOyBkb21haW49JyArIGRvbWFpbiA6ICcnKSArXG4gICAgICAnOyBleHBpcmVzPScgKyBuZXcgRGF0ZShleHBpcmF0aW9uVGltZSkudG9VVENTdHJpbmcoKTtcbiAgdHJ5IHtcbiAgICB3aW4uZG9jdW1lbnQuY29va2llID0gY29va2llO1xuICB9IGNhdGNoIChpZ25vcmUpIHtcbiAgICAvLyBEbyBub3QgdGhyb3cgaWYgc2V0dGluZyB0aGUgY29va2llIGZhaWxlZCBFeGNlcHRpb25zIGNhbiBiZSB0aHJvd25cbiAgICAvLyB3aGVuIEFNUCBkb2NzIGFyZSBvcGVuZWQgb24gb3JpZ2lucyB0aGF0IGRvIG5vdCBhbGxvdyBzZXR0aW5nXG4gICAgLy8gY29va2llcyBzdWNoIGFzIG51bGwgb3JpZ2lucy5cbiAgfVxufVxuXG4vKipcbiAqIFRocm93cyBpZiBhIGdpdmVuIGNvb2tpZSBzaG91bGQgbm90IGJlIHNldCBvbiB0aGUgZ2l2ZW4gb3JpZ2luLlxuICogVGhpcyBpcyBhIGRlZmVuc2UtaW4tZGVwdGguIENhbGxlcnMgc2hvdWxkIG5ldmVyIHJ1biBpbnRvIHRoaXMuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IU9iamVjdHx1bmRlZmluZWR9IG9wdGlvbnNcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEZvciB0aGUgZXJyb3IgbWVzc2FnZS5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPcmlnaW5Gb3JTZXR0aW5nQ29va2llKHdpbiwgb3B0aW9ucywgbmFtZSkge1xuICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmFsbG93T25Qcm94eU9yaWdpbikge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoaXNQcm94eU9yaWdpbih3aW4ubG9jYXRpb24uaHJlZikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Nob3VsZCBuZXZlciBhdHRlbXB0IHRvIHNldCBjb29raWUgb24gcHJveHkgb3JpZ2luOiAnXG4gICAgICAgICsgbmFtZSk7XG4gIH1cblxuICBjb25zdCBjdXJyZW50ID0gcGFyc2VVcmwod2luLmxvY2F0aW9uLmhyZWYpLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XG4gIGNvbnN0IHByb3h5ID0gcGFyc2VVcmwodXJscy5jZG4pLmhvc3RuYW1lLnRvTG93ZXJDYXNlKCk7XG4gIGlmIChjdXJyZW50ID09IHByb3h5IHx8IGVuZHNXaXRoKGN1cnJlbnQsICcuJyArIHByb3h5KSkge1xuICAgIHRocm93IG5ldyBFcnJvcignU2hvdWxkIG5ldmVyIGF0dGVtcHQgdG8gc2V0IGNvb2tpZSBvbiBwcm94eSBvcmlnaW4uJ1xuICAgICAgICArICcgKGluIGRlcHRoIGNoZWNrKTogJyArIG5hbWUpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtjc3NFc2NhcGV9IGZyb20gJy4uL3RoaXJkX3BhcnR5L2Nzcy1lc2NhcGUvY3NzLWVzY2FwZSc7XG5pbXBvcnQge2Rldn0gZnJvbSAnLi9sb2cnO1xuaW1wb3J0IHtkaWN0fSBmcm9tICcuL3V0aWxzL29iamVjdCc7XG5pbXBvcnQge3N0YXJ0c1dpdGh9IGZyb20gJy4vc3RyaW5nJztcbmltcG9ydCB7dG9XaW59IGZyb20gJy4vdHlwZXMnO1xuXG5jb25zdCBIVE1MX0VTQ0FQRV9DSEFSUyA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICBcIidcIjogJyYjeDI3OycsXG4gICdgJzogJyYjeDYwOycsXG59O1xuY29uc3QgSFRNTF9FU0NBUEVfUkVHRVggPSAvKCZ8PHw+fFwifCd8YCkvZztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuZXhwb3J0IGNvbnN0IFVQR1JBREVfVE9fQ1VTVE9NRUxFTUVOVF9QUk9NSVNFID1cbiAgICAnX19BTVBfVVBHX1BSTSc7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBVUEdSQURFX1RPX0NVU1RPTUVMRU1FTlRfUkVTT0xWRVIgPVxuICAgICdfX0FNUF9VUEdfUkVTJztcblxuLyoqXG4gKiBXYWl0cyB1bnRpbCB0aGUgY2hpbGQgZWxlbWVudCBpcyBjb25zdHJ1Y3RlZC4gT25jZSB0aGUgY2hpbGQgaXMgZm91bmQsIHRoZVxuICogY2FsbGJhY2sgaXMgZXhlY3V0ZWQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVsZW1lbnQpOmJvb2xlYW59IGNoZWNrRnVuY1xuICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFja1xuICovXG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvckNoaWxkKHBhcmVudCwgY2hlY2tGdW5jLCBjYWxsYmFjaykge1xuICBpZiAoY2hlY2tGdW5jKHBhcmVudCkpIHtcbiAgICBjYWxsYmFjaygpO1xuICAgIHJldHVybjtcbiAgfVxuICAvKiogQGNvbnN0IHshV2luZG93fSAqL1xuICBjb25zdCB3aW4gPSB0b1dpbihwYXJlbnQub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldyk7XG4gIGlmICh3aW4uTXV0YXRpb25PYnNlcnZlcikge1xuICAgIC8qKiBAY29uc3Qge011dGF0aW9uT2JzZXJ2ZXJ9ICovXG4gICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgd2luLk11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgaWYgKGNoZWNrRnVuYyhwYXJlbnQpKSB7XG4gICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKHBhcmVudCwge2NoaWxkTGlzdDogdHJ1ZX0pO1xuICB9IGVsc2Uge1xuICAgIC8qKiBAY29uc3Qge251bWJlcn0gKi9cbiAgICBjb25zdCBpbnRlcnZhbCA9IHdpbi5zZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAoY2hlY2tGdW5jKHBhcmVudCkpIHtcbiAgICAgICAgd2luLmNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH0sIC8qIG1pbGxpc2Vjb25kcyAqLyA1KTtcbiAgfVxufVxuXG4vKipcbiAqIFdhaXRzIHVudGlsIHRoZSBjaGlsZCBlbGVtZW50IGlzIGNvbnN0cnVjdGVkLiBPbmNlIHRoZSBjaGlsZCBpcyBmb3VuZCwgdGhlXG4gKiBwcm9taXNlIGlzIHJlc29sdmVkLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBjaGVja0Z1bmNcbiAqIEByZXR1cm4geyFQcm9taXNlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvckNoaWxkUHJvbWlzZShwYXJlbnQsIGNoZWNrRnVuYykge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgd2FpdEZvckNoaWxkKHBhcmVudCwgY2hlY2tGdW5jLCByZXNvbHZlKTtcbiAgfSk7XG59XG5cbi8qKlxuICogV2FpdHMgZm9yIGRvY3VtZW50J3MgYm9keSB0byBiZSBhdmFpbGFibGUuXG4gKiBXaWxsIGJlIGRlcHJlY2F0ZWQgc29vbjsgdXNlIHtAbGluayBBbXBEb2Mjd2hlbkJvZHlBdmFpbGFibGV9IG9yXG4gKiBAe2xpbmsgRG9jdW1lbnRTdGF0ZSNvbkJvZHlBdmFpbGFibGV9IGluc3RlYWQuXG4gKiBAcGFyYW0geyFEb2N1bWVudH0gZG9jXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGNhbGxiYWNrXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yQm9keShkb2MsIGNhbGxiYWNrKSB7XG4gIHdhaXRGb3JDaGlsZChkb2MuZG9jdW1lbnRFbGVtZW50LCAoKSA9PiAhIWRvYy5ib2R5LCBjYWxsYmFjayk7XG59XG5cblxuLyoqXG4gKiBXYWl0cyBmb3IgZG9jdW1lbnQncyBib2R5IHRvIGJlIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEByZXR1cm4geyFQcm9taXNlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvckJvZHlQcm9taXNlKGRvYykge1xuICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgd2FpdEZvckJvZHkoZG9jLCByZXNvbHZlKTtcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBSZW1vdmVzIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRWxlbWVudChlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50LnBhcmVudEVsZW1lbnQpIHtcbiAgICBlbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGNoaWxkIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ2hpbGRyZW4ocGFyZW50KSB7XG4gIHdoaWxlIChwYXJlbnQuZmlyc3RDaGlsZCkge1xuICAgIHBhcmVudC5yZW1vdmVDaGlsZChwYXJlbnQuZmlyc3RDaGlsZCk7XG4gIH1cbn1cblxuXG4vKipcbiAqIENvcGllcyBhbGwgY2hpbGRyZW4gbm9kZXMgb2YgZWxlbWVudCBcImZyb21cIiB0byBlbGVtZW50IFwidG9cIi4gQ2hpbGQgbm9kZXNcbiAqIGFyZSBkZWVwbHkgY2xvbmVkLiBOb3RpY2UsIHRoYXQgdGhpcyBtZXRob2Qgc2hvdWxkIGJlIHVzZWQgd2l0aCBjYXJlIGFuZFxuICogcHJlZmVyYWJseSBvbiBzbWFsbGVyIHN1YnRyZWVzLlxuICogQHBhcmFtIHshRWxlbWVudH0gZnJvbVxuICogQHBhcmFtIHshRWxlbWVudHwhRG9jdW1lbnRGcmFnbWVudH0gdG9cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvcHlDaGlsZHJlbihmcm9tLCB0bykge1xuICBjb25zdCBmcmFnID0gdG8ub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIGZvciAobGV0IG4gPSBmcm9tLmZpcnN0Q2hpbGQ7IG47IG4gPSBuLm5leHRTaWJsaW5nKSB7XG4gICAgZnJhZy5hcHBlbmRDaGlsZChuLmNsb25lTm9kZSh0cnVlKSk7XG4gIH1cbiAgdG8uYXBwZW5kQ2hpbGQoZnJhZyk7XG59XG5cbi8qKlxuICogSW5zZXJ0IHRoZSBlbGVtZW50IGluIHRoZSByb290IGFmdGVyIHRoZSBlbGVtZW50IG5hbWVkIGFmdGVyIG9yXG4gKiBpZiB0aGF0IGlzIG51bGwgYXQgdGhlIGJlZ2lubmluZy5cbiAqIEBwYXJhbSB7IUVsZW1lbnR8IVNoYWRvd1Jvb3R9IHJvb3RcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7P05vZGV9IGFmdGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnNlcnRBZnRlck9yQXRTdGFydChyb290LCBlbGVtZW50LCBhZnRlcikge1xuICBpZiAoYWZ0ZXIpIHtcbiAgICBpZiAoYWZ0ZXIubmV4dFNpYmxpbmcpIHtcbiAgICAgIHJvb3QuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIGFmdGVyLm5leHRTaWJsaW5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcm9vdC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gQWRkIGF0IHRoZSBzdGFydC5cbiAgICByb290Lmluc2VydEJlZm9yZShlbGVtZW50LCByb290LmZpcnN0Q2hpbGQpO1xuICB9XG59XG5cbi8qKlxuICogQWRkIGF0dHJpYnV0ZXMgdG8gYW4gZWxlbWVudC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7IUpzb25PYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSBhdHRyaWJ1dGVzXG4gKiBAcmV0dXJuIHshRWxlbWVudH0gY3JlYXRlZCBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRBdHRyaWJ1dGVzVG9FbGVtZW50KGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcbiAgZm9yIChjb25zdCBhdHRyIGluIGF0dHJpYnV0ZXMpIHtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyaWJ1dGVzW2F0dHJdKTtcbiAgfVxuICByZXR1cm4gZWxlbWVudDtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgZWxlbWVudCBvbiBkb2N1bWVudCB3aXRoIHNwZWNpZmllZCB0YWdOYW1lIGFuZCBhdHRyaWJ1dGVzLlxuICogQHBhcmFtIHshRG9jdW1lbnR9IGRvY1xuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEBwYXJhbSB7IUpzb25PYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSBhdHRyaWJ1dGVzXG4gKiBAcmV0dXJuIHshRWxlbWVudH0gY3JlYXRlZCBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVFbGVtZW50V2l0aEF0dHJpYnV0ZXMoZG9jLCB0YWdOYW1lLCBhdHRyaWJ1dGVzKSB7XG4gIGNvbnN0IGVsZW1lbnQgPSBkb2MuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcbiAgcmV0dXJuIGFkZEF0dHJpYnV0ZXNUb0VsZW1lbnQoZWxlbWVudCwgYXR0cmlidXRlcyk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIG5vZGUgaXMgY29ubmVjdGVkIChhdHRhY2hlZCkuXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogQHNlZSBodHRwczovL2RvbS5zcGVjLndoYXR3Zy5vcmcvI2Nvbm5lY3RlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDb25uZWN0ZWROb2RlKG5vZGUpIHtcbiAgLy8gXCJBbiBlbGVtZW50IGlzIGNvbm5lY3RlZCBpZiBpdHMgc2hhZG93LWluY2x1ZGluZyByb290IGlzIGEgZG9jdW1lbnQuXCJcbiAgbGV0IG4gPSBub2RlO1xuICBkbyB7XG4gICAgbiA9IHJvb3ROb2RlRm9yKG4pO1xuICAgIGlmIChuLmhvc3QpIHtcbiAgICAgIG4gPSBuLmhvc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfSB3aGlsZSAodHJ1ZSk7XG4gIHJldHVybiBuLm5vZGVUeXBlID09PSBOb2RlLkRPQ1VNRU5UX05PREU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgcm9vdCBmb3IgYSBnaXZlbiBub2RlLiBEb2VzIG5vdCBjcm9zcyBzaGFkb3cgRE9NIGJvdW5kYXJ5LlxuICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICogQHJldHVybiB7IU5vZGV9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByb290Tm9kZUZvcihub2RlKSB7XG4gIGlmIChOb2RlLnByb3RvdHlwZS5nZXRSb290Tm9kZSkge1xuICAgIC8vIFR5cGUgY2hlY2tlciBzYXlzIGBnZXRSb290Tm9kZWAgbWF5IHJldHVybiBudWxsLlxuICAgIHJldHVybiBub2RlLmdldFJvb3ROb2RlKCkgfHwgbm9kZTtcbiAgfVxuICBsZXQgbjtcbiAgZm9yIChuID0gbm9kZTsgISFuLnBhcmVudE5vZGU7IG4gPSBuLnBhcmVudE5vZGUpIHt9XG4gIHJldHVybiBuO1xufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBjbG9zZXN0IGVsZW1lbnQgdGhhdCBzYXRpc2ZpZXMgdGhlIGNhbGxiYWNrIGZyb20gdGhpcyBlbGVtZW50XG4gKiB1cCB0aGUgRE9NIHN1YnRyZWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBjYWxsYmFja1xuICogQHBhcmFtIHtFbGVtZW50PX0gb3B0X3N0b3BBdCBvcHRpb25hbCBlbGVtbnQgdG8gc3RvcCB0aGUgc2VhcmNoIGF0LlxuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9zZXN0KGVsZW1lbnQsIGNhbGxiYWNrLCBvcHRfc3RvcEF0KSB7XG4gIGZvciAobGV0IGVsID0gZWxlbWVudDsgZWwgJiYgZWwgIT09IG9wdF9zdG9wQXQ7IGVsID0gZWwucGFyZW50RWxlbWVudCkge1xuICAgIGlmIChjYWxsYmFjayhlbCkpIHtcbiAgICAgIHJldHVybiBlbDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59XG5cblxuLyoqXG4gKiBGaW5kcyB0aGUgY2xvc2VzdCBub2RlIHRoYXQgc2F0aXNmaWVzIHRoZSBjYWxsYmFjayBmcm9tIHRoaXMgbm9kZVxuICogdXAgdGhlIERPTSBzdWJ0cmVlLlxuICogQHBhcmFtIHshTm9kZX0gbm9kZVxuICogQHBhcmFtIHtmdW5jdGlvbighTm9kZSk6Ym9vbGVhbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4gez9Ob2RlfVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xvc2VzdE5vZGUobm9kZSwgY2FsbGJhY2spIHtcbiAgZm9yIChsZXQgbiA9IG5vZGU7IG47IG4gPSBuLnBhcmVudE5vZGUpIHtcbiAgICBpZiAoY2FsbGJhY2sobikpIHtcbiAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBjbG9zZXN0IGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUgZnJvbSB0aGlzIGVsZW1lbnRcbiAqIHVwIHRoZSBET00gc3VidHJlZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RCeVRhZyhlbGVtZW50LCB0YWdOYW1lKSB7XG4gIGlmIChlbGVtZW50LmNsb3Nlc3QpIHtcbiAgICByZXR1cm4gZWxlbWVudC5jbG9zZXN0KHRhZ05hbWUpO1xuICB9XG4gIHRhZ05hbWUgPSB0YWdOYW1lLnRvVXBwZXJDYXNlKCk7XG4gIHJldHVybiBjbG9zZXN0KGVsZW1lbnQsIGVsID0+IHtcbiAgICByZXR1cm4gZWwudGFnTmFtZSA9PSB0YWdOYW1lO1xuICB9KTtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgY2xvc2VzdCBlbGVtZW50IHdpdGggdGhlIHNwZWNpZmllZCBzZWxlY3RvciBmcm9tIHRoaXMgZWxlbWVudFxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yXG4gKiBAcmV0dXJuIHs/RWxlbWVudH0gY2xvc2VzdCBhbmNlc3RvciBpZiBmb3VuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNsb3Nlc3RCeVNlbGVjdG9yKGVsZW1lbnQsIHNlbGVjdG9yKSB7XG4gIGlmIChlbGVtZW50LmNsb3Nlc3QpIHtcbiAgICByZXR1cm4gZWxlbWVudC5jbG9zZXN0KHNlbGVjdG9yKTtcbiAgfVxuXG4gIHJldHVybiBjbG9zZXN0KGVsZW1lbnQsIGVsID0+IHtcbiAgICByZXR1cm4gbWF0Y2hlcyhlbCwgc2VsZWN0b3IpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIGdpdmVuIGVsZW1lbnQgbWF0Y2hlcyB0aGUgc2VsZWN0b3JcbiAqIEBwYXJhbSAgeyFFbGVtZW50fSBlbCBUaGUgZWxlbWVudCB0byB2ZXJpZnlcbiAqIEBwYXJhbSAge3N0cmluZ30gc2VsZWN0b3IgVGhlIHNlbGVjdG9yIHRvIGNoZWNrIGFnYWluc3RcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGVsZW1lbnQgbWF0Y2hlZCB0aGUgc2VsZWN0b3IuIEZhbHNlIG90aGVyd2lzZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoZXMoZWwsIHNlbGVjdG9yKSB7XG4gIGNvbnN0IG1hdGNoZXIgPSBlbC5tYXRjaGVzIHx8XG4gICAgICBlbC53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgIGVsLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuICAgICAgZWwubXNNYXRjaGVzU2VsZWN0b3IgfHxcbiAgICAgIGVsLm9NYXRjaGVzU2VsZWN0b3I7XG4gIGlmIChtYXRjaGVyKSB7XG4gICAgcmV0dXJuIG1hdGNoZXIuY2FsbChlbCwgc2VsZWN0b3IpO1xuICB9XG4gIHJldHVybiBmYWxzZTsgLy8gSUU4IGFsd2F5cyByZXR1cm5zIGZhbHNlLlxufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBmaXJzdCBkZXNjZW5kYW50IGVsZW1lbnQgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fCFEb2N1bWVudHwhU2hhZG93Um9vdH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHRhZ05hbWVcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWxlbWVudEJ5VGFnKGVsZW1lbnQsIHRhZ05hbWUpIHtcbiAgY29uc3QgZWxlbWVudHMgPSBlbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZ05hbWUpO1xuICByZXR1cm4gZWxlbWVudHNbMF0gfHwgbnVsbDtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBmaXJzdCBjaGlsZCBlbGVtZW50IHRoYXQgc2F0aXNmaWVzIHRoZSBjYWxsYmFjay5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtmdW5jdGlvbighRWxlbWVudCk6Ym9vbGVhbn0gY2FsbGJhY2tcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRFbGVtZW50KHBhcmVudCwgY2FsbGJhY2spIHtcbiAgZm9yIChsZXQgY2hpbGQgPSBwYXJlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7IGNoaWxkO1xuICAgIGNoaWxkID0gY2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nKSB7XG4gICAgaWYgKGNhbGxiYWNrKGNoaWxkKSkge1xuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vKipcbiAqIEZpbmRzIGFsbCBjaGlsZCBlbGVtZW50cyB0aGF0IHNhdGlzZnkgdGhlIGNhbGxiYWNrLlxuICogQHBhcmFtIHshRWxlbWVudH0gcGFyZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBjYWxsYmFja1xuICogQHJldHVybiB7IUFycmF5PCFFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkRWxlbWVudHMocGFyZW50LCBjYWxsYmFjaykge1xuICBjb25zdCBjaGlsZHJlbiA9IFtdO1xuICBmb3IgKGxldCBjaGlsZCA9IHBhcmVudC5maXJzdEVsZW1lbnRDaGlsZDsgY2hpbGQ7XG4gICAgY2hpbGQgPSBjaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcpIHtcbiAgICBpZiAoY2FsbGJhY2soY2hpbGQpKSB7XG4gICAgICBjaGlsZHJlbi5wdXNoKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNoaWxkcmVuO1xufVxuXG5cbi8qKlxuICogRmluZHMgdGhlIGxhc3QgY2hpbGQgZWxlbWVudCB0aGF0IHNhdGlzZmllcyB0aGUgY2FsbGJhY2suXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUVsZW1lbnQpOmJvb2xlYW59IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxhc3RDaGlsZEVsZW1lbnQocGFyZW50LCBjYWxsYmFjaykge1xuICBmb3IgKGxldCBjaGlsZCA9IHBhcmVudC5sYXN0RWxlbWVudENoaWxkOyBjaGlsZDtcbiAgICBjaGlsZCA9IGNoaWxkLnByZXZpb3VzRWxlbWVudFNpYmxpbmcpIHtcbiAgICBpZiAoY2FsbGJhY2soY2hpbGQpKSB7XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEZpbmRzIGFsbCBjaGlsZCBub2RlcyB0aGF0IHNhdGlzZnkgdGhlIGNhbGxiYWNrLlxuICogVGhlc2Ugbm9kZXMgY2FuIGluY2x1ZGUgVGV4dCwgQ29tbWVudCBhbmQgb3RoZXIgY2hpbGQgbm9kZXMuXG4gKiBAcGFyYW0geyFOb2RlfSBwYXJlbnRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIU5vZGUpOmJvb2xlYW59IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHshQXJyYXk8IU5vZGU+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGROb2RlcyhwYXJlbnQsIGNhbGxiYWNrKSB7XG4gIGNvbnN0IG5vZGVzID0gW107XG4gIGZvciAobGV0IGNoaWxkID0gcGFyZW50LmZpcnN0Q2hpbGQ7IGNoaWxkO1xuICAgIGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmcpIHtcbiAgICBpZiAoY2FsbGJhY2soY2hpbGQpKSB7XG4gICAgICBub2Rlcy5wdXNoKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGVzO1xufVxuXG4vKipcbiAqIEB0eXBlIHtib29sZWFufHVuZGVmaW5lZH1cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5sZXQgc2NvcGVTZWxlY3RvclN1cHBvcnRlZDtcblxuLyoqXG4gKiBAcGFyYW0ge2Jvb2xlYW58dW5kZWZpbmVkfSB2YWxcbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0U2NvcGVTZWxlY3RvclN1cHBvcnRlZEZvclRlc3RpbmcodmFsKSB7XG4gIHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQgPSB2YWw7XG59XG5cbi8qKlxuICogVGVzdCB0aGF0IHRoZSA6c2NvcGUgc2VsZWN0b3IgaXMgc3VwcG9ydGVkIGFuZCBiZWhhdmVzIGNvcnJlY3RseS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNTY29wZVNlbGVjdG9yU3VwcG9ydGVkKHBhcmVudCkge1xuICBjb25zdCBkb2MgPSBwYXJlbnQub3duZXJEb2N1bWVudDtcbiAgdHJ5IHtcbiAgICBjb25zdCB0ZXN0RWxlbWVudCA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCB0ZXN0Q2hpbGQgPSBkb2MuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGVzdEVsZW1lbnQuYXBwZW5kQ2hpbGQodGVzdENoaWxkKTtcbiAgICAvLyBOT1RFKGN2aWFsaXosICMxMjM4Myk6IEZpcmVmb3gncyBpbXBsZW1lbnRhdGlvbiBpcyBpbmNvbXBsZXRlLFxuICAgIC8vIHRoZXJlZm9yZSB3ZSB0ZXN0IGFjdHVhbCBmdW5jdGlvbmFsaXR5IG9mYDpzY29wZWAgYXMgd2VsbC5cbiAgICByZXR1cm4gdGVzdEVsZW1lbnQuLypPSyovcXVlcnlTZWxlY3RvcignOnNjb3BlIGRpdicpID09PSB0ZXN0Q2hpbGQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgZmlyc3QgY2hpbGQgZWxlbWVudCB0aGF0IGhhcyB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRFbGVtZW50QnlBdHRyKHBhcmVudCwgYXR0cikge1xuICByZXR1cm4gc2NvcGVkUXVlcnlTZWxlY3Rvci8qT0sqLyhwYXJlbnQsIGA+IFske2F0dHJ9XWApO1xufVxuXG5cbi8qKlxuICogRmluZHMgdGhlIGxhc3QgY2hpbGQgZWxlbWVudCB0aGF0IGhhcyB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHBhcmVudFxuICogQHBhcmFtIHtzdHJpbmd9IGF0dHJcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGFzdENoaWxkRWxlbWVudEJ5QXR0cihwYXJlbnQsIGF0dHIpIHtcbiAgcmV0dXJuIGxhc3RDaGlsZEVsZW1lbnQocGFyZW50LCBlbCA9PiB7XG4gICAgcmV0dXJuIGVsLmhhc0F0dHJpYnV0ZShhdHRyKTtcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBGaW5kcyBhbGwgY2hpbGQgZWxlbWVudHMgdGhhdCBoYXMgdGhlIHNwZWNpZmllZCBhdHRyaWJ1dGUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBhdHRyXG4gKiBAcmV0dXJuIHshTm9kZUxpc3Q8IUVsZW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRFbGVtZW50c0J5QXR0cihwYXJlbnQsIGF0dHIpIHtcbiAgcmV0dXJuIHNjb3BlZFF1ZXJ5U2VsZWN0b3JBbGwvKk9LKi8ocGFyZW50LCBgPiBbJHthdHRyfV1gKTtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBmaXJzdCBjaGlsZCBlbGVtZW50IHRoYXQgaGFzIHRoZSBzcGVjaWZpZWQgdGFnIG5hbWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG4gKiBAcmV0dXJuIHs/RWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoaWxkRWxlbWVudEJ5VGFnKHBhcmVudCwgdGFnTmFtZSkge1xuICByZXR1cm4gc2NvcGVkUXVlcnlTZWxlY3Rvci8qT0sqLyhwYXJlbnQsIGA+ICR7dGFnTmFtZX1gKTtcbn1cblxuXG4vKipcbiAqIEZpbmRzIGFsbCBjaGlsZCBlbGVtZW50cyB3aXRoIHRoZSBzcGVjaWZpZWQgdGFnIG5hbWUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBwYXJlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG4gKiBAcmV0dXJuIHshTm9kZUxpc3Q8IUVsZW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2hpbGRFbGVtZW50c0J5VGFnKHBhcmVudCwgdGFnTmFtZSkge1xuICByZXR1cm4gc2NvcGVkUXVlcnlTZWxlY3RvckFsbC8qT0sqLyhwYXJlbnQsIGA+ICR7dGFnTmFtZX1gKTtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgbWF0Y2hlcyBgc2VsZWN0b3JgLCBzY29wZWQgaW5zaWRlIGByb290YC5cbiAqIE5vdGU6IGluIElFLCB0aGlzIGNhdXNlcyBhIHF1aWNrIG11dGF0aW9uIG9mIHRoZSBlbGVtZW50J3MgY2xhc3MgbGlzdC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHJvb3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxuICogQHJldHVybiB7P0VsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY29wZWRRdWVyeVNlbGVjdG9yKHJvb3QsIHNlbGVjdG9yKSB7XG4gIGlmIChzY29wZVNlbGVjdG9yU3VwcG9ydGVkID09IG51bGwpIHtcbiAgICBzY29wZVNlbGVjdG9yU3VwcG9ydGVkID0gaXNTY29wZVNlbGVjdG9yU3VwcG9ydGVkKHJvb3QpO1xuICB9XG4gIGlmIChzY29wZVNlbGVjdG9yU3VwcG9ydGVkKSB7XG4gICAgcmV0dXJuIHJvb3QuLypPSyovcXVlcnlTZWxlY3RvcihgOnNjb3BlICR7c2VsZWN0b3J9YCk7XG4gIH1cblxuICAvLyBPbmx5IElFLlxuICBjb25zdCB1bmlxdWUgPSAnaS1hbXBodG1sLXNjb3BlZCc7XG4gIHJvb3QuY2xhc3NMaXN0LmFkZCh1bmlxdWUpO1xuICBjb25zdCBlbGVtZW50ID0gcm9vdC4vKk9LKi9xdWVyeVNlbGVjdG9yKGAuJHt1bmlxdWV9ICR7c2VsZWN0b3J9YCk7XG4gIHJvb3QuY2xhc3NMaXN0LnJlbW92ZSh1bmlxdWUpO1xuICByZXR1cm4gZWxlbWVudDtcbn1cblxuXG4vKipcbiAqIEZpbmRzIHRoZSBldmVyeSBlbGVtZW50IHRoYXQgbWF0Y2hlcyBgc2VsZWN0b3JgLCBzY29wZWQgaW5zaWRlIGByb290YC5cbiAqIE5vdGU6IGluIElFLCB0aGlzIGNhdXNlcyBhIHF1aWNrIG11dGF0aW9uIG9mIHRoZSBlbGVtZW50J3MgY2xhc3MgbGlzdC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IHJvb3RcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxuICogQHJldHVybiB7IU5vZGVMaXN0PCFFbGVtZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjb3BlZFF1ZXJ5U2VsZWN0b3JBbGwocm9vdCwgc2VsZWN0b3IpIHtcbiAgaWYgKHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQgPT0gbnVsbCkge1xuICAgIHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQgPSBpc1Njb3BlU2VsZWN0b3JTdXBwb3J0ZWQocm9vdCk7XG4gIH1cbiAgaWYgKHNjb3BlU2VsZWN0b3JTdXBwb3J0ZWQpIHtcbiAgICByZXR1cm4gcm9vdC4vKk9LKi9xdWVyeVNlbGVjdG9yQWxsKGA6c2NvcGUgJHtzZWxlY3Rvcn1gKTtcbiAgfVxuXG4gIC8vIE9ubHkgSUUuXG4gIGNvbnN0IHVuaXF1ZSA9ICdpLWFtcGh0bWwtc2NvcGVkJztcbiAgcm9vdC5jbGFzc0xpc3QuYWRkKHVuaXF1ZSk7XG4gIGNvbnN0IGVsZW1lbnRzID0gcm9vdC4vKk9LKi9xdWVyeVNlbGVjdG9yQWxsKGAuJHt1bmlxdWV9ICR7c2VsZWN0b3J9YCk7XG4gIHJvb3QuY2xhc3NMaXN0LnJlbW92ZSh1bmlxdWUpO1xuICByZXR1cm4gZWxlbWVudHM7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGVsZW1lbnQgZGF0YS1wYXJhbS0gYXR0cmlidXRlcyBhcyB1cmwgcGFyYW1ldGVycyBrZXktdmFsdWUgcGFpcnMuXG4gKiBlLmcuIGRhdGEtcGFyYW0tc29tZS1hdHRyPXZhbHVlIC0+IHtzb21lQXR0cjogdmFsdWV9LlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtmdW5jdGlvbihzdHJpbmcpOnN0cmluZz19IG9wdF9jb21wdXRlUGFyYW1OYW1lRnVuYyB0byBjb21wdXRlIHRoZSBwYXJhbWV0ZXJcbiAqICAgIG5hbWUsIGdldCBwYXNzZWQgdGhlIGNhbWVsLWNhc2UgcGFyYW1ldGVyIG5hbWUuXG4gKiBAcGFyYW0geyFSZWdFeHA9fSBvcHRfcGFyYW1QYXR0ZXJuIFJlZ2V4IHBhdHRlcm4gdG8gbWF0Y2ggZGF0YSBhdHRyaWJ1dGVzLlxuICogQHJldHVybiB7IUpzb25PYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXREYXRhUGFyYW1zRnJvbUF0dHJpYnV0ZXMoZWxlbWVudCwgb3B0X2NvbXB1dGVQYXJhbU5hbWVGdW5jLFxuICBvcHRfcGFyYW1QYXR0ZXJuKSB7XG4gIGNvbnN0IGNvbXB1dGVQYXJhbU5hbWVGdW5jID0gb3B0X2NvbXB1dGVQYXJhbU5hbWVGdW5jIHx8IChrZXkgPT4ga2V5KTtcbiAgY29uc3QgZGF0YXNldCA9IGVsZW1lbnQuZGF0YXNldDtcbiAgY29uc3QgcGFyYW1zID0gZGljdCgpO1xuICBjb25zdCBwYXJhbVBhdHRlcm4gPSBvcHRfcGFyYW1QYXR0ZXJuID8gb3B0X3BhcmFtUGF0dGVybiA6IC9ecGFyYW0oLispLztcbiAgZm9yIChjb25zdCBrZXkgaW4gZGF0YXNldCkge1xuICAgIGNvbnN0IG1hdGNoZXMgPSBrZXkubWF0Y2gocGFyYW1QYXR0ZXJuKTtcbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgY29uc3QgcGFyYW0gPSBtYXRjaGVzWzFdWzBdLnRvTG93ZXJDYXNlKCkgKyBtYXRjaGVzWzFdLnN1YnN0cigxKTtcbiAgICAgIHBhcmFtc1tjb21wdXRlUGFyYW1OYW1lRnVuYyhwYXJhbSldID0gZGF0YXNldFtrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcGFyYW1zO1xufVxuXG4vKipcbiAqIFdoZXRoZXIgdGhlIGVsZW1lbnQgaGF2ZSBhIG5leHQgbm9kZSBpbiB0aGUgZG9jdW1lbnQgb3JkZXIuXG4gKiBUaGlzIG1lYW5zIGVpdGhlcjpcbiAqICBhLiBUaGUgZWxlbWVudCBpdHNlbGYgaGFzIGEgbmV4dFNpYmxpbmcuXG4gKiAgYi4gQW55IG9mIHRoZSBlbGVtZW50IGFuY2VzdG9ycyBoYXMgYSBuZXh0U2libGluZy5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7P05vZGV9IG9wdF9zdG9wTm9kZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc05leHROb2RlSW5Eb2N1bWVudE9yZGVyKGVsZW1lbnQsIG9wdF9zdG9wTm9kZSkge1xuICBsZXQgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICBkbyB7XG4gICAgaWYgKGN1cnJlbnRFbGVtZW50Lm5leHRTaWJsaW5nKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0gd2hpbGUgKChjdXJyZW50RWxlbWVudCA9IGN1cnJlbnRFbGVtZW50LnBhcmVudE5vZGUpICYmXG4gICAgICAgICAgICBjdXJyZW50RWxlbWVudCAhPSBvcHRfc3RvcE5vZGUpO1xuICByZXR1cm4gZmFsc2U7XG59XG5cblxuLyoqXG4gKiBGaW5kcyBhbGwgYW5jZXN0b3IgZWxlbWVudHMgdGhhdCBzYXRpc2Z5IHByZWRpY2F0ZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGNoaWxkXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFbGVtZW50KTpib29sZWFufSBwcmVkaWNhdGVcbiAqIEByZXR1cm4geyFBcnJheTwhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbmNlc3RvckVsZW1lbnRzKGNoaWxkLCBwcmVkaWNhdGUpIHtcbiAgY29uc3QgYW5jZXN0b3JzID0gW107XG4gIGZvciAobGV0IGFuY2VzdG9yID0gY2hpbGQucGFyZW50RWxlbWVudDsgYW5jZXN0b3I7XG4gICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnRFbGVtZW50KSB7XG4gICAgaWYgKHByZWRpY2F0ZShhbmNlc3RvcikpIHtcbiAgICAgIGFuY2VzdG9ycy5wdXNoKGFuY2VzdG9yKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGFuY2VzdG9ycztcbn1cblxuXG4vKipcbiAqIEZpbmRzIGFsbCBhbmNlc3RvciBlbGVtZW50cyB0aGF0IGhhcyB0aGUgc3BlY2lmaWVkIHRhZyBuYW1lLlxuICogQHBhcmFtIHshRWxlbWVudH0gY2hpbGRcbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWdOYW1lXG4gKiBAcmV0dXJuIHshQXJyYXk8IUVsZW1lbnQ+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYW5jZXN0b3JFbGVtZW50c0J5VGFnKGNoaWxkLCB0YWdOYW1lKSB7XG4gIHRhZ05hbWUgPSB0YWdOYW1lLnRvVXBwZXJDYXNlKCk7XG4gIHJldHVybiBhbmNlc3RvckVsZW1lbnRzKGNoaWxkLCBlbCA9PiB7XG4gICAgcmV0dXJuIGVsLnRhZ05hbWUgPT0gdGFnTmFtZTtcbiAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGNsb25lIG9mIHRoZSBjb250ZW50IG9mIGEgdGVtcGxhdGUgZWxlbWVudC5cbiAqXG4gKiBQb2x5ZmlsbCB0byByZXBsYWNlIC5jb250ZW50IGFjY2VzcyBmb3IgYnJvd3NlcnMgdGhhdCBkbyBub3Qgc3VwcG9ydFxuICogSFRNTFRlbXBsYXRlRWxlbWVudHMgbmF0aXZlbHkuXG4gKlxuICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudHwhRWxlbWVudH0gdGVtcGxhdGVcbiAqIEByZXR1cm4geyFEb2N1bWVudEZyYWdtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVDb250ZW50Q2xvbmUodGVtcGxhdGUpIHtcbiAgaWYgKCdjb250ZW50JyBpbiB0ZW1wbGF0ZSkge1xuICAgIHJldHVybiB0ZW1wbGF0ZS5jb250ZW50LmNsb25lTm9kZSh0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBjb250ZW50ID0gdGVtcGxhdGUub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gICAgY29weUNoaWxkcmVuKHRlbXBsYXRlLCBjb250ZW50KTtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxufVxuXG4vKipcbiAqIEl0ZXJhdGUgb3ZlciBhbiBhcnJheS1saWtlLiBTb21lIGNvbGxlY3Rpb25zIGxpa2UgTm9kZUxpc3QgYXJlXG4gKiBsYXppbHkgZXZhbHVhdGVkIGluIHNvbWUgYnJvd3NlcnMsIGFuZCBhY2Nlc3NpbmcgYGxlbmd0aGAgZm9yY2VzIGZ1bGxcbiAqIGV2YWx1YXRpb24uIFdlIGNhbiBpbXByb3ZlIHBlcmZvcm1hbmNlIGJ5IGl0ZXJhdGluZyB1bnRpbCBhbiBlbGVtZW50IGlzXG4gKiBgdW5kZWZpbmVkYCB0byBhdm9pZCBjaGVja2luZyB0aGUgYGxlbmd0aGAgcHJvcGVydHkuXG4gKiBUZXN0IGNhc2VzOiBodHRwczovL2pzcGVyZi5jb20vaXRlcmF0aW5nLW92ZXItY29sbGVjdGlvbnMtb2YtZWxlbWVudHNcbiAqIEBwYXJhbSB7IUlBcnJheUxpa2U8VD59IGl0ZXJhYmxlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFQsIG51bWJlcil9IGNiXG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXRlcmF0ZUN1cnNvcihpdGVyYWJsZSwgY2IpIHtcbiAgZm9yIChsZXQgaSA9IDAsIHZhbHVlOyAodmFsdWUgPSBpdGVyYWJsZVtpXSkgIT09IHVuZGVmaW5lZDsgaSsrKSB7XG4gICAgY2IodmFsdWUsIGkpO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2Qgd3JhcHMgYXJvdW5kIHdpbmRvdydzIG9wZW4gbWV0aG9kLiBJdCBmaXJzdCB0cmllcyB0byBleGVjdXRlXG4gKiBgb3BlbmAgY2FsbCB3aXRoIHRoZSBwcm92aWRlZCB0YXJnZXQgYW5kIGlmIGl0IGZhaWxzLCBpdCByZXRyaWVzIHRoZSBjYWxsXG4gKiB3aXRoIHRoZSBgX3RvcGAgdGFyZ2V0LiBUaGlzIGlzIG5lY2Vzc2FyeSBnaXZlbiB0aGF0IGluIHNvbWUgZW1iZWRkaW5nXG4gKiBzY2VuYXJpb3MsIHN1Y2ggYXMgaU9TJyBXS1dlYlZpZXcsIG5hdmlnYXRpb24gdG8gYF9ibGFua2AgYW5kIG90aGVyIHRhcmdldHNcbiAqIGlzIGJsb2NrZWQgYnkgZGVmYXVsdC5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldFxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfZmVhdHVyZXNcbiAqIEByZXR1cm4gez9XaW5kb3d9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvcGVuV2luZG93RGlhbG9nKHdpbiwgdXJsLCB0YXJnZXQsIG9wdF9mZWF0dXJlcykge1xuICAvLyBUcnkgZmlyc3Qgd2l0aCB0aGUgc3BlY2lmaWVkIHRhcmdldC4gSWYgd2UncmUgaW5zaWRlIHRoZSBXS1dlYlZpZXcgb3JcbiAgLy8gYSBzaW1pbGFyIGVudmlyb25tZW50cywgdGhpcyBtZXRob2QgaXMgZXhwZWN0ZWQgdG8gZmFpbCBieSBkZWZhdWx0IGZvclxuICAvLyBhbGwgdGFyZ2V0cyBleGNlcHQgYF90b3BgLlxuICBsZXQgcmVzO1xuICB0cnkge1xuICAgIHJlcyA9IHdpbi5vcGVuKHVybCwgdGFyZ2V0LCBvcHRfZmVhdHVyZXMpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgZGV2KCkuZXJyb3IoJ0RPTScsICdGYWlsZWQgdG8gb3BlbiB1cmwgb24gdGFyZ2V0OiAnLCB0YXJnZXQsIGUpO1xuICB9XG5cbiAgLy8gVGhlbiB0cnkgd2l0aCBgX3RvcGAgdGFyZ2V0LlxuICBpZiAoIXJlcyAmJiB0YXJnZXQgIT0gJ190b3AnKSB7XG4gICAgcmVzID0gd2luLm9wZW4odXJsLCAnX3RvcCcpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgZWxlbWVudCBpcyBhIHNjcmlwdCB0YWcgd2l0aCBhcHBsaWNhdGlvbi9qc29uIHR5cGUuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNKc29uU2NyaXB0VGFnKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQudGFnTmFtZSA9PSAnU0NSSVBUJyAmJlxuICAgICAgICAgICAgZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKS50b1VwcGVyQ2FzZSgpID09ICdBUFBMSUNBVElPTi9KU09OJztcbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBlbGVtZW50IGlzIGEgc2NyaXB0IHRhZyB3aXRoIGFwcGxpY2F0aW9uL2pzb24gdHlwZS5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0pzb25MZFNjcmlwdFRhZyhlbGVtZW50KSB7XG4gIHJldHVybiBlbGVtZW50LnRhZ05hbWUgPT0gJ1NDUklQVCcgJiZcbiAgICAgIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCd0eXBlJykudG9VcHBlckNhc2UoKSA9PSAnQVBQTElDQVRJT04vTEQrSlNPTic7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgcGFnZSdzIGRpcmVjdGlvbiBpcyByaWdodCB0byBsZWZ0IG9yIG5vdC5cbiAqIEBwYXJhbSB7IURvY3VtZW50fSBkb2NcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1JUTChkb2MpIHtcbiAgY29uc3QgZGlyID0gZG9jLmJvZHkuZ2V0QXR0cmlidXRlKCdkaXInKVxuICAgICAgICAgICAgICAgICB8fCBkb2MuZG9jdW1lbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGlyJylcbiAgICAgICAgICAgICAgICAgfHwgJ2x0cic7XG4gIHJldHVybiBkaXIgPT0gJ3J0bCc7XG59XG5cblxuLyoqXG4gKiBFc2NhcGVzIGFuIGlkZW50IChJRCBvciBhIGNsYXNzIG5hbWUpIHRvIGJlIHVzZWQgYXMgYSBDU1Mgc2VsZWN0b3IuXG4gKlxuICogU2VlIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3NvbS8jc2VyaWFsaXplLWFuLWlkZW50aWZpZXIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkZW50XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVDc3NTZWxlY3RvcklkZW50KGlkZW50KSB7XG4gIHJldHVybiBjc3NFc2NhcGUoaWRlbnQpO1xufVxuXG4vKipcbiAqIEVzY2FwZXMgYW4gaWRlbnQgaW4gYSB3YXkgdGhhdCBjYW4gYmUgdXNlZCBieSA6bnRoLWNoaWxkKCkgcHN1ZWRvLWNsYXNzLlxuICpcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vdzNjL2Nzc3dnLWRyYWZ0cy9pc3N1ZXMvMjMwNi5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ3xudW1iZXJ9IGlkZW50XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVDc3NTZWxlY3Rvck50aChpZGVudCkge1xuICBjb25zdCBlc2NhcGVkID0gU3RyaW5nKGlkZW50KTtcbiAgLy8gRW5zdXJlIGl0IGRvZXNuJ3QgY2xvc2UgdGhlIG50aC1jaGlsZCBwc3VlZG8gY2xhc3MuXG4gIGRldigpLmFzc2VydChlc2NhcGVkLmluZGV4T2YoJyknKSA9PT0gLTEpO1xuICByZXR1cm4gZXNjYXBlZDtcbn1cblxuLyoqXG4gKiBFc2NhcGVzIGA8YCwgYD5gIGFuZCBvdGhlciBIVE1MIGNoYXJjYXRlcnMgd2l0aCB0aGVpciBlc2NhcGVkIGZvcm1zLlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZUh0bWwodGV4dCkge1xuICBpZiAoIXRleHQpIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuICByZXR1cm4gdGV4dC5yZXBsYWNlKEhUTUxfRVNDQVBFX1JFR0VYLCBlc2NhcGVIdG1sQ2hhcik7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNcbiAqIEByZXR1cm4gc3RyaW5nXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZUh0bWxDaGFyKGMpIHtcbiAgcmV0dXJuIEhUTUxfRVNDQVBFX0NIQVJTW2NdO1xufVxuXG4vKipcbiAqIFRyaWVzIHRvIGZvY3VzIG9uIHRoZSBnaXZlbiBlbGVtZW50OyBmYWlscyBzaWxlbnRseSBpZiBicm93c2VyIHRocm93cyBhblxuICogZXhjZXB0aW9uLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJ5Rm9jdXMoZWxlbWVudCkge1xuICB0cnkge1xuICAgIGVsZW1lbnQuLypPSyovZm9jdXMoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIElFIDw9IDcgbWF5IHRocm93IGV4Y2VwdGlvbnMgd2hlbiBmb2N1c2luZyBvbiBoaWRkZW4gaXRlbXMuXG4gIH1cbn1cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBnaXZlbiB3aW5kb3cgaXMgaW4gYW4gaWZyYW1lIG9yIG5vdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJZnJhbWVkKHdpbikge1xuICByZXR1cm4gd2luLnBhcmVudCAmJiB3aW4ucGFyZW50ICE9IHdpbjtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIGlmIHRoaXMgZWxlbWVudCBpcyBhbiBBTVAgZWxlbWVudFxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQW1wRWxlbWVudChlbGVtZW50KSB7XG4gIGNvbnN0IHRhZyA9IGVsZW1lbnQudGFnTmFtZTtcbiAgLy8gVXNlIHByZWZpeCB0byByZWNvZ25pemUgQU1QIGVsZW1lbnQuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugc3R1YlxuICAvLyBtYXkgbm90IGJlIGF0dGFjaGVkIHlldC5cbiAgcmV0dXJuIHN0YXJ0c1dpdGgodGFnLCAnQU1QLScpICYmXG4gICAgICAvLyBTb21lIFwiYW1wLSpcIiBlbGVtZW50cyBhcmUgbm90IHJlYWxseSBBTVAgZWxlbWVudHMuIDpzbWg6XG4gICAgICAhKHRhZyA9PSAnQU1QLVNUSUNLWS1BRC1UT1AtUEFERElORycgfHwgdGFnID09ICdBTVAtQk9EWScpO1xufVxuXG4vKipcbiAqIFJldHVybiBhIHByb21pc2UgdGhhdCByZXNvbHZlIHdoZW4gYW4gQU1QIGVsZW1lbnQgdXBncmFkZSBmcm9tIEhUTUxFbGVtZW50XG4gKiB0byBDdXN0b21FbGVtZW50XG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhRWxlbWVudD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB3aGVuVXBncmFkZWRUb0N1c3RvbUVsZW1lbnQoZWxlbWVudCkge1xuICBkZXYoKS5hc3NlcnQoaXNBbXBFbGVtZW50KGVsZW1lbnQpLCAnZWxlbWVudCBpcyBub3QgQW1wRWxlbWVudCcpO1xuICBpZiAoZWxlbWVudC5jcmVhdGVkQ2FsbGJhY2spIHtcbiAgICAvLyBFbGVtZW50IGFscmVhZHkgaXMgQ3VzdG9tRWxlbWVudDtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGVsZW1lbnQpO1xuICB9XG4gIC8vIElmIEVsZW1lbnQgaXMgc3RpbGwgSFRNTEVsZW1lbnQsIHdhaXQgZm9yIGl0IHRvIHVwZ3JhZGUgdG8gY3VzdG9tRWxlbWVudFxuICAvLyBOb3RlOiB1c2UgcHVyZSBzdHJpbmcgdG8gYXZvaWQgb2JmdXNjYXRpb24gYmV0d2VlbiB2ZXJzaW9ucy5cbiAgaWYgKCFlbGVtZW50W1VQR1JBREVfVE9fQ1VTVE9NRUxFTUVOVF9QUk9NSVNFXSkge1xuICAgIGVsZW1lbnRbVVBHUkFERV9UT19DVVNUT01FTEVNRU5UX1BST01JU0VdID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBlbGVtZW50W1VQR1JBREVfVE9fQ1VTVE9NRUxFTUVOVF9SRVNPTFZFUl0gPSByZXNvbHZlO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIGVsZW1lbnRbVVBHUkFERV9UT19DVVNUT01FTEVNRU5UX1BST01JU0VdO1xufVxuXG4vKipcbiAqIFJlcGxhY2VtZW50IGZvciBgRWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlbigpYCBtZXRob2QuXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRWxlbWVudC9yZXF1ZXN0RnVsbHNjcmVlblxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gZnVsbHNjcmVlbkVudGVyKGVsZW1lbnQpIHtcbiAgY29uc3QgcmVxdWVzdEZzID0gZWxlbWVudC5yZXF1ZXN0RnVsbHNjcmVlblxuICAgfHwgZWxlbWVudC5yZXF1ZXN0RnVsbFNjcmVlblxuICAgfHwgZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlblxuICAgfHwgZWxlbWVudC53ZWJraXRSZXF1ZXN0RnVsbFNjcmVlblxuICAgfHwgZWxlbWVudC53ZWJraXRFbnRlckZ1bGxzY3JlZW5cbiAgIHx8IGVsZW1lbnQud2Via2l0RW50ZXJGdWxsU2NyZWVuXG4gICB8fCBlbGVtZW50Lm1zUmVxdWVzdEZ1bGxzY3JlZW5cbiAgIHx8IGVsZW1lbnQubXNSZXF1ZXN0RnVsbFNjcmVlblxuICAgfHwgZWxlbWVudC5tb3pSZXF1ZXN0RnVsbHNjcmVlblxuICAgfHwgZWxlbWVudC5tb3pSZXF1ZXN0RnVsbFNjcmVlbjtcbiAgaWYgKHJlcXVlc3RGcykge1xuICAgIHJlcXVlc3RGcy5jYWxsKGVsZW1lbnQpO1xuICB9XG59XG5cbi8qKlxuICogUmVwbGFjZW1lbnQgZm9yIGBEb2N1bWVudC5leGl0RnVsbHNjcmVlbigpYCBtZXRob2QuXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRG9jdW1lbnQvZXhpdEZ1bGxzY3JlZW5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZ1bGxzY3JlZW5FeGl0KGVsZW1lbnQpIHtcbiAgbGV0IGV4aXRGcyA9IGVsZW1lbnQuY2FuY2VsRnVsbFNjcmVlblxuICAgICAgICAgICAgICDCoHx8IGVsZW1lbnQuZXhpdEZ1bGxzY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50LmV4aXRGdWxsU2NyZWVuXG4gICAgICAgICAgICAgIMKgfHwgZWxlbWVudC53ZWJraXRFeGl0RnVsbHNjcmVlblxuICAgICAgICAgICAgICDCoHx8IGVsZW1lbnQud2Via2l0RXhpdEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50Lm1vekNhbmNlbEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICAgwqB8fCBlbGVtZW50Lm1zRXhpdEZ1bGxzY3JlZW47XG4gIGlmIChleGl0RnMpIHtcbiAgICBleGl0RnMuY2FsbChlbGVtZW50KTtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKGVsZW1lbnQub3duZXJEb2N1bWVudCkge1xuICAgIGV4aXRGcyA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5jYW5jZWxGdWxsU2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50LmV4aXRGdWxsc2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50LmV4aXRGdWxsU2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50LndlYmtpdEV4aXRGdWxsU2NyZWVuXG4gICAgICAgICAgICAgfHwgZWxlbWVudC5vd25lckRvY3VtZW50LndlYmtpdENhbmNlbEZ1bGxTY3JlZW5cbiAgICAgICAgICAgICB8fCBlbGVtZW50Lm93bmVyRG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlblxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC5tc0V4aXRGdWxsc2NyZWVuO1xuICB9XG4gIGlmIChleGl0RnMpIHtcbiAgICBleGl0RnMuY2FsbChlbGVtZW50Lm93bmVyRG9jdW1lbnQpO1xuICAgIHJldHVybjtcbiAgfVxufVxuXG5cbi8qKlxuICogUmVwbGFjZW1lbnQgZm9yIGBEb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudGAuXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvRG9jdW1lbnQvZnVsbHNjcmVlbkVsZW1lbnRcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bGxzY3JlZW5FbGVtZW50KGVsZW1lbnQpIHtcbiAgY29uc3QgaXNGdWxsc2NyZWVuID0gZWxlbWVudC53ZWJraXREaXNwbGF5aW5nRnVsbHNjcmVlbjtcbiAgaWYgKGlzRnVsbHNjcmVlbikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChlbGVtZW50Lm93bmVyRG9jdW1lbnQpIHtcbiAgICBjb25zdCBmdWxsc2NyZWVuRWxlbWVudCA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudFxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRWxlbWVudFxuICAgICAgICAgICAgIHx8IGVsZW1lbnQub3duZXJEb2N1bWVudC5tb3pGdWxsU2NyZWVuRWxlbWVudFxuICAgICAgICAgICAgIHx8IGVsZW1lbnQud2Via2l0Q3VycmVudEZ1bGxTY3JlZW5FbGVtZW50O1xuICAgIGlmIChmdWxsc2NyZWVuRWxlbWVudCA9PSBlbGVtZW50KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBub2RlIGlzIG5vdCBkaXNhYmxlZC5cbiAqXG4gKiBJRTggY2FuIHJldHVybiBmYWxzZSBwb3NpdGl2ZXMsIHNlZSB7QGxpbmsgbWF0Y2hlc30uXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogQHNlZSBodHRwczovL3d3dy53My5vcmcvVFIvaHRtbDUvZm9ybXMuaHRtbCNjb25jZXB0LWZlLWRpc2FibGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VuYWJsZWQoZWxlbWVudCkge1xuICByZXR1cm4gIShlbGVtZW50LmRpc2FibGVkIHx8IG1hdGNoZXMoZWxlbWVudCwgJzpkaXNhYmxlZCcpKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgKiBhcyBkb20gZnJvbSAnLi9kb20nO1xuaW1wb3J0IHtcbiAgZ2V0QW1wZG9jLFxuICBnZXRFeGlzdGluZ1NlcnZpY2VGb3JEb2NJbkVtYmVkU2NvcGUsXG4gIGdldFNlcnZpY2VQcm9taXNlLFxuICBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyxcbiAgZ2V0U2VydmljZVByb21pc2VPck51bGwsXG4gIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsRm9yRG9jLFxuICBnZXRUb3BXaW5kb3csXG59IGZyb20gJy4vc2VydmljZSc7XG5pbXBvcnQge3RvV2lufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7dXNlcn0gZnJvbSAnLi9sb2cnO1xuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhIHNlcnZpY2UgZm9yIHRoZSBnaXZlbiBpZCBhbmQgd2luZG93LiBBbHNvIGV4cGVjdHNcbiAqIGFuIGVsZW1lbnQgdGhhdCBoYXMgdGhlIGFjdHVhbCBpbXBsZW1lbnRhdGlvbi4gVGhlIHByb21pc2UgcmVzb2x2ZXMgd2hlblxuICogdGhlIGltcGxlbWVudGF0aW9uIGxvYWRlZC5cbiAqIFVzZXJzIHNob3VsZCB0eXBpY2FsbHkgd3JhcCB0aGlzIGFzIGEgc3BlY2lhbCBwdXJwb3NlIGZ1bmN0aW9uIChlLmcuXG4gKiBTZXJ2aWNlcy52aWV3cG9ydEZvckRvYyguLi4pKSBmb3IgdHlwZSBzYWZldHkgYW5kIGJlY2F1c2UgdGhlIGZhY3Rvcnkgc2hvdWxkIG5vdCBiZVxuICogcGFzc2VkIGFyb3VuZC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uIE5hbWUgb2YgdGhlIGN1c3RvbSBleHRlbnNpb24gdGhhdCBwcm92aWRlcyB0aGVcbiAqICAgICBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZWxlbWVudCBXaGV0aGVyIHRoaXMgc2VydmljZSBpcyBwcm92aWRlZCBieSBhblxuICogICAgIGVsZW1lbnQsIG5vdCB0aGUgZXh0ZW5zaW9uLlxuICogQHJldHVybiB7IVByb21pc2U8Kj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50U2VydmljZSh3aW4sIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KSB7XG4gIHJldHVybiBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpLnRoZW4oXG4gICAgICBzZXJ2aWNlID0+IGFzc2VydFNlcnZpY2Uoc2VydmljZSwgaWQsIGV4dGVuc2lvbikpO1xufVxuXG4vKipcbiAqIFNhbWUgYXMgZ2V0RWxlbWVudFNlcnZpY2UgYnV0IHByb2R1Y2VzIG51bGwgaWYgdGhlIGdpdmVuIGVsZW1lbnQgaXMgbm90XG4gKiBhY3R1YWxseSBhdmFpbGFibGUgb24gdGhlIGN1cnJlbnQgcGFnZS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uIE5hbWUgb2YgdGhlIGN1c3RvbSBleHRlbnNpb24gdGhhdCBwcm92aWRlcyB0aGVcbiAqICAgICBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZWxlbWVudCBXaGV0aGVyIHRoaXMgc2VydmljZSBpcyBwcm92aWRlZCBieSBhblxuICogICAgIGVsZW1lbnQsIG5vdCB0aGUgZXh0ZW5zaW9uLlxuICogQHJldHVybiB7IVByb21pc2U8P09iamVjdD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpIHtcbiAgY29uc3QgcyA9IGdldFNlcnZpY2VQcm9taXNlT3JOdWxsKHdpbiwgaWQpO1xuICBpZiAocykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAocyk7XG4gIH1cbiAgcmV0dXJuIGdldEVsZW1lbnRTZXJ2aWNlUHJvbWlzZU9yTnVsbCh3aW4sIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnROYW1lIE5hbWUgb2YgYW4gZXh0ZW5kZWQgY3VzdG9tIGVsZW1lbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoaXMgZWxlbWVudCBpcyBzY2hlZHVsZWQgdG8gYmUgbG9hZGVkLlxuICovXG5mdW5jdGlvbiBpc0VsZW1lbnRTY2hlZHVsZWQod2luLCBlbGVtZW50TmFtZSkge1xuICAvLyBTZXQgaW4gY3VzdG9tLWVsZW1lbnQuanNcbiAgaWYgKCF3aW4uYW1wRXh0ZW5kZWRFbGVtZW50cykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gISF3aW4uYW1wRXh0ZW5kZWRFbGVtZW50c1tlbGVtZW50TmFtZV07XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgYSBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgYW5kIHdpbmRvdy4gQWxzbyBleHBlY3RzXG4gKiBhbiBlbGVtZW50IHRoYXQgaGFzIHRoZSBhY3R1YWwgaW1wbGVtZW50YXRpb24uIFRoZSBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBpbXBsZW1lbnRhdGlvbiBsb2FkZWQuXG4gKiBVc2VycyBzaG91bGQgdHlwaWNhbGx5IHdyYXAgdGhpcyBhcyBhIHNwZWNpYWwgcHVycG9zZSBmdW5jdGlvbiAoZS5nLlxuICogU2VydmljZXMudmlld3BvcnRGb3JEb2MoLi4uKSkgZm9yIHR5cGUgc2FmZXR5IGFuZCBiZWNhdXNlIHRoZSBmYWN0b3J5IHNob3VsZCBub3QgYmVcbiAqIHBhc3NlZCBhcm91bmQuXG4gKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb24gTmFtZSBvZiB0aGUgY3VzdG9tIGV4dGVuc2lvbiB0aGF0IHByb3ZpZGVzIHRoZVxuICogICAgIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgc2VydmljZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9lbGVtZW50IFdoZXRoZXIgdGhpcyBzZXJ2aWNlIGlzIHByb3ZpZGVkIGJ5IGFuXG4gKiAgICAgZWxlbWVudCwgbm90IHRoZSBleHRlbnNpb24uXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwqPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jKG5vZGVPckRvYywgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpIHtcbiAgcmV0dXJuIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2MoXG4gICAgICBub2RlT3JEb2MsIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KVxuICAgICAgLnRoZW4oc2VydmljZSA9PiBhc3NlcnRTZXJ2aWNlKHNlcnZpY2UsIGlkLCBleHRlbnNpb24pKTtcbn1cblxuLyoqXG4gKiBTYW1lIGFzIGdldEVsZW1lbnRTZXJ2aWNlIGJ1dCBwcm9kdWNlcyBudWxsIGlmIHRoZSBnaXZlbiBlbGVtZW50IGlzIG5vdFxuICogYWN0dWFsbHkgYXZhaWxhYmxlIG9uIHRoZSBjdXJyZW50IHBhZ2UuXG4gKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb24gTmFtZSBvZiB0aGUgY3VzdG9tIGV4dGVuc2lvbiB0aGF0IHByb3ZpZGVzIHRoZVxuICogICAgIGltcGxlbWVudGF0aW9uIG9mIHRoaXMgc2VydmljZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9lbGVtZW50IFdoZXRoZXIgdGhpcyBzZXJ2aWNlIGlzIHByb3ZpZGVkIGJ5IGFuXG4gKiAgICAgZWxlbWVudCwgbm90IHRoZSBleHRlbnNpb24uXG4gKiBAcmV0dXJuIHshUHJvbWlzZTw/T2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2MoXG4gIG5vZGVPckRvYywgaWQsIGV4dGVuc2lvbiwgb3B0X2VsZW1lbnQpIHtcbiAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKG5vZGVPckRvYyk7XG4gIGNvbnN0IHMgPSBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbEZvckRvYyhub2RlT3JEb2MsIGlkKTtcbiAgaWYgKHMpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTw/T2JqZWN0Pn0gKi8gKHMpO1xuICB9XG4gIC8vIE1pY3JvdGFzayBpcyBuZWNlc3NhcnkgdG8gZW5zdXJlIHRoYXQgd2luZG93LmFtcEV4dGVuZGVkRWxlbWVudHMgaGFzIGJlZW5cbiAgLy8gaW5pdGlhbGl6ZWQuXG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICBpZiAoIW9wdF9lbGVtZW50ICYmIGlzRWxlbWVudFNjaGVkdWxlZChhbXBkb2Mud2luLCBleHRlbnNpb24pKSB7XG4gICAgICByZXR1cm4gZ2V0U2VydmljZVByb21pc2VGb3JEb2Mobm9kZU9yRG9jLCBpZCk7XG4gICAgfVxuICAgIC8vIFdhaXQgZm9yIEhFQUQgdG8gZnVsbHkgZm9ybSBiZWZvcmUgZGVueWluZyBhY2Nlc3MgdG8gdGhlIHNlcnZpY2UuXG4gICAgcmV0dXJuIGFtcGRvYy53aGVuQm9keUF2YWlsYWJsZSgpLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gSWYgdGhpcyBzZXJ2aWNlIGlzIHByb3ZpZGVkIGJ5IGFuIGVsZW1lbnQsIHRoZW4gd2UgY2FuJ3QgZGVwZW5kIG9uIHRoZVxuICAgICAgLy8gc2VydmljZSAodGhleSBtYXkgbm90IHVzZSB0aGUgZWxlbWVudCkuXG4gICAgICBpZiAob3B0X2VsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsRm9yRG9jKG5vZGVPckRvYywgaWQpO1xuICAgICAgfSBlbHNlIGlmIChpc0VsZW1lbnRTY2hlZHVsZWQoYW1wZG9jLndpbiwgZXh0ZW5zaW9uKSkge1xuICAgICAgICByZXR1cm4gZ2V0U2VydmljZVByb21pc2VGb3JEb2Mobm9kZU9yRG9jLCBpZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9KTtcbiAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgZm9yIHNlcnZpY2UgZm9yIHRoZSBnaXZlbiBpZCBpbiB0aGUgZW1iZWQgc2NvcGUgb2ZcbiAqIGEgZ2l2ZW4gbm9kZSwgaWYgaXQgZXhpc3RzLiBPdGhlcndpc2UsIGZhbGxzIGJhY2sgdG8gYW1wZG9jIHNjb3BlIElGRlxuICogdGhlIGdpdmVuIG5vZGUgaXMgaW4gdGhlIHRvcC1sZXZlbCB3aW5kb3cuXG4gKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb24gTmFtZSBvZiB0aGUgY3VzdG9tIGVsZW1lbnQgdGhhdCBwcm92aWRlc1xuICogICAgIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGlzIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHshUHJvbWlzZTw/T2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2NJbkVtYmVkU2NvcGUoXG4gIG5vZGVPckRvYywgaWQsIGV4dGVuc2lvbikge1xuICBjb25zdCBzID0gZ2V0RXhpc3RpbmdTZXJ2aWNlRm9yRG9jSW5FbWJlZFNjb3BlKG5vZGVPckRvYywgaWQpO1xuICBpZiAocykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAoUHJvbWlzZS5yZXNvbHZlKHMpKTtcbiAgfVxuICAvLyBSZXR1cm4gZW1iZWQtc2NvcGUgZWxlbWVudCBzZXJ2aWNlIHByb21pc2UgaWYgc2NoZWR1bGVkLlxuICBpZiAobm9kZU9yRG9jLm5vZGVUeXBlKSB7XG4gICAgY29uc3Qgd2luID0gdG9XaW4oLyoqIEB0eXBlIHshRG9jdW1lbnR9ICovIChcbiAgICAgIG5vZGVPckRvYy5vd25lckRvY3VtZW50IHx8IG5vZGVPckRvYykuZGVmYXVsdFZpZXcpO1xuICAgIGNvbnN0IHRvcFdpbiA9IGdldFRvcFdpbmRvdyh3aW4pO1xuICAgIC8vIEluIGVtYmVkcywgZG9jLXNjb3BlIHNlcnZpY2VzIGFyZSB3aW5kb3ctc2NvcGUuIEJ1dCBtYWtlIHN1cmUgdG9cbiAgICAvLyBvbmx5IGRvIHRoaXMgZm9yIGVtYmVkcyAobm90IHRoZSB0b3Agd2luZG93KSwgb3RoZXJ3aXNlIHdlJ2QgZ3JhYlxuICAgIC8vIGEgcHJvbWlzZSBmcm9tIHRoZSB3cm9uZyBzZXJ2aWNlIGhvbGRlciB3aGljaCB3b3VsZCBuZXZlciByZXNvbHZlLlxuICAgIGlmICh3aW4gIT09IHRvcFdpbikge1xuICAgICAgcmV0dXJuIGdldEVsZW1lbnRTZXJ2aWNlUHJvbWlzZU9yTnVsbCh3aW4sIGlkLCBleHRlbnNpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjayB0byBhbXBkb2MgSUZGIHRoZSBnaXZlbiBub2RlIGlzIF9ub3RfIEZJRS5cbiAgICAgIHJldHVybiBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jKG5vZGVPckRvYywgaWQsIGV4dGVuc2lvbik7XG4gICAgfVxuICB9XG4gIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q+fSAqLyAoUHJvbWlzZS5yZXNvbHZlKG51bGwpKTtcbn1cblxuLyoqXG4gKiBUaHJvd3MgdXNlciBlcnJvciBpZiBgc2VydmljZWAgaXMgbnVsbC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXJ2aWNlXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBleHRlbnNpb25cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhc3NlcnRTZXJ2aWNlKHNlcnZpY2UsIGlkLCBleHRlbnNpb24pIHtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKHVzZXIoKS5hc3NlcnQoc2VydmljZSxcbiAgICAgICdTZXJ2aWNlICVzIHdhcyByZXF1ZXN0ZWQgdG8gYmUgcHJvdmlkZWQgdGhyb3VnaCAlcywgJyArXG4gICAgICAnYnV0ICVzIGlzIG5vdCBsb2FkZWQgaW4gdGhlIGN1cnJlbnQgcGFnZS4gVG8gZml4IHRoaXMgJyArXG4gICAgICAncHJvYmxlbSBsb2FkIHRoZSBKYXZhU2NyaXB0IGZpbGUgZm9yICVzIGluIHRoaXMgcGFnZS4nLFxuICAgICAgaWQsIGV4dGVuc2lvbiwgZXh0ZW5zaW9uLCBleHRlbnNpb24pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwcm9taXNlIGZvciBzZXJ2aWNlIHdpdGggYGlkYCBvbiB0aGUgZ2l2ZW4gd2luZG93IGlmIGF2YWlsYWJsZS5cbiAqIE90aGVyd2lzZSwgcmVzb2x2ZXMgd2l0aCBudWxsIChzZXJ2aWNlIHdhcyBub3QgcmVnaXN0ZXJlZCkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcGFyYW0ge3N0cmluZ30gZXh0ZW5zaW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZWxlbWVudFxuICogQHJldHVybiB7IVByb21pc2U8T2JqZWN0Pn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldEVsZW1lbnRTZXJ2aWNlUHJvbWlzZU9yTnVsbCh3aW4sIGlkLCBleHRlbnNpb24sIG9wdF9lbGVtZW50KSB7XG4gIC8vIE1pY3JvdGFzayBpcyBuZWNlc3NhcnkgdG8gZW5zdXJlIHRoYXQgd2luZG93LmFtcEV4dGVuZGVkRWxlbWVudHMgaGFzIGJlZW5cbiAgLy8gaW5pdGlhbGl6ZWQuXG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IHtcbiAgICBpZiAoIW9wdF9lbGVtZW50ICYmIGlzRWxlbWVudFNjaGVkdWxlZCh3aW4sIGV4dGVuc2lvbikpIHtcbiAgICAgIHJldHVybiBnZXRTZXJ2aWNlUHJvbWlzZSh3aW4sIGlkKTtcbiAgICB9XG4gICAgLy8gV2FpdCBmb3IgSEVBRCB0byBmdWxseSBmb3JtIGJlZm9yZSBkZW55aW5nIGFjY2VzcyB0byB0aGUgc2VydmljZS5cbiAgICByZXR1cm4gZG9tLndhaXRGb3JCb2R5UHJvbWlzZSh3aW4uZG9jdW1lbnQpLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gSWYgdGhpcyBzZXJ2aWNlIGlzIHByb3ZpZGVkIGJ5IGFuIGVsZW1lbnQsIHRoZW4gd2UgY2FuJ3QgZGVwZW5kIG9uIHRoZVxuICAgICAgLy8gc2VydmljZSAodGhleSBtYXkgbm90IHVzZSB0aGUgZWxlbWVudCkuXG4gICAgICBpZiAob3B0X2VsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsKHdpbiwgaWQpO1xuICAgICAgfSBlbHNlIGlmIChpc0VsZW1lbnRTY2hlZHVsZWQod2luLCBleHRlbnNpb24pKSB7XG4gICAgICAgIHJldHVybiBnZXRTZXJ2aWNlUHJvbWlzZSh3aW4sIGlkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0pO1xuICB9KTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAgKiBXaGV0aGVyIGFkZEV2ZW50TGlzdGVuZXIgc3VwcG9ydHMgb3B0aW9ucyBvciBvbmx5IHRha2VzIGNhcHR1cmUgYXMgYSBib29sZWFuXG4gICogQHR5cGUge2Jvb2xlYW58dW5kZWZpbmVkfVxuICAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICAqL1xubGV0IG9wdHNTdXBwb3J0ZWQ7XG5cbi8qKlxuICogTGlzdGVucyBmb3IgdGhlIHNwZWNpZmllZCBldmVudCBvbiB0aGUgZWxlbWVudC5cbiAqXG4gKiBEbyBub3QgdXNlIHRoaXMgZGlyZWN0bHkuIFRoaXMgbWV0aG9kIGlzIGltcGxlbWVudGVkIGFzIGEgc2hhcmVkXG4gKiBkZXBlbmRlbmN5LiBVc2UgYGxpc3RlbigpYCBpbiBlaXRoZXIgYGV2ZW50LWhlbHBlcmAgb3IgYDNwLWZyYW1lLW1lc3NhZ2luZ2AsXG4gKiBkZXBlbmRpbmcgb24geW91ciB1c2UgY2FzZS5cbiAqXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpfSBsaXN0ZW5lclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfZXZ0TGlzdGVuZXJPcHRzXG4gKiBAcmV0dXJuIHshVW5saXN0ZW5EZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnRlcm5hbExpc3RlbkltcGxlbWVudGF0aW9uKGVsZW1lbnQsIGV2ZW50VHlwZSwgbGlzdGVuZXIsXG4gIG9wdF9ldnRMaXN0ZW5lck9wdHMpIHtcbiAgbGV0IGxvY2FsRWxlbWVudCA9IGVsZW1lbnQ7XG4gIGxldCBsb2NhbExpc3RlbmVyID0gbGlzdGVuZXI7XG4gIC8qKiBAdHlwZSB7P0Z1bmN0aW9ufSAgKi9cbiAgbGV0IHdyYXBwZWQgPSBldmVudCA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBsb2NhbExpc3RlbmVyKGV2ZW50KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyByZXBvcnRFcnJvciBpcyBpbnN0YWxsZWQgZ2xvYmFsbHkgcGVyIHdpbmRvdyBpbiB0aGUgZW50cnkgcG9pbnQuXG4gICAgICBzZWxmLnJlcG9ydEVycm9yKGUpO1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IG9wdHNTdXBwb3J0ZWQgPSBkZXRlY3RFdnRMaXN0ZW5lck9wdHNTdXBwb3J0KCk7XG4gIGxldCBjYXB0dXJlID0gZmFsc2U7XG4gIGlmIChvcHRfZXZ0TGlzdGVuZXJPcHRzKSB7XG4gICAgY2FwdHVyZSA9IG9wdF9ldnRMaXN0ZW5lck9wdHMuY2FwdHVyZTtcbiAgfVxuICBsb2NhbEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIGV2ZW50VHlwZSxcbiAgICAgIHdyYXBwZWQsXG4gICAgICBvcHRzU3VwcG9ydGVkID8gb3B0X2V2dExpc3RlbmVyT3B0cyA6IGNhcHR1cmVcbiAgKTtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBpZiAobG9jYWxFbGVtZW50KSB7XG4gICAgICBsb2NhbEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICBldmVudFR5cGUsXG4gICAgICAgICAgd3JhcHBlZCxcbiAgICAgICAgICBvcHRzU3VwcG9ydGVkID8gb3B0X2V2dExpc3RlbmVyT3B0cyA6IGNhcHR1cmVcbiAgICAgICk7XG4gICAgfVxuICAgIC8vIEVuc3VyZSB0aGVzZSBhcmUgR0MnZFxuICAgIGxvY2FsTGlzdGVuZXIgPSBudWxsO1xuICAgIGxvY2FsRWxlbWVudCA9IG51bGw7XG4gICAgd3JhcHBlZCA9IG51bGw7XG4gIH07XG59XG5cbi8qKlxuICogVGVzdHMgd2hldGhlciB0aGUgYnJvd3NlciBzdXBwb3J0cyBvcHRpb25zIGFzIGFuIGFyZ3VtZW50IG9mIGFkZEV2ZW50TGlzdGVuZXJcbiAqIG9yIG5vdC5cbiAqXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0RXZ0TGlzdGVuZXJPcHRzU3VwcG9ydCgpIHtcbiAgLy8gT25seSBydW4gdGhlIHRlc3Qgb25jZVxuICBpZiAob3B0c1N1cHBvcnRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIG9wdHNTdXBwb3J0ZWQ7XG4gIH1cblxuICBvcHRzU3VwcG9ydGVkID0gZmFsc2U7XG4gIHRyeSB7XG4gICAgLy8gVGVzdCB3aGV0aGVyIGJyb3dzZXIgc3VwcG9ydHMgRXZlbnRMaXN0ZW5lck9wdGlvbnMgb3Igbm90XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIGdldCBjYXB0dXJlKCkge1xuICAgICAgICBvcHRzU3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgfTtcbiAgICBzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3Qtb3B0aW9ucycsIG51bGwsIG9wdGlvbnMpO1xuICAgIHNlbGYucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGVzdC1vcHRpb25zJywgbnVsbCwgb3B0aW9ucyk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIC8vIEV2ZW50TGlzdGVuZXJPcHRpb25zIGFyZSBub3Qgc3VwcG9ydGVkXG4gIH1cbiAgcmV0dXJuIG9wdHNTdXBwb3J0ZWQ7XG59XG5cbi8qKlxuICAqIFJlc2V0cyB0aGUgdGVzdCBmb3Igd2hldGhlciBhZGRFdmVudExpc3RlbmVyIHN1cHBvcnRzIG9wdGlvbnMgb3Igbm90LlxuICAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0RXZ0TGlzdGVuZXJPcHRzU3VwcG9ydEZvclRlc3RpbmcoKSB7XG4gIG9wdHNTdXBwb3J0ZWQgPSB1bmRlZmluZWQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtpbnRlcm5hbExpc3RlbkltcGxlbWVudGF0aW9ufSBmcm9tICcuL2V2ZW50LWhlbHBlci1saXN0ZW4nO1xuaW1wb3J0IHt1c2VyfSBmcm9tICcuL2xvZyc7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gICovXG5jb25zdCBMT0FEX0ZBSUxVUkVfUFJFRklYID0gJ0ZhaWxlZCB0byBsb2FkOic7XG5cbi8qKlxuICogUmV0dXJucyBhIEN1c3RvbUV2ZW50IHdpdGggYSBnaXZlbiB0eXBlIGFuZCBkZXRhaWw7IHN1cHBvcnRzIGZhbGxiYWNrIGZvciBJRS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICogQHBhcmFtIHtPYmplY3R9IGRldGFpbFxuICogQHBhcmFtIHtFdmVudEluaXQ9fSBvcHRfZXZlbnRJbml0XG4gKiBAcmV0dXJuIHshRXZlbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDdXN0b21FdmVudCh3aW4sIHR5cGUsIGRldGFpbCwgb3B0X2V2ZW50SW5pdCkge1xuICBjb25zdCBldmVudEluaXQgPSAvKiogQHR5cGUgeyFDdXN0b21FdmVudEluaXR9ICovICh7ZGV0YWlsfSk7XG4gIE9iamVjdC5hc3NpZ24oZXZlbnRJbml0LCBvcHRfZXZlbnRJbml0KTtcbiAgLy8gd2luLkN1c3RvbUV2ZW50IGlzIGEgZnVuY3Rpb24gb24gRWRnZSwgQ2hyb21lLCBGRiwgU2FmYXJpIGJ1dFxuICAvLyBpcyBhbiBvYmplY3Qgb24gSUUgMTEuXG4gIGlmICh0eXBlb2Ygd2luLkN1c3RvbUV2ZW50ID09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gbmV3IHdpbi5DdXN0b21FdmVudCh0eXBlLCBldmVudEluaXQpO1xuICB9IGVsc2Uge1xuICAgIC8vIERlcHJlY2F0ZWQgZmFsbGJhY2sgZm9yIElFLlxuICAgIGNvbnN0IGUgPSB3aW4uZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQoXG4gICAgICAgIHR5cGUsICEhZXZlbnRJbml0LmJ1YmJsZXMsICEhZXZlbnRJbml0LmNhbmNlbGFibGUsIGRldGFpbCk7XG4gICAgcmV0dXJuIGU7XG4gIH1cbn1cblxuLyoqXG4gKiBMaXN0ZW5zIGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50IG9uIHRoZSBlbGVtZW50LlxuICogQHBhcmFtIHshRXZlbnRUYXJnZXR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGVcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oIUV2ZW50KX0gbGlzdGVuZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0X2V2dExpc3RlbmVyT3B0c1xuICogQHJldHVybiB7IVVubGlzdGVuRGVmfVxuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuKGVsZW1lbnQsIGV2ZW50VHlwZSwgbGlzdGVuZXIsIG9wdF9ldnRMaXN0ZW5lck9wdHMpIHtcbiAgcmV0dXJuIGludGVybmFsTGlzdGVuSW1wbGVtZW50YXRpb24oXG4gICAgICBlbGVtZW50LCBldmVudFR5cGUsIGxpc3RlbmVyLCBvcHRfZXZ0TGlzdGVuZXJPcHRzKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBkYXRhIHByb3BlcnR5IG9mIGFuIGV2ZW50IHdpdGggdGhlIGNvcnJlY3QgdHlwZS5cbiAqIEBwYXJhbSB7IUV2ZW50fHtkYXRhOiAhSnNvbk9iamVjdH19IGV2ZW50XG4gKiBAcmV0dXJuIHs/SnNvbk9iamVjdHxzdHJpbmd8dW5kZWZpbmVkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGF0YShldmVudCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHs/SnNvbk9iamVjdHxzdHJpbmd8dW5kZWZpbmVkfSAqLyAoZXZlbnQuZGF0YSk7XG59XG5cbi8qKlxuICogTGlzdGVucyBmb3IgdGhlIHNwZWNpZmllZCBldmVudCBvbiB0aGUgZWxlbWVudCBhbmQgcmVtb3ZlcyB0aGUgbGlzdGVuZXJcbiAqIGFzIHNvb24gYXMgZXZlbnQgaGFzIGJlZW4gcmVjZWl2ZWQuXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpfSBsaXN0ZW5lclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfZXZ0TGlzdGVuZXJPcHRzXG4gKiBAcmV0dXJuIHshVW5saXN0ZW5EZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW5PbmNlKGVsZW1lbnQsIGV2ZW50VHlwZSwgbGlzdGVuZXIsIG9wdF9ldnRMaXN0ZW5lck9wdHMpIHtcbiAgbGV0IGxvY2FsTGlzdGVuZXIgPSBsaXN0ZW5lcjtcbiAgY29uc3QgdW5saXN0ZW4gPSBpbnRlcm5hbExpc3RlbkltcGxlbWVudGF0aW9uKGVsZW1lbnQsIGV2ZW50VHlwZSwgZXZlbnQgPT4ge1xuICAgIHRyeSB7XG4gICAgICBsb2NhbExpc3RlbmVyKGV2ZW50KTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gRW5zdXJlIGxpc3RlbmVyIGlzIEdDJ2RcbiAgICAgIGxvY2FsTGlzdGVuZXIgPSBudWxsO1xuICAgICAgdW5saXN0ZW4oKTtcbiAgICB9XG4gIH0sIG9wdF9ldnRMaXN0ZW5lck9wdHMpO1xuICByZXR1cm4gdW5saXN0ZW47XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zICBhIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgYXMgc29vbiBhcyB0aGUgc3BlY2lmaWVkIGV2ZW50IGhhc1xuICogZmlyZWQgb24gdGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50VHlwZVxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRfZXZ0TGlzdGVuZXJPcHRzXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFVbmxpc3RlbkRlZik9fSBvcHRfY2FuY2VsIEFuIG9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQsIHdoZW5cbiAqICAgICBwcm92aWRlZCwgd2lsbCBiZSBjYWxsZWQgd2l0aCB0aGUgdW5saXN0ZW5lci4gVGhpcyBnaXZlcyB0aGUgY2FsbGVyXG4gKiAgICAgYWNjZXNzIHRvIHRoZSB1bmxpc3RlbmVyLCBzbyBpdCBtYXkgYmUgY2FsbGVkIG1hbnVhbGx5IHdoZW4gbmVjZXNzYXJ5LlxuICogQHJldHVybiB7IVByb21pc2U8IUV2ZW50Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3Rlbk9uY2VQcm9taXNlKGVsZW1lbnQsIGV2ZW50VHlwZSwgb3B0X2V2dExpc3RlbmVyT3B0cyxcbiAgb3B0X2NhbmNlbCkge1xuICBsZXQgdW5saXN0ZW47XG4gIGNvbnN0IGV2ZW50UHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIHVubGlzdGVuID0gbGlzdGVuT25jZShlbGVtZW50LCBldmVudFR5cGUsIHJlc29sdmUsIG9wdF9ldnRMaXN0ZW5lck9wdHMpO1xuICB9KTtcbiAgZXZlbnRQcm9taXNlLnRoZW4odW5saXN0ZW4sIHVubGlzdGVuKTtcbiAgaWYgKG9wdF9jYW5jZWwpIHtcbiAgICBvcHRfY2FuY2VsKHVubGlzdGVuKTtcbiAgfVxuICByZXR1cm4gZXZlbnRQcm9taXNlO1xufVxuXG5cbi8qKlxuICogV2hldGhlciB0aGUgc3BlY2lmaWVkIGVsZW1lbnQvd2luZG93IGhhcyBiZWVuIGxvYWRlZCBhbHJlYWR5LlxuICogQHBhcmFtIHshRWxlbWVudHwhV2luZG93fSBlbGVPcldpbmRvd1xuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTG9hZGVkKGVsZU9yV2luZG93KSB7XG4gIHJldHVybiAhIShlbGVPcldpbmRvdy5jb21wbGV0ZSB8fCBlbGVPcldpbmRvdy5yZWFkeVN0YXRlID09ICdjb21wbGV0ZSdcbiAgICAgIC8vIElmIHRoZSBwYXNzZWQgaW4gdGhpbmcgaXMgYSBXaW5kb3csIGluZmVyIGxvYWRlZCBzdGF0ZSBmcm9tXG4gICAgICAvL1xuICAgICAgfHwgKGVsZU9yV2luZG93LmRvY3VtZW50XG4gICAgICAgICAgJiYgZWxlT3JXaW5kb3cuZG9jdW1lbnQucmVhZHlTdGF0ZSA9PSAnY29tcGxldGUnKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2UgdGhhdCB3aWxsIHJlc29sdmUgb3IgZmFpbCBiYXNlZCBvbiB0aGUgZWxlT3JXaW5kb3cncyAnbG9hZCdcbiAqIGFuZCAnZXJyb3InIGV2ZW50cy4gT3B0aW9uYWxseSB0aGlzIG1ldGhvZCB0YWtlcyBhIHRpbWVvdXQsIHdoaWNoIHdpbGwgcmVqZWN0XG4gKiB0aGUgcHJvbWlzZSBpZiB0aGUgcmVzb3VyY2UgaGFzIG5vdCBsb2FkZWQgYnkgdGhlbi5cbiAqIEBwYXJhbSB7VH0gZWxlT3JXaW5kb3cgU3VwcG9ydHMgYm90aCBFbGVtZW50cyBhbmQgYXMgYSBzcGVjaWFsIGNhc2UgV2luZG93cy5cbiAqIEByZXR1cm4geyFQcm9taXNlPFQ+fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRQcm9taXNlKGVsZU9yV2luZG93KSB7XG4gIGxldCB1bmxpc3RlbkxvYWQ7XG4gIGxldCB1bmxpc3RlbkVycm9yO1xuICBpZiAoaXNMb2FkZWQoZWxlT3JXaW5kb3cpKSB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShlbGVPcldpbmRvdyk7XG4gIH1cbiAgY29uc3QgbG9hZGluZ1Byb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgLy8gTGlzdGVuIG9uY2Ugc2luY2UgSUUgNS82LzcgZmlyZSB0aGUgb25sb2FkIGV2ZW50IGNvbnRpbnVvdXNseSBmb3JcbiAgICAvLyBhbmltYXRlZCBHSUZzLlxuICAgIGNvbnN0IHRhZ05hbWUgPSBlbGVPcldpbmRvdy50YWdOYW1lO1xuICAgIGlmICh0YWdOYW1lID09PSAnQVVESU8nIHx8IHRhZ05hbWUgPT09ICdWSURFTycpIHtcbiAgICAgIHVubGlzdGVuTG9hZCA9IGxpc3Rlbk9uY2UoZWxlT3JXaW5kb3csICdsb2Fkc3RhcnQnLCByZXNvbHZlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdW5saXN0ZW5Mb2FkID0gbGlzdGVuT25jZShlbGVPcldpbmRvdywgJ2xvYWQnLCByZXNvbHZlKTtcbiAgICB9XG4gICAgLy8gRm9yIGVsZW1lbnRzLCB1bmxpc3RlbiBvbiBlcnJvciAoZG9uJ3QgZm9yIFdpbmRvd3MpLlxuICAgIGlmICh0YWdOYW1lKSB7XG4gICAgICB1bmxpc3RlbkVycm9yID0gbGlzdGVuT25jZShlbGVPcldpbmRvdywgJ2Vycm9yJywgcmVqZWN0KTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBsb2FkaW5nUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICBpZiAodW5saXN0ZW5FcnJvcikge1xuICAgICAgdW5saXN0ZW5FcnJvcigpO1xuICAgIH1cbiAgICByZXR1cm4gZWxlT3JXaW5kb3c7XG4gIH0sICgpID0+IHtcbiAgICBpZiAodW5saXN0ZW5Mb2FkKSB7XG4gICAgICB1bmxpc3RlbkxvYWQoKTtcbiAgICB9XG4gICAgZmFpbGVkVG9Mb2FkKGVsZU9yV2luZG93KTtcbiAgfSk7XG59XG5cbi8qKlxuICogRW1pdCBlcnJvciBvbiBsb2FkIGZhaWx1cmUuXG4gKiBAcGFyYW0geyFFbGVtZW50fCFXaW5kb3d9IGVsZU9yV2luZG93IFN1cHBvcnRzIGJvdGggRWxlbWVudHMgYW5kIGFzIGEgc3BlY2lhbFxuICogICAgIGNhc2UgV2luZG93cy5cbiAqL1xuZnVuY3Rpb24gZmFpbGVkVG9Mb2FkKGVsZU9yV2luZG93KSB7XG4gIC8vIFJlcG9ydCBmYWlsZWQgbG9hZHMgYXMgdXNlciBlcnJvcnMgc28gdGhhdCB0aGV5IGF1dG9tYXRpY2FsbHkgZ29cbiAgLy8gaW50byB0aGUgXCJkb2N1bWVudCBlcnJvclwiIGJ1Y2tldC5cbiAgbGV0IHRhcmdldCA9IGVsZU9yV2luZG93O1xuICBpZiAodGFyZ2V0ICYmIHRhcmdldC5zcmMpIHtcbiAgICB0YXJnZXQgPSB0YXJnZXQuc3JjO1xuICB9XG4gIHRocm93IHVzZXIoKS5jcmVhdGVFcnJvcihMT0FEX0ZBSUxVUkVfUFJFRklYLCB0YXJnZXQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGVycm9yIG1lc3NhZ2UgaXMgd2FzIGNyZWF0ZWQgZm9yIGEgbG9hZCBlcnJvci5cbiAqIEBwYXJhbSB7c3RyaW5nfSBtZXNzYWdlIEFuIGVycm9yIG1lc3NhZ2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0xvYWRFcnJvck1lc3NhZ2UobWVzc2FnZSkge1xuICByZXR1cm4gbWVzc2FnZS5pbmRleE9mKExPQURfRkFJTFVSRV9QUkVGSVgpICE9IC0xO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBFeHBlcmltZW50cyBzeXN0ZW0gYWxsb3dzIGEgZGV2ZWxvcGVyIHRvIG9wdC1pbiB0byB0ZXN0XG4gKiBmZWF0dXJlcyB0aGF0IGFyZSBub3QgeWV0IGZ1bGx5IHRlc3RlZC5cbiAqXG4gKiBFeHBlcmltZW50cyBwYWdlOiBodHRwczovL2Nkbi5hbXBwcm9qZWN0Lm9yZy9leHBlcmltZW50cy5odG1sICpcbiAqL1xuXG5pbXBvcnQge09yaWdpbkV4cGVyaW1lbnRzfSBmcm9tICcuL29yaWdpbi1leHBlcmltZW50cyc7XG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuL3NlcnZpY2VzJztcbmltcG9ydCB7Z2V0Q29va2llLCBzZXRDb29raWV9IGZyb20gJy4vY29va2llcyc7XG5pbXBvcnQge3BhcnNlUXVlcnlTdHJpbmd9IGZyb20gJy4vdXJsJztcbmltcG9ydCB7dXNlcn0gZnJvbSAnLi9sb2cnO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBUQUcgPSAnZXhwZXJpbWVudHMnO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBDT09LSUVfTkFNRSA9ICdBTVBfRVhQJztcblxuLyoqIEBjb25zdCB7bnVtYmVyfSAqL1xuY29uc3QgQ09PS0lFX01BWF9BR0VfREFZUyA9IDE4MDsgLy8gNiBtb250aFxuXG4vKiogQGNvbnN0IHt0aW1lfSAqL1xuY29uc3QgQ09PS0lFX0VYUElSQVRJT05fSU5URVJWQUwgPSBDT09LSUVfTUFYX0FHRV9EQVlTICogMjQgKiA2MCAqIDYwICogMTAwMDtcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgVE9HR0xFU19XSU5ET1dfUFJPUEVSVFkgPSAnX19BTVBfX0VYUEVSSU1FTlRfVE9HR0xFUyc7XG5cbi8qKiBAY29uc3QgeyF3ZWJDcnlwdG8uSnNvbldlYktleX0gKi9cbmNvbnN0IE9SSUdJTl9FWFBFUklNRU5UU19QVUJMSUNfSldLID0gLyoqIEB0eXBlIHshd2ViQ3J5cHRvLkpzb25XZWJLZXl9ICovICh7XG4gICdhbGcnOiAnUlMyNTYnLFxuICAnZSc6ICdBUUFCJyxcbiAgJ2V4dCc6IHRydWUsXG4gICdrZXlfb3BzJzogWyd2ZXJpZnknXSxcbiAgJ2t0eSc6ICdSU0EnLFxuICAvKmVzbGludCBcIm1heC1sZW5cIjogMCovXG4gICduJzogJ3VBR1NNWUt6ZThGaXQ1MDhVYUdIejFlWm93Zlg0WXNBMGxteWktNjV4UWZqRjduTW82MWM0SXo0ZXJkcWdScC1vdjY2MnlWUHF1aFBtVHhnQi1uek5jVFByajE1Sm8wNUpzNzhROWhTMmhyUElqS01semNLU1lRTl8wOFFpZVdLT1NtVmJMU3ZfLTRuOU1zNXRhOG5SczRwd2NfMm5YNW43bTVCNUdINFZlckdicUlXSW45RlJOWU1TaEJSUTlUQ0hwYjZCSVVUd1VuNml3bUpMZW5xMEExeGhHclE5cnN3R0MxUUpoam90a2VSZUtYWkRMTFdhRnIwdVJ3LUl5dlJhNVJpaUVHbnRnT3ZjYnZhbU01VG5iS2F2YzJyeHZnMlRXVENOUW5iN2xXU0F6bGRKQV95QU9ZZXRfTWpuSE15ajJzclVkYlFTRENrOGtQV1d1YWZpUScsXG59KTtcblxuLyoqIEB0eXBlIHs/UHJvbWlzZX0gKi9cbmxldCBvcmlnaW5FeHBlcmltZW50c1Byb21pc2U7XG5cbi8qKiBAcHJpdmF0ZSB7P09yaWdpbkV4cGVyaW1lbnRzfSAqL1xubGV0IG9yaWdpbkV4cGVyaW1lbnRzO1xuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGlzVHJhZmZpY0VsaWdpYmxlOiBmdW5jdGlvbighV2luZG93KTpib29sZWFuLFxuICogICBicmFuY2hlczogIUFycmF5PHN0cmluZz5cbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgRXhwZXJpbWVudEluZm87XG5cbi8qKlxuICogV2hldGhlciB3ZSBhcmUgaW4gY2FuYXJ5LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NhbmFyeSh3aW4pIHtcbiAgcmV0dXJuICEhKHdpbi5BTVBfQ09ORklHICYmIHdpbi5BTVBfQ09ORklHLmNhbmFyeSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBiaW5hcnkgdHlwZSwgZS5nLiwgY2FuYXJ5LCBjb250cm9sLCBvciBwcm9kdWN0aW9uLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJpbmFyeVR5cGUod2luKSB7XG4gIHJldHVybiB3aW4uQU1QX0NPTkZJRyAmJiB3aW4uQU1QX0NPTkZJRy50eXBlID9cbiAgICB3aW4uQU1QX0NPTkZJRy50eXBlIDogJ3Vua25vd24nO1xufVxuXG4vKipcbiAqIFZlcmlmaWVzIGEgc2luZ2xlIG9yaWdpbiBleHBlcmltZW50IHRva2VuIGFuZCBlbmFibGVzIHRoZSBjb3JyZXNwb25kaW5nXG4gKiBleHBlcmltZW50IG9uIHN1Y2Nlc3MuIElmIHRva2VuIHZlcmlmaWNhdGlvbiBmYWlscywgYSB1c2VyIGVycm9yIGlzIGxvZ2dlZC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9rZW5cbiAqIEBwYXJhbSB7IS4vc2VydmljZS9jcnlwdG8taW1wbC5DcnlwdG99IGNyeXB0b1xuICogQHBhcmFtIHshd2ViQ3J5cHRvLkNyeXB0b0tleX0gcHVibGljS2V5XG4gKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHZlcmlmeU9yaWdpbkV4cGVyaW1lbnRUb2tlbih3aW4sIHRva2VuLCBjcnlwdG8sIHB1YmxpY0tleSkge1xuICBpZiAoIWNyeXB0by5pc1BrY3NBdmFpbGFibGUoKSkge1xuICAgIHVzZXIoKS5lcnJvcihUQUcsICdDcnlwdG8gaXMgdW5hdmFpbGFibGUuJyk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG4gIGlmICghb3JpZ2luRXhwZXJpbWVudHMpIHtcbiAgICBvcmlnaW5FeHBlcmltZW50cyA9IG5ldyBPcmlnaW5FeHBlcmltZW50cyhjcnlwdG8pO1xuICB9XG4gIGNvbnN0IHZlcmlmeSA9IG9yaWdpbkV4cGVyaW1lbnRzLnZlcmlmeVRva2VuKHRva2VuLCB3aW4ubG9jYXRpb24sIHB1YmxpY0tleSk7XG4gIHJldHVybiB2ZXJpZnkudGhlbihleHBlcmltZW50SWQgPT4ge1xuICAgIHRvZ2dsZUV4cGVyaW1lbnQod2luLCBleHBlcmltZW50SWQsIHRydWUsIC8qIHRyYW5zaWVudEV4cGVyaW1lbnQgKi8gdHJ1ZSk7XG4gIH0sIGVycm9yID0+IHtcbiAgICB1c2VyKCkuZXJyb3IoVEFHLCAnRmFpbGVkIHRvIHZlcmlmeSBleHBlcmltZW50IHRva2VuOicgKyBlcnJvcik7XG4gIH0pO1xufVxuXG4vKipcbiAqIFNjYW4gdGhlIHBhZ2UgZm9yIG9yaWdpbiBleHBlcmltZW50IHRva2VucywgdmVyaWZpZXMgdGhlbSwgYW5kIGVuYWJsZXNcbiAqIHRoZSBjb3JyZXNwb25kaW5nIGV4cGVyaW1lbnRzIGZvciB2ZXJpZmllZCB0b2tlbnMuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshd2ViQ3J5cHRvLkpzb25XZWJLZXl9IHB1YmxpY0p3a1xuICogQHJldHVybiB7IVByb21pc2V9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzY2FuRm9yT3JpZ2luRXhwZXJpbWVudFRva2Vucyh3aW4sIHB1YmxpY0p3aykge1xuICBjb25zdCBtZXRhcyA9XG4gICAgICB3aW4uZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yQWxsKCdtZXRhW25hbWU9XCJhbXAtZXhwZXJpbWVudC10b2tlblwiXScpO1xuICBpZiAobWV0YXMubGVuZ3RoID09IDApIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbiAgY29uc3QgY3J5cHRvID0gU2VydmljZXMuY3J5cHRvRm9yKHdpbik7XG4gIHJldHVybiBjcnlwdG8uaW1wb3J0UGtjc0tleShwdWJsaWNKd2spLnRoZW4ocHVibGljS2V5ID0+IHtcbiAgICBjb25zdCBwcm9taXNlcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWV0YXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG1ldGEgPSBtZXRhc1tpXTtcbiAgICAgIGNvbnN0IHRva2VuID0gbWV0YS5nZXRBdHRyaWJ1dGUoJ2NvbnRlbnQnKTtcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBjb25zdCBwID0gdmVyaWZ5T3JpZ2luRXhwZXJpbWVudFRva2VuKHdpbiwgdG9rZW4sIGNyeXB0bywgcHVibGljS2V5KTtcbiAgICAgICAgcHJvbWlzZXMucHVzaChwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVzZXIoKS5lcnJvcihUQUcsICdNaXNzaW5nIGNvbnRlbnQgZm9yIGV4cGVyaW1lbnQgdG9rZW4uJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcyk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEFzeW5jaHJvbm91c2x5IGNoZWNrcyB3aGV0aGVyIHRoZSBzcGVjaWZpZWQgb3JpZ2luIGV4cGVyaW1lbnQgaXMgb24gb3Igb2ZmLlxuICogT24gdGhlIGZpcnN0IGludm9jYXRpb24sIHRyaWdnZXJzIHNjYW4gb2Ygb3JpZ2luIGV4cGVyaW1lbnQgdG9rZW5zIG9uIHBhZ2UuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGV4cGVyaW1lbnRJZFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2ZvcmNlU2NhbiBGb3JjZXMgcmVzY2FuIG9mIHBhZ2UgZm9yIGV4cGVyaW1lbnQgdG9rZW5zLlxuICogQHJldHVybiB7IVByb21pc2U8Ym9vbGVhbj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09yaWdpbkV4cGVyaW1lbnRPbih3aW4sIGV4cGVyaW1lbnRJZCwgb3B0X2ZvcmNlU2Nhbikge1xuICBpZiAoIW9yaWdpbkV4cGVyaW1lbnRzUHJvbWlzZSB8fCBvcHRfZm9yY2VTY2FuKSB7XG4gICAgb3JpZ2luRXhwZXJpbWVudHNQcm9taXNlID1cbiAgICAgICAgc2NhbkZvck9yaWdpbkV4cGVyaW1lbnRUb2tlbnMod2luLCBPUklHSU5fRVhQRVJJTUVOVFNfUFVCTElDX0pXSyk7XG4gIH1cbiAgcmV0dXJuIG9yaWdpbkV4cGVyaW1lbnRzUHJvbWlzZS50aGVuKCgpID0+IGlzRXhwZXJpbWVudE9uKHdpbiwgZXhwZXJpbWVudElkKSk7XG59XG5cbi8qKlxuICogV2hldGhlciB0aGUgc3BlY2lmaWVkIGV4cGVyaW1lbnQgaXMgb24gb3Igb2ZmLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHBlcmltZW50SWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0V4cGVyaW1lbnRPbih3aW4sIGV4cGVyaW1lbnRJZCkge1xuICBjb25zdCB0b2dnbGVzID0gZXhwZXJpbWVudFRvZ2dsZXMod2luKTtcbiAgcmV0dXJuICEhdG9nZ2xlc1tleHBlcmltZW50SWRdO1xufVxuXG4vKipcbiAqIFRvZ2dsZXMgdGhlIGV4cGVyaW1lbnQgb24gb3Igb2ZmLiBSZXR1cm5zIHRoZSBhY3R1YWwgdmFsdWUgb2YgdGhlIGV4cGVyaW1lbnRcbiAqIGFmdGVyIHRvZ2dsaW5nIGlzIGRvbmUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGV4cGVyaW1lbnRJZFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X29uXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfdHJhbnNpZW50RXhwZXJpbWVudCAgV2hldGhlciB0byB0b2dnbGUgdGhlXG4gKiAgICAgZXhwZXJpbWVudCBzdGF0ZSBcInRyYW5zaWVudGx5XCIgKGkuZS4sIGZvciB0aGlzIHBhZ2UgbG9hZCBvbmx5KSBvclxuICogICAgIGR1cmFibHkgKGJ5IHNhdmluZyB0aGUgZXhwZXJpbWVudCBJRHMgdG8gdGhlIGNvb2tpZSBhZnRlciB0b2dnbGluZykuXG4gKiAgICAgRGVmYXVsdDogZmFsc2UgKHNhdmUgZHVyYWJseSkuXG4gKiBAcmV0dXJuIHtib29sZWFufSBOZXcgc3RhdGUgZm9yIGV4cGVyaW1lbnRJZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUV4cGVyaW1lbnQod2luLCBleHBlcmltZW50SWQsIG9wdF9vbixcbiAgb3B0X3RyYW5zaWVudEV4cGVyaW1lbnQpIHtcbiAgY29uc3QgY3VycmVudGx5T24gPSBpc0V4cGVyaW1lbnRPbih3aW4sIGV4cGVyaW1lbnRJZCk7XG4gIGNvbnN0IG9uID0gISEob3B0X29uICE9PSB1bmRlZmluZWQgPyBvcHRfb24gOiAhY3VycmVudGx5T24pO1xuICBpZiAob24gIT0gY3VycmVudGx5T24pIHtcbiAgICBjb25zdCB0b2dnbGVzID0gZXhwZXJpbWVudFRvZ2dsZXMod2luKTtcbiAgICB0b2dnbGVzW2V4cGVyaW1lbnRJZF0gPSBvbjtcblxuICAgIGlmICghb3B0X3RyYW5zaWVudEV4cGVyaW1lbnQpIHtcbiAgICAgIGNvbnN0IGNvb2tpZVRvZ2dsZXMgPSBnZXRFeHBlcmltZW50VG9nZ2xlc0Zyb21Db29raWUod2luKTtcbiAgICAgIGNvb2tpZVRvZ2dsZXNbZXhwZXJpbWVudElkXSA9IG9uO1xuICAgICAgc2F2ZUV4cGVyaW1lbnRUb2dnbGVzVG9Db29raWUod2luLCBjb29raWVUb2dnbGVzKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9uO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSB3aGV0aGVyIHRoZSBleHBlcmltZW50IGlzIG9uIG9yIG9mZiBiYXNlZCBvZmYgb2YgdGhlXG4gKiBjb29raWVGbGFnIG9yIHRoZSBnbG9iYWwgY29uZmlnIGZyZXF1ZW5jeSBnaXZlbi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHBlcmltZW50VG9nZ2xlcyh3aW4pIHtcbiAgaWYgKHdpbltUT0dHTEVTX1dJTkRPV19QUk9QRVJUWV0pIHtcbiAgICByZXR1cm4gd2luW1RPR0dMRVNfV0lORE9XX1BST1BFUlRZXTtcbiAgfVxuICB3aW5bVE9HR0xFU19XSU5ET1dfUFJPUEVSVFldID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgY29uc3QgdG9nZ2xlcyA9IHdpbltUT0dHTEVTX1dJTkRPV19QUk9QRVJUWV07XG5cbiAgLy8gUmVhZCB0aGUgZGVmYXVsdCBjb25maWcgb2YgdGhpcyBidWlsZC5cbiAgaWYgKHdpbi5BTVBfQ09ORklHKSB7XG4gICAgZm9yIChjb25zdCBleHBlcmltZW50SWQgaW4gd2luLkFNUF9DT05GSUcpIHtcbiAgICAgIGNvbnN0IGZyZXF1ZW5jeSA9IHdpbi5BTVBfQ09ORklHW2V4cGVyaW1lbnRJZF07XG4gICAgICBpZiAodHlwZW9mIGZyZXF1ZW5jeSA9PT0gJ251bWJlcicgJiYgZnJlcXVlbmN5ID49IDAgJiYgZnJlcXVlbmN5IDw9IDEpIHtcbiAgICAgICAgdG9nZ2xlc1tleHBlcmltZW50SWRdID0gTWF0aC5yYW5kb20oKSA8IGZyZXF1ZW5jeTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gUmVhZCBkb2N1bWVudCBsZXZlbCBvdmVycmlkZSBmcm9tIG1ldGEgdGFnLlxuICBpZiAod2luLkFNUF9DT05GSUdcbiAgICAgICYmIEFycmF5LmlzQXJyYXkod2luLkFNUF9DT05GSUdbJ2FsbG93LWRvYy1vcHQtaW4nXSlcbiAgICAgICYmIHdpbi5BTVBfQ09ORklHWydhbGxvdy1kb2Mtb3B0LWluJ10ubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGFsbG93ZWQgPSB3aW4uQU1QX0NPTkZJR1snYWxsb3ctZG9jLW9wdC1pbiddO1xuICAgIGNvbnN0IG1ldGEgPVxuICAgICAgICB3aW4uZG9jdW1lbnQuaGVhZC5xdWVyeVNlbGVjdG9yKCdtZXRhW25hbWU9XCJhbXAtZXhwZXJpbWVudHMtb3B0LWluXCJdJyk7XG4gICAgaWYgKG1ldGEpIHtcbiAgICAgIGNvbnN0IG9wdGVkSW5FeHBlcmltZW50cyA9IG1ldGEuZ2V0QXR0cmlidXRlKCdjb250ZW50Jykuc3BsaXQoJywnKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0ZWRJbkV4cGVyaW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmIChhbGxvd2VkLmluZGV4T2Yob3B0ZWRJbkV4cGVyaW1lbnRzW2ldKSAhPSAtMSkge1xuICAgICAgICAgIHRvZ2dsZXNbb3B0ZWRJbkV4cGVyaW1lbnRzW2ldXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBPYmplY3QuYXNzaWduKHRvZ2dsZXMsIGdldEV4cGVyaW1lbnRUb2dnbGVzRnJvbUNvb2tpZSh3aW4pKTtcblxuICBpZiAod2luLkFNUF9DT05GSUdcbiAgICAgICYmIEFycmF5LmlzQXJyYXkod2luLkFNUF9DT05GSUdbJ2FsbG93LXVybC1vcHQtaW4nXSlcbiAgICAgICYmIHdpbi5BTVBfQ09ORklHWydhbGxvdy11cmwtb3B0LWluJ10ubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IGFsbG93ZWQgPSB3aW4uQU1QX0NPTkZJR1snYWxsb3ctdXJsLW9wdC1pbiddO1xuICAgIGNvbnN0IGhhc2ggPSB3aW4ubG9jYXRpb24ub3JpZ2luYWxIYXNoIHx8IHdpbi5sb2NhdGlvbi5oYXNoO1xuICAgIGNvbnN0IHBhcmFtcyA9IHBhcnNlUXVlcnlTdHJpbmcoaGFzaCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbGxvd2VkLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBwYXJhbSA9IHBhcmFtc1tgZS0ke2FsbG93ZWRbaV19YF07XG4gICAgICBpZiAocGFyYW0gPT0gJzEnKSB7XG4gICAgICAgIHRvZ2dsZXNbYWxsb3dlZFtpXV0gPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHBhcmFtID09ICcwJykge1xuICAgICAgICB0b2dnbGVzW2FsbG93ZWRbaV1dID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0b2dnbGVzO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGNhY2hlZCBleHBlcmltZW50cyB0b2dnbGVzLCBvciBudWxsIGlmIHRoZXkgaGF2ZSBub3QgYmVlblxuICogY29tcHV0ZWQgeWV0LlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4ge09iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXhwZXJpbWVudFRvZ2dsZXNPck51bGwod2luKSB7XG4gIHJldHVybiB3aW5bVE9HR0xFU19XSU5ET1dfUFJPUEVSVFldIHx8IG51bGw7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNldCBvZiBleHBlcmltZW50IElEcyBjdXJyZW50bHkgb24uXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICovXG5mdW5jdGlvbiBnZXRFeHBlcmltZW50VG9nZ2xlc0Zyb21Db29raWUod2luKSB7XG4gIGNvbnN0IGV4cGVyaW1lbnRDb29raWUgPSBnZXRDb29raWUod2luLCBDT09LSUVfTkFNRSk7XG4gIGNvbnN0IHRva2VucyA9IGV4cGVyaW1lbnRDb29raWUgPyBleHBlcmltZW50Q29va2llLnNwbGl0KC9cXHMqLFxccyovZykgOiBbXTtcblxuICBjb25zdCB0b2dnbGVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b2tlbnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodG9rZW5zW2ldLmxlbmd0aCA9PSAwKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKHRva2Vuc1tpXVswXSA9PSAnLScpIHtcbiAgICAgIHRvZ2dsZXNbdG9rZW5zW2ldLnN1YnN0cigxKV0gPSBmYWxzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG9nZ2xlc1t0b2tlbnNbaV1dID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdG9nZ2xlcztcbn1cblxuLyoqXG4gKiBTYXZlcyBhIHNldCBvZiBleHBlcmltZW50IElEcyBjdXJyZW50bHkgb24uXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgYm9vbGVhbj59IHRvZ2dsZXNcbiAqL1xuZnVuY3Rpb24gc2F2ZUV4cGVyaW1lbnRUb2dnbGVzVG9Db29raWUod2luLCB0b2dnbGVzKSB7XG4gIGNvbnN0IGV4cGVyaW1lbnRJZHMgPSBbXTtcbiAgZm9yIChjb25zdCBleHBlcmltZW50IGluIHRvZ2dsZXMpIHtcbiAgICBleHBlcmltZW50SWRzLnB1c2goKHRvZ2dsZXNbZXhwZXJpbWVudF0gPT09IGZhbHNlID8gJy0nIDogJycpICsgZXhwZXJpbWVudCk7XG4gIH1cblxuICBzZXRDb29raWUod2luLCBDT09LSUVfTkFNRSwgZXhwZXJpbWVudElkcy5qb2luKCcsJyksXG4gICAgICBEYXRlLm5vdygpICsgQ09PS0lFX0VYUElSQVRJT05fSU5URVJWQUwsIHtcbiAgICAgICAgLy8gU2V0IGV4cGxpY2l0IGRvbWFpbiwgc28gdGhlIGNvb2tpZSBnZXRzIHNlbmQgdG8gc3ViIGRvbWFpbnMuXG4gICAgICAgIGRvbWFpbjogd2luLmxvY2F0aW9uLmhvc3RuYW1lLFxuICAgICAgICBhbGxvd09uUHJveHlPcmlnaW46IHRydWUsXG4gICAgICB9KTtcbn1cblxuLyoqXG4gKiBTZWUgZ2V0RXhwZXJpbWVudFRvZ2dsZXNGcm9tQ29va2llKCkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeHBlcmltZW50VG9nbGVzRnJvbUNvb2tpZUZvclRlc3Rpbmcod2luKSB7XG4gIHJldHVybiBnZXRFeHBlcmltZW50VG9nZ2xlc0Zyb21Db29raWUod2luKTtcbn1cblxuLyoqXG4gKiBSZXNldHMgdGhlIGV4cGVyaW1lbnRzVG9nZ2xlIGNhY2hlIGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRFeHBlcmltZW50VG9nZ2xlc0ZvclRlc3Rpbmcod2luKSB7XG4gIHNldENvb2tpZSh3aW4sIENPT0tJRV9OQU1FLCAnJywgMCwge1xuICAgIGRvbWFpbjogd2luLmxvY2F0aW9uLmhvc3RuYW1lLFxuICB9KTtcbiAgd2luW1RPR0dMRVNfV0lORE9XX1BST1BFUlRZXSA9IG51bGw7XG59XG5cbi8qKlxuICogSW4gc29tZSBicm93c2VyIGltcGxlbWVudGF0aW9ucyBvZiBNYXRoLnJhbmRvbSgpLCBzZXF1ZW50aWFsIGNhbGxzIG9mXG4gKiBNYXRoLnJhbmRvbSgpIGFyZSBjb3JyZWxhdGVkIGFuZCBjYW4gY2F1c2UgYSBiaWFzLiAgSW4gcGFydGljdWxhcixcbiAqIGlmIHRoZSBwcmV2aW91cyByYW5kb20oKSBjYWxsIHdhcyA8IDAuMDAxIChhcyBpdCB3aWxsIGJlIGlmIHdlIHNlbGVjdFxuICogaW50byBhbiBleHBlcmltZW50KSwgdGhlIG5leHQgdmFsdWUgY291bGQgYmUgbGVzcyB0aGFuIDAuNSBtb3JlIHRoYW5cbiAqIDUwLjclIG9mIHRoZSB0aW1lLiAgVGhpcyBwcm92aWRlcyBhbiBpbXBsZW1lbnRhdGlvbiB0aGF0IHJvb3RzIGRvd24gaW50b1xuICogdGhlIGNyeXB0byBBUEksIHdoZW4gYXZhaWxhYmxlLCB0byBwcm9kdWNlIGxlc3MgYmlhc2VkIHNhbXBsZXMuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSBQc2V1ZG8tcmFuZG9tIGZsb2F0aW5nLXBvaW50IHZhbHVlIG9uIHRoZSByYW5nZSBbMCwgMSkuXG4gKi9cbmZ1bmN0aW9uIHNsb3dCdXRBY2N1cmF0ZVBybmcoKSB7XG4gIC8vIFRPRE8odGRybCk6IEltcGxlbWVudC5cbiAgcmV0dXJuIE1hdGgucmFuZG9tKCk7XG59XG5cbi8qKlxuICogQ29udGFpbmVyIGZvciBhbHRlcm5hdGUgcmFuZG9tIG51bWJlciBnZW5lcmF0b3IgaW1wbGVtZW50YXRpb25zLiAgVGhpc1xuICogYWxsb3dzIHVzIHRvIHNldCBhbiBcImFjY3VyYXRlXCIgUFJORyBmb3IgYnJhbmNoIHNlbGVjdGlvbiwgYnV0IHRvIG1vY2sgaXRcbiAqIG91dCBlYXNpbHkgaW4gdGVzdHMuXG4gKlxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKiBAY29uc3QgeyF7YWNjdXJhdGVQcm5nOiBmdW5jdGlvbigpOm51bWJlcn19XG4gKi9cbmV4cG9ydCBjb25zdCBSQU5ET01fTlVNQkVSX0dFTkVSQVRPUlMgPSB7XG4gIGFjY3VyYXRlUHJuZzogc2xvd0J1dEFjY3VyYXRlUHJuZyxcbn07XG5cbi8qKlxuICogU2VsZWN0cywgdW5pZm9ybWx5IGF0IHJhbmRvbSwgYSBzaW5nbGUgaXRlbSBmcm9tIHRoZSBhcnJheS5cbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IGFyciBPYmplY3QgdG8gc2VsZWN0IGZyb20uXG4gKiBAcmV0dXJuIHs/c3RyaW5nfSBTaW5nbGUgaXRlbSBmcm9tIGFyciBvciBudWxsIGlmIGFyciB3YXMgZW1wdHkuXG4gKi9cbmZ1bmN0aW9uIHNlbGVjdFJhbmRvbUl0ZW0oYXJyKSB7XG4gIGNvbnN0IHJuID0gUkFORE9NX05VTUJFUl9HRU5FUkFUT1JTLmFjY3VyYXRlUHJuZygpO1xuICByZXR1cm4gYXJyW01hdGguZmxvb3Iocm4gKiBhcnIubGVuZ3RoKV0gfHwgbnVsbDtcbn1cblxuLyoqXG4gKiBTZWxlY3RzIHdoaWNoIHBhZ2UtbGV2ZWwgZXhwZXJpbWVudCBicmFuY2hlcyBhcmUgZW5hYmxlZC4gSWYgYSBnaXZlblxuICogZXhwZXJpbWVudCBuYW1lIGlzIGFscmVhZHkgc2V0IChpbmNsdWRpbmcgdG8gdGhlIG51bGwgLyBubyBicmFuY2hlcyBzZWxlY3RlZFxuICogc3RhdGUpLCB0aGlzIHdvbid0IGFsdGVyIGl0cyBzdGF0ZS5cbiAqXG4gKiBDaGVjayB3aGV0aGVyIGEgZ2l2ZW4gZXhwZXJpbWVudCBpcyBzZXQgdXNpbmcgaXNFeHBlcmltZW50T24od2luLFxuICogZXhwZXJpbWVudE5hbWUpIGFuZCwgaWYgaXQgaXMgb24sIGxvb2sgZm9yIHdoaWNoIGJyYW5jaCBpcyBzZWxlY3RlZCBpblxuICogd2luLmV4cGVyaW1lbnRCcmFuY2hlc1tleHBlcmltZW50TmFtZV0uXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW4gV2luZG93IGNvbnRleHQgb24gd2hpY2ggdG8gc2F2ZSBleHBlcmltZW50XG4gKiAgICAgc2VsZWN0aW9uIHN0YXRlLlxuICogQHBhcmFtIHshT2JqZWN0PHN0cmluZywgIUV4cGVyaW1lbnRJbmZvPn0gZXhwZXJpbWVudHMgIFNldCBvZiBleHBlcmltZW50cyB0b1xuICogICAgIGNvbmZpZ3VyZSBmb3IgdGhpcyBwYWdlIGxvYWQuXG4gKiBAdmlzaWJsZUZvclRlc3RpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhbmRvbWx5U2VsZWN0VW5zZXRFeHBlcmltZW50cyh3aW4sIGV4cGVyaW1lbnRzKSB7XG4gIHdpbi5leHBlcmltZW50QnJhbmNoZXMgPSB3aW4uZXhwZXJpbWVudEJyYW5jaGVzIHx8IHt9O1xuICBmb3IgKGNvbnN0IGV4cGVyaW1lbnROYW1lIGluIGV4cGVyaW1lbnRzKSB7XG4gICAgLy8gU2tpcCBleHBlcmltZW50TmFtZSBpZiBpdCBpcyBub3QgYSBrZXkgb2YgZXhwZXJpbWVudHMgb2JqZWN0IG9yIGlmIGl0XG4gICAgLy8gaGFzIGFscmVhZHkgYmVlbiBwb3B1bGF0ZWQgYnkgc29tZSBvdGhlciBwcm9wZXJ0eS5cbiAgICBpZiAoIWV4cGVyaW1lbnRzLmhhc093blByb3BlcnR5KGV4cGVyaW1lbnROYW1lKSB8fFxuICAgICAgICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzLmhhc093blByb3BlcnR5KGV4cGVyaW1lbnROYW1lKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKCFleHBlcmltZW50c1tleHBlcmltZW50TmFtZV0uaXNUcmFmZmljRWxpZ2libGUgfHxcbiAgICAgICAgIWV4cGVyaW1lbnRzW2V4cGVyaW1lbnROYW1lXS5pc1RyYWZmaWNFbGlnaWJsZSh3aW4pKSB7XG4gICAgICB3aW4uZXhwZXJpbWVudEJyYW5jaGVzW2V4cGVyaW1lbnROYW1lXSA9IG51bGw7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSdyZSBpbiB0aGUgZXhwZXJpbWVudCwgYnV0IHdlIGhhdmVuJ3QgYWxyZWFkeSBmb3JjZWQgYSBzcGVjaWZpY1xuICAgIC8vIGV4cGVyaW1lbnQgYnJhbmNoIChlLmcuLCB2aWEgYSB0ZXN0IHNldHVwKSwgdGhlbiByYW5kb21pemUgdGhlIGJyYW5jaFxuICAgIC8vIGNob2ljZS5cbiAgICBpZiAoIXdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdICYmXG4gICAgICAgIGlzRXhwZXJpbWVudE9uKHdpbiwgZXhwZXJpbWVudE5hbWUpKSB7XG4gICAgICBjb25zdCBicmFuY2hlcyA9IGV4cGVyaW1lbnRzW2V4cGVyaW1lbnROYW1lXS5icmFuY2hlcztcbiAgICAgIHdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdID0gc2VsZWN0UmFuZG9tSXRlbShicmFuY2hlcyk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZXhwZXJpbWVudCBicmFuY2ggZW5hYmxlZCBmb3IgdGhlIGdpdmVuIGV4cGVyaW1lbnQgSUQuXG4gKiBGb3IgZXhhbXBsZSwgJ2NvbnRyb2wnIG9yICdleHBlcmltZW50Jy5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpbiBXaW5kb3cgY29udGV4dCB0byBjaGVjayBmb3IgZXhwZXJpbWVudCBzdGF0ZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBleHBlcmltZW50TmFtZSBOYW1lIG9mIHRoZSBleHBlcmltZW50IHRvIGNoZWNrLlxuICogQHJldHVybiB7P3N0cmluZ30gQWN0aXZlIGV4cGVyaW1lbnQgYnJhbmNoIElEIGZvciBleHBlcmltZW50TmFtZSAocG9zc2libHlcbiAqICAgICBudWxsIGlmIGV4cGVyaW1lbnROYW1lIGhhcyBiZWVuIHRlc3RlZCBidXQgbm8gYnJhbmNoIHdhcyBlbmFibGVkKS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4cGVyaW1lbnRCcmFuY2god2luLCBleHBlcmltZW50TmFtZSkge1xuICByZXR1cm4gd2luLmV4cGVyaW1lbnRCcmFuY2hlcyA/IHdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdIDogbnVsbDtcbn1cblxuLyoqXG4gKiBGb3JjZSBlbmFibGUgKG9yIGRpc2FibGUpIGEgc3BlY2lmaWMgYnJhbmNoIG9mIGEgZ2l2ZW4gZXhwZXJpbWVudCBuYW1lLlxuICogRGlzYWJsZXMgdGhlIGV4cGVyaW1lbnQgbmFtZSBhbHRvZ2V0aGVyIGlmIGJyYW5jaElkIGlzIGZhbHNlaXNoLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luIFdpbmRvdyBjb250ZXh0IHRvIGNoZWNrIGZvciBleHBlcmltZW50IHN0YXRlLlxuICogQHBhcmFtIHtzdHJpbmd9IGV4cGVyaW1lbnROYW1lIE5hbWUgb2YgdGhlIGV4cGVyaW1lbnQgdG8gY2hlY2suXG4gKiBAcGFyYW0gez9zdHJpbmd9IGJyYW5jaElkIElEIG9mIGJyYW5jaCB0byBmb3JjZSBvciBudWxsIHRvIGRpc2FibGVcbiAqICAgICBhbHRvZ2V0aGVyLlxuICogQHZpc2libGVGb3JUZXN0aW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb3JjZUV4cGVyaW1lbnRCcmFuY2god2luLCBleHBlcmltZW50TmFtZSwgYnJhbmNoSWQpIHtcbiAgd2luLmV4cGVyaW1lbnRCcmFuY2hlcyA9IHdpbi5leHBlcmltZW50QnJhbmNoZXMgfHwge307XG4gIHRvZ2dsZUV4cGVyaW1lbnQod2luLCBleHBlcmltZW50TmFtZSwgISFicmFuY2hJZCwgdHJ1ZSk7XG4gIHdpbi5leHBlcmltZW50QnJhbmNoZXNbZXhwZXJpbWVudE5hbWVdID0gYnJhbmNoSWQ7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtHZXN0dXJlUmVjb2duaXplcn0gZnJvbSAnLi9nZXN0dXJlJztcbmltcG9ydCB7Y2FsY1ZlbG9jaXR5fSBmcm9tICcuL21vdGlvbic7XG5cblxuLyoqXG4gKiBBIFwidGFwXCIgZ2VzdHVyZS5cbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGNsaWVudFg6IG51bWJlcixcbiAqICAgY2xpZW50WTogbnVtYmVyXG4gKiB9fVxuICovXG5sZXQgVGFwRGVmO1xuXG5cbi8qKlxuICogUmVjb2duaXplcyBcInRhcFwiIGdlc3R1cmVzLlxuICogQGV4dGVuZHMge0dlc3R1cmVSZWNvZ25pemVyPFRhcERlZj59XG4gKi9cbmV4cG9ydCBjbGFzcyBUYXBSZWNvZ25pemVyIGV4dGVuZHMgR2VzdHVyZVJlY29nbml6ZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9nZXN0dXJlLkdlc3R1cmVzfSBtYW5hZ2VyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihtYW5hZ2VyKSB7XG4gICAgc3VwZXIoJ3RhcCcsIG1hbmFnZXIpO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5zdGFydFhfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuc3RhcnRZXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmxhc3RYXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmxhc3RZXyA9IDA7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIG9uVG91Y2hTdGFydChlKSB7XG4gICAgY29uc3QgdG91Y2hlcyA9IGUudG91Y2hlcztcbiAgICBpZiAodG91Y2hlcyAmJiB0b3VjaGVzLmxlbmd0aCA9PSAxKSB7XG4gICAgICB0aGlzLnN0YXJ0WF8gPSB0b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICB0aGlzLnN0YXJ0WV8gPSB0b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgb25Ub3VjaE1vdmUoZSkge1xuICAgIGNvbnN0IHRvdWNoZXMgPSBlLmNoYW5nZWRUb3VjaGVzIHx8IGUudG91Y2hlcztcbiAgICBpZiAodG91Y2hlcyAmJiB0b3VjaGVzLmxlbmd0aCA9PSAxKSB7XG4gICAgICB0aGlzLmxhc3RYXyA9IHRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgIHRoaXMubGFzdFlfID0gdG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgY29uc3QgZHggPSBNYXRoLmFicyh0aGlzLmxhc3RYXyAtIHRoaXMuc3RhcnRYXykgPj0gODtcbiAgICAgIGNvbnN0IGR5ID0gTWF0aC5hYnModGhpcy5sYXN0WV8gLSB0aGlzLnN0YXJ0WV8pID49IDg7XG4gICAgICBpZiAoZHggfHwgZHkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgb25Ub3VjaEVuZCh1bnVzZWRFKSB7XG4gICAgdGhpcy5zaWduYWxSZWFkeSgwKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWNjZXB0U3RhcnQoKSB7XG4gICAgdGhpcy5zaWduYWxFbWl0KHtjbGllbnRYOiB0aGlzLmxhc3RYXywgY2xpZW50WTogdGhpcy5sYXN0WV99LCBudWxsKTtcbiAgICB0aGlzLnNpZ25hbEVuZCgpO1xuICB9XG59XG5cblxuXG4vKipcbiAqIEEgXCJkb3VibGV0YXBcIiBnZXN0dXJlLlxuICogQHR5cGVkZWYge3tcbiAqICAgY2xpZW50WDogbnVtYmVyLFxuICogICBjbGllbnRZOiBudW1iZXJcbiAqIH19XG4gKi9cbmxldCBEb3VibGV0YXBEZWY7XG5cblxuLyoqXG4gKiBSZWNvZ25pemVzIGEgXCJkb3VibGV0YXBcIiBnZXN0dXJlLiBUaGlzIGdlc3R1cmUgd2lsbCBibG9jayBhIHNpbmdsZSBcInRhcFwiXG4gKiBmb3IgYWJvdXQgMzAwbXMgd2hpbGUgaXQncyBleHBlY3RpbmcgdGhlIHNlY29uZCBcInRhcFwiLlxuICogQGV4dGVuZHMge0dlc3R1cmVSZWNvZ25pemVyPERvdWJsZXRhcERlZj59XG4gKi9cbmV4cG9ydCBjbGFzcyBEb3VibGV0YXBSZWNvZ25pemVyIGV4dGVuZHMgR2VzdHVyZVJlY29nbml6ZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9nZXN0dXJlLkdlc3R1cmVzfSBtYW5hZ2VyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihtYW5hZ2VyKSB7XG4gICAgc3VwZXIoJ2RvdWJsZXRhcCcsIG1hbmFnZXIpO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5zdGFydFhfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuc3RhcnRZXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmxhc3RYXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmxhc3RZXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLnRhcENvdW50XyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUgez9FdmVudH0gKi9cbiAgICB0aGlzLmV2ZW50XyA9IG51bGw7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIG9uVG91Y2hTdGFydChlKSB7XG4gICAgaWYgKHRoaXMudGFwQ291bnRfID4gMSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB0b3VjaGVzID0gZS50b3VjaGVzO1xuICAgIGlmICh0b3VjaGVzICYmIHRvdWNoZXMubGVuZ3RoID09IDEpIHtcbiAgICAgIHRoaXMuc3RhcnRYXyA9IHRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgIHRoaXMuc3RhcnRZXyA9IHRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgIHRoaXMubGFzdFhfID0gdG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgdGhpcy5sYXN0WV8gPSB0b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgb25Ub3VjaE1vdmUoZSkge1xuICAgIGNvbnN0IHRvdWNoZXMgPSBlLnRvdWNoZXM7XG4gICAgaWYgKHRvdWNoZXMgJiYgdG91Y2hlcy5sZW5ndGggPT0gMSkge1xuICAgICAgdGhpcy5sYXN0WF8gPSB0b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICB0aGlzLmxhc3RZXyA9IHRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgIGNvbnN0IGR4ID0gTWF0aC5hYnModGhpcy5sYXN0WF8gLSB0aGlzLnN0YXJ0WF8pID49IDg7XG4gICAgICBjb25zdCBkeSA9IE1hdGguYWJzKHRoaXMubGFzdFlfIC0gdGhpcy5zdGFydFlfKSA+PSA4O1xuICAgICAgaWYgKGR4IHx8IGR5KSB7XG4gICAgICAgIHRoaXMuYWNjZXB0Q2FuY2VsKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBvblRvdWNoRW5kKGUpIHtcbiAgICB0aGlzLnRhcENvdW50XysrO1xuICAgIGlmICh0aGlzLnRhcENvdW50XyA8IDIpIHtcbiAgICAgIHRoaXMuc2lnbmFsUGVuZGluZygzMDApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV2ZW50XyA9IGU7XG4gICAgICB0aGlzLnNpZ25hbFJlYWR5KDApO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWNjZXB0U3RhcnQoKSB7XG4gICAgdGhpcy50YXBDb3VudF8gPSAwO1xuICAgIHRoaXMuc2lnbmFsRW1pdCh7Y2xpZW50WDogdGhpcy5sYXN0WF8sIGNsaWVudFk6IHRoaXMubGFzdFlffSwgdGhpcy5ldmVudF8pO1xuICAgIHRoaXMuc2lnbmFsRW5kKCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFjY2VwdENhbmNlbCgpIHtcbiAgICB0aGlzLnRhcENvdW50XyA9IDA7XG4gIH1cbn1cblxuXG5cbi8qKlxuICogQSBcInN3aXBlLXh5XCIsIFwic3dpcGUteFwiIG9yIFwic3dpcGUteVwiIGdlc3R1cmUuIEEgbnVtYmVyIG9mIHRoZXNlIGdlc3R1cmVzXG4gKiBtYXkgYmUgZW1pdHRlZCBmb3IgYSBzaW5nbGUgdG91Y2ggc2VyaWVzLlxuICogQHR5cGVkZWYge3tcbiAqICAgZmlyc3Q6IGJvb2xlYW4sXG4gKiAgIGxhc3Q6IGJvb2xlYW4sXG4gKiAgIGRlbHRhWDogbnVtYmVyLFxuICogICBkZWx0YVk6IG51bWJlcixcbiAqICAgdmVsb2NpdHlYOiBudW1iZXIsXG4gKiAgIHZlbG9jaXR5WTogbnVtYmVyXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IFN3aXBlRGVmO1xuXG5cbi8qKlxuICogUmVjb2duaXplcyBzd2lwZSBnZXN0dXJlcy4gVGhpcyBnZXN0dXJlIHdpbGwgeWllbGQgYWJvdXQgMTBtcyB0byBvdGhlclxuICogZ2VzdHVyZXMuXG4gKiBAZXh0ZW5kcyB7R2VzdHVyZVJlY29nbml6ZXI8U3dpcGVEZWY+fVxuICovXG5jbGFzcyBTd2lwZVJlY29nbml6ZXIgZXh0ZW5kcyBHZXN0dXJlUmVjb2duaXplciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2dlc3R1cmUuR2VzdHVyZXN9IG1hbmFnZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGUsIG1hbmFnZXIsIGhvcml6LCB2ZXJ0KSB7XG4gICAgc3VwZXIodHlwZSwgbWFuYWdlcik7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5ob3Jpel8gPSBob3JpejtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLnZlcnRfID0gdmVydDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmV2ZW50aW5nXyA9IGZhbHNlO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5zdGFydFhfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuc3RhcnRZXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmxhc3RYXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmxhc3RZXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLnByZXZYXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLnByZXZZXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge3RpbWV9ICovXG4gICAgdGhpcy5zdGFydFRpbWVfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7dGltZX0gKi9cbiAgICB0aGlzLmxhc3RUaW1lXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge3RpbWV9ICovXG4gICAgdGhpcy5wcmV2VGltZV8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy52ZWxvY2l0eVhfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMudmVsb2NpdHlZXyA9IDA7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIG9uVG91Y2hTdGFydChlKSB7XG4gICAgY29uc3QgdG91Y2hlcyA9IGUudG91Y2hlcztcbiAgICBpZiAodG91Y2hlcyAmJiB0b3VjaGVzLmxlbmd0aCA9PSAxKSB7XG4gICAgICB0aGlzLnN0YXJ0VGltZV8gPSBEYXRlLm5vdygpO1xuICAgICAgdGhpcy5zdGFydFhfID0gdG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgdGhpcy5zdGFydFlfID0gdG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIG9uVG91Y2hNb3ZlKGUpIHtcbiAgICBjb25zdCB0b3VjaGVzID0gZS50b3VjaGVzO1xuICAgIGlmICh0b3VjaGVzICYmIHRvdWNoZXMubGVuZ3RoID09IDEpIHtcbiAgICAgIGNvbnN0IHggPSB0b3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICBjb25zdCB5ID0gdG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgdGhpcy5sYXN0WF8gPSB4O1xuICAgICAgdGhpcy5sYXN0WV8gPSB5O1xuICAgICAgaWYgKHRoaXMuZXZlbnRpbmdfKSB7XG4gICAgICAgIHRoaXMuZW1pdF8oZmFsc2UsIGZhbHNlLCBlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGR4ID0gTWF0aC5hYnMoeCAtIHRoaXMuc3RhcnRYXyk7XG4gICAgICAgIGNvbnN0IGR5ID0gTWF0aC5hYnMoeSAtIHRoaXMuc3RhcnRZXyk7XG4gICAgICAgIC8vIFN3aXBlIGlzIHBlbmFsaXplZCBzbGlnaHRseSBzaW5jZSBpdCdzIG9uZSBvZiB0aGUgbGVhc3QgZGVtYW5kaW5nXG4gICAgICAgIC8vIGdlc3R1cmUsIHRodXMgLTEwIGluIHNpZ25hbFJlYWR5LlxuICAgICAgICBpZiAodGhpcy5ob3Jpel8gJiYgdGhpcy52ZXJ0Xykge1xuICAgICAgICAgIGlmIChkeCA+PSA4IHx8IGR5ID49IDgpIHtcbiAgICAgICAgICAgIHRoaXMuc2lnbmFsUmVhZHkoLTEwKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5ob3Jpel8pIHtcbiAgICAgICAgICBpZiAoZHggPj0gOCAmJiBkeCA+IGR5KSB7XG4gICAgICAgICAgICB0aGlzLnNpZ25hbFJlYWR5KC0xMCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkeSA+PSA4KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudmVydF8pIHtcbiAgICAgICAgICBpZiAoZHkgPj0gOCAmJiBkeSA+IGR4KSB7XG4gICAgICAgICAgICB0aGlzLnNpZ25hbFJlYWR5KC0xMCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkeCA+PSA4KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIG9uVG91Y2hFbmQoZSkge1xuICAgIHRoaXMuZW5kXyhlKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWNjZXB0U3RhcnQoKSB7XG4gICAgdGhpcy5ldmVudGluZ18gPSB0cnVlO1xuICAgIC8vIFJlc2V0IHN0YXJ0IGNvb3JkaW5hdGVzIHRvIHdoZXJlIHRoZSBnZXN0dXJlIGJlZ2FuIHRvIGF2b2lkIHZpc2libGVcbiAgICAvLyBqdW1wLCBidXQgcHJlc2VydmUgdGhlbSBhcyBcInByZXZcIiBjb29yZGluYXRlcyB0byBjYWxjdWxhdGUgdGhlIHJpZ2h0XG4gICAgLy8gdmVsb2NpdHkuXG4gICAgdGhpcy5wcmV2WF8gPSB0aGlzLnN0YXJ0WF87XG4gICAgdGhpcy5wcmV2WV8gPSB0aGlzLnN0YXJ0WV87XG4gICAgdGhpcy5wcmV2VGltZV8gPSB0aGlzLnN0YXJ0VGltZV87XG4gICAgdGhpcy5zdGFydFhfID0gdGhpcy5sYXN0WF87XG4gICAgdGhpcy5zdGFydFlfID0gdGhpcy5sYXN0WV87XG4gICAgdGhpcy5lbWl0Xyh0cnVlLCBmYWxzZSwgbnVsbCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFjY2VwdENhbmNlbCgpIHtcbiAgICB0aGlzLmV2ZW50aW5nXyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZmlyc3RcbiAgICogQHBhcmFtIHtib29sZWFufSBsYXN0XG4gICAqIEBwYXJhbSB7P0V2ZW50fSBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZW1pdF8oZmlyc3QsIGxhc3QsIGV2ZW50KSB7XG4gICAgdGhpcy5sYXN0VGltZV8gPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGRlbHRhVGltZSA9IHRoaXMubGFzdFRpbWVfIC0gdGhpcy5wcmV2VGltZV87XG4gICAgLy8gSXQncyBvZnRlbiB0aGF0IGB0b3VjaGVuZGAgYXJyaXZlcyBvbiB0aGUgbmV4dCBmcmFtZS4gVGhlc2Ugc2hvdWxkXG4gICAgLy8gYmUgaWdub3JlZCB0byBhdm9pZCBhIHNpZ25pZmljYW50IHZlbG9jaXR5IGRvd25ncmFkZS5cbiAgICBpZiAoIWxhc3QgJiYgZGVsdGFUaW1lID4gNCB8fCBsYXN0ICYmIGRlbHRhVGltZSA+IDE2KSB7XG4gICAgICB0aGlzLnZlbG9jaXR5WF8gPSBjYWxjVmVsb2NpdHkodGhpcy5sYXN0WF8gLSB0aGlzLnByZXZYXywgZGVsdGFUaW1lLFxuICAgICAgICAgIHRoaXMudmVsb2NpdHlYXyk7XG4gICAgICB0aGlzLnZlbG9jaXR5WV8gPSBjYWxjVmVsb2NpdHkodGhpcy5sYXN0WV8gLSB0aGlzLnByZXZZXywgZGVsdGFUaW1lLFxuICAgICAgICAgIHRoaXMudmVsb2NpdHlZXyk7XG4gICAgICB0aGlzLnZlbG9jaXR5WF8gPSBNYXRoLmFicyh0aGlzLnZlbG9jaXR5WF8pID4gMWUtNCA/IHRoaXMudmVsb2NpdHlYXyA6IDA7XG4gICAgICB0aGlzLnZlbG9jaXR5WV8gPSBNYXRoLmFicyh0aGlzLnZlbG9jaXR5WV8pID4gMWUtNCA/IHRoaXMudmVsb2NpdHlZXyA6IDA7XG4gICAgICB0aGlzLnByZXZYXyA9IHRoaXMubGFzdFhfO1xuICAgICAgdGhpcy5wcmV2WV8gPSB0aGlzLmxhc3RZXztcbiAgICAgIHRoaXMucHJldlRpbWVfID0gdGhpcy5sYXN0VGltZV87XG4gICAgfVxuXG4gICAgdGhpcy5zaWduYWxFbWl0KHtcbiAgICAgIGZpcnN0LFxuICAgICAgbGFzdCxcbiAgICAgIHRpbWU6IHRoaXMubGFzdFRpbWVfLFxuICAgICAgZGVsdGFYOiB0aGlzLmhvcml6XyA/IHRoaXMubGFzdFhfIC0gdGhpcy5zdGFydFhfIDogMCxcbiAgICAgIGRlbHRhWTogdGhpcy52ZXJ0XyA/IHRoaXMubGFzdFlfIC0gdGhpcy5zdGFydFlfIDogMCxcbiAgICAgIHZlbG9jaXR5WDogdGhpcy5ob3Jpel8gPyB0aGlzLnZlbG9jaXR5WF8gOiAwLFxuICAgICAgdmVsb2NpdHlZOiB0aGlzLnZlcnRfID8gdGhpcy52ZWxvY2l0eVlfIDogMCxcbiAgICB9LCBldmVudCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHs/RXZlbnR9IGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBlbmRfKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuZXZlbnRpbmdfKSB7XG4gICAgICB0aGlzLmV2ZW50aW5nXyA9IGZhbHNlO1xuICAgICAgdGhpcy5lbWl0XyhmYWxzZSwgdHJ1ZSwgZXZlbnQpO1xuICAgICAgdGhpcy5zaWduYWxFbmQoKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIFJlY29nbml6ZXMgXCJzd2lwZS14eVwiIGdlc3R1cmUuIFlpZWxkcyBhYm91dCAxMG1zIHRvIG90aGVyIGdlc3R1cmVzLlxuICovXG5leHBvcnQgY2xhc3MgU3dpcGVYWVJlY29nbml6ZXIgZXh0ZW5kcyBTd2lwZVJlY29nbml6ZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9nZXN0dXJlLkdlc3R1cmVzfSBtYW5hZ2VyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihtYW5hZ2VyKSB7XG4gICAgc3VwZXIoJ3N3aXBlLXh5JywgbWFuYWdlciwgdHJ1ZSwgdHJ1ZSk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFJlY29nbml6ZXMgXCJzd2lwZS14XCIgZ2VzdHVyZS4gWWllbGRzIGFib3V0IDEwbXMgdG8gb3RoZXIgZ2VzdHVyZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBTd2lwZVhSZWNvZ25pemVyIGV4dGVuZHMgU3dpcGVSZWNvZ25pemVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZ2VzdHVyZS5HZXN0dXJlc30gbWFuYWdlclxuICAgKi9cbiAgY29uc3RydWN0b3IobWFuYWdlcikge1xuICAgIHN1cGVyKCdzd2lwZS14JywgbWFuYWdlciwgdHJ1ZSwgZmFsc2UpO1xuICB9XG59XG5cblxuLyoqXG4gKiBSZWNvZ25pemVzIFwic3dpcGUteVwiIGdlc3R1cmUuIFlpZWxkcyBhYm91dCAxMG1zIHRvIG90aGVyIGdlc3R1cmVzLlxuICovXG5leHBvcnQgY2xhc3MgU3dpcGVZUmVjb2duaXplciBleHRlbmRzIFN3aXBlUmVjb2duaXplciB7XG4gIC8qKlxuICAgKiBAcGFyYW0geyEuL2dlc3R1cmUuR2VzdHVyZXN9IG1hbmFnZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKG1hbmFnZXIpIHtcbiAgICBzdXBlcignc3dpcGUteScsIG1hbmFnZXIsIGZhbHNlLCB0cnVlKTtcbiAgfVxufVxuXG5cblxuLyoqXG4gKiBBIFwidGFwem9vbVwiIGdlc3R1cmUuIEl0IGhhcyBhIGNlbnRlciwgZGVsdGEgb2ZmIHRoZSBjZW50ZXIgY2VudGVyIGFuZFxuICogdGhlIHZlbG9jaXR5IG9mIG1vdmluZyBhd2F5IGZyb20gdGhlIGNlbnRlci5cbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGZpcnN0OiBib29sZWFuLFxuICogICBsYXN0OiBib29sZWFuLFxuICogICBjZW50ZXJDbGllbnRYOiBudW1iZXIsXG4gKiAgIGNlbnRlckNsaWVudFk6IG51bWJlcixcbiAqICAgZGVsdGFYOiBudW1iZXIsXG4gKiAgIGRlbHRhWTogbnVtYmVyLFxuICogICB2ZWxvY2l0eVg6IG51bWJlcixcbiAqICAgdmVsb2NpdHlZOiBudW1iZXJcbiAqIH19XG4gKi9cbmxldCBUYXB6b29tRGVmO1xuXG5cbi8qKlxuICogUmVjb2duaXplcyBhIFwidGFwem9vbVwiIGdlc3R1cmUuIFRoaXMgZ2VzdHVyZSB3aWxsIGJsb2NrIG90aGVyIGdlc3R1cmVzXG4gKiBmb3IgYWJvdXQgNDAwbXMgYWZ0ZXIgZmlyc3QgXCJ0YXBcIiB3aGlsZSBpdCdzIGV4cGVjdGluZyBzd2lwZS5cbiAqIEBleHRlbmRzIHtHZXN0dXJlUmVjb2duaXplcjxUYXB6b29tRGVmPn1cbiAqL1xuZXhwb3J0IGNsYXNzIFRhcHpvb21SZWNvZ25pemVyIGV4dGVuZHMgR2VzdHVyZVJlY29nbml6ZXIge1xuICAvKipcbiAgICogQHBhcmFtIHshLi9nZXN0dXJlLkdlc3R1cmVzfSBtYW5hZ2VyXG4gICAqL1xuICBjb25zdHJ1Y3RvcihtYW5hZ2VyKSB7XG4gICAgc3VwZXIoJ3RhcHpvb20nLCBtYW5hZ2VyKTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLmV2ZW50aW5nXyA9IGZhbHNlO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5zdGFydFhfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuc3RhcnRZXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmxhc3RYXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmxhc3RZXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLnRhcFhfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMudGFwWV8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy50YXBDb3VudF8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5wcmV2WF8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5wcmV2WV8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHt0aW1lfSAqL1xuICAgIHRoaXMuc3RhcnRUaW1lXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge3RpbWV9ICovXG4gICAgdGhpcy5sYXN0VGltZV8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHt0aW1lfSAqL1xuICAgIHRoaXMucHJldlRpbWVfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMudmVsb2NpdHlYXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLnZlbG9jaXR5WV8gPSAwO1xuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBvblRvdWNoU3RhcnQoZSkge1xuICAgIGlmICh0aGlzLmV2ZW50aW5nXykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCB0b3VjaGVzID0gZS50b3VjaGVzO1xuICAgIGlmICh0b3VjaGVzICYmIHRvdWNoZXMubGVuZ3RoID09IDEpIHtcbiAgICAgIHRoaXMuc3RhcnRYXyA9IHRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgIHRoaXMuc3RhcnRZXyA9IHRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBvblRvdWNoTW92ZShlKSB7XG4gICAgY29uc3QgdG91Y2hlcyA9IGUudG91Y2hlcztcbiAgICBpZiAodG91Y2hlcyAmJiB0b3VjaGVzLmxlbmd0aCA9PSAxKSB7XG4gICAgICB0aGlzLmxhc3RYXyA9IHRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgIHRoaXMubGFzdFlfID0gdG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgaWYgKHRoaXMuZXZlbnRpbmdfKSB7XG4gICAgICAgIHRoaXMuZW1pdF8oZmFsc2UsIGZhbHNlLCBlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGR4ID0gTWF0aC5hYnModGhpcy5sYXN0WF8gLSB0aGlzLnN0YXJ0WF8pID49IDg7XG4gICAgICAgIGNvbnN0IGR5ID0gTWF0aC5hYnModGhpcy5sYXN0WV8gLSB0aGlzLnN0YXJ0WV8pID49IDg7XG4gICAgICAgIGlmIChkeCB8fCBkeSkge1xuICAgICAgICAgIGlmICh0aGlzLnRhcENvdW50XyA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmFjY2VwdENhbmNlbCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNpZ25hbFJlYWR5KDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIG9uVG91Y2hFbmQoZSkge1xuICAgIGlmICh0aGlzLmV2ZW50aW5nXykge1xuICAgICAgdGhpcy5lbmRfKGUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMudGFwQ291bnRfKys7XG4gICAgaWYgKHRoaXMudGFwQ291bnRfID09IDEpIHtcbiAgICAgIHRoaXMuc2lnbmFsUGVuZGluZyg0MDApO1xuICAgICAgdGhpcy50YXBYXyA9IHRoaXMubGFzdFhfO1xuICAgICAgdGhpcy50YXBZXyA9IHRoaXMubGFzdFlfO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuYWNjZXB0Q2FuY2VsKCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFjY2VwdFN0YXJ0KCkge1xuICAgIHRoaXMudGFwQ291bnRfID0gMDtcbiAgICB0aGlzLmV2ZW50aW5nXyA9IHRydWU7XG4gICAgdGhpcy5lbWl0Xyh0cnVlLCBmYWxzZSwgbnVsbCk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFjY2VwdENhbmNlbCgpIHtcbiAgICB0aGlzLnRhcENvdW50XyA9IDA7XG4gICAgdGhpcy5ldmVudGluZ18gPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZpcnN0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gbGFzdFxuICAgKiBAcGFyYW0gez9FdmVudH0gZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVtaXRfKGZpcnN0LCBsYXN0LCBldmVudCkge1xuICAgIHRoaXMubGFzdFRpbWVfID0gRGF0ZS5ub3coKTtcbiAgICBpZiAoZmlyc3QpIHtcbiAgICAgIHRoaXMuc3RhcnRUaW1lXyA9IHRoaXMubGFzdFRpbWVfO1xuICAgICAgdGhpcy52ZWxvY2l0eVhfID0gdGhpcy52ZWxvY2l0eVlfID0gMDtcbiAgICB9IGVsc2UgaWYgKHRoaXMubGFzdFRpbWVfIC0gdGhpcy5wcmV2VGltZV8gPiAyKSB7XG4gICAgICB0aGlzLnZlbG9jaXR5WF8gPSBjYWxjVmVsb2NpdHkodGhpcy5sYXN0WF8gLSB0aGlzLnByZXZYXyxcbiAgICAgICAgICB0aGlzLmxhc3RUaW1lXyAtIHRoaXMucHJldlRpbWVfLCB0aGlzLnZlbG9jaXR5WF8pO1xuICAgICAgdGhpcy52ZWxvY2l0eVlfID0gY2FsY1ZlbG9jaXR5KHRoaXMubGFzdFlfIC0gdGhpcy5wcmV2WV8sXG4gICAgICAgICAgdGhpcy5sYXN0VGltZV8gLSB0aGlzLnByZXZUaW1lXywgdGhpcy52ZWxvY2l0eVlfKTtcbiAgICB9XG4gICAgdGhpcy5wcmV2WF8gPSB0aGlzLmxhc3RYXztcbiAgICB0aGlzLnByZXZZXyA9IHRoaXMubGFzdFlfO1xuICAgIHRoaXMucHJldlRpbWVfID0gdGhpcy5sYXN0VGltZV87XG5cbiAgICB0aGlzLnNpZ25hbEVtaXQoe1xuICAgICAgZmlyc3QsXG4gICAgICBsYXN0LFxuICAgICAgY2VudGVyQ2xpZW50WDogdGhpcy5zdGFydFhfLFxuICAgICAgY2VudGVyQ2xpZW50WTogdGhpcy5zdGFydFlfLFxuICAgICAgZGVsdGFYOiB0aGlzLmxhc3RYXyAtIHRoaXMuc3RhcnRYXyxcbiAgICAgIGRlbHRhWTogdGhpcy5sYXN0WV8gLSB0aGlzLnN0YXJ0WV8sXG4gICAgICB2ZWxvY2l0eVg6IHRoaXMudmVsb2NpdHlYXyxcbiAgICAgIHZlbG9jaXR5WTogdGhpcy52ZWxvY2l0eVlfLFxuICAgIH0sIGV2ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0gez9FdmVudH0gZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVuZF8oZXZlbnQpIHtcbiAgICBpZiAodGhpcy5ldmVudGluZ18pIHtcbiAgICAgIHRoaXMuZXZlbnRpbmdfID0gZmFsc2U7XG4gICAgICB0aGlzLmVtaXRfKGZhbHNlLCB0cnVlLCBldmVudCk7XG4gICAgICB0aGlzLnNpZ25hbEVuZCgpO1xuICAgIH1cbiAgfVxufVxuXG5cblxuLyoqXG4gKiBBIFwicGluY2hcIiBnZXN0dXJlLiBJdCBoYXMgYSBjZW50ZXIsIGRlbHRhIG9mZiB0aGUgY2VudGVyIGNlbnRlciBhbmRcbiAqIHRoZSB2ZWxvY2l0eSBvZiBtb3ZpbmcgYXdheSBmcm9tIHRoZSBjZW50ZXIuIFwiZGlyXCIgY29tcG9uZW50IG9mIGAxYFxuICogaW5kaWNhdGVzIHRoYXQgaXQncyBhIGV4cGFuZCBtb3Rpb24gYW5kIGAtMWAgaW5kaWNhdGVzIHBpbmNoIG1vdGlvbi5cbiAqIEB0eXBlZGVmIHt7XG4gKiAgIGZpcnN0OiBib29sZWFuLFxuICogICBsYXN0OiBib29sZWFuLFxuICogICBjZW50ZXJDbGllbnRYOiBudW1iZXIsXG4gKiAgIGNlbnRlckNsaWVudFk6IG51bWJlcixcbiAqICAgZGlyOiBudW1iZXIsXG4gKiAgIGRlbHRhWDogbnVtYmVyLFxuICogICBkZWx0YVk6IG51bWJlcixcbiAqICAgdmVsb2NpdHlYOiBudW1iZXIsXG4gKiAgIHZlbG9jaXR5WTogbnVtYmVyXG4gKiB9fVxuICovXG5sZXQgUGluY2hEZWY7XG5cbi8qKlxuICogVGhyZXNob2xkIGluIHBpeGVscyBmb3IgaG93IG11Y2ggdHdvIHRvdWNoZXMgbW92ZSBhd2F5IGZyb21cbiAqIGVhY2ggb3RoZXIgYmVmb3JlIHdlIHJlY29nbml6ZSB0aGUgZ2VzdHVyZSBhcyBhIHBpbmNoLlxuICovXG5jb25zdCBQSU5DSF9BQ0NFUFRfVEhSRVNIT0xEID0gNDtcblxuLyoqXG4gKiBUaHJlc2hvbGQgaW4gcGl4ZWxzIGZvciBob3cgbXVjaCB0d28gdG91Y2hlcyBtb3ZlIGluIHRoZSBzYW1lXG4gKiBkaXJlY3Rpb24gYmVmb3JlIHdlIHJlamVjdCB0aGUgZ2VzdHVyZSBhcyBhIHBpbmNoLlxuICovXG5jb25zdCBQSU5DSF9SRUpFQ1RfVEhSRVNIT0xEID0gMTA7XG5cbi8qKlxuICogUmVjb2duaXplcyBhIFwicGluY2hcIiBnZXN0dXJlLlxuICogQGV4dGVuZHMge0dlc3R1cmVSZWNvZ25pemVyPFBpbmNoRGVmPn1cbiAqL1xuZXhwb3J0IGNsYXNzIFBpbmNoUmVjb2duaXplciBleHRlbmRzIEdlc3R1cmVSZWNvZ25pemVyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vZ2VzdHVyZS5HZXN0dXJlc30gbWFuYWdlclxuICAgKi9cbiAgY29uc3RydWN0b3IobWFuYWdlcikge1xuICAgIHN1cGVyKCdwaW5jaCcsIG1hbmFnZXIpO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuZXZlbnRpbmdfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLnN0YXJ0WDFfID0gMDtcbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLnN0YXJ0WTFfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuc3RhcnRYMl8gPSAwO1xuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMuc3RhcnRZMl8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5sYXN0WDFfID0gMDtcbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmxhc3RZMV8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5sYXN0WDJfID0gMDtcbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmxhc3RZMl8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5wcmV2RGVsdGFYXyA9IDA7XG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5wcmV2RGVsdGFZXyA9IDA7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmNlbnRlckNsaWVudFhfID0gMDtcbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmNlbnRlckNsaWVudFlfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7dGltZX0gKi9cbiAgICB0aGlzLnN0YXJ0VGltZV8gPSAwO1xuICAgIC8qKiBAcHJpdmF0ZSB7dGltZX0gKi9cbiAgICB0aGlzLmxhc3RUaW1lXyA9IDA7XG4gICAgLyoqIEBwcml2YXRlIHt0aW1lfSAqL1xuICAgIHRoaXMucHJldlRpbWVfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMudmVsb2NpdHlYXyA9IDA7XG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy52ZWxvY2l0eVlfID0gMDtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgb25Ub3VjaFN0YXJ0KGUpIHtcbiAgICBjb25zdCB0b3VjaGVzID0gZS50b3VjaGVzO1xuICAgIC8vIFBpbmNoIHRvdWNoZXMgYXJlIG5vdCBhbHdheXMgc2ltdWx0YW5lb3VzLCBjb250aW51ZSB0byBsaXN0ZW5cbiAgICAvLyBmb3Igc2Vjb25kIHRvdWNoLlxuICAgIGlmICh0b3VjaGVzICYmIHRvdWNoZXMubGVuZ3RoID09IDEpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAodG91Y2hlcyAmJiB0b3VjaGVzLmxlbmd0aCA9PSAyKSB7XG4gICAgICB0aGlzLnN0YXJ0VGltZV8gPSBEYXRlLm5vdygpO1xuICAgICAgdGhpcy5zdGFydFgxXyA9IHRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgIHRoaXMuc3RhcnRZMV8gPSB0b3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICB0aGlzLnN0YXJ0WDJfID0gdG91Y2hlc1sxXS5jbGllbnRYO1xuICAgICAgdGhpcy5zdGFydFkyXyA9IHRvdWNoZXNbMV0uY2xpZW50WTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBvblRvdWNoTW92ZShlKSB7XG4gICAgY29uc3QgdG91Y2hlcyA9IGUudG91Y2hlcztcbiAgICAvLyBQaW5jaCB0b3VjaGVzIGFyZSBub3QgYWx3YXlzIHNpbXVsdGFuZW91cywgY29udGludWUgdG8gbGlzdGVuXG4gICAgLy8gZm9yIHNlY29uZCB0b3VjaC5cbiAgICBpZiAodG91Y2hlcyAmJiB0b3VjaGVzLmxlbmd0aCA9PSAxKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKHRvdWNoZXMgJiYgdG91Y2hlcy5sZW5ndGggPT0gMikge1xuICAgICAgdGhpcy5sYXN0WDFfID0gdG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgdGhpcy5sYXN0WTFfID0gdG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgdGhpcy5sYXN0WDJfID0gdG91Y2hlc1sxXS5jbGllbnRYO1xuICAgICAgdGhpcy5sYXN0WTJfID0gdG91Y2hlc1sxXS5jbGllbnRZO1xuICAgICAgaWYgKHRoaXMuZXZlbnRpbmdfKSB7XG4gICAgICAgIHRoaXMuZW1pdF8oZmFsc2UsIGZhbHNlLCBlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGR4MSA9IHRoaXMubGFzdFgxXyAtIHRoaXMuc3RhcnRYMV87XG4gICAgICAgIGNvbnN0IGR5MSA9IHRoaXMubGFzdFkxXyAtIHRoaXMuc3RhcnRZMV87XG4gICAgICAgIGNvbnN0IGR4MiA9IHRoaXMubGFzdFgyXyAtIHRoaXMuc3RhcnRYMl87XG4gICAgICAgIGNvbnN0IGR5MiA9IHRoaXMubGFzdFkyXyAtIHRoaXMuc3RhcnRZMl87XG4gICAgICAgIC8vIEZpbmdlcnMgc2hvdWxkIG1vdmUgaW4gb3Bwb3NpdGUgZGlyZWN0aW9ucyBhbmQgZ28gb3ZlciB0aGUgdGhyZXNob2xkLlxuICAgICAgICBpZiAoZHgxICogZHgyIDw9IDAgJiYgZHkxICogZHkyIDw9IDApIHtcbiAgICAgICAgICBpZiAoTWF0aC5hYnMoZHgxIC0gZHgyKSA+PSBQSU5DSF9BQ0NFUFRfVEhSRVNIT0xEXG4gICAgICAgICAgICB8fCBNYXRoLmFicyhkeTEgLSBkeTIpID49IFBJTkNIX0FDQ0VQVF9USFJFU0hPTEQpIHtcbiAgICAgICAgICAgIHRoaXMuc2lnbmFsUmVhZHkoMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKE1hdGguYWJzKGR4MSArIGR4MikgPj0gUElOQ0hfUkVKRUNUX1RIUkVTSE9MRFxuICAgICAgICAgIHx8IE1hdGguYWJzKGR5MSArIGR5MikgPj0gUElOQ0hfUkVKRUNUX1RIUkVTSE9MRCkge1xuICAgICAgICAgIC8vIE1vdmluZyBpbiB0aGUgc2FtZSBkaXJlY3Rpb24gb3ZlciBhIHRocmVzaG9sZC5cbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBvblRvdWNoRW5kKGUpIHtcbiAgICB0aGlzLmVuZF8oZSk7XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFjY2VwdFN0YXJ0KCkge1xuICAgIHRoaXMuZXZlbnRpbmdfID0gdHJ1ZTtcbiAgICB0aGlzLnByZXZUaW1lXyA9IHRoaXMuc3RhcnRUaW1lXztcbiAgICB0aGlzLnByZXZEZWx0YVhfID0gMDtcbiAgICB0aGlzLnByZXZEZWx0YVlfID0gMDtcbiAgICB0aGlzLmNlbnRlckNsaWVudFhfID0gKHRoaXMuc3RhcnRYMV8gKyB0aGlzLnN0YXJ0WDJfKSAqIDAuNTtcbiAgICB0aGlzLmNlbnRlckNsaWVudFlfID0gKHRoaXMuc3RhcnRZMV8gKyB0aGlzLnN0YXJ0WTJfKSAqIDAuNTtcbiAgICB0aGlzLmVtaXRfKHRydWUsIGZhbHNlLCBudWxsKTtcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYWNjZXB0Q2FuY2VsKCkge1xuICAgIHRoaXMuZXZlbnRpbmdfID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBmaXJzdFxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGxhc3RcbiAgICogQHBhcmFtIHs/RXZlbnR9IGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBlbWl0XyhmaXJzdCwgbGFzdCwgZXZlbnQpIHtcbiAgICB0aGlzLmxhc3RUaW1lXyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgZGVsdGFUaW1lID0gdGhpcy5sYXN0VGltZV8gLSB0aGlzLnByZXZUaW1lXztcbiAgICBjb25zdCBkZWx0YVggPSB0aGlzLmRlbHRhWF8oKTtcbiAgICBjb25zdCBkZWx0YVkgPSB0aGlzLmRlbHRhWV8oKTtcbiAgICAvLyBJdCdzIG9mdGVuIHRoYXQgYHRvdWNoZW5kYCBhcnJpdmVzIG9uIHRoZSBuZXh0IGZyYW1lLiBUaGVzZSBzaG91bGRcbiAgICAvLyBiZSBpZ25vcmVkIHRvIGF2b2lkIGEgc2lnbmlmaWNhbnQgdmVsb2NpdHkgZG93bmdyYWRlLlxuICAgIGlmICghbGFzdCAmJiBkZWx0YVRpbWUgPiA0IHx8IGxhc3QgJiYgZGVsdGFUaW1lID4gMTYpIHtcbiAgICAgIHRoaXMudmVsb2NpdHlYXyA9IGNhbGNWZWxvY2l0eShkZWx0YVggLSB0aGlzLnByZXZEZWx0YVhfLCBkZWx0YVRpbWUsXG4gICAgICAgICAgdGhpcy52ZWxvY2l0eVhfKTtcbiAgICAgIHRoaXMudmVsb2NpdHlZXyA9IGNhbGNWZWxvY2l0eShkZWx0YVkgLSB0aGlzLnByZXZEZWx0YVlfLCBkZWx0YVRpbWUsXG4gICAgICAgICAgdGhpcy52ZWxvY2l0eVlfKTtcbiAgICAgIHRoaXMudmVsb2NpdHlYXyA9IE1hdGguYWJzKHRoaXMudmVsb2NpdHlYXykgPiAxZS00ID8gdGhpcy52ZWxvY2l0eVhfIDogMDtcbiAgICAgIHRoaXMudmVsb2NpdHlZXyA9IE1hdGguYWJzKHRoaXMudmVsb2NpdHlZXykgPiAxZS00ID8gdGhpcy52ZWxvY2l0eVlfIDogMDtcbiAgICAgIHRoaXMucHJldkRlbHRhWF8gPSBkZWx0YVg7XG4gICAgICB0aGlzLnByZXZEZWx0YVlfID0gZGVsdGFZO1xuICAgICAgdGhpcy5wcmV2VGltZV8gPSB0aGlzLmxhc3RUaW1lXztcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydFNxID0gdGhpcy5zcURpc3RfKHRoaXMuc3RhcnRYMV8sIHRoaXMuc3RhcnRYMl8sXG4gICAgICAgIHRoaXMuc3RhcnRZMV8sIHRoaXMuc3RhcnRZMl8pO1xuICAgIGNvbnN0IGxhc3RTcSA9IHRoaXMuc3FEaXN0Xyh0aGlzLmxhc3RYMV8sIHRoaXMubGFzdFgyXyxcbiAgICAgICAgdGhpcy5sYXN0WTFfLCB0aGlzLmxhc3RZMl8pO1xuICAgIHRoaXMuc2lnbmFsRW1pdCh7XG4gICAgICBmaXJzdCxcbiAgICAgIGxhc3QsXG4gICAgICB0aW1lOiB0aGlzLmxhc3RUaW1lXyxcbiAgICAgIGNlbnRlckNsaWVudFg6IHRoaXMuY2VudGVyQ2xpZW50WF8sXG4gICAgICBjZW50ZXJDbGllbnRZOiB0aGlzLmNlbnRlckNsaWVudFlfLFxuICAgICAgZGlyOiBNYXRoLnNpZ24obGFzdFNxIC0gc3RhcnRTcSksXG4gICAgICBkZWx0YVg6IGRlbHRhWCAqIDAuNSxcbiAgICAgIGRlbHRhWTogZGVsdGFZICogMC41LFxuICAgICAgdmVsb2NpdHlYOiB0aGlzLnZlbG9jaXR5WF8gKiAwLjUsXG4gICAgICB2ZWxvY2l0eVk6IHRoaXMudmVsb2NpdHlZXyAqIDAuNSxcbiAgICB9LCBldmVudCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHs/RXZlbnR9IGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBlbmRfKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuZXZlbnRpbmdfKSB7XG4gICAgICB0aGlzLmV2ZW50aW5nXyA9IGZhbHNlO1xuICAgICAgdGhpcy5lbWl0XyhmYWxzZSwgdHJ1ZSwgZXZlbnQpO1xuICAgICAgdGhpcy5zaWduYWxFbmQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IHgxXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4MlxuICAgKiBAcGFyYW0ge251bWJlcn0geTFcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkyXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNxRGlzdF8oeDEsIHgyLCB5MSwgeTIpIHtcbiAgICByZXR1cm4gKHgxIC0geDIpICogKHgxIC0geDIpICsgKHkxIC0geTIpICogKHkxIC0geTIpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRlbHRhWF8oKSB7XG4gICAgcmV0dXJuIE1hdGguYWJzKCh0aGlzLmxhc3RYMV8gLSB0aGlzLnN0YXJ0WDFfKSAtXG4gICAgICAgICh0aGlzLmxhc3RYMl8gLSB0aGlzLnN0YXJ0WDJfKSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGVsdGFZXygpIHtcbiAgICByZXR1cm4gTWF0aC5hYnMoKHRoaXMubGFzdFkxXyAtIHRoaXMuc3RhcnRZMV8pIC1cbiAgICAgICAgKHRoaXMubGFzdFkyXyAtIHRoaXMuc3RhcnRZMl8pKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAnLi9vYnNlcnZhYmxlJztcbmltcG9ydCB7UGFzc30gZnJvbSAnLi9wYXNzJztcbmltcG9ydCB7ZGV2fSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge2ZpbmRJbmRleH0gZnJvbSAnLi91dGlscy9hcnJheSc7XG5pbXBvcnQge3RvV2lufSBmcm9tICcuL3R5cGVzJztcblxuXG5jb25zdCBQUk9QXyA9ICdfX0FNUF9HZXN0dXJlcyc7XG5cblxuLyoqXG4gKiBBIGdlc3R1cmUgb2JqZWN0IGNvbnRhaW5zIHRoZSB0eXBlIGFuZCBkYXRhIG9mIHRoZSBnZXN0dXJlIHN1Y2ggYXNcbiAqIGEgdGFwIG9yIGEgZG91YmxlLXRhcCBvciBhIHN3aXBlLiBTZWUge0BsaW5rIEdlc3R1cmVSZWNvZ25pemVyfSBmb3JcbiAqIG1vcmUgZGV0YWlscy5cbiAqIEBzdHJ1Y3RcbiAqIEBjb25zdFxuICogQHRlbXBsYXRlIERBVEFcbiAqL1xuZXhwb3J0IGNsYXNzIEdlc3R1cmUge1xuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVGhlIGdlc3R1cmUncyBzdHJpbmcgdHlwZS5cbiAgICogQHBhcmFtIHtEQVRBfSBkYXRhIFRoZSBkYXRhIG9mIHRoZSBnZXN0dXJlLlxuICAgKiBAcGFyYW0ge3RpbWV9IHRpbWUgVGhlIHRpbWUgdGhhdCB0aGUgZ2VzdHVyZSBoYXMgYmVlbiBlbWl0dGVkLlxuICAgKiBAcGFyYW0gez9FdmVudH0gZXZlbnQgQW4gb3B0aW9uYWwgYnJvd3NlciBldmVudCB0aGF0IHJlc3VsdGVkIGluIHRoZVxuICAgKiAgIGdlc3R1cmUuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih0eXBlLCBkYXRhLCB0aW1lLCBldmVudCkge1xuICAgIC8qKiBAY29uc3Qge3N0cmluZ30gKi9cbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIC8qKiBAY29uc3Qge0RBVEF9ICovXG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAvKiogQGNvbnN0IHt0aW1lfSAqL1xuICAgIHRoaXMudGltZSA9IHRpbWU7XG4gICAgLyoqIEBjb25zdCB7P0V2ZW50fSAqL1xuICAgIHRoaXMuZXZlbnQgPSBldmVudDtcbiAgfVxufVxuXG5cbi8qKlxuICogR2VzdHVyZXMgb2JqZWN0IG1hbmFnZXMgYWxsIGdlc3R1cmVzIG9uIGEgcGFydGljdWxhciBlbGVtZW50LiBJdCBsaXN0ZW5zXG4gKiB0byBhbGwgcG9pbnRlciBldmVudHMgYW5kIGRlbGVnYXRlcyB0aGVtIHRvIGluZGl2aWR1YWwgZ2VzdHVyZSByZWNvZ25pemVycy5cbiAqIFdoZW4gYSByZWNvZ25pemVyIGhhcyByZWNvZ25pemVkIGEgZ2VzdHVyZSBhbmQgcmVhZHkgdG8gc3RhcnQgZW1pdHRpbmcgaXRcbiAqIGl0IHJlcXVlc3RzIHBlcm1pc3Npb24gdG8gZG8gc28gZnJvbSB0aGlzIGNsYXNzIHdoaWNoIHJlc29sdmVzIGNvbmZsaWN0c1xuICogYmV0d2VlbiBjb21wZXRpbmcgcmVjb2duaXplcnMgdG8gZGVjaWRlIHdoaWNoIGdlc3R1cmUgc2hvdWxkIGdvIGZvcndhcmQuXG4gKi9cbmV4cG9ydCBjbGFzcyBHZXN0dXJlcyB7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgaWYgbm90IHlldCBjcmVhdGVkIGFuZCByZXR1cm5zIHRoZSBzaGFyZWQgR2VzdHVyZXMgaW5zdGFuY2UgZm9yXG4gICAqIHRoZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAgICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfc2hvdWxkTm90UHJldmVudERlZmF1bHRcbiAgICogQHJldHVybiB7IUdlc3R1cmVzfVxuICAgKi9cbiAgc3RhdGljIGdldChlbGVtZW50LCBvcHRfc2hvdWxkTm90UHJldmVudERlZmF1bHQgPSBmYWxzZSkge1xuICAgIGxldCByZXMgPSBlbGVtZW50W1BST1BfXTtcbiAgICBpZiAoIXJlcykge1xuICAgICAgcmVzID0gbmV3IEdlc3R1cmVzKGVsZW1lbnQsIG9wdF9zaG91bGROb3RQcmV2ZW50RGVmYXVsdCk7XG4gICAgICBlbGVtZW50W1BST1BfXSA9IHJlcztcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gICAqL1xuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBzaG91bGROb3RQcmV2ZW50RGVmYXVsdCkge1xuICAgIC8qKiBAcHJpdmF0ZSB7IUVsZW1lbnR9ICovXG4gICAgdGhpcy5lbGVtZW50XyA9IGVsZW1lbnQ7XG5cbiAgICAvKiogQHByaXZhdGUgeyFBcnJheTwhR2VzdHVyZVJlY29nbml6ZXI+fSAqL1xuICAgIHRoaXMucmVjb2duaXplcnNfID0gW107XG5cbiAgICAvKiogQHByaXZhdGUgeyFBcnJheTxib29sZWFuPn0gKi9cbiAgICB0aGlzLnRyYWNraW5nXyA9IFtdO1xuXG4gICAgLyoqIEBwcml2YXRlIHshQXJyYXk8dGltZT59ICovXG4gICAgdGhpcy5yZWFkeV8gPSBbXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7IUFycmF5PHRpbWU+fSAqL1xuICAgIHRoaXMucGVuZGluZ18gPSBbXTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7P0dlc3R1cmVSZWNvZ25pemVyfSAqL1xuICAgIHRoaXMuZXZlbnRpbmdfID0gbnVsbDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLnNob3VsZE5vdFByZXZlbnREZWZhdWx0XyA9IHNob3VsZE5vdFByZXZlbnREZWZhdWx0O1xuXG4gICAgLyoqXG4gICAgICogVGhpcyB2YXJpYWJsZSBpbmRpY2F0ZXMgdGhhdCB0aGUgZXZlbnRpbmcgaGFzIHN0b3BwZWQgb24gdGhpc1xuICAgICAqIGV2ZW50IGN5Y2xlLlxuICAgICAqIEBwcml2YXRlIHtib29sZWFufVxuICAgICAqL1xuICAgIHRoaXMud2FzRXZlbnRpbmdfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgeyFQYXNzfSAqL1xuICAgIHRoaXMucGFzc18gPSBuZXcgUGFzcyh0b1dpbihlbGVtZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpLFxuICAgICAgICB0aGlzLmRvUGFzc18uYmluZCh0aGlzKSk7XG5cbiAgICAvKiogQHByaXZhdGUgeyFPYnNlcnZhYmxlfSAqL1xuICAgIHRoaXMucG9pbnRlckRvd25PYnNlcnZhYmxlXyA9IG5ldyBPYnNlcnZhYmxlKCk7XG5cbiAgICAvKipcbiAgICAgKiBPYnNlcnZlcnMgZm9yIGVhY2ggdHlwZSBvZiByZWdpc3RlcmVkIGdlc3R1cmUgdHlwZXMuXG4gICAgICogQHByaXZhdGUgeyFPYmplY3Q8c3RyaW5nLCAhT2JzZXJ2YWJsZTwhR2VzdHVyZT4+fVxuICAgICAqL1xuICAgIHRoaXMub3ZlcnNlcnZlcnNfID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Z1bmN0aW9uKCFFdmVudCl9ICovXG4gICAgdGhpcy5ib3VuZE9uVG91Y2hTdGFydF8gPSB0aGlzLm9uVG91Y2hTdGFydF8uYmluZCh0aGlzKTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtmdW5jdGlvbighRXZlbnQpfSAqL1xuICAgIHRoaXMuYm91bmRPblRvdWNoRW5kXyA9IHRoaXMub25Ub3VjaEVuZF8uYmluZCh0aGlzKTtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtmdW5jdGlvbighRXZlbnQpfSAqL1xuICAgIHRoaXMuYm91bmRPblRvdWNoTW92ZV8gPSB0aGlzLm9uVG91Y2hNb3ZlXy5iaW5kKHRoaXMpO1xuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Z1bmN0aW9uKCFFdmVudCl9ICovXG4gICAgdGhpcy5ib3VuZE9uVG91Y2hDYW5jZWxfID0gdGhpcy5vblRvdWNoQ2FuY2VsXy5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5lbGVtZW50Xy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5ib3VuZE9uVG91Y2hTdGFydF8pO1xuICAgIHRoaXMuZWxlbWVudF8uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLmJvdW5kT25Ub3VjaEVuZF8pO1xuICAgIHRoaXMuZWxlbWVudF8uYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5ib3VuZE9uVG91Y2hNb3ZlXyk7XG4gICAgdGhpcy5lbGVtZW50Xy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIHRoaXMuYm91bmRPblRvdWNoQ2FuY2VsXyk7XG5cbiAgICAvKiogQHByaXZhdGUge2Jvb2xlYW59ICovXG4gICAgdGhpcy5wYXNzQWZ0ZXJFdmVudF8gPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnN1YnNjcmliZXMgZnJvbSBhbGwgcG9pbnRlciBldmVudHMgYW5kIHJlbW92ZXMgdGhlIHNoYXJlZCBjYWNoZSBpbnN0YW5jZS5cbiAgICovXG4gIGNsZWFudXAoKSB7XG4gICAgdGhpcy5lbGVtZW50Xy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5ib3VuZE9uVG91Y2hTdGFydF8pO1xuICAgIHRoaXMuZWxlbWVudF8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLmJvdW5kT25Ub3VjaEVuZF8pO1xuICAgIHRoaXMuZWxlbWVudF8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5ib3VuZE9uVG91Y2hNb3ZlXyk7XG4gICAgdGhpcy5lbGVtZW50Xy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIHRoaXMuYm91bmRPblRvdWNoQ2FuY2VsXyk7XG4gICAgZGVsZXRlIHRoaXMuZWxlbWVudF9bUFJPUF9dO1xuICAgIHRoaXMucGFzc18uY2FuY2VsKCk7XG4gIH1cblxuICAvKipcbiAgICogU3Vic2NyaWJlcyB0byBhIGdlc3R1cmUgZW1pdHRlZCBieSB0aGUgc3BlY2lmaWVkIHJlY29nbml6ZXIuIEZvciBhIGZpcnN0XG4gICAqIGdlc3R1cmUgaGFuZGxlciByZWdpc3RlcmVkIGluIHRoaXMgbWV0aG9kIHRoZSByZWNvZ25pemVyIGlzIGluc3RhbGxlZFxuICAgKiBhbmQgZnJvbSB0aGF0IHBvaW50IG9uIGl0IHBhcnRpY2lwYXRlcyBpbiB0aGUgZXZlbnQgcHJvY2Vzc2luZy5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbihuZXc6R2VzdHVyZVJlY29nbml6ZXI8REFUQT4sICFHZXN0dXJlcyl9IHJlY29nbml6ZXJDb25zdHJcbiAgICogQHBhcmFtIHtmdW5jdGlvbighR2VzdHVyZTxEQVRBPil9IGhhbmRsZXJcbiAgICogQHJldHVybiB7IVVubGlzdGVuRGVmfVxuICAgKiBAdGVtcGxhdGUgREFUQVxuICAgKi9cbiAgb25HZXN0dXJlKHJlY29nbml6ZXJDb25zdHIsIGhhbmRsZXIpIHtcbiAgICBjb25zdCByZWNvZ25pemVyID0gbmV3IHJlY29nbml6ZXJDb25zdHIodGhpcyk7XG4gICAgY29uc3QgdHlwZSA9IHJlY29nbml6ZXIuZ2V0VHlwZSgpO1xuICAgIGxldCBvdmVyc2VydmVyID0gdGhpcy5vdmVyc2VydmVyc19bdHlwZV07XG4gICAgaWYgKCFvdmVyc2VydmVyKSB7XG4gICAgICB0aGlzLnJlY29nbml6ZXJzXy5wdXNoKHJlY29nbml6ZXIpO1xuICAgICAgb3ZlcnNlcnZlciA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICB0aGlzLm92ZXJzZXJ2ZXJzX1t0eXBlXSA9IG92ZXJzZXJ2ZXI7XG4gICAgfVxuICAgIHJldHVybiBvdmVyc2VydmVyLmFkZChoYW5kbGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVbnN1YnNjcmliZXMgYWxsIGhhbmRsZXJzIGZyb20gdGhlIGdpdmVuIGdlc3R1cmUgcmVjb2duaXplci4gUmV0dXJuc1xuICAgKiB0cnVlIGlmIGFueXRoaW5nIHdhcyBkb25lLiBSZXR1cm5zIGZhbHNlIGlmIHRoZXJlIHdlcmUgbm8gaGFuZGxlcnNcbiAgICogcmVnaXN0ZXJlZCBvbiB0aGUgZ2l2ZW4gZ2VzdHVyZSByZWNvZ25pemVyIGluIGZpcnN0IHBsYWNlLlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpHZXN0dXJlUmVjb2duaXplcjxEQVRBPiwgIUdlc3R1cmVzKX0gcmVjb2duaXplckNvbnN0clxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgcmVtb3ZlR2VzdHVyZShyZWNvZ25pemVyQ29uc3RyKSB7XG4gICAgY29uc3QgdHlwZSA9IG5ldyByZWNvZ25pemVyQ29uc3RyKHRoaXMpLmdldFR5cGUoKTtcbiAgICBjb25zdCBvdmVyc2VydmVyID0gdGhpcy5vdmVyc2VydmVyc19bdHlwZV07XG4gICAgaWYgKG92ZXJzZXJ2ZXIpIHtcbiAgICAgIG92ZXJzZXJ2ZXIucmVtb3ZlQWxsKCk7XG4gICAgICBjb25zdCBpbmRleCA9IGZpbmRJbmRleCh0aGlzLnJlY29nbml6ZXJzXywgZSA9PiBlLmdldFR5cGUoKSA9PSB0eXBlKTtcbiAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gUmVtb3ZlIHRoZSByZWNvZ25pemVyIGFzIHdlbGwgYXMgYWxsIGFzc29jaWF0ZWQgdHJhY2tpbmcgc3RhdGVcbiAgICAgIHRoaXMucmVjb2duaXplcnNfLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB0aGlzLnJlYWR5Xy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgdGhpcy5wZW5kaW5nXy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgdGhpcy50cmFja2luZ18uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIGRlbGV0ZSB0aGlzLm92ZXJzZXJ2ZXJzX1t0eXBlXTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN1YnNjcmliZXMgdG8gcG9pbnRlciBkb3duIGV2ZW50cywgc3VjaCBhcyBcInRvdWNoc3RhcnRcIiBvciBcIm1vdXNlZG93blwiLlxuICAgKiBAcGFyYW0geyFGdW5jdGlvbn0gaGFuZGxlclxuICAgKiBAcmV0dXJuIHshVW5saXN0ZW5EZWZ9XG4gICAqL1xuICBvblBvaW50ZXJEb3duKGhhbmRsZXIpIHtcbiAgICByZXR1cm4gdGhpcy5wb2ludGVyRG93bk9ic2VydmFibGVfLmFkZChoYW5kbGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGFsbCBcInRvdWNoc3RhcnRcIiBldmVudHMgYW5kIGRpc3BhdGNoZXMgdGhlbSB0byB0aGUgdHJhY2tpbmdcbiAgICogcmVjb2duaXplcnMuXG4gICAqIEBwYXJhbSB7IUV2ZW50fSBldmVudFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgb25Ub3VjaFN0YXJ0XyhldmVudCkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgdGhpcy53YXNFdmVudGluZ18gPSBmYWxzZTtcblxuICAgIHRoaXMucG9pbnRlckRvd25PYnNlcnZhYmxlXy5maXJlKGV2ZW50KTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yZWNvZ25pemVyc18ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLnJlYWR5X1tpXSkge1xuICAgICAgICAvLyBJZiB0aGUgcmVjb2duaXplciBpcyBpbiB0aGUgXCJyZWFkeVwiIHN0YXRlLCBpdCB3b24ndCByZWNlaXZlXG4gICAgICAgIC8vIGFueSBtb3JlIHRvdWNoIHNlcmllcyB1bnRpbCBpdCdzIGFsbG93ZWQgdG8gZW1pdC5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wZW5kaW5nX1tpXSAmJiB0aGlzLnBlbmRpbmdfW2ldIDwgbm93KSB7XG4gICAgICAgIC8vIFBlbmRpbmcgc3RhdGUgZXhwaXJlZC4gUmVzZXQuXG4gICAgICAgIHRoaXMuc3RvcFRyYWNraW5nXyhpKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnJlY29nbml6ZXJzX1tpXS5vblRvdWNoU3RhcnQoZXZlbnQpKSB7XG4gICAgICAgIC8vIFdoZW4gYSByZWNvZ25pemVyIGlzIGludGVyZXN0ZWQgaW4gdGhlIHRvdWNoIHNlcmllcyBpdCByZXR1cm5zIFwidHJ1ZVwiXG4gICAgICAgIC8vIGZyb20gaXRzIG9uVG91Y2hTdGFydCBtZXRob2QuIEZvciB0aGlzIHJlY29nbml6ZXIgd2Ugc3RhcnQgdHJhY2tpbmdcbiAgICAgICAgLy8gdGhlIHdob2xlIHNlcmllcyBvZiB0b3VjaCBldmVudHMgZnJvbSB0b3VjaHN0YXJ0IHRvIHRvdWNoZW5kLiBPdGhlclxuICAgICAgICAvLyByZWNvZ25pemVycyB3aWxsIG5vdCByZWNlaXZlIHRoZW0gdW5sZXNzIHRoZXkgcmV0dXJuIFwidHJ1ZVwiIGZyb21cbiAgICAgICAgLy8gb25Ub3VjaFN0YXJ0LlxuICAgICAgICB0aGlzLnN0YXJ0VHJhY2tpbmdfKGkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYWZ0ZXJFdmVudF8oZXZlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYWxsIFwidG91Y2htb3ZlXCIgZXZlbnRzIGFuZCBkaXNwYXRjaGVzIHRoZW0gdG8gdGhlIHRyYWNraW5nXG4gICAqIHJlY29nbml6ZXJzLlxuICAgKiBAcGFyYW0geyFFdmVudH0gZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uVG91Y2hNb3ZlXyhldmVudCkge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmVjb2duaXplcnNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIXRoaXMudHJhY2tpbmdfW2ldKSB7XG4gICAgICAgIC8vIFRoZSB3aG9sZSB0b3VjaCBzZXJpZXMgYXJlIGlnbm9yZWQgZm9yIG5vbi10cmFja2luZyByZWNvZ25pemVycy5cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wZW5kaW5nX1tpXSAmJiB0aGlzLnBlbmRpbmdfW2ldIDwgbm93KSB7XG4gICAgICAgIC8vIFBlbmRpbmcgc3RhdGUgZXhwaXJlZC4gUmVzZXQuXG4gICAgICAgIHRoaXMuc3RvcFRyYWNraW5nXyhpKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMucmVjb2duaXplcnNfW2ldLm9uVG91Y2hNb3ZlKGV2ZW50KSkge1xuICAgICAgICAvLyBSZWNvZ25pemVyIGxvc3QgaW50ZXJlc3QgaW4gdGhlIHNlcmllcy4gUmVzZXQuXG4gICAgICAgIHRoaXMuc3RvcFRyYWNraW5nXyhpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmFmdGVyRXZlbnRfKGV2ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGFsbCBcInRvdWNoZW5kXCIgZXZlbnRzIGFuZCBkaXNwYXRjaGVzIHRoZW0gdG8gdGhlIHRyYWNraW5nXG4gICAqIHJlY29nbml6ZXJzLlxuICAgKiBAcGFyYW0geyFFdmVudH0gZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uVG91Y2hFbmRfKGV2ZW50KSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yZWNvZ25pemVyc18ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghdGhpcy50cmFja2luZ19baV0pIHtcbiAgICAgICAgLy8gVGhlIHdob2xlIHRvdWNoIHNlcmllcyBhcmUgaWdub3JlZCBmb3Igbm9uLXRyYWNraW5nIHJlY29nbml6ZXJzLlxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnBlbmRpbmdfW2ldICYmIHRoaXMucGVuZGluZ19baV0gPCBub3cpIHtcbiAgICAgICAgLy8gUGVuZGluZyBzdGF0ZSBleHBpcmVkLiBSZXNldC5cbiAgICAgICAgdGhpcy5zdG9wVHJhY2tpbmdfKGkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVjb2duaXplcnNfW2ldLm9uVG91Y2hFbmQoZXZlbnQpO1xuICAgICAgaWYgKCF0aGlzLnBlbmRpbmdfW2ldIHx8IHRoaXMucGVuZGluZ19baV0gPCBub3cpIHtcbiAgICAgICAgdGhpcy5zdG9wVHJhY2tpbmdfKGkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuYWZ0ZXJFdmVudF8oZXZlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZXMgYWxsIFwidG91Y2hjYW5jZWxcIiBldmVudHMuIENhbmNlbHMgYWxsIHRyYWNraW5nL2VtaXR0aW5nXG4gICAqIHJlY29nbml6ZXJzLlxuICAgKiBAcGFyYW0geyFFdmVudH0gZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIG9uVG91Y2hDYW5jZWxfKGV2ZW50KSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJlY29nbml6ZXJzXy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5jYW5jZWxFdmVudGluZ18oaSk7XG4gICAgfVxuICAgIHRoaXMuYWZ0ZXJFdmVudF8oZXZlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZvciBhIGdlc3R1cmUgcmVjb2duaXplciB0byBjb21tdW5pY2F0ZSB0aGF0IGl0J3MgcmVhZHkgdG9cbiAgICogc3RhcnQgZW1pdHRpbmcgZ2VzdHVyZXMuIEdlc3R1cmVzIGluc3RhbmNlIG1heSBvciBtYXkgbm90IGFsbG93IHRoZVxuICAgKiByZWNvZ25pemVyIHRvIHByb2NlZWQuXG4gICAqIEBwYXJhbSB7IUdlc3R1cmVSZWNvZ25pemVyfSByZWNvZ25pemVyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNpZ25hbFJlYWR5XyhyZWNvZ25pemVyLCBvZmZzZXQpIHtcbiAgICAvLyBTb21lYm9keSBnb3QgaGVyZSBmaXJzdC5cbiAgICBpZiAodGhpcy5ldmVudGluZ18pIHtcbiAgICAgIHJlY29nbml6ZXIuYWNjZXB0Q2FuY2VsKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gU2V0IHRoZSByZWNvZ25pemVyIGFzIHJlYWR5IGFuZCB3YWl0IGZvciB0aGUgcGFzcyB0b1xuICAgIC8vIG1ha2UgdGhlIGRlY2lzaW9uLlxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJlY29nbml6ZXJzXy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHRoaXMucmVjb2duaXplcnNfW2ldID09IHJlY29nbml6ZXIpIHtcbiAgICAgICAgdGhpcy5yZWFkeV9baV0gPSBub3cgKyBvZmZzZXQ7XG4gICAgICAgIHRoaXMucGVuZGluZ19baV0gPSAwO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnBhc3NBZnRlckV2ZW50XyA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbGJhY2sgZm9yIGEgZ2VzdHVyZSByZWNvZ25pemVyIHRvIGNvbW11bmljYXRlIHRoYXQgaXQncyBjbG9zZSB0b1xuICAgKiBzdGFydCBlbWl0dGluZyBnZXN0dXJlcywgYnV0IG5lZWRzIG1vcmUgdGltZSB0byBzZWUgbW9yZSBldmVudHMuIE9uY2VcbiAgICogdGhpcyB0aW1lIGV4cGlyZXMgdGhlIHJlY29nbml6ZXIgc2hvdWxkIGVpdGhlciBzaWduYWwgcmVhZGluZXNzIG9yIGl0XG4gICAqIHdpbGwgYmUgY2FuY2VsZWQuXG4gICAqIEBwYXJhbSB7IUdlc3R1cmVSZWNvZ25pemVyfSByZWNvZ25pemVyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lTGVmdFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc2lnbmFsUGVuZGluZ18ocmVjb2duaXplciwgdGltZUxlZnQpIHtcbiAgICAvLyBTb21lYm9keSBnb3QgaGVyZSBmaXJzdC5cbiAgICBpZiAodGhpcy5ldmVudGluZ18pIHtcbiAgICAgIHJlY29nbml6ZXIuYWNjZXB0Q2FuY2VsKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmVjb2duaXplcnNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5yZWNvZ25pemVyc19baV0gPT0gcmVjb2duaXplcikge1xuICAgICAgICB0aGlzLnBlbmRpbmdfW2ldID0gbm93ICsgdGltZUxlZnQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZvciBhIGdlc3R1cmUgcmVjb2duaXplciB0byBjb21tdW5pY2F0ZSB0aGF0IGl0J3MgZG9uZVxuICAgKiBlbWl0dGluZyBnZXN0dXJlcy5cbiAgICogQHBhcmFtIHshR2VzdHVyZVJlY29nbml6ZXJ9IHJlY29nbml6ZXJcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHNpZ25hbEVuZF8ocmVjb2duaXplcikge1xuICAgIGlmICh0aGlzLmV2ZW50aW5nXyA9PSByZWNvZ25pemVyKSB7XG4gICAgICB0aGlzLmV2ZW50aW5nXyA9IG51bGw7XG4gICAgICB0aGlzLndhc0V2ZW50aW5nXyA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZvciBhIGdlc3R1cmUgZW1pdCB0aGUgZ2VzdHVyZS4gT25seSB0aGUgY3VycmVudGx5IGVtaXR0aW5nXG4gICAqIHJlY29nbml6ZXIgaXMgYWxsb3dlZCB0byBlbWl0IGdlc3R1cmVzLlxuICAgKiBAcGFyYW0geyFHZXN0dXJlUmVjb2duaXplcn0gcmVjb2duaXplclxuICAgKiBAcGFyYW0geyp9IGRhdGFcbiAgICogQHBhcmFtIHs/RXZlbnR9IGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzaWduYWxFbWl0XyhyZWNvZ25pemVyLCBkYXRhLCBldmVudCkge1xuICAgIGRldigpLmFzc2VydCh0aGlzLmV2ZW50aW5nXyA9PSByZWNvZ25pemVyLFxuICAgICAgICAnUmVjb2duaXplciBpcyBub3QgY3VycmVudGx5IGFsbG93ZWQ6ICVzJywgcmVjb2duaXplci5nZXRUeXBlKCkpO1xuICAgIGNvbnN0IG92ZXJzZXJ2ZXIgPSB0aGlzLm92ZXJzZXJ2ZXJzX1tyZWNvZ25pemVyLmdldFR5cGUoKV07XG4gICAgaWYgKG92ZXJzZXJ2ZXIpIHtcbiAgICAgIG92ZXJzZXJ2ZXIuZmlyZShuZXcgR2VzdHVyZShyZWNvZ25pemVyLmdldFR5cGUoKSwgZGF0YSwgRGF0ZS5ub3coKSxcbiAgICAgICAgICBldmVudCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFdmVudH0gZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGFmdGVyRXZlbnRfKGV2ZW50KSB7XG4gICAgbGV0IGNhbmNlbEV2ZW50ID0gISF0aGlzLmV2ZW50aW5nXyB8fCB0aGlzLndhc0V2ZW50aW5nXztcbiAgICB0aGlzLndhc0V2ZW50aW5nXyA9IGZhbHNlO1xuICAgIGlmICghY2FuY2VsRXZlbnQpIHtcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmVjb2duaXplcnNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh0aGlzLnJlYWR5X1tpXSB8fFxuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ19baV0gJiYgdGhpcy5wZW5kaW5nX1tpXSA+PSBub3cpIHtcbiAgICAgICAgICBjYW5jZWxFdmVudCA9IHRydWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGNhbmNlbEV2ZW50KSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGlmICghdGhpcy5zaG91bGROb3RQcmV2ZW50RGVmYXVsdF8pIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMucGFzc0FmdGVyRXZlbnRfKSB7XG4gICAgICB0aGlzLnBhc3NBZnRlckV2ZW50XyA9IGZhbHNlO1xuICAgICAgdGhpcy5kb1Bhc3NfKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBwYXNzIHRoYXQgZGVjaWRlcyB3aGljaCByZWNvZ25pemVycyBjYW4gc3RhcnQgZW1pdHRpbmcgYW5kIHdoaWNoXG4gICAqIGFyZSBjYW5jZWxlZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRvUGFzc18oKSB7XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcblxuICAgIC8vIFRoZSBcIm1vc3QgcmVhZHlcIiByZWNvZ25pemVyIGlzIHRoZSB5b3VuZ2VzdCBpbiB0aGUgXCJyZWFkeVwiIHNldC5cbiAgICAvLyBPdGhlcndpc2Ugd2Ugd291bGRuJ3Qgd2FpdCBmb3IgaXQgYXQgYWxsLlxuICAgIGxldCByZWFkeUluZGV4ID0gLTE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJlY29nbml6ZXJzXy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCF0aGlzLnJlYWR5X1tpXSkge1xuICAgICAgICBpZiAodGhpcy5wZW5kaW5nX1tpXSAmJiB0aGlzLnBlbmRpbmdfW2ldIDwgbm93KSB7XG4gICAgICAgICAgLy8gUGVuZGluZyBzdGF0ZSBleHBpcmVkLiBSZXNldC5cbiAgICAgICAgICB0aGlzLnN0b3BUcmFja2luZ18oaSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAocmVhZHlJbmRleCA9PSAtMSB8fCB0aGlzLnJlYWR5X1tpXSA+IHRoaXMucmVhZHlfW3JlYWR5SW5kZXhdKSB7XG4gICAgICAgIHJlYWR5SW5kZXggPSBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZWFkeUluZGV4ID09IC0xKSB7XG4gICAgICAvLyBOb3RoaW5nIHRvIGRvLlxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIExvb2sgZm9yIGNvbmZsaWN0cy5cbiAgICBsZXQgd2FpdFRpbWUgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yZWNvZ25pemVyc18ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLnJlYWR5X1tpXSB8fCAhdGhpcy50cmFja2luZ19baV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB3YWl0VGltZSA9IE1hdGgubWF4KHdhaXRUaW1lLCB0aGlzLnBlbmRpbmdfW2ldIC0gbm93KTtcbiAgICB9XG5cbiAgICBpZiAod2FpdFRpbWUgPCAyKSB7XG4gICAgICAvLyBXZSB3YWl0ZWQgbG9uZyBlbm91Z2guXG4gICAgICB0aGlzLnN0YXJ0RXZlbnRpbmdfKHJlYWR5SW5kZXgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNvbWUgY29uZmxpY3RzOiBoYXZlIHRvIHdhaXQgdG8gc2VlIHdobyB3aW5zLlxuICAgIHRoaXMucGFzc18uc2NoZWR1bGUod2FpdFRpbWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgcmVjb2duaXplciBpcyBnaXZlbiBcImdvIGFoZWFkXCIgYW5kIGFsbCBvdGhlcnMgYXJlIGNhbmNlbGVkLlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXJ0RXZlbnRpbmdfKGluZGV4KSB7XG4gICAgY29uc3QgcmVjb2duaXplciA9IHRoaXMucmVjb2duaXplcnNfW2luZGV4XTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmVjb2duaXplcnNfLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoaSAhPSBpbmRleCkge1xuICAgICAgICB0aGlzLmNhbmNlbEV2ZW50aW5nXyhpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZWFkeV9baW5kZXhdID0gMDtcbiAgICB0aGlzLnBlbmRpbmdfW2luZGV4XSA9IDA7XG4gICAgdGhpcy5ldmVudGluZ18gPSByZWNvZ25pemVyO1xuICAgIHJlY29nbml6ZXIuYWNjZXB0U3RhcnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge251bWJlcn0gaW5kZXhcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXJ0VHJhY2tpbmdfKGluZGV4KSB7XG4gICAgdGhpcy50cmFja2luZ19baW5kZXhdID0gdHJ1ZTtcbiAgICB0aGlzLnBlbmRpbmdfW2luZGV4XSA9IDA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdG9wVHJhY2tpbmdfKGluZGV4KSB7XG4gICAgdGhpcy50cmFja2luZ19baW5kZXhdID0gZmFsc2U7XG4gICAgdGhpcy5wZW5kaW5nX1tpbmRleF0gPSAwO1xuICAgIGlmICghdGhpcy5yZWFkeV9baW5kZXhdKSB7XG4gICAgICB0aGlzLnJlY29nbml6ZXJzX1tpbmRleF0uYWNjZXB0Q2FuY2VsKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FuY2VsRXZlbnRpbmdfKGluZGV4KSB7XG4gICAgdGhpcy5yZWFkeV9baW5kZXhdID0gMDtcbiAgICB0aGlzLnN0b3BUcmFja2luZ18oaW5kZXgpO1xuICB9XG59XG5cblxuLyoqXG4gKiBUaGUgZ2VzdHVyZSByZWNvZ25pemVyIHJlY2VpdmVzIHRoZSBwb2ludGVyIGV2ZW50cyBmcm9tIEdlc3R1cmVzIGluc3RhbmNlLlxuICogQmFzZWQgb24gdGhlc2UgZXZlbnRzLCBpdCBjYW4gXCJyZWNvZ25pemVcIiB0aGUgZ2VzdHVyZSBpdCdzIHJlc3BvbnNpYmxlIGZvcixcbiAqIHJlcXVlc3QgdG8gc3RhcnQgZW1pdHRpbmcgYW5kIGVtaXQgZ2VzdHVyZXMuIEdlc3R1cmVzIGluc3RhbmNlcyBtYW5hZ2VzXG4gKiBzZXZlcmFsIGNvbXBldGluZyByZWNvZ25pemVycyBhbmQgZGVjaWRlcyB3aGljaCBvbmVzIGdldCB0byBlbWl0IGdlc3R1cmVzXG4gKiBhbmQgd2hpY2ggZG8gbm90LlxuICpcbiAqIFRoZSByZWNvZ25pemVyIGNhbiBiZSBpbiBzZXZlcmFsIG1haW4gc3RhdGVzOlxuICogMS4gVHJhY2tpbmcgc3RhdGUuIEluIHRoaXMgc3RhdGUgdGhlIHJlY29nbml6ZXIgaXMgcmVjZWl2aW5nIHRoZSBzZXJpZXMgb2ZcbiAqICAgIHRvdWNoIGV2ZW50cyBmcm9tIHRvdWNoc3RhcnQgdG8gdG91Y2hlbmQuIFRvIGdldCBpbnRvIHRoaXMgc3RhdGUgdGhlXG4gKiAgICByZWNvZ25pemVyIGhhcyB0byByZXR1cm4gXCJ0cnVlXCIgZnJvbSB0aGUge0BsaW5rIG9uVG91Y2hTdGFydH0uXG4gKiAyLiBQZW5kaW5nIHN0YXRlIChvcHRpb25hbCkuIFRoZSByZWNvZ25pemVyIG1hdGNoZWQgcGFydCBvZiB0aGUgZ2VzdHVyZSxcbiAqICAgIGJ1dCBuZWVkcyBtb3JlIHRpbWUgdG8gZ2V0IHRyYWNrIG1vcmUgZXZlbnRzLiBJdCByZXF1ZXN0cyBtb3JlIHRpbWVcbiAqICAgIGJ5IGNhbGxpbmcge0BsaW5rIHNpZ25hbFBlbmRpbmd9LCBCeSB0aGUgZW5kIG9mIHRoaXMgdGltZSB0aGUgcmVjb2duaXplclxuICogICAgaGFzIGVpdGhlciBtYXRjaGVkIHRoZSBnZXN0dXJlIG9yIGhhcyBiZWVuIGNhbmNlbGVkLlxuICogMy4gUmVhZHkgc3RhdGUuIFRoZSByZWNvZ25pemVyIG1hdGNoZWQgdGhlIHdob2xlIGdlc3R1cmUgYW5kIHJlYWR5IHRvIHN0YXJ0XG4gKiAgICBlbWl0dGluZy4gSXQgY29tbXVuaWNhdGVzIHRvIHRoZSBHZXN0dXJlcyB0aGlzIHJlYWRpbmVzcyBieSBjYWxsaW5nXG4gKiAgICB7QGxpbmsgc2lnbmFsUmVhZHl9LlxuICogNS4gRW1pdHRpbmcgc3RhdGUuIElmIEdlc3R1cmVzIGRlY2lkZXMgdG8gZ28gYWhlYWQgd2l0aCB0aGlzIHJlY29nbml6ZXIsIGl0XG4gKiAgICB3aWxsIGNhbGwge0BsaW5rIGFjY2VwdFN0YXJ0fSBtZXRob2QuIE90aGVyd2lzZSwgaXQgd2lsbCBjYWxsXG4gKiAgICB7QGxpbmsgYWNjZXB0Q2FuY2VsfSBtZXRob2QuIE9uY2UgaW4gdGhlIGVtaXR0aW5nIHN0YXRlLCB0aGUgcmVjb2duaXplclxuICogICAgY2FuIGVtaXQgYW55IG51bWJlciBvZiBldmVudHMgYnkgY2FsbGluZyB7QGxpbmsgc2lnbmFsRW1pdH0uXG4gKiA2LiBDb21wbGV0ZSBzdGF0ZS4gT25jZSBkb25lLCB0aGUgcmVjb2duaXplciBjYW4gY2FsbCB7QGxpbmsgc2lnbmFsRW5kfSB0b1xuICogICAgY29tbXVuaWNhdGUgdGhhdCBpdCdzIGRvbmUuXG4gKlxuICogQHRlbXBsYXRlIERBVEFcbiAqL1xuZXhwb3J0IGNsYXNzIEdlc3R1cmVSZWNvZ25pemVyIHtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHshR2VzdHVyZXN9IG1hbmFnZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yKHR5cGUsIG1hbmFnZXIpIHtcbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtzdHJpbmd9ICovXG4gICAgdGhpcy50eXBlXyA9IHR5cGU7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshR2VzdHVyZXN9ICovXG4gICAgdGhpcy5tYW5hZ2VyXyA9IG1hbmFnZXI7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdHlwZSBvZiB0aGUgZ2VzdHVyZSBlbWl0dGVkIGJ5IHRoZSBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLlxuICAgKiBJdCBoYXMgdG8gYmUgdW5pcXVlIGluIHRoZSBzY29wZSBvZiB0aGUgR2VzdHVyZXMgaW5zdGFuY2UuXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldFR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMudHlwZV87XG4gIH1cblxuICAvKipcbiAgICogVGhlIHJlY29nbml6ZXIgY2FuIGNhbGwgdGhpcyBtZXRob2QgdG8gY29tbXVuaWNhdGUgdGhhdCBpdCdzIHJlYWR5IHRvXG4gICAqIHN0YXJ0IGVtaXR0aW5nIHRoZSBnZXN0dXJlLiBPcHRpb25hbGx5IGl0IGNhbiBwYXNzIGEgemVybywgcG9zaXRpdmUgb3JcbiAgICogbmVnYXRpdmUgb2Zmc2V0IC0gYSB0aW1lIG9uIGhvdyBtdWNoIHRoZSBnZXN0dXJlIHNob3VsZCBiZSBwZW5hbGl6ZWQgb3JcbiAgICogZ2l2ZW4gYWR2YW50YWdlIGluIGNvbmZsaWN0IHJlc29sdXRpb24uIFRoZSByZWNvZ25pemVyIGF0IHRoaXMgcG9pbnQgaXNcbiAgICogaW4gdGhlIFwicmVhZHlcIiBzdGF0ZS5cbiAgICogQHBhcmFtIHt0aW1lfSBvZmZzZXRcbiAgICovXG4gIHNpZ25hbFJlYWR5KG9mZnNldCkge1xuICAgIHRoaXMubWFuYWdlcl8uc2lnbmFsUmVhZHlfKHRoaXMsIG9mZnNldCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHJlY29nbml6ZXIgY2FuIGNhbGwgdGhpcyBtZXRob2QgdG8gY29tbXVuaWNhdGUgdGhhdCBpdCBuZWVkcyBtb3JlXG4gICAqIHRpbWUgKHRpbWVMZWZ0KSB0byBtYXRjaCB0aGUgZ2VzdHVyZS4gQnkgdGhlIGVuZCBvZiB0aGlzIHRpbWUgdGhlXG4gICAqIHJlY29nbml6ZXIgaGFzIHRvIGVpdGhlciB0cmFuc2l0IHRvIHRoZSByZWFkeSBzdGF0ZSB1c2luZ1xuICAgKiB7QGxpbmsgc2lnbmFsUmVhZHl9IG9yIGl0IHdpbGwgYmUgY2FuY2VsZWQuIFRoZSByZWNvZ25pemVyIGlzIGluIHRoZVxuICAgKiBcInBlbmRpbmdcIiBzdGF0ZS5cbiAgICogQHBhcmFtIHt0aW1lfSB0aW1lTGVmdFxuICAgKi9cbiAgc2lnbmFsUGVuZGluZyh0aW1lTGVmdCkge1xuICAgIHRoaXMubWFuYWdlcl8uc2lnbmFsUGVuZGluZ18odGhpcywgdGltZUxlZnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSByZWNvZ25pemVyIGNhbiBjYWxsIHRoaXMgbWV0aG9kIHRvIGNvbW11bmljYXRlIHRoYXQgaXQncyBkb25lXG4gICAqIGVtaXR0aW5nIHRoZSBnZXN0dXJlcy4gSXQgd2lsbCByZXR1cm4gdG8gdGhlIHdhaXRpbmcgc3RhdGUuIFJlY29nbml6ZXJcbiAgICogY2FuIG9ubHkgY2FsbCB0aGlzIG1ldGhvZCBpZiBpdCBoYXMgcHJldmlvdXNseSByZWNlaXZlZCB0aGVcbiAgICoge0BsaW5rIGFjY2VwdFN0YXJ0fSBjYWxsLlxuICAgKi9cbiAgc2lnbmFsRW5kKCkge1xuICAgIHRoaXMubWFuYWdlcl8uc2lnbmFsRW5kXyh0aGlzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgcmVjb2duaXplciBjYW4gY2FsbCB0aGlzIG1ldGhvZCB0byBlbWl0IHRoZSBnZXN0dXJlcyB3aGlsZSBpbiB0aGVcbiAgICogXCJlbWl0dGluZ1wiIHN0YXRlLiBSZWNvZ25pemVyIGNhbiBvbmx5IGNhbGwgdGhpcyBtZXRob2QgaWYgaXQgaGFzXG4gICAqIHByZXZpb3VzbHkgcmVjZWl2ZWQgdGhlIHtAbGluayBhY2NlcHRTdGFydH0gY2FsbC5cbiAgICogQHBhcmFtIHtEQVRBfSBkYXRhXG4gICAqIEBwYXJhbSB7P0V2ZW50fSBldmVudFxuICAgKi9cbiAgc2lnbmFsRW1pdChkYXRhLCBldmVudCkge1xuICAgIHRoaXMubWFuYWdlcl8uc2lnbmFsRW1pdF8odGhpcywgZGF0YSwgZXZlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBHZXN0dXJlcyBpbnN0YW5jZSBjYWxscyB0aGlzIG1ldGhvZCB0byBhbGxvdyB0aGUgcmVjb2duaXplciB0byBzdGFydFxuICAgKiBlbWl0dGluZyB0aGUgZ2VzdHVyZXMuIEF0IHRoaXMgcG9pbnQgdGhlIHJlY29nbml6ZXIgaXMgaW4gdGhlIFwiZW1pdHRpbmdcIlxuICAgKiBzdGF0ZS4gSXQgd2lsbCBiZSBpbiB0aGlzIHN0YXRlIHVudGlsIGl0IGNhbGxzIHtAbGluayBzaWduYWxFbmR9IG9yXG4gICAqIHRoZSB7QGxpbmsgYWNjZXB0Q2FuY2VsfSBpcyBjYWxsZWQgYnkgdGhlIEdlc3R1cmVzIGluc3RhbmNlLlxuICAgKi9cbiAgYWNjZXB0U3RhcnQoKSB7XG4gIH1cblxuICAvKipcbiAgICogVGhlIEdlc3R1cmVzIGluc3RhbmNlIGNhbGxzIHRoaXMgbWV0aG9kIHRvIHJlc2V0IHRoZSByZWNvZ25pemVyLiBBdCB0aGlzXG4gICAqIHBvaW50IHRoZSByZWNvZ25pemVyIGlzIGluIHRoZSBpbml0aWFsIHdhaXRpbmcgc3RhdGUuXG4gICAqL1xuICBhY2NlcHRDYW5jZWwoKSB7XG4gIH1cblxuICAvKipcbiAgICogVGhlIEdlc3R1cmVzIGluc3RhbmNlIGNhbGxzIHRoaXMgbWV0aG9kIGZvciBlYWNoIFwidG91Y2hzdGFydFwiIGV2ZW50LiBJZlxuICAgKiB0aGUgcmVjb2duaXplciB3YW50cyB0byByZWNlaXZlIG90aGVyIHRvdWNoIGV2ZW50cyBpbiB0aGUgc2VyaWVzLCBpdCBoYXNcbiAgICogdG8gcmV0dXJuIFwidHJ1ZVwiLlxuICAgKiBAcGFyYW0geyFFdmVudH0gdW51c2VkRXZlbnRcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIG9uVG91Y2hTdGFydCh1bnVzZWRFdmVudCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgR2VzdHVyZXMgaW5zdGFuY2UgY2FsbHMgdGhpcyBtZXRob2QgZm9yIGVhY2ggXCJ0b3VjaG1vdmVcIiBldmVudC4gSWZcbiAgICogdGhlIHJlY29nbml6ZXIgd2FudHMgdG8gY29udGludWUgcmVjZWl2aW5nIHRvdWNoIGV2ZW50cyBpbiB0aGUgc2VyaWVzLFxuICAgKiBpdCBoYXMgdG8gcmV0dXJuIFwidHJ1ZVwiLlxuICAgKiBAcGFyYW0geyFFdmVudH0gdW51c2VkRXZlbnRcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIG9uVG91Y2hNb3ZlKHVudXNlZEV2ZW50KSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBHZXN0dXJlcyBpbnN0YW5jZSBjYWxscyB0aGlzIG1ldGhvZCBmb3IgdGhlIFwidG91Y2hlbmRcIiBldmVudC5cbiAgICogU29tZXdoZXJlIHdpdGhpbiB0aGlzIHRvdWNoIHNlcmllcyB0aGUgcmVjb2duaXplciBoYXMgdG8gY2FsbFxuICAgKiB7QGxpbmsgc2lnbmFsUmVhZHl9IG9yIHtAbGluayBzaWduYWxQZW5kaW5nfSBvciBpdCB3aWxsIGJlIHJlc2V0IGZvciB0aGVcbiAgICogbmV4dCB0b3VjaCBzZXJpZXMuXG4gICAqIEBwYXJhbSB7IUV2ZW50fSB1bnVzZWRFdmVudFxuICAgKi9cbiAgb25Ub3VjaEVuZCh1bnVzZWRFdmVudCkge1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFRoaXMgbW9kdWxlIGRlY2xhcmVzIEpTT04gdHlwZXMgYXMgZGVmaW5lZCBpbiB0aGVcbiAqIHtAbGluayBodHRwOi8vanNvbi5vcmcvfS5cbiAqL1xuXG5pbXBvcnQge2lzT2JqZWN0fSBmcm9tICcuL3R5cGVzJztcblxuXG4vLyBOT1RFIFR5cGUgYXJlIGNoYW5nZWQgdG8geyp9IGJlY2F1c2Ugb2Zcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci9pc3N1ZXMvMTk5OVxuXG4vKipcbiAqIEpTT04gc2NhbGFyLiBJdCdzIGVpdGhlciBzdHJpbmcsIG51bWJlciBvciBib29sZWFuLlxuICogQHR5cGVkZWYgeyp9IHNob3VsZCBiZSBzdHJpbmd8bnVtYmVyfGJvb2xlYW5cbiAqL1xubGV0IEpTT05TY2FsYXJEZWY7XG5cblxuLyoqXG4gKiBKU09OIG9iamVjdC4gSXQncyBhIG1hcCB3aXRoIHN0cmluZyBrZXlzIGFuZCBKU09OIHZhbHVlcy5cbiAqIEB0eXBlZGVmIHsqfSBzaG91bGQgYmUgIU9iamVjdDxzdHJpbmcsID9KU09OVmFsdWVEZWY+XG4gKi9cbmxldCBKU09OT2JqZWN0RGVmO1xuXG5cbi8qKlxuICogSlNPTiBhcnJheS4gSXQncyBhbiBhcnJheSB3aXRoIEpTT04gdmFsdWVzLlxuICogQHR5cGVkZWYgeyp9IHNob3VsZCBiZSAhQXJyYXk8P0pTT05WYWx1ZURlZj5cbiAqL1xubGV0IEpTT05BcnJheURlZjtcblxuXG4vKipcbiAqIEpTT04gdmFsdWUuIEl0J3MgZWl0aGVyIGEgc2NhbGFyLCBhbiBvYmplY3Qgb3IgYW4gYXJyYXkuXG4gKiBAdHlwZWRlZiB7Kn0gc2hvdWxkIGJlICFKU09OU2NhbGFyRGVmfCFKU09OT2JqZWN0RGVmfCFKU09OQXJyYXlEZWZcbiAqL1xubGV0IEpTT05WYWx1ZURlZjtcblxuLyoqXG4gKiBSZWNyZWF0ZXMgb2JqZWN0cyB3aXRoIHByb3RvdHlwZS1sZXNzIGNvcGllcy5cbiAqIEBwYXJhbSB7IUpzb25PYmplY3R9IG9ialxuICogQHJldHVybiB7IUpzb25PYmplY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWNyZWF0ZU5vblByb3RvT2JqZWN0KG9iaikge1xuICBjb25zdCBjb3B5ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgZm9yIChjb25zdCBrIGluIG9iaikge1xuICAgIGlmICghaGFzT3duUHJvcGVydHkob2JqLCBrKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IHYgPSBvYmpba107XG4gICAgY29weVtrXSA9IGlzT2JqZWN0KHYpID8gcmVjcmVhdGVOb25Qcm90b09iamVjdCh2KSA6IHY7XG4gIH1cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovIChjb3B5KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZnJvbSBhbiBvYmplY3QgZm9yIGEgZmllbGQtYmFzZWQgZXhwcmVzc2lvbi4gVGhlIGV4cHJlc3Npb25cbiAqIGlzIGEgc2ltcGxlIG5lc3RlZCBkb3Qtbm90YXRpb24gb2YgZmllbGRzLCBzdWNoIGFzIGBmaWVsZDEuZmllbGQyYC4gSWYgYW55XG4gKiBmaWVsZCBpbiBhIGNoYWluIGRvZXMgbm90IGV4aXN0IG9yIGlzIG5vdCBhbiBvYmplY3Qgb3IgYXJyYXksIHRoZSByZXR1cm5lZFxuICogdmFsdWUgd2lsbCBiZSBgdW5kZWZpbmVkYC5cbiAqXG4gKiBAcGFyYW0geyFKc29uT2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7c3RyaW5nfSBleHByXG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWVGb3JFeHByKG9iaiwgZXhwcikge1xuICAvLyBUaGUgYC5gIGluZGljYXRlcyBcInRoZSBvYmplY3QgaXRzZWxmXCIuXG4gIGlmIChleHByID09ICcuJykge1xuICAgIHJldHVybiBvYmo7XG4gIH1cbiAgLy8gT3RoZXJ3aXNlLCBuYXZpZ2F0ZSB2aWEgcHJvcGVydGllcy5cbiAgY29uc3QgcGFydHMgPSBleHByLnNwbGl0KCcuJyk7XG4gIGxldCB2YWx1ZSA9IG9iajtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXTtcbiAgICBpZiAocGFydCAmJlxuICAgICAgICB2YWx1ZSAmJlxuICAgICAgICB2YWx1ZVtwYXJ0XSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgIGhhc093blByb3BlcnR5KHZhbHVlLCBwYXJ0KVxuICAgICkge1xuICAgICAgdmFsdWUgPSB2YWx1ZVtwYXJ0XTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICBicmVhaztcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbi8qKlxuICogU2ltcGxlIHdyYXBwZXIgYXJvdW5kIEpTT04ucGFyc2UgdGhhdCBjYXN0cyB0aGUgcmV0dXJuIHZhbHVlXG4gKiB0byBKc29uT2JqZWN0LlxuICogQ3JlYXRlIGEgbmV3IHdyYXBwZXIgaWYgYW4gYXJyYXkgcmV0dXJuIHZhbHVlIGlzIGRlc2lyZWQuXG4gKiBAcGFyYW0geyp9IGpzb24gSlNPTiBzdHJpbmcgdG8gcGFyc2VcbiAqIEByZXR1cm4gez9Kc29uT2JqZWN0fSBNYXkgYmUgZXh0ZW5kIHRvIHBhcnNlIGFycmF5cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlSnNvbihqc29uKSB7XG4gIHJldHVybiAvKiogQHR5cGUgez9Kc29uT2JqZWN0fSAqLyhKU09OLnBhcnNlKC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoanNvbikpKTtcbn1cblxuLyoqXG4gKiBQYXJzZXMgdGhlIGdpdmVuIGBqc29uYCBzdHJpbmcgd2l0aG91dCB0aHJvd2luZyBhbiBleGNlcHRpb24gaWYgbm90IHZhbGlkLlxuICogUmV0dXJucyBgdW5kZWZpbmVkYCBpZiBwYXJzaW5nIGZhaWxzLlxuICogUmV0dXJucyB0aGUgYE9iamVjdGAgY29ycmVzcG9uZGluZyB0byB0aGUgSlNPTiBzdHJpbmcgd2hlbiBwYXJzaW5nIHN1Y2NlZWRzLlxuICogQHBhcmFtIHsqfSBqc29uIEpTT04gc3RyaW5nIHRvIHBhcnNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFcnJvcik9fSBvcHRfb25GYWlsZWQgT3B0aW9uYWwgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZFxuICogICAgIHdpdGggdGhlIGVycm9yIGlmIHBhcnNpbmcgZmFpbHMuXG4gKiBAcmV0dXJuIHs/SnNvbk9iamVjdHx1bmRlZmluZWR9IE1heSBiZSBleHRlbmQgdG8gcGFyc2UgYXJyYXlzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJ5UGFyc2VKc29uKGpzb24sIG9wdF9vbkZhaWxlZCkge1xuICB0cnkge1xuICAgIHJldHVybiBwYXJzZUpzb24oanNvbik7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAob3B0X29uRmFpbGVkKSB7XG4gICAgICBvcHRfb25GYWlsZWQoZSk7XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBSZWN1cnNpdmVseSBjaGVja3Mgc3RyaWN0IGVxdWFsaXR5IG9mIGl0ZW1zIGluIG5lc3RlZCBhcnJheXMgYW5kIG9iamVjdHMuXG4gKlxuICogQHBhcmFtIHtKU09OVmFsdWVEZWZ9IGFcbiAqIEBwYXJhbSB7SlNPTlZhbHVlRGVmfSBiXG4gKiBAcGFyYW0ge251bWJlcn0gZGVwdGggVGhlIG1heGltdW0gcmVjdXJzaW9uIGRlcHRoLiBNdXN0IGJlIGZpbml0ZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgZGVwdGggYXJndW1lbnQgaXMgbm90IGZpbml0ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlY3Vyc2l2ZUVxdWFscyhhLCBiLCBkZXB0aCA9IDMpIHtcbiAgaWYgKCFpc0Zpbml0ZShkZXB0aCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2RlcHRoIGFyZyBtdXN0IGJlIGZpbml0ZTogJyArIGRlcHRoKTtcbiAgfVxuICBpZiAoYSA9PT0gYikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIC8vIE9ubHkgY2hlY2sgc2hhbGxvdyBlcXVhbGl0eSBmb3IgZGVwdGggPCAxLlxuICBpZiAoZGVwdGggPCAxKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgYSAhPT0gdHlwZW9mIGIpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoYSkgJiYgQXJyYXkuaXNBcnJheShiKSkge1xuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIXJlY3Vyc2l2ZUVxdWFscyhhW2ldLCBiW2ldLCBkZXB0aCAtIDEpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgaWYgKGEgJiYgYiAmJiB0eXBlb2YgYSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIGIgPT09ICdvYmplY3QnKSB7XG4gICAgY29uc3Qga2V5c0EgPSBPYmplY3Qua2V5cygvKiogQHR5cGUgeyFPYmplY3R9ICovIChhKSk7XG4gICAgY29uc3Qga2V5c0IgPSBPYmplY3Qua2V5cygvKiogQHR5cGUgeyFPYmplY3R9ICovIChiKSk7XG4gICAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5c0EubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGtleUEgPSBrZXlzQVtpXTtcbiAgICAgIGNvbnN0IHZhbHVlQSA9IGFba2V5QV07XG4gICAgICBjb25zdCB2YWx1ZUIgPSBiW2tleUFdO1xuICAgICAgaWYgKCFyZWN1cnNpdmVFcXVhbHModmFsdWVBLCB2YWx1ZUIsIGRlcHRoIC0gMSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaGFzT3duUHJvcGVydHkob2JqLCBrZXkpIHtcbiAgaWYgKG9iaiA9PSBudWxsIHx8IHR5cGVvZiBvYmogIT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgIC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKG9iaiksIGtleSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEltcGxlbWVudHMgZWxlbWVudCBsYXlvdXQuIFNlZSBodHRwczovL2dvby5nbC85YXZYdVQgZm9yXG4gKiBkZXRhaWxzLlxuICovXG5cbmltcG9ydCB7ZGV2LCB1c2VyfSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge2lzRmluaXRlTnVtYmVyfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7c2V0U3R5bGUsIHNldFN0eWxlc30gZnJvbSAnLi9zdHlsZSc7XG5pbXBvcnQge3N0YXJ0c1dpdGh9IGZyb20gJy4vc3RyaW5nJztcblxuXG4vKipcbiAqIEBlbnVtIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBMYXlvdXQgPSB7XG4gIE5PRElTUExBWTogJ25vZGlzcGxheScsXG4gIEZJWEVEOiAnZml4ZWQnLFxuICBGSVhFRF9IRUlHSFQ6ICdmaXhlZC1oZWlnaHQnLFxuICBSRVNQT05TSVZFOiAncmVzcG9uc2l2ZScsXG4gIENPTlRBSU5FUjogJ2NvbnRhaW5lcicsXG4gIEZJTEw6ICdmaWxsJyxcbiAgRkxFWF9JVEVNOiAnZmxleC1pdGVtJyxcbiAgRkxVSUQ6ICdmbHVpZCcsXG59O1xuXG5cbi8qKlxuICogQ1NTIExlbmd0aCB0eXBlLiBFLmcuIFwiMXB4XCIgb3IgXCIyMHZoXCIuXG4gKiBAdHlwZWRlZiB7c3RyaW5nfVxuICovXG5leHBvcnQgbGV0IExlbmd0aERlZjtcblxuXG4vKipcbiAqIEB0eXBlZGVmIHt7XG4gKiAgIHdpZHRoOiBzdHJpbmcsXG4gKiAgIGhlaWdodDogc3RyaW5nXG4gKiB9fVxuICovXG5sZXQgRGltZW5zaW9uc0RlZjtcblxuXG4vKipcbiAqIFRoZSBzZXQgb2YgZWxlbWVudHMgd2l0aCBuYXR1cmFsIGRpbWVuc2lvbnMsIHRoYXQgaXMsIGVsZW1lbnRzXG4gKiB3aGljaCBoYXZlIGEga25vd24gZGltZW5zaW9uIGVpdGhlciBiYXNlZCBvbiB0aGVpciB2YWx1ZSBzcGVjaWZpZWQgaGVyZSxcbiAqIG9yLCBpZiB0aGUgdmFsdWUgaXMgbnVsbCwgYSBkaW1lbnNpb24gc3BlY2lmaWMgdG8gdGhlIGJyb3dzZXIuXG4gKiBgaGFzTmF0dXJhbERpbWVuc2lvbnNgIGNoZWNrcyBmb3IgbWVtYmVyc2hpcCBpbiB0aGlzIHNldC5cbiAqIGBnZXROYXR1cmFsRGltZW5zaW9uc2AgZGV0ZXJtaW5lcyB0aGUgZGltZW5zaW9ucyBmb3IgYW4gZWxlbWVudCBpbiB0aGVcbiAqICAgIHNldCBhbmQgY2FjaGVzIGl0LlxuICogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCA/RGltZW5zaW9uc0RlZj59XG4gKiBAcHJpdmF0ZSAgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5IVxuICovXG5leHBvcnQgY29uc3QgbmF0dXJhbERpbWVuc2lvbnNfID0ge1xuICAnQU1QLVBJWEVMJzoge3dpZHRoOiAnMHB4JywgaGVpZ2h0OiAnMHB4J30sXG4gICdBTVAtQU5BTFlUSUNTJzoge3dpZHRoOiAnMXB4JywgaGVpZ2h0OiAnMXB4J30sXG4gIC8vIFRPRE8oZHZveXRlbmtvKTogYXVkaW8gc2hvdWxkIGhhdmUgd2lkdGg6YXV0by5cbiAgJ0FNUC1BVURJTyc6IG51bGwsXG4gICdBTVAtU09DSUFMLVNIQVJFJzoge3dpZHRoOiAnNjBweCcsIGhlaWdodDogJzQ0cHgnfSxcbn07XG5cblxuLyoqXG4gKiBFbGVtZW50cyB0aGF0IHRoZSBwcm9nZXNzIGNhbiBiZSBzaG93biBmb3IuIFRoaXMgc2V0IGhhcyB0byBiZSBleHRlcm5hbGl6ZWRcbiAqIHNpbmNlIHRoZSBlbGVtZW50J3MgaW1wbGVtZW50YXRpb24gbWF5IG5vdCBiZSBkb3dubG9hZGVkIHlldC5cbiAqIEBlbnVtIHtib29sZWFufVxuICogQHByaXZhdGUgIFZpc2libGUgZm9yIHRlc3Rpbmcgb25seSFcbiAqL1xuZXhwb3J0IGNvbnN0IExPQURJTkdfRUxFTUVOVFNfID0ge1xuICAnQU1QLUFOSU0nOiB0cnVlLFxuICAnQU1QLUJSSUdIVENPVkUnOiB0cnVlLFxuICAnQU1QLUVNQkVEJzogdHJ1ZSxcbiAgJ0FNUC1JRlJBTUUnOiB0cnVlLFxuICAnQU1QLUlNRyc6IHRydWUsXG4gICdBTVAtSU5TVEFHUkFNJzogdHJ1ZSxcbiAgJ0FNUC1MSVNUJzogdHJ1ZSxcbiAgJ0FNUC1PT1lBTEEtUExBWUVSJzogdHJ1ZSxcbiAgJ0FNUC1QSU5URVJFU1QnOiB0cnVlLFxuICAnQU1QLVBMQVlCVVpaJzogdHJ1ZSxcbiAgJ0FNUC1WSURFTyc6IHRydWUsXG4gICdBTVAtWU9VVFVCRSc6IHRydWUsXG59O1xuXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHNcbiAqIEByZXR1cm4ge0xheW91dHx1bmRlZmluZWR9IFJldHVybnMgdW5kZWZpbmVkIGluIGNhc2Ugb2YgZmFpbHVyZSB0byBwYXJzZVxuICogICB0aGUgbGF5b3V0IHN0cmluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlTGF5b3V0KHMpIHtcbiAgZm9yIChjb25zdCBrIGluIExheW91dCkge1xuICAgIGlmIChMYXlvdXRba10gPT0gcykge1xuICAgICAgcmV0dXJuIExheW91dFtrXTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUxheW91dH0gbGF5b3V0XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMYXlvdXRDbGFzcyhsYXlvdXQpIHtcbiAgcmV0dXJuICdpLWFtcGh0bWwtbGF5b3V0LScgKyBsYXlvdXQ7XG59XG5cblxuLyoqXG4gKiBXaGV0aGVyIGFuIGVsZW1lbnQgd2l0aCB0aGlzIGxheW91dCBpbmhlcmVudGx5IGRlZmluZXMgdGhlIHNpemUuXG4gKiBAcGFyYW0geyFMYXlvdXR9IGxheW91dFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTGF5b3V0U2l6ZURlZmluZWQobGF5b3V0KSB7XG4gIHJldHVybiAobGF5b3V0ID09IExheW91dC5GSVhFRCB8fFxuICAgICAgbGF5b3V0ID09IExheW91dC5GSVhFRF9IRUlHSFQgfHxcbiAgICAgIGxheW91dCA9PSBMYXlvdXQuUkVTUE9OU0lWRSB8fFxuICAgICAgbGF5b3V0ID09IExheW91dC5GSUxMIHx8XG4gICAgICBsYXlvdXQgPT0gTGF5b3V0LkZMRVhfSVRFTSB8fFxuICAgICAgbGF5b3V0ID09IExheW91dC5GTFVJRCk7XG59XG5cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSB0YWcgaXMgYW4gaW50ZXJuYWwgKHNlcnZpY2UpIEFNUCB0YWcuXG4gKiBAcGFyYW0geyFOb2RlfHN0cmluZ30gdGFnXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJbnRlcm5hbEVsZW1lbnQodGFnKSB7XG4gIGNvbnN0IHRhZ05hbWUgPSAodHlwZW9mIHRhZyA9PSAnc3RyaW5nJykgPyB0YWcgOiB0YWcudGFnTmFtZTtcbiAgcmV0dXJuIHRhZ05hbWUgJiYgc3RhcnRzV2l0aCh0YWdOYW1lLnRvTG93ZXJDYXNlKCksICdpLScpO1xufVxuXG5cbi8qKlxuICogUGFyc2VzIHRoZSBDU1MgbGVuZ3RoIHZhbHVlLiBJZiBubyB1bml0cyBzcGVjaWZpZWQsIHRoZSBhc3N1bWVkIHZhbHVlIGlzXG4gKiBcInB4XCIuIFJldHVybnMgdW5kZWZpbmVkIGluIGNhc2Ugb2YgcGFyc2luZyBlcnJvci5cbiAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gc1xuICogQHJldHVybiB7IUxlbmd0aERlZnx1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUxlbmd0aChzKSB7XG4gIGlmICh0eXBlb2YgcyA9PSAnbnVtYmVyJykge1xuICAgIHJldHVybiBzICsgJ3B4JztcbiAgfVxuICBpZiAoIXMpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGlmICghL15cXGQrKFxcLlxcZCspPyhweHxlbXxyZW18dmh8dnd8dm1pbnx2bWF4fGNtfG1tfHF8aW58cGN8cHQpPyQvLnRlc3QocykpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIGlmICgvXlxcZCsoXFwuXFxkKyk/JC8udGVzdChzKSkge1xuICAgIHJldHVybiBzICsgJ3B4JztcbiAgfVxuICByZXR1cm4gcztcbn1cblxuXG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IHRoZSBzdXBwbGllZCB2YWx1ZSBpcyBhIG5vbi1wZXJjZW50IENTUyBMZW5ndGggdmFsdWUuXG4gKiBAcGFyYW0geyFMZW5ndGhEZWZ8c3RyaW5nfG51bGx8dW5kZWZpbmVkfSBsZW5ndGhcbiAqIEByZXR1cm4geyFMZW5ndGhEZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnRMZW5ndGgobGVuZ3RoKSB7XG4gIHVzZXIoKS5hc3NlcnQoXG4gICAgICAvXlxcZCsoXFwuXFxkKyk/KHB4fGVtfHJlbXx2aHx2d3x2bWlufHZtYXh8Y218bW18cXxpbnxwY3xwdCkkLy50ZXN0KGxlbmd0aCksXG4gICAgICAnSW52YWxpZCBsZW5ndGggdmFsdWU6ICVzJywgbGVuZ3RoKTtcbiAgcmV0dXJuIC8qKiBAdHlwZSB7IUxlbmd0aERlZn0gKi8gKGxlbmd0aCk7XG59XG5cblxuXG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IHRoZSBzdXBwbGllZCB2YWx1ZSBpcyBhIENTUyBMZW5ndGggdmFsdWVcbiAqIChpbmNsdWRpbmcgcGVyY2VudCB1bml0KS5cbiAqIEBwYXJhbSB7IUxlbmd0aERlZnxzdHJpbmd9IGxlbmd0aFxuICogQHJldHVybiB7IUxlbmd0aERlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydExlbmd0aE9yUGVyY2VudChsZW5ndGgpIHtcbiAgdXNlcigpLmFzc2VydCgvXlxcZCsoXFwuXFxkKyk/KHB4fGVtfHJlbXx2aHx2d3x2bWlufHZtYXh8JSkkLy50ZXN0KGxlbmd0aCksXG4gICAgICAnSW52YWxpZCBsZW5ndGggb3IgcGVyY2VudCB2YWx1ZTogJXMnLCBsZW5ndGgpO1xuICByZXR1cm4gbGVuZ3RoO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyB1bml0cyBmcm9tIHRoZSBDU1MgbGVuZ3RoIHZhbHVlLlxuICogQHBhcmFtIHshTGVuZ3RoRGVmfHN0cmluZ3xudWxsfHVuZGVmaW5lZH0gbGVuZ3RoXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRMZW5ndGhVbml0cyhsZW5ndGgpIHtcbiAgYXNzZXJ0TGVuZ3RoKGxlbmd0aCk7XG4gIGRldigpLmFzc2VydFN0cmluZyhsZW5ndGgpO1xuICBjb25zdCBtID0gdXNlcigpLmFzc2VydChsZW5ndGgubWF0Y2goL1thLXpdKy9pKSxcbiAgICAgICdGYWlsZWQgdG8gcmVhZCB1bml0cyBmcm9tICVzJywgbGVuZ3RoKTtcbiAgcmV0dXJuIG1bMF07XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBudW1lcmljIHZhbHVlIG9mIGEgQ1NTIGxlbmd0aCB2YWx1ZS5cbiAqIEBwYXJhbSB7IUxlbmd0aERlZnxzdHJpbmd8bnVsbHx1bmRlZmluZWR9IGxlbmd0aFxuICogQHJldHVybiB7bnVtYmVyfHVuZGVmaW5lZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExlbmd0aE51bWVyYWwobGVuZ3RoKSB7XG4gIGNvbnN0IHJlcyA9IHBhcnNlRmxvYXQobGVuZ3RoKTtcbiAgcmV0dXJuIGlzRmluaXRlTnVtYmVyKHJlcykgPyByZXMgOiB1bmRlZmluZWQ7XG59XG5cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHRhZ05hbWUgaXMgYSBrbm93biBlbGVtZW50IHRoYXQgaGFzIG5hdHVyYWwgZGltZW5zaW9uc1xuICogaW4gb3VyIHJ1bnRpbWUgb3IgdGhlIGJyb3dzZXIuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnTmFtZSBUaGUgZWxlbWVudCB0YWcgbmFtZS5cbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBoYXNOYXR1cmFsRGltZW5zaW9ucyh0YWdOYW1lKSB7XG4gIHRhZ05hbWUgPSB0YWdOYW1lLnRvVXBwZXJDYXNlKCk7XG4gIHJldHVybiBuYXR1cmFsRGltZW5zaW9uc19bdGFnTmFtZV0gIT09IHVuZGVmaW5lZDtcbn1cblxuXG4vKipcbiAqIERldGVybWluZXMgdGhlIGRlZmF1bHQgZGltZW5zaW9ucyBmb3IgYW4gZWxlbWVudCB3aGljaCBjb3VsZCB2YXJ5IGFjcm9zc1xuICogZGlmZmVyZW50IGJyb3dzZXIgaW1wbGVtZW50YXRpb25zLCBsaWtlIDxhdWRpbz4gZm9yIGluc3RhbmNlLlxuICogVGhpcyBvcGVyYXRpb24gY2FuIG9ubHkgYmUgY29tcGxldGVkIGZvciBhbiBlbGVtZW50IHdoaXRlbGlzdGVkIGJ5XG4gKiBgaGFzTmF0dXJhbERpbWVuc2lvbnNgLlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7RGltZW5zaW9uc0RlZn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE5hdHVyYWxEaW1lbnNpb25zKGVsZW1lbnQpIHtcbiAgY29uc3QgdGFnTmFtZSA9IGVsZW1lbnQudGFnTmFtZS50b1VwcGVyQ2FzZSgpO1xuICBkZXYoKS5hc3NlcnQobmF0dXJhbERpbWVuc2lvbnNfW3RhZ05hbWVdICE9PSB1bmRlZmluZWQpO1xuICBpZiAoIW5hdHVyYWxEaW1lbnNpb25zX1t0YWdOYW1lXSkge1xuICAgIGNvbnN0IGRvYyA9IGVsZW1lbnQub3duZXJEb2N1bWVudDtcbiAgICBjb25zdCBuYXR1cmFsVGFnTmFtZSA9IHRhZ05hbWUucmVwbGFjZSgvXkFNUFxcLS8sICcnKTtcbiAgICBjb25zdCB0ZW1wID0gZG9jLmNyZWF0ZUVsZW1lbnQobmF0dXJhbFRhZ05hbWUpO1xuICAgIC8vIEZvciBhdWRpbywgc2hvdWxkIG5vLW9wIGVsc2V3aGVyZS5cbiAgICB0ZW1wLmNvbnRyb2xzID0gdHJ1ZTtcbiAgICBzZXRTdHlsZXModGVtcCwge1xuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICB2aXNpYmlsaXR5OiAnaGlkZGVuJyxcbiAgICB9KTtcbiAgICBkb2MuYm9keS5hcHBlbmRDaGlsZCh0ZW1wKTtcbiAgICBuYXR1cmFsRGltZW5zaW9uc19bdGFnTmFtZV0gPSB7XG4gICAgICB3aWR0aDogKHRlbXAuLypPSyovb2Zmc2V0V2lkdGggfHwgMSkgKyAncHgnLFxuICAgICAgaGVpZ2h0OiAodGVtcC4vKk9LKi9vZmZzZXRIZWlnaHQgfHwgMSkgKyAncHgnLFxuICAgIH07XG4gICAgZG9jLmJvZHkucmVtb3ZlQ2hpbGQodGVtcCk7XG4gIH1cbiAgcmV0dXJuIC8qKiBAdHlwZSB7RGltZW5zaW9uc0RlZn0gKi8gKG5hdHVyYWxEaW1lbnNpb25zX1t0YWdOYW1lXSk7XG59XG5cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBsb2FkaW5nIGNhbiBiZSBzaG93biBmb3IgdGhlIHNwZWNpZmllZCBlbGVtZWVudC4gVGhpcyBzZXQgaGFzXG4gKiB0byBiZSBleHRlcm5hbGl6ZWQgc2luY2UgdGhlIGVsZW1lbnQncyBpbXBsZW1lbnRhdGlvbiBtYXkgbm90IGJlXG4gKiBkb3dubG9hZGVkIHlldC5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNMb2FkaW5nQWxsb3dlZChlbGVtZW50KSB7XG4gIGNvbnN0IHRhZ05hbWUgPSBlbGVtZW50LnRhZ05hbWUudG9VcHBlckNhc2UoKTtcbiAgaWYgKHRhZ05hbWUgPT0gJ0FNUC1BRCcgfHwgdGFnTmFtZSA9PSAnQU1QLUVNQkVEJykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBMT0FESU5HX0VMRU1FTlRTX1t0YWdOYW1lXSB8fCBmYWxzZTtcbn1cblxuXG4vKipcbiAqIEFwcGxpZXMgbGF5b3V0IHRvIHRoZSBlbGVtZW50LiBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKlxuICogXFwgICBcXCAgLyAgXFwgIC8gICAvIC8gICBcXCAgICAgfCAgIF8gIFxcICAgICB8ICBcXCB8ICB8IHwgIHwgfCAgXFwgfCAgfCAgLyBfX19fX3xcbiAqICBcXCAgIFxcLyAgICBcXC8gICAvIC8gIF4gIFxcICAgIHwgIHxfKSAgfCAgICB8ICAgXFx8ICB8IHwgIHwgfCAgIFxcfCAgfCB8ICB8ICBfX1xuICogICBcXCAgICAgICAgICAgIC8gLyAgL19cXCAgXFwgICB8ICAgICAgLyAgICAgfCAgLiBgICB8IHwgIHwgfCAgLiBgICB8IHwgIHwgfF8gfFxuICogICAgXFwgICAgL1xcICAgIC8gLyAgX19fX18gIFxcICB8ICB8XFwgIFxcLS0tLS58ICB8XFwgICB8IHwgIHwgfCAgfFxcICAgfCB8ICB8X198IHxcbiAqICAgICBcXF9fLyAgXFxfXy8gL19fLyAgICAgXFxfX1xcIHwgX3wgYC5fX19fX3x8X198IFxcX198IHxfX3wgfF9ffCBcXF9ffCAgXFxfX19fX198XG4gKlxuICogVGhlIGVxdWl2YWxlbnQgb2YgdGhpcyBtZXRob2QgaXMgdXNlZCBmb3Igc2VydmVyLXNpZGUgcmVuZGVyaW5nIChTU1IpIGFuZFxuICogYW55IGNoYW5nZXMgbWFkZSB0byBpdCBtdXN0IGJlIG1hZGUgaW4gY29vcmRpbmF0aW9uIHdpdGggY2FjaGVzIHRoYXRcbiAqIGltcGxlbWVudCBTU1IuIEZvciBtb3JlIGluZm9ybWF0aW9uIG9uIFNTUiBzZWUgYml0Lmx5L2FtcC1zc3IuXG4gKlxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7IUxheW91dH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5U3RhdGljTGF5b3V0KGVsZW1lbnQpIHtcbiAgLy8gQ2hlY2sgaWYgdGhlIGxheW91dCBoYXMgYWxyZWFkeSBiZWVuIGRvbmUgYnkgc2VydmVyLXNpZGUgcmVuZGVyaW5nLiBUaGVcbiAgLy8gZG9jdW1lbnQgbWF5IGJlIHZpc2libGUgdG8gdGhlIHVzZXIgaWYgdGhlIGJvaWxlcnBsYXRlIHdhcyByZW1vdmVkIHNvXG4gIC8vIHBsZWFzZSB0YWtlIGNhcmUgaW4gbWFraW5nIGNoYW5nZXMgaGVyZS5cbiAgY29uc3QgY29tcGxldGVkTGF5b3V0QXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdpLWFtcGh0bWwtbGF5b3V0Jyk7XG4gIGlmIChjb21wbGV0ZWRMYXlvdXRBdHRyKSB7XG4gICAgY29uc3QgbGF5b3V0ID0gLyoqIEB0eXBlIHshTGF5b3V0fSAqLyAoZGV2KCkuYXNzZXJ0KFxuICAgICAgICBwYXJzZUxheW91dChjb21wbGV0ZWRMYXlvdXRBdHRyKSkpO1xuICAgIGlmIChsYXlvdXQgPT0gTGF5b3V0LlJFU1BPTlNJVkUgJiYgZWxlbWVudC5maXJzdEVsZW1lbnRDaGlsZCkge1xuICAgICAgLy8gRmluZCBzaXplciwgYnV0IGFzc3VtZSB0aGF0IGl0IG1pZ2h0IG5vdCBoYXZlIGJlZW4gcGFyc2VkIHlldC5cbiAgICAgIGVsZW1lbnQuc2l6ZXJFbGVtZW50ID1cbiAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2ktYW1waHRtbC1zaXplcicpIHx8IHVuZGVmaW5lZDtcbiAgICB9IGVsc2UgaWYgKGxheW91dCA9PSBMYXlvdXQuTk9ESVNQTEFZKSB7XG4gICAgICBhcHBseU5vRGlzcGxheUxheW91dChlbGVtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGxheW91dDtcbiAgfVxuXG4gIC8vIElmIHRoZSBsYXlvdXQgd2FzIGFscmVhZHkgZG9uZSBieSBzZXJ2ZXItc2lkZSByZW5kZXJpbmcgKFNTUiksIHRoZW4gdGhlIGNvZGVcbiAgLy8gYmVsb3cgd2lsbCBub3QgcnVuLiBBbnkgY2hhbmdlcyBiZWxvdyB3aWxsIG5lY2Vzc2l0YXRlIGEgY2hhbmdlIHRvIFNTUiBhbmQgbXVzdFxuICAvLyBiZSBjb29yZGluYXRlZCB3aXRoIGNhY2hlcyB0aGF0IGltcGxlbWVudCBTU1IuIFNlZSBiaXQubHkvYW1wLXNzci5cblxuICAvLyBQYXJzZSBsYXlvdXQgZnJvbSB0aGUgZWxlbWVudC5cbiAgY29uc3QgbGF5b3V0QXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdsYXlvdXQnKTtcbiAgY29uc3Qgd2lkdGhBdHRyID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ3dpZHRoJyk7XG4gIGNvbnN0IGhlaWdodEF0dHIgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaGVpZ2h0Jyk7XG4gIGNvbnN0IHNpemVzQXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdzaXplcycpO1xuICBjb25zdCBoZWlnaHRzQXR0ciA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdoZWlnaHRzJyk7XG5cbiAgLy8gSW5wdXQgbGF5b3V0IGF0dHJpYnV0ZXMuXG4gIGNvbnN0IGlucHV0TGF5b3V0ID0gbGF5b3V0QXR0ciA/IHBhcnNlTGF5b3V0KGxheW91dEF0dHIpIDogbnVsbDtcbiAgdXNlcigpLmFzc2VydChpbnB1dExheW91dCAhPT0gdW5kZWZpbmVkLCAnVW5rbm93biBsYXlvdXQ6ICVzJywgbGF5b3V0QXR0cik7XG4gIGNvbnN0IGlucHV0V2lkdGggPSAod2lkdGhBdHRyICYmIHdpZHRoQXR0ciAhPSAnYXV0bycpID9cbiAgICBwYXJzZUxlbmd0aCh3aWR0aEF0dHIpIDogd2lkdGhBdHRyO1xuICB1c2VyKCkuYXNzZXJ0KGlucHV0V2lkdGggIT09IHVuZGVmaW5lZCwgJ0ludmFsaWQgd2lkdGggdmFsdWU6ICVzJywgd2lkdGhBdHRyKTtcbiAgY29uc3QgaW5wdXRIZWlnaHQgPSAoaGVpZ2h0QXR0ciAmJiBoZWlnaHRBdHRyICE9ICdmbHVpZCcpID9cbiAgICBwYXJzZUxlbmd0aChoZWlnaHRBdHRyKSA6IGhlaWdodEF0dHI7XG4gIHVzZXIoKS5hc3NlcnQoaW5wdXRIZWlnaHQgIT09IHVuZGVmaW5lZCwgJ0ludmFsaWQgaGVpZ2h0IHZhbHVlOiAlcycsXG4gICAgICBoZWlnaHRBdHRyKTtcblxuICAvLyBFZmZlY3RpdmUgbGF5b3V0IGF0dHJpYnV0ZXMuIFRoZXNlIGFyZSBlZmZlY3RpdmVseSBjb25zdGFudHMuXG4gIGxldCB3aWR0aDtcbiAgbGV0IGhlaWdodDtcbiAgbGV0IGxheW91dDtcblxuICAvLyBDYWxjdWxhdGUgZWZmZWN0aXZlIHdpZHRoIGFuZCBoZWlnaHQuXG4gIGlmICgoIWlucHV0TGF5b3V0IHx8IGlucHV0TGF5b3V0ID09IExheW91dC5GSVhFRCB8fFxuICAgICAgaW5wdXRMYXlvdXQgPT0gTGF5b3V0LkZJWEVEX0hFSUdIVCkgJiZcbiAgICAgICghaW5wdXRXaWR0aCB8fCAhaW5wdXRIZWlnaHQpICYmIGhhc05hdHVyYWxEaW1lbnNpb25zKGVsZW1lbnQudGFnTmFtZSkpIHtcbiAgICAvLyBEZWZhdWx0IHdpZHRoIGFuZCBoZWlnaHQ6IGhhbmRsZSBlbGVtZW50cyB0aGF0IGRvIG5vdCBzcGVjaWZ5IGFcbiAgICAvLyB3aWR0aC9oZWlnaHQgYW5kIGFyZSBkZWZpbmVkIHRvIGhhdmUgbmF0dXJhbCBicm93c2VyIGRpbWVuc2lvbnMuXG4gICAgY29uc3QgZGltZW5zaW9ucyA9IGdldE5hdHVyYWxEaW1lbnNpb25zKGVsZW1lbnQpO1xuICAgIHdpZHRoID0gKGlucHV0V2lkdGggfHwgaW5wdXRMYXlvdXQgPT0gTGF5b3V0LkZJWEVEX0hFSUdIVCkgPyBpbnB1dFdpZHRoIDpcbiAgICAgIGRpbWVuc2lvbnMud2lkdGg7XG4gICAgaGVpZ2h0ID0gaW5wdXRIZWlnaHQgfHwgZGltZW5zaW9ucy5oZWlnaHQ7XG4gIH0gZWxzZSB7XG4gICAgd2lkdGggPSBpbnB1dFdpZHRoO1xuICAgIGhlaWdodCA9IGlucHV0SGVpZ2h0O1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIGVmZmVjdGl2ZSBsYXlvdXQuXG4gIGlmIChpbnB1dExheW91dCkge1xuICAgIGxheW91dCA9IGlucHV0TGF5b3V0O1xuICB9IGVsc2UgaWYgKCF3aWR0aCAmJiAhaGVpZ2h0KSB7XG4gICAgbGF5b3V0ID0gTGF5b3V0LkNPTlRBSU5FUjtcbiAgfSBlbHNlIGlmIChoZWlnaHQgPT0gJ2ZsdWlkJykge1xuICAgIGxheW91dCA9IExheW91dC5GTFVJRDtcbiAgfSBlbHNlIGlmIChoZWlnaHQgJiYgKCF3aWR0aCB8fCB3aWR0aCA9PSAnYXV0bycpKSB7XG4gICAgbGF5b3V0ID0gTGF5b3V0LkZJWEVEX0hFSUdIVDtcbiAgfSBlbHNlIGlmIChoZWlnaHQgJiYgd2lkdGggJiYgKHNpemVzQXR0ciB8fCBoZWlnaHRzQXR0cikpIHtcbiAgICBsYXlvdXQgPSBMYXlvdXQuUkVTUE9OU0lWRTtcbiAgfSBlbHNlIHtcbiAgICBsYXlvdXQgPSBMYXlvdXQuRklYRUQ7XG4gIH1cblxuICAvLyBWZXJpZnkgbGF5b3V0IGF0dHJpYnV0ZXMuXG4gIGlmIChsYXlvdXQgPT0gTGF5b3V0LkZJWEVEIHx8IGxheW91dCA9PSBMYXlvdXQuRklYRURfSEVJR0hUIHx8XG4gICAgICBsYXlvdXQgPT0gTGF5b3V0LlJFU1BPTlNJVkUpIHtcbiAgICB1c2VyKCkuYXNzZXJ0KGhlaWdodCwgJ0V4cGVjdGVkIGhlaWdodCB0byBiZSBhdmFpbGFibGU6ICVzJywgaGVpZ2h0QXR0cik7XG4gIH1cbiAgaWYgKGxheW91dCA9PSBMYXlvdXQuRklYRURfSEVJR0hUKSB7XG4gICAgdXNlcigpLmFzc2VydCghd2lkdGggfHwgd2lkdGggPT0gJ2F1dG8nLFxuICAgICAgICAnRXhwZWN0ZWQgd2lkdGggdG8gYmUgZWl0aGVyIGFic2VudCBvciBlcXVhbCBcImF1dG9cIiAnICtcbiAgICAgICAgJ2ZvciBmaXhlZC1oZWlnaHQgbGF5b3V0OiAlcycsIHdpZHRoQXR0cik7XG4gIH1cbiAgaWYgKGxheW91dCA9PSBMYXlvdXQuRklYRUQgfHwgbGF5b3V0ID09IExheW91dC5SRVNQT05TSVZFKSB7XG4gICAgdXNlcigpLmFzc2VydCh3aWR0aCAmJiB3aWR0aCAhPSAnYXV0bycsXG4gICAgICAgICdFeHBlY3RlZCB3aWR0aCB0byBiZSBhdmFpbGFibGUgYW5kIG5vdCBlcXVhbCB0byBcImF1dG9cIjogJXMnLFxuICAgICAgICB3aWR0aEF0dHIpO1xuICB9XG4gIGlmIChsYXlvdXQgPT0gTGF5b3V0LlJFU1BPTlNJVkUpIHtcbiAgICB1c2VyKCkuYXNzZXJ0KGdldExlbmd0aFVuaXRzKHdpZHRoKSA9PSBnZXRMZW5ndGhVbml0cyhoZWlnaHQpLFxuICAgICAgICAnTGVuZ3RoIHVuaXRzIHNob3VsZCBiZSB0aGUgc2FtZSBmb3Igd2lkdGggYW5kIGhlaWdodDogJXMsICVzJyxcbiAgICAgICAgd2lkdGhBdHRyLCBoZWlnaHRBdHRyKTtcbiAgfSBlbHNlIHtcbiAgICB1c2VyKCkuYXNzZXJ0KGhlaWdodHNBdHRyID09PSBudWxsLFxuICAgICAgICAnVW5leHBlY3RlZCBcImhlaWdodHNcIiBhdHRyaWJ1dGUgZm9yIG5vbmUtcmVzcG9uc2l2ZSBsYXlvdXQnKTtcbiAgfVxuXG4gIC8vIEFwcGx5IFVJLlxuICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoZ2V0TGF5b3V0Q2xhc3MobGF5b3V0KSk7XG4gIGlmIChpc0xheW91dFNpemVEZWZpbmVkKGxheW91dCkpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1sYXlvdXQtc2l6ZS1kZWZpbmVkJyk7XG4gIH1cbiAgaWYgKGxheW91dCA9PSBMYXlvdXQuTk9ESVNQTEFZKSB7XG4gICAgLy8gQ1NTIGRlZmluZXMgbGF5b3V0PW5vZGlzcGxheSBhdXRvbWF0aWNhbGx5IHdpdGggYGRpc3BsYXk6bm9uZWAuIFRodXNcbiAgICAvLyBubyBhZGRpdGlvbmFsIHN0eWxpbmcgaXMgbmVlZGVkLlxuICAgIGFwcGx5Tm9EaXNwbGF5TGF5b3V0KGVsZW1lbnQpO1xuICB9IGVsc2UgaWYgKGxheW91dCA9PSBMYXlvdXQuRklYRUQpIHtcbiAgICBzZXRTdHlsZXMoZWxlbWVudCwge1xuICAgICAgd2lkdGg6IGRldigpLmFzc2VydFN0cmluZyh3aWR0aCksXG4gICAgICBoZWlnaHQ6IGRldigpLmFzc2VydFN0cmluZyhoZWlnaHQpLFxuICAgIH0pO1xuICB9IGVsc2UgaWYgKGxheW91dCA9PSBMYXlvdXQuRklYRURfSEVJR0hUKSB7XG4gICAgc2V0U3R5bGUoZWxlbWVudCwgJ2hlaWdodCcsIGRldigpLmFzc2VydFN0cmluZyhoZWlnaHQpKTtcbiAgfSBlbHNlIGlmIChsYXlvdXQgPT0gTGF5b3V0LlJFU1BPTlNJVkUpIHtcbiAgICBjb25zdCBzaXplciA9IGVsZW1lbnQub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpLWFtcGh0bWwtc2l6ZXInKTtcbiAgICBzZXRTdHlsZXMoc2l6ZXIsIHtcbiAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICBwYWRkaW5nVG9wOlxuICAgICAgICAoKGdldExlbmd0aE51bWVyYWwoaGVpZ2h0KSAvIGdldExlbmd0aE51bWVyYWwod2lkdGgpKSAqIDEwMCkgKyAnJScsXG4gICAgfSk7XG4gICAgZWxlbWVudC5pbnNlcnRCZWZvcmUoc2l6ZXIsIGVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgZWxlbWVudC5zaXplckVsZW1lbnQgPSBzaXplcjtcbiAgfSBlbHNlIGlmIChsYXlvdXQgPT0gTGF5b3V0LkZJTEwpIHtcbiAgICAvLyBEbyBub3RoaW5nLlxuICB9IGVsc2UgaWYgKGxheW91dCA9PSBMYXlvdXQuQ09OVEFJTkVSKSB7XG4gICAgLy8gRG8gbm90aGluZy4gRWxlbWVudHMgdGhlbXNlbHZlcyB3aWxsIGNoZWNrIHdoZXRoZXIgdGhlIHN1cHBsaWVkXG4gICAgLy8gbGF5b3V0IHZhbHVlIGlzIGFjY2VwdGFibGUuIEluIHBhcnRpY3VsYXIgY29udGFpbmVyIGlzIG9ubHkgT0tcbiAgICAvLyBzb21ldGltZXMuXG4gIH0gZWxzZSBpZiAobGF5b3V0ID09IExheW91dC5GTEVYX0lURU0pIHtcbiAgICAvLyBTZXQgaGVpZ2h0IGFuZCB3aWR0aCB0byBhIGZsZXggaXRlbSBpZiB0aGV5IGV4aXN0LlxuICAgIC8vIFRoZSBzaXplIHNldCB0byBhIGZsZXggaXRlbSBjb3VsZCBiZSBvdmVycmlkZGVuIGJ5IGBkaXNwbGF5OiBmbGV4YCBsYXRlci5cbiAgICBpZiAod2lkdGgpIHtcbiAgICAgIHNldFN0eWxlKGVsZW1lbnQsICd3aWR0aCcsIHdpZHRoKTtcbiAgICB9XG4gICAgaWYgKGhlaWdodCkge1xuICAgICAgc2V0U3R5bGUoZWxlbWVudCwgJ2hlaWdodCcsIGhlaWdodCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGxheW91dCA9PSBMYXlvdXQuRkxVSUQpIHtcbiAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2ktYW1waHRtbC1sYXlvdXQtYXdhaXRpbmctc2l6ZScpO1xuICAgIGlmICh3aWR0aCkge1xuICAgICAgc2V0U3R5bGUoZWxlbWVudCwgJ3dpZHRoJywgd2lkdGgpO1xuICAgIH1cbiAgICBzZXRTdHlsZShlbGVtZW50LCAnaGVpZ2h0JywgMCk7XG4gIH1cbiAgcmV0dXJuIGxheW91dDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gYXBwbHlOb0Rpc3BsYXlMYXlvdXQoZWxlbWVudCkge1xuICAvLyBUT0RPKGR2b3l0ZW5rbywgIzkzNTMpOiBvbmNlIGB0b2dnbGVMYXlvdXREaXNwbGF5YCBBUEkgaGFzIGJlZW4gZGVwbG95ZWRcbiAgLy8gZXZlcnl3aGVyZSwgc3dpdGNoIGFsbCByZWxldmFudCBlbGVtZW50cyB0byB0aGlzIEFQSS4gSW4gdGhlIG1lYW50aW1lLFxuICAvLyBzaW1wbHkgdW5ibG9jayBkaXNwbGF5IHRvZ2dsaW5nIHZpYSBgc3R5bGU9XCJkaXNwbGF5OiAuLi5cImAuXG4gIHNldFN0eWxlKGVsZW1lbnQsICdkaXNwbGF5JywgJ25vbmUnKTtcbiAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdpLWFtcGh0bWwtZGlzcGxheScpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi9tb2RlJztcbmltcG9ydCB7Z2V0TW9kZU9iamVjdH0gZnJvbSAnLi9tb2RlLW9iamVjdCc7XG5pbXBvcnQge2lzRW51bVZhbHVlfSBmcm9tICcuL3R5cGVzJztcblxuLyoqXG4gKiBUcmlwbGUgemVybyB3aWR0aCBzcGFjZS5cbiAqXG4gKiBUaGlzIGlzIGFkZGVkIHRvIHVzZXIgZXJyb3IgbWVzc2FnZXMsIHNvIHRoYXQgd2UgY2FuIGxhdGVyIGlkZW50aWZ5XG4gKiB0aGVtLCB3aGVuIHRoZSBvbmx5IHRoaW5nIHRoYXQgd2UgaGF2ZSBpcyB0aGUgbWVzc2FnZS4gVGhpcyBpcyB0aGVcbiAqIGNhc2UgaW4gbWFueSBicm93c2VycyB3aGVuIHRoZSBnbG9iYWwgZXhjZXB0aW9uIGhhbmRsZXIgaXMgaW52b2tlZC5cbiAqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IFVTRVJfRVJST1JfU0VOVElORUwgPSAnXFx1MjAwQlxcdTIwMEJcXHUyMDBCJztcblxuXG4vKipcbiAqIEZvdXIgemVybyB3aWR0aCBzcGFjZS5cbiAqXG4gKiBAY29uc3Qge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IFVTRVJfRVJST1JfRU1CRURfU0VOVElORUwgPSAnXFx1MjAwQlxcdTIwMEJcXHUyMDBCXFx1MjAwQic7XG5cblxuLyoqXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoaXMgbWVzc2FnZSB3YXMgYSB1c2VyIGVycm9yLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNVc2VyRXJyb3JNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgcmV0dXJuIG1lc3NhZ2UuaW5kZXhPZihVU0VSX0VSUk9SX1NFTlRJTkVMKSA+PSAwO1xufVxuXG4vKipcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBtZXNzYWdlIHdhcyBhIGEgdXNlciBlcnJvciBmcm9tIGFuIGlmcmFtZSBlbWJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVXNlckVycm9yRW1iZWQobWVzc2FnZSkge1xuICByZXR1cm4gbWVzc2FnZS5pbmRleE9mKFVTRVJfRVJST1JfRU1CRURfU0VOVElORUwpID49IDA7XG59XG5cblxuLyoqXG4gKiBAZW51bSB7bnVtYmVyfVxuICogQHByaXZhdGUgVmlzaWJsZSBmb3IgdGVzdGluZyBvbmx5LlxuICovXG5leHBvcnQgY29uc3QgTG9nTGV2ZWwgPSB7XG4gIE9GRjogMCxcbiAgRVJST1I6IDEsXG4gIFdBUk46IDIsXG4gIElORk86IDMsXG4gIEZJTkU6IDQsXG59O1xuXG4vKipcbiAqIFNldHMgcmVwb3J0RXJyb3IgZnVuY3Rpb24uIENhbGxlZCBmcm9tIGVycm9yLmpzIHRvIGJyZWFrIGN5Y2xpY1xuICogZGVwZW5kZW5jeS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKiwgIUVsZW1lbnQ9KXx1bmRlZmluZWR9IGZuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRSZXBvcnRFcnJvcihmbikge1xuICBzZWxmLnJlcG9ydEVycm9yID0gZm47XG59XG5cbi8qKlxuICogTG9nZ2luZyBjbGFzcy5cbiAqIFVzZSBvZiBzZW50aW5lbCBzdHJpbmcgaW5zdGVhZCBvZiBhIGJvb2xlYW4gdG8gY2hlY2sgdXNlci9kZXYgZXJyb3JzXG4gKiBiZWNhdXNlIGVycm9ycyBjb3VsZCBiZSByZXRocm93biBieSBzb21lIG5hdGl2ZSBjb2RlIGFzIGEgbmV3IGVycm9yLCBhbmQgb25seSBhIG1lc3NhZ2Ugd291bGQgc3Vydml2ZS5cbiAqIEFsc28sIHNvbWUgYnJvd3NlciBkb27igJl0IHN1cHBvcnQgYSA1dGggZXJyb3Igb2JqZWN0IGFyZ3VtZW50IGluIHdpbmRvdy5vbmVycm9yLiBMaXN0IG9mIHN1cHBvcnRpbmcgYnJvd3NlciBjYW4gYmUgZm91bmRcbiAqIGhlcmU6IGh0dHBzOi8vYmxvZy5zZW50cnkuaW8vMjAxNi8wMS8wNC9jbGllbnQtamF2YXNjcmlwdC1yZXBvcnRpbmctd2luZG93LW9uZXJyb3IuaHRtbFxuICogQGZpbmFsXG4gKiBAcHJpdmF0ZSBWaXNpYmxlIGZvciB0ZXN0aW5nIG9ubHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBMb2cge1xuICAvKipcbiAgICogb3B0X3N1ZmZpeCB3aWxsIGJlIGFwcGVuZGVkIHRvIGVycm9yIG1lc3NhZ2UgdG8gaWRlbnRpZnkgdGhlIHR5cGUgb2YgdGhlIGVycm9yIG1lc3NhZ2UuXG4gICAqIFdlIGNhbid0IHJlbHkgb24gdGhlIGVycm9yIG9iamVjdCB0byBwYXNzIGFsb25nIHRoZSB0eXBlIGJlY2F1c2VcbiAgICogc29tZSBicm93c2VycyBkbyBub3QgaGF2ZSB0aGlzIHBhcmFtIGluIGl0cyB3aW5kb3cub25lcnJvciBBUEkuXG4gICAqIFNlZTogaHR0cHM6Ly9ibG9nLnNlbnRyeS5pby8yMDE2LzAxLzA0L2NsaWVudC1qYXZhc2NyaXB0LXJlcG9ydGluZy13aW5kb3ctb25lcnJvci5odG1sXG4gICAqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIS4vbW9kZS5Nb2RlRGVmKTohTG9nTGV2ZWx9IGxldmVsRnVuY1xuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9zdWZmaXhcbiAgICovXG4gIGNvbnN0cnVjdG9yKHdpbiwgbGV2ZWxGdW5jLCBvcHRfc3VmZml4KSB7XG4gICAgLyoqXG4gICAgICogSW4gdGVzdHMgd2UgdXNlIHRoZSBtYWluIHRlc3Qgd2luZG93IGluc3RlYWQgb2YgdGhlIGlmcmFtZSB3aGVyZVxuICAgICAqIHRoZSB0ZXN0cyBydW5zIGJlY2F1c2Ugb25seSB0aGUgZm9ybWVyIGlzIHJlbGF5ZWQgdG8gdGhlIGNvbnNvbGUuXG4gICAgICogQGNvbnN0IHshV2luZG93fVxuICAgICAqL1xuICAgIHRoaXMud2luID0gKGdldE1vZGUoKS50ZXN0ICYmIHdpbi5BTVBfVEVTVF9JRlJBTUUpID8gd2luLnBhcmVudCA6IHdpbjtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3Qge2Z1bmN0aW9uKCEuL21vZGUuTW9kZURlZik6IUxvZ0xldmVsfSAqL1xuICAgIHRoaXMubGV2ZWxGdW5jXyA9IGxldmVsRnVuYztcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgeyFMb2dMZXZlbH0gKi9cbiAgICB0aGlzLmxldmVsXyA9IHRoaXMuY2FsY0xldmVsXygpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7c3RyaW5nfSAqL1xuICAgIHRoaXMuc3VmZml4XyA9IG9wdF9zdWZmaXggfHwgJyc7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUxvZ0xldmVsfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY2FsY0xldmVsXygpIHtcbiAgICAvLyBObyBjb25zb2xlIC0gY2FuJ3QgZW5hYmxlIGxvZ2dpbmcuXG4gICAgaWYgKCF0aGlzLndpbi5jb25zb2xlIHx8ICF0aGlzLndpbi5jb25zb2xlLmxvZykge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLk9GRjtcbiAgICB9XG5cbiAgICAvLyBMb2dnaW5nIGhhcyBiZWVuIGV4cGxpY2l0bHkgZGlzYWJsZWQuXG4gICAgaWYgKGdldE1vZGUoKS5sb2cgPT0gJzAnKSB7XG4gICAgICByZXR1cm4gTG9nTGV2ZWwuT0ZGO1xuICAgIH1cblxuICAgIC8vIExvZ2dpbmcgaXMgZW5hYmxlZCBmb3IgdGVzdHMgZGlyZWN0bHkuXG4gICAgaWYgKGdldE1vZGUoKS50ZXN0ICYmIHRoaXMud2luLkVOQUJMRV9MT0cpIHtcbiAgICAgIHJldHVybiBMb2dMZXZlbC5GSU5FO1xuICAgIH1cblxuICAgIC8vIExvY2FsRGV2IGJ5IGRlZmF1bHQgYWxsb3dzIElORk8gbGV2ZWwsIHVubGVzcyBvdmVycmlkZW4gYnkgYCNsb2dgLlxuICAgIGlmIChnZXRNb2RlKCkubG9jYWxEZXYgJiYgIWdldE1vZGUoKS5sb2cpIHtcbiAgICAgIHJldHVybiBMb2dMZXZlbC5JTkZPO1xuICAgIH1cblxuICAgIC8vIERlbGVnYXRlIHRvIHRoZSBzcGVjaWZpYyByZXNvbHZlci5cbiAgICByZXR1cm4gdGhpcy5sZXZlbEZ1bmNfKGdldE1vZGVPYmplY3QoKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgKiBAcGFyYW0ge3N0cmluZ30gbGV2ZWxcbiAgICogQHBhcmFtIHshQXJyYXl9IG1lc3NhZ2VzXG4gICAqL1xuICBtc2dfKHRhZywgbGV2ZWwsIG1lc3NhZ2VzKSB7XG4gICAgaWYgKHRoaXMubGV2ZWxfICE9IExvZ0xldmVsLk9GRikge1xuICAgICAgbGV0IGZuID0gdGhpcy53aW4uY29uc29sZS5sb2c7XG4gICAgICBpZiAobGV2ZWwgPT0gJ0VSUk9SJykge1xuICAgICAgICBmbiA9IHRoaXMud2luLmNvbnNvbGUuZXJyb3IgfHwgZm47XG4gICAgICB9IGVsc2UgaWYgKGxldmVsID09ICdJTkZPJykge1xuICAgICAgICBmbiA9IHRoaXMud2luLmNvbnNvbGUuaW5mbyB8fCBmbjtcbiAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT0gJ1dBUk4nKSB7XG4gICAgICAgIGZuID0gdGhpcy53aW4uY29uc29sZS53YXJuIHx8IGZuO1xuICAgICAgfVxuICAgICAgaWYgKGdldE1vZGUoKS5sb2NhbERldikge1xuICAgICAgICBtZXNzYWdlcy51bnNoaWZ0KCdbJyArIHRhZyArICddJyk7XG4gICAgICB9XG4gICAgICBmbi5hcHBseSh0aGlzLndpbi5jb25zb2xlLCBtZXNzYWdlcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGxvZ2dpbmcgaXMgZW5hYmxlZC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRW5hYmxlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5sZXZlbF8gIT0gTG9nTGV2ZWwuT0ZGO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcG9ydHMgYSBmaW5lLWdyYWluZWQgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqL1xuICBmaW5lKHRhZywgdmFyX2FyZ3MpIHtcbiAgICBpZiAodGhpcy5sZXZlbF8gPj0gTG9nTGV2ZWwuRklORSkge1xuICAgICAgdGhpcy5tc2dfKHRhZywgJ0ZJTkUnLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVwb3J0cyBhIGluZm9ybWF0aW9uYWwgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqL1xuICBpbmZvKHRhZywgdmFyX2FyZ3MpIHtcbiAgICBpZiAodGhpcy5sZXZlbF8gPj0gTG9nTGV2ZWwuSU5GTykge1xuICAgICAgdGhpcy5tc2dfKHRhZywgJ0lORk8nLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVwb3J0cyBhIHdhcm5pbmcgbWVzc2FnZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqL1xuICB3YXJuKHRhZywgdmFyX2FyZ3MpIHtcbiAgICBpZiAodGhpcy5sZXZlbF8gPj0gTG9nTGV2ZWwuV0FSTikge1xuICAgICAgdGhpcy5tc2dfKHRhZywgJ1dBUk4nLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVwb3J0cyBhbiBlcnJvciBtZXNzYWdlLiBJZiB0aGUgbG9nZ2luZyBpcyBkaXNhYmxlZCwgdGhlIGVycm9yIGlzIHJldGhyb3duXG4gICAqIGFzeW5jaHJvbm91c2x5LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICogQHJldHVybiB7IUVycm9yfHVuZGVmaW5lZH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGVycm9yXyh0YWcsIHZhcl9hcmdzKSB7XG4gICAgaWYgKHRoaXMubGV2ZWxfID49IExvZ0xldmVsLkVSUk9SKSB7XG4gICAgICB0aGlzLm1zZ18odGFnLCAnRVJST1InLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZXJyb3IgPSBjcmVhdGVFcnJvclZhcmdzLmFwcGx5KG51bGwsXG4gICAgICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICB0aGlzLnByZXBhcmVFcnJvcl8oZXJyb3IpO1xuICAgICAgcmV0dXJuIGVycm9yO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBvcnRzIGFuIGVycm9yIG1lc3NhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKiBAcmV0dXJuIHshRXJyb3J8dW5kZWZpbmVkfVxuICAgKi9cbiAgZXJyb3IodGFnLCB2YXJfYXJncykge1xuICAgIGNvbnN0IGVycm9yID0gdGhpcy5lcnJvcl8uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGVycm9yLm5hbWUgPSB0YWcgfHwgZXJyb3IubmFtZTtcbiAgICAgIC8vIHJlcG9ydEVycm9yIGlzIGluc3RhbGxlZCBnbG9iYWxseSBwZXIgd2luZG93IGluIHRoZSBlbnRyeSBwb2ludC5cbiAgICAgIHNlbGYucmVwb3J0RXJyb3IoZXJyb3IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXBvcnRzIGFuIGVycm9yIG1lc3NhZ2UgYW5kIG1hcmtzIHdpdGggYW4gZXhwZWN0ZWQgcHJvcGVydHkuIElmIHRoZVxuICAgKiBsb2dnaW5nIGlzIGRpc2FibGVkLCB0aGUgZXJyb3IgaXMgcmV0aHJvd24gYXN5bmNocm9ub3VzbHkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB1bnVzZWRUYWdcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJnc1xuICAgKi9cbiAgZXhwZWN0ZWRFcnJvcih1bnVzZWRUYWcsIHZhcl9hcmdzKSB7XG4gICAgY29uc3QgZXJyb3IgPSB0aGlzLmVycm9yXy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChlcnJvcikge1xuICAgICAgZXJyb3IuZXhwZWN0ZWQgPSB0cnVlO1xuICAgICAgLy8gcmVwb3J0RXJyb3IgaXMgaW5zdGFsbGVkIGdsb2JhbGx5IHBlciB3aW5kb3cgaW4gdGhlIGVudHJ5IHBvaW50LlxuICAgICAgc2VsZi5yZXBvcnRFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gZXJyb3Igb2JqZWN0LlxuICAgKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gICAqIEByZXR1cm4geyFFcnJvcn1cbiAgICovXG4gIGNyZWF0ZUVycm9yKHZhcl9hcmdzKSB7XG4gICAgY29uc3QgZXJyb3IgPSBjcmVhdGVFcnJvclZhcmdzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gICAgdGhpcy5wcmVwYXJlRXJyb3JfKGVycm9yKTtcbiAgICByZXR1cm4gZXJyb3I7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBlcnJvciBvYmplY3Qgd2l0aCBpdHMgZXhwZWN0ZWQgcHJvcGVydHkgc2V0IHRvIHRydWUuXG4gICAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAgICogQHJldHVybiB7IUVycm9yfVxuICAgKi9cbiAgY3JlYXRlRXhwZWN0ZWRFcnJvcih2YXJfYXJncykge1xuICAgIGNvbnN0IGVycm9yID0gY3JlYXRlRXJyb3JWYXJncy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIHRoaXMucHJlcGFyZUVycm9yXyhlcnJvcik7XG4gICAgZXJyb3IuZXhwZWN0ZWQgPSB0cnVlO1xuICAgIHJldHVybiBlcnJvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzbid0IHRydWVpc2guXG4gICAqXG4gICAqIFN1cHBvcnRzIGFyZ3VtZW50IHN1YnN0aXR1dGlvbiBpbnRvIHRoZSBtZXNzYWdlIHZpYSAlcyBwbGFjZWhvbGRlcnMuXG4gICAqXG4gICAqIFRocm93cyBhbiBlcnJvciBvYmplY3QgdGhhdCBoYXMgdHdvIGV4dHJhIHByb3BlcnRpZXM6XG4gICAqIC0gYXNzb2NpYXRlZEVsZW1lbnQ6IFRoaXMgaXMgdGhlIGZpcnN0IGVsZW1lbnQgcHJvdmlkZWQgaW4gdGhlIHZhciBhcmdzLlxuICAgKiAgIEl0IGNhbiBiZSB1c2VkIGZvciBpbXByb3ZlZCBkaXNwbGF5IG9mIGVycm9yIG1lc3NhZ2VzLlxuICAgKiAtIG1lc3NhZ2VBcnJheTogVGhlIGVsZW1lbnRzIG9mIHRoZSBzdWJzdGl0dXRlZCBtZXNzYWdlIGFzIG5vbi1zdHJpbmdpZmllZFxuICAgKiAgIGVsZW1lbnRzIGluIGFuIGFycmF5LiBXaGVuIGUuZy4gcGFzc2VkIHRvIGNvbnNvbGUuZXJyb3IgdGhpcyB5aWVsZHNcbiAgICogICBuYXRpdmUgZGlzcGxheXMgb2YgdGhpbmdzIGxpa2UgSFRNTCBlbGVtZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHtUfSBzaG91bGRCZVRydWVpc2ggVGhlIHZhbHVlIHRvIGFzc2VydC4gVGhlIGFzc2VydCBmYWlscyBpZiBpdCBkb2VzXG4gICAqICAgICBub3QgZXZhbHVhdGUgdG8gdHJ1ZS5cbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbWVzc2FnZSBUaGUgYXNzZXJ0aW9uIG1lc3NhZ2VcbiAgICogQHBhcmFtIHsuLi4qfSB2YXJfYXJncyBBcmd1bWVudHMgc3Vic3RpdHV0ZWQgaW50byAlcyBpbiB0aGUgbWVzc2FnZS5cbiAgICogQHJldHVybiB7VH0gVGhlIHZhbHVlIG9mIHNob3VsZEJlVHJ1ZWlzaC5cbiAgICogQHRlbXBsYXRlIFRcbiAgICovXG4gIC8qZXNsaW50IFwiZ29vZ2xlLWNhbWVsY2FzZS9nb29nbGUtY2FtZWxjYXNlXCI6IDAqL1xuICBhc3NlcnQoc2hvdWxkQmVUcnVlaXNoLCBvcHRfbWVzc2FnZSwgdmFyX2FyZ3MpIHtcbiAgICBsZXQgZmlyc3RFbGVtZW50O1xuICAgIGlmICghc2hvdWxkQmVUcnVlaXNoKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gb3B0X21lc3NhZ2UgfHwgJ0Fzc2VydGlvbiBmYWlsZWQnO1xuICAgICAgY29uc3Qgc3BsaXRNZXNzYWdlID0gbWVzc2FnZS5zcGxpdCgnJXMnKTtcbiAgICAgIGNvbnN0IGZpcnN0ID0gc3BsaXRNZXNzYWdlLnNoaWZ0KCk7XG4gICAgICBsZXQgZm9ybWF0dGVkID0gZmlyc3Q7XG4gICAgICBjb25zdCBtZXNzYWdlQXJyYXkgPSBbXTtcbiAgICAgIHB1c2hJZk5vbkVtcHR5KG1lc3NhZ2VBcnJheSwgZmlyc3QpO1xuICAgICAgZm9yIChsZXQgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdmFsID0gYXJndW1lbnRzW2ldO1xuICAgICAgICBpZiAodmFsICYmIHZhbC50YWdOYW1lKSB7XG4gICAgICAgICAgZmlyc3RFbGVtZW50ID0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5leHRDb25zdGFudCA9IHNwbGl0TWVzc2FnZS5zaGlmdCgpO1xuICAgICAgICBtZXNzYWdlQXJyYXkucHVzaCh2YWwpO1xuICAgICAgICBwdXNoSWZOb25FbXB0eShtZXNzYWdlQXJyYXksIG5leHRDb25zdGFudC50cmltKCkpO1xuICAgICAgICBmb3JtYXR0ZWQgKz0gdG9TdHJpbmcodmFsKSArIG5leHRDb25zdGFudDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGUgPSBuZXcgRXJyb3IoZm9ybWF0dGVkKTtcbiAgICAgIGUuZnJvbUFzc2VydCA9IHRydWU7XG4gICAgICBlLmFzc29jaWF0ZWRFbGVtZW50ID0gZmlyc3RFbGVtZW50O1xuICAgICAgZS5tZXNzYWdlQXJyYXkgPSBtZXNzYWdlQXJyYXk7XG4gICAgICB0aGlzLnByZXBhcmVFcnJvcl8oZSk7XG4gICAgICAvLyByZXBvcnRFcnJvciBpcyBpbnN0YWxsZWQgZ2xvYmFsbHkgcGVyIHdpbmRvdyBpbiB0aGUgZW50cnkgcG9pbnQuXG4gICAgICBzZWxmLnJlcG9ydEVycm9yKGUpO1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgcmV0dXJuIHNob3VsZEJlVHJ1ZWlzaDtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzbid0IGFuIEVsZW1lbnRcbiAgICpcbiAgICogT3RoZXJ3aXNlIHNlZSBgYXNzZXJ0YCBmb3IgdXNhZ2VcbiAgICpcbiAgICogQHBhcmFtIHsqfSBzaG91bGRCZUVsZW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfbWVzc2FnZSBUaGUgYXNzZXJ0aW9uIG1lc3NhZ2VcbiAgICogQHJldHVybiB7IUVsZW1lbnR9IFRoZSB2YWx1ZSBvZiBzaG91bGRCZVRydWVpc2guXG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqL1xuICAvKmVzbGludCBcImdvb2dsZS1jYW1lbGNhc2UvZ29vZ2xlLWNhbWVsY2FzZVwiOiAyKi9cbiAgYXNzZXJ0RWxlbWVudChzaG91bGRCZUVsZW1lbnQsIG9wdF9tZXNzYWdlKSB7XG4gICAgY29uc3Qgc2hvdWxkQmVUcnVlaXNoID0gc2hvdWxkQmVFbGVtZW50ICYmIHNob3VsZEJlRWxlbWVudC5ub2RlVHlwZSA9PSAxO1xuICAgIHRoaXMuYXNzZXJ0KHNob3VsZEJlVHJ1ZWlzaCwgKG9wdF9tZXNzYWdlIHx8ICdFbGVtZW50IGV4cGVjdGVkJykgKyAnOiAlcycsXG4gICAgICAgIHNob3VsZEJlRWxlbWVudCk7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IUVsZW1lbnR9ICovIChzaG91bGRCZUVsZW1lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgZmlyc3QgYXJndW1lbnQgaXNuJ3QgYSBzdHJpbmcuIFRoZSBzdHJpbmcgY2FuXG4gICAqIGJlIGVtcHR5LlxuICAgKlxuICAgKiBGb3IgbW9yZSBkZXRhaWxzIHNlZSBgYXNzZXJ0YC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBzaG91bGRCZVN0cmluZ1xuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBzdHJpbmcgdmFsdWUuIENhbiBiZSBhbiBlbXB0eSBzdHJpbmcuXG4gICAqL1xuICAvKmVzbGludCBcImdvb2dsZS1jYW1lbGNhc2UvZ29vZ2xlLWNhbWVsY2FzZVwiOiAyKi9cbiAgYXNzZXJ0U3RyaW5nKHNob3VsZEJlU3RyaW5nLCBvcHRfbWVzc2FnZSkge1xuICAgIHRoaXMuYXNzZXJ0KHR5cGVvZiBzaG91bGRCZVN0cmluZyA9PSAnc3RyaW5nJyxcbiAgICAgICAgKG9wdF9tZXNzYWdlIHx8ICdTdHJpbmcgZXhwZWN0ZWQnKSArICc6ICVzJywgc2hvdWxkQmVTdHJpbmcpO1xuICAgIHJldHVybiAvKiogQHR5cGUge3N0cmluZ30gKi8gKHNob3VsZEJlU3RyaW5nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaHJvd3MgYW4gZXJyb3IgaWYgdGhlIGZpcnN0IGFyZ3VtZW50IGlzbid0IGEgbnVtYmVyLiBUaGUgYWxsb3dlZCB2YWx1ZXNcbiAgICogaW5jbHVkZSBgMGAgYW5kIGBOYU5gLlxuICAgKlxuICAgKiBGb3IgbW9yZSBkZXRhaWxzIHNlZSBgYXNzZXJ0YC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBzaG91bGRCZU51bWJlclxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IFRoZSBudW1iZXIgdmFsdWUuIFRoZSBhbGxvd2VkIHZhbHVlcyBpbmNsdWRlIGAwYFxuICAgKiAgIGFuZCBgTmFOYC5cbiAgICovXG4gIGFzc2VydE51bWJlcihzaG91bGRCZU51bWJlciwgb3B0X21lc3NhZ2UpIHtcbiAgICB0aGlzLmFzc2VydCh0eXBlb2Ygc2hvdWxkQmVOdW1iZXIgPT0gJ251bWJlcicsXG4gICAgICAgIChvcHRfbWVzc2FnZSB8fCAnTnVtYmVyIGV4cGVjdGVkJykgKyAnOiAlcycsIHNob3VsZEJlTnVtYmVyKTtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHtudW1iZXJ9ICovIChzaG91bGRCZU51bWJlcik7XG4gIH1cblxuICAvKipcbiAgICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBmaXJzdCBhcmd1bWVudCBpc24ndCBhIGJvb2xlYW4uXG4gICAqXG4gICAqIEZvciBtb3JlIGRldGFpbHMgc2VlIGBhc3NlcnRgLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHNob3VsZEJlQm9vbGVhblxuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9tZXNzYWdlIFRoZSBhc3NlcnRpb24gbWVzc2FnZVxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUaGUgYm9vbGVhbiB2YWx1ZS5cbiAgICovXG4gIGFzc2VydEJvb2xlYW4oc2hvdWxkQmVCb29sZWFuLCBvcHRfbWVzc2FnZSkge1xuICAgIHRoaXMuYXNzZXJ0KCEhc2hvdWxkQmVCb29sZWFuID09PSBzaG91bGRCZUJvb2xlYW4sXG4gICAgICAgIChvcHRfbWVzc2FnZSB8fCAnQm9vbGVhbiBleHBlY3RlZCcpICsgJzogJXMnLCBzaG91bGRCZUJvb2xlYW4pO1xuICAgIHJldHVybiAvKiogQHR5cGUge2Jvb2xlYW59ICovIChzaG91bGRCZUJvb2xlYW4pO1xuICB9XG5cbiAgLyoqXG4gICAqIEFzc2VydHMgYW5kIHJldHVybnMgdGhlIGVudW0gdmFsdWUuIElmIHRoZSBlbnVtIGRvZXNuJ3QgY29udGFpbiBzdWNoIGEgdmFsdWUsXG4gICAqIHRoZSBlcnJvciBpcyB0aHJvd24uXG4gICAqXG4gICAqIEBwYXJhbSB7IU9iamVjdDxUPn0gZW51bU9ialxuICAgKiBAcGFyYW0ge3N0cmluZ30gc1xuICAgKiBAcGFyYW0ge3N0cmluZz19IG9wdF9lbnVtTmFtZVxuICAgKiBAcmV0dXJuIFRcbiAgICogQHRlbXBsYXRlIFRcbiAgICovXG4gIC8qZXNsaW50IFwiZ29vZ2xlLWNhbWVsY2FzZS9nb29nbGUtY2FtZWxjYXNlXCI6IDIqL1xuICBhc3NlcnRFbnVtVmFsdWUoZW51bU9iaiwgcywgb3B0X2VudW1OYW1lKSB7XG4gICAgaWYgKGlzRW51bVZhbHVlKGVudW1PYmosIHMpKSB7XG4gICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgdGhpcy5hc3NlcnQoZmFsc2UsXG4gICAgICAgICdVbmtub3duICVzIHZhbHVlOiBcIiVzXCInLFxuICAgICAgICBvcHRfZW51bU5hbWUgfHwgJ2VudW0nLCBzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFFcnJvcn0gZXJyb3JcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHByZXBhcmVFcnJvcl8oZXJyb3IpIHtcbiAgICBlcnJvciA9IGR1cGxpY2F0ZUVycm9ySWZOZWNlc3NhcnkoZXJyb3IpO1xuICAgIGlmICh0aGlzLnN1ZmZpeF8pIHtcbiAgICAgIGlmICghZXJyb3IubWVzc2FnZSkge1xuICAgICAgICBlcnJvci5tZXNzYWdlID0gdGhpcy5zdWZmaXhfO1xuICAgICAgfSBlbHNlIGlmIChlcnJvci5tZXNzYWdlLmluZGV4T2YodGhpcy5zdWZmaXhfKSA9PSAtMSkge1xuICAgICAgICBlcnJvci5tZXNzYWdlICs9IHRoaXMuc3VmZml4XztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGlzVXNlckVycm9yTWVzc2FnZShlcnJvci5tZXNzYWdlKSkge1xuICAgICAgZXJyb3IubWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UucmVwbGFjZShVU0VSX0VSUk9SX1NFTlRJTkVMLCAnJyk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd8IUVsZW1lbnR9IHZhbFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB0b1N0cmluZyh2YWwpIHtcbiAgLy8gRG8gY2hlY2sgZXF1aXZhbGVudCB0byBgdmFsIGluc3RhbmNlb2YgRWxlbWVudGAgd2l0aG91dCBjcm9zcy13aW5kb3cgYnVnXG4gIGlmICh2YWwgJiYgdmFsLm5vZGVUeXBlID09IDEpIHtcbiAgICByZXR1cm4gdmFsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICh2YWwuaWQgPyAnIycgKyB2YWwuaWQgOiAnJyk7XG4gIH1cbiAgcmV0dXJuIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAodmFsKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IUFycmF5fSBhcnJheVxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuZnVuY3Rpb24gcHVzaElmTm9uRW1wdHkoYXJyYXksIHZhbCkge1xuICBpZiAodmFsICE9ICcnKSB7XG4gICAgYXJyYXkucHVzaCh2YWwpO1xuICB9XG59XG5cbi8qKlxuICogU29tZSBleGNlcHRpb25zIChET01FeGNlcHRpb24sIG5hbWVseSkgaGF2ZSByZWFkLW9ubHkgbWVzc2FnZS5cbiAqIEBwYXJhbSB7IUVycm9yfSBlcnJvclxuICogQHJldHVybiB7IUVycm9yfTtcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGR1cGxpY2F0ZUVycm9ySWZOZWNlc3NhcnkoZXJyb3IpIHtcbiAgY29uc3QgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2U7XG4gIGNvbnN0IHRlc3QgPSBTdHJpbmcoTWF0aC5yYW5kb20oKSk7XG4gIGVycm9yLm1lc3NhZ2UgPSB0ZXN0O1xuXG4gIGlmIChlcnJvci5tZXNzYWdlID09PSB0ZXN0KSB7XG4gICAgZXJyb3IubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgY29uc3QgZSA9IG5ldyBFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgLy8gQ29weSBhbGwgdGhlIGV4dHJhbmVvdXMgdGhpbmdzIHdlIGF0dGFjaC5cbiAgZm9yIChjb25zdCBwcm9wIGluIGVycm9yKSB7XG4gICAgZVtwcm9wXSA9IGVycm9yW3Byb3BdO1xuICB9XG4gIC8vIEVuc3VyZSB0aGVzZSBhcmUgY29waWVkLlxuICBlLnN0YWNrID0gZXJyb3Iuc3RhY2s7XG4gIHJldHVybiBlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Li4uKn0gdmFyX2FyZ3NcbiAqIEByZXR1cm4geyFFcnJvcn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUVycm9yVmFyZ3ModmFyX2FyZ3MpIHtcbiAgbGV0IGVycm9yID0gbnVsbDtcbiAgbGV0IG1lc3NhZ2UgPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBhcmcgPSBhcmd1bWVudHNbaV07XG4gICAgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yICYmICFlcnJvcikge1xuICAgICAgZXJyb3IgPSBkdXBsaWNhdGVFcnJvcklmTmVjZXNzYXJ5KGFyZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gJyAnO1xuICAgICAgfVxuICAgICAgbWVzc2FnZSArPSBhcmc7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFlcnJvcikge1xuICAgIGVycm9yID0gbmV3IEVycm9yKG1lc3NhZ2UpO1xuICB9IGVsc2UgaWYgKG1lc3NhZ2UpIHtcbiAgICBlcnJvci5tZXNzYWdlID0gbWVzc2FnZSArICc6ICcgKyBlcnJvci5tZXNzYWdlO1xuICB9XG4gIHJldHVybiBlcnJvcjtcbn1cblxuXG4vKipcbiAqIFJldGhyb3dzIHRoZSBlcnJvciB3aXRob3V0IHRlcm1pbmF0aW5nIHRoZSBjdXJyZW50IGNvbnRleHQuIFRoaXMgcHJlc2VydmVzXG4gKiB3aGV0aGVyIHRoZSBvcmlnaW5hbCBlcnJvciBkZXNpZ25hdGlvbiBpcyBhIHVzZXIgZXJyb3Igb3IgYSBkZXYgZXJyb3IuXG4gKiBAcGFyYW0gey4uLip9IHZhcl9hcmdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXRocm93QXN5bmModmFyX2FyZ3MpIHtcbiAgY29uc3QgZXJyb3IgPSBjcmVhdGVFcnJvclZhcmdzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyk7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIC8vIHJlcG9ydEVycm9yIGlzIGluc3RhbGxlZCBnbG9iYWxseSBwZXIgd2luZG93IGluIHRoZSBlbnRyeSBwb2ludC5cbiAgICBzZWxmLnJlcG9ydEVycm9yKGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfSk7XG59XG5cblxuLyoqXG4gKiBDYWNoZSBmb3IgbG9ncy4gV2UgZG8gbm90IHVzZSBhIFNlcnZpY2Ugc2luY2UgdGhlIHNlcnZpY2UgbW9kdWxlIGRlcGVuZHNcbiAqIG9uIExvZyBhbmQgY2xvc3VyZSBsaXRlcmFsbHkgY2FuJ3QgZXZlbi5cbiAqIEB0eXBlIHt7dXNlcjogP0xvZywgZGV2OiA/TG9nLCB1c2VyRm9yRW1iZWQ6ID9Mb2d9fVxuICovXG5zZWxmLmxvZyA9IChzZWxmLmxvZyB8fCB7XG4gIHVzZXI6IG51bGwsXG4gIGRldjogbnVsbCxcbiAgdXNlckZvckVtYmVkOiBudWxsLFxufSk7XG5cbmNvbnN0IGxvZ3MgPSBzZWxmLmxvZztcblxuLyoqXG4gKiBFdmVudHVhbGx5IGhvbGRzIGEgY29uc3RydWN0b3IgZm9yIExvZyBvYmplY3RzLiBMYXppbHkgaW5pdGlhbGl6ZWQsIHNvIHdlXG4gKiBjYW4gYXZvaWQgZXZlciByZWZlcmVuY2luZyB0aGUgcmVhbCBjb25zdHJ1Y3RvciBleGNlcHQgaW4gSlMgYmluYXJpZXNcbiAqIHRoYXQgYWN0dWFsbHkgd2FudCB0byBpbmNsdWRlIHRoZSBpbXBsZW1lbnRhdGlvbi5cbiAqIEB0eXBlIHs/RnVuY3Rpb259XG4gKi9cbmxldCBsb2dDb25zdHJ1Y3RvciA9IG51bGw7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRMb2dDb25zdHJ1Y3RvcigpIHtcbiAgbG9nQ29uc3RydWN0b3IgPSBMb2c7XG4gIC8vIEluaXRpYWxpemUgaW5zdGFuY2VzIGZvciB1c2UuIElmIGEgYmluYXJ5IChhbiBleHRlbnNpb24gZm9yIGV4YW1wbGUpIHRoYXRcbiAgLy8gZG9lcyBub3QgY2FsbCBgaW5pdExvZ0NvbnN0cnVjdG9yYCBpbnZva2VzIGBkZXYoKWAgb3IgYHVzZXIoKWAgZWFybGllclxuICAvLyB0aGFuIHRoZSBiaW5hcnkgdGhhdCBkb2VzIGNhbGwgYGluaXRMb2dDb25zdHJ1Y3RvcmAgKGFtcC5qcyksIHRoZSBleHRlbnNpb25cbiAgLy8gd2lsbCB0aHJvdyBhbiBlcnJvciBhcyB0aGF0IGV4dGVuc2lvbiB3aWxsIG5ldmVyIGJlIGFibGUgdG8gaW5pdGlhbGl6ZVxuICAvLyB0aGUgbG9nIGluc3RhbmNlcyBhbmQgd2UgYWxzbyBkb24ndCB3YW50IGl0IHRvIGNhbGwgYGluaXRMb2dDb25zdHJ1Y3RvcmBcbiAgLy8gZWl0aGVyIChzaW5jZSB0aGF0IHdpbGwgY2F1c2UgdGhlIExvZyBpbXBsZW1lbnRhdGlvbiB0byBiZSBidW5kbGVkIGludG8gdGhhdFxuICAvLyBiaW5hcnkpLiBTbyB3ZSBtdXN0IGluaXRpYWxpemUgdGhlIGluc3RhbmNlcyBlYWdlcmx5IHNvIHRoYXQgdGhleSBhcmVcbiAgLy8gcmVhZHkgZm9yIHVzZSAoc3RvcmVkIGdsb2JhbGx5KSBhZnRlciB0aGUgbWFpbiBiaW5hcnkgY2FsbHNcbiAgLy8gYGluaXRMb2dDb25zdHJ1Y3RvcmAuXG4gIGRldigpO1xuICB1c2VyKCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNldExvZ0NvbnN0cnVjdG9yRm9yVGVzdGluZygpIHtcbiAgbG9nQ29uc3RydWN0b3IgPSBudWxsO1xufVxuXG4vKipcbiAqIFB1Ymxpc2hlciBsZXZlbCBsb2cuXG4gKlxuICogRW5hYmxlZCBpbiB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG4gKiAgMS4gTm90IGRpc2FibGVkIHVzaW5nIGAjbG9nPTBgLlxuICogIDIuIERldmVsb3BtZW50IG1vZGUgaXMgZW5hYmxlZCB2aWEgYCNkZXZlbG9wbWVudD0xYCBvciBsb2dnaW5nIGlzIGV4cGxpY2l0bHlcbiAqICAgICBlbmFibGVkIHZpYSBgI2xvZz1EYCB3aGVyZSBEID49IDEuXG4gKlxuICogQHBhcmFtIHshRWxlbWVudD19IG9wdF9lbGVtZW50XG4gKiBAcmV0dXJuIHshTG9nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXNlcihvcHRfZWxlbWVudCkge1xuICBpZiAoIWxvZ3MudXNlcikge1xuICAgIGxvZ3MudXNlciA9IGdldFVzZXJMb2dnZXIoVVNFUl9FUlJPUl9TRU5USU5FTCk7XG4gIH1cbiAgaWYgKCFpc0Zyb21FbWJlZChsb2dzLnVzZXIud2luLCBvcHRfZWxlbWVudCkpIHtcbiAgICByZXR1cm4gbG9ncy51c2VyO1xuICB9IGVsc2Uge1xuICAgIGlmIChsb2dzLnVzZXJGb3JFbWJlZCkge1xuICAgICAgcmV0dXJuIGxvZ3MudXNlckZvckVtYmVkO1xuICAgIH1cbiAgICByZXR1cm4gbG9ncy51c2VyRm9yRW1iZWQgPSBnZXRVc2VyTG9nZ2VyKFVTRVJfRVJST1JfRU1CRURfU0VOVElORUwpO1xuICB9XG59XG5cbi8qKlxuICogR2V0dGVyIGZvciB1c2VyIGxvZ2dlclxuICogQHBhcmFtIHtzdHJpbmc9fSBzdWZmaXhcbiAqIEByZXR1cm5zIHshTG9nfVxuICovXG5mdW5jdGlvbiBnZXRVc2VyTG9nZ2VyKHN1ZmZpeCkge1xuICBpZiAoIWxvZ0NvbnN0cnVjdG9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdmYWlsZWQgdG8gY2FsbCBpbml0TG9nQ29uc3RydWN0b3InKTtcbiAgfVxuICByZXR1cm4gbmV3IGxvZ0NvbnN0cnVjdG9yKHNlbGYsIG1vZGUgPT4ge1xuICAgIGNvbnN0IGxvZ051bSA9IHBhcnNlSW50KG1vZGUubG9nLCAxMCk7XG4gICAgaWYgKG1vZGUuZGV2ZWxvcG1lbnQgfHwgbG9nTnVtID49IDEpIHtcbiAgICAgIHJldHVybiBMb2dMZXZlbC5GSU5FO1xuICAgIH1cbiAgICByZXR1cm4gTG9nTGV2ZWwuV0FSTjtcbiAgfSwgc3VmZml4KTtcbn1cblxuLyoqXG4gKiBBTVAgZGV2ZWxvcG1lbnQgbG9nLiBDYWxscyB0byBgZGV2TG9nKCkuYXNzZXJ0YCBhbmQgYGRldi5maW5lYCBhcmUgc3RyaXBwZWQgaW5cbiAqIHRoZSBQUk9EIGJpbmFyeS4gSG93ZXZlciwgYGRldkxvZygpLmFzc2VydGAgcmVzdWx0IGlzIHByZXNlcnZlZCBpbiBlaXRoZXIgY2FzZS5cbiAqXG4gKiBFbmFibGVkIGluIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbiAqICAxLiBOb3QgZGlzYWJsZWQgdXNpbmcgYCNsb2c9MGAuXG4gKiAgMi4gTG9nZ2luZyBpcyBleHBsaWNpdGx5IGVuYWJsZWQgdmlhIGAjbG9nPURgLCB3aGVyZSBEID49IDIuXG4gKlxuICogQHJldHVybiB7IUxvZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldigpIHtcbiAgaWYgKGxvZ3MuZGV2KSB7XG4gICAgcmV0dXJuIGxvZ3MuZGV2O1xuICB9XG4gIGlmICghbG9nQ29uc3RydWN0b3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZhaWxlZCB0byBjYWxsIGluaXRMb2dDb25zdHJ1Y3RvcicpO1xuICB9XG4gIHJldHVybiBsb2dzLmRldiA9IG5ldyBsb2dDb25zdHJ1Y3RvcihzZWxmLCBtb2RlID0+IHtcbiAgICBjb25zdCBsb2dOdW0gPSBwYXJzZUludChtb2RlLmxvZywgMTApO1xuICAgIGlmIChsb2dOdW0gPj0gMykge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLkZJTkU7XG4gICAgfVxuICAgIGlmIChsb2dOdW0gPj0gMikge1xuICAgICAgcmV0dXJuIExvZ0xldmVsLklORk87XG4gICAgfVxuICAgIHJldHVybiBMb2dMZXZlbC5PRkY7XG4gIH0pO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0geyFFbGVtZW50PX0gb3B0X2VsZW1lbnRcbiAqIEByZXR1cm5zIHtib29sZWFufSBpc0VtYmVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Zyb21FbWJlZCh3aW4sIG9wdF9lbGVtZW50KSB7XG4gIGlmICghb3B0X2VsZW1lbnQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIG9wdF9lbGVtZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcgIT0gd2luO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi9tb2RlJztcblxuLyoqXG4gKiBQcm92aWRlcyBpbmZvIGFib3V0IHRoZSBjdXJyZW50IGFwcC4gVGhpcyByZXR1cm4gdmFsdWUgbWF5IGJlIGNhY2hlZCBhbmRcbiAqIHBhc3NlZCBhcm91bmQgYXMgaXQgd2lsbCBhbHdheXMgYmUgRENFJ2QuXG4gKiBAcGFyYW0gez9XaW5kb3c9fSBvcHRfd2luXG4gKiBAcmV0dXJuIHshLi9tb2RlLk1vZGVEZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb2RlT2JqZWN0KG9wdF93aW4pIHtcbiAgcmV0dXJuIHtcbiAgICBsb2NhbERldjogZ2V0TW9kZShvcHRfd2luKS5sb2NhbERldixcbiAgICBkZXZlbG9wbWVudDogZ2V0TW9kZShvcHRfd2luKS5kZXZlbG9wbWVudCxcbiAgICBmaWx0ZXI6IGdldE1vZGUob3B0X3dpbikuZmlsdGVyLFxuICAgIG1pbmlmaWVkOiBnZXRNb2RlKG9wdF93aW4pLm1pbmlmaWVkLFxuICAgIGxpdGU6IGdldE1vZGUob3B0X3dpbikubGl0ZSxcbiAgICB0ZXN0OiBnZXRNb2RlKG9wdF93aW4pLnRlc3QsXG4gICAgbG9nOiBnZXRNb2RlKG9wdF93aW4pLmxvZyxcbiAgICB2ZXJzaW9uOiBnZXRNb2RlKG9wdF93aW4pLnZlcnNpb24sXG4gICAgcnR2VmVyc2lvbjogZ2V0TW9kZShvcHRfd2luKS5ydHZWZXJzaW9uLFxuICB9O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7cGFyc2VRdWVyeVN0cmluZ199IGZyb20gJy4vdXJsLXBhcnNlLXF1ZXJ5LXN0cmluZyc7XG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgbG9jYWxEZXY6IGJvb2xlYW4sXG4gKiAgIGRldmVsb3BtZW50OiBib29sZWFuLFxuICogICBmaWx0ZXI6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAqICAgbWluaWZpZWQ6IGJvb2xlYW4sXG4gKiAgIGxpdGU6IGJvb2xlYW4sXG4gKiAgIHRlc3Q6IGJvb2xlYW4sXG4gKiAgIGxvZzogKHN0cmluZ3x1bmRlZmluZWQpLFxuICogICB2ZXJzaW9uOiBzdHJpbmcsXG4gKiAgIHJ0dlZlcnNpb246IHN0cmluZyxcbiAqIH19XG4gKi9cbmV4cG9ydCBsZXQgTW9kZURlZjtcblxuLyoqIEB0eXBlIHtzdHJpbmd9ICovXG5jb25zdCB2ZXJzaW9uID0gJyRpbnRlcm5hbFJ1bnRpbWVWZXJzaW9uJCc7XG5cbi8qKlxuICogYHJ0dlZlcnNpb25gIGlzIHRoZSBwcmVmaXhlZCB2ZXJzaW9uIHdlIHNlcnZlIG9mZiBvZiB0aGUgY2RuLlxuICogVGhlIHByZWZpeCBkZW5vdGVzIGNhbmFyeSgwMCkgb3IgcHJvZCgwMSkgb3IgYW4gZXhwZXJpbWVudCB2ZXJzaW9uICggPiAwMSkuXG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5sZXQgcnR2VmVyc2lvbiA9ICcnO1xuXG4vKipcbiAqIFByb3ZpZGVzIGluZm8gYWJvdXQgdGhlIGN1cnJlbnQgYXBwLlxuICogQHBhcmFtIHs/V2luZG93PX0gb3B0X3dpblxuICogQHJldHVybiB7IU1vZGVEZWZ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb2RlKG9wdF93aW4pIHtcbiAgY29uc3Qgd2luID0gb3B0X3dpbiB8fCBzZWxmO1xuICBpZiAod2luLkFNUF9NT0RFKSB7XG4gICAgcmV0dXJuIHdpbi5BTVBfTU9ERTtcbiAgfVxuICByZXR1cm4gd2luLkFNUF9NT0RFID0gZ2V0TW9kZV8od2luKTtcbn1cblxuLyoqXG4gKiBQcm92aWRlcyBpbmZvIGFib3V0IHRoZSBjdXJyZW50IGFwcC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshTW9kZURlZn1cbiAqL1xuZnVuY3Rpb24gZ2V0TW9kZV8od2luKSB7XG4gIC8vIE1hZ2ljIGNvbnN0YW50cyB0aGF0IGFyZSByZXBsYWNlZCBieSBjbG9zdXJlIGNvbXBpbGVyLlxuICAvLyBJU19NSU5JRklFRCBpcyBhbHdheXMgcmVwbGFjZWQgd2l0aCB0cnVlIHdoZW4gY2xvc3VyZSBjb21waWxlciBpcyB1c2VkXG4gIC8vIHdoaWxlIElTX0RFViBpcyBvbmx5IHJlcGxhY2VkIHdoZW4gYGd1bHAgZGlzdGAgaXMgY2FsbGVkIHdpdGhvdXQgdGhlXG4gIC8vIC0tZm9ydGVzdGluZyBmbGFnLlxuICBjb25zdCBJU19ERVYgPSB0cnVlO1xuICBjb25zdCBJU19NSU5JRklFRCA9IGZhbHNlO1xuXG4gIGNvbnN0IGxvY2FsRGV2RW5hYmxlZCA9ICEhKHNlbGYuQU1QX0NPTkZJRyAmJiBzZWxmLkFNUF9DT05GSUcubG9jYWxEZXYpO1xuICBjb25zdCBydW5uaW5nVGVzdHMgPSBJU19ERVYgJiYgISEod2luLkFNUF9URVNUIHx8IHdpbi5fX2thcm1hX18pO1xuICBjb25zdCBpc0xvY2FsRGV2ID0gSVNfREVWICYmIChsb2NhbERldkVuYWJsZWQgfHwgcnVubmluZ1Rlc3RzKTtcbiAgY29uc3QgaGFzaFF1ZXJ5ID0gcGFyc2VRdWVyeVN0cmluZ18oXG4gICAgICAvLyBsb2NhdGlvbi5vcmlnaW5hbEhhc2ggaXMgc2V0IGJ5IHRoZSB2aWV3ZXIgd2hlbiBpdCByZW1vdmVzIHRoZSBmcmFnbWVudFxuICAgICAgLy8gZnJvbSB0aGUgVVJMLlxuICAgICAgd2luLmxvY2F0aW9uLm9yaWdpbmFsSGFzaCB8fCB3aW4ubG9jYXRpb24uaGFzaCk7XG5cbiAgY29uc3Qgc2VhcmNoUXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nXyh3aW4ubG9jYXRpb24uc2VhcmNoKTtcblxuICBpZiAoIXJ0dlZlcnNpb24pIHtcbiAgICBydHZWZXJzaW9uID0gZ2V0UnR2VmVyc2lvbih3aW4sIGlzTG9jYWxEZXYpO1xuICB9XG5cbiAgLy8gVGhlIGBtaW5pZmllZGAsIGB0ZXN0YCBhbmQgYGxvY2FsRGV2YCBwcm9wZXJ0aWVzIGFyZSByZXBsYWNlZFxuICAvLyBhcyBib29sZWFuIGxpdGVyYWxzIHdoZW4gd2UgcnVuIGBndWxwIGRpc3RgIHdpdGhvdXQgdGhlIGAtLWZvcnRlc3RpbmdgXG4gIC8vIGZsYWdzLiBUaGlzIGltcHJvdmVkIERDRSBvbiB0aGUgcHJvZHVjdGlvbiBmaWxlIHdlIGRlcGxveSBhcyB0aGUgY29kZVxuICAvLyBwYXRocyBmb3IgbG9jYWxob3N0L3Rlc3RpbmcvZGV2ZWxvcG1lbnQgYXJlIGVsaW1pbmF0ZWQuXG4gIHJldHVybiB7XG4gICAgbG9jYWxEZXY6IGlzTG9jYWxEZXYsXG4gICAgLy8gVHJpZ2dlcnMgdmFsaWRhdGlvblxuICAgIGRldmVsb3BtZW50OiAhIShoYXNoUXVlcnlbJ2RldmVsb3BtZW50J10gPT0gJzEnIHx8IHdpbi5BTVBfREVWX01PREUpLFxuICAgIGV4YW1pbmVyOiBoYXNoUXVlcnlbJ2RldmVsb3BtZW50J10gPT0gJzInLFxuICAgIC8vIEFsbG93cyBmaWx0ZXJpbmcgdmFsaWRhdGlvbiBlcnJvcnMgYnkgZXJyb3IgY2F0ZWdvcnkuIEZvciB0aGVcbiAgICAvLyBhdmFpbGFibGUgY2F0ZWdvcmllcywgc2VlIEVycm9yQ2F0ZWdvcnkgaW4gdmFsaWRhdG9yL3ZhbGlkYXRvci5wcm90by5cbiAgICBmaWx0ZXI6IGhhc2hRdWVyeVsnZmlsdGVyJ10sXG4gICAgbWluaWZpZWQ6IElTX01JTklGSUVELFxuICAgIC8vIFdoZXRoZXIgZG9jdW1lbnQgaXMgaW4gYW4gYW1wLWxpdGUgdmlld2VyLiBJdCBzaWduYWwgdGhhdCB0aGUgdXNlclxuICAgIC8vIHdvdWxkIHByZWZlciB0byB1c2UgbGVzcyBiYW5kd2lkdGguXG4gICAgbGl0ZTogc2VhcmNoUXVlcnlbJ2FtcF9saXRlJ10gIT0gdW5kZWZpbmVkLFxuICAgIHRlc3Q6IHJ1bm5pbmdUZXN0cyxcbiAgICBsb2c6IGhhc2hRdWVyeVsnbG9nJ10sXG4gICAgdmVyc2lvbixcbiAgICBydHZWZXJzaW9uLFxuICB9O1xufVxuXG4vKipcbiAqIFJldHJpZXZlIHRoZSBgcnR2VmVyc2lvbmAgd2hpY2ggd2lsbCBoYXZlIGEgbnVtZXJpYyBwcmVmaXhcbiAqIGRlbm90aW5nIGNhbmFyeS9wcm9kL2V4cGVyaW1lbnQgKHVubGVzcyBgaXNMb2NhbERldmAgaXMgdHJ1ZSkuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNMb2NhbERldlxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBnZXRSdHZWZXJzaW9uKHdpbiwgaXNMb2NhbERldikge1xuICAvLyBJZiBpdCdzIGxvY2FsIGRldiB0aGVuIHdlIHdvbid0IGFjdHVhbGx5IGhhdmUgYSBmdWxsIHZlcnNpb24gc29cbiAgLy8ganVzdCB1c2UgdGhlIHZlcnNpb24uXG4gIGlmIChpc0xvY2FsRGV2KSB7XG4gICAgcmV0dXJuIHZlcnNpb247XG4gIH1cblxuICBpZiAod2luLkFNUF9DT05GSUcgJiYgd2luLkFNUF9DT05GSUcudikge1xuICAgIHJldHVybiB3aW4uQU1QX0NPTkZJRy52O1xuICB9XG5cbiAgLy8gQ3VycmVudGx5IGAkaW50ZXJuYWxSdW50aW1lVmVyc2lvbiRgIGFuZCB0aHVzIGBtb2RlLnZlcnNpb25gIGNvbnRhaW4gb25seVxuICAvLyBtYWpvciB2ZXJzaW9uLiBUaGUgZnVsbCB2ZXJzaW9uIGhvd2V2ZXIgbXVzdCBhbHNvIGNhcnJ5IHRoZSBtaW5vciB2ZXJzaW9uLlxuICAvLyBXZSB3aWxsIGRlZmF1bHQgdG8gcHJvZHVjdGlvbiBkZWZhdWx0IGAwMWAgbWlub3IgdmVyc2lvbiBmb3Igbm93LlxuICAvLyBUT0RPKGVyd2lubW9tYmF5KTogZGVjaWRlIHdoZXRoZXIgJGludGVybmFsUnVudGltZVZlcnNpb24kIHNob3VsZCBjb250YWluXG4gIC8vIG1pbm9yIHZlcnNpb24uXG4gIHJldHVybiBgMDEke3ZlcnNpb259YDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzTG9jYWxEZXZcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqIEB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UnR2VmVyc2lvbkZvclRlc3Rpbmcod2luLCBpc0xvY2FsRGV2KSB7XG4gIHJldHVybiBnZXRSdHZWZXJzaW9uKHdpbiwgaXNMb2NhbERldik7XG59XG5cblxuLyoqIEB2aXNpYmxlRm9yVGVzdGluZyAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlc2V0UnR2VmVyc2lvbkZvclRlc3RpbmcoKSB7XG4gIHJ0dlZlcnNpb24gPSAnJztcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1NlcnZpY2VzfSBmcm9tICcuL3NlcnZpY2VzJztcblxuLyoqIEBjb25zdCB7ZnVuY3Rpb24oKX0gKi9cbmNvbnN0IE5PT1BfQ0FMTEJBQ0tfID0gZnVuY3Rpb24oKSB7fTtcblxuLyoqIEBjb25zdCB7bnVtYmVyfSAqL1xuY29uc3QgTUlOX1ZFTE9DSVRZXyA9IDAuMDI7XG5cbi8qKiBAY29uc3Qge251bWJlcn0gKi9cbmNvbnN0IEZSQU1FX0NPTlNUXyA9IDE2LjY3O1xuXG4vKiogQGNvbnN0IHtudW1iZXJ9ICovXG5jb25zdCBFWFBfRlJBTUVfQ09OU1RfID0gTWF0aC5yb3VuZCgtRlJBTUVfQ09OU1RfIC8gTWF0aC5sb2coMC45NSkpO1xuXG4vKipcbiAqIERlcHJlY2lhdGlvbiBmYWN0b3Igb2YgMS8xMDAgb2YgYSBtaWxsaXNlY29uZC4gVGhpcyBpcyBob3cgbXVjaCBwcmV2aW91c1xuICogdmVsb2NpdHkgaXMgZGVwcmVjaWF0ZWQgd2hlbiBjYWxjdWxhdGluZyB0aGUgbmV3IHZlbG9jaXR5LlxuICogQGNvbnN0IHtudW1iZXJ9XG4gKi9cbmNvbnN0IFZFTE9DSVRZX0RFUFJfRkFDVE9SXyA9IEZSQU1FX0NPTlNUXyAqIDI7XG5cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHZlbG9jaXR5IGZvciBhbiBvYmplY3QgdHJhdmVsaW5nIHRoZSBkaXN0YW5jZSBkZWx0YVYgaW4gdGhlXG4gKiB0aW1lIGRlbHRhVGltZSBnaXZlbiB0aGUgcHJldmlvdXMgdmVsb2NpdHkgcHJldlZlbG9jaXR5LiBUaGUgY2FsY3VsYXRpb25cbiAqIGFzc3VtZXMgYSBiYXNpYyBpbmZvcm1hdGlvbmFsIGRlcHJlY2lhdGlvbiBvZiBwcmV2aW91cyB2ZWxvY2l0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWx0YVZcbiAqIEBwYXJhbSB7dGltZX0gZGVsdGFUaW1lXG4gKiBAcGFyYW0ge251bWJlcn0gcHJldlZlbG9jaXR5XG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjVmVsb2NpdHkoZGVsdGFWLCBkZWx0YVRpbWUsIHByZXZWZWxvY2l0eSkge1xuICBpZiAoZGVsdGFUaW1lIDwgMSkge1xuICAgIGRlbHRhVGltZSA9IDE7XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgc3BlZWQgYW5kIHNwZWVkIGRlcHJlY2lhdGlvbi5cbiAgY29uc3Qgc3BlZWQgPSBkZWx0YVYgLyBkZWx0YVRpbWU7XG5cbiAgLy8gRGVwcmVjaWF0aW9uIGlzIHNpbXBseSBhbiBpbmZvcm1hdGlvbmFsIHF1YWxpdHkuIEl0IGJhc2ljYWxseSBtZWFuczpcbiAgLy8gd2UgY2FuJ3QgaWdub3JlIHRoZSB2ZWxvY2l0eSB3ZSBrbmV3IHJlY2VudGx5LCBidXQgd2UnZCBvbmx5IGNvbnNpZGVyXG4gIC8vIGl0IHByb3BvcnRpb25hbGx5IHRvIGhvdyBsb25nIGFnbyB3ZSd2ZSBzZWVuIGl0LiBDdXJyZW50bHksIHRoaXNcbiAgLy8gZGVwcmVjaWF0aW9uIGZhY3RvciBpcyAxLzEwMCBvZiBhIG1pbGxpc2Vjb25kLiBOZXcgYXZlcmFnZSB2ZWxvY2l0eSBpc1xuICAvLyBjYWxjdWxhdGVkIGJ5IHdlaWdoaW5nIHRvd2FyZCB0aGUgbmV3IHZlbG9jaXR5IGFuZCBhd2F5IGZyb20gb2xkXG4gIC8vIHZlbG9jaXR5IGJhc2VkIG9uIHRoZSBkZXByZWNpYXRpb24uXG4gIGNvbnN0IGRlcHIgPSAwLjUgKyBNYXRoLm1pbihkZWx0YVRpbWUgLyBWRUxPQ0lUWV9ERVBSX0ZBQ1RPUl8sIDAuNSk7XG4gIHJldHVybiBzcGVlZCAqIGRlcHIgKyBwcmV2VmVsb2NpdHkgKiAoMSAtIGRlcHIpO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIG1vdGlvbiBwcm9jZXNzIHRoYXQgd2lsbCB5aWVsZCB3aGVuIHRoZSB2ZWxvY2l0eSBoYXMgcnVuIGRvd24gdG9cbiAqIHplcnAuIEZvciBlYWNoIGl0ZXJhdGlvbiwgdGhlIHZlbG9jaXR5IGlzIGRlcHJlY2lhdGVkIGFuZCB0aGUgY29vcmRpbmF0ZXNcbiAqIGFyZSBhZHZhbmNlZCBmcm9tIHN0YXJ0IFgvWSB0byB0aGUgZGVzdGluYXRpb24gYWNjb3JkaW5nIHRvIHZlbG9jaXR5XG4gKiB2ZWN0b3JzLiBGb3IgZWFjaCBzdWNoIGl0ZXJhdGlvbiB0aGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdpdGggdGhlIG5ldyB4IGFuZCB5LlxuICogQHBhcmFtIHshTm9kZX0gY29udGV4dE5vZGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFggU3RhcnQgWCBjb29yZGluYXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0WSBTdGFydCBZIGNvb3JkaW5hdGUuXG4gKiBAcGFyYW0ge251bWJlcn0gdmVsb1ggU3RhcnRpbmcgWCB2ZWxvY2l0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB2ZWxvWSBTdGFydGluZyBZIHZlbG9jaXR5LlxuICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIsIG51bWJlcik6Ym9vbGVhbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIGZvciBlYWNoXG4gKiAgIHN0ZXAgb2YgdGhlIGRlY2VsZXJhdGlvbiBtb3Rpb24uXG4gKiBAcGFyYW0geyEuL3NlcnZpY2UvdnN5bmMtaW1wbC5Wc3luYz19IG9wdF92c3luYyBNb3N0bHkgZm9yIHRlc3Rpbmcgb25seS5cbiAqIEByZXR1cm4geyFNb3Rpb259XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb250aW51ZU1vdGlvbihjb250ZXh0Tm9kZSwgc3RhcnRYLCBzdGFydFksIHZlbG9YLCB2ZWxvWSxcbiAgY2FsbGJhY2ssIG9wdF92c3luYykge1xuICByZXR1cm4gbmV3IE1vdGlvbihjb250ZXh0Tm9kZSwgc3RhcnRYLCBzdGFydFksIHZlbG9YLCB2ZWxvWSxcbiAgICAgIGNhbGxiYWNrLCBvcHRfdnN5bmMpLnN0YXJ0XygpO1xufVxuXG5cbi8qKlxuICogTW90aW9uIHByb2Nlc3MgdGhhdCBhbGxvd3MgdHJhY2tpbmcgYW5kIG1vbml0b3Jpbmcgb2YgdGhlIHJ1bm5pbmcgbW90aW9uLlxuICogTW9zdCBpbXBvcnRhbnRseSBpdCBleHBvc2VzIG1ldGhvZHMgXCJ0aGVuXCIgYW5kIFwidGhlbkFsd2F5c1wiIHRoYXQgaGF2ZSB0aGVcbiAqIHNlbWFudGljcyBvZiBhIFByb21pc2UgYW5kIHNpZ25hbCB3aGVuIHRoZSBtb3Rpb24gaGFzIGNvbXBsZXRlZCBvciBmYWlsZWQuXG4gKiBBZGRpdGlvbmFsbHksIGl0IGV4cG9zZXMgdGhlIG1ldGhvZCBcImhhbHRcIiB3aGljaCBhbGxvd3MgdG8gc3RvcC9yZXNldCB0aGVcbiAqIG1vdGlvbi5cbiAqIEBpbXBsZW1lbnRzIHtJVGhlbmFibGV9XG4gKi9cbmV4cG9ydCBjbGFzcyBNb3Rpb24ge1xuICAvKipcbiAgICogQHBhcmFtIHshTm9kZX0gY29udGV4dE5vZGUgQ29udGV4dCBub2RlLlxuICAgKiBAcGFyYW0ge251bWJlcn0gc3RhcnRYIFN0YXJ0IFggY29vcmRpbmF0ZS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0WSBTdGFydCBZIGNvb3JkaW5hdGUuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2ZWxvWCBTdGFydGluZyBYIHZlbG9jaXR5LlxuICAgKiBAcGFyYW0ge251bWJlcn0gdmVsb1kgU3RhcnRpbmcgWSB2ZWxvY2l0eS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIsIG51bWJlcik6Ym9vbGVhbn0gY2FsbGJhY2sgVGhlIGNhbGxiYWNrIGZvciBlYWNoXG4gICAqICAgc3RlcCBvZiB0aGUgZGVjZWxlcmF0aW9uIG1vdGlvbi5cbiAgICogQHBhcmFtIHshLi9zZXJ2aWNlL3ZzeW5jLWltcGwuVnN5bmM9fSBvcHRfdnN5bmNcbiAgICovXG4gIGNvbnN0cnVjdG9yKGNvbnRleHROb2RlLCBzdGFydFgsIHN0YXJ0WSwgdmVsb1gsIHZlbG9ZLCBjYWxsYmFjaywgb3B0X3ZzeW5jKSB7XG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IS4vc2VydmljZS92c3luYy1pbXBsLlZzeW5jfSAqL1xuICAgIHRoaXMudnN5bmNfID0gb3B0X3ZzeW5jIHx8IFNlcnZpY2VzLnZzeW5jRm9yKHNlbGYpO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7IU5vZGV9ICovXG4gICAgdGhpcy5jb250ZXh0Tm9kZV8gPSBjb250ZXh0Tm9kZTtcblxuICAgIC8qKiBAcHJpdmF0ZSBAY29uc3QgKi9cbiAgICB0aGlzLmNhbGxiYWNrXyA9IGNhbGxiYWNrO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5sYXN0WF8gPSBzdGFydFg7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLmxhc3RZXyA9IHN0YXJ0WTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMubWF4VmVsb2NpdHlYXyA9IHZlbG9YO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy5tYXhWZWxvY2l0eVlfID0gdmVsb1k7XG5cbiAgICAvKiogQHByaXZhdGUge251bWJlcn0gKi9cbiAgICB0aGlzLnZlbG9jaXR5WF8gPSAwO1xuXG4gICAgLyoqIEBwcml2YXRlIHtudW1iZXJ9ICovXG4gICAgdGhpcy52ZWxvY2l0eVlfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7dGltZX0gKi9cbiAgICB0aGlzLnN0YXJ0VGltZV8gPSBEYXRlLm5vdygpO1xuXG4gICAgLyoqIEBwcml2YXRlIHt0aW1lfSAqL1xuICAgIHRoaXMubGFzdFRpbWVfID0gdGhpcy5zdGFydFRpbWVfO1xuXG4gICAgLyoqIEBwcml2YXRlIHshRnVuY3Rpb259ICovXG4gICAgdGhpcy5yZXNvbHZlXztcblxuICAgIC8qKiBAcHJpdmF0ZSB7IUZ1bmN0aW9ufSAqL1xuICAgIHRoaXMucmVqZWN0XztcblxuICAgIC8qKiBAcHJpdmF0ZSB7IVByb21pc2V9ICovXG4gICAgdGhpcy5wcm9taXNlXyA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMucmVzb2x2ZV8gPSByZXNvbHZlO1xuICAgICAgdGhpcy5yZWplY3RfID0gcmVqZWN0O1xuICAgIH0pO1xuXG4gICAgLyoqIEBwcml2YXRlIHtib29sZWFufSAqL1xuICAgIHRoaXMuY29udGludWluZ18gPSBmYWxzZTtcbiAgfVxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBzdGFydF8oKSB7XG4gICAgdGhpcy5jb250aW51aW5nXyA9IHRydWU7XG4gICAgaWYgKE1hdGguYWJzKHRoaXMubWF4VmVsb2NpdHlYXykgPD0gTUlOX1ZFTE9DSVRZXyAmJlxuICAgICAgICAgICAgTWF0aC5hYnModGhpcy5tYXhWZWxvY2l0eVlfKSA8PSBNSU5fVkVMT0NJVFlfKSB7XG4gICAgICB0aGlzLmZpcmVNb3ZlXygpO1xuICAgICAgdGhpcy5jb21wbGV0ZUNvbnRpbnVlXyh0cnVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ydW5Db250aW51aW5nXygpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBIYWx0cyB0aGUgbW90aW9uLiBUaGUgbW90aW9uIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCBzaW5jZSB0aGUgbW90aW9uXG4gICAqIGhhcyBiZWVuIGludGVycnVwdGVkLlxuICAgKi9cbiAgaGFsdCgpIHtcbiAgICBpZiAodGhpcy5jb250aW51aW5nXykge1xuICAgICAgdGhpcy5jb21wbGV0ZUNvbnRpbnVlXyhmYWxzZSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoYWlucyB0byB0aGUgbW90aW9uJ3MgcHJvbWlzZSB0aGF0IHdpbGwgcmVzb2x2ZSB3aGVuIHRoZSBtb3Rpb24gaGFzXG4gICAqIGNvbXBsZXRlZCBvciB3aWxsIHJlamVjdCBpZiBtb3Rpb24gaGFzIGZhaWxlZCBvciB3YXMgaW50ZXJydXB0ZWQuXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgdGhlbihvcHRfcmVzb2x2ZSwgb3B0X3JlamVjdCkge1xuICAgIGlmICghb3B0X3Jlc29sdmUgJiYgIW9wdF9yZWplY3QpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb21pc2VfO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wcm9taXNlXy50aGVuKG9wdF9yZXNvbHZlLCBvcHRfcmVqZWN0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayBmb3IgcmVnYXJkbGVzcyB3aGV0aGVyIHRoZSBtb3Rpb24gc3VjY2VlZHMgb3IgZmFpbHMuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oKT19IG9wdF9jYWxsYmFja1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIHRoZW5BbHdheXMob3B0X2NhbGxiYWNrKSB7XG4gICAgY29uc3QgY2FsbGJhY2sgPSBvcHRfY2FsbGJhY2sgfHwgTk9PUF9DQUxMQkFDS187XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2V9ICovICh0aGlzLnRoZW4oY2FsbGJhY2ssIGNhbGxiYWNrKSk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IVByb21pc2V9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBydW5Db250aW51aW5nXygpIHtcbiAgICB0aGlzLnZlbG9jaXR5WF8gPSB0aGlzLm1heFZlbG9jaXR5WF87XG4gICAgdGhpcy52ZWxvY2l0eVlfID0gdGhpcy5tYXhWZWxvY2l0eVlfO1xuICAgIGNvbnN0IGJvdW5kU3RlcCA9IHRoaXMuc3RlcENvbnRpbnVlXy5iaW5kKHRoaXMpO1xuICAgIGNvbnN0IGJvdW5kQ29tcGxldGUgPSB0aGlzLmNvbXBsZXRlQ29udGludWVfLmJpbmQodGhpcywgdHJ1ZSk7XG4gICAgcmV0dXJuIHRoaXMudnN5bmNfLnJ1bkFuaW1NdXRhdGVTZXJpZXModGhpcy5jb250ZXh0Tm9kZV8sIGJvdW5kU3RlcCwgNTAwMClcbiAgICAgICAgLnRoZW4oYm91bmRDb21wbGV0ZSwgYm91bmRDb21wbGV0ZSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBcInRydWVcIiB0byBjb250aW51ZSBhbmQgXCJmYWxzZVwiIHRvIHN0b3AgbW90aW9uIHByb2Nlc3MuXG4gICAqIEBwYXJhbSB7dGltZX0gdGltZVNpbmNlU3RhcnRcbiAgICogQHBhcmFtIHt0aW1lfSB0aW1lU2luY2VQcmV2XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGVwQ29udGludWVfKHRpbWVTaW5jZVN0YXJ0LCB0aW1lU2luY2VQcmV2KSB7XG4gICAgaWYgKCF0aGlzLmNvbnRpbnVpbmdfKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgdGhpcy5sYXN0VGltZV8gPSBEYXRlLm5vdygpO1xuICAgIHRoaXMubGFzdFhfICs9IHRpbWVTaW5jZVByZXYgKiB0aGlzLnZlbG9jaXR5WF87XG4gICAgdGhpcy5sYXN0WV8gKz0gdGltZVNpbmNlUHJldiAqIHRoaXMudmVsb2NpdHlZXztcbiAgICBpZiAoIXRoaXMuZmlyZU1vdmVfKCkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBkZWNlbCA9IE1hdGguZXhwKC10aW1lU2luY2VTdGFydCAvIEVYUF9GUkFNRV9DT05TVF8pO1xuICAgIHRoaXMudmVsb2NpdHlYXyA9IHRoaXMubWF4VmVsb2NpdHlYXyAqIGRlY2VsO1xuICAgIHRoaXMudmVsb2NpdHlZXyA9IHRoaXMubWF4VmVsb2NpdHlZXyAqIGRlY2VsO1xuICAgIHJldHVybiAoTWF0aC5hYnModGhpcy52ZWxvY2l0eVhfKSA+IE1JTl9WRUxPQ0lUWV8gfHxcbiAgICAgICAgTWF0aC5hYnModGhpcy52ZWxvY2l0eVlfKSA+IE1JTl9WRUxPQ0lUWV8pO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gc3VjY2Vzc1xuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29tcGxldGVDb250aW51ZV8oc3VjY2Vzcykge1xuICAgIGlmICghdGhpcy5jb250aW51aW5nXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmNvbnRpbnVpbmdfID0gZmFsc2U7XG4gICAgdGhpcy5sYXN0VGltZV8gPSBEYXRlLm5vdygpO1xuICAgIHRoaXMuZmlyZU1vdmVfKCk7XG4gICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgIHRoaXMucmVzb2x2ZV8oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZWplY3RfKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqIEBwcml2YXRlICovXG4gIGZpcmVNb3ZlXygpIHtcbiAgICByZXR1cm4gdGhpcy5jYWxsYmFja18odGhpcy5sYXN0WF8sIHRoaXMubGFzdFlfKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaGVscHMgdG8gbWFuYWdlIG9ic2VydmVycy4gT2JzZXJ2ZXJzIGNhbiBiZSBhZGRlZCwgcmVtb3ZlZCBvclxuICogZmlyZWQgdGhyb3VnaCBhbmQgaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy5cbiAqIEB0ZW1wbGF0ZSBUWVBFXG4gKi9cbmV4cG9ydCBjbGFzcyBPYnNlcnZhYmxlIHtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvKiogQHR5cGUgez9BcnJheTxmdW5jdGlvbihUWVBFKT59ICovXG4gICAgdGhpcy5oYW5kbGVyc18gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIG9ic2VydmVyIHRvIHRoaXMgaW5zdGFuY2UuXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oVFlQRSl9IGhhbmRsZXIgT2JzZXJ2ZXIncyBoYW5kbGVyLlxuICAgKiBAcmV0dXJuIHshVW5saXN0ZW5EZWZ9XG4gICAqL1xuICBhZGQoaGFuZGxlcikge1xuICAgIGlmICghdGhpcy5oYW5kbGVyc18pIHtcbiAgICAgIHRoaXMuaGFuZGxlcnNfID0gW107XG4gICAgfVxuICAgIHRoaXMuaGFuZGxlcnNfLnB1c2goaGFuZGxlcik7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHRoaXMucmVtb3ZlKGhhbmRsZXIpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgb2JzZXJ2ZXIgZnJvbSB0aGlzIGluc3RhbmNlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKFRZUEUpfSBoYW5kbGVyIE9ic2VydmVyJ3MgaW5zdGFuY2UuXG4gICAqL1xuICByZW1vdmUoaGFuZGxlcikge1xuICAgIGlmICghdGhpcy5oYW5kbGVyc18pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmhhbmRsZXJzXy5pbmRleE9mKGhhbmRsZXIpO1xuICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzXy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIGFsbCBvYnNlcnZlcnMuXG4gICAqL1xuICByZW1vdmVBbGwoKSB7XG4gICAgaWYgKCF0aGlzLmhhbmRsZXJzXykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmhhbmRsZXJzXy5sZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpcmVzIGFuIGV2ZW50LiBBbGwgb2JzZXJ2ZXJzIGFyZSBjYWxsZWQuXG4gICAqIEBwYXJhbSB7VFlQRT19IG9wdF9ldmVudFxuICAgKi9cbiAgZmlyZShvcHRfZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuaGFuZGxlcnNfKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc187XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoYW5kbGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgaGFuZGxlciA9IGhhbmRsZXJzW2ldO1xuICAgICAgaGFuZGxlcihvcHRfZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIG51bWJlciBvZiBoYW5kbGVycy4gTW9zdGx5IG5lZWRlZCBmb3IgdGVzdHMuXG4gICAqIEByZXR1cm4ge251bWJlcn1cbiAgICovXG4gIGdldEhhbmRsZXJDb3VudCgpIHtcbiAgICBpZiAoIXRoaXMuaGFuZGxlcnNfKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaGFuZGxlcnNfLmxlbmd0aDtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Ynl0ZXNUb1N0cmluZywgc3RyaW5nVG9CeXRlc30gZnJvbSAnLi91dGlscy9ieXRlcyc7XG5pbXBvcnQge2dldFNvdXJjZU9yaWdpbiwgcGFyc2VVcmx9IGZyb20gJy4vdXJsJztcbmltcG9ydCB7cGFyc2VKc29ufSBmcm9tICcuL2pzb24nO1xuXG4vKipcbiAqIEdlbmVyYXRlcywgc2lnbnMgYW5kIHZlcmlmaWVzIG9yaWdpbiBleHBlcmltZW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIE9yaWdpbkV4cGVyaW1lbnRzIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7IS4vc2VydmljZS9jcnlwdG8taW1wbC5DcnlwdG99IGNyeXB0b1xuICAgKi9cbiAgY29uc3RydWN0b3IoY3J5cHRvKSB7XG4gICAgLyoqIEBwcml2YXRlIHshLi9zZXJ2aWNlL2NyeXB0by1pbXBsLkNyeXB0b30gKi9cbiAgICB0aGlzLmNyeXB0b18gPSBjcnlwdG87XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGFuIFJTQSBwdWJsaWMvcHJpdmF0ZSBrZXkgcGFpciBmb3Igc2lnbmluZyBhbmQgdmVyaWZ5aW5nLlxuICAgKiBAcmV0dXJuIHshUHJvbWlzZX1cbiAgICovXG4gIGdlbmVyYXRlS2V5cygpIHtcbiAgICBjb25zdCBnZW5lcmF0aW9uQWxnbyA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgbW9kdWx1c0xlbmd0aDogMjA0OCxcbiAgICAgIHB1YmxpY0V4cG9uZW50OiBVaW50OEFycmF5Lm9mKDEsIDAsIDEpLFxuICAgIH0sIHRoaXMuY3J5cHRvXy5wa2NzQWxnbyk7XG4gICAgcmV0dXJuIHRoaXMuY3J5cHRvXy5zdWJ0bGUuZ2VuZXJhdGVLZXkoXG4gICAgICAgIC8qKiBAdHlwZSB7e25hbWU6IHN0cmluZ319ICovIChnZW5lcmF0aW9uQWxnbyksXG4gICAgICAgIC8qIGV4dHJhY3RhYmxlICovIHRydWUsXG4gICAgICAgIC8qIGtleVVzYWdlcyAqLyBbJ3NpZ24nLCAndmVyaWZ5J10pO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhbiBvcmlnaW4gZXhwZXJpbWVudCB0b2tlbiBnaXZlbiBhIGNvbmZpZyBqc29uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gdmVyc2lvblxuICAgKiBAcGFyYW0geyFKc29uT2JqZWN0fSBqc29uXG4gICAqIEBwYXJhbSB7IXdlYkNyeXB0by5DcnlwdG9LZXl9IHByaXZhdGVLZXlcbiAgICogQHJldHVybiB7IVByb21pc2U8c3RyaW5nPn1cbiAgICovXG4gIGdlbmVyYXRlVG9rZW4odmVyc2lvbiwganNvbiwgcHJpdmF0ZUtleSkge1xuICAgIGNvbnN0IGNvbmZpZyA9IHN0cmluZ1RvQnl0ZXMoSlNPTi5zdHJpbmdpZnkoanNvbikpO1xuICAgIGNvbnN0IGRhdGEgPSB0aGlzLnByZXBlbmRfKHZlcnNpb24sIGNvbmZpZyk7XG4gICAgcmV0dXJuIHRoaXMuc2lnbl8oZGF0YSwgcHJpdmF0ZUtleSkudGhlbihzaWduYXR1cmUgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuYXBwZW5kXyhkYXRhLCBuZXcgVWludDhBcnJheShzaWduYXR1cmUpKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWZXJpZmllcyBhbiBvcmlnaW4gZXhwZXJpbWVudCB0b2tlbiBnaXZlbiBhIHB1YmxpYyBrZXkuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b2tlblxuICAgKiBAcGFyYW0geyFMb2NhdGlvbn0gbG9jYXRpb25cbiAgICogQHBhcmFtIHshd2ViQ3J5cHRvLkNyeXB0b0tleX0gcHVibGljS2V5XG4gICAqIEByZXR1cm4geyFQcm9taXNlPHN0cmluZz59IElmIHRva2VuIGlzIHZhbGlkLCByZXNvbHZlcyB3aXRoIHRoZVxuICAgKiAgICAgZXhwZXJpbWVudCBJRC4gT3RoZXJ3aXNlLCByZWplY3RzIHdpdGggdmFsaWRhdGlvbiBlcnJvci5cbiAgICovXG4gIHZlcmlmeVRva2VuKHRva2VuLCBsb2NhdGlvbiwgcHVibGljS2V5KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgbGV0IGkgPSAwO1xuICAgICAgY29uc3QgYnl0ZXMgPSBzdHJpbmdUb0J5dGVzKGF0b2IodG9rZW4pKTtcblxuICAgICAgLy8gUGFyc2UgdmVyc2lvbi5cbiAgICAgIGNvbnN0IHZlcnNpb24gPSBieXRlc1tpXTtcbiAgICAgIGlmICh2ZXJzaW9uICE9PSAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5yZWNvZ25pemVkIHRva2VuIHZlcnNpb246ICR7dmVyc2lvbn1gKTtcbiAgICAgIH1cbiAgICAgIGkgKz0gMTtcblxuICAgICAgLy8gUGFyc2UgY29uZmlnIGxlbmd0aC5cbiAgICAgIGNvbnN0IGxlbmd0aCA9IG5ldyBEYXRhVmlldyhieXRlcy5idWZmZXIpLmdldFVpbnQzMihpKTtcbiAgICAgIGkgKz0gNDsgLy8gTnVtYmVyIG9mIGJ5dGVzIGluIFVpbnQzMiBjb25maWcgbGVuZ3RoLlxuICAgICAgaWYgKGxlbmd0aCA+IGJ5dGVzLmxlbmd0aCAtIGkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmV4cGVjdGVkIGNvbmZpZyBsZW5ndGg6ICR7bGVuZ3RofWApO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXJzZSBjb25maWcgaXRzZWxmLlxuICAgICAgY29uc3QgY29uZmlnQnl0ZXMgPSBieXRlcy5zdWJhcnJheShpLCBpICsgbGVuZ3RoKTtcbiAgICAgIGkgKz0gbGVuZ3RoO1xuXG4gICAgICAvLyBQYXJzZSB1bnNpZ25lZCBkYXRhIGFuZCBpdHMgc2lnbmF0dXJlLlxuICAgICAgY29uc3QgZGF0YSA9IGJ5dGVzLnN1YmFycmF5KDAsIGkpO1xuICAgICAgY29uc3Qgc2lnbmF0dXJlID0gYnl0ZXMuc3ViYXJyYXkoaSk7XG5cbiAgICAgIHJlc29sdmUodGhpcy52ZXJpZnlfKHNpZ25hdHVyZSwgZGF0YSwgcHVibGljS2V5KS50aGVuKHZlcmlmaWVkID0+IHtcbiAgICAgICAgaWYgKCF2ZXJpZmllZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHZlcmlmeSB0b2tlbiBzaWduYXR1cmUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29udmVydCBjb25maWcgZnJvbSBieXRlcyB0byBKUyBvYmplY3QuXG4gICAgICAgIGNvbnN0IGNvbmZpZ1N0ciA9IGJ5dGVzVG9TdHJpbmcoY29uZmlnQnl0ZXMpO1xuICAgICAgICBjb25zdCBjb25maWcgPSBwYXJzZUpzb24oY29uZmlnU3RyKTtcblxuICAgICAgICAvLyBDaGVjayB0b2tlbiBleHBlcmltZW50IG9yaWdpbiBhZ2FpbnN0IGBsb2NhdGlvbmAuXG4gICAgICAgIGNvbnN0IGFwcHJvdmVkT3JpZ2luID0gcGFyc2VVcmwoY29uZmlnWydvcmlnaW4nXSkub3JpZ2luO1xuICAgICAgICBjb25zdCBzb3VyY2VPcmlnaW4gPSBnZXRTb3VyY2VPcmlnaW4obG9jYXRpb24pO1xuICAgICAgICBpZiAoYXBwcm92ZWRPcmlnaW4gIT09IHNvdXJjZU9yaWdpbikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29uZmlnIG9yaWdpbiAoJHthcHByb3ZlZE9yaWdpbn0pIGRvZXMgbm90IG1hdGNoIGAgK1xuICAgICAgICAgICAgICBgd2luZG93ICgke3NvdXJjZU9yaWdpbn0pLmApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgdG9rZW4gZXhwaXJhdGlvbiBkYXRlLlxuICAgICAgICBjb25zdCBleHBlcmltZW50SWQgPSBjb25maWdbJ2V4cGVyaW1lbnQnXTtcbiAgICAgICAgY29uc3QgZXhwaXJhdGlvbiA9IGNvbmZpZ1snZXhwaXJhdGlvbiddO1xuICAgICAgICBpZiAoZXhwaXJhdGlvbiA+PSBEYXRlLm5vdygpKSB7XG4gICAgICAgICAgcmV0dXJuIGV4cGVyaW1lbnRJZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVyaW1lbnQgXCIke2V4cGVyaW1lbnRJZH1cIiBoYXMgZXhwaXJlZC5gKTtcbiAgICAgICAgfVxuICAgICAgfSkpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBieXRlIGFycmF5OiAodmVyc2lvbiArIGNvbmZpZy5sZW5ndGggKyBjb25maWcpXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2ZXJzaW9uXG4gICAqIEBwYXJhbSB7IVVpbnQ4QXJyYXl9IGNvbmZpZ1xuICAgKiBAcmV0dXJuIHshVWludDhBcnJheX1cbiAgICovXG4gIHByZXBlbmRfKHZlcnNpb24sIGNvbmZpZykge1xuICAgIGNvbnN0IGRhdGEgPSBuZXcgVWludDhBcnJheShjb25maWcubGVuZ3RoICsgNSk7XG4gICAgZGF0YVswXSA9IHZlcnNpb247XG4gICAgLy8gSW5zZXJ0IGNvbmZpZyBsZW5ndGggaW50byBieXRlcyAxIHRocm91Z2ggNS5cbiAgICBuZXcgRGF0YVZpZXcoZGF0YS5idWZmZXIpLnNldFVpbnQzMigxLCBjb25maWcubGVuZ3RoLCBmYWxzZSk7XG4gICAgZGF0YS5zZXQoY29uZmlnLCA1KTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGJhc2U2NChkYXRhICsgc2lnbmF0dXJlKS5cbiAgICogQHBhcmFtIHshVWludDhBcnJheX0gZGF0YVxuICAgKiBAcGFyYW0geyFVaW50OEFycmF5fSBzaWduYXR1cmVcbiAgICogQHJldHVybiB7c3RyaW5nfVxuICAgKi9cbiAgYXBwZW5kXyhkYXRhLCBzaWduYXR1cmUpIHtcbiAgICBjb25zdCBzdHJpbmcgPSBieXRlc1RvU3RyaW5nKGRhdGEpICsgYnl0ZXNUb1N0cmluZyhzaWduYXR1cmUpO1xuICAgIHJldHVybiBidG9hKHN0cmluZyk7XG4gIH1cblxuICAvKipcbiAgICogV3JhcHMgU3VidGxlQ3J5cHRvLnNpZ24oKS5cbiAgICogQHBhcmFtIHshVWludDhBcnJheX0gZGF0YVxuICAgKiBAcGFyYW0geyF3ZWJDcnlwdG8uQ3J5cHRvS2V5fSBwcml2YXRlS2V5XG4gICAqIEByZXR1cm4geyFQcm9taXNlfVxuICAgKi9cbiAgc2lnbl8oZGF0YSwgcHJpdmF0ZUtleSkge1xuICAgIHJldHVybiB0aGlzLmNyeXB0b18uc3VidGxlLnNpZ24odGhpcy5jcnlwdG9fLnBrY3NBbGdvLCBwcml2YXRlS2V5LCBkYXRhKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXcmFwcyBTdWJ0bGVDcnlwdG8udmVyaWZ5KCkuXG4gICAqIEBwYXJhbSB7IVVpbnQ4QXJyYXl9IHNpZ25hdHVyZVxuICAgKiBAcGFyYW0geyFVaW50OEFycmF5fSBkYXRhXG4gICAqIEBwYXJhbSB7IXdlYkNyeXB0by5DcnlwdG9LZXl9IHB1YmxpY0tleVxuICAgKiBAcmV0dXJuIHshUHJvbWlzZTxib29sZWFuPn1cbiAgICovXG4gIHZlcmlmeV8oc2lnbmF0dXJlLCBkYXRhLCBwdWJsaWNLZXkpIHtcbiAgICByZXR1cm4gdGhpcy5jcnlwdG9fLnZlcmlmeVBrY3MocHVibGljS2V5LCBzaWduYXR1cmUsIGRhdGEpO1xuICB9XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtTZXJ2aWNlc30gZnJvbSAnLi9zZXJ2aWNlcyc7XG5cblxuLyoqXG4gKiBQYXNzIGNsYXNzIGhlbHBzIHRvIG1hbmFnZSBzaW5nbGUtcGFzcyBwcm9jZXNzLiBBIHBhc3MgaXMgc2NoZWR1bGVkIHVzaW5nXG4gKiBkZWxheSBtZXRob2QuIE9ubHkgb25lIHBhc3MgY2FuIGJlIHBlbmRpbmcgYXQgYSB0aW1lLiBJZiBubyBwYXNzIGlzIHBlbmRpbmdcbiAqIHRoZSBwcm9jZXNzIGlzIGNvbnNpZGVyZWQgdG8gYmUgXCJpZGxlXCIuXG4gKi9cbmV4cG9ydCBjbGFzcyBQYXNzIHtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBQYXNzIGluc3RhbmNlLlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGhhbmRsZXIgSGFuZGxlciB0byBiZSBleGVjdXRlZCB3aGVuIHBhc3MgaXMgdHJpZ2dlcmVkLlxuICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9kZWZhdWx0RGVsYXkgRGVmYXVsdCBkZWxheSB0byBiZSB1c2VkIHdoZW4gc2NoZWR1bGVcbiAgICogICBpcyBjYWxsZWQgd2l0aG91dCBvbmUuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih3aW4sIGhhbmRsZXIsIG9wdF9kZWZhdWx0RGVsYXkpIHtcbiAgICB0aGlzLnRpbWVyXyA9IFNlcnZpY2VzLnRpbWVyRm9yKHdpbik7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHtmdW5jdGlvbigpfSAqL1xuICAgIHRoaXMuaGFuZGxlcl8gPSBoYW5kbGVyO1xuXG4gICAgLyoqIEBwcml2YXRlIEBjb25zdCB7bnVtYmVyfSAqL1xuICAgIHRoaXMuZGVmYXVsdERlbGF5XyA9IG9wdF9kZWZhdWx0RGVsYXkgfHwgMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfHN0cmluZ30gKi9cbiAgICB0aGlzLnNjaGVkdWxlZF8gPSAtMTtcblxuICAgIC8qKiBAcHJpdmF0ZSB7bnVtYmVyfSAqL1xuICAgIHRoaXMubmV4dFRpbWVfID0gMDtcblxuICAgIC8qKiBAcHJpdmF0ZSB7Ym9vbGVhbn0gKi9cbiAgICB0aGlzLnJ1bm5pbmdfID0gZmFsc2U7XG5cbiAgICAvKiogQHByaXZhdGUgQGNvbnN0IHshRnVuY3Rpb259ICovXG4gICAgdGhpcy5ib3VuZFBhc3NfID0gKCkgPT4gdGhpcy5wYXNzXygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IGEgcGFzcyBpcyBjdXJyZW50bHkgcGVuZGluZy5cbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzUGVuZGluZygpIHtcbiAgICByZXR1cm4gdGhpcy5zY2hlZHVsZWRfICE9IC0xO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWVzIHRvIHNjaGVkdWxlIGEgbmV3IHBhc3Mgb3B0aW9uYWxseSB3aXRoIHNwZWNpZmllZCBkZWxheS4gSWYgdGhlIG5ld1xuICAgKiByZXF1ZXN0ZWQgcGFzcyBpcyByZXF1ZXN0ZWQgYmVmb3JlIHRoZSBwZW5kaW5nIHBhc3MsIHRoZSBwZW5kaW5nIHBhc3MgaXNcbiAgICogY2FuY2VsZWQuIElmIHRoZSBuZXcgcGFzcyBpcyByZXF1ZXN0ZWQgYWZ0ZXIgdGhlIHBlbmRpbmcgcGFzcywgdGhlIG5ld2x5XG4gICAqIHJlcXVlc3RlZCBwYXNzIGlzIGlnbm9yZWQuXG4gICAqXG4gICAqIFJldHVybnMge0Bjb2RlIHRydWV9IGlmIHRoZSBwYXNzIGhhcyBiZWVuIHNjaGVkdWxlZCBhbmQge0Bjb2RlIGZhbHNlfSBpZlxuICAgKiBpZ25vcmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcj19IG9wdF9kZWxheSBEZWxheSB0byBzY2hlZHVsZSB0aGUgcGFzcy4gSWYgbm90IHNwZWNpZmllZFxuICAgKiAgIHRoZSBkZWZhdWx0IGRlbGF5IGlzIHVzZWQsIGZhbGxpbmcgYmFjayB0byAwLlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgc2NoZWR1bGUob3B0X2RlbGF5KSB7XG4gICAgbGV0IGRlbGF5ID0gb3B0X2RlbGF5IHx8IHRoaXMuZGVmYXVsdERlbGF5XztcbiAgICBpZiAodGhpcy5ydW5uaW5nXyAmJiBkZWxheSA8IDEwKSB7XG4gICAgICAvLyBJZiB3ZSBnZXQgY2FsbGVkIHJlY3Vyc2l2ZWx5LCB3YWl0IGF0IGxlYXN0IDEwbXMgZm9yIHRoZSBuZXh0XG4gICAgICAvLyBleGVjdXRpb24uXG4gICAgICBkZWxheSA9IDEwO1xuICAgIH1cblxuICAgIGNvbnN0IG5leHRUaW1lID0gRGF0ZS5ub3coKSArIGRlbGF5O1xuICAgIC8vIFNjaGVkdWxlIGFuZXcgaWYgbm90aGluZyBpcyBzY2hlZHVsZWQgY3VycmVudGx5IG9yIGlmIHRoZSBuZXcgdGltZSBpc1xuICAgIC8vIHNvb25lciB0aGVuIHByZXZpb3VzbHkgcmVxdWVzdGVkLlxuICAgIGlmICghdGhpcy5pc1BlbmRpbmcoKSB8fCBuZXh0VGltZSAtIHRoaXMubmV4dFRpbWVfIDwgLTEwKSB7XG4gICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgdGhpcy5uZXh0VGltZV8gPSBuZXh0VGltZTtcbiAgICAgIHRoaXMuc2NoZWR1bGVkXyA9IHRoaXMudGltZXJfLmRlbGF5KHRoaXMuYm91bmRQYXNzXywgZGVsYXkpO1xuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwYXNzXygpIHtcbiAgICB0aGlzLnNjaGVkdWxlZF8gPSAtMTtcbiAgICB0aGlzLm5leHRUaW1lXyA9IDA7XG4gICAgdGhpcy5ydW5uaW5nXyA9IHRydWU7XG4gICAgdGhpcy5oYW5kbGVyXygpO1xuICAgIHRoaXMucnVubmluZ18gPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIHRoZSBwZW5kaW5nIHBhc3MgaWYgYW55LlxuICAgKi9cbiAgY2FuY2VsKCkge1xuICAgIGlmICh0aGlzLmlzUGVuZGluZygpKSB7XG4gICAgICB0aGlzLnRpbWVyXy5jYW5jZWwodGhpcy5zY2hlZHVsZWRfKTtcbiAgICAgIHRoaXMuc2NoZWR1bGVkXyA9IC0xO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbmltcG9ydCB7Z2V0TW9kZX0gZnJvbSAnLi9tb2RlJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsQXJyYXlJbmNsdWRlc30gZnJvbSAnLi9wb2x5ZmlsbHMvYXJyYXktaW5jbHVkZXMnO1xuaW1wb3J0IHtcbiAgaW5zdGFsbCBhcyBpbnN0YWxsRE9NVG9rZW5MaXN0VG9nZ2xlLFxufSBmcm9tICcuL3BvbHlmaWxscy9kb210b2tlbmxpc3QtdG9nZ2xlJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsRG9jQ29udGFpbnN9IGZyb20gJy4vcG9seWZpbGxzL2RvY3VtZW50LWNvbnRhaW5zJztcbmltcG9ydCB7aW5zdGFsbCBhcyBpbnN0YWxsTWF0aFNpZ259IGZyb20gJy4vcG9seWZpbGxzL21hdGgtc2lnbic7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbE9iamVjdEFzc2lnbn0gZnJvbSAnLi9wb2x5ZmlsbHMvb2JqZWN0LWFzc2lnbic7XG5pbXBvcnQge2luc3RhbGwgYXMgaW5zdGFsbFByb21pc2V9IGZyb20gJy4vcG9seWZpbGxzL3Byb21pc2UnO1xuLy8gSW1wb3J0aW5nIHRoZSBkb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50IG1vZHVsZSBoYXMgdGhlIHNpZGUgZWZmZWN0XG4vLyBvZiBpbnN0YWxsaW5nIHRoZSBjdXN0b20gZWxlbWVudHMgcG9seWZpbGwgaWYgbmVjZXNzYXJ5LlxuaW1wb3J0IGluc3RhbGxDdXN0b21FbGVtZW50cyBmcm9tXG4gICdkb2N1bWVudC1yZWdpc3Rlci1lbGVtZW50L2J1aWxkL2RvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnQubm9kZSc7XG5cbi8qKlxuICBPbmx5IGluc3RhbGwgaW4gY2xvc3VyZSBiaW5hcnkgYW5kIG5vdCBpbiBiYWJlbC9icm93c2VyaWZ5IGJpbmFyeSwgc2luY2UgaW5cbiAgdGhlIGNsb3N1cmUgYmluYXJ5IHdlIHN0cmlwIG91dCB0aGUgYGRvY3VtZW50LXJlZ2lzdGVyLWVsZW1lbnRgIGluc3RhbGwgc2lkZVxuICBlZmZlY3Qgc28gd2UgY2FuIHRyZWUgc2hha2UgdGhlIGRlcGVuZGVuY3kgY29ycmVjdGx5IGFuZCB3ZSBoYXZlIHRvIG1ha2VcbiAgc3VyZSB0byBub3QgYGluc3RhbGxgIGl0IGR1cmluZyBkZXYgc2luY2UgdGhlIGBpbnN0YWxsYCBpcyBkb25lIGFzIGEgc2lkZVxuICBlZmZlY3QgaW4gaW1wb3J0aW5nIHRoZSBtb2R1bGUuXG4qL1xuaWYgKCFnZXRNb2RlKCkubG9jYWxEZXYpIHtcbiAgaW5zdGFsbEN1c3RvbUVsZW1lbnRzKHNlbGYsICdhdXRvJyk7XG59XG5pbnN0YWxsRE9NVG9rZW5MaXN0VG9nZ2xlKHNlbGYpO1xuaW5zdGFsbE1hdGhTaWduKHNlbGYpO1xuaW5zdGFsbE9iamVjdEFzc2lnbihzZWxmKTtcbmluc3RhbGxQcm9taXNlKHNlbGYpO1xuaW5zdGFsbERvY0NvbnRhaW5zKHNlbGYpO1xuaW5zdGFsbEFycmF5SW5jbHVkZXMoc2VsZik7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZWxlbWVudCBpcyBpbiB0aGUgYXJyYXkgYW5kIGZhbHNlIG90aGVyd2lzZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge251bWJlcj19IG9wdF9mcm9tSW5kZXhcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGhpcyB7QXJyYXl9XG4gKi9cbmZ1bmN0aW9uIGluY2x1ZGVzKHZhbHVlLCBvcHRfZnJvbUluZGV4KSB7XG4gIGNvbnN0IGZyb21JbmRleCA9IG9wdF9mcm9tSW5kZXggfHwgMDtcbiAgY29uc3QgbGVuID0gdGhpcy5sZW5ndGg7XG4gIGxldCBpID0gZnJvbUluZGV4ID49IDAgPyBmcm9tSW5kZXggOiBNYXRoLm1heChsZW4gKyBmcm9tSW5kZXgsIDApO1xuICBmb3IgKDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgY29uc3Qgb3RoZXIgPSB0aGlzW2ldO1xuICAgIC8vIElmIHZhbHVlIGhhcyBiZWVuIGZvdW5kIE9SICh2YWx1ZSBpcyBOYU4gQU5EIG90aGVyIGlzIE5hTilcbiAgICAvKmVzbGludCBcIm5vLXNlbGYtY29tcGFyZVwiOiAwKi9cbiAgICBpZiAob3RoZXIgPT09IHZhbHVlIHx8ICh2YWx1ZSAhPT0gdmFsdWUgJiYgb3RoZXIgIT09IG90aGVyKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4qIFNldHMgdGhlIEFycmF5LmNvbnRhaW5zIHBvbHlmaWxsIGlmIGl0IGRvZXMgbm90IGV4aXN0LlxuKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5BcnJheS5wcm90b3R5cGUuaW5jbHVkZXMpIHtcbiAgICB3aW4uT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5LnByb3RvdHlwZSwgJ2luY2x1ZGVzJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBpbmNsdWRlcyxcbiAgICB9KTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cblxuLyoqXG4gKiBQb2x5ZmlsbCBmb3IgYGRvY3VtZW50LmNvbnRhaW5zKClgIG1ldGhvZC4gTm90aWNlIHRoYXQgYWNjb3JkaW5nIHRvIHNwZWNcbiAqIGBkb2N1bWVudC5jb250YWluc2AgaXMgaW5jbHVzaW9uYXJ5LlxuICogU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9Ob2RlL2NvbnRhaW5zXG4gKiBAcGFyYW0gez9Ob2RlfSBub2RlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICogQHRoaXMge05vZGV9XG4gKi9cbmZ1bmN0aW9uIGRvY3VtZW50Q29udGFpbnNQb2x5ZmlsbChub2RlKSB7XG4gIC8vIFBlciBzcGVjLCBcImNvbnRhaW5zXCIgbWV0aG9kIGlzIGluY2x1c2lvbmFyeVxuICAvLyBpLmUuIGBub2RlLmNvbnRhaW5zKG5vZGUpID09IHRydWVgLiBIb3dldmVyLCB3ZSBzdGlsbCBuZWVkIHRvIHRlc3RcbiAgLy8gZXF1YWxpdHkgdG8gdGhlIGRvY3VtZW50IGl0c2VsZi5cbiAgcmV0dXJuIG5vZGUgPT0gdGhpcyB8fCB0aGlzLmRvY3VtZW50RWxlbWVudC5jb250YWlucyhub2RlKTtcbn1cblxuXG4vKipcbiAqIFBvbHlmaWxscyBgSFRNTERvY3VtZW50LmNvbnRhaW5zYCBBUEkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgLy8gSFRNTERvY3VtZW50IGlzIHVuZGVmaW5lZCBpbiBJbnRlcm5ldCBFeHBsb3JlciAxMCwgYnV0IGl0IGhhcyBEb2N1bWVudCxcbiAgLy8gc28gd2UgdXNlIHRoYXQgYXMgYSBmYWxsYmFjay5cbiAgY29uc3QgZG9jdW1lbnRDbGFzcyA9IHdpbi5IVE1MRG9jdW1lbnQgfHwgd2luLkRvY3VtZW50O1xuICBpZiAoIWRvY3VtZW50Q2xhc3MucHJvdG90eXBlLmNvbnRhaW5zKSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudENsYXNzLnByb3RvdHlwZSwgJ2NvbnRhaW5zJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBkb2N1bWVudENvbnRhaW5zUG9seWZpbGwsXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogUG9seWZpbGwgZm9yIGBET01Ub2tlbkxpc3QucHJvdG90eXBlLnRvZ2dsZSh0b2tlbiwgb3B0X2ZvcmNlKWAgbWV0aG9kLlxuICogVGhpcyBpcyBzcGVjaWFsbHkgaW1wb3J0YW50IGJlY2F1c2UgSUUgZG9lcyBub3Qgc3VwcG9ydCBgb3B0X2ZvcmNlYCBhdHRyaWJ1dGUuXG4gKiBTZWUgaHR0cHM6Ly9nb28uZ2wvaGdLTllZIGZvciBkZXRhaWxzLlxuICogQHBhcmFtIHtzdHJpbmd9IHRva2VuXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZm9yY2VcbiAqIEB0aGlzIHtET01Ub2tlbkxpc3R9XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBkb21Ub2tlbkxpc3RUb2dnbGVQb2x5ZmlsbCh0b2tlbiwgb3B0X2ZvcmNlKSB7XG4gIGNvbnN0IHJlbW92ZSA9IG9wdF9mb3JjZSA9PT0gdW5kZWZpbmVkID8gdGhpcy5jb250YWlucyh0b2tlbikgOiAhb3B0X2ZvcmNlO1xuICBpZiAocmVtb3ZlKSB7XG4gICAgdGhpcy5yZW1vdmUodG9rZW4pO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmFkZCh0b2tlbik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxuXG4vKipcbiAqIFBvbHlmaWxscyBgRE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGVgIEFQSSBpbiBJRS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoaXNJZSh3aW4pICYmIHdpbi5ET01Ub2tlbkxpc3QpIHtcbiAgICB3aW4uT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbi5ET01Ub2tlbkxpc3QucHJvdG90eXBlLCAndG9nZ2xlJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBkb21Ub2tlbkxpc3RUb2dnbGVQb2x5ZmlsbCxcbiAgICB9KTtcbiAgfVxufVxuXG5cbi8qKlxuICogV2hldGhlciB0aGUgY3VycmVudCBicm93c2VyIGlzIGEgSUUgYnJvd3Nlci5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5mdW5jdGlvbiBpc0llKHdpbikge1xuICByZXR1cm4gL1RyaWRlbnR8TVNJRXxJRU1vYmlsZS9pLnRlc3Qod2luLm5hdmlnYXRvci51c2VyQWdlbnQpO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogUGFyc2VzIHRoZSBudW1iZXIgeCBhbmQgcmV0dXJucyBpdHMgc2lnbi4gRm9yIHBvc2l0aXZlIHggcmV0dXJucyAxLCBmb3JcbiAqIG5lZ2F0aXZlLCAtMS4gRm9yIDAgYW5kIC0wLCByZXR1cm5zIDAgYW5kIC0wIHJlc3BlY3RpdmVseS4gRm9yIGFueSBudW1iZXJcbiAqIHRoYXQgcGFyc2VzIHRvIE5hTiwgcmV0dXJucyBOYU4uXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHhcbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzaWduKHgpIHtcbiAgeCA9IE51bWJlcih4KTtcblxuICAvLyBJZiB4IGlzIDAsIC0wLCBvciBOYU4sIHJldHVybiBpdC5cbiAgaWYgKCF4KSB7XG4gICAgcmV0dXJuIHg7XG4gIH1cblxuICByZXR1cm4geCA+IDAgPyAxIDogLTE7XG59XG5cblxuLyoqXG4gKiBTZXRzIHRoZSBNYXRoLnNpZ24gcG9seWZpbGwgaWYgaXQgZG9lcyBub3QgZXhpc3QuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5zdGFsbCh3aW4pIHtcbiAgaWYgKCF3aW4uTWF0aC5zaWduKSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4uTWF0aCwgJ3NpZ24nLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgdmFsdWU6IHNpZ24sXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5jb25zdCBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQ29waWVzIHZhbHVlcyBvZiBhbGwgZW51bWVyYWJsZSBvd24gcHJvcGVydGllcyBmcm9tIG9uZSBvciBtb3JlIHNvdXJjZVxuICogb2JqZWN0cyAocHJvdmlkZWQgYXMgZXh0ZW5kZWQgYXJndW1lbnRzIHRvIHRoZSBmdW5jdGlvbikgdG8gYSB0YXJnZXQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7IU9iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0gey4uLk9iamVjdH0gdmFyX2FyZ3NcbiAqIEByZXR1cm5zIHshT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzaWduKHRhcmdldCwgdmFyX2FyZ3MpIHtcbiAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0Jyk7XG4gIH1cblxuICBjb25zdCBvdXRwdXQgPSBPYmplY3QodGFyZ2V0KTtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG4gICAgaWYgKHNvdXJjZSAhPSBudWxsKSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7XG4gICAgICAgICAgb3V0cHV0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0cHV0O1xufVxuXG5cbi8qKlxuICogU2V0cyB0aGUgT2JqZWN0LmFzc2lnbiBwb2x5ZmlsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5PYmplY3QuYXNzaWduKSB7XG4gICAgd2luLk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4uT2JqZWN0LCAnYXNzaWduJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIHZhbHVlOiBhc3NpZ24sXG4gICAgfSk7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbmltcG9ydCAqIGFzIFByb21pc2UgZnJvbSAncHJvbWlzZS1wanMvcHJvbWlzZSc7XG5cbi8qKlxuICogU2V0cyB0aGUgUHJvbWlzZSBwb2x5ZmlsbCBpZiBpdCBkb2VzIG5vdCBleGlzdC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICBpZiAoIXdpbi5Qcm9taXNlKSB7XG4gICAgd2luLlByb21pc2UgPSAvKiogQHR5cGUgez99ICovIChQcm9taXNlKTtcbiAgICAvLyBJbiBiYWJlbCB0aGUgKiBleHBvcnQgaXMgYW4gT2JqZWN0IHdpdGggYSBkZWZhdWx0IHByb3BlcnR5LlxuICAgIC8vIEluIGNsb3N1cmUgY29tcGlsZXIgaXQgaXMgdGhlIFByb21pc2UgZnVuY3Rpb24gaXRzZWxmLlxuICAgIGlmIChQcm9taXNlLmRlZmF1bHQpIHtcbiAgICAgIHdpbi5Qcm9taXNlID0gUHJvbWlzZS5kZWZhdWx0O1xuICAgIH1cbiAgICAvLyBXZSBjb3B5IHRoZSBpbmRpdmlkdWFsIHN0YXRpYyBtZXRob2RzLCBiZWNhdXNlIGNsb3N1cmVcbiAgICAvLyBjb21waWxlciBmbGF0dGVucyB0aGUgcG9seWZpbGwgbmFtZXNwYWNlLlxuICAgIHdpbi5Qcm9taXNlLnJlc29sdmUgPSBQcm9taXNlLnJlc29sdmU7XG4gICAgd2luLlByb21pc2UucmVqZWN0ID0gUHJvbWlzZS5yZWplY3Q7XG4gICAgd2luLlByb21pc2UuYWxsID0gUHJvbWlzZS5hbGw7XG4gICAgd2luLlByb21pc2UucmFjZSA9IFByb21pc2UucmFjZTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGZpbGVvdmVydmlldyBSZWdpc3RyYXRpb24gYW5kIGdldHRlciBmdW5jdGlvbnMgZm9yIEFNUCBzZXJ2aWNlcy5cbiAqXG4gKiBJbnZhcmlhbnQ6IFNlcnZpY2UgZ2V0dGVycyBuZXZlciByZXR1cm4gbnVsbCBmb3IgcmVnaXN0ZXJlZCBzZXJ2aWNlcy5cbiAqL1xuXG4vLyBzcmMvcG9seWZpbGxzLmpzIG11c3QgYmUgdGhlIGZpcnN0IGltcG9ydC5cbmltcG9ydCAnLi9wb2x5ZmlsbHMnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHNvcnQtaW1wb3J0cy1lczYtYXV0b2ZpeC9zb3J0LWltcG9ydHMtZXM2XG5cbmltcG9ydCB7ZGV2fSBmcm9tICcuL2xvZyc7XG5pbXBvcnQge3RvV2lufSBmcm9tICcuL3R5cGVzJztcblxuXG4vKipcbiAqIEhvbGRzIGluZm8gYWJvdXQgYSBzZXJ2aWNlLlxuICogLSBvYmo6IEFjdHVhbCBzZXJ2aWNlIGltcGxlbWVudGF0aW9uIHdoZW4gYXZhaWxhYmxlLlxuICogLSBwcm9taXNlOiBQcm9taXNlIGZvciB0aGUgb2JqLlxuICogLSByZXNvbHZlOiBGdW5jdGlvbiB0byByZXNvbHZlIHRoZSBwcm9taXNlIHdpdGggdGhlIG9iamVjdC5cbiAqIC0gY29udGV4dDogQXJndW1lbnQgZm9yIGN0b3IsIGVpdGhlciBhIHdpbmRvdyBvciBhbiBhbXBkb2MuXG4gKiAtIGN0b3I6IEZ1bmN0aW9uIHRoYXQgY29uc3RydWN0cyBhbmQgcmV0dXJucyB0aGUgc2VydmljZS5cbiAqIEB0eXBlZGVmIHt7XG4gKiAgIG9iajogKD9PYmplY3QpLFxuICogICBwcm9taXNlOiAoP1Byb21pc2UpLFxuICogICByZXNvbHZlOiAoP2Z1bmN0aW9uKCFPYmplY3QpKSxcbiAqICAgY29udGV4dDogKD9XaW5kb3d8Py4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2MpLFxuICogICBjdG9yOiAoP2Z1bmN0aW9uKG5ldzpPYmplY3QsICFXaW5kb3cpfFxuICogICAgICAgICAgP2Z1bmN0aW9uKG5ldzpPYmplY3QsICEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jKSksXG4gKiB9fVxuICovXG5sZXQgU2VydmljZUhvbGRlckRlZjtcblxuXG4vKipcbiAqIFRoaXMgaW50ZXJmYWNlIHByb3ZpZGVzIGEgYGRpc3Bvc2VgIG1ldGhvZCB0aGF0IHdpbGwgYmUgY2FsbGVkIGJ5XG4gKiBydW50aW1lIHdoZW4gYSBzZXJ2aWNlIG5lZWRzIHRvIGJlIGRpc3Bvc2VkIG9mLlxuICogQGludGVyZmFjZVxuICovXG5leHBvcnQgY2xhc3MgRGlzcG9zYWJsZSB7XG5cbiAgLyoqXG4gICAqIEluc3RydWN0cyB0aGUgc2VydmljZSB0byByZWxlYXNlIGFueSByZXNvdXJjZXMgaXQgbWlnaHQgYmUgaG9sZGluZy4gQ2FuXG4gICAqIGJlIGNhbGxlZCBvbmx5IG9uY2UgaW4gdGhlIGxpZmVjeWNsZSBvZiBhIHNlcnZpY2UuXG4gICAqL1xuICBkaXNwb3NlKCkge31cbn1cblxuXG4vKipcbiAqIFRoaXMgaW50ZXJmYWNlIHByb3ZpZGVzIGEgYGFkb3B0RW1iZWRXaW5kb3dgIG1ldGhvZCB0aGF0IHdpbGwgYmUgY2FsbGVkIGJ5XG4gKiBydW50aW1lIGZvciBhIG5ldyBlbWJlZCB3aW5kb3cuXG4gKiBAaW50ZXJmYWNlXG4gKi9cbmV4cG9ydCBjbGFzcyBFbWJlZGRhYmxlU2VydmljZSB7XG5cbiAgLyoqXG4gICAqIEluc3RydWN0cyB0aGUgc2VydmljZSB0byBhZG9wdCB0aGUgZW1iZWQgd2luZG93IGFuZCBhZGQgYW55IG5lY2Vzc2FyeVxuICAgKiBsaXN0ZW5lcnMgYW5kIHJlc291cmNlcy5cbiAgICogQHBhcmFtIHshV2luZG93fSB1bnVzZWRFbWJlZFdpblxuICAgKi9cbiAgYWRvcHRFbWJlZFdpbmRvdyh1bnVzZWRFbWJlZFdpbikge31cbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBzZXJ2aWNlIHdpdGggdGhlIGdpdmVuIGlkLiBBc3N1bWVzIHRoYXQgaXQgaGFzIGJlZW4gcmVnaXN0ZXJlZFxuICogYWxyZWFkeS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWRcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9mYWxsYmFja1RvVG9wV2luXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSBzZXJ2aWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXhpc3RpbmdTZXJ2aWNlSW5FbWJlZFNjb3BlKHdpbiwgaWQsIG9wdF9mYWxsYmFja1RvVG9wV2luKSB7XG4gIC8vIEZpcnN0LCB0cnkgdG8gcmVzb2x2ZSB2aWEgbG9jYWwgKGVtYmVkKSB3aW5kb3cuXG4gIGNvbnN0IGxvY2FsID0gZ2V0TG9jYWxFeGlzdGluZ1NlcnZpY2VGb3JFbWJlZFdpbk9yTnVsbCh3aW4sIGlkKTtcbiAgaWYgKGxvY2FsKSB7XG4gICAgcmV0dXJuIGxvY2FsO1xuICB9XG4gIGlmIChvcHRfZmFsbGJhY2tUb1RvcFdpbikge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlKHdpbiwgaWQpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZXJ2aWNlIHdpdGggdGhlIGdpdmVuIGlkLiBBc3N1bWVzIHRoYXQgaXQgaGFzIGJlZW4gY29uc3RydWN0ZWRcbiAqIGFscmVhZHkuXG4gKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2ZhbGxiYWNrVG9Ub3BXaW5cbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHNlcnZpY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRFeGlzdGluZ1NlcnZpY2VGb3JEb2NJbkVtYmVkU2NvcGUoXG4gIG5vZGVPckRvYywgaWQsIG9wdF9mYWxsYmFja1RvVG9wV2luKSB7XG4gIC8vIEZpcnN0LCB0cnkgdG8gcmVzb2x2ZSB2aWEgbG9jYWwgKGVtYmVkKSB3aW5kb3cuXG4gIGlmIChub2RlT3JEb2Mubm9kZVR5cGUpIHtcbiAgICAvLyBJZiBhIG5vZGUgaXMgcGFzc2VkLCB0cnkgdG8gcmVzb2x2ZSB2aWEgdGhpcyBub2RlLlxuICAgIGNvbnN0IHdpbiA9IHRvV2luKC8qKiBAdHlwZSB7IURvY3VtZW50fSAqLyAoXG4gICAgICBub2RlT3JEb2Mub3duZXJEb2N1bWVudCB8fCBub2RlT3JEb2MpLmRlZmF1bHRWaWV3KTtcbiAgICBjb25zdCBsb2NhbCA9IGdldExvY2FsRXhpc3RpbmdTZXJ2aWNlRm9yRW1iZWRXaW5Pck51bGwod2luLCBpZCk7XG4gICAgaWYgKGxvY2FsKSB7XG4gICAgICByZXR1cm4gbG9jYWw7XG4gICAgfVxuICB9XG4gIC8vIElmIGFuIGFtcGRvYyBpcyBwYXNzZWQgb3IgZmFsbGJhY2sgaXMgYWxsb3dlZCwgY29udGludWUgcmVzb2x2aW5nLlxuICBpZiAoIW5vZGVPckRvYy5ub2RlVHlwZSB8fCBvcHRfZmFsbGJhY2tUb1RvcFdpbikge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlRm9yRG9jKG5vZGVPckRvYywgaWQpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIEluc3RhbGxzIGEgc2VydmljZSBvdmVycmlkZSBvbiBhbXAtZG9jIGxldmVsLlxuICogQHBhcmFtIHshV2luZG93fSBlbWJlZFdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcGFyYW0geyFPYmplY3R9IHNlcnZpY2UgVGhlIHNlcnZpY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsU2VydmljZUluRW1iZWRTY29wZShlbWJlZFdpbiwgaWQsIHNlcnZpY2UpIHtcbiAgY29uc3QgdG9wV2luID0gZ2V0VG9wV2luZG93KGVtYmVkV2luKTtcbiAgZGV2KCkuYXNzZXJ0KGVtYmVkV2luICE9IHRvcFdpbixcbiAgICAgICdTZXJ2aWNlIG92ZXJyaWRlIGNhbiBvbmx5IGJlIGluc3RhbGxlZCBpbiBlbWJlZCB3aW5kb3c6ICVzJywgaWQpO1xuICBkZXYoKS5hc3NlcnQoIWdldExvY2FsRXhpc3RpbmdTZXJ2aWNlRm9yRW1iZWRXaW5Pck51bGwoZW1iZWRXaW4sIGlkKSxcbiAgICAgICdTZXJ2aWNlIG92ZXJyaWRlIGhhcyBhbHJlYWR5IGJlZW4gaW5zdGFsbGVkOiAlcycsIGlkKTtcbiAgcmVnaXN0ZXJTZXJ2aWNlSW50ZXJuYWwoZW1iZWRXaW4sIGVtYmVkV2luLCBpZCwgKCkgPT4gc2VydmljZSk7XG4gIGdldFNlcnZpY2VJbnRlcm5hbChlbWJlZFdpbiwgaWQpOyAvLyBGb3JjZSBzZXJ2aWNlIHRvIGJ1aWxkLlxufVxuXG4vKipcbiAqIEBwYXJhbSB7IVdpbmRvd30gZW1iZWRXaW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHJldHVybiB7P09iamVjdH1cbiAqL1xuZnVuY3Rpb24gZ2V0TG9jYWxFeGlzdGluZ1NlcnZpY2VGb3JFbWJlZFdpbk9yTnVsbChlbWJlZFdpbiwgaWQpIHtcbiAgLy8gTm90ZSB0aGF0IHRoaXMgbWV0aG9kIGN1cnJlbnRseSBvbmx5IHJlc29sdmVzIGFnYWluc3QgdGhlIGdpdmVuIHdpbmRvdy5cbiAgLy8gSXQgZG9lcyBub3QgdHJ5IHRvIGdvIGFsbCB0aGUgd2F5IHVwIHRoZSBwYXJlbnQgd2luZG93IGNoYWluLiBXZSBjYW4gY2hhbmdlXG4gIC8vIHRoaXMgaW4gdGhlIGZ1dHVyZSwgYnV0IGZvciBub3cgdGhpcyBnaXZlcyB1cyBhIGJldHRlciBwZXJmb3JtYW5jZS5cbiAgY29uc3QgdG9wV2luID0gZ2V0VG9wV2luZG93KGVtYmVkV2luKTtcbiAgaWYgKGVtYmVkV2luICE9IHRvcFdpbiAmJiBpc1NlcnZpY2VSZWdpc3RlcmVkKGVtYmVkV2luLCBpZCkpIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZUludGVybmFsKGVtYmVkV2luLCBpZCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSBzZXJ2aWNlIGdpdmVuIGEgY2xhc3MgdG8gYmUgdXNlZCBhcyBpbXBsZW1lbnRhdGlvbi5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpPYmplY3QsICFXaW5kb3cpfSBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luc3RhbnRpYXRlIFdoZXRoZXIgdG8gaW1tZWRpYXRlbHkgY3JlYXRlIHRoZSBzZXJ2aWNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNlcnZpY2VCdWlsZGVyKHdpbixcbiAgaWQsXG4gIGNvbnN0cnVjdG9yLFxuICBvcHRfaW5zdGFudGlhdGUpIHtcbiAgd2luID0gZ2V0VG9wV2luZG93KHdpbik7XG4gIHJlZ2lzdGVyU2VydmljZUludGVybmFsKHdpbiwgd2luLCBpZCwgY29uc3RydWN0b3IpO1xuICBpZiAob3B0X2luc3RhbnRpYXRlKSB7XG4gICAgZ2V0U2VydmljZUludGVybmFsKHdpbiwgaWQpO1xuICB9XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VydmljZSBhbmQgcmVnaXN0ZXJzIGl0IGdpdmVuIGEgY2xhc3MgdG8gYmUgdXNlZCBhc1xuICogaW1wbGVtZW50YXRpb24uXG4gKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3Ok9iamVjdCwgIS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2MpfSBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtib29sZWFuPX0gb3B0X2luc3RhbnRpYXRlIFdoZXRoZXIgdG8gaW1tZWRpYXRlbHkgY3JlYXRlIHRoZSBzZXJ2aWNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclNlcnZpY2VCdWlsZGVyRm9yRG9jKG5vZGVPckRvYyxcbiAgaWQsXG4gIGNvbnN0cnVjdG9yLFxuICBvcHRfaW5zdGFudGlhdGUpIHtcbiAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKG5vZGVPckRvYyk7XG4gIGNvbnN0IGhvbGRlciA9IGdldEFtcGRvY1NlcnZpY2VIb2xkZXIoYW1wZG9jKTtcbiAgcmVnaXN0ZXJTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBhbXBkb2MsIGlkLCBjb25zdHJ1Y3Rvcik7XG4gIGlmIChvcHRfaW5zdGFudGlhdGUpIHtcbiAgICBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBzZXJ2aWNlIGZvciB0aGUgZ2l2ZW4gaWQgYW5kIHdpbmRvdyAoYSBwZXItd2luZG93IHNpbmdsZXRvbikuXG4gKiBVc2VycyBzaG91bGQgdHlwaWNhbGx5IHdyYXAgdGhpcyBhcyBhIHNwZWNpYWwgcHVycG9zZSBmdW5jdGlvbiAoZS5nLlxuICogYFNlcnZpY2VzLnZzeW5jRm9yKHdpbilgKSBmb3IgdHlwZSBzYWZldHkgYW5kIGJlY2F1c2UgdGhlIGZhY3Rvcnkgc2hvdWxkIG5vdCBiZVxuICogcGFzc2VkIGFyb3VuZC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAdGVtcGxhdGUgVFxuICogQHJldHVybiB7VH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2Uod2luLCBpZCkge1xuICB3aW4gPSBnZXRUb3BXaW5kb3cod2luKTtcbiAgcmV0dXJuIGdldFNlcnZpY2VJbnRlcm5hbCh3aW4sIGlkKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhIHNlcnZpY2UgZm9yIHRoZSBnaXZlbiBpZCBhbmQgd2luZG93LiBBbHNvIGV4cGVjdHNcbiAqIGFuIGVsZW1lbnQgdGhhdCBoYXMgdGhlIGFjdHVhbCBpbXBsZW1lbnRhdGlvbi4gVGhlIHByb21pc2UgcmVzb2x2ZXMgd2hlblxuICogdGhlIGltcGxlbWVudGF0aW9uIGxvYWRlZC5cbiAqIFVzZXJzIHNob3VsZCB0eXBpY2FsbHkgd3JhcCB0aGlzIGFzIGEgc3BlY2lhbCBwdXJwb3NlIGZ1bmN0aW9uIChlLmcuXG4gKiBgU2VydmljZXMudnN5bmNGb3Iod2luKWApIGZvciB0eXBlIHNhZmV0eSBhbmQgYmVjYXVzZSB0aGUgZmFjdG9yeSBzaG91bGQgbm90IGJlXG4gKiBwYXNzZWQgYXJvdW5kLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBvZiB0aGUgc2VydmljZS5cbiAqIEByZXR1cm4geyFQcm9taXNlPCFPYmplY3Q+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VydmljZVByb21pc2Uod2luLCBpZCkge1xuICByZXR1cm4gZ2V0U2VydmljZVByb21pc2VJbnRlcm5hbCh3aW4sIGlkKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBzZXJ2aWNlIG9yIG51bGwgd2l0aCB0aGUgZ2l2ZW4gaWQuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHs/T2JqZWN0fSBUaGUgc2VydmljZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEV4aXN0aW5nU2VydmljZU9yTnVsbCh3aW4sIGlkKSB7XG4gIHdpbiA9IGdldFRvcFdpbmRvdyh3aW4pO1xuICBpZiAoaXNTZXJ2aWNlUmVnaXN0ZXJlZCh3aW4sIGlkKSkge1xuICAgIHJldHVybiBnZXRTZXJ2aWNlSW50ZXJuYWwod2luLCBpZCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuXG4vKipcbiAqIExpa2UgZ2V0U2VydmljZVByb21pc2UgYnV0IHJldHVybnMgbnVsbCBpZiB0aGUgc2VydmljZSB3YXMgbmV2ZXIgcmVnaXN0ZXJlZC5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHs/UHJvbWlzZTwhT2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsKHdpbiwgaWQpIHtcbiAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsSW50ZXJuYWwod2luLCBpZCk7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VydmljZSBmb3IgdGhlIGdpdmVuIGlkIGFuZCBhbXBkb2MgKGEgcGVyLWFtcGRvYyBzaW5nbGV0b24pLlxuICogRXhwZWN0cyBzZXJ2aWNlIGBpZGAgdG8gYmUgcmVnaXN0ZXJlZC5cbiAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHJldHVybiB7VH1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXJ2aWNlRm9yRG9jKG5vZGVPckRvYywgaWQpIHtcbiAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKG5vZGVPckRvYyk7XG4gIGNvbnN0IGhvbGRlciA9IGdldEFtcGRvY1NlcnZpY2VIb2xkZXIoYW1wZG9jKTtcbiAgcmV0dXJuIGdldFNlcnZpY2VJbnRlcm5hbChob2xkZXIsIGlkKTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciBhIHNlcnZpY2UgZm9yIHRoZSBnaXZlbiBpZCBhbmQgYW1wZG9jLiBBbHNvIGV4cGVjdHNcbiAqIGEgc2VydmljZSB0aGF0IGhhcyB0aGUgYWN0dWFsIGltcGxlbWVudGF0aW9uLiBUaGUgcHJvbWlzZSByZXNvbHZlcyB3aGVuXG4gKiB0aGUgaW1wbGVtZW50YXRpb24gbG9hZGVkLlxuICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHshUHJvbWlzZTwhT2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jKG5vZGVPckRvYywgaWQpIHtcbiAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlSW50ZXJuYWwoXG4gICAgICBnZXRBbXBkb2NTZXJ2aWNlSG9sZGVyKG5vZGVPckRvYyksIGlkKTtcbn1cblxuXG4vKipcbiAqIExpa2UgZ2V0U2VydmljZVByb21pc2VGb3JEb2MgYnV0IHJldHVybnMgbnVsbCBpZiB0aGUgc2VydmljZSB3YXMgbmV2ZXJcbiAqIHJlZ2lzdGVyZWQgZm9yIHRoaXMgYW1wZG9jLlxuICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHs/UHJvbWlzZTwhT2JqZWN0Pn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsRm9yRG9jKG5vZGVPckRvYywgaWQpIHtcbiAgcmV0dXJuIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsSW50ZXJuYWwoXG4gICAgICBnZXRBbXBkb2NTZXJ2aWNlSG9sZGVyKG5vZGVPckRvYyksIGlkKTtcbn1cblxuLyoqXG4gKiBTZXQgdGhlIHBhcmVudCBhbmQgdG9wIHdpbmRvd3Mgb24gYSBjaGlsZCB3aW5kb3cgKGZyaWVuZGx5IGlmcmFtZSkuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHshV2luZG93fSBwYXJlbnRXaW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFBhcmVudFdpbmRvdyh3aW4sIHBhcmVudFdpbikge1xuICB3aW4uX19BTVBfUEFSRU5UID0gcGFyZW50V2luO1xuICB3aW4uX19BTVBfVE9QID0gZ2V0VG9wV2luZG93KHBhcmVudFdpbik7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBwYXJlbnQgd2luZG93IGZvciBhIGNoaWxkIHdpbmRvdyAoZnJpZW5kbHkgaWZyYW1lKS5cbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcmV0dXJuIHshV2luZG93fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyZW50V2luZG93KHdpbikge1xuICByZXR1cm4gd2luLl9fQU1QX1BBUkVOVCB8fCB3aW47XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB0b3Agd2luZG93IHdoZXJlIEFNUCBSdW50aW1lIGlzIGluc3RhbGxlZCBmb3IgYSBjaGlsZCB3aW5kb3dcbiAqIChmcmllbmRseSBpZnJhbWUpLlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEByZXR1cm4geyFXaW5kb3d9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb3BXaW5kb3cod2luKSB7XG4gIHJldHVybiB3aW4uX19BTVBfVE9QIHx8IHdpbjtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBhcmVudCBcImZyaWVuZGx5XCIgaWZyYW1lIGlmIHRoZSBub2RlIGJlbG9uZ3MgdG8gYSBjaGlsZCB3aW5kb3cuXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gKiBAcGFyYW0geyFXaW5kb3d9IHRvcFdpblxuICogQHJldHVybiB7P0hUTUxJRnJhbWVFbGVtZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGFyZW50V2luZG93RnJhbWVFbGVtZW50KG5vZGUsIHRvcFdpbikge1xuICBjb25zdCBjaGlsZFdpbiA9IChub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSkuZGVmYXVsdFZpZXc7XG4gIGlmIChjaGlsZFdpbiAmJiBjaGlsZFdpbiAhPSB0b3BXaW4gJiYgZ2V0VG9wV2luZG93KGNoaWxkV2luKSA9PSB0b3BXaW4pIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7P0hUTUxJRnJhbWVFbGVtZW50fSAqLyAoY2hpbGRXaW4uZnJhbWVFbGVtZW50KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAvLyBJZ25vcmUgdGhlIGVycm9yLlxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbXBkb2Mobm9kZU9yRG9jKSB7XG4gIGlmIChub2RlT3JEb2Mubm9kZVR5cGUpIHtcbiAgICBjb25zdCB3aW4gPSB0b1dpbigvKiogQHR5cGUgeyFEb2N1bWVudH0gKi8gKFxuICAgICAgbm9kZU9yRG9jLm93bmVyRG9jdW1lbnQgfHwgbm9kZU9yRG9jKS5kZWZhdWx0Vmlldyk7XG4gICAgcmV0dXJuIGdldEFtcGRvY1NlcnZpY2Uod2luKS5nZXRBbXBEb2MoLyoqIEB0eXBlIHshTm9kZX0gKi8gKG5vZGVPckRvYykpO1xuICB9XG4gIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSAqLyAobm9kZU9yRG9jKTtcbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N8IVdpbmRvd31cbiAqL1xuZnVuY3Rpb24gZ2V0QW1wZG9jU2VydmljZUhvbGRlcihub2RlT3JEb2MpIHtcbiAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKG5vZGVPckRvYyk7XG4gIHJldHVybiBhbXBkb2MuaXNTaW5nbGVEb2MoKSA/IGFtcGRvYy53aW4gOiBhbXBkb2M7XG59XG5cblxuLyoqXG4gKiBUaGlzIGlzIGVzc2VudGlhbGx5IGEgZHVwbGljYXRlIG9mIGBhbXBkb2MuanNgLCBidXQgbmVjZXNzYXJ5IHRvIGF2b2lkXG4gKiBjaXJjdWxhciBkZXBlbmRlbmNpZXMuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2NTZXJ2aWNlfVxuICovXG5mdW5jdGlvbiBnZXRBbXBkb2NTZXJ2aWNlKHdpbikge1xuICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY1NlcnZpY2V9ICovIChcbiAgICBnZXRTZXJ2aWNlKHdpbiwgJ2FtcGRvYycpKTtcbn1cblxuXG4vKipcbiAqIEdldCBzZXJ2aWNlIGBpZGAgZnJvbSBgaG9sZGVyYC4gQXNzdW1lcyB0aGUgc2VydmljZVxuICogaGFzIGFscmVhZHkgYmVlbiByZWdpc3RlcmVkLlxuICogQHBhcmFtIHshT2JqZWN0fSBob2xkZXIgT2JqZWN0IGhvbGRpbmcgdGhlIHNlcnZpY2UgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAdGVtcGxhdGUgVFxuICovXG5mdW5jdGlvbiBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCkge1xuICBkZXYoKS5hc3NlcnQoaXNTZXJ2aWNlUmVnaXN0ZXJlZChob2xkZXIsIGlkKSxcbiAgICAgIGBFeHBlY3RlZCBzZXJ2aWNlICR7aWR9IHRvIGJlIHJlZ2lzdGVyZWRgKTtcbiAgY29uc3Qgc2VydmljZXMgPSBnZXRTZXJ2aWNlcyhob2xkZXIpO1xuICBjb25zdCBzID0gc2VydmljZXNbaWRdO1xuICBpZiAoIXMub2JqKSB7XG4gICAgZGV2KCkuYXNzZXJ0KHMuY3RvciwgYFNlcnZpY2UgJHtpZH0gcmVnaXN0ZXJlZCB3aXRob3V0IGN0b3Igbm9yIGltcGwuYCk7XG4gICAgZGV2KCkuYXNzZXJ0KHMuY29udGV4dCwgYFNlcnZpY2UgJHtpZH0gcmVnaXN0ZXJlZCB3aXRob3V0IGNvbnRleHQuYCk7XG4gICAgcy5vYmogPSBuZXcgcy5jdG9yKHMuY29udGV4dCk7XG4gICAgZGV2KCkuYXNzZXJ0KHMub2JqLCBgU2VydmljZSAke2lkfSBjb25zdHJ1Y3RlZCB0byBudWxsLmApO1xuICAgIHMuY3RvciA9IG51bGw7XG4gICAgcy5jb250ZXh0ID0gbnVsbDtcbiAgICAvLyBUaGUgc2VydmljZSBtYXkgaGF2ZSBiZWVuIHJlcXVlc3RlZCBhbHJlYWR5LCBpbiB3aGljaCBjYXNlIHdlIGhhdmUgYVxuICAgIC8vIHBlbmRpbmcgcHJvbWlzZSB3ZSBuZWVkIHRvIGZ1bGZpbGwuXG4gICAgaWYgKHMucmVzb2x2ZSkge1xuICAgICAgcy5yZXNvbHZlKHMub2JqKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHMub2JqO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyIE9iamVjdCBob2xkaW5nIHRoZSBzZXJ2aWNlIGluc3RhbmNlLlxuICogQHBhcmFtIHshV2luZG93fCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBjb250ZXh0IFdpbiBvciBBbXBEb2MuXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgb2YgdGhlIHNlcnZpY2UuXG4gKiBAcGFyYW0gez9mdW5jdGlvbihuZXc6T2JqZWN0LCAhV2luZG93KXxcbiAqICAgICAgICAgP2Z1bmN0aW9uKG5ldzpPYmplY3QsICEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jKX1cbiAqICAgICBjdG9yIENvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIG5ldyB0aGUgc2VydmljZS4gQ2FsbGVkIHdpdGggY29udGV4dC5cbiAqL1xuZnVuY3Rpb24gcmVnaXN0ZXJTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBjb250ZXh0LCBpZCwgY3Rvcikge1xuICBjb25zdCBzZXJ2aWNlcyA9IGdldFNlcnZpY2VzKGhvbGRlcik7XG4gIGxldCBzID0gc2VydmljZXNbaWRdO1xuXG4gIGlmICghcykge1xuICAgIHMgPSBzZXJ2aWNlc1tpZF0gPSB7XG4gICAgICBvYmo6IG51bGwsXG4gICAgICBwcm9taXNlOiBudWxsLFxuICAgICAgcmVzb2x2ZTogbnVsbCxcbiAgICAgIGNvbnRleHQ6IG51bGwsXG4gICAgICBjdG9yOiBudWxsLFxuICAgIH07XG4gIH1cblxuICBpZiAocy5jdG9yIHx8IHMub2JqKSB7XG4gICAgLy8gU2VydmljZSBhbHJlYWR5IHJlZ2lzdGVyZWQuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcy5jdG9yID0gY3RvcjtcbiAgcy5jb250ZXh0ID0gY29udGV4dDtcblxuICAvLyBUaGUgc2VydmljZSBtYXkgaGF2ZSBiZWVuIHJlcXVlc3RlZCBhbHJlYWR5LCBpbiB3aGljaCBjYXNlIHRoZXJlIGlzIGFcbiAgLy8gcGVuZGluZyBwcm9taXNlIHRoYXQgbmVlZHMgdG8gZnVsZmlsbGVkLlxuICBpZiAocy5yZXNvbHZlKSB7XG4gICAgLy8gZ2V0U2VydmljZUludGVybmFsIHdpbGwgcmVzb2x2ZSB0aGUgcHJvbWlzZS5cbiAgICBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlclxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHJldHVybiB7IVByb21pc2U8IU9iamVjdD59XG4gKi9cbmZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlSW50ZXJuYWwoaG9sZGVyLCBpZCkge1xuICBjb25zdCBjYWNoZWQgPSBnZXRTZXJ2aWNlUHJvbWlzZU9yTnVsbEludGVybmFsKGhvbGRlciwgaWQpO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgcmV0dXJuIGNhY2hlZDtcbiAgfVxuICAvLyBTZXJ2aWNlIGlzIG5vdCByZWdpc3RlcmVkLlxuXG4gIC8vIFRPRE8oQGNyYW1mb3JjZSk6IEFkZCBhIGNoZWNrIHRoYXQgaWYgdGhlIGVsZW1lbnQgaXMgZXZlbnR1YWxseSByZWdpc3RlcmVkXG4gIC8vIHRoYXQgdGhlIHNlcnZpY2UgaXMgYWN0dWFsbHkgcHJvdmlkZWQgYW5kIHRoaXMgcHJvbWlzZSByZXNvbHZlcy5cbiAgbGV0IHJlc29sdmU7XG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZShyID0+IHtcbiAgICByZXNvbHZlID0gcjtcbiAgfSk7XG4gIGNvbnN0IHNlcnZpY2VzID0gZ2V0U2VydmljZXMoaG9sZGVyKTtcbiAgc2VydmljZXNbaWRdID0ge1xuICAgIG9iajogbnVsbCxcbiAgICBwcm9taXNlLFxuICAgIHJlc29sdmUsXG4gICAgY29udGV4dDogbnVsbCxcbiAgICBjdG9yOiBudWxsLFxuICB9O1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciBzZXJ2aWNlIGBpZGAgaWYgdGhlIHNlcnZpY2UgaGFzIGJlZW4gcmVnaXN0ZXJlZFxuICogb24gYGhvbGRlcmAuXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlclxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHJldHVybiB7P1Byb21pc2U8IU9iamVjdD59XG4gKi9cbmZ1bmN0aW9uIGdldFNlcnZpY2VQcm9taXNlT3JOdWxsSW50ZXJuYWwoaG9sZGVyLCBpZCkge1xuICBjb25zdCBzZXJ2aWNlcyA9IGdldFNlcnZpY2VzKGhvbGRlcik7XG4gIGNvbnN0IHMgPSBzZXJ2aWNlc1tpZF07XG4gIGlmIChzKSB7XG4gICAgaWYgKHMucHJvbWlzZSkge1xuICAgICAgcmV0dXJuIHMucHJvbWlzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSW5zdGFudGlhdGUgc2VydmljZSBpZiBub3QgYWxyZWFkeSBpbnN0YW50aWF0ZWQuXG4gICAgICBnZXRTZXJ2aWNlSW50ZXJuYWwoaG9sZGVyLCBpZCk7XG4gICAgICByZXR1cm4gcy5wcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKHMub2JqKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgb2JqZWN0IHRoYXQgaG9sZHMgdGhlIHNlcnZpY2VzIHJlZ2lzdGVyZWQgaW4gYSBob2xkZXIuXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlclxuICogQHJldHVybiB7IU9iamVjdDxzdHJpbmcsIVNlcnZpY2VIb2xkZXJEZWY+fVxuICovXG5mdW5jdGlvbiBnZXRTZXJ2aWNlcyhob2xkZXIpIHtcbiAgbGV0IHNlcnZpY2VzID0gaG9sZGVyLnNlcnZpY2VzO1xuICBpZiAoIXNlcnZpY2VzKSB7XG4gICAgc2VydmljZXMgPSBob2xkZXIuc2VydmljZXMgPSB7fTtcbiAgfVxuICByZXR1cm4gc2VydmljZXM7XG59XG5cblxuLyoqXG4gKiBXaGV0aGVyIHRoZSBzcGVjaWZpZWQgc2VydmljZSBpbXBsZW1lbnRzIGBEaXNwb3NhYmxlYCBpbnRlcmZhY2UuXG4gKiBAcGFyYW0geyFPYmplY3R9IHNlcnZpY2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Rpc3Bvc2FibGUoc2VydmljZSkge1xuICByZXR1cm4gdHlwZW9mIHNlcnZpY2UuZGlzcG9zZSA9PSAnZnVuY3Rpb24nO1xufVxuXG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IHRoZSBzcGVjaWZpZWQgc2VydmljZSBpbXBsZW1lbnRzIGBEaXNwb3NhYmxlYCBpbnRlcmZhY2UgYW5kXG4gKiB0eXBlY2FzdHMgdGhlIGluc3RhbmNlIHRvIGBEaXNwb3NhYmxlYC5cbiAqIEBwYXJhbSB7IU9iamVjdH0gc2VydmljZVxuICogQHJldHVybiB7IURpc3Bvc2FibGV9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhc3NlcnREaXNwb3NhYmxlKHNlcnZpY2UpIHtcbiAgZGV2KCkuYXNzZXJ0KGlzRGlzcG9zYWJsZShzZXJ2aWNlKSwgJ3JlcXVpcmVkIHRvIGltcGxlbWVudCBEaXNwb3NhYmxlJyk7XG4gIHJldHVybiAvKiogQHR5cGUgeyFEaXNwb3NhYmxlfSAqLyAoc2VydmljZSk7XG59XG5cblxuLyoqXG4gKiBEaXNwb3NlcyBhbGwgZGlzcG9zYWJsZSAoaW1wbGVtZW50cyBgRGlzcG9zYWJsZWAgaW50ZXJmYWNlKSBzZXJ2aWNlcyBpblxuICogYW1wZG9jIHNjb3BlLlxuICogQHBhcmFtIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gYW1wZG9jXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwb3NlU2VydmljZXNGb3JEb2MoYW1wZG9jKSB7XG4gIGRpc3Bvc2VTZXJ2aWNlc0ludGVybmFsKGFtcGRvYyk7XG59XG5cblxuLyoqXG4gKiBEaXNwb3NlcyBhbGwgZGlzcG9zYWJsZSAoaW1wbGVtZW50cyBgRGlzcG9zYWJsZWAgaW50ZXJmYWNlKSBzZXJ2aWNlcyBpblxuICogZW1iZWQgc2NvcGUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IGVtYmVkV2luXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXNwb3NlU2VydmljZXNGb3JFbWJlZChlbWJlZFdpbikge1xuICBkaXNwb3NlU2VydmljZXNJbnRlcm5hbChlbWJlZFdpbik7XG59XG5cblxuLyoqXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlciBPYmplY3QgaG9sZGluZyB0aGUgc2VydmljZSBpbnN0YW5jZXMuXG4gKi9cbmZ1bmN0aW9uIGRpc3Bvc2VTZXJ2aWNlc0ludGVybmFsKGhvbGRlcikge1xuICAvLyBUT0RPKGR2b3l0ZW5rbyk6IENvbnNpZGVyIG1hcmtpbmcgaG9sZGVyIGFzIGRlc3Ryb3llZCBmb3IgbGF0ZXItYXJyaXZpbmdcbiAgLy8gc2VydmljZSB0byBiZSBjYW5jZWxlZCBhdXRvbWF0aWNhbGx5LlxuICBjb25zdCBzZXJ2aWNlcyA9IGdldFNlcnZpY2VzKGhvbGRlcik7XG4gIGZvciAoY29uc3QgaWQgaW4gc2VydmljZXMpIHtcbiAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzZXJ2aWNlcywgaWQpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3Qgc2VydmljZUhvbGRlciA9IHNlcnZpY2VzW2lkXTtcbiAgICBpZiAoc2VydmljZUhvbGRlci5vYmopIHtcbiAgICAgIGRpc3Bvc2VTZXJ2aWNlSW50ZXJuYWwoaWQsIHNlcnZpY2VIb2xkZXIub2JqKTtcbiAgICB9IGVsc2UgaWYgKHNlcnZpY2VIb2xkZXIucHJvbWlzZSkge1xuICAgICAgc2VydmljZUhvbGRlci5wcm9taXNlLnRoZW4oXG4gICAgICAgICAgaW5zdGFuY2UgPT4gZGlzcG9zZVNlcnZpY2VJbnRlcm5hbChpZCwgaW5zdGFuY2UpKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZFxuICogQHBhcmFtIHshT2JqZWN0fSBzZXJ2aWNlXG4gKi9cbmZ1bmN0aW9uIGRpc3Bvc2VTZXJ2aWNlSW50ZXJuYWwoaWQsIHNlcnZpY2UpIHtcbiAgaWYgKCFpc0Rpc3Bvc2FibGUoc2VydmljZSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdHJ5IHtcbiAgICBhc3NlcnREaXNwb3NhYmxlKHNlcnZpY2UpLmRpc3Bvc2UoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIC8vIEVuc3VyZSB0aGF0IGEgZmFpbHVyZSB0byBkaXNwb3NlIGEgc2VydmljZSBkb2VzIG5vdCBkaXNydXB0IG90aGVyXG4gICAgLy8gc2VydmljZXMuXG4gICAgZGV2KCkuZXJyb3IoJ1NFUlZJQ0UnLCAnZmFpbGVkIHRvIGRpc3Bvc2Ugc2VydmljZScsIGlkLCBlKTtcbiAgfVxufVxuXG5cbi8qKlxuICogV2hldGhlciB0aGUgc3BlY2lmaWVkIHNlcnZpY2UgaW1wbGVtZW50cyBgRW1iZWRkYWJsZVNlcnZpY2VgIGludGVyZmFjZS5cbiAqIEBwYXJhbSB7IU9iamVjdH0gc2VydmljZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1iZWRkYWJsZShzZXJ2aWNlKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VydmljZS5hZG9wdEVtYmVkV2luZG93ID09ICdmdW5jdGlvbic7XG59XG5cblxuLyoqXG4gKiBBZG9wdHMgYW4gZW1iZWRkYWJsZSAoaW1wbGVtZW50cyBgRW1iZWRkYWJsZVNlcnZpY2VgIGludGVyZmFjZSkgc2VydmljZVxuICogaW4gZW1iZWQgc2NvcGUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IGVtYmVkV2luXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VydmljZUlkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZG9wdFNlcnZpY2VGb3JFbWJlZChlbWJlZFdpbiwgc2VydmljZUlkKSB7XG4gIGNvbnN0IGFkb3B0ZWQgPSBhZG9wdFNlcnZpY2VGb3JFbWJlZElmRW1iZWRkYWJsZShlbWJlZFdpbiwgc2VydmljZUlkKTtcbiAgZGV2KCkuYXNzZXJ0KGFkb3B0ZWQsIGBTZXJ2aWNlICR7c2VydmljZUlkfSBub3QgZm91bmQgb24gcGFyZW50IGAgK1xuICAgICAgJ29yIGRvZXNuXFwndCBpbXBsZW1lbnQgRW1iZWRkYWJsZVNlcnZpY2UuJyk7XG59XG5cblxuLyoqXG4gKiBBZG9wdHMgYW4gZW1iZWRkYWJsZSAoaW1wbGVtZW50cyBgRW1iZWRkYWJsZVNlcnZpY2VgIGludGVyZmFjZSkgc2VydmljZVxuICogaW4gZW1iZWQgc2NvcGUuXG4gKiBAcGFyYW0geyFXaW5kb3d9IGVtYmVkV2luXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VydmljZUlkXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRvcHRTZXJ2aWNlRm9yRW1iZWRJZkVtYmVkZGFibGUoZW1iZWRXaW4sIHNlcnZpY2VJZCkge1xuICBjb25zdCBmcmFtZUVsZW1lbnQgPSAvKiogQHR5cGUgeyFOb2RlfSAqLyAoZGV2KCkuYXNzZXJ0KFxuICAgICAgZW1iZWRXaW4uZnJhbWVFbGVtZW50LFxuICAgICAgJ2ZyYW1lRWxlbWVudCBub3QgZm91bmQgZm9yIGVtYmVkJykpO1xuICBjb25zdCBhbXBkb2MgPSBnZXRBbXBkb2MoZnJhbWVFbGVtZW50KTtcbiAgY29uc3QgaG9sZGVyID0gZ2V0QW1wZG9jU2VydmljZUhvbGRlcihhbXBkb2MpO1xuICBpZiAoIWlzU2VydmljZVJlZ2lzdGVyZWQoaG9sZGVyLCBzZXJ2aWNlSWQpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGNvbnN0IHNlcnZpY2UgPSBnZXRTZXJ2aWNlRm9yRG9jKGZyYW1lRWxlbWVudCwgc2VydmljZUlkKTtcbiAgaWYgKCFpc0VtYmVkZGFibGUoc2VydmljZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc2VydmljZS5hZG9wdEVtYmVkV2luZG93KGVtYmVkV2luKTtcbiAgcmV0dXJuIHRydWU7XG59XG5cblxuLyoqXG4gKiBSZXNldHMgYSBzaW5nbGUgc2VydmljZSwgc28gaXQgZ2V0cyByZWNyZWF0ZWQgb24gbmV4dCBnZXRTZXJ2aWNlIGludm9jYXRpb24uXG4gKiBAcGFyYW0geyFPYmplY3R9IGhvbGRlclxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRTZXJ2aWNlRm9yVGVzdGluZyhob2xkZXIsIGlkKSB7XG4gIGlmIChob2xkZXIuc2VydmljZXMpIHtcbiAgICBob2xkZXIuc2VydmljZXNbaWRdID0gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7IU9iamVjdH0gaG9sZGVyIE9iamVjdCBob2xkaW5nIHRoZSBzZXJ2aWNlIGluc3RhbmNlLlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIG9mIHRoZSBzZXJ2aWNlLlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNTZXJ2aWNlUmVnaXN0ZXJlZChob2xkZXIsIGlkKSB7XG4gIGNvbnN0IHNlcnZpY2UgPSBob2xkZXIuc2VydmljZXMgJiYgaG9sZGVyLnNlcnZpY2VzW2lkXTtcbiAgLy8gQWxsIHJlZ2lzdGVyZWQgc2VydmljZXMgbXVzdCBoYXZlIGFuIGltcGxlbWVudGF0aW9uIG9yIGEgY29uc3RydWN0b3IuXG4gIHJldHVybiAhIShzZXJ2aWNlICYmIChzZXJ2aWNlLmN0b3IgfHwgc2VydmljZS5vYmopKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge1xuICBnZXRBbXBkb2MsXG4gIGdldEV4aXN0aW5nU2VydmljZUZvckRvY0luRW1iZWRTY29wZSxcbiAgZ2V0RXhpc3RpbmdTZXJ2aWNlT3JOdWxsLFxuICBnZXRTZXJ2aWNlLFxuICBnZXRTZXJ2aWNlRm9yRG9jLFxuICBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyxcbn0gZnJvbSAnLi9zZXJ2aWNlJztcbmltcG9ydCB7XG4gIGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jLFxuICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlLFxuICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jLFxuICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlRm9yRG9jSW5FbWJlZFNjb3BlLFxufSBmcm9tICcuL2VsZW1lbnQtc2VydmljZSc7XG5cbi8qKiBAdHlwZWRlZiB7IS4uL2V4dGVuc2lvbnMvYW1wLXN1YnNjcmlwdGlvbnMvMC4xL2FtcC1zdWJzY3JpcHRpb25zLlN1YnNjcmlwdGlvblNlcnZpY2V9ICovXG5leHBvcnQgbGV0IFN1YnNjcmlwdGlvblNlcnZpY2U7XG5cbmV4cG9ydCBjbGFzcyBTZXJ2aWNlcyB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIEFjY2VzcyBzZXJ2aWNlLlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLWFjY2Vzcy8wLjEvYW1wLWFjY2Vzcy5BY2Nlc3NTZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBhY2Nlc3NTZXJ2aWNlRm9yRG9jKG5vZGVPckRvYykge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHshUHJvbWlzZTxcbiAgICAgICAgIS4uL2V4dGVuc2lvbnMvYW1wLWFjY2Vzcy8wLjEvYW1wLWFjY2Vzcy5BY2Nlc3NTZXJ2aWNlPn0gKi8gKFxuICAgICAgICBnZXRFbGVtZW50U2VydmljZUZvckRvYyhub2RlT3JEb2MsICdhY2Nlc3MnLCAnYW1wLWFjY2VzcycpKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBTdWJzY3JpcHRpb25zIHNlcnZpY2UuXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhU3Vic2NyaXB0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgc3Vic2NyaXB0aW9uc1NlcnZpY2VGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyFQcm9taXNlPFN1YnNjcmlwdGlvblNlcnZpY2U+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUZvckRvYyhub2RlT3JEb2MsICdzdWJzY3JpcHRpb25zJyxcbiAgICAgICAgICAnYW1wLXN1YnNjcmlwdGlvbnMnKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgQWNjZXNzIHNlcnZpY2Ugb3IgYSBwcm9taXNlIGZvciBudWxsIGlmIHRoZSBzZXJ2aWNlXG4gICAqIGlzIG5vdCBhdmFpbGFibGUgb24gdGhlIGN1cnJlbnQgcGFnZS5cbiAgICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2FtcC1hY2Nlc3MuQWNjZXNzU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgYWNjZXNzU2VydmljZUZvckRvY09yTnVsbChub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7XG4gICAgICAgICFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1hY2Nlc3MvMC4xL2FtcC1hY2Nlc3MuQWNjZXNzU2VydmljZT59ICovIChcbiAgICAgICAgZ2V0RWxlbWVudFNlcnZpY2VJZkF2YWlsYWJsZUZvckRvYyhub2RlT3JEb2MsICdhY2Nlc3MnLCAnYW1wLWFjY2VzcycpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvYWN0aW9uLWltcGwuQWN0aW9uU2VydmljZX1cbiAgICovXG4gIHN0YXRpYyBhY3Rpb25TZXJ2aWNlRm9yRG9jKG5vZGVPckRvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvYWN0aW9uLWltcGwuQWN0aW9uU2VydmljZX0gKi8gKFxuICAgICAgZ2V0RXhpc3RpbmdTZXJ2aWNlRm9yRG9jSW5FbWJlZFNjb3BlKFxuICAgICAgICAgIG5vZGVPckRvYywgJ2FjdGlvbicsIC8qIG9wdF9mYWxsYmFja1RvVG9wV2luICovIHRydWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IUFjdGl2aXR5Pn1cbiAgICovXG4gIHN0YXRpYyBhY3Rpdml0eUZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTwhQWN0aXZpdHk+fSAqLyAoXG4gICAgICBnZXRFbGVtZW50U2VydmljZUZvckRvYyhub2RlT3JEb2MsICdhY3Rpdml0eScsICdhbXAtYW5hbHl0aWNzJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGdsb2JhbCBpbnN0YW5jZSBvZiB0aGUgYEFtcERvY1NlcnZpY2VgIHNlcnZpY2UgdGhhdCBjYW4gYmVcbiAgICogdXNlZCB0byByZXNvbHZlIGFuIGFtcGRvYyBmb3IgYW55IG5vZGU6IGVpdGhlciBpbiB0aGUgc2luZ2xlLWRvYyBvclxuICAgKiBzaGFkb3ctZG9jIGVudmlyb25tZW50LlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY1NlcnZpY2V9XG4gICAqL1xuICBzdGF0aWMgYW1wZG9jU2VydmljZUZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY1NlcnZpY2V9ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAnYW1wZG9jJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIEFtcERvYyBmb3IgdGhlIHNwZWNpZmllZCBjb250ZXh0IG5vZGUuXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY31cbiAgICovXG4gIHN0YXRpYyBhbXBkb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIGdldEFtcGRvYyhub2RlT3JEb2MpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBsb2FkQW5hbHl0aWNzXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuLi9leHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2luc3RydW1lbnRhdGlvbi5JbnN0cnVtZW50YXRpb25TZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBhbmFseXRpY3NGb3JEb2Mobm9kZU9yRG9jLCBsb2FkQW5hbHl0aWNzID0gZmFsc2UpIHtcbiAgICBpZiAobG9hZEFuYWx5dGljcykge1xuICAgICAgLy8gR2V0IEV4dGVuc2lvbnMgc2VydmljZSBhbmQgZm9yY2UgbG9hZCBhbmFseXRpY3MgZXh0ZW5zaW9uLlxuICAgICAgY29uc3QgYW1wZG9jID0gZ2V0QW1wZG9jKG5vZGVPckRvYyk7XG4gICAgICBTZXJ2aWNlcy5leHRlbnNpb25zRm9yKGFtcGRvYy53aW4pLi8qT0sqL2luc3RhbGxFeHRlbnNpb25Gb3JEb2MoXG4gICAgICAgICAgYW1wZG9jLCAnYW1wLWFuYWx5dGljcycpO1xuICAgIH1cbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IVByb21pc2U8XG4gICAgICAgICAgICAgICEuLi9leHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2luc3RydW1lbnRhdGlvbi5JbnN0cnVtZW50YXRpb25TZXJ2aWNlXG4gICAgICAgICAgICA+fSAqLyAoZ2V0RWxlbWVudFNlcnZpY2VGb3JEb2MoXG4gICAgICAgICAgbm9kZU9yRG9jLCAnYW1wLWFuYWx5dGljcy1pbnN0cnVtZW50YXRpb24nLCAnYW1wLWFuYWx5dGljcycpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1hbmFseXRpY3MvMC4xL2luc3RydW1lbnRhdGlvbi5JbnN0cnVtZW50YXRpb25TZXJ2aWNlPn1cbiAgICovXG4gIHN0YXRpYyBhbmFseXRpY3NGb3JEb2NPck51bGwobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuICgvKiogQHR5cGUgeyFQcm9taXNlPFxuICAgICAgICAgICAgICA/Li4vZXh0ZW5zaW9ucy9hbXAtYW5hbHl0aWNzLzAuMS9pbnN0cnVtZW50YXRpb24uSW5zdHJ1bWVudGF0aW9uU2VydmljZVxuICAgICAgICAgICAgPn0gKi8gKGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2MoXG4gICAgICAgICAgbm9kZU9yRG9jLCAnYW1wLWFuYWx5dGljcy1pbnN0cnVtZW50YXRpb24nLCAnYW1wLWFuYWx5dGljcycpKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9iYXRjaGVkLXhoci1pbXBsLkJhdGNoZWRYaHJ9XG4gICAqL1xuICBzdGF0aWMgYmF0Y2hlZFhockZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2JhdGNoZWQteGhyLWltcGwuQmF0Y2hlZFhocn0gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICdiYXRjaGVkLXhocicpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8Py4uL2V4dGVuc2lvbnMvYW1wLWJpbmQvMC4xL2JpbmQtaW1wbC5CaW5kPn1cbiAgICovXG4gIHN0YXRpYyBiaW5kRm9yRG9jT3JOdWxsKG5vZGVPckRvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1iaW5kLzAuMS9iaW5kLWltcGwuQmluZD59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGVGb3JEb2NJbkVtYmVkU2NvcGUoXG4gICAgICAgICAgbm9kZU9yRG9jLCAnYmluZCcsICdhbXAtYmluZCcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4vc2VydmljZS9jaWQtaW1wbC5DaWQ+fVxuICAgKi9cbiAgc3RhdGljIGNpZEZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshUHJvbWlzZTwhLi9zZXJ2aWNlL2NpZC1pbXBsLkNpZD59ICovIChcbiAgICAgIGdldFNlcnZpY2VQcm9taXNlRm9yRG9jKG5vZGVPckRvYywgJ2NpZCcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9uYXZpZ2F0aW9uLk5hdmlnYXRpb259XG4gICAqL1xuICBzdGF0aWMgbmF2aWdhdGlvbkZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL25hdmlnYXRpb24uTmF2aWdhdGlvbn0gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvYyhub2RlT3JEb2MsICduYXZpZ2F0aW9uJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvY3J5cHRvLWltcGwuQ3J5cHRvfVxuICAgKi9cbiAgc3RhdGljIGNyeXB0b0Zvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IS4vc2VydmljZS9jcnlwdG8taW1wbC5DcnlwdG99ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAnY3J5cHRvJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9kb2N1bWVudC1pbmZvLWltcGwuRG9jdW1lbnRJbmZvRGVmfSBJbmZvIGFib3V0IHRoZSBkb2NcbiAgICovXG4gIHN0YXRpYyBkb2N1bWVudEluZm9Gb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9kb2N1bWVudC1pbmZvLWltcGwuRG9jSW5mb30gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvYyhub2RlT3JEb2MsICdkb2N1bWVudEluZm8nKSkuZ2V0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9kb2N1bWVudC1zdGF0ZS5Eb2N1bWVudFN0YXRlfVxuICAgKi9cbiAgc3RhdGljIGRvY3VtZW50U3RhdGVGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIGdldFNlcnZpY2Uod2luZG93LCAnZG9jdW1lbnRTdGF0ZScpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvZXh0ZW5zaW9ucy1pbXBsLkV4dGVuc2lvbnN9XG4gICAqL1xuICBzdGF0aWMgZXh0ZW5zaW9uc0Zvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL2V4dGVuc2lvbnMtaW1wbC5FeHRlbnNpb25zfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ2V4dGVuc2lvbnMnKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBzZXJ2aWNlIGltcGxlbWVudGVkIGluIHNlcnZpY2UvaGlzdG9yeS1pbXBsLlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS9oaXN0b3J5LWltcGwuSGlzdG9yeX1cbiAgICovXG4gIHN0YXRpYyBoaXN0b3J5Rm9yRG9jKG5vZGVPckRvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvaGlzdG9yeS1pbXBsLkhpc3Rvcnl9ICovIChcbiAgICAgIGdldFNlcnZpY2VGb3JEb2Mobm9kZU9yRG9jLCAnaGlzdG9yeScpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICAgKiBAcmV0dXJuIHshLi9pbnB1dC5JbnB1dH1cbiAgICovXG4gIHN0YXRpYyBpbnB1dEZvcih3aW4pIHtcbiAgICByZXR1cm4gZ2V0U2VydmljZSh3aW4sICdpbnB1dCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL2xheWVycy1pbXBsLkxheW91dExheWVyc31cbiAgICovXG4gIHN0YXRpYyBsYXllcnNGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9sYXllcnMtaW1wbC5MYXlvdXRMYXllcnN9ICovIChcbiAgICAgIGdldFNlcnZpY2VGb3JEb2Mobm9kZU9yRG9jLCAnbGF5ZXJzJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvcGVyZm9ybWFuY2UtaW1wbC5QZXJmb3JtYW5jZX1cbiAgICovXG4gIHN0YXRpYyBwZXJmb3JtYW5jZUZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3BlcmZvcm1hbmNlLWltcGwuUGVyZm9ybWFuY2V9Ki8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICdwZXJmb3JtYW5jZScpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3BlcmZvcm1hbmNlLWltcGwuUGVyZm9ybWFuY2V9XG4gICAqL1xuICBzdGF0aWMgcGVyZm9ybWFuY2VGb3JPck51bGwod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9wZXJmb3JtYW5jZS1pbXBsLlBlcmZvcm1hbmNlfSovIChcbiAgICAgIGdldEV4aXN0aW5nU2VydmljZU9yTnVsbCh3aW5kb3csICdwZXJmb3JtYW5jZScpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3BsYXRmb3JtLWltcGwuUGxhdGZvcm19XG4gICAqL1xuICBzdGF0aWMgcGxhdGZvcm1Gb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9wbGF0Zm9ybS1pbXBsLlBsYXRmb3JtfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlKHdpbmRvdywgJ3BsYXRmb3JtJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3Jlc291cmNlcy1pbXBsLlJlc291cmNlc31cbiAgICovXG4gIHN0YXRpYyByZXNvdXJjZXNGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS9yZXNvdXJjZXMtaW1wbC5SZXNvdXJjZXN9ICovIChcbiAgICAgIGdldFNlcnZpY2VGb3JEb2Mobm9kZU9yRG9jLCAncmVzb3VyY2VzJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPD97aW5jb21pbmdGcmFnbWVudDogc3RyaW5nLCBvdXRnb2luZ0ZyYWdtZW50OiBzdHJpbmd9Pn1cbiAgICovXG4gIHN0YXRpYyBzaGFyZVRyYWNraW5nRm9yT3JOdWxsKHdpbikge1xuICAgIHJldHVybiAoLyoqIEB0eXBlIHtcbiAgICAgICFQcm9taXNlPD97aW5jb21pbmdGcmFnbWVudDogc3RyaW5nLCBvdXRnb2luZ0ZyYWdtZW50OiBzdHJpbmd9Pn0gKi8gKFxuICAgICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgJ3NoYXJlLXRyYWNraW5nJyxcbiAgICAgICAgICAgICdhbXAtc2hhcmUtdHJhY2tpbmcnLCB0cnVlKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gICAqIEByZXR1cm4gez9Qcm9taXNlPD8uLi9leHRlbnNpb25zL2FtcC1zdG9yeS8wLjEvdmFyaWFibGUtc2VydmljZS5BbXBTdG9yeVZhcmlhYmxlU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgc3RvcnlWYXJpYWJsZVNlcnZpY2VGb3JPck51bGwod2luKSB7XG4gICAgcmV0dXJuIChcbiAgICAvKiogQHR5cGUgeyFQcm9taXNlPFxuICAgICAgICAgKiA/Li4vZXh0ZW5zaW9ucy9hbXAtc3RvcnkvMC4xL3ZhcmlhYmxlLXNlcnZpY2UuQW1wU3RvcnlWYXJpYWJsZVNlcnZpY2VcbiAgICAgICAgICogPn0gKi8gKFxuICAgICAgICBnZXRFbGVtZW50U2VydmljZUlmQXZhaWxhYmxlKHdpbiwgJ3N0b3J5LXZhcmlhYmxlJywgJ2FtcC1zdG9yeScsXG4gICAgICAgICAgICB0cnVlKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi4vZXh0ZW5zaW9ucy9hbXAtYW5pbWF0aW9uLzAuMS93ZWItYW5pbWF0aW9uLXNlcnZpY2UuV2ViQW5pbWF0aW9uU2VydmljZT59XG4gICAqL1xuICBzdGF0aWMgd2ViQW5pbWF0aW9uU2VydmljZUZvcihub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7XG4gICAgICAgICFQcm9taXNlPCEuLi9leHRlbnNpb25zL2FtcC1hbmltYXRpb24vMC4xL3dlYi1hbmltYXRpb24tc2VydmljZS5XZWJBbmltYXRpb25TZXJ2aWNlPn0gKi9cbiAgICAgIChnZXRFbGVtZW50U2VydmljZUZvckRvYyhub2RlT3JEb2MsICd3ZWItYW5pbWF0aW9uJywgJ2FtcC1hbmltYXRpb24nKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IU5vZGV8IS4vc2VydmljZS9hbXBkb2MtaW1wbC5BbXBEb2N9IG5vZGVPckRvY1xuICAgKiBAcmV0dXJuIHshUHJvbWlzZTwhLi9zZXJ2aWNlL3N0b3JhZ2UtaW1wbC5TdG9yYWdlPn1cbiAgICovXG4gIHN0YXRpYyBzdG9yYWdlRm9yRG9jKG5vZGVPckRvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPCEuL3NlcnZpY2Uvc3RvcmFnZS1pbXBsLlN0b3JhZ2U+fSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyhub2RlT3JEb2MsICdzdG9yYWdlJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvdGVtcGxhdGUtaW1wbC5UZW1wbGF0ZXN9XG4gICAqL1xuICBzdGF0aWMgdGVtcGxhdGVzRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvdGVtcGxhdGUtaW1wbC5UZW1wbGF0ZXN9ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAndGVtcGxhdGVzJykpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVdpbmRvd30gd2luZG93XG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvdGltZXItaW1wbC5UaW1lcn1cbiAgICovXG4gIHN0YXRpYyB0aW1lckZvcih3aW5kb3cpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3RpbWVyLWltcGwuVGltZXJ9ICovIChcbiAgICAgIGdldFNlcnZpY2Uod2luZG93LCAndGltZXInKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gICAqIEByZXR1cm4geyEuL3NlcnZpY2UvdXJsLXJlcGxhY2VtZW50cy1pbXBsLlVybFJlcGxhY2VtZW50c31cbiAgICovXG4gIHN0YXRpYyB1cmxSZXBsYWNlbWVudHNGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS91cmwtcmVwbGFjZW1lbnRzLWltcGwuVXJsUmVwbGFjZW1lbnRzfSAqLyAoXG4gICAgICBnZXRFeGlzdGluZ1NlcnZpY2VGb3JEb2NJbkVtYmVkU2NvcGUoXG4gICAgICAgICAgbm9kZU9yRG9jLCAndXJsLXJlcGxhY2UnLCAvKiBvcHRfZmFsbGJhY2tUb1RvcFdpbiAqLyB0cnVlKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshTm9kZXwhLi9zZXJ2aWNlL2FtcGRvYy1pbXBsLkFtcERvY30gbm9kZU9yRG9jXG4gICAqIEByZXR1cm4geyFQcm9taXNlPCEuLi9leHRlbnNpb25zL2FtcC11c2VyLW5vdGlmaWNhdGlvbi8wLjEvYW1wLXVzZXItbm90aWZpY2F0aW9uLlVzZXJOb3RpZmljYXRpb25NYW5hZ2VyPn1cbiAgICovXG4gIHN0YXRpYyB1c2VyTm90aWZpY2F0aW9uTWFuYWdlckZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gKC8qKiBAdHlwZSB7IVByb21pc2U8IS4uL2V4dGVuc2lvbnMvYW1wLXVzZXItbm90aWZpY2F0aW9uLzAuMS9hbXAtdXNlci1ub3RpZmljYXRpb24uVXNlck5vdGlmaWNhdGlvbk1hbmFnZXI+fSAqL1xuICAgICAgKGdldEVsZW1lbnRTZXJ2aWNlRm9yRG9jKG5vZGVPckRvYywgJ3VzZXJOb3RpZmljYXRpb25NYW5hZ2VyJyxcbiAgICAgICAgICAnYW1wLXVzZXItbm90aWZpY2F0aW9uJykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIGV4cGVyaW1lbnQgdmFyaWFudHMgb3IgYSBwcm9taXNlIGZvciBudWxsIGlmIGl0IGlzXG4gICAqIG5vdCBhdmFpbGFibGUgb24gdGhlIGN1cnJlbnQgcGFnZS5cbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAgICogQHJldHVybiB7IVByb21pc2U8P09iamVjdDxzdHJpbmc+Pn1cbiAgICovXG4gIHN0YXRpYyB2YXJpYW50Rm9yT3JOdWxsKHdpbikge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFQcm9taXNlPD9PYmplY3Q8c3RyaW5nPj59ICovIChcbiAgICAgIGdldEVsZW1lbnRTZXJ2aWNlSWZBdmFpbGFibGUod2luLCAndmFyaWFudCcsICdhbXAtZXhwZXJpbWVudCcsIHRydWUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS92aWRlby1tYW5hZ2VyLWltcGwuVmlkZW9NYW5hZ2VyfVxuICAgKi9cbiAgc3RhdGljIHZpZGVvTWFuYWdlckZvckRvYyhub2RlT3JEb2MpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshLi9zZXJ2aWNlL3ZpZGVvLW1hbmFnZXItaW1wbC5WaWRlb01hbmFnZXJ9ICovIChcbiAgICAgIGdldFNlcnZpY2VGb3JEb2Mobm9kZU9yRG9jLCAndmlkZW8tbWFuYWdlcicpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXJ9XG4gICAqL1xuICBzdGF0aWMgdmlld2VyRm9yRG9jKG5vZGVPckRvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2Uvdmlld2VyLWltcGwuVmlld2VyfSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlRm9yRG9jKG5vZGVPckRvYywgJ3ZpZXdlcicpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHByb21pc2UgZm9yIHRoZSB2aWV3ZXIuIFRoaXMgaXMgYW4gdW51c3VhbCBjYXNlIGFuZCBuZWNlc3Nhcnkgb25seVxuICAgKiBmb3Igc2VydmljZXMgdGhhdCBuZWVkIHJlZmVyZW5jZSB0byB0aGUgdmlld2VyIGJlZm9yZSBpdCBoYXMgYmVlblxuICAgKiBpbml0aWFsaXplZC4gTW9zdCBvZiB0aGUgY29kZSwgaG93ZXZlciwganVzdCBzaG91bGQgdXNlIGB2aWV3ZXJGb3JEb2NgLlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IVByb21pc2U8IS4vc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXI+fVxuICAgKi9cbiAgc3RhdGljIHZpZXdlclByb21pc2VGb3JEb2Mobm9kZU9yRG9jKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IVByb21pc2U8IS4vc2VydmljZS92aWV3ZXItaW1wbC5WaWV3ZXI+fSAqLyAoXG4gICAgICBnZXRTZXJ2aWNlUHJvbWlzZUZvckRvYyhub2RlT3JEb2MsICd2aWV3ZXInKSk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHshV2luZG93fSB3aW5kb3dcbiAgICogQHJldHVybiB7IS4vc2VydmljZS92c3luYy1pbXBsLlZzeW5jfVxuICAgKi9cbiAgc3RhdGljIHZzeW5jRm9yKHdpbmRvdykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2UvdnN5bmMtaW1wbC5Wc3luY30gKi8gKFxuICAgICAgZ2V0U2VydmljZSh3aW5kb3csICd2c3luYycpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFOb2RlfCEuL3NlcnZpY2UvYW1wZG9jLWltcGwuQW1wRG9jfSBub2RlT3JEb2NcbiAgICogQHJldHVybiB7IS4vc2VydmljZS92aWV3cG9ydC92aWV3cG9ydC1pbXBsLlZpZXdwb3J0fVxuICAgKi9cbiAgc3RhdGljIHZpZXdwb3J0Rm9yRG9jKG5vZGVPckRvYykge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyEuL3NlcnZpY2Uvdmlld3BvcnQvdmlld3BvcnQtaW1wbC5WaWV3cG9ydH0gKi8gKFxuICAgICAgZ2V0U2VydmljZUZvckRvYyhub2RlT3JEb2MsICd2aWV3cG9ydCcpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFXaW5kb3d9IHdpbmRvd1xuICAgKiBAcmV0dXJuIHshLi9zZXJ2aWNlL3hoci1pbXBsLlhocn1cbiAgICovXG4gIHN0YXRpYyB4aHJGb3Iod2luZG93KSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IS4vc2VydmljZS94aHItaW1wbC5YaHJ9ICovIChnZXRTZXJ2aWNlKHdpbmRvdywgJ3hocicpKTtcbiAgfVxufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IF9tYXRjaFxuICogQHBhcmFtIHtzdHJpbmd9IGNoYXJhY3RlclxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB0b1VwcGVyQ2FzZShfbWF0Y2gsIGNoYXJhY3Rlcikge1xuICByZXR1cm4gY2hhcmFjdGVyLnRvVXBwZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hdGNoXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHByZXBlbmREYXNoQW5kVG9Mb3dlckNhc2UobWF0Y2gpIHtcbiAgcmV0dXJuICctJyArIG1hdGNoLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQXR0cmlidXRlIG5hbWUgY29udGFpbmluZyBkYXNoZXMuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IERhc2hlcyByZW1vdmVkIGFuZCBzdWNjZXNzaXZlIGNoYXJhY3RlciBzZW50IHRvIHVwcGVyIGNhc2UuXG4gKiB2aXNpYmxlRm9yVGVzdGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gZGFzaFRvQ2FtZWxDYXNlKG5hbWUpIHtcbiAgcmV0dXJuIG5hbWUucmVwbGFjZSgvLShbYS16XSkvZywgdG9VcHBlckNhc2UpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgc3RyaW5nIHRoYXQgaXMgaW4gY2FtZWxDYXNlIHRvIG9uZSB0aGF0IGlzIGluIGRhc2gtY2FzZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHN0cmluZyBpbiBkYXNoLWNhc2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYW1lbENhc2VUb0Rhc2goc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZSgvKD8hXilbQS1aXS9nLCBwcmVwZW5kRGFzaEFuZFRvTG93ZXJDYXNlKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBBdHRyaWJ1dGUgbmFtZSB3aXRoIGRhc2hlc1xuICogQHJldHVybiB7c3RyaW5nfSBEYXNoZXMgcmVwbGFjZWQgYnkgdW5kZXJsaW5lcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRhc2hUb1VuZGVybGluZShuYW1lKSB7XG4gIHJldHVybiBuYW1lLnJlcGxhY2UoJy0nLCAnXycpO1xufVxuXG4vKipcbiAqIFBvbHlmaWxsIGZvciBTdHJpbmcucHJvdG90eXBlLmVuZHNXaXRoLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd9IHN1ZmZpeFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuZHNXaXRoKHN0cmluZywgc3VmZml4KSB7XG4gIGNvbnN0IGluZGV4ID0gc3RyaW5nLmxlbmd0aCAtIHN1ZmZpeC5sZW5ndGg7XG4gIHJldHVybiBpbmRleCA+PSAwICYmIHN0cmluZy5pbmRleE9mKHN1ZmZpeCwgaW5kZXgpID09IGluZGV4O1xufVxuXG4vKipcbiAqIFBvbHlmaWxsIGZvciBTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGguXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJlZml4XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRzV2l0aChzdHJpbmcsIHByZWZpeCkge1xuICBpZiAocHJlZml4Lmxlbmd0aCA+IHN0cmluZy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIHN0cmluZy5sYXN0SW5kZXhPZihwcmVmaXgsIDApID09IDA7XG59XG5cbi8qKlxuICogRXhwYW5kcyBwbGFjZWhvbGRlcnMgaW4gYSBnaXZlbiB0ZW1wbGF0ZSBzdHJpbmcgd2l0aCB2YWx1ZXMuXG4gKlxuICogUGxhY2Vob2xkZXJzIHVzZSAke2tleS1uYW1lfSBzeW50YXggYW5kIGFyZSByZXBsYWNlZCB3aXRoIHRoZSB2YWx1ZVxuICogcmV0dXJuZWQgZnJvbSB0aGUgZ2l2ZW4gZ2V0dGVyIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZSBUaGUgdGVtcGxhdGUgc3RyaW5nIHRvIGV4cGFuZC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nKToqfSBnZXR0ZXIgRnVuY3Rpb24gdXNlZCB0byByZXRyaWV2ZSBhIHZhbHVlIGZvciBhXG4gKiAgIHBsYWNlaG9sZGVyLiBSZXR1cm5zIHZhbHVlcyB3aWxsIGJlIGNvZXJjZWQgaW50byBzdHJpbmdzLlxuICogQHBhcmFtIHtudW1iZXI9fSBvcHRfbWF4SXRlcmF0aW9ucyBOdW1iZXIgb2YgdGltZXMgdG8gZXhwYW5kIHRoZSB0ZW1wbGF0ZS5cbiAqICAgRGVmYXVsdHMgdG8gMSwgYnV0IHNob3VsZCBiZSBzZXQgdG8gYSBsYXJnZXIgdmFsdWUgeW91ciBwbGFjZWhvbGRlciB0b2tlbnNcbiAqICAgY2FuIGJlIGV4cGFuZGVkIHRvIG90aGVyIHBsYWNlaG9sZGVyIHRva2Vucy4gVGFrZSBjYXV0aW9uIHdpdGggbGFyZ2UgdmFsdWVzXG4gKiAgIGFzIHJlY3Vyc2l2ZWx5IGV4cGFuZGluZyBhIHN0cmluZyBjYW4gYmUgZXhwb25lbnRpYWxseSBleHBlbnNpdmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHBhbmRUZW1wbGF0ZSh0ZW1wbGF0ZSwgZ2V0dGVyLCBvcHRfbWF4SXRlcmF0aW9ucykge1xuICBjb25zdCBtYXhJdGVyYXRpb25zID0gb3B0X21heEl0ZXJhdGlvbnMgfHwgMTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXhJdGVyYXRpb25zOyBpKyspIHtcbiAgICBsZXQgbWF0Y2hlcyA9IDA7XG4gICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5yZXBsYWNlKC9cXCR7KFtefV0qKX0vZywgKF9hLCBiKSA9PiB7XG4gICAgICBtYXRjaGVzKys7XG4gICAgICByZXR1cm4gZ2V0dGVyKGIpO1xuICAgIH0pO1xuICAgIGlmICghbWF0Y2hlcykge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiB0ZW1wbGF0ZTtcbn1cblxuLyoqXG4gKiBIYXNoIGZ1bmN0aW9uIGRqYjJhXG4gKiBUaGlzIGlzIGludGVuZGVkIHRvIGJlIGEgc2ltcGxlLCBmYXN0IGhhc2hpbmcgZnVuY3Rpb24gdXNpbmcgbWluaW1hbCBjb2RlLlxuICogSXQgZG9lcyAqbm90KiBoYXZlIGdvb2QgY3J5cHRvZ3JhcGhpYyBwcm9wZXJ0aWVzLlxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICogQHJldHVybiB7c3RyaW5nfSAzMi1iaXQgdW5zaWduZWQgaGFzaCBvZiB0aGUgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdIYXNoMzIoc3RyKSB7XG4gIGNvbnN0IGxlbmd0aCA9IHN0ci5sZW5ndGg7XG4gIGxldCBoYXNoID0gNTM4MTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGhhc2ggPSBoYXNoICogMzMgXiBzdHIuY2hhckNvZGVBdChpKTtcbiAgfVxuICAvLyBDb252ZXJ0IGZyb20gMzItYml0IHNpZ25lZCB0byB1bnNpZ25lZC5cbiAgcmV0dXJuIFN0cmluZyhoYXNoID4+PiAwKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vLyBOb3RlOiBsb2FkZWQgYnkgM3Agc3lzdGVtLiBDYW5ub3QgcmVseSBvbiBiYWJlbCBwb2x5ZmlsbHMuXG5pbXBvcnQge21hcH0gZnJvbSAnLi91dGlscy9vYmplY3QuanMnO1xuaW1wb3J0IHtzdGFydHNXaXRofSBmcm9tICcuL3N0cmluZyc7XG5cblxuLyoqIEB0eXBlIHtPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSAqL1xubGV0IHByb3BlcnR5TmFtZUNhY2hlO1xuXG4vKiogQGNvbnN0IHshQXJyYXk8c3RyaW5nPn0gKi9cbmNvbnN0IHZlbmRvclByZWZpeGVzID0gWydXZWJraXQnLCAnd2Via2l0JywgJ01veicsICdtb3onLCAnbXMnLCAnTycsICdvJ107XG5cblxuLyoqXG4gKiBAZXhwb3J0XG4gKiBAcGFyYW0ge3N0cmluZ30gY2FtZWxDYXNlIGNhbWVsIGNhc2VkIHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfSB0aXRsZSBjYXNlZCBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbWVsQ2FzZVRvVGl0bGVDYXNlKGNhbWVsQ2FzZSkge1xuICByZXR1cm4gY2FtZWxDYXNlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxDYXNlLnNsaWNlKDEpO1xufVxuXG4vKipcbiAqIENoZWNrcyB0aGUgc3R5bGUgaWYgYSBwcmVmaXhlZCB2ZXJzaW9uIG9mIGEgcHJvcGVydHkgZXhpc3RzIGFuZCByZXR1cm5zXG4gKiBpdCBvciByZXR1cm5zIGFuIGVtcHR5IHN0cmluZy5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyFPYmplY3R9IHN0eWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGl0bGVDYXNlIHRoZSB0aXRsZSBjYXNlIHZlcnNpb24gb2YgYSBjc3MgcHJvcGVydHkgbmFtZVxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgcHJlZml4ZWQgcHJvcGVydHkgbmFtZSBvciBudWxsLlxuICovXG5mdW5jdGlvbiBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZV8oc3R5bGUsIHRpdGxlQ2FzZSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHZlbmRvclByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgcHJvcGVydHlOYW1lID0gdmVuZG9yUHJlZml4ZXNbaV0gKyB0aXRsZUNhc2U7XG4gICAgaWYgKHN0eWxlW3Byb3BlcnR5TmFtZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHByb3BlcnR5TmFtZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHBvc3NpYmx5IHByZWZpeGVkIEphdmFTY3JpcHQgcHJvcGVydHkgbmFtZSBvZiBhIHN0eWxlIHByb3BlcnR5XG4gKiAoZXguIFdlYmtpdFRyYW5zaXRpb25EdXJhdGlvbikgZ2l2ZW4gYSBjYW1lbENhc2UnZCB2ZXJzaW9uIG9mIHRoZSBwcm9wZXJ0eVxuICogKGV4LiB0cmFuc2l0aW9uRHVyYXRpb24pLlxuICogQGV4cG9ydFxuICogQHBhcmFtIHshT2JqZWN0fSBzdHlsZVxuICogQHBhcmFtIHtzdHJpbmd9IGNhbWVsQ2FzZSB0aGUgY2FtZWwgY2FzZWQgdmVyc2lvbiBvZiBhIGNzcyBwcm9wZXJ0eSBuYW1lXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfYnlwYXNzQ2FjaGUgYnlwYXNzIHRoZSBtZW1vaXplZCBjYWNoZSBvZiBwcm9wZXJ0eVxuICogICBtYXBwaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZShzdHlsZSwgY2FtZWxDYXNlLCBvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgaWYgKHN0YXJ0c1dpdGgoY2FtZWxDYXNlLCAnLS0nKSkge1xuICAgIC8vIENTUyB2YXJzIGFyZSByZXR1cm5lZCBhcyBpcy5cbiAgICByZXR1cm4gY2FtZWxDYXNlO1xuICB9XG4gIGlmICghcHJvcGVydHlOYW1lQ2FjaGUpIHtcbiAgICBwcm9wZXJ0eU5hbWVDYWNoZSA9IG1hcCgpO1xuICB9XG4gIGxldCBwcm9wZXJ0eU5hbWUgPSBwcm9wZXJ0eU5hbWVDYWNoZVtjYW1lbENhc2VdO1xuICBpZiAoIXByb3BlcnR5TmFtZSB8fCBvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgICBwcm9wZXJ0eU5hbWUgPSBjYW1lbENhc2U7XG4gICAgaWYgKHN0eWxlW2NhbWVsQ2FzZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgdGl0bGVDYXNlID0gY2FtZWxDYXNlVG9UaXRsZUNhc2UoY2FtZWxDYXNlKTtcbiAgICAgIGNvbnN0IHByZWZpeGVkUHJvcGVydHlOYW1lID0gZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWVfKHN0eWxlLCB0aXRsZUNhc2UpO1xuXG4gICAgICBpZiAoc3R5bGVbcHJlZml4ZWRQcm9wZXJ0eU5hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvcGVydHlOYW1lID0gcHJlZml4ZWRQcm9wZXJ0eU5hbWU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghb3B0X2J5cGFzc0NhY2hlKSB7XG4gICAgICBwcm9wZXJ0eU5hbWVDYWNoZVtjYW1lbENhc2VdID0gcHJvcGVydHlOYW1lO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcHJvcGVydHlOYW1lO1xufVxuXG5cbi8qKlxuICogU2V0cyB0aGUgQ1NTIHN0eWxlcyBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgd2l0aCAhaW1wb3J0YW50LiBUaGUgc3R5bGVzXG4gKiBhcmUgc3BlY2lmaWVkIGFzIGEgbWFwIGZyb20gQ1NTIHByb3BlcnR5IG5hbWVzIHRvIHRoZWlyIHZhbHVlcy5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7IU9iamVjdDxzdHJpbmcsICo+fSBzdHlsZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEltcG9ydGFudFN0eWxlcyhlbGVtZW50LCBzdHlsZXMpIHtcbiAgZm9yIChjb25zdCBrIGluIHN0eWxlcykge1xuICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgIGdldFZlbmRvckpzUHJvcGVydHlOYW1lKHN0eWxlcywgayksIHN0eWxlc1trXS50b1N0cmluZygpLCAnaW1wb3J0YW50Jyk7XG4gIH1cbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIENTUyBzdHlsZSBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQgd2l0aCBvcHRpb25hbCB1bml0cywgZS5nLiBcInB4XCIuXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRfdW5pdHNcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0U3R5bGUoZWxlbWVudCwgcHJvcGVydHksIHZhbHVlLCBvcHRfdW5pdHMsIG9wdF9ieXBhc3NDYWNoZSkge1xuICBjb25zdCBwcm9wZXJ0eU5hbWUgPSBnZXRWZW5kb3JKc1Byb3BlcnR5TmFtZShlbGVtZW50LnN0eWxlLCBwcm9wZXJ0eSxcbiAgICAgIG9wdF9ieXBhc3NDYWNoZSk7XG4gIGlmIChwcm9wZXJ0eU5hbWUpIHtcbiAgICBlbGVtZW50LnN0eWxlW3Byb3BlcnR5TmFtZV0gPVxuICAgICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovIChvcHRfdW5pdHMgPyB2YWx1ZSArIG9wdF91bml0cyA6IHZhbHVlKTtcbiAgfVxufVxuXG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIENTUyBzdHlsZSBvZiB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHlcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9ieXBhc3NDYWNoZVxuICogQHJldHVybiB7Kn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFN0eWxlKGVsZW1lbnQsIHByb3BlcnR5LCBvcHRfYnlwYXNzQ2FjaGUpIHtcbiAgY29uc3QgcHJvcGVydHlOYW1lID0gZ2V0VmVuZG9ySnNQcm9wZXJ0eU5hbWUoZWxlbWVudC5zdHlsZSwgcHJvcGVydHksXG4gICAgICBvcHRfYnlwYXNzQ2FjaGUpO1xuICBpZiAoIXByb3BlcnR5TmFtZSkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGVsZW1lbnQuc3R5bGVbcHJvcGVydHlOYW1lXTtcbn1cblxuXG4vKipcbiAqIFNldHMgdGhlIENTUyBzdHlsZXMgb2YgdGhlIHNwZWNpZmllZCBlbGVtZW50LiBUaGUgc3R5bGVzXG4gKiBhIHNwZWNpZmllZCBhcyBhIG1hcCBmcm9tIENTUyBwcm9wZXJ0eSBuYW1lcyB0byB0aGVpciB2YWx1ZXMuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0geyFPYmplY3Q8c3RyaW5nLCAqPn0gc3R5bGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRTdHlsZXMoZWxlbWVudCwgc3R5bGVzKSB7XG4gIGZvciAoY29uc3QgayBpbiBzdHlsZXMpIHtcbiAgICBzZXRTdHlsZShlbGVtZW50LCBrLCBzdHlsZXNba10pO1xuICB9XG59XG5cblxuLyoqXG4gKiBTaG93cyBvciBoaWRlcyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuXG4gKiBAcGFyYW0geyFFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfZGlzcGxheVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9nZ2xlKGVsZW1lbnQsIG9wdF9kaXNwbGF5KSB7XG4gIGlmIChvcHRfZGlzcGxheSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgb3B0X2Rpc3BsYXkgPSBnZXRTdHlsZShlbGVtZW50LCAnZGlzcGxheScpID09ICdub25lJztcbiAgfVxuICBzZXRTdHlsZShlbGVtZW50LCAnZGlzcGxheScsIG9wdF9kaXNwbGF5ID8gJycgOiAnbm9uZScpO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIHBpeGVsIHZhbHVlLlxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBweCh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgKyAncHgnO1xufVxuXG5cbi8qKlxuICogUmV0dXJucyBhIFwidHJhbnNsYXRlWFwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZVgodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBgdHJhbnNsYXRlWCgke3ZhbHVlfSlgO1xuICB9XG4gIHJldHVybiBgdHJhbnNsYXRlWCgke3B4KHZhbHVlKX0pYDtcbn1cblxuXG4vKipcbiAqIFJldHVybnMgYSBcInRyYW5zbGF0ZVhcIiBmb3IgQ1NTIFwidHJhbnNmb3JtXCIgcHJvcGVydHkuXG4gKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHhcbiAqIEBwYXJhbSB7KG51bWJlcnxzdHJpbmcpPX0gb3B0X3lcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZSh4LCBvcHRfeSkge1xuICBpZiAodHlwZW9mIHggPT0gJ251bWJlcicpIHtcbiAgICB4ID0gcHgoeCk7XG4gIH1cbiAgaWYgKG9wdF95ID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gYHRyYW5zbGF0ZSgke3h9KWA7XG4gIH1cbiAgaWYgKHR5cGVvZiBvcHRfeSA9PSAnbnVtYmVyJykge1xuICAgIG9wdF95ID0gcHgob3B0X3kpO1xuICB9XG4gIHJldHVybiBgdHJhbnNsYXRlKCR7eH0sICR7b3B0X3l9KWA7XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGEgXCJzY2FsZVwiIGZvciBDU1MgXCJ0cmFuc2Zvcm1cIiBwcm9wZXJ0eS5cbiAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKHZhbHVlKSB7XG4gIHJldHVybiBgc2NhbGUoJHt2YWx1ZX0pYDtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYWxwaGEgdmFsdWUgZnJvbSBhIHJnYmEgY29sb3IgdmFsdWUuXG4gKiBSZXR1cm4gdGhlIG5ldyBjb2xvciBwcm9wZXJ0eSB3aXRoIGFscGhhIGVxdWFscyBpZiBoYXMgdGhlIGFscGhhIHZhbHVlLlxuICogQ2FsbGVyIG5lZWRzIHRvIG1ha2Ugc3VyZSB0aGUgaW5wdXQgY29sb3IgdmFsdWUgaXMgYSB2YWxpZCByZ2JhL3JnYiB2YWx1ZVxuICogQHBhcmFtIHtzdHJpbmd9IHJnYmFDb2xvclxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQWxwaGFGcm9tQ29sb3IocmdiYUNvbG9yKSB7XG4gIHJldHVybiByZ2JhQ29sb3IucmVwbGFjZShcbiAgICAgIC9cXCgoW14sXSspLChbXixdKyksKFteLCldKyksW14pXStcXCkvZywgJygkMSwkMiwkMywgMSknKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBjb21wdXRlZCBzdHlsZSBvZiB0aGUgZWxlbWVudC4gVGhlIGhlbHBlciBpcyBuZWNlc3NhcnkgdG8gZW5mb3JjZVxuICogdGhlIHBvc3NpYmxlIGBudWxsYCB2YWx1ZSByZXR1cm5lZCBieSBhIGJ1Z2d5IEZpcmVmb3guXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7IUVsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVkU3R5bGUod2luLCBlbCkge1xuICBjb25zdCBzdHlsZSA9IC8qKiBAdHlwZSB7P0NTU1N0eWxlRGVjbGFyYXRpb259ICovKHdpbi5nZXRDb21wdXRlZFN0eWxlKGVsKSk7XG4gIHJldHVybiAvKiogQHR5cGUgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fSAqLyhzdHlsZSkgfHwgbWFwKCk7XG59XG5cblxuLyoqXG4gKiBSZXNldHMgc3R5bGVzIHRoYXQgd2VyZSBzZXQgZHluYW1pY2FsbHkgKGkuZS4gaW5saW5lKVxuICogQHBhcmFtIHshRWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gcHJvcGVydGllc1xuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRTdHlsZXMoZWxlbWVudCwgcHJvcGVydGllcykge1xuICBjb25zdCBzdHlsZU9iaiA9IHt9O1xuICBwcm9wZXJ0aWVzLmZvckVhY2gocHJvcCA9PiB7XG4gICAgc3R5bGVPYmpbcHJvcF0gPSBudWxsO1xuICB9KTtcbiAgc2V0U3R5bGVzKGVsZW1lbnQsIHN0eWxlT2JqKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKiBAY29uc3QgKi9cbmNvbnN0IHRvU3RyaW5nXyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgRUNNQSBbW0NsYXNzXV0gb2YgYSB2YWx1ZVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiB0b1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdG9TdHJpbmdfLmNhbGwodmFsdWUpO1xufVxuXG4vKipcbiAqIERldGVybWluZXMgaWYgdmFsdWUgaXMgYWN0dWFsbHkgYW4gQXJyYXkuXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheSh2YWx1ZSkge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYW4gYXJyYXktbGlrZSBvYmplY3QgdG8gYW4gYXJyYXkuXG4gKiBAcGFyYW0gez9JQXJyYXlMaWtlPFQ+fHN0cmluZ30gYXJyYXlMaWtlXG4gKiBAcmV0dXJuIHshQXJyYXk8VD59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9BcnJheShhcnJheUxpa2UpIHtcbiAgaWYgKCFhcnJheUxpa2UpIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgY29uc3QgYXJyYXkgPSBuZXcgQXJyYXkoYXJyYXlMaWtlLmxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXlMaWtlLmxlbmd0aDsgaSsrKSB7XG4gICAgYXJyYXlbaV0gPSBhcnJheUxpa2VbaV07XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIERldGVybWluZXMgaWYgdmFsdWUgaXMgYWN0dWFsbHkgYW4gT2JqZWN0LlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gIHJldHVybiB0b1N0cmluZyh2YWx1ZSkgPT09ICdbb2JqZWN0IE9iamVjdF0nO1xufVxuXG4vKipcbiAqIERldGVybWluZXMgaWYgdmFsdWUgaXMgb2YgbnVtYmVyIHR5cGUgYW5kIGZpbml0ZS5cbiAqIE5hTiBhbmQgSW5maW5pdHkgYXJlIG5vdCBjb25zaWRlcmVkIGEgZmluaXRlIG51bWJlci5cbiAqIFN0cmluZyBudW1iZXJzIGFyZSBub3QgY29uc2lkZXJlZCBudW1iZXJzLlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRmluaXRlTnVtYmVyKHZhbHVlKSB7XG4gIHJldHVybiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSh2YWx1ZSkpO1xufVxuXG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGBzYCBpcyBhIHZhbGlkIHZhbHVlIG9mIGBlbnVtT2JqYC5cbiAqXG4gKiBAcGFyYW0geyFPYmplY3Q8VD59IGVudW1PYmpcbiAqIEBwYXJhbSB7VH0gc1xuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0VudW1WYWx1ZShlbnVtT2JqLCBzKSB7XG4gIGZvciAoY29uc3QgayBpbiBlbnVtT2JqKSB7XG4gICAgaWYgKGVudW1PYmpba10gPT09IHMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogRXh0ZXJucyBkZWNsYXJlIHRoYXQgYWNjZXNzIGBkZWZhdWx0Vmlld2AgZnJvbSBgZG9jdW1lbnRgIG9yXG4gKiBgb3duZXJEb2N1bWVudGAgaXMgb2YgdHlwZSBgKFdpbmRvd3xudWxsKWAgYnV0IG1vc3Qgb2Ygb3VyIHBhcmFtZXRlciB0eXBlc1xuICogYXNzdW1lIHRoYXQgaXQgaXMgbmV2ZXIgbnVsbC4gVGhpcyBpcyBPSyBpbiBwcmFjdGljZSBhcyB3ZSBldmVyIG9ubHkgZ2V0XG4gKiBudWxsIG9uIGRpc2Nvbm5lY3RlZCBkb2N1bWVudHMgb3Igb2xkIElFLlxuICogVGhpcyBoZWxwZXIgZnVuY3Rpb24gY2FzdHMgaXQgaW50byBqdXN0IGEgc2ltcGxlIFdpbmRvdyByZXR1cm4gdHlwZS5cbiAqXG4gKiBAcGFyYW0geyFXaW5kb3d8bnVsbH0gd2luT3JOdWxsXG4gKiBAcmV0dXJuIHshV2luZG93fVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9XaW4od2luT3JOdWxsKSB7XG4gIHJldHVybiAvKiogQHR5cGUgeyFXaW5kb3d9ICovICh3aW5Pck51bGwpO1xufVxuXG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE3IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHt0cnlEZWNvZGVVcmlDb21wb25lbnRffSBmcm9tICcuL3VybC10cnktZGVjb2RlLXVyaS1jb21wb25lbnQnO1xuXG5jb25zdCByZWdleCA9IC8oPzpeWyM/XT98JikoW149Jl0rKSg/Oj0oW14mXSopKT8vZztcblxuLyoqXG4gKiBQYXJzZXMgdGhlIHF1ZXJ5IHN0cmluZyBvZiBhbiBVUkwuIFRoaXMgbWV0aG9kIHJldHVybnMgYSBzaW1wbGUga2V5L3ZhbHVlXG4gKiBtYXAuIElmIHRoZXJlIGFyZSBkdXBsaWNhdGUga2V5cyB0aGUgbGF0ZXN0IHZhbHVlIGlzIHJldHVybmVkLlxuICpcbiAqIERPIE5PVCBpbXBvcnQgdGhlIGZ1bmN0aW9uIGZyb20gdGhpcyBmaWxlLiBJbnN0ZWFkLCBpbXBvcnQgcGFyc2VRdWVyeVN0cmluZ1xuICogZnJvbSBgc3JjL3VybC5qc2AuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHF1ZXJ5U3RyaW5nXG4gKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUXVlcnlTdHJpbmdfKHF1ZXJ5U3RyaW5nKSB7XG4gIGNvbnN0IHBhcmFtcyA9IC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovIChPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgaWYgKCFxdWVyeVN0cmluZykge1xuICAgIHJldHVybiBwYXJhbXM7XG4gIH1cblxuICBsZXQgbWF0Y2g7XG4gIHdoaWxlICgobWF0Y2ggPSByZWdleC5leGVjKHF1ZXJ5U3RyaW5nKSkpIHtcbiAgICBjb25zdCBuYW1lID0gdHJ5RGVjb2RlVXJpQ29tcG9uZW50XyhtYXRjaFsxXSwgbWF0Y2hbMV0pO1xuICAgIGNvbnN0IHZhbHVlID0gbWF0Y2hbMl0gPyB0cnlEZWNvZGVVcmlDb21wb25lbnRfKG1hdGNoWzJdLCBtYXRjaFsyXSkgOiAnJztcbiAgICBwYXJhbXNbbmFtZV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gcGFyYW1zO1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogVHJpZXMgdG8gZGVjb2RlIGEgVVJJIGNvbXBvbmVudCwgZmFsbGluZyBiYWNrIHRvIG9wdF9mYWxsYmFjayAob3IgYW4gZW1wdHlcbiAqIHN0cmluZylcbiAqXG4gKiBETyBOT1QgaW1wb3J0IHRoZSBmdW5jdGlvbiBmcm9tIHRoaXMgZmlsZS4gSW5zdGVhZCwgaW1wb3J0XG4gKiB0cnlEZWNvZGVVcmlDb21wb25lbnQgZnJvbSBgc3JjL3VybC5qc2AuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudFxuICogQHBhcmFtIHtzdHJpbmc9fSBmYWxsYmFja1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJ5RGVjb2RlVXJpQ29tcG9uZW50Xyhjb21wb25lbnQsIGZhbGxiYWNrID0gJycpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGNvbXBvbmVudCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsbGJhY2s7XG4gIH1cbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTUgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge2VuZHNXaXRoLCBzdGFydHNXaXRofSBmcm9tICcuL3N0cmluZyc7XG5pbXBvcnQge2dldE1vZGV9IGZyb20gJy4vbW9kZSc7XG5pbXBvcnQge2lzQXJyYXl9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtwYXJzZVF1ZXJ5U3RyaW5nX30gZnJvbSAnLi91cmwtcGFyc2UtcXVlcnktc3RyaW5nJztcbmltcG9ydCB7dHJ5RGVjb2RlVXJpQ29tcG9uZW50X30gZnJvbSAnLi91cmwtdHJ5LWRlY29kZS11cmktY29tcG9uZW50JztcbmltcG9ydCB7dXJsc30gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHt1c2VyfSBmcm9tICcuL2xvZyc7XG5cbi8qKlxuICogQ2FjaGVkIGEtdGFnIHRvIGF2b2lkIG1lbW9yeSBhbGxvY2F0aW9uIGR1cmluZyBVUkwgcGFyc2luZy5cbiAqIEB0eXBlIHtIVE1MQW5jaG9yRWxlbWVudH1cbiAqL1xubGV0IGE7XG5cbi8qKlxuICogV2UgY2FjaGVkIGFsbCBwYXJzZWQgVVJMcy4gQXMgb2Ygbm93IHRoZXJlIGFyZSBubyB1c2UgY2FzZXNcbiAqIG9mIEFNUCBkb2NzIHRoYXQgd291bGQgZXZlciBwYXJzZSBhbiBhY3R1YWwgbGFyZ2UgbnVtYmVyIG9mIFVSTHMsXG4gKiBidXQgd2Ugb2Z0ZW4gcGFyc2UgdGhlIHNhbWUgb25lIG92ZXIgYW5kIG92ZXIgYWdhaW4uXG4gKiBAdHlwZSB7T2JqZWN0PHN0cmluZywgIUxvY2F0aW9uPn1cbiAqL1xubGV0IGNhY2hlO1xuXG4vKiogQHByaXZhdGUgQGNvbnN0IE1hdGNoZXMgYW1wX2pzXyogcGFyYW1ldGVycyBpbiBxdWVyeSBzdHJpbmcuICovXG5jb25zdCBBTVBfSlNfUEFSQU1TX1JFR0VYID0gL1s/Jl1hbXBfanNbXiZdKi87XG5cbi8qKiBAcHJpdmF0ZSBAY29uc3QgTWF0Y2hlcyB1c3FwIHBhcmFtZXRlcnMgZnJvbSBnb29nIGV4cGVyaW1lbnQgaW4gcXVlcnkgc3RyaW5nLiAqL1xuY29uc3QgR09PR0xFX0VYUEVSSU1FTlRfUEFSQU1TX1JFR0VYID0gL1s/Jl11c3FwW14mXSovO1xuXG5jb25zdCBJTlZBTElEX1BST1RPQ09MUyA9IFtcbiAgLyplc2xpbnQgbm8tc2NyaXB0LXVybDogMCovICdqYXZhc2NyaXB0OicsXG4gIC8qZXNsaW50IG5vLXNjcmlwdC11cmw6IDAqLyAnZGF0YTonLFxuICAvKmVzbGludCBuby1zY3JpcHQtdXJsOiAwKi8gJ3Zic2NyaXB0OicsXG5dO1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5leHBvcnQgY29uc3QgU09VUkNFX09SSUdJTl9QQVJBTSA9ICdfX2FtcF9zb3VyY2Vfb3JpZ2luJztcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjb3JyZWN0IG9yaWdpbiBmb3IgYSBnaXZlbiB3aW5kb3cuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHJldHVybiB7c3RyaW5nfSBvcmlnaW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFdpbk9yaWdpbih3aW4pIHtcbiAgcmV0dXJuIHdpbi5vcmlnaW4gfHwgcGFyc2VVcmwod2luLmxvY2F0aW9uLmhyZWYpLm9yaWdpbjtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgTG9jYXRpb24tbGlrZSBvYmplY3QgZm9yIHRoZSBnaXZlbiBVUkwuIElmIGl0IGlzIHJlbGF0aXZlLFxuICogdGhlIFVSTCBnZXRzIHJlc29sdmVkLlxuICogQ29uc2lkZXIgdGhlIHJldHVybmVkIG9iamVjdCBpbW11dGFibGUuIFRoaXMgaXMgZW5mb3JjZWQgZHVyaW5nXG4gKiB0ZXN0aW5nIGJ5IGZyZWV6aW5nIHRoZSBvYmplY3QuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBvcHRfbm9jYWNoZVxuICogQHJldHVybiB7IUxvY2F0aW9ufVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VVcmwodXJsLCBvcHRfbm9jYWNoZSkge1xuICBpZiAoIWEpIHtcbiAgICBhID0gLyoqIEB0eXBlIHshSFRNTEFuY2hvckVsZW1lbnR9ICovIChzZWxmLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSk7XG4gICAgY2FjaGUgPSBzZWxmLlVybENhY2hlIHx8IChzZWxmLlVybENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gIH1cblxuICBjb25zdCBmcm9tQ2FjaGUgPSBjYWNoZVt1cmxdO1xuICBpZiAoZnJvbUNhY2hlKSB7XG4gICAgcmV0dXJuIGZyb21DYWNoZTtcbiAgfVxuXG4gIGNvbnN0IGluZm8gPSBwYXJzZVVybFdpdGhBKGEsIHVybCk7XG5cbiAgLy8gRnJlZXplIGR1cmluZyB0ZXN0aW5nIHRvIGF2b2lkIGFjY2lkZW50YWwgbXV0YXRpb24uXG4gIGNvbnN0IGZyb3plbiA9IChnZXRNb2RlKCkudGVzdCAmJiBPYmplY3QuZnJlZXplKSA/IE9iamVjdC5mcmVlemUoaW5mbykgOiBpbmZvO1xuXG4gIGlmIChvcHRfbm9jYWNoZSkge1xuICAgIHJldHVybiBmcm96ZW47XG4gIH1cbiAgcmV0dXJuIGNhY2hlW3VybF0gPSBmcm96ZW47XG59XG5cbi8qKlxuICogUmV0dXJucyBhIExvY2F0aW9uLWxpa2Ugb2JqZWN0IGZvciB0aGUgZ2l2ZW4gVVJMLiBJZiBpdCBpcyByZWxhdGl2ZSxcbiAqIHRoZSBVUkwgZ2V0cyByZXNvbHZlZC5cbiAqIEBwYXJhbSB7IUhUTUxBbmNob3JFbGVtZW50fSBhXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcmV0dXJuIHshTG9jYXRpb259XG4gKiBAcmVzdHJpY3RlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VVcmxXaXRoQShhLCB1cmwpIHtcbiAgYS5ocmVmID0gdXJsO1xuXG4gIC8vIElFMTEgZG9lc24ndCBwcm92aWRlIGZ1bGwgVVJMIGNvbXBvbmVudHMgd2hlbiBwYXJzaW5nIHJlbGF0aXZlIFVSTHMuXG4gIC8vIEFzc2lnbmluZyB0byBpdHNlbGYgYWdhaW4gZG9lcyB0aGUgdHJpY2sgIzM0NDkuXG4gIGlmICghYS5wcm90b2NvbCkge1xuICAgIGEuaHJlZiA9IGEuaHJlZjtcbiAgfVxuXG4gIGNvbnN0IGluZm8gPSAvKiogQHR5cGUgeyFMb2NhdGlvbn0gKi8oe1xuICAgIGhyZWY6IGEuaHJlZixcbiAgICBwcm90b2NvbDogYS5wcm90b2NvbCxcbiAgICBob3N0OiBhLmhvc3QsXG4gICAgaG9zdG5hbWU6IGEuaG9zdG5hbWUsXG4gICAgcG9ydDogYS5wb3J0ID09ICcwJyA/ICcnIDogYS5wb3J0LFxuICAgIHBhdGhuYW1lOiBhLnBhdGhuYW1lLFxuICAgIHNlYXJjaDogYS5zZWFyY2gsXG4gICAgaGFzaDogYS5oYXNoLFxuICAgIG9yaWdpbjogbnVsbCwgLy8gU2V0IGJlbG93LlxuICB9KTtcblxuICAvLyBTb21lIElFMTEgc3BlY2lmaWMgcG9seWZpbGxzLlxuICAvLyAxKSBJRTExIHN0cmlwcyBvdXQgdGhlIGxlYWRpbmcgJy8nIGluIHRoZSBwYXRobmFtZS5cbiAgaWYgKGluZm8ucGF0aG5hbWVbMF0gIT09ICcvJykge1xuICAgIGluZm8ucGF0aG5hbWUgPSAnLycgKyBpbmZvLnBhdGhuYW1lO1xuICB9XG5cbiAgLy8gMikgRm9yIFVSTHMgd2l0aCBpbXBsaWNpdCBwb3J0cywgSUUxMSBwYXJzZXMgdG8gZGVmYXVsdCBwb3J0cyB3aGlsZVxuICAvLyBvdGhlciBicm93c2VycyBsZWF2ZSB0aGUgcG9ydCBmaWVsZCBlbXB0eS5cbiAgaWYgKChpbmZvLnByb3RvY29sID09ICdodHRwOicgJiYgaW5mby5wb3J0ID09IDgwKVxuICAgICAgfHwgKGluZm8ucHJvdG9jb2wgPT0gJ2h0dHBzOicgJiYgaW5mby5wb3J0ID09IDQ0MykpIHtcbiAgICBpbmZvLnBvcnQgPSAnJztcbiAgICBpbmZvLmhvc3QgPSBpbmZvLmhvc3RuYW1lO1xuICB9XG5cbiAgLy8gRm9yIGRhdGEgVVJJIGEub3JpZ2luIGlzIGVxdWFsIHRvIHRoZSBzdHJpbmcgJ251bGwnIHdoaWNoIGlzIG5vdCB1c2VmdWwuXG4gIC8vIFdlIGluc3RlYWQgcmV0dXJuIHRoZSBhY3R1YWwgb3JpZ2luIHdoaWNoIGlzIHRoZSBmdWxsIFVSTC5cbiAgaWYgKGEub3JpZ2luICYmIGEub3JpZ2luICE9ICdudWxsJykge1xuICAgIGluZm8ub3JpZ2luID0gYS5vcmlnaW47XG4gIH0gZWxzZSBpZiAoaW5mby5wcm90b2NvbCA9PSAnZGF0YTonIHx8ICFpbmZvLmhvc3QpIHtcbiAgICBpbmZvLm9yaWdpbiA9IGluZm8uaHJlZjtcbiAgfSBlbHNlIHtcbiAgICBpbmZvLm9yaWdpbiA9IGluZm8ucHJvdG9jb2wgKyAnLy8nICsgaW5mby5ob3N0O1xuICB9XG4gIHJldHVybiBpbmZvO1xufVxuXG4vKipcbiAqIEFwcGVuZHMgdGhlIHN0cmluZyBqdXN0IGJlZm9yZSB0aGUgZnJhZ21lbnQgcGFydCAob3Igb3B0aW9uYWxseVxuICogdG8gdGhlIGZyb250IG9mIHRoZSBxdWVyeSBzdHJpbmcpIG9mIHRoZSBVUkwuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyYW1TdHJpbmdcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9hZGRUb0Zyb250XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRFbmNvZGVkUGFyYW1TdHJpbmdUb1VybCh1cmwsIHBhcmFtU3RyaW5nLFxuICBvcHRfYWRkVG9Gcm9udCkge1xuICBpZiAoIXBhcmFtU3RyaW5nKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICBjb25zdCBtYWluQW5kRnJhZ21lbnQgPSB1cmwuc3BsaXQoJyMnLCAyKTtcbiAgY29uc3QgbWFpbkFuZFF1ZXJ5ID0gbWFpbkFuZEZyYWdtZW50WzBdLnNwbGl0KCc/JywgMik7XG5cbiAgbGV0IG5ld1VybCA9IG1haW5BbmRRdWVyeVswXSArIChcbiAgICBtYWluQW5kUXVlcnlbMV1cbiAgICAgID8gKG9wdF9hZGRUb0Zyb250XG4gICAgICAgID8gYD8ke3BhcmFtU3RyaW5nfSYke21haW5BbmRRdWVyeVsxXX1gXG4gICAgICAgIDogYD8ke21haW5BbmRRdWVyeVsxXX0mJHtwYXJhbVN0cmluZ31gKVxuICAgICAgOiBgPyR7cGFyYW1TdHJpbmd9YCk7XG4gIG5ld1VybCArPSBtYWluQW5kRnJhZ21lbnRbMV0gPyBgIyR7bWFpbkFuZEZyYWdtZW50WzFdfWAgOiAnJztcbiAgcmV0dXJuIG5ld1VybDtcbn1cbi8qKlxuICogQXBwZW5kcyBhIHF1ZXJ5IHN0cmluZyBmaWVsZCBhbmQgdmFsdWUgdG8gYSB1cmwuIGBrZXlgIGFuZCBgdmFsdWVgXG4gKiB3aWxsIGJlIHJhbiB0aHJvdWdoIGBlbmNvZGVVUklDb21wb25lbnRgIGJlZm9yZSBhcHBlbmRpbmcuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9wdF9hZGRUb0Zyb250XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRQYXJhbVRvVXJsKHVybCwga2V5LCB2YWx1ZSwgb3B0X2FkZFRvRnJvbnQpIHtcbiAgY29uc3QgZmllbGQgPSBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09JHtlbmNvZGVVUklDb21wb25lbnQodmFsdWUpfWA7XG4gIHJldHVybiBhcHBlbmRFbmNvZGVkUGFyYW1TdHJpbmdUb1VybCh1cmwsIGZpZWxkLCBvcHRfYWRkVG9Gcm9udCk7XG59XG5cbi8qKlxuICogQXBwZW5kcyBxdWVyeSBzdHJpbmcgZmllbGRzIGFuZCB2YWx1ZXMgdG8gYSB1cmwuIFRoZSBgcGFyYW1zYCBvYmplY3RzJ1xuICogYGtleWBzIGFuZCBgdmFsdWVgcyB3aWxsIGJlIHRyYW5zZm9ybWVkIGludG8gcXVlcnkgc3RyaW5nIGtleXMvdmFsdWVzLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHBhcmFtIHshSnNvbk9iamVjdDxzdHJpbmcsIHN0cmluZ3whQXJyYXk8c3RyaW5nPj59IHBhcmFtc1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkUGFyYW1zVG9VcmwodXJsLCBwYXJhbXMpIHtcbiAgcmV0dXJuIGFwcGVuZEVuY29kZWRQYXJhbVN0cmluZ1RvVXJsKHVybCwgc2VyaWFsaXplUXVlcnlTdHJpbmcocGFyYW1zKSk7XG59XG5cbi8qKlxuICogU2VyaWFsaXplcyB0aGUgcGFzc2VkIHBhcmFtZXRlciBtYXAgaW50byBhIHF1ZXJ5IHN0cmluZyB3aXRoIGJvdGgga2V5c1xuICogYW5kIHZhbHVlcyBlbmNvZGVkLlxuICogQHBhcmFtIHshSnNvbk9iamVjdDxzdHJpbmcsIHN0cmluZ3whQXJyYXk8c3RyaW5nPj59IHBhcmFtc1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplUXVlcnlTdHJpbmcocGFyYW1zKSB7XG4gIGNvbnN0IHMgPSBbXTtcbiAgZm9yIChjb25zdCBrIGluIHBhcmFtcykge1xuICAgIGNvbnN0IHYgPSBwYXJhbXNba107XG4gICAgaWYgKHYgPT0gbnVsbCkge1xuICAgICAgY29udGludWU7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KHYpKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHYubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgc3YgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKHZbaV0pO1xuICAgICAgICBzLnB1c2goYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGspfT0ke2VuY29kZVVSSUNvbXBvbmVudChzdil9YCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHN2ID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovICh2KTtcbiAgICAgIHMucHVzaChgJHtlbmNvZGVVUklDb21wb25lbnQoayl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHN2KX1gKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHMuam9pbignJicpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYHRydWVgIGlmIHRoZSBVUkwgaXMgc2VjdXJlOiBlaXRoZXIgSFRUUFMgb3IgbG9jYWxob3N0IChmb3IgdGVzdGluZykuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzU2VjdXJlVXJsKHVybCkge1xuICBpZiAodHlwZW9mIHVybCA9PSAnc3RyaW5nJykge1xuICAgIHVybCA9IHBhcnNlVXJsKHVybCk7XG4gIH1cbiAgcmV0dXJuICh1cmwucHJvdG9jb2wgPT0gJ2h0dHBzOicgfHxcbiAgICAgIHVybC5ob3N0bmFtZSA9PSAnbG9jYWxob3N0JyB8fFxuICAgICAgZW5kc1dpdGgodXJsLmhvc3RuYW1lLCAnLmxvY2FsaG9zdCcpKTtcbn1cblxuLyoqXG4gKiBBc3NlcnRzIHRoYXQgYSBnaXZlbiB1cmwgaXMgSFRUUFMgb3IgcHJvdG9jb2wgcmVsYXRpdmUuIEl0J3MgYSB1c2VyLWxldmVsXG4gKiBhc3NlcnQuXG4gKlxuICogUHJvdmlkZXMgYW4gZXhjZXB0aW9uIGZvciBsb2NhbGhvc3QuXG4gKlxuICogQHBhcmFtIHs/c3RyaW5nfHVuZGVmaW5lZH0gdXJsU3RyaW5nXG4gKiBAcGFyYW0geyFFbGVtZW50fHN0cmluZ30gZWxlbWVudENvbnRleHQgRWxlbWVudCB3aGVyZSB0aGUgdXJsIHdhcyBmb3VuZC5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gc291cmNlTmFtZSBVc2VkIGZvciBlcnJvciBtZXNzYWdlcy5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydEh0dHBzVXJsKFxuICB1cmxTdHJpbmcsIGVsZW1lbnRDb250ZXh0LCBzb3VyY2VOYW1lID0gJ3NvdXJjZScpIHtcbiAgdXNlcigpLmFzc2VydCh1cmxTdHJpbmcgIT0gbnVsbCwgJyVzICVzIG11c3QgYmUgYXZhaWxhYmxlJyxcbiAgICAgIGVsZW1lbnRDb250ZXh0LCBzb3VyY2VOYW1lKTtcbiAgLy8gKGVyd2lubSwgIzQ1NjApOiB0eXBlIGNhc3QgbmVjZXNzYXJ5IHVudGlsICM0NTYwIGlzIGZpeGVkLlxuICBjb25zdCB0aGVVcmxTdHJpbmcgPSAvKiogQHR5cGUge3N0cmluZ30gKi8gKHVybFN0cmluZyk7XG4gIHVzZXIoKS5hc3NlcnQoaXNTZWN1cmVVcmwodGhlVXJsU3RyaW5nKSB8fCAvXihcXC9cXC8pLy50ZXN0KHRoZVVybFN0cmluZyksXG4gICAgICAnJXMgJXMgbXVzdCBzdGFydCB3aXRoICcgK1xuICAgICAgJ1wiaHR0cHM6Ly9cIiBvciBcIi8vXCIgb3IgYmUgcmVsYXRpdmUgYW5kIHNlcnZlZCBmcm9tICcgK1xuICAgICAgJ2VpdGhlciBodHRwcyBvciBmcm9tIGxvY2FsaG9zdC4gSW52YWxpZCB2YWx1ZTogJXMnLFxuICAgICAgZWxlbWVudENvbnRleHQsIHNvdXJjZU5hbWUsIHRoZVVybFN0cmluZyk7XG4gIHJldHVybiB0aGVVcmxTdHJpbmc7XG59XG5cbi8qKlxuICogQXNzZXJ0cyB0aGF0IGEgZ2l2ZW4gdXJsIGlzIGFuIGFic29sdXRlIEhUVFAgb3IgSFRUUFMgVVJMLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXNzZXJ0QWJzb2x1dGVIdHRwT3JIdHRwc1VybCh1cmxTdHJpbmcpIHtcbiAgdXNlcigpLmFzc2VydCgvXmh0dHBzP1xcOi9pLnRlc3QodXJsU3RyaW5nKSxcbiAgICAgICdVUkwgbXVzdCBzdGFydCB3aXRoIFwiaHR0cDovL1wiIG9yIFwiaHR0cHM6Ly9cIi4gSW52YWxpZCB2YWx1ZTogJXMnLFxuICAgICAgdXJsU3RyaW5nKTtcbiAgcmV0dXJuIHBhcnNlVXJsKHVybFN0cmluZykuaHJlZjtcbn1cblxuXG4vKipcbiAqIFBhcnNlcyB0aGUgcXVlcnkgc3RyaW5nIG9mIGFuIFVSTC4gVGhpcyBtZXRob2QgcmV0dXJucyBhIHNpbXBsZSBrZXkvdmFsdWVcbiAqIG1hcC4gSWYgdGhlcmUgYXJlIGR1cGxpY2F0ZSBrZXlzIHRoZSBsYXRlc3QgdmFsdWUgaXMgcmV0dXJuZWQuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyBpbXBsZW1lbnRlZCBpbiBhIHNlcGFyYXRlIGZpbGUgdG8gYXZvaWQgYSBjaXJjdWxhclxuICogZGVwZW5kZW5jeS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnlTdHJpbmdcbiAqIEByZXR1cm4geyFKc29uT2JqZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZykge1xuICByZXR1cm4gcGFyc2VRdWVyeVN0cmluZ18ocXVlcnlTdHJpbmcpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIFVSTCB3aXRob3V0IGZyYWdtZW50LiBJZiBVUkwgZG9lc24ndCBjb250YWluIGZyYWdtZW50LCB0aGUgc2FtZVxuICogc3RyaW5nIGlzIHJldHVybmVkLlxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRnJhZ21lbnQodXJsKSB7XG4gIGNvbnN0IGluZGV4ID0gdXJsLmluZGV4T2YoJyMnKTtcbiAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgcmV0dXJuIHVybDtcbiAgfVxuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCBpbmRleCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZnJhZ21lbnQgZnJvbSB0aGUgVVJMLiBJZiB0aGUgVVJMIGRvZXNuJ3QgY29udGFpbiBmcmFnbWVudCxcbiAqIHRoZSBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRGcmFnbWVudCh1cmwpIHtcbiAgY29uc3QgaW5kZXggPSB1cmwuaW5kZXhPZignIycpO1xuICBpZiAoaW5kZXggPT0gLTEpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgcmV0dXJuIHVybC5zdWJzdHJpbmcoaW5kZXgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgVVJMIGhhcyB0aGUgb3JpZ2luIG9mIGEgcHJveHkuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybCBVUkwgb2YgYW4gQU1QIGRvY3VtZW50LlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUHJveHlPcmlnaW4odXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmwodXJsKTtcbiAgfVxuICByZXR1cm4gdXJscy5jZG5Qcm94eVJlZ2V4LnRlc3QodXJsLm9yaWdpbik7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBVUkwgb3JpZ2luIGlzIGxvY2FsaG9zdC5cbiAqIEBwYXJhbSB7c3RyaW5nfCFMb2NhdGlvbn0gdXJsIFVSTCBvZiBhbiBBTVAgZG9jdW1lbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNMb2NhbGhvc3RPcmlnaW4odXJsKSB7XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmwodXJsKTtcbiAgfVxuICByZXR1cm4gdXJscy5sb2NhbGhvc3RSZWdleC50ZXN0KHVybC5vcmlnaW4pO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgVVJMIGhhcyB2YWxpZCBwcm90b2NvbC5cbiAqIERlZXAgbGluayBwcm90b2NvbCBpcyB2YWxpZCwgYnV0IG5vdCBqYXZhc2NyaXB0IGV0Yy5cbiAqIEBwYXJhbSB7c3RyaW5nfCFMb2NhdGlvbn0gdXJsXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNQcm90b2NvbFZhbGlkKHVybCkge1xuICBpZiAoIXVybCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh0eXBlb2YgdXJsID09ICdzdHJpbmcnKSB7XG4gICAgdXJsID0gcGFyc2VVcmwodXJsKTtcbiAgfVxuICByZXR1cm4gIUlOVkFMSURfUFJPVE9DT0xTLmluY2x1ZGVzKHVybC5wcm90b2NvbCk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBwYXJhbWV0ZXJzIHRoYXQgc3RhcnQgd2l0aCBhbXAganMgcGFyYW1ldGVyIHBhdHRlcm4gYW5kIHJldHVybnMgdGhlIG5ld1xuICogc2VhcmNoIHN0cmluZy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxTZWFyY2hcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQW1wSnNQYXJhbXModXJsU2VhcmNoKSB7XG4gIGlmICghdXJsU2VhcmNoIHx8IHVybFNlYXJjaCA9PSAnPycpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgY29uc3Qgc2VhcmNoID0gdXJsU2VhcmNoXG4gICAgICAucmVwbGFjZShBTVBfSlNfUEFSQU1TX1JFR0VYLCAnJylcbiAgICAgIC5yZXBsYWNlKEdPT0dMRV9FWFBFUklNRU5UX1BBUkFNU19SRUdFWCwgJycpXG4gICAgICAucmVwbGFjZSgvXls/Jl0vLCAnJyk7IC8vIFJlbW92ZXMgZmlyc3QgPyBvciAmLlxuICByZXR1cm4gc2VhcmNoID8gJz8nICsgc2VhcmNoIDogJyc7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc291cmNlIFVSTCBvZiBhbiBBTVAgZG9jdW1lbnQgZm9yIGRvY3VtZW50cyBzZXJ2ZWRcbiAqIG9uIGEgcHJveHkgb3JpZ2luIG9yIGRpcmVjdGx5LlxuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSB1cmwgVVJMIG9mIGFuIEFNUCBkb2N1bWVudC5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFNvdXJjZVVybCh1cmwpIHtcbiAgaWYgKHR5cGVvZiB1cmwgPT0gJ3N0cmluZycpIHtcbiAgICB1cmwgPSBwYXJzZVVybCh1cmwpO1xuICB9XG5cbiAgLy8gTm90IGEgcHJveHkgVVJMIC0gcmV0dXJuIHRoZSBVUkwgaXRzZWxmLlxuICBpZiAoIWlzUHJveHlPcmlnaW4odXJsKSkge1xuICAgIHJldHVybiB1cmwuaHJlZjtcbiAgfVxuXG4gIC8vIEEgcHJveHkgVVJMLlxuICAvLyBFeGFtcGxlIHBhdGggdGhhdCBpcyBiZWluZyBtYXRjaGVkIGhlcmUuXG4gIC8vIGh0dHBzOi8vY2RuLmFtcHByb2plY3Qub3JnL2Mvcy93d3cub3JpZ2luLmNvbS9mb28vXG4gIC8vIFRoZSAvcy8gaXMgb3B0aW9uYWwgYW5kIHNpZ25hbHMgYSBzZWN1cmUgb3JpZ2luLlxuICBjb25zdCBwYXRoID0gdXJsLnBhdGhuYW1lLnNwbGl0KCcvJyk7XG4gIGNvbnN0IHByZWZpeCA9IHBhdGhbMV07XG4gIHVzZXIoKS5hc3NlcnQocHJlZml4ID09ICdhJyB8fCBwcmVmaXggPT0gJ2MnIHx8IHByZWZpeCA9PSAndicsXG4gICAgICAnVW5rbm93biBwYXRoIHByZWZpeCBpbiB1cmwgJXMnLCB1cmwuaHJlZik7XG4gIGNvbnN0IGRvbWFpbk9ySHR0cHNTaWduYWwgPSBwYXRoWzJdO1xuICBjb25zdCBvcmlnaW4gPSBkb21haW5Pckh0dHBzU2lnbmFsID09ICdzJ1xuICAgID8gJ2h0dHBzOi8vJyArIGRlY29kZVVSSUNvbXBvbmVudChwYXRoWzNdKVxuICAgIDogJ2h0dHA6Ly8nICsgZGVjb2RlVVJJQ29tcG9uZW50KGRvbWFpbk9ySHR0cHNTaWduYWwpO1xuICAvLyBTYW5pdHkgdGVzdCB0aGF0IHdoYXQgd2UgZm91bmQgbG9va3MgbGlrZSBhIGRvbWFpbi5cbiAgdXNlcigpLmFzc2VydChvcmlnaW4uaW5kZXhPZignLicpID4gMCwgJ0V4cGVjdGVkIGEgLiBpbiBvcmlnaW4gJXMnLCBvcmlnaW4pO1xuICBwYXRoLnNwbGljZSgxLCBkb21haW5Pckh0dHBzU2lnbmFsID09ICdzJyA/IDMgOiAyKTtcbiAgcmV0dXJuIG9yaWdpbiArIHBhdGguam9pbignLycpICsgcmVtb3ZlQW1wSnNQYXJhbXModXJsLnNlYXJjaCkgK1xuICAgICAgKHVybC5oYXNoIHx8ICcnKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzb3VyY2Ugb3JpZ2luIG9mIGFuIEFNUCBkb2N1bWVudCBmb3IgZG9jdW1lbnRzIHNlcnZlZFxuICogb24gYSBwcm94eSBvcmlnaW4gb3IgZGlyZWN0bHkuXG4gKiBAcGFyYW0ge3N0cmluZ3whTG9jYXRpb259IHVybCBVUkwgb2YgYW4gQU1QIGRvY3VtZW50LlxuICogQHJldHVybiB7c3RyaW5nfSBUaGUgc291cmNlIG9yaWdpbiBvZiB0aGUgVVJMLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0U291cmNlT3JpZ2luKHVybCkge1xuICByZXR1cm4gcGFyc2VVcmwoZ2V0U291cmNlVXJsKHVybCkpLm9yaWdpbjtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFic29sdXRlIFVSTCByZXNvbHZlZCBiYXNlZCBvbiB0aGUgcmVsYXRpdmUgVVJMIGFuZCB0aGUgYmFzZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVybFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSBiYXNlVXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlUmVsYXRpdmVVcmwocmVsYXRpdmVVcmxTdHJpbmcsIGJhc2VVcmwpIHtcbiAgaWYgKHR5cGVvZiBiYXNlVXJsID09ICdzdHJpbmcnKSB7XG4gICAgYmFzZVVybCA9IHBhcnNlVXJsKGJhc2VVcmwpO1xuICB9XG4gIGlmICh0eXBlb2YgVVJMID09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gbmV3IFVSTChyZWxhdGl2ZVVybFN0cmluZywgYmFzZVVybC5ocmVmKS50b1N0cmluZygpO1xuICB9XG4gIHJldHVybiByZXNvbHZlUmVsYXRpdmVVcmxGYWxsYmFja18ocmVsYXRpdmVVcmxTdHJpbmcsIGJhc2VVcmwpO1xufVxuXG4vKipcbiAqIEZhbGxiYWNrIGZvciBVUkwgcmVzb2x2ZXIgd2hlbiBVUkwgY2xhc3MgaXMgbm90IGF2YWlsYWJsZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSByZWxhdGl2ZVVybFN0cmluZ1xuICogQHBhcmFtIHtzdHJpbmd8IUxvY2F0aW9ufSBiYXNlVXJsXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKiBAcHJpdmF0ZSBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVJlbGF0aXZlVXJsRmFsbGJhY2tfKHJlbGF0aXZlVXJsU3RyaW5nLCBiYXNlVXJsKSB7XG4gIGlmICh0eXBlb2YgYmFzZVVybCA9PSAnc3RyaW5nJykge1xuICAgIGJhc2VVcmwgPSBwYXJzZVVybChiYXNlVXJsKTtcbiAgfVxuICByZWxhdGl2ZVVybFN0cmluZyA9IHJlbGF0aXZlVXJsU3RyaW5nLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcbiAgY29uc3QgcmVsYXRpdmVVcmwgPSBwYXJzZVVybChyZWxhdGl2ZVVybFN0cmluZyk7XG5cbiAgLy8gQWJzb2x1dGUgVVJMLlxuICBpZiAoc3RhcnRzV2l0aChyZWxhdGl2ZVVybFN0cmluZy50b0xvd2VyQ2FzZSgpLCByZWxhdGl2ZVVybC5wcm90b2NvbCkpIHtcbiAgICByZXR1cm4gcmVsYXRpdmVVcmwuaHJlZjtcbiAgfVxuXG4gIC8vIFByb3RvY29sLXJlbGF0aXZlIFVSTC5cbiAgaWYgKHN0YXJ0c1dpdGgocmVsYXRpdmVVcmxTdHJpbmcsICcvLycpKSB7XG4gICAgcmV0dXJuIGJhc2VVcmwucHJvdG9jb2wgKyByZWxhdGl2ZVVybFN0cmluZztcbiAgfVxuXG4gIC8vIEFic29sdXRlIHBhdGguXG4gIGlmIChzdGFydHNXaXRoKHJlbGF0aXZlVXJsU3RyaW5nLCAnLycpKSB7XG4gICAgcmV0dXJuIGJhc2VVcmwub3JpZ2luICsgcmVsYXRpdmVVcmxTdHJpbmc7XG4gIH1cblxuICAvLyBSZWxhdGl2ZSBwYXRoLlxuICByZXR1cm4gYmFzZVVybC5vcmlnaW4gKyBiYXNlVXJsLnBhdGhuYW1lLnJlcGxhY2UoL1xcL1teL10qJC8sICcvJylcbiAgICAgICsgcmVsYXRpdmVVcmxTdHJpbmc7XG59XG5cblxuLyoqXG4gKiBBZGQgXCJfX2FtcF9zb3VyY2Vfb3JpZ2luXCIgcXVlcnkgcGFyYW1ldGVyIHRvIHRoZSBVUkwuXG4gKiBAcGFyYW0geyFXaW5kb3d9IHdpblxuICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29yc1VybCh3aW4sIHVybCkge1xuICBjaGVja0NvcnNVcmwodXJsKTtcbiAgY29uc3Qgc291cmNlT3JpZ2luID0gZ2V0U291cmNlT3JpZ2luKHdpbi5sb2NhdGlvbi5ocmVmKTtcbiAgcmV0dXJuIGFkZFBhcmFtVG9VcmwodXJsLCBTT1VSQ0VfT1JJR0lOX1BBUkFNLCBzb3VyY2VPcmlnaW4pO1xufVxuXG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSB1cmwgaGF2ZSBfX2FtcF9zb3VyY2Vfb3JpZ2luIGFuZCB0aHJvd3MgaWYgaXQgZG9lcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSB1cmxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrQ29yc1VybCh1cmwpIHtcbiAgY29uc3QgcGFyc2VkVXJsID0gcGFyc2VVcmwodXJsKTtcbiAgY29uc3QgcXVlcnkgPSBwYXJzZVF1ZXJ5U3RyaW5nKHBhcnNlZFVybC5zZWFyY2gpO1xuICB1c2VyKCkuYXNzZXJ0KCEoU09VUkNFX09SSUdJTl9QQVJBTSBpbiBxdWVyeSksXG4gICAgICAnU291cmNlIG9yaWdpbiBpcyBub3QgYWxsb3dlZCBpbiAlcycsIHVybCk7XG59XG5cbi8qKlxuICogVHJpZXMgdG8gZGVjb2RlIGEgVVJJIGNvbXBvbmVudCwgZmFsbGluZyBiYWNrIHRvIG9wdF9mYWxsYmFjayAob3IgYW4gZW1wdHlcbiAqIHN0cmluZylcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29tcG9uZW50XG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdF9mYWxsYmFja1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJ5RGVjb2RlVXJpQ29tcG9uZW50KGNvbXBvbmVudCwgb3B0X2ZhbGxiYWNrKSB7XG4gIHJldHVybiB0cnlEZWNvZGVVcmlDb21wb25lbnRfKGNvbXBvbmVudCwgb3B0X2ZhbGxiYWNrKTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIEEgYml0IGxpa2UgQXJyYXkjZmlsdGVyLCBidXQgcmVtb3ZlcyBlbGVtZW50cyB0aGF0IGZpbHRlciBmYWxzZSBmcm9tIHRoZVxuICogYXJyYXkuIFJldHVybnMgdGhlIGZpbHRlcmVkIGl0ZW1zLlxuICpcbiAqIEBwYXJhbSB7IUFycmF5PFQ+fSBhcnJheVxuICogQHBhcmFtIHtmdW5jdGlvbihULCBudW1iZXIsICFBcnJheTxUPik6Ym9vbGVhbn0gZmlsdGVyXG4gKiBAcmV0dXJuIHshQXJyYXk8VD59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyU3BsaWNlKGFycmF5LCBmaWx0ZXIpIHtcbiAgY29uc3Qgc3BsaWNlID0gW107XG4gIGxldCBpbmRleCA9IDA7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBpdGVtID0gYXJyYXlbaV07XG4gICAgaWYgKGZpbHRlcihpdGVtLCBpLCBhcnJheSkpIHtcbiAgICAgIGlmIChpbmRleCA8IGkpIHtcbiAgICAgICAgYXJyYXlbaW5kZXhdID0gaXRlbTtcbiAgICAgIH1cbiAgICAgIGluZGV4Kys7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwbGljZS5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuXG4gIGlmIChpbmRleCA8IGFycmF5Lmxlbmd0aCkge1xuICAgIGFycmF5Lmxlbmd0aCA9IGluZGV4O1xuICB9XG5cbiAgcmV0dXJuIHNwbGljZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZWxlbWVudCBtYXRjaGluZyB0aGUgcHJlZGljYXRlLlxuICogTGlrZSBBcnJheSNmaW5kSW5kZXguXG4gKlxuICogQHBhcmFtIHshQXJyYXk8VD59IGFycmF5XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFQsIG51bWJlciwgIUFycmF5PFQ+KTpib29sZWFufSBwcmVkaWNhdGVcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqIEB0ZW1wbGF0ZSBUXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSkge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtpXSwgaSwgYXJyYXkpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBnaXZlbiBpdGVyYXRvciB0byBhbiBhcnJheS5cbiAqXG4gKiBAcGFyYW0geyFJdGVyYXRvcjxUPn0gaXRlcmF0b3JcbiAqIEByZXR1cm4ge0FycmF5PFQ+fVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZyb21JdGVyYXRvcihpdGVyYXRvcikge1xuICBjb25zdCBhcnJheSA9IFtdO1xuICBmb3IgKGxldCBlID0gaXRlcmF0b3IubmV4dCgpOyAhZS5kb25lOyBlID0gaXRlcmF0b3IubmV4dCgpKSB7XG4gICAgYXJyYXkucHVzaChlLnZhbHVlKTtcbiAgfVxuICByZXR1cm4gYXJyYXk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtkZXZ9IGZyb20gJy4uL2xvZyc7XG5cbi8qKlxuICogSW50ZXJwcmV0IGEgYnl0ZSBhcnJheSBhcyBhIFVURi04IHN0cmluZy5cbiAqIEBwYXJhbSB7IUJ1ZmZlclNvdXJjZX0gYnl0ZXNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHV0ZjhEZWNvZGUoYnl0ZXMpIHtcbiAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpLmRlY29kZShieXRlcyk7XG4gIH1cbiAgY29uc3QgYXNjaWlTdHJpbmcgPSBieXRlc1RvU3RyaW5nKG5ldyBVaW50OEFycmF5KGJ5dGVzLmJ1ZmZlciB8fCBieXRlcykpO1xuICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShhc2NpaVN0cmluZykpO1xufVxuXG4vKipcbiAqIFR1cm4gYSBzdHJpbmcgaW50byBVVEYtOCBieXRlcy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4geyFVaW50OEFycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gdXRmOEVuY29kZShzdHJpbmcpIHtcbiAgaWYgKHR5cGVvZiBUZXh0RW5jb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gbmV3IFRleHRFbmNvZGVyKCd1dGYtOCcpLmVuY29kZShzdHJpbmcpO1xuICB9XG4gIHJldHVybiBzdHJpbmdUb0J5dGVzKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChzdHJpbmcpKSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBzdHJpbmcgd2hpY2ggaG9sZHMgOC1iaXQgY29kZSBwb2ludHMsIHN1Y2ggYXMgdGhlIHJlc3VsdCBvZiBhdG9iLFxuICogaW50byBhIFVpbnQ4QXJyYXkgd2l0aCB0aGUgY29ycmVzcG9uZGluZyBieXRlcy5cbiAqIElmIHlvdSBoYXZlIGEgc3RyaW5nIG9mIGNoYXJhY3RlcnMsIHlvdSBwcm9iYWJseSB3YW50IHRvIGJlIHVzaW5nIHV0ZjhFbmNvZGUuXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHshVWludDhBcnJheX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ1RvQnl0ZXMoc3RyKSB7XG4gIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoc3RyLmxlbmd0aCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgY2hhckNvZGUgPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICBkZXYoKS5hc3NlcnQoY2hhckNvZGUgPD0gMjU1LCAnQ2hhcmFjdGVycyBtdXN0IGJlIGluIHJhbmdlIFswLDI1NV0nKTtcbiAgICBieXRlc1tpXSA9IGNoYXJDb2RlO1xuICB9XG4gIHJldHVybiBieXRlcztcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIDgtYml0IGJ5dGVzIGFycmF5IGludG8gYSBzdHJpbmdcbiAqIEBwYXJhbSB7IVVpbnQ4QXJyYXl9IGJ5dGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBieXRlc1RvU3RyaW5nKGJ5dGVzKSB7XG4gIC8vIEludGVudGlvbmFsbHkgYXZvaWRzIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkgc28gd2UgZG9uJ3Qgc3VmZmVyIGFcbiAgLy8gc3RhY2sgb3ZlcmZsb3cuICMxMDQ5NSwgaHR0cHM6Ly9qc3BlcmYuY29tL2J5dGVzVG9TdHJpbmctMlxuICBjb25zdCBhcnJheSA9IG5ldyBBcnJheShieXRlcy5sZW5ndGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgYXJyYXlbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKTtcbiAgfVxuICByZXR1cm4gYXJyYXkuam9pbignJyk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSA0LWl0ZW0gYnl0ZSBhcnJheSB0byBhbiB1bnNpZ25lZCBpbnRlZ2VyLlxuICogQXNzdW1lcyBieXRlcyBhcmUgYmlnIGVuZGlhbi5cbiAqIEBwYXJhbSB7IVVpbnQ4QXJyYXl9IGJ5dGVzXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBieXRlc1RvVUludDMyKGJ5dGVzKSB7XG4gIGlmIChieXRlcy5sZW5ndGggIT0gNCkge1xuICAgIHRocm93IG5ldyBFcnJvcignUmVjZWl2ZWQgYnl0ZSBhcnJheSB3aXRoIGxlbmd0aCAhPSA0Jyk7XG4gIH1cbiAgY29uc3QgdmFsID0gKGJ5dGVzWzBdICYgMHhGRikgPDwgMjQgfFxuICAgICAoYnl0ZXNbMV0gJiAweEZGKSA8PCAxNiB8XG4gICAgIChieXRlc1syXSAmIDB4RkYpIDw8IDggfFxuICAgICAoYnl0ZXNbM10gJiAweEZGKTtcbiAgLy8gQ29udmVydCB0byB1bnNpZ25lZC5cbiAgcmV0dXJuIHZhbCA+Pj4gMDtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHJhbmRvbSBieXRlcyBhcnJheSB3aXRoIHNwZWNpZmljIGxlbmd0aCB1c2luZ1xuICogd2luLmNyeXB0by5nZXRSYW5kb21WYWx1ZXMuIFJldHVybiBudWxsIGlmIGl0IGlzIG5vdCBhdmFpbGFibGUuXG4gKiBAcGFyYW0ge251bWJlcn0gbGVuZ3RoXG4gKiBAcmV0dXJuIHs/VWludDhBcnJheX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENyeXB0b1JhbmRvbUJ5dGVzQXJyYXkod2luLCBsZW5ndGgpIHtcbiAgaWYgKCF3aW4uY3J5cHRvIHx8ICF3aW4uY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gV2lkZWx5IGF2YWlsYWJsZSBpbiBicm93c2VycyB3ZSBzdXBwb3J0OlxuICAvLyBodHRwOi8vY2FuaXVzZS5jb20vI3NlYXJjaD1nZXRSYW5kb21WYWx1ZXNcbiAgY29uc3QgdWludDhhcnJheSA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gIHdpbi5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKHVpbnQ4YXJyYXkpO1xuICByZXR1cm4gdWludDhhcnJheTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTcgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaXMgZXZhbHVhdGVkIG9ubHkgb25jZSBhbmQgcmV0dXJucyB0aGUgY2FjaGVkIHJlc3VsdFxuICogc3Vic2VxdWVudGx5LlxuICogQHBhcmFtIHtmdW5jdGlvbigpOihUfHVuZGVmaW5lZCl9IGZuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbigpOihUfHVuZGVmaW5lZCl9XG4gKiBAdGVtcGxhdGUgVFxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzfSBDb21waWxlciBjb21wbGFpbnMgYWJvdXQgXCJmbiA9IG51bGxcIiBmb3IgR0MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvbmNlKGZuKSB7XG4gIGxldCBldmFsdWF0ZWQgPSBmYWxzZTtcbiAgbGV0IHJldFZhbHVlID0gbnVsbDtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBpZiAoIWV2YWx1YXRlZCkge1xuICAgICAgcmV0VmFsdWUgPSBmbigpO1xuICAgICAgZXZhbHVhdGVkID0gdHJ1ZTtcbiAgICAgIGZuID0gbnVsbDsgLy8gR0NcbiAgICB9XG4gICAgcmV0dXJuIHJldFZhbHVlO1xuICB9O1xufVxuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNyBUaGUgQU1QIEhUTUwgQXV0aG9ycy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTLUlTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogQGVudW0ge251bWJlcn1cbiAqL1xuZXhwb3J0IGNvbnN0IEtleUNvZGVzID0ge1xuICBFTlRFUjogMTMsXG4gIEVTQ0FQRTogMjcsXG4gIFNQQUNFOiAzMixcbiAgTEVGVF9BUlJPVzogMzcsXG4gIFVQX0FSUk9XOiAzOCxcbiAgUklHSFRfQVJST1c6IDM5LFxuICBET1dOX0FSUk9XOiA0MCxcbn07XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE1IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHtpc09iamVjdH0gZnJvbSAnLi4vdHlwZXMnO1xuXG4vKiBAY29uc3QgKi9cbmNvbnN0IGhhc093bl8gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFJldHVybnMgYSBtYXAtbGlrZSBvYmplY3QuXG4gKiBJZiBvcHRfaW5pdGlhbCBpcyBwcm92aWRlZCwgY29waWVzIGl0cyBvd24gcHJvcGVydGllcyBpbnRvIHRoZVxuICogbmV3bHkgY3JlYXRlZCBvYmplY3QuXG4gKiBAcGFyYW0ge1Q9fSBvcHRfaW5pdGlhbCBUaGlzIHNob3VsZCB0eXBpY2FsbHkgYmUgYW4gb2JqZWN0IGxpdGVyYWwuXG4gKiBAcmV0dXJuIHtUfVxuICogQHRlbXBsYXRlIFRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hcChvcHRfaW5pdGlhbCkge1xuICBjb25zdCBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBpZiAob3B0X2luaXRpYWwpIHtcbiAgICBPYmplY3QuYXNzaWduKG9iaiwgb3B0X2luaXRpYWwpO1xuICB9XG4gIHJldHVybiBvYmo7XG59XG5cbi8qKlxuICogUmV0dXJuIGFuIGVtcHR5IEpzb25PYmplY3Qgb3IgbWFrZXMgdGhlIHBhc3NlZCBpbiBvYmplY3QgbGl0ZXJhbFxuICogYW4gSnNvbk9iamVjdC5cbiAqIFRoZSBKc29uT2JqZWN0IHR5cGUgaXMganVzdCBhIHNpbXBsZSBvYmplY3QgdGhhdCBpcyBhdC1kaWN0LlxuICogU2VlXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvd2lraS9Ac3RydWN0LWFuZC1AZGljdC1Bbm5vdGF0aW9uc1xuICogZm9yIHdoYXQgYSBkaWN0IGlzIHR5cGUtd2lzZS5cbiAqIFRoZSBsaW50ZXIgZW5mb3JjZXMgdGhhdCB0aGUgYXJndW1lbnQgaXMsIGluIGZhY3QsIGF0LWRpY3QgbGlrZS5cbiAqIEBwYXJhbSB7IU9iamVjdD19IG9wdF9pbml0aWFsXG4gKiBAcmV0dXJuIHshSnNvbk9iamVjdH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRpY3Qob3B0X2luaXRpYWwpIHtcbiAgLy8gV2UgZG8gbm90IGNvcHkuIFRoZSBsaW50ZXIgZW5mb3JjZXMgdGhhdCB0aGUgcGFzc2VkIGluIG9iamVjdCBpcyBhIGxpdGVyYWxcbiAgLy8gYW5kIHRodXMgdGhlIGNhbGxlciBjYW5ub3QgaGF2ZSBhIHJlZmVyZW5jZSB0byBpdC5cbiAgcmV0dXJuIC8qKiBAdHlwZSB7IUpzb25PYmplY3R9ICovIChvcHRfaW5pdGlhbCB8fCB7fSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBnaXZlbiBrZXkgaXMgYSBwcm9wZXJ0eSBpbiB0aGUgbWFwLlxuICpcbiAqIEBwYXJhbSB7VH0gIG9iaiBhIG1hcCBsaWtlIHByb3BlcnR5LlxuICogQHBhcmFtIHtzdHJpbmd9ICBrZXlcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAdGVtcGxhdGUgVFxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFzT3duKG9iaiwga2V5KSB7XG4gIHJldHVybiBoYXNPd25fLmNhbGwob2JqLCBrZXkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgb2JqW2tleV0gaWZmIGtleSBpcyBvYmoncyBvd24gcHJvcGVydHkgKGlzIG5vdCBpbmhlcml0ZWQpLlxuICogT3RoZXJ3aXNlLCByZXR1cm5zIHVuZGVmaW5lZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gb3duUHJvcGVydHkob2JqLCBrZXkpIHtcbiAgaWYgKGhhc093bihvYmosIGtleSkpIHtcbiAgICByZXR1cm4gb2JqW2tleV07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIERlZXAgbWVyZ2VzIHNvdXJjZSBpbnRvIHRhcmdldC5cbiAqXG4gKiBAcGFyYW0geyFPYmplY3R9IHRhcmdldFxuICogQHBhcmFtIHshT2JqZWN0fSBzb3VyY2VcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZXB0aCBUaGUgbWF4aW11bSBtZXJnZSBkZXB0aC4gSWYgZXhjZWVkZWQsIE9iamVjdC5hc3NpZ25cbiAqICAgICAgICAgICAgICAgICAgICAgICB3aWxsIGJlIHVzZWQgaW5zdGVhZC5cbiAqIEByZXR1cm4geyFPYmplY3R9XG4gKiBAdGhyb3dzIHtFcnJvcn0gSWYgc291cmNlIGNvbnRhaW5zIGEgY2lyY3VsYXIgcmVmZXJlbmNlLlxuICogQG5vdGUgT25seSBuZXN0ZWQgb2JqZWN0cyBhcmUgZGVlcC1tZXJnZWQsIHByaW1pdGl2ZXMgYW5kIGFycmF5cyBhcmUgbm90LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVlcE1lcmdlKHRhcmdldCwgc291cmNlLCBkZXB0aCA9IDEwKSB7XG4gIC8vIEtlZXAgdHJhY2sgb2Ygc2VlbiBvYmplY3RzIHRvIGRldGVjdCByZWN1cnNpdmUgcmVmZXJlbmNlcy5cbiAgY29uc3Qgc2VlbiA9IFtdO1xuXG4gIC8qKiBAdHlwZSB7IUFycmF5PHt0OiAhT2JqZWN0LCBzOiAhT2JqZWN0LCBkOiBudW1iZXJ9Pn0gKi9cbiAgY29uc3QgcXVldWUgPSBbXTtcbiAgcXVldWUucHVzaCh7dDogdGFyZ2V0LCBzOiBzb3VyY2UsIGQ6IDB9KTtcblxuICAvLyBCRlMgdG8gZW5zdXJlIG9iamVjdHMgZG9uJ3QgaGF2ZSByZWN1cnNpdmUgcmVmZXJlbmNlcyBhdCBzaGFsbG93ZXIgZGVwdGhzLlxuICB3aGlsZSAocXVldWUubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHt0LCBzLCBkfSA9IHF1ZXVlLnNoaWZ0KCk7XG4gICAgaWYgKHNlZW4uaW5jbHVkZXMocykpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU291cmNlIG9iamVjdCBoYXMgYSBjaXJjdWxhciByZWZlcmVuY2UuJyk7XG4gICAgfVxuICAgIHNlZW4ucHVzaChzKTtcbiAgICBpZiAodCA9PT0gcykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChkID4gZGVwdGgpIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odCwgcyk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgT2JqZWN0LmtleXMocykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgbmV3VmFsdWUgPSBzW2tleV07XG4gICAgICAvLyBQZXJmb3JtIGEgZGVlcCBtZXJnZSBJRkYgYm90aCB0YXJnZXQgYW5kIHNvdXJjZSBoYXZlIHRoZSBzYW1lIGtleVxuICAgICAgLy8gd2hvc2UgY29ycmVzcG9uZGluZyB2YWx1ZXMgYXJlIG9iamVjdHMuXG4gICAgICBpZiAoaGFzT3duKHQsIGtleSkpIHtcbiAgICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0W2tleV07XG4gICAgICAgIGlmIChpc09iamVjdChuZXdWYWx1ZSkgJiYgaXNPYmplY3Qob2xkVmFsdWUpKSB7XG4gICAgICAgICAgcXVldWUucHVzaCh7dDogb2xkVmFsdWUsIHM6IG5ld1ZhbHVlLCBkOiBkICsgMX0pO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdFtrZXldID0gbmV3VmFsdWU7XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFPYmplY3R9IG8gQW4gb2JqZWN0IHRvIHJlbW92ZSBwcm9wZXJ0aWVzIGZyb21cbiAqIEBwYXJhbSB7IUFycmF5PHN0cmluZz59IHByb3BzIEEgbGlzdCBvZiBwcm9wZXJ0aWVzIHRvIHJlbW92ZSBmcm9tIHRoZSBPYmplY3RcbiAqIEByZXR1cm4geyFPYmplY3R9IEFuIG9iamVjdCB3aXRoIHRoZSBnaXZlbiBwcm9wZXJ0aWVzIHJlbW92ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG9taXQobywgcHJvcHMpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKG8pLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICBpZiAoIXByb3BzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIGFjY1trZXldID0gb1trZXldO1xuICAgIH1cbiAgICByZXR1cm4gYWNjO1xuICB9LCB7fSk7XG59XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDE2IFRoZSBBTVAgSFRNTCBBdXRob3JzLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMtSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBXcmFwcyBhIGdpdmVuIGNhbGxiYWNrIGFuZCBhcHBsaWVzIGEgcmF0ZSBsaW1pdC5cbiAqIEl0IHRocm90dGxlcyB0aGUgY2FsbHMgc28gdGhhdCBubyBjb25zZXF1ZW50IGNhbGxzIGhhdmUgdGltZSBpbnRlcnZhbFxuICogc21hbGxlciB0aGFuIHRoZSBnaXZlbiBtaW5pbWFsIGludGVydmFsLlxuICpcbiAqIEBwYXJhbSB7IVdpbmRvd30gd2luXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLiopfSBjYWxsYmFja1xuICogQHBhcmFtIHtudW1iZXJ9IG1pbkludGVydmFsIHRoZSBtaW5pbXVtIHRpbWUgaW50ZXJ2YWwgaW4gbWlsbGlzZWNvbmRcbiAqIEByZXR1cm5zIHtmdW5jdGlvbiguLi4qKX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRocm90dGxlKHdpbiwgY2FsbGJhY2ssIG1pbkludGVydmFsKSB7XG4gIGxldCBsb2NrZXIgPSAwO1xuICBsZXQgbmV4dENhbGxBcmdzID0gbnVsbDtcblxuICBmdW5jdGlvbiBmaXJlKGFyZ3MpIHtcbiAgICBuZXh0Q2FsbEFyZ3MgPSBudWxsO1xuICAgIC8vIExvY2sgdGhlIGZpcmUgZm9yIG1pbkludGVydmFsIG1pbGxpc2Vjb25kc1xuICAgIGxvY2tlciA9IHdpbi5zZXRUaW1lb3V0KHdhaXRlciwgbWluSW50ZXJ2YWwpO1xuXG4gICAgY2FsbGJhY2suYXBwbHkobnVsbCwgYXJncyk7XG4gIH1cblxuICBmdW5jdGlvbiB3YWl0ZXIoKSB7XG4gICAgbG9ja2VyID0gMDtcbiAgICAvLyBJZiBkdXJpbmcgdGhlIHBlcmlvZCB0aGVyZSdyZSBpbnZvY2F0aW9ucyBxdWV1ZWQgdXAsIGZpcmUgb25jZS5cbiAgICBpZiAobmV4dENhbGxBcmdzKSB7XG4gICAgICBmaXJlKG5leHRDYWxsQXJncyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKC4uLmFyZ3MpIHtcbiAgICBpZiAobG9ja2VyKSB7XG4gICAgICBuZXh0Q2FsbEFyZ3MgPSBhcmdzO1xuICAgIH0gZWxzZSB7XG4gICAgICBmaXJlKGFyZ3MpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBXcmFwcyBhIGdpdmVuIGNhbGxiYWNrIGFuZCBhcHBsaWVzIGEgd2FpdCB0aW1lciwgc28gdGhhdCBtaW5JbnRlcnZhbFxuICogbWlsbGlzZWNvbmRzIG11c3QgcGFzcyBzaW5jZSB0aGUgbGFzdCBjYWxsIGJlZm9yZSB0aGUgY2FsbGJhY2sgaXMgYWN0dWFsbHlcbiAqIGludm9rZWQuXG4gKlxuICogQHBhcmFtIHshV2luZG93fSB3aW5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uKil9IGNhbGxiYWNrXG4gKiBAcGFyYW0ge251bWJlcn0gbWluSW50ZXJ2YWwgdGhlIG1pbmltdW0gdGltZSBpbnRlcnZhbCBpbiBtaWxsaXNlY29uZFxuICogQHJldHVybnMge2Z1bmN0aW9uKC4uLiopfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVib3VuY2Uod2luLCBjYWxsYmFjaywgbWluSW50ZXJ2YWwpIHtcbiAgbGV0IGxvY2tlciA9IDA7XG4gIGxldCB0aW1lc3RhbXAgPSAwO1xuICBsZXQgbmV4dENhbGxBcmdzID0gbnVsbDtcblxuICBmdW5jdGlvbiBmaXJlKGFyZ3MpIHtcbiAgICBuZXh0Q2FsbEFyZ3MgPSBudWxsO1xuICAgIGNhbGxiYWNrLmFwcGx5KG51bGwsIGFyZ3MpO1xuICB9XG5cbiAgZnVuY3Rpb24gd2FpdGVyKCkge1xuICAgIGxvY2tlciA9IDA7XG4gICAgY29uc3QgcmVtYWluaW5nID0gbWluSW50ZXJ2YWwgLSAod2luLkRhdGUubm93KCkgLSB0aW1lc3RhbXApO1xuICAgIGlmIChyZW1haW5pbmcgPiAwKSB7XG4gICAgICBsb2NrZXIgPSB3aW4uc2V0VGltZW91dCh3YWl0ZXIsIHJlbWFpbmluZyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZpcmUobmV4dENhbGxBcmdzKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgIHRpbWVzdGFtcCA9IHdpbi5EYXRlLm5vdygpO1xuICAgIG5leHRDYWxsQXJncyA9IGFyZ3M7XG4gICAgaWYgKCFsb2NrZXIpIHtcbiAgICAgIGxvY2tlciA9IHdpbi5zZXRUaW1lb3V0KHdhaXRlciwgbWluSW50ZXJ2YWwpO1xuICAgIH1cbiAgfTtcbn1cbiIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTYgVGhlIEFNUCBIVE1MIEF1dGhvcnMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUy1JU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQge0FjdGlvblRydXN0fSBmcm9tICcuL2FjdGlvbi10cnVzdCc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuLyoqXG4gKiBWaWRlb0ludGVyZmFjZSBkZWZpbmVzIGEgY29tbW9uIHZpZGVvIEFQSSB3aGljaCBhbnkgQU1QIGNvbXBvbmVudCB0aGF0IHBsYXlzXG4gKiB2aWRlb3MgaXMgZXhwZWN0ZWQgdG8gaW1wbGVtZW50LlxuICpcbiAqIEFNUCBydW50aW1lIHVzZXMgdGhpcyBjb21tb24gQVBJIHRvIHByb3ZpZGUgY29uc2lzdGVudCB2aWRlbyBleHBlcmllbmNlIGFuZFxuICogYW5hbHl0aWNzIGFjcm9zcyBhbGwgdmlkZW8gcGxheWVycy5cbiAqXG4gKiBDb21wb25lbnRzIGltcGxlbWVudGluZyB0aGlzIGludGVyZmFjZSBtdXN0IGFsc28gZXh0ZW5kXG4gKiB7QGxpbmsgLi9iYXNlLWVsZW1lbnQuQmFzZUVsZW1lbnR9IGFuZCByZWdpc3RlciB3aXRoIHRoZVxuICogVmlkZW8gTWFuYWdlciB7QGxpbmsgLi9zZXJ2aWNlL3ZpZGVvLW1hbmFnZXItaW1wbC5WaWRlb01hbmFnZXJ9IGR1cmluZ1xuICogdGhlaXIgYGJ1aWx0Q2FsbGJhY2tgLlxuICpcbiAqIEBpbnRlcmZhY2VcbiAqL1xuZXhwb3J0IGNsYXNzIFZpZGVvSW50ZXJmYWNlIHtcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgY29tcG9uZW50IHN1cHBvcnRzIHZpZGVvIHBsYXliYWNrIGluIHRoZSBjdXJyZW50IHBsYXRmb3JtLlxuICAgKiBJZiBmYWxzZSwgY29tcG9uZW50IHdpbGwgYmUgbm90IHRyZWF0ZWQgYXMgYSB2aWRlbyBjb21wb25lbnQuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBzdXBwb3J0c1BsYXRmb3JtKCkge31cblxuICAvKipcbiAgICogV2hldGhlciB1c2VycyBjYW4gaW50ZXJhY3Qgd2l0aCB0aGUgdmlkZW8gc3VjaCBhcyBwYXVzaW5nIGl0LlxuICAgKiBFeGFtcGxlIG9mIG5vbi1pbnRlcmFjdGl2ZSB2aWRlb3MgaW5jbHVkZSBkZXNpZ24gYmFja2dyb3VuZCB2aWRlb3Mgd2hlcmVcbiAgICogYWxsIGNvbnRyb2xzIGFyZSBoaWRkZW4gZnJvbSB0aGUgdXNlci5cbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGlzSW50ZXJhY3RpdmUoKSB7fVxuXG4gIC8qKlxuICAgKiBDdXJyZW50IHBsYXliYWNrIHRpbWUgaW4gc2Vjb25kcyBhdCB0aW1lIG9mIHRyaWdnZXJcbiAgICogQHJldHVybiB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0Q3VycmVudFRpbWUoKSB7fVxuXG4gIC8qKlxuICAgKiBUb3RhbCBkdXJhdGlvbiBvZiB0aGUgdmlkZW8gaW4gc2Vjb25kc1xuICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAqL1xuICBnZXREdXJhdGlvbigpIHt9XG5cbiAgLyoqXG4gICAqIEdldCBhIDJkIGFycmF5IG9mIHN0YXJ0IGFuZCBzdG9wIHRpbWVzIHRoYXQgdGhlIHVzZXIgaGFzIHdhdGNoZWQuXG4gICAqIEByZXR1cm4geyFBcnJheTxBcnJheTxudW1iZXI+Pn1cbiAgICovXG4gIGdldFBsYXllZFJhbmdlcygpIHt9XG5cbiAgLyoqXG4gICAqIFBsYXlzIHRoZSB2aWRlby4uXG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdW51c2VkSXNBdXRvcGxheSBXaGV0aGVyIHRoZSBjYWxsIHRvIHRoZSBgcGxheWAgbWV0aG9kIGlzXG4gICAqIHRyaWdnZXJlZCBieSB0aGUgYXV0b3BsYXkgZnVuY3Rpb25hbGl0eS4gVmlkZW8gcGxheWVycyBjYW4gdXNlIHRoaXMgaGludFxuICAgKiB0byBtYWtlIGRlY2lzaW9ucyBzdWNoIGFzIG5vdCBwbGF5aW5nIHByZS1yb2xsIHZpZGVvIGFkcy5cbiAgICovXG4gIHBsYXkodW51c2VkSXNBdXRvcGxheSkge31cblxuICAvKipcbiAgICogUGF1c2VzIHRoZSB2aWRlby5cbiAgICovXG4gIHBhdXNlKCkge31cblxuICAvKipcbiAgICogTXV0ZXMgdGhlIHZpZGVvLlxuICAgKi9cbiAgbXV0ZSgpIHt9XG5cbiAgLyoqXG4gICAqIFVubXV0ZXMgdGhlIHZpZGVvLlxuICAgKi9cbiAgdW5tdXRlKCkge31cblxuICAvKipcbiAgICogTWFrZXMgdGhlIHZpZGVvIFVJIGNvbnRyb2xzIHZpc2libGUuXG4gICAqXG4gICAqIEFNUCB3aWxsIG5vdCBjYWxsIHRoaXMgbWV0aG9kIGlmIGBjb250cm9sc2AgYXR0cmlidXRlIGlzIG5vdCBzZXQuXG4gICAqL1xuICBzaG93Q29udHJvbHMoKSB7fVxuXG4gIC8qKlxuICAgKiBIaWRlcyB0aGUgdmlkZW8gVUkgY29udHJvbHMuXG4gICAqXG4gICAqIEFNUCB3aWxsIG5vdCBjYWxsIHRoaXMgbWV0aG9kIGlmIGBjb250cm9sc2AgYXR0cmlidXRlIGlzIG5vdCBzZXQuXG4gICAqL1xuICBoaWRlQ29udHJvbHMoKSB7fVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHZpZGVvJ3MgbWV0YSBkYXRhIChhcnR3b3JrLCB0aXRsZSwgYXJ0aXN0LCBhbGJ1bSwgZXRjLikgZm9yIHVzZVxuICAgKiB3aXRoIHRoZSBNZWRpYSBTZXNzaW9uIEFQSVxuICAgKiBhcnR3b3JrIChBcnJheSk6IFVSTCB0byB0aGUgcG9zdGVyIGltYWdlIChwcmVmZXJhYmx5IGEgNTEyeDUxMiBQTkcpXG4gICAqIHRpdGxlIChzdHJpbmcpOiBOYW1lIG9mIHRoZSB2aWRlb1xuICAgKiBhcnRpc3QgKHN0cmluZyk6IE5hbWUgb2YgdGhlIHZpZGVvJ3MgYXV0aG9yL2FydGlzdFxuICAgKiBhbGJ1bSAoc3RyaW5nKTogTmFtZSBvZiB0aGUgdmlkZW8ncyBhbGJ1bSBpZiBpdCBleGlzdHNcbiAgICogQHJldHVybiB7IS4vbWVkaWFzZXNzaW9uLWhlbHBlci5NZXRhZGF0YURlZnx1bmRlZmluZWR9IG1ldGFkYXRhXG4gICAqL1xuICBnZXRNZXRhZGF0YSgpIHt9XG5cbiAgLyoqXG4gICAqIElmIHRoaXMgcmV0dXJucyB0cnVlIHRoZW4gaXQgd2lsbCBiZSBhc3N1bWVkIHRoYXQgdGhlIHBsYXllciBpbXBsZW1lbnRzXG4gICAqIHRoZSBNZWRpYVNlc3Npb24gQVBJIGludGVybmFsbHkgc28gdGhhdCB0aGUgdmlkZW8gbWFuYWdlciBkb2VzIG5vdCBvdmVycmlkZVxuICAgKiBpdC4gSWYgbm90LCB0aGUgdmlkZW8gbWFuYWdlciB3aWxsIHVzZSB0aGUgbWV0YWRhdGEgdmFyaWFibGUgYXMgd2VsbCBhc1xuICAgKiBpbmZlcnJlZCBtZXRhLWRhdGEgdG8gdXBkYXRlIHRoZSB2aWRlbydzIE1lZGlhIFNlc3Npb24gbm90aWZpY2F0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgcHJlaW1wbGVtZW50c01lZGlhU2Vzc2lvbkFQSSgpIHt9XG5cblxuICAvKipcbiAgICogQXV0b21hdGljYWxseSBjb21lcyBmcm9tIHtAbGluayAuL2Jhc2UtZWxlbWVudC5CYXNlRWxlbWVudH1cbiAgICpcbiAgICogQHJldHVybiB7IUFtcEVsZW1lbnR9XG4gICAqL1xuICBnZXQgZWxlbWVudCgpIHt9XG5cbiAgLyoqXG4gICAqIEF1dG9tYXRpY2FsbHkgY29tZXMgZnJvbSB7QGxpbmsgLi9iYXNlLWVsZW1lbnQuQmFzZUVsZW1lbnR9XG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBpc0luVmlld3BvcnQoKSB7fVxuXG4gIC8qKlxuICAgKiBFbmFibGVzIGZ1bGxzY3JlZW4gb24gdGhlIGludGVybmFsIHZpZGVvIGVsZW1lbnRcbiAgICogTk9URTogV2hpbGUgaW1wbGVtZW50aW5nLCBrZWVwIGluIG1pbmQgdGhhdCBTYWZhcmkvaU9TIGRvIG5vdCBhbGxvdyB0YWtpbmdcbiAgICogYW55IGVsZW1lbnQgb3RoZXIgdGhhbiA8dmlkZW8+IHRvIGZ1bGxzY3JlZW4sIGlmIHRoZSBwbGF5ZXIgaGFzIGFuIGludGVybmFsXG4gICAqIGltcGxlbWVudGF0aW9uIG9mIGZ1bGxzY3JlZW4gKGZsYXNoIGZvciBleGFtcGxlKSB0aGVuIGNoZWNrXG4gICAqIGlmIFNlcnZpY2VzLnBsYXRmb3JtRm9yKHRoaXMud2luKS5pc1NhZmFyaSBpcyB0cnVlIGFuZCB1c2UgdGhlIGludGVybmFsXG4gICAqIGltcGxlbWVudGF0aW9uIGluc3RlYWQuIElmIG5vdCwgaXQgaXMgcmVjb21tZW5kZWQgdG8gdGFrZSB0aGUgaWZyYW1lXG4gICAqIHRvIGZ1bGxzY3JlZW4gdXNpbmcgZnVsbHNjcmVlbkVudGVyIGZyb20gZG9tLmpzXG4gICAqL1xuICBmdWxsc2NyZWVuRW50ZXIoKSB7fVxuXG4gIC8qKlxuICAgKiBRdWl0cyBmdWxsc2NyZWVuIG1vZGVcbiAgICovXG4gIGZ1bGxzY3JlZW5FeGl0KCkge31cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSB2aWRlbyBpcyBjdXJyZW50bHkgaW4gZnVsbHNjcmVlbiBtb2RlIG9yIG5vdFxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNGdWxsc2NyZWVuKCkge31cblxuICAvKipcbiAgICogQXV0b21hdGljYWxseSBjb21lcyBmcm9tIHtAbGluayAuL2Jhc2UtZWxlbWVudC5CYXNlRWxlbWVudH1cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHVudXNlZE1ldGhvZFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCEuL3NlcnZpY2UvYWN0aW9uLWltcGwuQWN0aW9uSW52b2NhdGlvbil9IHVudXNlZEhhbmRsZXJcbiAgICogQHBhcmFtIHtBY3Rpb25UcnVzdH0gdW51c2VkTWluVHJ1c3RcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgcmVnaXN0ZXJBY3Rpb24odW51c2VkTWV0aG9kLCB1bnVzZWRIYW5kbGVyLCB1bnVzZWRNaW5UcnVzdCkge31cbn1cblxuXG4vKipcbiAqIEF0dHJpYnV0ZXNcbiAqXG4gKiBDb21wb25lbnRzIGltcGxlbWVudGluZyB0aGUgVmlkZW9JbnRlcmZhY2UgYXJlIGV4cGVjdGVkIHRvIHN1cHBvcnRcbiAqIHRoZSBmb2xsb3dpbmcgYXR0cmlidXRlcy5cbiAqXG4gKiBAY29uc3RhbnQgeyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICovXG5leHBvcnQgY29uc3QgVmlkZW9BdHRyaWJ1dGVzID0ge1xuICAvKipcbiAgICogYXV0b3BsYXlcbiAgICpcbiAgICogV2hldGhlciB0aGUgZGV2ZWxvcGVyIGhhcyBjb25maWd1cmVkIGF1dG9wbGF5IG9uIHRoZSBjb21wb25lbnQuXG4gICAqIFRoaXMgaXMgbm9ybWFsbHkgZG9uZSBieSBzZXR0aW5nIGBhdXRvcGxheWAgYXR0cmlidXRlIG9uIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEFNUCBydW50aW1lIG1hbmFnZXMgYXV0b3BsYXkgYmVoYXZpb3VyIGl0c2VsZiB1c2luZyBtZXRob2RzIHN1Y2ggYXMgYHBsYXlgLFxuICAgKiBgcGF1c2VgLCBgc2hvd0NvbnRyb2xzYCwgYGhpZGVDb250cm9sc2AsIGBtdXRlYCwgZXRjLi4gdGhlcmVmb3JlIGNvbXBvbmVudHNcbiAgICogc2hvdWxkIG5vdCBwcm9wYWdhdGUgdGhlIGF1dG9wbGF5IGF0dHJpYnV0ZSB0byB0aGUgdW5kZXJseWluZyBwbGF5ZXJcbiAgICogaW1wbGVtZW50YXRpb24uXG4gICAqXG4gICAqIFdoZW4gYSB2aWRlbyBpcyByZXF1ZXN0ZWQgdG8gYXV0b3BsYXksIEFNUCB3aWxsIGF1dG9tYXRpY2FsbHlcbiAgICogbXV0ZSBhbmQgaGlkZSB0aGUgY29udHJvbHMgZm9yIHRoZSB2aWRlbywgd2hlbiB2aWRlbyBpcyA3NSUgdmlzaWJsZSBpblxuICAgKiB0aGUgdmlld3BvcnQsIEFNUCB3aWxsIHBsYXkgdGhlIHZpZGVvIGFuZCBsYXRlciBwYXVzZXMgaXQgd2hlbiAyNSVcbiAgICogb3IgbW9yZSBvZiB0aGUgdmlkZW8gZXhpdHMgdGhlIHZpZXdwb3J0LiBJZiBhbiBhdXRvLXBsYXlpbmcgdmlkZW8gYWxzbyBoYXNcbiAgICogY29udHJvbHMsIEFNUCB3aWxsIGluc3RhbGwgYSB0YXBcbiAgICogaGFuZGxlciBvbiB0aGUgdmlkZW8sIGFuZCB3aGVuIGFuIGVuZC11c2VyIHRhcHMgdGhlIHZpZGVvLCBBTVAgd2lsbCBzaG93XG4gICAqIHRoZSBjb250cm9scy5cbiAgICpcbiAgICovXG4gIEFVVE9QTEFZOiAnYXV0b3BsYXknLFxuICAvKipcbiAgICogZG9ja1xuICAgKlxuICAgKiBTZXR0aW5nIHRoZSBgZG9ja2AgYXR0cmlidXRlIG9uIHRoZSBjb21wb25lbnQgbWFrZXMgdGhlIHZpZGVvIG1pbmltaXplXG4gICAqIHRvIHRoZSBjb3JuZXIgd2hlbiBzY3JvbGxlZCBvdXQgb2YgdmlldyBhbmQgaGFzIGJlZW4gaW50ZXJhY3RlZCB3aXRoLlxuICAgKi9cbiAgRE9DSzogJ2RvY2snLFxuICAvKipcbiAgICogZnVsbHNjcmVlbi1vbi1sYW5kc2NhcGVcbiAgICpcbiAgICogSWYgZW5hYmxlZCwgdGhpcyBhdXRvbWF0aWNhbGx5IGV4cGFuZHMgdGhlIGN1cnJlbnRseSB2aXNpYmxlIHZpZGVvIGFuZFxuICAgKiBwbGF5aW5nIHRvIGZ1bGxzY3JlZW4gd2hlbiB0aGUgdXNlciBjaGFuZ2VzIHRoZSBkZXZpY2UncyBvcmllbnRhdGlvbiB0b1xuICAgKiBsYW5kc2NhcGUgaWYgdGhlIHZpZGVvIHdhcyBzdGFydGVkIGZvbGxvd2luZyBhIHVzZXIgaW50ZXJhY3Rpb25cbiAgICogKG5vdCBhdXRvcGxheSlcbiAgICpcbiAgICogRGVwZW5kZW50IHVwb24gYnJvd3NlciBzdXBwb3J0IG9mXG4gICAqIGh0dHA6Ly9jYW5pdXNlLmNvbS8jZmVhdD1zY3JlZW4tb3JpZW50YXRpb25cbiAgICogYW5kIGh0dHA6Ly9jYW5pdXNlLmNvbS8jZmVhdD1mdWxsc2NyZWVuXG4gICAqL1xuICBGVUxMU0NSRUVOX09OX0xBTkRTQ0FQRTogJ2Z1bGxzY3JlZW4tb24tbGFuZHNjYXBlJyxcbn07XG5cblxuLyoqXG4gKiBFdmVudHNcbiAqXG4gKiBDb21wb25lbnRzIGltcGxlbWVudGluZyB0aGUgVmlkZW9JbnRlcmZhY2UgYXJlIGV4cGVjdGVkIHRvIGRpc3BhdGNoXG4gKiB0aGUgZm9sbG93aW5nIERPTSBldmVudHMuXG4gKlxuICogQGNvbnN0YW50IHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuZXhwb3J0IGNvbnN0IFZpZGVvRXZlbnRzID0ge1xuICAvKipcbiAgICogcmVnaXN0ZXJlZFxuICAgKlxuICAgKiBGaXJlZCB3aGVuIHRoZSB2aWRlbyBwbGF5ZXIgZWxlbWVudCBpcyBidWlsdCBhbmQgaGFzIGJlZW4gcmVnaXN0ZXJlZCB3aXRoXG4gICAqIHRoZSB2aWRlbyBtYW5hZ2VyLlxuICAgKlxuICAgKiBAZXZlbnQgcmVnaXN0ZXJlZFxuICAgKi9cbiAgUkVHSVNURVJFRDogJ3JlZ2lzdGVyZWQnLFxuXG4gIC8qKlxuICAgKiBsb2FkXG4gICAqXG4gICAqIEZpcmVkIHdoZW4gdGhlIHZpZGVvIHBsYXllciBpcyBsb2FkZWQgYW5kIGNhbGxzIHRvIG1ldGhvZHMgc3VjaCBhcyBgcGxheSgpYFxuICAgKiBhcmUgYWxsb3dlZC5cbiAgICpcbiAgICogQGV2ZW50IGxvYWRcbiAgICovXG4gIExPQUQ6ICdsb2FkJyxcblxuICAvKipcbiAgICogcGxheWluZ1xuICAgKlxuICAgKiBGaXJlZCB3aGVuIHRoZSB2aWRlbyBiZWdpbnMgcGxheWluZy5cbiAgICpcbiAgICogQGV2ZW50IHBsYXlpbmdcbiAgICovXG4gIFBMQVlJTkc6ICdwbGF5aW5nJyxcblxuICAvKipcbiAgICogcGF1c2VcbiAgICpcbiAgICogRmlyZWQgd2hlbiB0aGUgdmlkZW8gcGF1c2VzLlxuICAgKlxuICAgKiBAZXZlbnQgcGF1c2VcbiAgICovXG4gIFBBVVNFOiAncGF1c2UnLFxuXG4gIC8qKlxuICAgKiBlbmRlZFxuICAgKlxuICAgKiBGaXJlZCB3aGVuIHRoZSB2aWRlbyBlbmRzLlxuICAgKlxuICAgKiBUaGlzIGV2ZW50IHNob3VsZCBiZSBmaXJlZCBpbiBhZGRpdGlvbiB0byBgcGF1c2VgIHdoZW4gdmlkZW8gZW5kcy5cbiAgICpcbiAgICogQGV2ZW50IGVuZGVkXG4gICAqL1xuICBFTkRFRDogJ2VuZGVkJyxcblxuICAvKipcbiAgICogbXV0ZWRcbiAgICpcbiAgICogRmlyZWQgd2hlbiB0aGUgdmlkZW8gaXMgbXV0ZWQuXG4gICAqXG4gICAqIEBldmVudCBtdXRlZFxuICAgKi9cbiAgTVVURUQ6ICdtdXRlZCcsXG5cbiAgLyoqXG4gICAqIHVubXV0ZWRcbiAgICpcbiAgICogRmlyZWQgd2hlbiB0aGUgdmlkZW8gaXMgdW5tdXRlZC5cbiAgICpcbiAgICogQGV2ZW50IHVubXV0ZWRcbiAgICovXG4gIFVOTVVURUQ6ICd1bm11dGVkJyxcblxuICAvKipcbiAgICogYW1wOnZpZGVvOnZpc2liaWxpdHlcbiAgICpcbiAgICogRmlyZWQgd2hlbiB0aGUgdmlkZW8ncyB2aXNpYmlsaXR5IGNoYW5nZXMuIE5vcm1hbGx5IGZpcmVkXG4gICAqIGZyb20gYHZpZXdwb3J0Q2FsbGJhY2tgLlxuICAgKlxuICAgKiBAZXZlbnQgYW1wOnZpZGVvOnZpc2liaWxpdHlcbiAgICogQHByb3BlcnR5IHtib29sZWFufSB2aXNpYmxlIFdoZXRoZXIgdGhlIHZpZGVvIHBsYXllciBpcyB2aXNpYmxlIG9yIG5vdC5cbiAgICovXG4gIFZJU0lCSUxJVFk6ICdhbXA6dmlkZW86dmlzaWJpbGl0eScsXG5cbiAgLyoqXG4gICAqIHJlbG9hZFxuICAgKlxuICAgKiBGaXJlZCB3aGVuIHRoZSB2aWRlbydzIHNyYyBjaGFuZ2VzLlxuICAgKlxuICAgKiBAZXZlbnQgcmVsb2FkZWRcbiAgICovXG4gIFJFTE9BRDogJ3JlbG9hZGVkJyxcblxuICAvKipcbiAgICogcHJlL21pZC9wb3N0IEFkIHN0YXJ0XG4gICAqXG4gICAqIEZpcmVkIHdoZW4gYW4gQWQgc3RhcnRzIHBsYXlpbmcuXG4gICAqXG4gICAqIFRoaXMgaXMgdXNlZCB0byByZW1vdmUgYW55IG92ZXJsYXkgc2hpbXMgZHVyaW5nIEFkIHBsYXkgZHVyaW5nIGF1dG9wbGF5XG4gICAqIG9yIG1pbmltaXplZC10by1jb3JuZXIgdmVyc2lvbiBvZiB0aGUgcGxheWVyLlxuICAgKlxuICAgKiBAZXZlbnQgYWRfc3RhcnRcbiAgICovXG4gIEFEX1NUQVJUOiAnYWRfc3RhcnQnLFxuXG4gIC8qKlxuICAgKiBwcmUvbWlkL3Bvc3QgQWQgZW5kc1xuICAgKlxuICAgKiBGaXJlZCB3aGVuIGFuIEFkIGVuZHMgcGxheWluZy5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VkIHRvIHJlc3RvcmUgYW55IG92ZXJsYXkgc2hpbXMgZHVyaW5nIEFkIHBsYXkgZHVyaW5nIGF1dG9wbGF5XG4gICAqIG9yIG1pbmltaXplZC10by1jb3JuZXIgdmVyc2lvbiBvZiB0aGUgcGxheWVyLlxuICAgKlxuICAgKiBAZXZlbnQgYWRfZW5kXG4gICAqL1xuICBBRF9FTkQ6ICdhZF9lbmQnLFxufTtcblxuXG4vKipcbiAqIFBsYXlpbmcgU3RhdGVzXG4gKlxuICogSW50ZXJuYWwgcGxheWluZyBzdGF0ZXMgdXNlZCB0byBkaXN0aW5ndWlzaCBiZXR3ZWVuIHZpZGVvIHBsYXlpbmcgb24gdXNlcidzXG4gKiBjb21tYW5kIGFuZCB2aWRlb3MgcGxheWluZyBhdXRvbWF0aWNhbGx5XG4gKlxuICogQGNvbnN0YW50IHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xuZXhwb3J0IGNvbnN0IFBsYXlpbmdTdGF0ZXMgPSB7XG4gIC8qKlxuICAgKiBwbGF5aW5nX21hbnVhbFxuICAgKlxuICAgKiBXaGVuIHRoZSB2aWRlbyB1c2VyIG1hbnVhbGx5IGludGVyYWN0ZWQgd2l0aCB0aGUgdmlkZW8gYW5kIHRoZSB2aWRlb1xuICAgKiBpcyBub3cgcGxheWluZ1xuICAgKlxuICAgKiBAZXZlbnQgcGxheWluZ19tYW51YWxcbiAgICovXG4gIFBMQVlJTkdfTUFOVUFMOiAncGxheWluZ19tYW51YWwnLFxuXG4gIC8qKlxuICAgKiBwbGF5aW5nX2F1dG9cbiAgICpcbiAgICogV2hlbiB0aGUgdmlkZW8gaGFzIGF1dG9wbGF5IGFuZCB0aGUgdXNlciBoYXNuJ3QgaW50ZXJhY3RlZCB3aXRoIGl0IHlldFxuICAgKlxuICAgKiBAZXZlbnQgcGxheWluZ19hdXRvXG4gICAqL1xuICBQTEFZSU5HX0FVVE86ICdwbGF5aW5nX2F1dG8nLFxuXG4gIC8qKlxuICAgKiBwYXVzZWRcbiAgICpcbiAgICogV2hlbiB0aGUgdmlkZW8gaXMgcGF1c2VkLlxuICAgKlxuICAgKiBAZXZlbnQgcGF1c2VkXG4gICAqL1xuICBQQVVTRUQ6ICdwYXVzZWQnLFxufTtcblxuXG4vKiogQGVudW0ge3N0cmluZ30gKi9cbmV4cG9ydCBjb25zdCBWaWRlb0FuYWx5dGljc0V2ZW50cyA9IHtcbiAgLyoqXG4gICAqIHZpZGVvLWVuZGVkXG4gICAqXG4gICAqIEluZGljYXRlcyB0aGF0IGEgdmlkZW8gZW5kZWQuXG4gICAqIEBwcm9wZXJ0eSB7IVZpZGVvQW5hbHl0aWNzRGV0YWlsc0RlZn0gZGV0YWlsc1xuICAgKiBAZXZlbnQgdmlkZW8tZW5kZWRcbiAgICovXG4gIEVOREVEOiAndmlkZW8tZW5kZWQnLFxuXG4gIC8qKlxuICAgKiB2aWRlby1wYXVzZVxuICAgKlxuICAgKiBJbmRpY2F0ZXMgdGhhdCBhIHZpZGVvIHBhdXNlZC5cbiAgICogQHByb3BlcnR5IHshVmlkZW9BbmFseXRpY3NEZXRhaWxzRGVmfSBkZXRhaWxzXG4gICAqIEBldmVudCB2aWRlby1wYXVzZVxuICAgKi9cbiAgUEFVU0U6ICd2aWRlby1wYXVzZScsXG5cbiAgLyoqXG4gICAqIHZpZGVvLXBsYXlcbiAgICpcbiAgICogSW5kaWNhdGVzIHRoYXQgYSB2aWRlbyBiZWdhbiB0byBwbGF5LlxuICAgKiBAcHJvcGVydHkgeyFWaWRlb0FuYWx5dGljc0RldGFpbHNEZWZ9IGRldGFpbHNcbiAgICogQGV2ZW50IHZpZGVvLXBsYXlcbiAgICovXG4gIFBMQVk6ICd2aWRlby1wbGF5JyxcblxuICAvKipcbiAgICogdmlkZW8tc2Vzc2lvblxuICAgKlxuICAgKiBJbmRpY2F0ZXMgdGhhdCBzb21lIHNlZ21lbnQgb2YgdGhlIHZpZGVvIHBsYXllZC5cbiAgICogQHByb3BlcnR5IHshVmlkZW9BbmFseXRpY3NEZXRhaWxzRGVmfSBkZXRhaWxzXG4gICAqIEBldmVudCB2aWRlby1zZXNzaW9uXG4gICAqL1xuICBTRVNTSU9OOiAndmlkZW8tc2Vzc2lvbicsXG5cbiAgLyoqXG4gICAqIHZpZGVvLXNlc3Npb24tdmlzaWJsZVxuICAgKlxuICAgKiBJbmRpY2F0ZXMgdGhhdCBzb21lIHNlZ21lbnQgb2YgdGhlIHZpZGVvIHBsYXllZCBpbiB0aGUgdmlld3BvcnQuXG4gICAqIEBwcm9wZXJ0eSB7IVZpZGVvQW5hbHl0aWNzRGV0YWlsc0RlZn0gZGV0YWlsc1xuICAgKiBAZXZlbnQgdmlkZW8tc2Vzc2lvbi12aXNpYmxlXG4gICAqL1xuICBTRVNTSU9OX1ZJU0lCTEU6ICd2aWRlby1zZXNzaW9uLXZpc2libGUnLFxuXG4gIC8qKlxuICAgKiB2aWRlby1zZWNvbmRzLXBsYXllZFxuICAgKlxuICAgKiBJbmRpY2F0ZXMgdGhhdCBhIHZpZGVvIHdhcyBwbGF5aW5nIHdoZW4gdGhlXG4gICAqIHZpZGVvLXNlY29uZHMtcGxheWVkIGludGVydmFsIGZpcmVkLlxuICAgKiBAcHJvcGVydHkgeyFWaWRlb0FuYWx5dGljc0RldGFpbHNEZWZ9IGRldGFpbHNcbiAgICogQGV2ZW50IHZpZGVvLXNlc3Npb24tdmlzaWJsZVxuICAgKi9cbiAgU0VDT05EU19QTEFZRUQ6ICd2aWRlby1zZWNvbmRzLXBsYXllZCcsXG59O1xuXG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqICAgYXV0b3BsYXk6IGJvb2xlYW4sXG4gKiAgIGN1cnJlbnRUaW1lOiBudW1iZXIsXG4gKiAgIGR1cmF0aW9uOiBudW1iZXIsXG4gKiAgIGhlaWdodDogbnVtYmVyLFxuICogICBpZDogc3RyaW5nLFxuICogICBwbGF5ZWRSYW5nZXNKc29uOiBzdHJpbmcsXG4gKiAgIHBsYXllZFRvdGFsOiBudW1iZXIsXG4gKiAgIG11dGVkOiBib29sZWFuLFxuICogICBzdGF0ZTogc3RyaW5nLFxuICogICB3aWR0aDogbnVtYmVyXG4gKiB9fVxuICovXG5leHBvcnQgbGV0IFZpZGVvQW5hbHl0aWNzRGV0YWlsc0RlZjtcbiIsIi8qISBodHRwczovL210aHMuYmUvY3NzZXNjYXBlIHYxLjUuMSBieSBAbWF0aGlhcyB8IE1JVCBsaWNlbnNlICovXG5cblxuLyoqXG4gKiBUaGlzIHJlZ2V4IGNvbnNpc3RzIG9mIDQgbWF0Y2hpbmcgY2FwdHVyZSBncm91cHMgYW5kIG9uZSAobm9uLW1hdGNoaW5nKSBmYWxsYmFjazpcbiAqXG4gKiAtIChcXDApLCBjYXRjaCB0aGUgbnVsbCB0ZXJtaW5hdG9yIGNoYXJhY3RlciBzbyBpdCBtYXkgYmUgcmVwbGFjZWQgYnkgVVRGXG4gKiAgIFJlcGxhY2VtZW50IENoYXJcbiAqIC0gXigtKSQsIGNhdGNoIGEgc29saXRhcnkgZGFzaCBjaGFyLCBzbyB0aGF0IGl0IG1heSBiZSBiYWNrc2xhc2ggZXNjYXBlZC5cbiAqICAgVGhpcyBpcyBhIHNlcGFyYXRlIGNhcHR1cmUgZ3JvdXAgc28gdGhhdCB0aGUgbGVnYWwtY2hhcnMgKGdyb3VwIDQpIGRvZXNuJ3RcbiAqICAgY2FwdHVyZSBpdCBmaXJzdCwgc2luY2UgdGhhdCBncm91cCBkb2Vzbid0IG5lZWQgdG8gZXNjYXBlIGl0cyBkYXNoLlxuICogLSAoW1xceDAxLVxceDFmXFx4N2ZdfF4tP1swLTldKSwgY2F0Y2ggYSBVVEYgY29udHJvbCBjaGFyLCBvciBhbnkgbGVhZGluZ1xuICogICBudW1iZXIgKHdpdGggYW4gb3B0aW9uYWwgbGVhZGluZyBkYXNoKS4gVGhlIGNvbnRyb2wgb3IgdGhlIG51bWJlciAoYnV0IG5vdFxuICogICB0aGUgbGVhZGluZyBkYXNoKSBtdXN0IGJlIGhleC1lc2NhcGVkLC5cbiAqIC0gKFtcXHg4MC1cXHVmZmZmMC05YS16QS1aXy1dKyksIGNhdGNoIGxlZ2FsLWNoYXJzLCB3aXRoIHRoZSBleGNlcHRpb24gb2YgYVxuICogICBzb2xpdGFyeSBkYXNoLCB3aGljaCB3aWxsIGFscmVhZHkgaGF2ZSBtYXRjaGVkIGluIGdyb3VwIDEuXG4gKiAtIFteXSwgZmluYWxseSwgYSBjYXRjaC1hbGwgdGhhdCBhbGxvd3MgdXMgdG8gYmFja3NsYXNoIGVzY2FwZSB0aGUgY2hhci5cbiAqXG4gKiBUb2dldGhlciwgdGhpcyBtYXRjaGVzIGV2ZXJ5dGhpbmcgbmVjZXNzYXJ5IGZvciBDU1MuZXNjYXBlLlxuICovXG52YXIgcmVnZXggPSAvKFxcMCl8XigtKSR8KFtcXHgwMS1cXHgxZlxceDdmXXxeLT9bMC05XSl8KFtcXHg4MC1cXHVmZmZmMC05YS16QS1aXy1dKyl8W15dL2c7XG5cbmZ1bmN0aW9uIGVzY2FwZXIobWF0Y2gsIG5pbCwgZGFzaCwgaGV4RXNjYXBlLCBjaGFycykge1xuICAvLyBDaGFycyBpcyB0aGUgbGVnYWwtY2hhcnMgKGdyb3VwIDQpIGNhcHR1cmVcbiAgaWYgKGNoYXJzKSB7XG4gICAgcmV0dXJuIGNoYXJzO1xuICB9XG4gIC8vIE5pbCBpcyB0aGUgbnVsbCB0ZXJtaW5hdG9yIChncm91cCAxKSBjYXB0dXJlXG4gIGlmIChuaWwpIHtcbiAgICByZXR1cm4gJ1xcdUZGRkQnO1xuICB9XG4gIC8vIEJvdGggVVRGIGNvbnRyb2wgY2hhcnMsIGFuZCBsZWFkaW5nIG51bWJlcnMgKHdpdGggb3B0aW9uYWwgbGVhZGluZyBkYXNoKVxuICAvLyAoZ3JvdXAgMykgbXVzdCBiZSBiYWNrc2xhc2ggZXNjYXBlZCB3aXRoIGEgdHJhaWxpbmcgc3BhY2UuICBGdW5uaWx5LCB0aGVcbiAgLy8gbGVhZGluZyBkYXNoIG11c3Qgbm90IGJlIGVzY2FwZWQsIGJ1dCB0aGUgbnVtYmVyLiA6c2hydWc6XG4gIGlmIChoZXhFc2NhcGUpIHtcbiAgICByZXR1cm4gbWF0Y2guc2xpY2UoMCwgLTEpICsgJ1xcXFwnICsgbWF0Y2guc2xpY2UoLTEpLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpICsgJyAnXG4gIH1cbiAgLy8gRmluYWxseSwgdGhlIHNvbGl0YXJ5IGRhc2ggYW5kIHRoZSBjYXRjaC1hbGwgY2hhcnMgcmVxdWlyZSBiYWNrc2xhc2hcbiAgLy8gZXNjYXBpbmcuXG4gIHJldHVybiAnXFxcXCcgKyBtYXRjaDtcbn1cblxuLyoqXG4gKiBodHRwczovL2RyYWZ0cy5jc3N3Zy5vcmcvY3Nzb20vI3NlcmlhbGl6ZS1hbi1pZGVudGlmaWVyXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNzc0VzY2FwZSh2YWx1ZSkge1xuICByZXR1cm4gU3RyaW5nKHZhbHVlKS5yZXBsYWNlKHJlZ2V4LCBlc2NhcGVyKTtcbn1cbiJdfQ=="}